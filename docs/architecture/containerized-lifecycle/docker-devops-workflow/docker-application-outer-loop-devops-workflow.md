---
title: Kroky ve vývoji DevOps vnější smyčky pro aplikaci Dockeru
description: Naučte se kroky pro "vnější smyčku" pracovního postupu DevOps
ms.date: 02/15/2019
ms.openlocfilehash: 735f92c00cd6279649ec3b0c35cfb00543f21a8c
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/14/2020
ms.locfileid: "75936784"
---
# <a name="steps-in-the-outer-loop-devops-workflow-for-a-docker-application"></a><span data-ttu-id="7674f-103">Kroky ve vývoji DevOps vnější smyčky pro aplikaci Dockeru</span><span class="sxs-lookup"><span data-stu-id="7674f-103">Steps in the outer-loop DevOps workflow for a Docker application</span></span>

<span data-ttu-id="7674f-104">Obrázek 5-1 představuje end-to-end zobrazení kroků, které tvoří Pracovní postup devOps vnější smyčky.</span><span class="sxs-lookup"><span data-stu-id="7674f-104">Figure 5-1 presents an end-to-end depiction of the steps comprising the DevOps outer-loop workflow.</span></span> <span data-ttu-id="7674f-105">Zobrazuje "vnější smyčku" DevOps.</span><span class="sxs-lookup"><span data-stu-id="7674f-105">It shows the "outer loop" of DevOps.</span></span> <span data-ttu-id="7674f-106">Při přepnutí kódu do repo, je spuštěn kanál CI, pak začne kanál CD, kde se aplikace nasadí.</span><span class="sxs-lookup"><span data-stu-id="7674f-106">When code is pushed to the repo, a CI pipeline is started, then begins the CD pipeline, where the application gets deployed.</span></span> <span data-ttu-id="7674f-107">Metriky shromážděné z nasazených aplikací jsou vráceny zpět do úlohy vývoje, kde dochází k "vnitřní smyčce", takže vývojové týmy mají skutečná data, která reagují na potřeby uživatelů a podniků.</span><span class="sxs-lookup"><span data-stu-id="7674f-107">Metrics collected from deployed applications are fed back into the development workload, where the "inner loop" occurs, so development teams have actual data to respond to user and business needs.</span></span>

![Diagram znázorňující 6 kroků pracovního postupu devOps vnější smyčky.](./media/docker-application-outer-loop-devops-workflow/overview-dev-ops-outter-loop-workflow.png)

<span data-ttu-id="7674f-109">**Obrázek 5-1**.</span><span class="sxs-lookup"><span data-stu-id="7674f-109">**Figure 5-1**.</span></span> <span data-ttu-id="7674f-110">Pracovní postup DevOps s vnější smyčkou pro aplikace Dockeru s nástroji Microsoftu</span><span class="sxs-lookup"><span data-stu-id="7674f-110">DevOps outer-loop workflow for Docker applications with Microsoft tools</span></span>

<span data-ttu-id="7674f-111">Nyní se podívejme na každý z těchto kroků podrobněji.</span><span class="sxs-lookup"><span data-stu-id="7674f-111">Now, let's examine each of these steps in greater detail.</span></span>

## <a name="step-1-inner-loop-development-workflow"></a><span data-ttu-id="7674f-112">Krok 1: Pracovní postup vývoje vnitřní smyčky</span><span class="sxs-lookup"><span data-stu-id="7674f-112">Step 1: Inner-loop development workflow</span></span>

<span data-ttu-id="7674f-113">Tento krok je podrobně vysvětlen v kapitole 4, ale pro rekapitulaci, zde je místo, kde začíná vnější smyčka, okamžik, kdy vývojář odešle kód do systému správy správy zdrojového kódu (jako je Git) inicializační akce kanálu CI.</span><span class="sxs-lookup"><span data-stu-id="7674f-113">This step is explained in detail in Chapter 4, but, to recap, here is where the outer-loop begins, the moment at which a developer pushes code to the source control management system (like Git) initiating CI pipeline actions.</span></span>

## <a name="step-2-source-code-control-integration-and-management-with-azure-devops-services-and-git"></a><span data-ttu-id="7674f-114">Krok 2: Integrace a správa správy zdrojového kódu se službami Azure DevOps services a Git</span><span class="sxs-lookup"><span data-stu-id="7674f-114">Step 2: Source-Code Control integration and management with Azure DevOps Services and Git</span></span>

<span data-ttu-id="7674f-115">V tomto kroku musíte mít systém správy verzí shromáždit konsolidovanou verzi všech kódů pocházejících z různých vývojářů v týmu.</span><span class="sxs-lookup"><span data-stu-id="7674f-115">At this step, you need to have a version-control system to gather a consolidated version of all the code coming from the different developers in the team.</span></span>

<span data-ttu-id="7674f-116">I když se správa zdrojového kódu (SCC) a správa zdrojového kódu mohou většině vývojářů jevit jako druhořadé povahy, při vytváření aplikací Dockeru v životním cyklu DevOps je důležité zdůraznit, že s aplikací nesmíte odesílat ibližové image Dockeru. přímo do globálního registru Docker (jako je Azure Container Registry nebo Docker Hub) z počítače vývojáře.</span><span class="sxs-lookup"><span data-stu-id="7674f-116">Even though source-code control (SCC) and source-code management might seem second-nature to most developers, when creating Docker applications in a DevOps life cycle, it's critical to emphasize that you must not submit the Docker images with the application directly to the global Docker Registry (like Azure Container Registry or Docker Hub) from the developer's machine.</span></span> <span data-ttu-id="7674f-117">Naopak image Dockeru, které mají být uvolněny a nasazeny do produkčního prostředí, musí být vytvořeny výhradně na zdrojovém kódu, který je integrován do globálního sestavení nebo kanálu CI na základě úložiště zdrojového kódu (například Git).</span><span class="sxs-lookup"><span data-stu-id="7674f-117">On the contrary, the Docker images to be released and deployed to production environments must be created solely on the source code that's being integrated in your global build or CI pipeline based on your source-code repository (like Git).</span></span>

<span data-ttu-id="7674f-118">Místní bitové kopie, generované vývojáři, by měly být používány pouze jimi při testování v rámci svých vlastních počítačů.</span><span class="sxs-lookup"><span data-stu-id="7674f-118">The local images, generated by developers, should just be used by them when testing within their own machines.</span></span> <span data-ttu-id="7674f-119">To je důvod, proč je důležité mít kanál DevOps aktivován z kódu SCC.</span><span class="sxs-lookup"><span data-stu-id="7674f-119">That's why it's critical to have the DevOps pipeline activated from the SCC code.</span></span>

<span data-ttu-id="7674f-120">Služby Azure DevOps services a team foundation server podporují git a řízení verzí Team Foundation.</span><span class="sxs-lookup"><span data-stu-id="7674f-120">Azure DevOps Services and Team Foundation Server support Git and Team Foundation Version Control.</span></span> <span data-ttu-id="7674f-121">Můžete si mezi nimi vybrat a použít je pro komplexní prostředí microsoftu.</span><span class="sxs-lookup"><span data-stu-id="7674f-121">You can choose between them and use it for an end-to-end Microsoft experience.</span></span> <span data-ttu-id="7674f-122">Můžete však také spravovat kód v externích úložištích (jako je GitHub, místní úložiště Git nebo Subversion) a stále se k němu můžete připojit a získat kód jako výchozí bod pro kanál DevOps CI.</span><span class="sxs-lookup"><span data-stu-id="7674f-122">However, you also can manage your code in external repositories (like GitHub, on-premises Git repositories, or Subversion) and still be able to connect to it and get the code as the starting point for your DevOps CI pipeline.</span></span>

## <a name="step-3-build-ci-integrate-and-test-with-azure-devops-services-and-docker"></a><span data-ttu-id="7674f-123">Krok 3: Sestavení, vytváření, integrace a testování se službami Azure DevOps a Dockerem</span><span class="sxs-lookup"><span data-stu-id="7674f-123">Step 3: Build, CI, Integrate, and Test with Azure DevOps Services and Docker</span></span>

<span data-ttu-id="7674f-124">CI se objevil jako standard pro moderní testování a dodávku softwaru.</span><span class="sxs-lookup"><span data-stu-id="7674f-124">CI has emerged as a standard for modern software testing and delivery.</span></span> <span data-ttu-id="7674f-125">Řešení Docker udržuje jasné oddělení problémů mezi vývojovými a provozními týmy.</span><span class="sxs-lookup"><span data-stu-id="7674f-125">The Docker solution maintains a clear separation of concerns between the development and operations teams.</span></span> <span data-ttu-id="7674f-126">Neměnnost iobrazek Dockeru zajišťuje opakovatelné nasazení mezi tím, co je vyvinuto, testováno prostřednictvím CI a spuštěno v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="7674f-126">The immutability of Docker images ensures a repeatable deployment between what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="7674f-127">Docker Engine nasazený napříč vývojářskými notebooky a testovací infrastrukturou činí kontejnery přenosnými napříč prostředími.</span><span class="sxs-lookup"><span data-stu-id="7674f-127">Docker Engine deployed across the developer laptops and test infrastructure makes the containers portable across environments.</span></span>

<span data-ttu-id="7674f-128">V tomto okamžiku poté, co máte systém správy verzí se správným kódem odeslány, budete potřebovat *sestavení služby* vyzvednout kód a spustit globální sestavení a testy.</span><span class="sxs-lookup"><span data-stu-id="7674f-128">At this point, after you have a version-control system with the correct code submitted, you need a *build service* to pick up the code and run the global build and tests.</span></span>

<span data-ttu-id="7674f-129">Interní pracovní postup pro tento krok (CI, sestavení, test) je o konstrukci kanálu CI skládající se z úložiště kódu (Git, atd.), serveru sestavení (Azure DevOps Services), Docker Engine a registru Dockeru.</span><span class="sxs-lookup"><span data-stu-id="7674f-129">The internal workflow for this step (CI, build, test) is about the construction of a CI pipeline consisting of your code repository (Git, etc.), your build server (Azure DevOps Services), Docker Engine, and a Docker Registry.</span></span>

<span data-ttu-id="7674f-130">Služby Azure DevOps Services můžete použít jako základ pro vytváření aplikací a nastavení kanálu CI a pro publikování vytvořených "artefaktů" do "úložiště artefaktů", což je vysvětleno v dalším kroku.</span><span class="sxs-lookup"><span data-stu-id="7674f-130">You can use Azure DevOps Services as the foundation for building your applications and setting your CI pipeline, and for publishing the built "artifacts" to an "artifacts repository," which is explained in the next step.</span></span>

<span data-ttu-id="7674f-131">Při použití Dockeru pro nasazení jsou "konečné artefakty", které mají být nasazeny, iimage Dockeru s vaší aplikací nebo službami vloženými do nich.</span><span class="sxs-lookup"><span data-stu-id="7674f-131">When using Docker for the deployment, the "final artifacts" to be deployed are Docker images with your application or services embedded within them.</span></span> <span data-ttu-id="7674f-132">Tyto image se odesazují nebo publikují do *registru Dockeru* (privátní úložiště, jako jsou ty, které můžete mít v Azure Container Registry, nebo veřejné, jako je Docker Hub Registry, který se běžně používá pro oficiální základní image).</span><span class="sxs-lookup"><span data-stu-id="7674f-132">Those images are pushed or published to a *Docker Registry* (a private repository like the ones you can have in Azure Container Registry, or a public one like Docker Hub Registry, which is commonly used for official base images).</span></span>

<span data-ttu-id="7674f-133">Zde je základní koncept: Kanál CI bude vykopnut potvrzením úložiště SCC, jako je Git.</span><span class="sxs-lookup"><span data-stu-id="7674f-133">Here is the basic concept: The CI pipeline will be kicked-off by a commit to an SCC repository like Git.</span></span> <span data-ttu-id="7674f-134">Potvrzení způsobí, že Služby Azure DevOps spustí úlohu sestavení v kontejneru Dockeru a po úspěšném dokončení této úlohy posunou image Dockeru do registru Dockeru, jak je znázorněno na obrázku 5-2.</span><span class="sxs-lookup"><span data-stu-id="7674f-134">The commit will cause Azure DevOps Services to run a build job within a Docker container and, upon successful completion of that job, push a Docker image to the Docker Registry, as illustrated in Figure 5-2.</span></span> <span data-ttu-id="7674f-135">První část vnější smyčky zahrnuje kroky 1 až 3, z kódu, spustit, ladit a ověřit, pak kód repo až sestavení a test CI krok.</span><span class="sxs-lookup"><span data-stu-id="7674f-135">The first part of the outer loop involves steps 1 to 3, from code, run, debug and validate, then the code repo up to the build and test CI step.</span></span>

![Diagram znázorňující tři kroky související s pracovním postupem CI.](./media/docker-application-outer-loop-devops-workflow/continuous-integration-steps.png)

<span data-ttu-id="7674f-137">**Obrázek 5-2**.</span><span class="sxs-lookup"><span data-stu-id="7674f-137">**Figure 5-2**.</span></span> <span data-ttu-id="7674f-138">Kroky spojené s ci</span><span class="sxs-lookup"><span data-stu-id="7674f-138">The steps involved in CI</span></span>

<span data-ttu-id="7674f-139">Tady jsou základní kroky pracovního postupu CI s Dockerem a Službami Azure DevOps:</span><span class="sxs-lookup"><span data-stu-id="7674f-139">Here are the basic CI workflow steps with Docker and Azure DevOps Services:</span></span>

1. <span data-ttu-id="7674f-140">Vývojář odešle potvrzení do úložiště SCC (Git/Azure DevOps Services, GitHub atd.).</span><span class="sxs-lookup"><span data-stu-id="7674f-140">The developer pushes a commit to an SCC repository (Git/Azure DevOps Services, GitHub, etc.).</span></span>

2. <span data-ttu-id="7674f-141">Pokud používáte Služby Azure DevOps nebo Git, je integrovaná ci, což znamená, že je stejně jednoduché jako zaškrtnutí políčka ve službách Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="7674f-141">If you're using Azure DevOps Services or Git, CI is built in, which means that it's as simple as selecting a check box in Azure DevOps Services.</span></span> <span data-ttu-id="7674f-142">Pokud používáte externí SCC (jako Je `webhook` GitHub), a upozorní Služby Azure DevOps na aktualizaci nebo push na Git/GitHub.</span><span class="sxs-lookup"><span data-stu-id="7674f-142">If you're using an external SCC (like GitHub), a `webhook` will notify Azure DevOps Services of the update or push to Git/GitHub.</span></span>

3. <span data-ttu-id="7674f-143">Azure DevOps Services vytáhne úložiště SCC, včetně Dockerfile popisující image, stejně jako aplikace a testovací kód.</span><span class="sxs-lookup"><span data-stu-id="7674f-143">Azure DevOps Services pulls the SCC repository, including the Dockerfile describing the image, as well as the application and test code.</span></span>

4. <span data-ttu-id="7674f-144">Azure DevOps Services vytvoří image Dockeru a označí ji číslem sestavení.</span><span class="sxs-lookup"><span data-stu-id="7674f-144">Azure DevOps Services builds a Docker image and labels it with a build number.</span></span>

5. <span data-ttu-id="7674f-145">Azure DevOps Services instanci kontejneru Dockeru v rámci zřízeného hostitele Dockeru a spustí příslušné testy.</span><span class="sxs-lookup"><span data-stu-id="7674f-145">Azure DevOps Services instantiates the Docker container within the provisioned Docker Host, and runs the appropriate tests.</span></span>

6. <span data-ttu-id="7674f-146">Pokud jsou testy úspěšné, bitová kopie se nejprve přeznačí na smysluplný název, abyste věděli, že se jedná o "požehnané sestavení" (například "/1.0.0" nebo jakýkoli jiný popisek) a poté se posune do registru Docker (Docker Hub, Azure Container Registry, DTR atd.)</span><span class="sxs-lookup"><span data-stu-id="7674f-146">If the tests are successful, the image is first relabeled to a meaningful name so that you know it's a "blessed build" (like "/1.0.0" or any other label), and then pushed up to your Docker Registry (Docker Hub, Azure Container Registry, DTR, etc.)</span></span>

### <a name="implementing-the-ci-pipeline-with-azure-devops-services-and-the-docker-extension-for-azure-devops-services"></a><span data-ttu-id="7674f-147">Implementace kanálu CI pomocí služeb Azure DevOps Services a rozšíření Dockeru pro služby Azure DevOps Services</span><span class="sxs-lookup"><span data-stu-id="7674f-147">Implementing the CI pipeline with Azure DevOps Services and the Docker extension for Azure DevOps Services</span></span>

<span data-ttu-id="7674f-148">Visual Studio Azure DevOps Services obsahuje šablony build & release, které můžete použít ve vašem kanálu CI/CD, se kterými můžete vytvářet ibi Dockeru, přesouvat ibi Dockeru do ověřeného registru Dockeru, spouštět ibi Dockeru nebo spouštět další operace nabízené cli Dockeru.</span><span class="sxs-lookup"><span data-stu-id="7674f-148">Visual Studio Azure DevOps Services contains Build & Release Templates that you can use in your CI/CD pipeline with which you can build Docker images, push Docker images to an authenticated Docker registry, run Docker images, or run other operations offered by the Docker CLI.</span></span> <span data-ttu-id="7674f-149">Přidá také úlohu Docker Compose, kterou můžete použít k vytváření, nabízení a spouštění vícekontejnerových aplikací Dockeru nebo ke spuštění jiných operací nabízených cli zásobníku Dockercomse, jak je znázorněno na obrázku 5-3.</span><span class="sxs-lookup"><span data-stu-id="7674f-149">It also adds a Docker Compose task that you can use to build, push, and run multi-container Docker applications, or run other operations offered by the Docker Compose CLI, as shown in Figure 5-3.</span></span>

![Snímek obrazovky kanálu Docker CI v Azure DevOps.](./media/docker-application-outer-loop-devops-workflow/docker-ci-pipeline-azure-devops.png)

<span data-ttu-id="7674f-151">**Obrázek 5-3**.</span><span class="sxs-lookup"><span data-stu-id="7674f-151">**Figure 5-3**.</span></span> <span data-ttu-id="7674f-152">Kanál Docker CI ve službách Azure DevOps, včetně šablon build & release a přidružených úloh.</span><span class="sxs-lookup"><span data-stu-id="7674f-152">The Docker CI pipeline in Azure DevOps Services including Build & Release Templates and associated tasks.</span></span>

<span data-ttu-id="7674f-153">Tyto šablony a úkoly můžete použít k vytvoření artefaktů CI/CD pro sestavení nebo testování a nasazení ve službě Azure Service Fabric, službě Azure Kubernetes a podobných nabídkách.</span><span class="sxs-lookup"><span data-stu-id="7674f-153">You can use these templates and tasks to construct your CI/CD artifacts to Build / Test and Deploy in Azure Service Fabric, Azure Kubernetes Service, and similar offerings.</span></span>

<span data-ttu-id="7674f-154">S těmito úlohami Visual Studio Team Services, sestavení Linux-Docker Host/VM zřízené v Azure a upřednostňovaný registr Dockeru (Azure Container Registry, Docker Hub, privátní Docker DTR nebo jakýkoli jiný registr Dockeru) můžete sestavit kanál IKTo u a konzistentně.</span><span class="sxs-lookup"><span data-stu-id="7674f-154">With these Visual Studio Team Services tasks, a build Linux-Docker Host/VM provisioned in Azure and your preferred Docker registry (Azure Container Registry, Docker Hub, private Docker DTR, or any other Docker registry) you can assemble your Docker CI pipeline in a very consistent way.</span></span>

<span data-ttu-id="7674f-155">***Požadavky:***</span><span class="sxs-lookup"><span data-stu-id="7674f-155">***Requirements:***</span></span>

- <span data-ttu-id="7674f-156">Azure DevOps Services nebo pro místní instalace, Team Foundation Server 2015 Update 3 nebo novější.</span><span class="sxs-lookup"><span data-stu-id="7674f-156">Azure DevOps Services, or for on-premises installations, Team Foundation Server 2015 Update 3 or later.</span></span>

- <span data-ttu-id="7674f-157">Agent služby Azure DevOps Services, který má binární soubory Dockeru.</span><span class="sxs-lookup"><span data-stu-id="7674f-157">An Azure DevOps Services agent that has the Docker binaries.</span></span>

  <span data-ttu-id="7674f-158">Snadný způsob, jak vytvořit jednoho z těchto agentů, je použití Dockeru ke spuštění kontejneru na základě image dockeru agenta Služby Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="7674f-158">An easy way to create one of these agents is to use Docker to run a container based on the Azure DevOps Services agent Docker image.</span></span>

> [! INFORMACE]<span data-ttu-id="7674f-159"> Další informace o sestavení kanálu Azure DevOps Services Docker CI a zobrazení návodů najdete na těchto webech:</span><span class="sxs-lookup"><span data-stu-id="7674f-159"> To read more about assembling an Azure DevOps Services Docker CI pipeline and view the walkthroughs, visit these sites:</span></span>
>
> - <span data-ttu-id="7674f-160">Spuštění agenta služby Visual Studio Team Services (Now Azure DevOps Services) jako kontejneru Dockeru: </span><span class="sxs-lookup"><span data-stu-id="7674f-160">Running a Visual Studio Team Services (Now Azure DevOps Services) agent as a Docker container: </span></span>\
>   <https://hub.docker.com/_/microsoft-azure-pipelines-vsts-agent>
>
> - <span data-ttu-id="7674f-161">Vytváření bitových kopií Linux dockeru .NET Core pomocí služeb Azure DevOps: </span><span class="sxs-lookup"><span data-stu-id="7674f-161">Building .NET Core Linux Docker images with Azure DevOps Services: </span></span>\
>   <https://docs.microsoft.com/archive/blogs/stevelasker/building-net-core-linux-docker-images-with-visual-studio-team-services>
>
> - <span data-ttu-id="7674f-162">Vytváření počítače pro sestavení služby Visual Studio Team Service založené na Linuxu s podporou Dockeru: </span><span class="sxs-lookup"><span data-stu-id="7674f-162">Building a Linux-based Visual Studio Team Service build machine with Docker support: </span></span>\
>   <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support>

### <a name="integrate-test-and-validate-multi-container-docker-applications"></a><span data-ttu-id="7674f-163">Integrace, testování a ověřování aplikací Dockeru s více kontejnery</span><span class="sxs-lookup"><span data-stu-id="7674f-163">Integrate, test, and validate multi-container Docker applications</span></span>

<span data-ttu-id="7674f-164">Většina aplikací Dockeru se obvykle skládá z více kontejnerů, nikoli z jednoho kontejneru.</span><span class="sxs-lookup"><span data-stu-id="7674f-164">Typically, most Docker applications are composed of multiple containers rather than a single container.</span></span> <span data-ttu-id="7674f-165">Dobrým příkladem je aplikace orientovaná na mikroslužby, pro kterou byste měli jeden kontejner na mikroslužbu.</span><span class="sxs-lookup"><span data-stu-id="7674f-165">A good example is a microservices-oriented application for which you would have one container per microservice.</span></span> <span data-ttu-id="7674f-166">Ale i bez přísné dodržování vzorců přístupu mikroslužeb je pravděpodobné, že vaše aplikace Dockeru by se skládala z více kontejnerů nebo služeb.</span><span class="sxs-lookup"><span data-stu-id="7674f-166">But, even without strictly following the microservices approach patterns, it's probable that your Docker application would be composed of multiple containers or services.</span></span>

<span data-ttu-id="7674f-167">Proto po sestavení kontejnerů aplikace v kanálu CI, je také nutné nasadit, integrovat a otestovat aplikaci jako celek se všemi jeho kontejnery v rámci integrace hostitele Dockeru nebo dokonce do testovacího clusteru, do kterého jsou vaše kontejnery Distribuované.</span><span class="sxs-lookup"><span data-stu-id="7674f-167">Therefore, after building the application containers in the CI pipeline, you also need to deploy, integrate, and test the application as a whole with all of its containers within an integration Docker host or even into a test cluster to which your containers are distributed.</span></span>

<span data-ttu-id="7674f-168">Pokud používáte jednoho hostitele, můžete použít příkazy Dockeru, jako je docker-compose k sestavení a nasazení souvisejících kontejnerů k testování a ověřování prostředí Dockeru v jednom virtuálním provozu.</span><span class="sxs-lookup"><span data-stu-id="7674f-168">If you're using a single host, you can use Docker commands such as docker-compose to build and deploy related containers to test and validate the Docker environment in a single VM.</span></span> <span data-ttu-id="7674f-169">Ale pokud pracujete s clusteru orchestrator, jako je DC/OS, Kubernetes nebo Docker Swarm, musíte nasadit kontejnery prostřednictvím jiného mechanismu nebo orchestrátoru, v závislosti na vybraném clusteru nebo plánovače.</span><span class="sxs-lookup"><span data-stu-id="7674f-169">But, if you're working with an orchestrator cluster like DC/OS, Kubernetes, or Docker Swarm, you need to deploy your containers through a different mechanism or orchestrator, depending on your selected cluster/scheduler.</span></span>

<span data-ttu-id="7674f-170">Následuje několik typů testů, které můžete spustit proti kontejnery Dockeru:</span><span class="sxs-lookup"><span data-stu-id="7674f-170">The following are several types of tests that you can run against Docker containers:</span></span>

- <span data-ttu-id="7674f-171">Jednotkové testy pro kontejnery Dockeru</span><span class="sxs-lookup"><span data-stu-id="7674f-171">Unit tests for Docker containers</span></span>

- <span data-ttu-id="7674f-172">Testovací skupiny vzájemně propojených aplikací nebo mikroslužeb</span><span class="sxs-lookup"><span data-stu-id="7674f-172">Testing groups of interrelated applications or microservices</span></span>

- <span data-ttu-id="7674f-173">Zkouška ve výrobě a "kanárské" verze</span><span class="sxs-lookup"><span data-stu-id="7674f-173">Test in production and "canary" releases</span></span>

<span data-ttu-id="7674f-174">Důležité je, že při spuštění integrace a funkční testy, je nutné spustit tyto testy z mimo kontejnery.</span><span class="sxs-lookup"><span data-stu-id="7674f-174">The important point is that when running integration and functional tests, you must run those tests from outside of the containers.</span></span> <span data-ttu-id="7674f-175">Testy nejsou obsaženy nebo spustit v kontejnerech, které nasazujete, protože kontejnery jsou založeny na statické image, které by měly být přesně jako ty, které budete nasazovat do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="7674f-175">Tests are not contained or run in the containers you're deploying, because the containers are based on static images that should be exactly like the ones you'll be deploying to production.</span></span>

<span data-ttu-id="7674f-176">Praktickou možností při testování pokročilejších scénářů, jako je včetně několika clusterů (testovací cluster, pracovní cluster a produkční cluster) je publikovat bitové kopie do registru, aby mohly být testovány v různých clusterech.</span><span class="sxs-lookup"><span data-stu-id="7674f-176">A practical option when testing more advanced scenarios, like including several clusters (test cluster, staging cluster, and production cluster) is to publish the images to a registry, so it can be tested in various clusters.</span></span>

### <a name="push-the-custom-application-docker-image-into-your-global-docker-registry"></a><span data-ttu-id="7674f-177">Zasunutí image Dockeru vlastní aplikace do globálního registru Dockeru</span><span class="sxs-lookup"><span data-stu-id="7674f-177">Push the custom application Docker image into your global Docker Registry</span></span>

<span data-ttu-id="7674f-178">Po otestování a ověření ibitých bitových kopií Dockeru je budete chtít označit a publikovat do registru Dockeru.</span><span class="sxs-lookup"><span data-stu-id="7674f-178">After the Docker images have been tested and validated, you'll want to tag and publish them to your Docker registry.</span></span> <span data-ttu-id="7674f-179">Registr Dockeru je kritický mj.</span><span class="sxs-lookup"><span data-stu-id="7674f-179">The Docker registry is a critical piece in the Docker application life cycle because it's the central place where you store your custom test (also known as "blessed images") to be deployed into QA and production environments.</span></span>

<span data-ttu-id="7674f-180">Podobně jako kód aplikace uložený ve vašem úložišti SCC (Git, atd.) je vaším "zdrojem pravdy", registr Dockeru je vaším "zdrojem pravdy" pro binární aplikaci nebo bity, které mají být nasazeny do qa nebo produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="7674f-180">Similar to how the application code stored in your SCC repository (Git, etc.) is your "source of truth," the Docker registry is your "source of truth" for your binary application or bits to be deployed to the QA or production environments.</span></span>

<span data-ttu-id="7674f-181">Obvykle můžete chtít mít privátní úložiště pro vlastní image buď v privátním úložišti v registru kontejnerů Azure nebo v místním registru, jako je Důvěryhodný registr Dockeru, nebo v registru veřejného cloudu s omezeným přístupem (například Docker Hub), i když v tomto posledním případě, pokud váš kód není open source, musíte důvěřovat zabezpečení dodavatele.</span><span class="sxs-lookup"><span data-stu-id="7674f-181">Typically, you might want to have your private repositories for your custom images either in a private repository in Azure Container Registry or in an on-premises registry like Docker Trusted Registry, or in a public-cloud registry with restricted access (like Docker Hub), although in this last case if your code is not open source, you must trust the vendor's security.</span></span> <span data-ttu-id="7674f-182">Ať tak či onak, metoda, `docker push` kterou používáte, je podobná a je založena na příkazu, jak je znázorněno na obrázku 5-4.</span><span class="sxs-lookup"><span data-stu-id="7674f-182">Either way, the method you use is similar and is based on the `docker push` command, as shown in Figure 5-4.</span></span>

![Diagram znázorňující nabízení vlastních irek do registru kontejnerů.](./media/docker-application-outer-loop-devops-workflow/docker-push-custom-images.png)

<span data-ttu-id="7674f-184">**Obrázek 5-4**.</span><span class="sxs-lookup"><span data-stu-id="7674f-184">**Figure 5-4**.</span></span> <span data-ttu-id="7674f-185">Publikování vlastních iobrazů do registru Dockeru</span><span class="sxs-lookup"><span data-stu-id="7674f-185">Publishing custom images to Docker Registry</span></span>

<span data-ttu-id="7674f-186">V kroku 3 pro vytváření integrace a testování (CI) můžete publikovat výsledné image dockeru do soukromého nebo veřejného registru.</span><span class="sxs-lookup"><span data-stu-id="7674f-186">In step 3, for building integration and testing (CI) you might publish the resulting docker images to a private or public registry.</span></span> <span data-ttu-id="7674f-187">Existuje několik nabídek registrů Dockeru od dodavatelů cloudu, jako je Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry a tak dále.</span><span class="sxs-lookup"><span data-stu-id="7674f-187">There are multiple offerings of Docker registries from cloud vendors like Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry, and so on.</span></span>

<span data-ttu-id="7674f-188">Pomocí úloh Dockeru můžete nabízenou sadu ibi `docker-compose.yml` služeb definované souborem s více značkami do ověřeného registru Dockeru (jako je Azure Container Registry), jak je znázorněno na obrázku 5-5.</span><span class="sxs-lookup"><span data-stu-id="7674f-188">Using the Docker tasks, you can push a set of service images defined by a `docker-compose.yml` file, with multiple tags, to an authenticated Docker registry (like Azure Container Registry), as shown in Figure 5-5.</span></span>

![Snímek obrazovky s krokem publikování obrázků do registru](./media/docker-application-outer-loop-devops-workflow/publish-custom-image-to-docker-registry.png)

<span data-ttu-id="7674f-190">**Obrázek 5-5**.</span><span class="sxs-lookup"><span data-stu-id="7674f-190">**Figure 5-5**.</span></span> <span data-ttu-id="7674f-191">Použití služeb Azure DevOps services k publikování vlastních ibi v registru Dockeru</span><span class="sxs-lookup"><span data-stu-id="7674f-191">Using Azure DevOps Services to publishing custom images to a Docker Registry</span></span>

> [! INFORMACE]<span data-ttu-id="7674f-192"> Další informace o registru <https://aka.ms/azurecontainerregistry>kontejnerů Azure naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="7674f-192"> For more information about Azure Container Registry, see <https://aka.ms/azurecontainerregistry>.</span></span>

## <a name="step-4-cd-deploy"></a><span data-ttu-id="7674f-193">Krok 4: CD, nasazení</span><span class="sxs-lookup"><span data-stu-id="7674f-193">Step 4: CD, Deploy</span></span>

<span data-ttu-id="7674f-194">Neměnnost iobrazek Dockeru zajišťuje opakovatelné nasazení s tím, co je vyvinuto, testováno prostřednictvím CI a spuštěno v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="7674f-194">The immutability of Docker images ensures a repeatable deployment with what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="7674f-195">Po publikování iontů Dockeru aplikace v registru Dockeru (privátní nebo veřejné) je můžete nasadit do několika prostředí, která můžete mít (produkční prostředí, qa, staging atd.) z kanálu CD pomocí Azure DevOps Services úlohy kanálu nebo Azure DevOps Services Release Management.</span><span class="sxs-lookup"><span data-stu-id="7674f-195">After you have the application Docker images published in your Docker registry (either private or public), you can deploy them to the several environments that you might have (production, QA, staging, etc.) from your CD pipeline by using Azure DevOps Services pipeline tasks or Azure DevOps Services Release Management.</span></span>

<span data-ttu-id="7674f-196">V tomto okamžiku však závisí na tom, jaký druh aplikace Dockeru nasazujete.</span><span class="sxs-lookup"><span data-stu-id="7674f-196">However, at this point it depends on what kind of Docker application you're deploying.</span></span> <span data-ttu-id="7674f-197">Nasazení jednoduché aplikace (z hlediska složení a nasazení) jako monolitické aplikace obsahující několik kontejnerů nebo služeb a nasazených na několik serverů nebo virtuálních počítače se liší od nasazení složitější aplikace, jako je aplikace orientovaná na mikroslužby s možnostmi hyperškálování.</span><span class="sxs-lookup"><span data-stu-id="7674f-197">Deploying a simple application (from a composition and deployment point of view) like a monolithic application comprising a few containers or services and deployed to a few servers or VMs is different from deploying a more complex application like a microservices-oriented application with hyperscale capabilities.</span></span> <span data-ttu-id="7674f-198">Tyto dva scénáře jsou vysvětleny v následujících částech.</span><span class="sxs-lookup"><span data-stu-id="7674f-198">These two scenarios are explained in the following sections.</span></span>

### <a name="deploying-composed-docker-applications-to-multiple-docker-environments"></a><span data-ttu-id="7674f-199">Nasazení komponujících aplikací Dockeru do více prostředí Dockeru</span><span class="sxs-lookup"><span data-stu-id="7674f-199">Deploying composed Docker applications to multiple Docker environments</span></span>

<span data-ttu-id="7674f-200">Podívejme se nejprve na méně složitý scénář: nasazení na jednoduché hostitele Dockeru (virtuální počítače nebo servery) v jednom prostředí nebo ve více prostředích (QA, staging a production).</span><span class="sxs-lookup"><span data-stu-id="7674f-200">Let's look first at the less-complex scenario: deploying to simple Docker hosts (VMs or servers) in a single environment or multiple environments (QA, staging, and production).</span></span> <span data-ttu-id="7674f-201">V tomto scénáři interně kanál CD můžete použít docker-compose (z úlohnasazení Azure DevOps Services) k nasazení aplikací Dockeru s jeho související sadu kontejnerů nebo služeb, jak je znázorněno na obrázku 5-6.</span><span class="sxs-lookup"><span data-stu-id="7674f-201">In this scenario, internally your CD pipeline can use docker-compose (from your Azure DevOps Services deployment tasks) to deploy the Docker applications with its related set of containers or services, as illustrated in Figure 5-6.</span></span>

![Diagram znázorňující krok nasazení disku CD-ROM ve třech prostředích.](./media/docker-application-outer-loop-devops-workflow/deploy-app-containers-to-docker-host-environments.png)

<span data-ttu-id="7674f-203">**Obrázek 5-6**.</span><span class="sxs-lookup"><span data-stu-id="7674f-203">**Figure 5-6**.</span></span> <span data-ttu-id="7674f-204">Nasazení kontejnerů aplikací do jednoduchého registru hostitelských prostředí Dockeru</span><span class="sxs-lookup"><span data-stu-id="7674f-204">Deploying application containers to simple Docker host environments registry</span></span>

<span data-ttu-id="7674f-205">Obrázek 5-7 zvýrazní, jak můžete připojit vaše sestavení CI qa/testovací prostředí prostřednictvím služby Azure DevOps kliknutím na Docker Compose v dialogovém okně Přidat úlohu.</span><span class="sxs-lookup"><span data-stu-id="7674f-205">Figure 5-7 highlights how you can connect your build CI to QA/test environments via Azure DevOps Services by clicking Docker Compose in the Add Task dialog box.</span></span> <span data-ttu-id="7674f-206">Při nasazování do pracovního nebo produkčního prostředí byste však obvykle používali funkce správy verzí, které by zpracovávaly více prostředí (jako je qa, pracovní a produkční).</span><span class="sxs-lookup"><span data-stu-id="7674f-206">However, when deploying to staging or production environments, you would usually use Release Management features handling multiple environments (like QA, staging, and production).</span></span> <span data-ttu-id="7674f-207">Pokud nasazujete do jednoho hostitele Dockeru, používá se pomocí úlohy Azure DevOps Services `docker-compose up` "Docker Compose" (která se odvolává na příkaz pod kapotou).</span><span class="sxs-lookup"><span data-stu-id="7674f-207">If you're deploying to single Docker hosts, it is using the Azure DevOps Services "Docker Compose" task (which is invoking the `docker-compose up` command under the hood).</span></span> <span data-ttu-id="7674f-208">Pokud nasazujete do služby Azure Kubernetes Service (AKS), používá úlohu nasazení Dockeru, jak je vysvětleno v následující části.</span><span class="sxs-lookup"><span data-stu-id="7674f-208">If you're deploying to Azure Kubernetes Service (AKS), it uses the Docker Deployment task, as explained in the section that follows.</span></span>

![Snímek obrazovky s dialogem Přidat úkol Vytvořit úlohu Dockeru](./media/docker-application-outer-loop-devops-workflow/add-tasks-docker-compose.png)

<span data-ttu-id="7674f-210">**Obrázek 5-7**.</span><span class="sxs-lookup"><span data-stu-id="7674f-210">**Figure 5-7**.</span></span> <span data-ttu-id="7674f-211">Přidání úlohy Docker Compose v kanálu služby Azure DevOps Services</span><span class="sxs-lookup"><span data-stu-id="7674f-211">Adding a Docker Compose task in an Azure DevOps Services pipeline</span></span>

<span data-ttu-id="7674f-212">Když vytvoříte vydání ve službě Azure DevOps Services, bude mít sadu vstupních artefaktů.</span><span class="sxs-lookup"><span data-stu-id="7674f-212">When you create a release in Azure DevOps Services, it takes a set of input artifacts.</span></span> <span data-ttu-id="7674f-213">Tyto artefakty jsou určeny k neměnné po celou dobu vydání ve všech prostředích.</span><span class="sxs-lookup"><span data-stu-id="7674f-213">These artifacts are intended to be immutable for the lifetime of the release, across all environments.</span></span> <span data-ttu-id="7674f-214">Při zavádění kontejnerů vstupní artefakty identifikovat bitové kopie v registru k nasazení.</span><span class="sxs-lookup"><span data-stu-id="7674f-214">When you introduce containers, the input artifacts identify images in a registry to deploy.</span></span> <span data-ttu-id="7674f-215">V závislosti na tom, jak jsou tyto obrázky identifikovány, není zaručeno, že zůstanou stejné po celou dobu trvání vydání, nejzřejmější případ je, když odkazujete `myimage:latest` ze souboru. `docker-compose`</span><span class="sxs-lookup"><span data-stu-id="7674f-215">Depending on how these images are identified, they are not guaranteed to remain the same throughout the duration of the release, the most obvious case being when you reference `myimage:latest` from a `docker-compose` file.</span></span>

<span data-ttu-id="7674f-216">Šablony služby Azure DevOps Services poskytují možnost generovat artefakty sestavení, které obsahují konkrétní knihovny bitových kopii registru, které zaručeně jednoznačně identifikují binární bitovou kopii stejné bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="7674f-216">The Azure DevOps Services templates give you the ability to generate build artifacts that contain specific registry image digests that are guaranteed to uniquely identify the same image binary.</span></span> <span data-ttu-id="7674f-217">To jsou to, co opravdu chcete použít jako vstup do vydání.</span><span class="sxs-lookup"><span data-stu-id="7674f-217">These are what you really want to use as input to a release.</span></span>

### <a name="managing-releases-to-docker-environments-by-using-azure-devops-services-release-management"></a><span data-ttu-id="7674f-218">Správa verzí do prostředí Dockeru pomocí Azure DevOps Services Release Management</span><span class="sxs-lookup"><span data-stu-id="7674f-218">Managing releases to Docker environments by using Azure DevOps Services Release Management</span></span>

<span data-ttu-id="7674f-219">Prostřednictvím šablon Azure DevOps Services můžete vytvořit novou bitovou kopii, publikovat ji do registru Dockeru, `docker-compose` spustit ji na hostitelích Linuxu nebo Windows a použít příkazy, jako je nasazení více kontejnerů jako celé aplikace, a to prostřednictvím funkcí Azure DevOps Services Release Management určených pro více prostředí, jak je znázorněno na obrázku 5-8.</span><span class="sxs-lookup"><span data-stu-id="7674f-219">Through the Azure DevOps Services templates, you can build a new image, publish it to a Docker registry, run it on Linux or Windows hosts, and use commands such as `docker-compose` to deploy multiple containers as an entire application, all through the Azure DevOps Services Release Management capabilities intended for multiple environments, as shown in Figure 5-8.</span></span>

![Snímek obrazovky zobrazující konfiguraci Dockeru tvoří vydání.](./media/docker-application-outer-loop-devops-workflow/configure-docker-compose-release.png)

<span data-ttu-id="7674f-221">**Obrázek 5-8**.</span><span class="sxs-lookup"><span data-stu-id="7674f-221">**Figure 5-8**.</span></span> <span data-ttu-id="7674f-222">Konfigurace úloh y Azure DevOps Services Docker Compose ze správy verzí služby Azure DevOps Services</span><span class="sxs-lookup"><span data-stu-id="7674f-222">Configuring Azure DevOps Services Docker Compose tasks from Azure DevOps Services Release Management</span></span>

<span data-ttu-id="7674f-223">Mějte však na paměti, že scénář znázorněný na obrázku 5-6 a implementovaný na obrázku 5-8 je jednoduchý (nasazuje se do jednoho hostitelů a virtuálních zařízení Dockeru a bude existovat jeden kontejner nebo instance na bitovou kopii) a pravděpodobně by měl být použit pouze pro vývoj nebo testování Scénáře.</span><span class="sxs-lookup"><span data-stu-id="7674f-223">However, keep in mind that the scenario shown in Figure 5-6 and implemented in Figure 5-8 is a simple one (it's deploying to single Docker hosts and VMs, and there will be a single container or instance per image) and probably should be used only for development or test scenarios.</span></span> <span data-ttu-id="7674f-224">Ve většině podnikových produkčních scénářů byste chtěli mít vysokou dostupnost (HA) a snadno spravovat škálovatelnost pomocí vyrovnávání zatížení napříč více uzly, servery a virtuálními počítači a "inteligentní převzetí služeb při selhání", takže pokud server nebo uzel selže, jeho služby a kontejnery bude přesunuta na jiný hostitelský server nebo virtuální ho d).</span><span class="sxs-lookup"><span data-stu-id="7674f-224">In most enterprise production scenarios, you would want to have High Availability (HA) and easy-to-manage scalability by load balancing across multiple nodes, servers, and VMs, plus "intelligent failovers" so if a server or node fails, its services and containers will be moved to another host server or VM.</span></span> <span data-ttu-id="7674f-225">V takovém případě potřebujete pokročilejší technologie, jako jsou clustery kontejnerů, orchestrátory a plánovače.</span><span class="sxs-lookup"><span data-stu-id="7674f-225">In that case, you need more advanced technologies such as container clusters, orchestrators, and schedulers.</span></span> <span data-ttu-id="7674f-226">Způsob nasazení do těchto clusterů je tedy zpracováním pokročilých scénářů vysvětlených v další části.</span><span class="sxs-lookup"><span data-stu-id="7674f-226">Thus, the way to deploy to those clusters is by handling the advanced scenarios explained in the next section.</span></span>

### <a name="deploying-docker-applications-to-docker-clusters"></a><span data-ttu-id="7674f-227">Nasazení aplikací Dockeru do clusterů Dockeru</span><span class="sxs-lookup"><span data-stu-id="7674f-227">Deploying Docker applications to Docker clusters</span></span>

<span data-ttu-id="7674f-228">Povaha distribuovaných aplikací vyžaduje výpočetní prostředky, které jsou také distribuovány.</span><span class="sxs-lookup"><span data-stu-id="7674f-228">The nature of distributed applications requires compute resources that are also distributed.</span></span> <span data-ttu-id="7674f-229">Chcete-li mít možnosti škálování v produkčním prostředí, musíte mít možnosti clusteringu, které poskytují vysokou škálovatelnost a vysokou dostupnost na základě sdružených prostředků.</span><span class="sxs-lookup"><span data-stu-id="7674f-229">To have production-scale capabilities, you need to have clustering capabilities that provide high scalability and high availability based on pooled resources.</span></span>

<span data-ttu-id="7674f-230">Kontejnery můžete nasadit ručně do těchto clusterů z nástroje cli nebo webového uživatelského uživatelského okna, ale měli byste si tento druh ruční práce vyhradit na účely testování nebo správy na místě, jako je škálování nebo monitorování.</span><span class="sxs-lookup"><span data-stu-id="7674f-230">You could deploy containers manually to those clusters from a CLI tool or a web UI, but you should reserve that kind of manual work to spot deployment testing or management purposes like scaling-out or monitoring.</span></span>

<span data-ttu-id="7674f-231">Z hlediska cd-rom a konkrétně služby Azure DevOps Services můžete spustit speciálně provedené úlohy nasazení z prostředí Azure DevOps Services Release Management, které nasadí vaše kontejnerizované aplikace do distribuovaných clusterů v kontejneru služby, jak je znázorněno na obrázku 5-9.</span><span class="sxs-lookup"><span data-stu-id="7674f-231">From a CD point of view, and Azure DevOps Services specifically, you can run specially made deployment tasks from your Azure DevOps Services Release Management environments that will deploy your containerized applications to distributed clusters in Container Service, as illustrated in Figure 5-9.</span></span>

![Diagram znázorňující krok nasazení disku CD-ROM do orchestrátorů.](./media/docker-application-outer-loop-devops-workflow/cd-deploy-to-orchestrators.png)

<span data-ttu-id="7674f-233">**Obrázek 5-9**.</span><span class="sxs-lookup"><span data-stu-id="7674f-233">**Figure 5-9**.</span></span> <span data-ttu-id="7674f-234">Nasazení distribuovaných aplikací do kontejnerové služby</span><span class="sxs-lookup"><span data-stu-id="7674f-234">Deploying distributed applications to Container Service</span></span>

<span data-ttu-id="7674f-235">Zpočátku při nasazování do určitých clusterů nebo orchestrátorů byste tradičně používali specifické skripty a mechanismy nasazení na každém orchestrátoru (to znamená Kubernetes a Service Fabric mají různé mechanismy nasazení) namísto jednoduššího a snadno použitelného `docker-compose` nástroje založeného na definičním `docker-compose.yml` souboru.</span><span class="sxs-lookup"><span data-stu-id="7674f-235">Initially, when deploying to certain clusters or orchestrators, you would traditionally use specific deployment scripts and mechanisms per each orchestrator (that is, Kubernetes and Service Fabric have different deployment mechanisms) instead of the simpler and easy-to-use `docker-compose` tool based on the `docker-compose.yml` definition file.</span></span> <span data-ttu-id="7674f-236">Nicméně díky úlohě Azure DevOps Services Docker Deploy, která je znázorněna na obrázku 5-10, `docker-compose.yml` teď můžete také nasadit do podporovaných `docker-compose.yml` orchestrátorů pomocí známého souboru, protože nástroj provede tento "překlad" za vás (ze souboru do formátu potřebného orchestratorem).</span><span class="sxs-lookup"><span data-stu-id="7674f-236">However, thanks to the Azure DevOps Services Docker Deploy task, shown in Figure 5-10, you now also can deploy to the supported orchestrators by just using your familiar `docker-compose.yml` file because the tool performs that “translation” for you (from your `docker-compose.yml` file to the format needed by the orchestrator).</span></span>

![Snímek obrazovky s úlohou Nasazení do Kubernetes](./media/docker-application-outer-loop-devops-workflow/add-deploy-to-kubernetes-task.png)

<span data-ttu-id="7674f-238">**Obrázek 5-10**.</span><span class="sxs-lookup"><span data-stu-id="7674f-238">**Figure 5-10**.</span></span> <span data-ttu-id="7674f-239">Přidání úlohy Nasazení do Kubernetes do prostředí</span><span class="sxs-lookup"><span data-stu-id="7674f-239">Adding the Deploy to Kubernetes task to your Environment</span></span>

<span data-ttu-id="7674f-240">Obrázek 5-11 ukazuje, jak můžete upravit úlohu Nasazení do Kubernetes s oddíly, které jsou k dispozici pro konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="7674f-240">Figure 5-11 demonstrates how you can edit the Deploy to Kubernetes task with the sections available for configuration.</span></span> <span data-ttu-id="7674f-241">Toto je úloha, která načte vaše vlastní image Dockeru připravené k použití, které se nasazují jako kontejnery v clusteru.</span><span class="sxs-lookup"><span data-stu-id="7674f-241">This is the task that will retrieve your ready-to-use custom Docker images to be deployed as containers in the cluster.</span></span>

![Snímek obrazovky s konfigurací úlohy Nasazení do Kubernetes](./media/docker-application-outer-loop-devops-workflow/edit-deploy-to-kubernetes-task.png)

<span data-ttu-id="7674f-243">**Obrázek 5-11**.</span><span class="sxs-lookup"><span data-stu-id="7674f-243">**Figure 5-11**.</span></span> <span data-ttu-id="7674f-244">Docker nasazení definice úlohy nasazení do Řadič domény a operačního systému ACS</span><span class="sxs-lookup"><span data-stu-id="7674f-244">Docker Deploy task definition deploying to ACS DC/OS</span></span>

> [! INFORMACE]<span data-ttu-id="7674f-245"> Další informace o kanálu CD s Azure DevOps Services a Dockerem najdete na<https://azure.microsoft.com/services/devops/pipelines></span><span class="sxs-lookup"><span data-stu-id="7674f-245"> To read more about the CD pipeline with Azure DevOps Services and Docker, visit <https://azure.microsoft.com/services/devops/pipelines></span></span>

## <a name="step-5-run-and-manage"></a><span data-ttu-id="7674f-246">Krok 5: Spuštění a správa</span><span class="sxs-lookup"><span data-stu-id="7674f-246">Step 5: Run and manage</span></span>

<span data-ttu-id="7674f-247">Vzhledem k tomu, že provoz a správa aplikací na úrovni podnikové výroby je sama o sobě hlavním tématem a vzhledem k typu operací a lidem pracujícím na této úrovni (it operace) a velké oblasti působnosti této oblasti je celá další kapitola věnována vysvětlit.</span><span class="sxs-lookup"><span data-stu-id="7674f-247">Because running and managing applications at enterprise-production level is a major subject in and of itself, and due to the type of operations and people working at that level (IT operations) as well as the large scope of this area, the entire next chapter is devoted to explaining it.</span></span>

## <a name="step-6-monitor-and-diagnose"></a><span data-ttu-id="7674f-248">Krok 6: Monitorování a diagnostika</span><span class="sxs-lookup"><span data-stu-id="7674f-248">Step 6: Monitor and diagnose</span></span>

<span data-ttu-id="7674f-249">Toto téma je také zahrnuto v další kapitole jako součást úkolů, které IT provádí ve výrobních systémech; je však důležité zdůraznit, že přehledy získané v tomto kroku musí být podkladem pro vývojový tým tak, aby aplikace je neustále vylepšována.</span><span class="sxs-lookup"><span data-stu-id="7674f-249">This topic also is covered in the next chapter as part of the tasks that IT performs in production systems; however, is important to highlight that the insights obtained in this step must feed back to the development team so that the application is constantly improved.</span></span> <span data-ttu-id="7674f-250">Z tohoto hlediska je také součástí DevOps, i když úkoly a operace jsou běžně prováděny IT.</span><span class="sxs-lookup"><span data-stu-id="7674f-250">From that point of view, it's also part of DevOps, although the tasks and operations are commonly performed by IT.</span></span>

<span data-ttu-id="7674f-251">Pouze v případě, že monitorování a diagnostika jsou 100 % v rámci devOps jsou procesy monitorování a analýzy prováděné vývojovým týmem proti testování nebo beta prostředí.</span><span class="sxs-lookup"><span data-stu-id="7674f-251">Only when monitoring and diagnostics are 100% within the realm of DevOps are the monitoring processes and analytics performed by the development team against testing or beta environments.</span></span> <span data-ttu-id="7674f-252">To se provádí buď provedením zátěžového testování nebo sledováním beta nebo qa prostředí, kde beta testeři zkoušejí nové verze.</span><span class="sxs-lookup"><span data-stu-id="7674f-252">This is done either by performing load testing or by monitoring beta or QA environments, where beta testers are trying the new versions.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="7674f-253">[Předchozí](index.md)
>[další](create-ci-cd-pipelines-azure-devops-services-aspnetcore-kubernetes.md)</span><span class="sxs-lookup"><span data-stu-id="7674f-253">[Previous](index.md)
[Next](create-ci-cd-pipelines-azure-devops-services-aspnetcore-kubernetes.md)</span></span>
