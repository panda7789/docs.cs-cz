---
title: Monolitické aplikace
description: Seznamte se s základními koncepty pro kontejnerizaci monolitických aplikací.
ms.date: 02/15/2019
ms.openlocfilehash: 3c186f6a300588816916886927f93e0c06ebd6bc
ms.sourcegitcommit: e3cbf26d67f7e9286c7108a2752804050762d02d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/09/2020
ms.locfileid: "80988983"
---
# <a name="monolithic-applications"></a><span data-ttu-id="1b0c0-103">Monolitické aplikace</span><span class="sxs-lookup"><span data-stu-id="1b0c0-103">Monolithic applications</span></span>

<span data-ttu-id="1b0c0-104">V tomto scénáři vytváříte jednu a monolitickou webovou aplikaci nebo službu a nasazujete ji jako kontejner.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-104">In this scenario, you're building a single and monolithic web application or service and deploying it as a container.</span></span> <span data-ttu-id="1b0c0-105">V rámci aplikace struktura nemusí být monolitické; může obsahovat několik knihoven, komponent nebo dokonce vrstev (aplikační vrstva, doménová vrstva, vrstva přístupu k datům atd.).</span><span class="sxs-lookup"><span data-stu-id="1b0c0-105">Within the application, the structure might not be monolithic; it might comprise several libraries, components, or even layers (application layer, domain layer, data access layer, etc.).</span></span> <span data-ttu-id="1b0c0-106">Externě je to jeden kontejner, jako je jeden proces, jedna webová aplikace nebo jedna služba.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-106">Externally, it's a single container, like a single process, single web application, or single service.</span></span>

<span data-ttu-id="1b0c0-107">Chcete-li spravovat tento model, nasadit jeden kontejner reprezentovat aplikaci.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-107">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="1b0c0-108">Chcete-li jej škálovat, stačí přidat několik dalších kopií s vyvažovačem zatížení vpředu.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-108">To scale it, just add a few more copies with a load balancer in front.</span></span> <span data-ttu-id="1b0c0-109">Jednoduchost pochází ze správy jednoho nasazení v jednom kontejneru nebo virtuálním počítači (VM).</span><span class="sxs-lookup"><span data-stu-id="1b0c0-109">The simplicity comes from managing a single deployment in a single container or virtual machine (VM).</span></span>

<span data-ttu-id="1b0c0-110">Následující jistiny, že kontejner dělá pouze jednu věc a dělá to v jednom procesu, monolitický vzor je v konfliktu.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-110">Following the principal that a container does one thing only, and does it in one process, the monolithic pattern is in conflict.</span></span> <span data-ttu-id="1b0c0-111">Do každého kontejneru můžete zahrnout více součástí/knihoven nebo vnitřních vrstev, jak je znázorněno na obrázku 4-1.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-111">You can include multiple components/libraries or internal layers within each container, as illustrated in Figure 4-1.</span></span>

![Diagram znázorňující monolitickou aplikaci, která se škáluje klonováním aplikace.](./media/monolithic-applications/monolithic-application-architecture-example.png)

<span data-ttu-id="1b0c0-113">**Obrázek 4-1.**</span><span class="sxs-lookup"><span data-stu-id="1b0c0-113">**Figure 4-1.**</span></span> <span data-ttu-id="1b0c0-114">Příklad architektury monolitických aplikací</span><span class="sxs-lookup"><span data-stu-id="1b0c0-114">An example of monolithic application architecture</span></span>

<span data-ttu-id="1b0c0-115">Monolitická aplikace má všechny nebo většinu svých funkcí v rámci jednoho procesu nebo kontejneru a je komponentována ve vnitřních vrstvách nebo knihovnách.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-115">A monolithic app has all or most of its functionality within a single process or container and it's componentized in internal layers or libraries.</span></span> <span data-ttu-id="1b0c0-116">Nevýhodou tohoto přístupu přichází, pokud nebo když aplikace roste, vyžadující škálování.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-116">The downside to this approach comes if or when the application grows, requiring it to scale.</span></span> <span data-ttu-id="1b0c0-117">Pokud se celá aplikace škálovat, to není opravdu problém.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-117">If the entire application scaled, it's not really a problem.</span></span> <span data-ttu-id="1b0c0-118">Ve většině případů však několik částí aplikace jsou body sytiče, které vyžadují škálování, zatímco jiné součásti se používají méně.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-118">However, in most cases, a few parts of the application are the choke points that require scaling, whereas other components are used less.</span></span>

<span data-ttu-id="1b0c0-119">Pomocí typického příkladu elektronického obchodování pravděpodobně budete potřebovat škálování komponenty informací o produktu.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-119">Using the typical e-commerce example, what you likely need is to scale the product information component.</span></span> <span data-ttu-id="1b0c0-120">Mnohem více zákazníků procházet produkty, než je zakoupit.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-120">Many more customers browse products than purchase them.</span></span> <span data-ttu-id="1b0c0-121">Více zákazníků používá svůj košík než kanál plateb.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-121">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="1b0c0-122">Méně zákazníků přidává komentáře nebo si prohlíží historii nákupů.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-122">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="1b0c0-123">A pravděpodobně máte jen hrstku zaměstnanců v jedné oblasti, kteří potřebují spravovat obsah a marketingové kampaně.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-123">And you likely have only a handful of employees, in a single region, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="1b0c0-124">Změnou měřítka monolitického návrhu je veškerý kód nasazen vícekrát.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-124">By scaling the monolithic design, all of the code is deployed multiple times.</span></span>

<span data-ttu-id="1b0c0-125">Kromě problému "scale-everything" vyžadují změny jedné součásti úplné opětovné testování celé aplikace a také úplné opětovné nasazení všech instancí.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-125">In addition to the "scale-everything" problem, changes to a single component require complete retesting of the entire application as well as a complete redeployment of all the instances.</span></span>

<span data-ttu-id="1b0c0-126">Monolitický přístup je běžný a mnoho organizací se vyvíjí s touto architektonickou metodou.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-126">The monolithic approach is common, and many organizations are developing with this architectural method.</span></span> <span data-ttu-id="1b0c0-127">Mnozí mají dost dobré výsledky, zatímco jiní se setkávají s limity.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-127">Many enjoy good enough results, whereas others encounter limits.</span></span> <span data-ttu-id="1b0c0-128">Mnozí navrhli své aplikace v tomto modelu, protože nástroje a infrastruktura byly příliš obtížné vytvořit SOA a neviděli potřebu – dokud aplikace nerostla.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-128">Many designed their applications in this model because the tools and infrastructure were too difficult to build SOAs, and they didn't see the need—until the app grew.</span></span>

<span data-ttu-id="1b0c0-129">Z hlediska infrastruktury může každý server spouštět mnoho aplikací v rámci stejného hostitele a mít přijatelný poměr efektivity využití prostředků, jak je znázorněno na obrázku 4-2.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-129">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in your resources usage, as shown in Figure 4-2.</span></span>

![Diagram znázorňující jednoho hostitele s více aplikacemi v samostatných kontejnerech.](./media/monolithic-applications/host-with-multiple-apps-containers.png)

<span data-ttu-id="1b0c0-131">**Obrázek 4-2.**</span><span class="sxs-lookup"><span data-stu-id="1b0c0-131">**Figure 4-2.**</span></span> <span data-ttu-id="1b0c0-132">Hostitel s více aplikacemi a kontejnery</span><span class="sxs-lookup"><span data-stu-id="1b0c0-132">A host running multiple apps/containers</span></span>

<span data-ttu-id="1b0c0-133">Nakonec z hlediska dostupnosti monolitické aplikace musí být nasazeny jako celek; to znamená, že v případě, že musíte *zastavit a spustit*, všechny funkce a všichni uživatelé budou ovlivněny během okna nasazení.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-133">Finally, from an availability perspective, monolithic applications must be deployed as a whole; that means that in case you must *stop and start*, all functionality and all users will be affected during the deployment window.</span></span> <span data-ttu-id="1b0c0-134">V určitých situacích použití Azure a kontejnerů můžete minimalizovat tyto situace a snížit pravděpodobnost prostojů vaší aplikace, jak můžete vidět na obrázku 4-3.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-134">In certain situations, the use of Azure and containers can minimize these situations and reduce the probability of downtime of your application, as you can see in Figure 4-3.</span></span>

<span data-ttu-id="1b0c0-135">Monolitické aplikace v Azure můžete nasadit pomocí vyhrazených virtuálních počítačů pro každou instanci.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-135">You can deploy monolithic applications in Azure by using dedicated VMs for each instance.</span></span> <span data-ttu-id="1b0c0-136">Pomocí [škálovacích sad virtuálních počítačích Azure](https://docs.microsoft.com/azure/virtual-machine-scale-sets/)můžete snadno škálovat virtuální počítače.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-136">Using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can scale the VMs easily.</span></span>

<span data-ttu-id="1b0c0-137">Pomocí azure [app services](https://azure.microsoft.com/services/app-service/) můžete taky spouštět monolitické aplikace a snadno škálovat instance, aniž byste museli spravovat virtuální počítače.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-137">You can also use [Azure App Services](https://azure.microsoft.com/services/app-service/) to run monolithic applications and easily scale instances without having to manage the VMs.</span></span> <span data-ttu-id="1b0c0-138">Azure App Services můžete spustit jednotlivé instance kontejnerů Dockeru, také zjednodušení nasazení.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-138">Azure App Services can run single instances of Docker containers, as well, simplifying the deployment.</span></span>

<span data-ttu-id="1b0c0-139">Můžete nasadit více virtuálních počítačů jako hostitele Dockeru a spustit libovolný počet kontejnerů na virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-139">You can deploy multiple VMs as Docker hosts and run any number of containers per VM.</span></span> <span data-ttu-id="1b0c0-140">Potom pomocí Azure Balancer, jak je znázorněno na obrázku 4-3, můžete spravovat škálování.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-140">Then, by using an Azure Load Balancer, as illustrated in the Figure 4-3, you can manage scaling.</span></span>

![Diagram znázorňující monolitickou aplikaci, která se škáluje na různé hostitele.](./media/monolithic-applications/multiple-hosts-from-single-docker-container.png)

<span data-ttu-id="1b0c0-142">**Obrázek 4-3**.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-142">**Figure 4-3**.</span></span> <span data-ttu-id="1b0c0-143">Více hostitelů škálování z jedné aplikace Dockeru</span><span class="sxs-lookup"><span data-stu-id="1b0c0-143">Multiple hosts scaling out a single Docker application</span></span>

<span data-ttu-id="1b0c0-144">Nasazení samotných hostitelů můžete spravovat pomocí tradičních technik nasazení.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-144">You can manage the deployment of the hosts themselves via traditional deployment techniques.</span></span>

<span data-ttu-id="1b0c0-145">Kontejnery Dockeru můžete spravovat z příkazového `docker run` `docker-compose up`řádku pomocí příkazů jako a , a můžete je také automatizovat v kanálech průběžného doručování (CD) a nasadit je na hostitele Dockeru ze služby Azure DevOps Services, například.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-145">You can manage Docker containers from the command line by using commands like `docker run` and `docker-compose up`, and you can also automate it in Continuous Delivery (CD) pipelines and deploy to Docker hosts from Azure DevOps Services, for instance.</span></span>

## <a name="monolithic-application-deployed-as-a-container"></a><span data-ttu-id="1b0c0-146">Monolitická aplikace nasazená jako kontejner</span><span class="sxs-lookup"><span data-stu-id="1b0c0-146">Monolithic application deployed as a container</span></span>

<span data-ttu-id="1b0c0-147">Použití kontejnerů ke správě monolitických nasazení přináší výhody.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-147">There are benefits to using containers to manage monolithic deployments.</span></span> <span data-ttu-id="1b0c0-148">Škálování instance kontejnerů je mnohem rychlejší a jednodušší než nasazení dalších virtuálních mandů.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-148">Scaling the instances of containers is far faster and easier than deploying additional VMs.</span></span>

<span data-ttu-id="1b0c0-149">Nasazení aktualizací jako inamů Dockeru je mnohem rychlejší a efektivní v síti.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-149">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="1b0c0-150">Kontejnery Dockeru se obvykle spouštějí během několika sekund, což urychluje zavádění.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-150">Docker containers typically start in seconds, speeding rollouts.</span></span> <span data-ttu-id="1b0c0-151">Stržení kontejneru Dockeru je stejně `docker stop` snadné jako vyvolání příkazu, obvykle dokončení za méně než sekundu.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-151">Tearing down a Docker container is as easy as invoking the `docker stop` command, typically completing in less than a second.</span></span>

<span data-ttu-id="1b0c0-152">Vzhledem k tomu, že kontejnery jsou ze své podstaty neměnné, podle návrhu se nikdy nemusíte starat o poškozené virtuální počítače, protože skript aktualizace zapomněl účet pro některé konkrétní konfigurace nebo soubor vlevo na disku.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-152">Because containers are inherently immutable, by design, you never need to worry about corrupted VMs because an update script forgot to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="1b0c0-153">I když monolitické aplikace mohou těžit z Dockeru, dotýkáme se pouze tipů výhod.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-153">Although monolithic apps can benefit from Docker, we're touching on only the tips of the benefits.</span></span> <span data-ttu-id="1b0c0-154">Větší výhody správy kontejnerů pocházejí z nasazení s orchestrátory kontejnerů, které spravují různé instance a životní cyklus každé instance kontejneru.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-154">The larger benefits of managing containers come from deploying with container orchestrators that manage the various instances and life cycle of each container instance.</span></span> <span data-ttu-id="1b0c0-155">Rozdělení monolitické aplikace do subsystémů, které lze škálovat, vyvíjet a nasazovat jednotlivě, je vstupním bodem do sféry mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-155">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

<span data-ttu-id="1b0c0-156">Chcete-li se dozvědět o tom, jak "zvednout a posunout" monolitické aplikace s kontejnery a jak můžete modernizovat aplikace, přečtěte si tento další průvodce Microsoft, [Modernizovat stávající aplikace .NET s Azure cloud a Windows Containers](../../modernize-with-azure-containers/index.md), které si můžete stáhnout také ve formátu PDF z <https://aka.ms/LiftAndShiftWithContainersEbook>.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-156">To learn about how to "lift and shift" monolithic applications with containers and how you can modernize your applications, you can read this additional Microsoft guide, [Modernize existing .NET applications with Azure cloud and Windows Containers](../../modernize-with-azure-containers/index.md), which you can also download as PDF from <https://aka.ms/LiftAndShiftWithContainersEbook>.</span></span>

## <a name="publish-a-single-docker-container-app-to-azure-app-service"></a><span data-ttu-id="1b0c0-157">Publikování jedné aplikace kontejneru Dockeru do služby Azure App Service</span><span class="sxs-lookup"><span data-stu-id="1b0c0-157">Publish a single Docker container app to Azure App Service</span></span>

<span data-ttu-id="1b0c0-158">Buď proto, že chcete získat rychlé ověření kontejneru nasazeného do Azure, nebo proto, že aplikace je jednoduše aplikace s jedním kontejnerem, Azure App Services poskytuje skvělý způsob, jak poskytovat škálovatelné služby s jedním kontejnerem.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-158">Either because you want to get a quick validation of a container deployed to Azure or because the app is simply a single-container app, Azure App Services provides a great way to provide scalable single-container services.</span></span>

<span data-ttu-id="1b0c0-159">Používání služby Azure App Service je intuitivní a můžete rychle začít pracovat, protože poskytuje skvělou integraci Gitu, která umožňuje vzít váš kód, sestavit ho v Microsoft Visual Studiu a přímo ho nasadit do Azure.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-159">Using Azure App Service is intuitive and you can get up and running quickly because it provides great Git integration to take your code, build it in Microsoft Visual Studio, and directly deploy it to Azure.</span></span> <span data-ttu-id="1b0c0-160">Ale tradičně (bez Dockeru), pokud potřebujete další možnosti, architektury nebo závislosti, které nejsou podporované ve službách App Services, musíte na to počkat, dokud tým Azure neaktualizuje tyto závislosti ve službě App Service nebo přejde na jiné služby, jako je Service Fabric, Cloud Services nebo dokonce prosté virtuální počítače, pro které máte další kontrolu a můžete nainstalovat požadovanou komponentu nebo architekturu pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-160">But, traditionally (with no Docker), if you needed other capabilities, frameworks, or dependencies that aren't supported in App Services, you needed to wait for it until the Azure team updates those dependencies in App Service or switched to other services like Service Fabric, Cloud Services, or even plain VMs, for which you have further control and can install a required component or framework for your application.</span></span>

<span data-ttu-id="1b0c0-161">Teď, jak je znázorněno na obrázku 4-4, při použití Visual Studia 2017, podpora kontejnerů ve službě Azure App Service vám dává možnost zahrnout vše, co chcete v prostředí aplikace.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-161">Now, as shown in Figure 4-4, when using Visual Studio 2017, container support in Azure App Service gives you the ability to include whatever you want in your app environment.</span></span> <span data-ttu-id="1b0c0-162">Pokud jste do aplikace přidali závislost, protože ji spouštěte v kontejneru, získáte možnost zahrnutí těchto závislostí do image Dockerfile nebo Dockeru.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-162">If you added a dependency to your app, because you're running it in a container, you get the capability of including those dependencies in your Dockerfile or Docker image.</span></span>

![Snímek obrazovky s dialogem Vytvořit službu aplikace zobrazujícího registr kontejnerů](./media/monolithic-applications/publish-azure-app-service-container.png)

<span data-ttu-id="1b0c0-164">**Obrázek 4-4**.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-164">**Figure 4-4**.</span></span> <span data-ttu-id="1b0c0-165">Publikování kontejneru do služby Azure App Service z aplikací a kontejnerů Visual Studia</span><span class="sxs-lookup"><span data-stu-id="1b0c0-165">Publishing a container to Azure App Service from Visual Studio apps/containers</span></span>

<span data-ttu-id="1b0c0-166">Obrázek 4-4 také ukazuje, že tok publikování tlačí image prostřednictvím registru kontejnerů, což může být Registr kontejnerů Azure (registr v blízkosti vašich nasazení v Azure a zabezpečené skupinami a účty Služby Azure Active Directory) nebo jakýkoli jiný registr Docker, jako je Docker Hub nebo místní registry.</span><span class="sxs-lookup"><span data-stu-id="1b0c0-166">Figure 4-4 also shows that the publish flow pushes an image through a Container Registry, which can be the Azure Container Registry (a registry near to your deployments in Azure and secured by Azure Active Directory groups and accounts) or any other Docker Registry like Docker Hub or on-premises registries.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="1b0c0-167">[Předchozí](common-container-design-principles.md)
>[další](state-and-data-in-docker-applications.md)</span><span class="sxs-lookup"><span data-stu-id="1b0c0-167">[Previous](common-container-design-principles.md)
[Next](state-and-data-in-docker-applications.md)</span></span>
