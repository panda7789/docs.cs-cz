---
title: Migrace moderních aplikací klasické pracovní plochy
description: Vše, co potřebujete znát o procesu migrace pro moderní desktopové aplikace.
ms.date: 05/12/2020
ms.openlocfilehash: 2108aa0b99cabfbb0f3263f094ba8277f953ed6a
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/15/2020
ms.locfileid: "83423297"
---
# <a name="migrating-modern-desktop-applications"></a><span data-ttu-id="563c0-103">Migrace moderních aplikací klasické pracovní plochy</span><span class="sxs-lookup"><span data-stu-id="563c0-103">Migrating Modern Desktop applications</span></span>

<span data-ttu-id="563c0-104">V této kapitole prozkoumáme nejběžnější problémy a problémy, které můžete při migraci existující aplikace z .NET Framework do .NET Core směřovat.</span><span class="sxs-lookup"><span data-stu-id="563c0-104">In this chapter, we're exploring the most common issues and challenges you can face when migrating an existing application from .NET Framework to .NET Core.</span></span>

<span data-ttu-id="563c0-105">Složitá desktopová aplikace nefunguje v izolaci a potřebuje určitý druh interakce s subsystémy, které se můžou nacházet v místním počítači nebo na vzdáleném serveru.</span><span class="sxs-lookup"><span data-stu-id="563c0-105">A complex desktop application doesn't work in isolation and needs some kind of interaction with subsystems that may reside on the local machine or on a remote server.</span></span> <span data-ttu-id="563c0-106">Bude pravděpodobně potřebovat určitý druh databáze pro připojení jako úložiště trvalosti buď místně, nebo vzdáleně.</span><span class="sxs-lookup"><span data-stu-id="563c0-106">It will probably need some kind of database to connect as a persistence storage either locally or remotely.</span></span> <span data-ttu-id="563c0-107">Díky tomu, že jsou architektury zaměřené na Internet a službu, je běžné, že máte aplikaci připojenou k nějakému druhu služby umístěnému na vzdáleném serveru nebo v cloudu.</span><span class="sxs-lookup"><span data-stu-id="563c0-107">With the raise of Internet and service-oriented architectures, it's common to have your application connected to some sort of service residing on a remote server or in the cloud.</span></span> <span data-ttu-id="563c0-108">K implementaci některých funkcí může být potřeba mít přístup k systému souborů počítače.</span><span class="sxs-lookup"><span data-stu-id="563c0-108">You may need to access the machine file system to implement some functionality.</span></span> <span data-ttu-id="563c0-109">Alternativně můžete použít některé funkce, které se nachází v objektu COM mimo vaši aplikaci, což je běžný scénář, pokud například integrujete sestavení Office ve vaší aplikaci.</span><span class="sxs-lookup"><span data-stu-id="563c0-109">Alternatively, maybe you're using a piece of functionality that resides inside a COM object outside your application, which is a common scenario if, for example, you're integrating Office assemblies in your app.</span></span>

<span data-ttu-id="563c0-110">Kromě toho existují rozdíly v ploše rozhraní API, které jsou zpřístupněny .NET Framework a .NET Core, a některé funkce, které jsou k dispozici v .NET Framework nejsou k dispozici v rozhraní .NET Core.</span><span class="sxs-lookup"><span data-stu-id="563c0-110">Besides, there are differences in the API surface that is exposed by .NET Framework and .NET Core, and some features that are available on .NET Framework aren't available on .NET Core.</span></span> <span data-ttu-id="563c0-111">Proto je důležité znát a vzít si je v úvahu při plánování migrace.</span><span class="sxs-lookup"><span data-stu-id="563c0-111">So, it's important for you to know and take them into account when planning a migration.</span></span>

## <a name="configuration-files"></a><span data-ttu-id="563c0-112">Konfigurační soubory</span><span class="sxs-lookup"><span data-stu-id="563c0-112">Configuration files</span></span>

<span data-ttu-id="563c0-113">Konfigurační soubory nabízejí možnost ukládat sady vlastností, které jsou čteny v době běhu, a ovlivnit chování našich aplikací, například kde najít databázi nebo kolikrát spustit smyčku.</span><span class="sxs-lookup"><span data-stu-id="563c0-113">Configuration files offer the possibility to store sets of properties that are read at run time and affect the behavior of our apps, such as where to locate a database or how many times to execute a loop.</span></span> <span data-ttu-id="563c0-114">Krásy této techniky je, že můžete upravit některé aspekty aplikace bez nutnosti Recode a znovu kompilovat.</span><span class="sxs-lookup"><span data-stu-id="563c0-114">The beauty of this technique is that you can modify some aspects of the application without the need to recode and recompile.</span></span> <span data-ttu-id="563c0-115">To je užitečné, když například stejný kód aplikace běží ve vývojovém prostředí s určitou sadou konfiguračních hodnot a v produkčním prostředí s jinou.</span><span class="sxs-lookup"><span data-stu-id="563c0-115">This comes in handy when, for example, the same app code runs on a development environment with a certain set of configuration values and in production with a different one.</span></span>

### <a name="configuration-on-net-framework"></a><span data-ttu-id="563c0-116">Konfigurace v .NET Framework</span><span class="sxs-lookup"><span data-stu-id="563c0-116">Configuration on .NET Framework</span></span>

<span data-ttu-id="563c0-117">Máte-li funkční desktopovou aplikaci .NET Framework, je pravděpodobné, že máte k dispozici soubor *App. config* prostřednictvím <xref:System.Configuration.AppSettingsSection> třídy z `System.Configuration` oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="563c0-117">If you have a working .NET Framework desktop application, chances are you have an *app.config* file accessed through the <xref:System.Configuration.AppSettingsSection> class from the `System.Configuration` namespace.</span></span>

<span data-ttu-id="563c0-118">V rámci infrastruktury .NET Framework existuje hierarchie konfiguračních souborů, které dědí vlastnosti z jejích nadřazených prvků.</span><span class="sxs-lookup"><span data-stu-id="563c0-118">Within the .NET Framework infrastructure, there's a hierarchy of configuration files that inherit properties from its parents.</span></span> <span data-ttu-id="563c0-119">Můžete najít soubor *Machine. config* , který definuje mnoho vlastností a konfiguračních oddílů, které lze použít nebo přepsat v jakémkoli konfiguračním souboru následníka.</span><span class="sxs-lookup"><span data-stu-id="563c0-119">You can find a *machine.config* file that defines many properties and configuration sections that can be used or overridden in any descendant configuration file.</span></span>

### <a name="configuration-on-net-core"></a><span data-ttu-id="563c0-120">Konfigurace v .NET Core</span><span class="sxs-lookup"><span data-stu-id="563c0-120">Configuration on .NET Core</span></span>

<span data-ttu-id="563c0-121">V .NET Core World není k dispozici soubor *Machine. config* .</span><span class="sxs-lookup"><span data-stu-id="563c0-121">In the .NET Core world, there's no *machine.config* file.</span></span> <span data-ttu-id="563c0-122">A i když můžete i nadále používat starý <xref:System.Configuration> obor názvů, můžete zvážit přechod na moderní <xref:Microsoft.Extensions.Configuration> , což nabízí dobrý počet vylepšení.</span><span class="sxs-lookup"><span data-stu-id="563c0-122">And even though you can continue to use the old fashioned <xref:System.Configuration> namespace, you may consider switching to the modern <xref:Microsoft.Extensions.Configuration>, which offers a good number of enhancements.</span></span>

<span data-ttu-id="563c0-123">Rozhraní API pro konfiguraci podporuje koncept poskytovatele konfigurace, který definuje zdroj dat, který se má použít k načtení konfigurace.</span><span class="sxs-lookup"><span data-stu-id="563c0-123">The configuration API supports the concept of configuration provider, which defines the data source to be used to load the configuration.</span></span> <span data-ttu-id="563c0-124">Existují různé druhy integrovaných zprostředkovatelů, například:</span><span class="sxs-lookup"><span data-stu-id="563c0-124">There are different kinds of built-in providers, such as:</span></span>

- <span data-ttu-id="563c0-125">Objekty .NET v paměti</span><span class="sxs-lookup"><span data-stu-id="563c0-125">In-memory .NET objects</span></span>
- <span data-ttu-id="563c0-126">Soubory INI</span><span class="sxs-lookup"><span data-stu-id="563c0-126">INI files</span></span>
- <span data-ttu-id="563c0-127">Soubory JSON</span><span class="sxs-lookup"><span data-stu-id="563c0-127">JSON files</span></span>
- <span data-ttu-id="563c0-128">Soubory XML</span><span class="sxs-lookup"><span data-stu-id="563c0-128">XML files</span></span>
- <span data-ttu-id="563c0-129">Argumenty příkazového řádku</span><span class="sxs-lookup"><span data-stu-id="563c0-129">Command-line arguments</span></span>
- <span data-ttu-id="563c0-130">Proměnné prostředí</span><span class="sxs-lookup"><span data-stu-id="563c0-130">Environment variables</span></span>
- <span data-ttu-id="563c0-131">Šifrované úložiště uživatelů</span><span class="sxs-lookup"><span data-stu-id="563c0-131">Encrypted user store</span></span>

 <span data-ttu-id="563c0-132">Můžete si také vytvořit vlastní.</span><span class="sxs-lookup"><span data-stu-id="563c0-132">Or you can build your own.</span></span>

<span data-ttu-id="563c0-133">Nová konfigurace umožňuje vytvořit seznam párů název-hodnota, které lze seskupit do hierarchie s více úrovněmi.</span><span class="sxs-lookup"><span data-stu-id="563c0-133">The new configuration allows a list of name-value pairs that can be grouped into a multi-level hierarchy.</span></span> <span data-ttu-id="563c0-134">Veškerá uložená hodnota je mapována na řetězec a je integrována podpora vazby, která umožňuje deserializaci nastavení do vlastního objektu typu objektu CLR (POCO).</span><span class="sxs-lookup"><span data-stu-id="563c0-134">Any stored value maps to a string, and there's built-in binding support that allows you to deserialize settings into a custom plain old CLR object (POCO) object.</span></span>

<span data-ttu-id="563c0-135"><xref:Microsoft.Extensions.Configuration.ConfigurationBuilder>Objekt vám umožňuje přidat tolik poskytovatelů konfigurace, které můžete pro svou aplikaci potřebovat, pomocí pravidla priority můžete vyřešit preference.</span><span class="sxs-lookup"><span data-stu-id="563c0-135">The <xref:Microsoft.Extensions.Configuration.ConfigurationBuilder> object lets you add as many configuration providers you may need for your application, using a precedence rule to resolve preference.</span></span> <span data-ttu-id="563c0-136">Proto bude poslední zprostředkovatel, který přidáte do kódu, přepsán ostatními.</span><span class="sxs-lookup"><span data-stu-id="563c0-136">So, the last provider you add in your code will override the others.</span></span> <span data-ttu-id="563c0-137">Jedná se o skvělou funkci pro správu různých prostředí pro provádění, protože můžete definovat různé konfigurace pro vývojové, testovací a produkční prostředí a spravovat je v jedné funkci v rámci vašeho kódu.</span><span class="sxs-lookup"><span data-stu-id="563c0-137">This is a great feature for managing different environments for execution since you can define different configurations for development, testing and production environments, and manage them on a single function inside your code.</span></span>

### <a name="migrating-configuration-files"></a><span data-ttu-id="563c0-138">Migrace konfiguračních souborů</span><span class="sxs-lookup"><span data-stu-id="563c0-138">Migrating Configuration files</span></span>

<span data-ttu-id="563c0-139">Můžete dál používat existující soubor App. config XML.</span><span class="sxs-lookup"><span data-stu-id="563c0-139">You can continue to use your existing app.config XML file.</span></span> <span data-ttu-id="563c0-140">Tuto příležitost ale můžete využít k migraci konfigurace, aby bylo možné využít několik vylepšení v .NET Core.</span><span class="sxs-lookup"><span data-stu-id="563c0-140">However, you could take this opportunity to migrate your configuration to benefit from the several enhancements made on .NET Core.</span></span>

<span data-ttu-id="563c0-141">Chcete-li migrovat z původního stylu *App. config* do nového konfiguračního souboru, měli byste zvolit formát XML a formát JSON.</span><span class="sxs-lookup"><span data-stu-id="563c0-141">To migrate from an old-style *app.config* to a new configuration file, you should choose between an XML format and a JSON format.</span></span>

<span data-ttu-id="563c0-142">Pokud zvolíte XML, převod je jednoduchý.</span><span class="sxs-lookup"><span data-stu-id="563c0-142">If you choose XML, the conversion is straightforward.</span></span> <span data-ttu-id="563c0-143">Vzhledem k tomu, že obsah je stejný, stačí přejmenovat soubor *App. config* na soubor s příponou XML.</span><span class="sxs-lookup"><span data-stu-id="563c0-143">Since the content is the same, just rename the *app.config* file to a file with XML extension.</span></span> <span data-ttu-id="563c0-144">Pak změňte kód, který odkazuje na AppSettings na použití `ConfigurationBuilder` třídy.</span><span class="sxs-lookup"><span data-stu-id="563c0-144">Then, change the code that references AppSettings to use the `ConfigurationBuilder` class.</span></span> <span data-ttu-id="563c0-145">Tato změna by měla být snadná.</span><span class="sxs-lookup"><span data-stu-id="563c0-145">This change should be easy.</span></span>

<span data-ttu-id="563c0-146">Pokud chcete použít formát JSON a nechcete migrovat ručně, je k dispozici nástroj [dotnet-config2json](https://www.nuget.org/packages/dotnet-config2json/) v .NET Core, který může převést soubor *App. config* na konfigurační soubor JSON.</span><span class="sxs-lookup"><span data-stu-id="563c0-146">If you want to use a JSON format and you don't want to migrate by hand, there's a tool called [dotnet-config2json](https://www.nuget.org/packages/dotnet-config2json/) available on .NET Core that can convert an *app.config* file to a JSON configuration file.</span></span>

<span data-ttu-id="563c0-147">Při použití konfiguračních oddílů, které byly definovány v souboru *Machine. config* , může docházet k několika problémům.</span><span class="sxs-lookup"><span data-stu-id="563c0-147">You may also come across some issues when using configuration sections that were defined in the *machine.config* file.</span></span> <span data-ttu-id="563c0-148">Zvažte například následující konfiguraci:</span><span class="sxs-lookup"><span data-stu-id="563c0-148">For example, consider the following configuration:</span></span>

```xml
<configuration>
    <system.diagnostics>
        <switches>
            <add name="General" value="4" />
        </switches>
        <trace autoflush="true" indentsize="2">
            <listeners>
                <add name="myListener"
                     type="System.Diagnostics.TextWriterTraceListener,
                           System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
                     initializeData="MyListener.log"
                     traceOutputOptions="ProcessId, LogicalOperationStack, Timestamp, ThreadId, Callstack, DateTime" />
            </listeners>
        </trace>
    </system.diagnostics>
</configuration>
```

<span data-ttu-id="563c0-149">Pokud tuto konfiguraci převezmete do .NET Core, zobrazí se výjimka:</span><span class="sxs-lookup"><span data-stu-id="563c0-149">If you take this configuration to a .NET Core, you'll get an exception:</span></span>

<span data-ttu-id="563c0-150">Nerozpoznaný konfigurační oddíl System. Diagnostics</span><span class="sxs-lookup"><span data-stu-id="563c0-150">Unrecognized configuration section system.diagnostics</span></span>

<span data-ttu-id="563c0-151">K této výjimce dojde, protože tato část a sestavení zodpovědné za zpracování tohoto oddílu byly definovány v souboru *Machine. config* , který nyní neexistuje.</span><span class="sxs-lookup"><span data-stu-id="563c0-151">This exception occurs because that section and the assembly responsible for handling that section was defined in the *machine.config* file, which now doesn't exist.</span></span>

<span data-ttu-id="563c0-152">Chcete-li tento problém snadno vyřešit, můžete zkopírovat definici oddílu ze starého souboru *Machine. config* do nového konfiguračního souboru:</span><span class="sxs-lookup"><span data-stu-id="563c0-152">To easily fix the issue, you can copy the section definition from your old *machine.config* to your new configuration file:</span></span>

```xml
<configSections>
    <section name="system.diagnostics"
             type="System.Diagnostics.SystemDiagnosticsSection,
                   System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
</configSections>
```

## <a name="accessing-databases"></a><span data-ttu-id="563c0-153">Přístup k databázím</span><span class="sxs-lookup"><span data-stu-id="563c0-153">Accessing databases</span></span>

<span data-ttu-id="563c0-154">Skoro každá desktopová aplikace potřebuje nějaký druh databáze.</span><span class="sxs-lookup"><span data-stu-id="563c0-154">Almost every desktop application needs some kind of database.</span></span> <span data-ttu-id="563c0-155">Pro Desktop je běžné najít architektury klient-server s přímým připojením mezi desktopovou aplikací a databázovým strojem.</span><span class="sxs-lookup"><span data-stu-id="563c0-155">For desktop, it's common to find client-server architectures with a direct connection between the desktop app and the database engine.</span></span> <span data-ttu-id="563c0-156">Tyto databáze mohou být místní nebo vzdálené v závislosti na potřebě sdílení informací mezi různými uživateli.</span><span class="sxs-lookup"><span data-stu-id="563c0-156">These databases can be local or remote depending on the need to share information between different users.</span></span>

<span data-ttu-id="563c0-157">Z pohledu kódu existovala spousta technologií a platforem, které vývojářům umožňují připojit, dotazovat a aktualizovat databázi.</span><span class="sxs-lookup"><span data-stu-id="563c0-157">From the code perspective, there have been many technologies and frameworks to give the developer the possibility to connect, query, and update a database.</span></span>

<span data-ttu-id="563c0-158">Nejběžnější příklady databáze, které můžete najít při komunikaci o desktopové aplikaci pro Windows, jsou Microsoft Access a Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="563c0-158">The most common examples of database you can find when talking about Windows Desktop application are Microsoft Access and Microsoft SQL Server.</span></span> <span data-ttu-id="563c0-159">Pokud máte více než 20 let programování pro plochu, názvy jako ODBC, OLEDB, RDO, ADO, ADO.NET, LINQ a Entity Framework budou vypadat dobře.</span><span class="sxs-lookup"><span data-stu-id="563c0-159">If you have more than 20 years of experience programming for the desktop, names like ODBC, OLEDB, RDO, ADO, ADO.NET, LINQ, and Entity Framework will sound familiar.</span></span>

### <a name="odbc"></a><span data-ttu-id="563c0-160">ODBC</span><span class="sxs-lookup"><span data-stu-id="563c0-160">ODBC</span></span>

<span data-ttu-id="563c0-161">V rozhraní .NET Core můžete i nadále používat rozhraní ODBC, protože společnost Microsoft poskytuje `System.Data.Odbc` knihovnu kompatibilní s .NET Standard 2,0.</span><span class="sxs-lookup"><span data-stu-id="563c0-161">You can continue to use ODBC on .NET Core since Microsoft is providing the `System.Data.Odbc` library compatible with .NET Standard 2.0.</span></span>

### <a name="ole-db"></a><span data-ttu-id="563c0-162">OLE DB</span><span class="sxs-lookup"><span data-stu-id="563c0-162">OLE DB</span></span>

<span data-ttu-id="563c0-163">[OLE DB](https://msdn.microsoft.com/library/ms722784(v=vs.85).aspx)   byl skvělý způsob, jak přistupovat k různým datovým zdrojům jednotným způsobem.</span><span class="sxs-lookup"><span data-stu-id="563c0-163">[OLE DB](https://msdn.microsoft.com/library/ms722784(v=vs.85).aspx) has been a great way to access various data sources in a uniform manner.</span></span> <span data-ttu-id="563c0-164">Ale byl založen na modelu COM, což je technologie jenom pro Windows, a to tak, jak nejlíp vyhovuje technologii pro různé platformy, jako je .NET Core.</span><span class="sxs-lookup"><span data-stu-id="563c0-164">But it was based on COM, which is a Windows-only technology, and as such wasn't the best fit for a cross-platform technology such as .NET Core.</span></span> <span data-ttu-id="563c0-165">V SQL Server verzích 2014 a novějších je také Nepodporovaná.</span><span class="sxs-lookup"><span data-stu-id="563c0-165">It's also unsupported in SQL Server versions 2014 and later.</span></span> <span data-ttu-id="563c0-166">Z těchto důvodů OLE DB nepodporují rozhraní .NET Core.</span><span class="sxs-lookup"><span data-stu-id="563c0-166">For those reasons, OLE DB won't be supported by .NET Core.</span></span>

### <a name="adonet"></a><span data-ttu-id="563c0-167">ADO.NET</span><span class="sxs-lookup"><span data-stu-id="563c0-167">ADO.NET</span></span>

<span data-ttu-id="563c0-168">V rozhraní .NET Core můžete nadále používat ADO.NET ze stávajícího kódu na ploše.</span><span class="sxs-lookup"><span data-stu-id="563c0-168">You can still use ADO.NET from your existing desktop code on .NET Core.</span></span> <span data-ttu-id="563c0-169">Potřebujete jenom aktualizovat některé balíčky NuGet.</span><span class="sxs-lookup"><span data-stu-id="563c0-169">You just need to update some NuGet packages.</span></span>

### <a name="ef-core-vs-ef6"></a><span data-ttu-id="563c0-170">EF Core vs. EF6</span><span class="sxs-lookup"><span data-stu-id="563c0-170">EF Core vs. EF6</span></span>

<span data-ttu-id="563c0-171">K dispozici jsou dvě aktuálně podporované verze Entity Framework (EF) Entity Framework 6 (EF6) a EF Core.</span><span class="sxs-lookup"><span data-stu-id="563c0-171">There are two currently supported versions of Entity Framework (EF), Entity Framework 6 (EF6) and EF Core.</span></span>

<span data-ttu-id="563c0-172">Nejnovější technologie, která byla vydána jako součást .NET Framework World, je Entity Framework, 6,4 má nejnovější verzi.</span><span class="sxs-lookup"><span data-stu-id="563c0-172">The latest technology released as part of the .NET Framework world is Entity Framework, with 6.4 being the latest version.</span></span> <span data-ttu-id="563c0-173">Po spuštění .NET Core společnost Microsoft také vydala novou sadu datových přístupů založenou na Entity Framework a s názvem Entity Framework Core.</span><span class="sxs-lookup"><span data-stu-id="563c0-173">With the launch of .NET Core, Microsoft also released a new data access stack based on Entity Framework and called Entity Framework Core.</span></span>

<span data-ttu-id="563c0-174">Můžete použít EF 6,4 a EF Core z .NET Framework i .NET Core.</span><span class="sxs-lookup"><span data-stu-id="563c0-174">You can use EF 6.4 and EF Core from both .NET Framework and .NET Core.</span></span> <span data-ttu-id="563c0-175">Jaké jsou tedy rozhodovací ovladače, které vám pomůžou při rozhodování mezi nimi?</span><span class="sxs-lookup"><span data-stu-id="563c0-175">So, what are the decision drivers to help to decide between the two?</span></span>

<span data-ttu-id="563c0-176">EF 6,3 je první verze EF6, kterou je možné spustit na .NET Core a pracovat na různých platformách.</span><span class="sxs-lookup"><span data-stu-id="563c0-176">EF 6.3 is the first version of EF6 that can run on .NET Core and work cross-platform.</span></span> <span data-ttu-id="563c0-177">Hlavním cílem této verze je, aby bylo snazší migrovat existující aplikace, které používají EF6, do .NET Core.</span><span class="sxs-lookup"><span data-stu-id="563c0-177">In fact, the main goal of this release was to make it easier to migrate existing applications that use EF6 to .NET Core.</span></span>

<span data-ttu-id="563c0-178">EF Core byla navržena tak, aby poskytovala vývojářské prostředí podobně jako EF6.</span><span class="sxs-lookup"><span data-stu-id="563c0-178">EF Core was designed to provide a developer experience similar to EF6.</span></span> <span data-ttu-id="563c0-179">Většina rozhraní API nejvyšší úrovně zůstává stejná, takže EF Core se budou dobře rozumět vývojářům, kteří používali EF6.</span><span class="sxs-lookup"><span data-stu-id="563c0-179">Most of the top-level APIs remain the same, so EF Core will feel familiar to developers who have used EF6.</span></span>

<span data-ttu-id="563c0-180">I když je kompatibilní, existují rozdíly v implementaci, které byste měli před provedením rozhodnutí ověřit.</span><span class="sxs-lookup"><span data-stu-id="563c0-180">Although compatible, there are differences on the implementation you should check before making a decision.</span></span>
<span data-ttu-id="563c0-181">Další informace najdete v tématu [porovnání EF Core & EF6](/ef/efcore-and-ef6/).</span><span class="sxs-lookup"><span data-stu-id="563c0-181">For more information, see [Compare EF Core & EF6](/ef/efcore-and-ef6/).</span></span>

<span data-ttu-id="563c0-182">Doporučení je nutné použít EF Core v těchto případech:</span><span class="sxs-lookup"><span data-stu-id="563c0-182">The recommendation is to use EF Core if:</span></span>

* <span data-ttu-id="563c0-183">Aplikace potřebuje funkce .NET Core.</span><span class="sxs-lookup"><span data-stu-id="563c0-183">The app needs the capabilities of .NET Core.</span></span>
* <span data-ttu-id="563c0-184">EF Core podporuje všechny funkce, které aplikace vyžaduje.</span><span class="sxs-lookup"><span data-stu-id="563c0-184">EF Core supports all of the features that the app requires.</span></span>

<span data-ttu-id="563c0-185">Zvažte použití EF6, pokud jsou splněny obě následující podmínky:</span><span class="sxs-lookup"><span data-stu-id="563c0-185">Consider using EF6 if both of the following conditions are true:</span></span>

* <span data-ttu-id="563c0-186">Aplikace se spustí v systému Windows a .NET Framework 4,0 nebo novějším.</span><span class="sxs-lookup"><span data-stu-id="563c0-186">The app will run on Windows and .NET Framework 4.0 or later.</span></span>
* <span data-ttu-id="563c0-187">EF6 podporuje všechny funkce, které aplikace vyžaduje.</span><span class="sxs-lookup"><span data-stu-id="563c0-187">EF6 supports all of the features that the app requires.</span></span>

### <a name="relational-databases"></a><span data-ttu-id="563c0-188">Relační databáze</span><span class="sxs-lookup"><span data-stu-id="563c0-188">Relational databases</span></span>

#### <a name="sql-server"></a><span data-ttu-id="563c0-189">SQL Server</span><span class="sxs-lookup"><span data-stu-id="563c0-189">SQL Server</span></span>

<span data-ttu-id="563c0-190">SQL Servera jedna z databází, kterou jste si zvolili, pokud jste vývoj pro plochu před několika lety.</span><span class="sxs-lookup"><span data-stu-id="563c0-190">SQL Server has been one of the databases of choice if you were developing for the desktop some years ago.</span></span> <span data-ttu-id="563c0-191">Při použití v nástroji <xref:System.Data.SqlClient> .NET Framework máte přístup k verzím SQL Server, které zapouzdřují protokoly pro konkrétní databáze.</span><span class="sxs-lookup"><span data-stu-id="563c0-191">With the use of <xref:System.Data.SqlClient> in .NET Framework, you could access versions of SQL Server, which encapsulates database-specific protocols.</span></span>

<span data-ttu-id="563c0-192">V rozhraní .NET Core můžete najít novou `SqlClient` třídu, která je plně kompatibilní s existujícím v .NET Framework, ale nachází se v <xref:Microsoft.Data.SqlClient> knihovně.</span><span class="sxs-lookup"><span data-stu-id="563c0-192">In .NET Core, you can find a new `SqlClient` class, fully compatible with the one existing in the .NET Framework but located in the <xref:Microsoft.Data.SqlClient> library.</span></span> <span data-ttu-id="563c0-193">Stačí přidat odkaz na balíček NuGet [Microsoft. data. SqlClient](https://www.nuget.org/packages/Microsoft.Data.SqlClient/) a udělat nějaké přejmenování pro obory názvů a vše by mělo fungovat podle očekávání.</span><span class="sxs-lookup"><span data-stu-id="563c0-193">You just have to add a reference to the [Microsoft.Data.SqlClient](https://www.nuget.org/packages/Microsoft.Data.SqlClient/) NuGet package and do some renaming for the namespaces and everything should work as expected.</span></span>

#### <a name="microsoft-access"></a><span data-ttu-id="563c0-194">Microsoft Access</span><span class="sxs-lookup"><span data-stu-id="563c0-194">Microsoft Access</span></span>

<span data-ttu-id="563c0-195">Microsoft Access se používá po dobu let, pokud jste propracované a škálovatelné SQL Server nepotřebovali.</span><span class="sxs-lookup"><span data-stu-id="563c0-195">Microsoft Access has been used for years when the sophisticated and more scalable SQL Server wasn't needed.</span></span> <span data-ttu-id="563c0-196">Ke službě Microsoft Access se stále můžete připojit pomocí <xref:System.Data.Odbc> knihovny.</span><span class="sxs-lookup"><span data-stu-id="563c0-196">You can still connect to Microsoft Access using the <xref:System.Data.Odbc> library.</span></span>

## <a name="consuming-services"></a><span data-ttu-id="563c0-197">Využívání služeb</span><span class="sxs-lookup"><span data-stu-id="563c0-197">Consuming services</span></span>

<span data-ttu-id="563c0-198">Při zvýšení architektury orientovaných na služby začaly aplikace klasické pracovní plochy vyvíjet z modelu klient-server až po tři vrstvy přístupu.</span><span class="sxs-lookup"><span data-stu-id="563c0-198">With the raise of service-oriented architectures, desktop applications began to evolve from a client-server model to the three-layer approach.</span></span> <span data-ttu-id="563c0-199">V rámci přístupu typu klient-server je z klienta, který uchovává obchodní logiku obvykle v jednom souboru EXE, navázáno přímé připojení k databázi.</span><span class="sxs-lookup"><span data-stu-id="563c0-199">In the client-server approach, a direct database connection is established from the client holding the business logic usually inside a single EXE file.</span></span> <span data-ttu-id="563c0-200">Na druhé straně přístup ze tří vrstev naváže zprostředkující vrstvu služby implementující obchodní logiku a přístup k databázím, což umožňuje lepší zabezpečení, škálovatelnost a možnosti opětovné použitelnosti.</span><span class="sxs-lookup"><span data-stu-id="563c0-200">On the other hand, the three-layer approach establishes an intermediate service layer implementing business logic and database access allowing for better security, scalability, and reusability.</span></span> <span data-ttu-id="563c0-201">Místo přímé práce s datovými sadami dat závisí přístup k vrstvě v sadě služeb, které implementují kontrakty a typy objektů jako způsob implementace přenosu dat.</span><span class="sxs-lookup"><span data-stu-id="563c0-201">Instead of working directly with datasets of data, the layer approach relies in a set of services implementing contracts and types objects as a way to implement data transfer.</span></span>

<span data-ttu-id="563c0-202">Pokud máte desktopovou aplikaci využívající službu WCF a chcete ji migrovat do .NET Core, je třeba zvážit několik věcí.</span><span class="sxs-lookup"><span data-stu-id="563c0-202">If you have a desktop application using a WCF service and you want to migrate it to .NET Core, there are some things to consider.</span></span>

<span data-ttu-id="563c0-203">První věc je způsob, jak vyřešit konfiguraci pro přístup ke službě.</span><span class="sxs-lookup"><span data-stu-id="563c0-203">The first thing is how to resolve the configuration to access the service.</span></span> <span data-ttu-id="563c0-204">Vzhledem k tomu, že se konfigurace liší od .NET Core, budete muset provést některé aktualizace v konfiguračním souboru.</span><span class="sxs-lookup"><span data-stu-id="563c0-204">Because the configuration is different on .NET Core, you'll need to make some updates in your configuration file.</span></span>

<span data-ttu-id="563c0-205">Za druhé budete muset klienta služby znovu vygenerovat novými nástroji, které jsou součástí sady Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="563c0-205">Second, you'll need to regenerate the service client with the new tools present on Visual Studio 2019.</span></span> <span data-ttu-id="563c0-206">V tomto kroku je nutné zvážit aktivaci generování synchronních operací, aby byl klient kompatibilní s vaším existujícím kódem.</span><span class="sxs-lookup"><span data-stu-id="563c0-206">In this step, you must consider activating the generation of the synchronous operations to make the client compatible with your existing code.</span></span>

<span data-ttu-id="563c0-207">Pokud zjistíte, že v rozhraní .NET Core existují knihovny, které potřebujete, můžete po migraci přidat odkaz na balíček NuGet [Microsoft. Windows. Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) a zjistit, jestli tam chybí funkce.</span><span class="sxs-lookup"><span data-stu-id="563c0-207">After the migration, if you find that there are libraries you need that aren't present on .NET Core, you can add a reference to the [Microsoft.Windows.Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) NuGet package and see if the missing functions are there.</span></span>

<span data-ttu-id="563c0-208">Pokud používáte <xref:System.Net.WebRequest> třídu k provádění volání webové služby, můžete najít určité rozdíly v .NET Core.</span><span class="sxs-lookup"><span data-stu-id="563c0-208">If you're using the <xref:System.Net.WebRequest> class to perform web service calls, you may find some differences on .NET Core.</span></span> <span data-ttu-id="563c0-209">Doporučujeme místo toho použít System .NET. http. HttpClient.</span><span class="sxs-lookup"><span data-stu-id="563c0-209">The recommendation is to use the System.Net.Http.HttpClient instead.</span></span>

## <a name="consuming-a-com-object"></a><span data-ttu-id="563c0-210">Spotřebovávání objektu COM</span><span class="sxs-lookup"><span data-stu-id="563c0-210">Consuming a COM Object</span></span>

<span data-ttu-id="563c0-211">V současné době neexistuje způsob, jak přidat odkaz na objekt modelu COM ze sady Visual Studio 2019 pro použití s .NET Core.</span><span class="sxs-lookup"><span data-stu-id="563c0-211">Currently, there's no way to add a reference to a COM object from Visual Studio 2019 to use with .NET Core.</span></span> <span data-ttu-id="563c0-212">Proto je nutné ručně upravit soubor projektu.</span><span class="sxs-lookup"><span data-stu-id="563c0-212">So, you have to manually modify the project file.</span></span>

<span data-ttu-id="563c0-213">Vložte `COMReference` strukturu do souboru projektu, jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="563c0-213">Insert a `COMReference` structure inside the project file like in the following example:</span></span>

```xml
<ItemGroup>
    <COMReference Include="MSHTML">
        <Guid>{3050F1C5-98B5-11CF-BB82-00AA00BDCE0B}\</Guid>
        <VersionMajor>4</VersionMajor>
        <VersionMinor>0</VersionMinor>
        <Lcid>0</Lcid>
        <WrapperTool>primary</WrapperTool>
        <Isolated>false</Isolated>
    </COMReference>
</ItemGroup>
```

## <a name="more-things-to-consider"></a><span data-ttu-id="563c0-214">Další věci, které je potřeba vzít v úvahu</span><span class="sxs-lookup"><span data-stu-id="563c0-214">More things to consider</span></span>

<span data-ttu-id="563c0-215">Pro rozhraní .NET Core není k dispozici několik technologií .NET Framework knihoven.</span><span class="sxs-lookup"><span data-stu-id="563c0-215">Several technologies available to .NET Framework libraries aren't available for .NET Core.</span></span> <span data-ttu-id="563c0-216">Pokud váš kód spoléhá na některé z těchto technologií, zvažte použití alternativních přístupů popsaných v této části.</span><span class="sxs-lookup"><span data-stu-id="563c0-216">If your code relies on some of these technologies, consider the alternative approaches outlined in this section.</span></span>

<span data-ttu-id="563c0-217">[Sada Windows Compatibility Pack](../../core/porting/windows-compat-pack.md) poskytuje přístup k rozhraním API, která byla dříve k dispozici pouze pro .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="563c0-217">The [Windows Compatibility Pack](../../core/porting/windows-compat-pack.md) provides access to APIs that were previously available only for .NET Framework.</span></span> <span data-ttu-id="563c0-218">Dá se použít v projektech .NET Core a .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="563c0-218">It can be used on .NET Core and .NET Standard projects.</span></span>

<span data-ttu-id="563c0-219">Další informace o kompatibilitě rozhraní API najdete v dokumentaci k zásadním změnám a zastaralým/starším rozhraním API na <https://docs.microsoft.com/dotnet/core/compatibility/fx-core> .</span><span class="sxs-lookup"><span data-stu-id="563c0-219">For more information on API compatibility, you can find documentation about breaking changes and deprecated/legacy APIs at <https://docs.microsoft.com/dotnet/core/compatibility/fx-core>.</span></span>

### <a name="appdomains"></a><span data-ttu-id="563c0-220">Objektů třídy AppDomains</span><span class="sxs-lookup"><span data-stu-id="563c0-220">AppDomains</span></span>

<span data-ttu-id="563c0-221">Aplikační domény (AppDomains) izolují aplikace od sebe navzájem.</span><span class="sxs-lookup"><span data-stu-id="563c0-221">Application domains (AppDomains) isolate apps from one another.</span></span> <span data-ttu-id="563c0-222">Třídy AppDomains vyžadují podporu modulu runtime a jsou nákladné.</span><span class="sxs-lookup"><span data-stu-id="563c0-222">AppDomains require runtime support and are expensive.</span></span> <span data-ttu-id="563c0-223">Vytváření dalších aplikačních domén se nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="563c0-223">Creating additional app domains isn't supported.</span></span> <span data-ttu-id="563c0-224">Pro izolaci kódu doporučujeme samostatné procesy nebo jako alternativu použít kontejnery.</span><span class="sxs-lookup"><span data-stu-id="563c0-224">For code isolation, we recommend separate processes or using containers as an alternative.</span></span> <span data-ttu-id="563c0-225">Pro dynamické načítání sestavení doporučujeme novou  <xref:System.Runtime.Loader.AssemblyLoadContext> třídu.</span><span class="sxs-lookup"><span data-stu-id="563c0-225">For the dynamic loading of assemblies, we recommend the new <xref:System.Runtime.Loader.AssemblyLoadContext> class.</span></span>

<span data-ttu-id="563c0-226">Aby mohla migrace kódu z .NET Framework snazší, rozhraní .NET Core zpřístupňuje některé z ploch rozhraní API AppDomain.</span><span class="sxs-lookup"><span data-stu-id="563c0-226">To make code migration from .NET Framework easier, .NET Core exposes some of the AppDomain API surface.</span></span> <span data-ttu-id="563c0-227">Některá z funkcí rozhraní API obvykle (například  <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType> ), některé členy nedělají nic (například  <xref:System.AppDomain.SetCachePath%2A> ) a některé z nich vyvolají <xref:System.PlatformNotSupportedException> (například  <xref:System.AppDomain.CreateDomain%2A> ).</span><span class="sxs-lookup"><span data-stu-id="563c0-227">Some of the APIs function normally (for example, <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType>), some members do nothing (for example, <xref:System.AppDomain.SetCachePath%2A>), and some of them throw <xref:System.PlatformNotSupportedException> (for example, <xref:System.AppDomain.CreateDomain%2A>).</span></span>

### <a name="remoting"></a><span data-ttu-id="563c0-228">Vzdálenou</span><span class="sxs-lookup"><span data-stu-id="563c0-228">Remoting</span></span>

<span data-ttu-id="563c0-229">Pro komunikaci mezi doménami AppDomain se použila Vzdálená komunikace .NET, která už není podporovaná.</span><span class="sxs-lookup"><span data-stu-id="563c0-229">.NET Remoting was used for cross-AppDomain communication, which is no longer supported.</span></span> <span data-ttu-id="563c0-230">Vzdálená komunikace také vyžaduje běhovou podporu, která je náročná na údržbu.</span><span class="sxs-lookup"><span data-stu-id="563c0-230">Also, Remoting requires runtime support, which is expensive to maintain.</span></span> <span data-ttu-id="563c0-231">Z těchto důvodů není vzdálená komunikace v .NET podporovaná v .NET Core.</span><span class="sxs-lookup"><span data-stu-id="563c0-231">For these reasons, .NET Remoting isn't supported on .NET Core.</span></span>

<span data-ttu-id="563c0-232">Pro komunikaci mezi procesy byste měli zvážit mechanismus komunikace mezi procesy (IPC) jako alternativu ke vzdálené komunikaci, jako je například <xref:System.IO.Pipes?displayProperty=nameWithType> <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> třída nebo.</span><span class="sxs-lookup"><span data-stu-id="563c0-232">For communication across processes, you should consider inter-process communication (IPC) mechanisms as an alternative to Remoting, such as the <xref:System.IO.Pipes?displayProperty=nameWithType> or the <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> class.</span></span>

<span data-ttu-id="563c0-233">V různých počítačích použijte jako alternativu řešení založené na síti.</span><span class="sxs-lookup"><span data-stu-id="563c0-233">Across machines, use a network-based solution as an alternative.</span></span> <span data-ttu-id="563c0-234">Pokud chcete, můžete použít nešifrovaný protokol prostého textu, jako je například HTTP.</span><span class="sxs-lookup"><span data-stu-id="563c0-234">Preferably, use a low-overhead plaintext protocol, such as HTTP.</span></span> <span data-ttu-id="563c0-235">Webový server Kestrel, který používá ASP.NET Core, je zde možnost.</span><span class="sxs-lookup"><span data-stu-id="563c0-235">The Kestrel web server, the web server used by ASP.NET Core, is an option here.</span></span>

### <a name="code-access-security-cas"></a><span data-ttu-id="563c0-236">Zabezpečení přístupu kódu (CAS)</span><span class="sxs-lookup"><span data-stu-id="563c0-236">Code Access Security (CAS)</span></span>

<span data-ttu-id="563c0-237">Sandboxing, která spoléhá na modul runtime nebo na rozhraní k omezení prostředků, které spravovaná aplikace nebo knihovna používá nebo běží, se v .NET Core nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="563c0-237">Sandboxing, which relies on the runtime or the framework to constrain which resources a managed application or library uses or runs, isn't supported on .NET Core.</span></span>

<span data-ttu-id="563c0-238">Používejte hranice zabezpečení poskytované operačním systémem, jako je virtualizace, kontejnery nebo uživatelské účty pro spouštění procesů s minimální sadou oprávnění.</span><span class="sxs-lookup"><span data-stu-id="563c0-238">Use security boundaries that are provided by the operating system, such as virtualization, containers, or user accounts for running processes with the minimum set of privileges.</span></span>

### <a name="security-transparency"></a><span data-ttu-id="563c0-239">Transparentnost zabezpečení</span><span class="sxs-lookup"><span data-stu-id="563c0-239">Security Transparency</span></span>

<span data-ttu-id="563c0-240">Podobně jako certifikační autorita, transparentnost zabezpečení odděluje kód v izolovaném prostoru z kódu kritického zabezpečení deklarativním způsobem, ale již není podporována jako hranice zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="563c0-240">Similar to CAS, Security Transparency separates sandboxed code from security critical code in a declarative fashion but is no longer supported as a security boundary.</span></span>

<span data-ttu-id="563c0-241">Používejte hranice zabezpečení poskytované operačním systémem, jako je virtualizace, kontejnery nebo uživatelské účty pro spouštění procesů s minimální sadou oprávnění.</span><span class="sxs-lookup"><span data-stu-id="563c0-241">Use security boundaries that are provided by the operating system, such as virtualization, containers, or user accounts for running processes with the least set of privileges.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="563c0-242">[Předchozí](whats-new-dotnet-core.md ) 
> [Další](windows-migration.md)</span><span class="sxs-lookup"><span data-stu-id="563c0-242">[Previous](whats-new-dotnet-core.md )
[Next](windows-migration.md)</span></span>
