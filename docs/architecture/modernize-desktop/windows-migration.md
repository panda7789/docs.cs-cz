---
title: Migrace Windows 10
description: Hluboká podrobně v funkcích Windows 10, jako je například balení a kódování na ostrovech XAML.
ms.date: 09/16/2019
ms.openlocfilehash: cd17088b086a32fd3bb37e617d3a1047acedde0e
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/15/2020
ms.locfileid: "83423206"
---
# <a name="windows-10-migration"></a><span data-ttu-id="fdfa6-103">Migrace Windows 10</span><span class="sxs-lookup"><span data-stu-id="fdfa6-103">Windows 10 migration</span></span>

<span data-ttu-id="fdfa6-104">Vezměte v úvahu následující situaci: máte pracovní desktopovou aplikaci, která byla vyvinuta v systému Windows 7 dnů.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-104">Consider the following situation: You have a working desktop application that was developed in the Windows 7 days.</span></span> <span data-ttu-id="fdfa6-105">Používá technologii WPF dostupnou v daném čase a funguje správně, ale má zastaralé uživatelské rozhraní a chování při spuštění ve Windows 10.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-105">It's using WPF technology available at that time and working fine but it has an outdated UI and behaviors when you run it on Windows 10.</span></span> <span data-ttu-id="fdfa6-106">Vypadá to jako při sledování Futuristic filmu jako matice a vidíte Neo pomocí zařízení Nokia 8110.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-106">It is like when you watch a futuristic movie like Matrix and you see Neo using the Nokia 8110 device.</span></span> <span data-ttu-id="fdfa6-107">Film funguje Skvělé po 20 letech, ale místo toho by měla těžit z modernizace zařízení.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-107">The film works great after 20 years but it would rather benefit from a device modernization.</span></span>

<span data-ttu-id="fdfa6-108">S vydáním Windows 10 Společnost Microsoft představila mnoho inovací pro podporu scénářů, jako jsou tablety a dotyková zařízení, a poskytuje tak nejlepší možnosti pro uživatele v operačním systému Microsoftu.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-108">With the release of Windows 10, Microsoft introduced many innovations to support scenarios like tablets and touch devices and to provide the best experience for users for a Microsoft operating system ever.</span></span> <span data-ttu-id="fdfa6-109">Můžete například provést následující věci:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-109">For example, you can:</span></span>

- <span data-ttu-id="fdfa6-110">Přihlaste se s využitím svého obličeje pomocí Windows Hello.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-110">Sign in with your face using Windows Hello.</span></span>
- <span data-ttu-id="fdfa6-111">Použijte pero k nakreslení nebo ručnímu psaní textu, který se automaticky rozpozná a digitálně.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-111">Use a pen to draw or handwrite text that is automatically recognized and digitalized.</span></span>
- <span data-ttu-id="fdfa6-112">Spouštějte místně přizpůsobené modely AI založené na cloudu pomocí WinML.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-112">Run locally customized AI models built on the cloud using WinML.</span></span>

<span data-ttu-id="fdfa6-113">Všechny tyto funkce jsou povolené pro vývojáře v systému Windows prostřednictvím knihoven prostředí Windows Runtime (WinRT).</span><span class="sxs-lookup"><span data-stu-id="fdfa6-113">All these features are enabled for Windows developers through Windows Runtime (WinRT) libraries.</span></span> <span data-ttu-id="fdfa6-114">Tyto funkce můžete využít ve stávajících aplikacích klasické pracovní plochy, protože knihovny jsou zpřístupněny i pro .NET Framework i .NET Core.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-114">You can take advantage of these features in your existing desktop apps because the libraries are exposed to both the .NET Framework and .NET Core as well.</span></span> <span data-ttu-id="fdfa6-115">Můžete dokonce modernizovat své uživatelské rozhraní pomocí jazyka XAML a zlepšit vizuály a chování vašich aplikací podle času.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-115">You can even modernize your UI with the use of XAML Islands and improve the visuals and behavior of your apps according to the times.</span></span>

<span data-ttu-id="fdfa6-116">Jednou z důležitých věcí, které je třeba poznamenat, je, že nemusíte opustit .NET Framework technologie, abyste mohli postupovat podle této cesty k modernizaci.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-116">One important thing to note here is that you don't need to abandon .NET Framework technology to follow this modernization path.</span></span> <span data-ttu-id="fdfa6-117">V této části můžete bezpečně zůstat a mít všechny výhody Windows 10 bez přítlaku na migraci do .NET Core.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-117">You can safely stay on there and have all the benefits of Windows 10 without the pressure to migrate to .NET Core.</span></span> <span data-ttu-id="fdfa6-118">Získáte tedy i flexibilitu a možnost zvolit si cestu k modernizaci.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-118">So, you get both the power and the flexibility to choose your modernization path.</span></span>

## <a name="winrt-apis"></a><span data-ttu-id="fdfa6-119">Rozhraní API WinRT</span><span class="sxs-lookup"><span data-stu-id="fdfa6-119">WinRT APIs</span></span>

<span data-ttu-id="fdfa6-120">Rozhraní API WinRT jsou objektově orientované a strukturované aplikační programovací rozhraní (API), které vývojářům Windows 10 poskytují přístup ke všemu, co nabízí operační systém.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-120">WinRT APIs are object-oriented, well-structured application programming interfaces (APIs) that give Windows 10 developers access to everything the operating system has to offer.</span></span> <span data-ttu-id="fdfa6-121">Prostřednictvím rozhraní API WinRT můžete integrovat funkce, jako jsou nabízená oznámení, rozhraní API pro zařízení, Microsoft Ink a WinML, a to mimo jiné na vaše desktopové aplikace.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-121">Through WinRT APIs, you can integrate functionalities like Push Notifications, Device APIs, Microsoft Ink, and WinML, among others on your desktop apps.</span></span>

<span data-ttu-id="fdfa6-122">Obecně platí, že rozhraní API WinRT je možné volat z klasické desktopové aplikace.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-122">In general, WinRT APIs can be called from a classic desktop app.</span></span> <span data-ttu-id="fdfa6-123">Existují však dvě hlavní oblasti s výjimkou pro toto pravidlo:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-123">However, two main areas present an exception to this rule:</span></span>

* <span data-ttu-id="fdfa6-124">Rozhraní API, která vyžadují identitu balíčku.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-124">APIs that require a package identity.</span></span>
* <span data-ttu-id="fdfa6-125">Rozhraní API, která vyžadují vizualizaci, jako je XAML nebo složení.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-125">APIs that require visualization like XAML or Composition.</span></span>

### <a name="universal-windows-platform-uwp-packages"></a><span data-ttu-id="fdfa6-126">Balíčky Univerzální platforma Windows (UWP)</span><span class="sxs-lookup"><span data-stu-id="fdfa6-126">Universal Windows Platform (UWP) packages</span></span>

#### <a name="application-package-identity"></a><span data-ttu-id="fdfa6-127">Identita balíčku aplikace</span><span class="sxs-lookup"><span data-stu-id="fdfa6-127">Application Package Identity</span></span>

<span data-ttu-id="fdfa6-128">Aplikace pro UWP mají systém nasazení, ve kterém operační systém spravuje instalaci a odinstalaci aplikace.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-128">UWP apps have a deployment system where the OS manages the installation and uninstallation of application.</span></span> <span data-ttu-id="fdfa6-129">To vyžaduje deklarativní instalaci, což znamená, že během instalace není proveden žádný uživatelský kód.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-129">That requires the installation to be declarative, meaning that no user code is executed during install.</span></span> <span data-ttu-id="fdfa6-130">Místo toho je v manifestu aplikace deklarována vše, co aplikace chce integrovat se systémem, jako jsou protokoly, typy souborů a rozšíření.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-130">Instead, everything the app wants to integrate with the system, such as protocols, file types, and extensions, is declared in the application manifest.</span></span> <span data-ttu-id="fdfa6-131">V době nasazení nakonfiguruje kanál nasazení tyto integrační body.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-131">At deployment time, the deployment pipeline configures those integration points.</span></span> <span data-ttu-id="fdfa6-132">Jediným způsobem, jak operační systém spravovat všechny tyto funkce a sledovat, je pro každý balíček, aby měl identitu, jedinečný identifikátor pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-132">The only way for the OS to manage all this functionality and keep track of it is for each 'package' to have an identity, a unique identifier for the application.</span></span>

<span data-ttu-id="fdfa6-133">Některá rozhraní WinRT API vyžadují, aby tato identita balíčku fungovala podle očekávání.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-133">Some WinRT APIs require this package identity to work as expected.</span></span> <span data-ttu-id="fdfa6-134">Klasické desktopové aplikace, jako jsou nativní aplikace C++ nebo .NET, ale používají různé systémy nasazení, které nevyžadují identitu balíčku.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-134">However, classic desktop apps like native C++ or .NET apps, use different deployment systems that don't require a package identity.</span></span> <span data-ttu-id="fdfa6-135">Pokud chcete tato rozhraní API WinRT použít v desktopové aplikaci, musíte jim poskytnout identitu balíčku.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-135">If you want to use these WinRT APIs in your desktop application, you need to provide them a package identity.</span></span>

<span data-ttu-id="fdfa6-136">Jedním ze způsobů, jak pokračovat, je sestavit další balící projekt.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-136">One way to proceed is to build an additional packaging project.</span></span> <span data-ttu-id="fdfa6-137">V rámci balícího projektu odkazujete na původní projekt zdrojového kódu a určíte informace o identitě, kterou chcete poskytnout.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-137">Inside the packaging project, you point to the original source code project and specify the Identity information you want to provide.</span></span><span data-ttu-id="fdfa6-138">Pokud balíček nainstalujete a spustíte nainstalovanou aplikaci, automaticky se získá identifikace umožňující vašemu kódu volat všechna rozhraní API WinRT vyžadující identitu.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-138"> If you install the package and run the installed app, it will automatically get an identify enabling your code to call all WinRT APIs requiring Identity.</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<Package xmlns="http://schemas.microsoft.com/appx/manifest/foundation/windows10"
         xmlns:uap="http://schemas.microsoft.com/appx/manifest/uap/windows10">
    <Identity Name="YOUR-APP-GUID "
              Publisher="CN=YOUR COMPANY"
              Version="1.x.x.x" />
</Package>
```

<span data-ttu-id="fdfa6-139">Pomocí kontroly, jestli je typ obsahující rozhraní API označený atributem [DualApiPartition](xref:Windows.Foundation.Metadata.DualApiPartitionAttribute) , můžete zkontrolovat, která rozhraní API potřebují zabalené identity aplikace.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-139">You can check which APIs need a packaged application identity by inspecting if the type that contains the API is marked with the [DualApiPartition](xref:Windows.Foundation.Metadata.DualApiPartitionAttribute) attribute.</span></span><span data-ttu-id="fdfa6-140">Pokud je, můžete zavolat, pokud z nebalené tradiční desktopové aplikace.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-140"> If it is, you can call if from an unpackaged traditional desktop app.</span></span> <span data-ttu-id="fdfa6-141">V opačném případě je nutné převést klasickou desktopovou aplikaci na UWP pomocí balícího projektu.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-141">Otherwise, you must convert your classic desktop app to a UWP with the help of a packaging project.</span></span>

<https://docs.microsoft.com/windows/desktop/apiindex/uwp-apis-callable-from-a-classic-desktop-app>

#### <a name="benefits-of-packaging"></a><span data-ttu-id="fdfa6-142">Výhody balení</span><span class="sxs-lookup"><span data-stu-id="fdfa6-142">Benefits of packaging</span></span>

<span data-ttu-id="fdfa6-143">Kromě udělení přístupu k těmto rozhraním API získáte další výhody vytvořením balíčku aplikace pro Windows pro vaši desktopovou aplikaci, včetně:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-143">Besides giving you access to these APIs, you get some additional benefits by creating a Windows App package for your desktop application including:</span></span>

* <span data-ttu-id="fdfa6-144">**Zjednodušené nasazení**.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-144">**Streamlined deployment**.</span></span> <span data-ttu-id="fdfa6-145">Aplikace mají Skvělé prostředí pro nasazení, které zajišťuje, aby si uživatelé mohli bez obav nainstalovat aplikaci a aktualizovat ji.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-145">Apps have a great deployment experience ensuring that users can confidently install an application and update it.</span></span> <span data-ttu-id="fdfa6-146">Pokud se uživatel rozhodne aplikaci odinstalovat, je zcela odebrána bez trasování, které brání problému s Windows hnilobou.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-146">If a user chooses to uninstall the app, it's removed completely with no trace left behind preventing the Windows rot problem.</span></span>

* <span data-ttu-id="fdfa6-147">**Automatické aktualizace a licencování**.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-147">**Automatic updates and licensing**.</span></span> <span data-ttu-id="fdfa6-148">Vaše aplikace se může účastnit integrovaných funkcí licencování a automatických aktualizací Microsoft Store.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-148">Your application can participate in the Microsoft Store's built-in licensing and automatic update facilities.</span></span> <span data-ttu-id="fdfa6-149">Automatická aktualizace je vysoce spolehlivý a efektivní mechanismus, protože se stáhnou jenom změněné části souborů.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-149">Automatic update is a highly reliable and efficient mechanism, because only the changed parts of files are downloaded.</span></span>

* <span data-ttu-id="fdfa6-150">**Zvýšení dosahu a zjednodušení finanční zhodnocení**</span><span class="sxs-lookup"><span data-stu-id="fdfa6-150">**Increased reach and simplified monetization**.</span></span> <span data-ttu-id="fdfa6-151">Možná se nejedná o váš případ, ale pokud se rozhodnete distribuovat aplikaci prostřednictvím Microsoft Store dostanete miliony uživatelů s Windows 10.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-151">Maybe not your case but if you choose to distribute your application through the Microsoft Store you reach millions of Windows 10 users.</span></span>

* <span data-ttu-id="fdfa6-152">**Přidejte funkce UWP**.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-152">**Add UWP features**.</span></span> <span data-ttu-id="fdfa6-153">Do balíčku vaší aplikace můžete přidat funkce UWP vaším vlastním tempem.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-153">You can add UWP features to your app's package at your own pace.</span></span>

#### <a name="prepare-for-packaging"></a><span data-ttu-id="fdfa6-154">Příprava na balení</span><span class="sxs-lookup"><span data-stu-id="fdfa6-154">Prepare for packaging</span></span>

<span data-ttu-id="fdfa6-155">Než budete pokračovat v zabalení aplikace klasické pracovní plochy, je nutné před zahájením procesu vyřešit několik bodů.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-155">Before proceeding to package your desktop application, there are some points you have to address before starting the process.</span></span> <span data-ttu-id="fdfa6-156">Vaše aplikace musí respektovat všechna pravidla Microsoft Store a zásady a spouštět je v aplikačním modelu UWP.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-156">Your application must respect any of the Microsoft Store rules and policies and run in the UWP application model.</span></span> <span data-ttu-id="fdfa6-157">Například musí běžet na .NET Framework 4.6.2 nebo novějším a zapisuje se do `HKEY_CURRENT_USER` podregistru a složky s tímto rozhraním budou virtualizované na místní umístění aplikace specifické pro uživatele.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-157">For example, it has to run on the .NET Framework 4.6.2 or later and writes to the `HKEY_CURRENT_USER` registry hive and the AppData folders will be virtualized to a user-specific app-local location.</span></span>

<span data-ttu-id="fdfa6-158">Cílem pro sbalení je oddělit stav aplikace od stavu systému a současně zachovat kompatibilitu s jinými aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-158">The design goal for packaging is to separate the application state from system state while maintaining compatibility with other apps.</span></span> <span data-ttu-id="fdfa6-159">Windows 10 tento cíl dosahuje umístěním aplikace do balíčku UWP.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-159">Windows 10 accomplishes this goal by placing the application inside a UWP package.</span></span> <span data-ttu-id="fdfa6-160">Detekuje a přesměruje některé změny v systému souborů a v registru za běhu, aby splnily příslib důvěryhodného a čistého chování instalace a odinstalace aplikace poskytované balíčkem.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-160">It detects and redirects some changes to the file system and registry at run time to fulfill the promise of a trusted and clean install and uninstall behavior of an application provided by packaging.</span></span>

<span data-ttu-id="fdfa6-161">Balíčky, které vytvoříte pro desktopovou aplikaci, jsou aplikace s plnou důvěryhodností, které nejsou v izolovaném prostoru (sandbox), i když je v aplikaci odlehčená virtualizace, která se používá pro zápisy do `HKCU` a `AppData` .</span><span class="sxs-lookup"><span data-stu-id="fdfa6-161">Packages that you create for your desktop application are desktop-only, full-trust applications that aren't sandboxed, although there's lightweight virtualization applied to the app for writes to `HKCU` and `AppData`.</span></span> <span data-ttu-id="fdfa6-162">Tato virtualizace umožňuje interakci s ostatními aplikacemi stejným způsobem jako klasické aplikace klasické pracovní plochy.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-162">This virtualization allows them to interact with other apps the same way classic desktop applications do.</span></span>

##### <a name="installation"></a><span data-ttu-id="fdfa6-163">Instalace</span><span class="sxs-lookup"><span data-stu-id="fdfa6-163">Installation</span></span>

<span data-ttu-id="fdfa6-164">Balíčky aplikací jsou nainstalovány ve složce *% ProgramFiles% \\ WindowsApps \\ package_name*s názvem souboru  `app_name.exe` .</span><span class="sxs-lookup"><span data-stu-id="fdfa6-164">App packages are installed under *%ProgramFiles%\\WindowsApps\\package_name*, with the executable titled `app_name.exe`.</span></span> <span data-ttu-id="fdfa6-165">Každá složka balíčku obsahuje manifest (pojmenovaný `AppxManifest.xml` ), který obsahuje speciální obor názvů XML pro zabalené aplikace.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-165">Each package folder contains a manifest (named `AppxManifest.xml`) that contains a special XML namespace for packaged apps.</span></span> <span data-ttu-id="fdfa6-166">Uvnitř tohoto souboru manifestu je  `<EntryPoint>`   prvek, který odkazuje na aplikaci s úplným vztahem důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-166">Inside that manifest file is an `<EntryPoint>` element, which references the full-trust app.</span></span> <span data-ttu-id="fdfa6-167">Při spuštění aplikace se nespustí v kontejneru aplikace, ale místo toho se spustí jako uživatel normálně.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-167">When that application is launched, it doesn't run inside an app container, but instead it runs as the user as it normally would.</span></span>

<span data-ttu-id="fdfa6-168">Po nasazení jsou soubory balíčku označené jen pro čtení a silně uzamčeny operačním systémem.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-168">After deployment, package files are marked read-only and heavily locked down by the operating system.</span></span> <span data-ttu-id="fdfa6-169">Systém Windows zabraňuje spuštění aplikací, pokud jsou tyto soubory úmyslně poškozeny.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-169">Windows prevents apps from launching if these files are tampered with.</span></span>

##### <a name="file-system"></a><span data-ttu-id="fdfa6-170">Systém souborů</span><span class="sxs-lookup"><span data-stu-id="fdfa6-170">File system</span></span>

<span data-ttu-id="fdfa6-171">OPERAČNÍ systém podporuje různé úrovně operací se systémem souborů pro zabalené desktopové aplikace v závislosti na umístění složky.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-171">The OS supports different levels of file system operations for packaged desktop applications, depending on the folder location.</span></span>

<span data-ttu-id="fdfa6-172">Když se pokusíte o přístup ke *složce s* uživatelskými rozhraními, systém vytvoří pro jednotlivé aplikace na pozadí privátní umístění jednotlivých uživatelů.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-172">When trying to access the user's *AppData* folder, the system creates a private per-user, per-app location behind the scenes.</span></span> <span data-ttu-id="fdfa6-173">Tím se vytvoří iluze, kterou zabalená aplikace upravuje v *reálném čase* , když je skutečně upravována soukromá kopie.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-173">This creates the illusion that the packaged application is editing the real *AppData* when it's actually modifying a private copy.</span></span> <span data-ttu-id="fdfa6-174">Změnou přesměrování tímto způsobem může systém sledovat všechny změny souborů provedené aplikací.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-174">By redirecting writes this way, the system can track all file modifications made by the app.</span></span> <span data-ttu-id="fdfa6-175">Pak může vyčistit všechny tyto soubory při odinstalaci systému snižovat "hnilobu" a zajistit tak lepší prostředí pro odebrání aplikací pro uživatele.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-175">It can then clean all those files when uninstalling reducing system "rot" and providing a better application removal experience for the user.</span></span>

##### <a name="registry"></a><span data-ttu-id="fdfa6-176">Registr</span><span class="sxs-lookup"><span data-stu-id="fdfa6-176">Registry</span></span>

<span data-ttu-id="fdfa6-177">Balíčky aplikací obsahují soubor Registry. dat, který slouží jako logický ekvivalent  `HKLM\Software`   v reálném registru.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-177">App packages contain a registry.dat file, which serves as the logical equivalent of `HKLM\Software` in the real registry.</span></span> <span data-ttu-id="fdfa6-178">V době běhu tento virtuální registr sloučí obsah tohoto podregistru do nativního systémového podregistru, aby poskytoval jednotné zobrazení v rámci obou.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-178">At runtime, this virtual registry merges the contents of this hive into the native system hive to provide a singular view of both.</span></span>

<span data-ttu-id="fdfa6-179">Všechna zápisy se uchovávají během upgradu balíčku a odstraňují se jenom při odinstalaci aplikace.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-179">All writes are kept during package upgrade and only deleted when the application is uninstalled.</span></span>

##### <a name="uninstallation"></a><span data-ttu-id="fdfa6-180">Odinstalace</span><span class="sxs-lookup"><span data-stu-id="fdfa6-180">Uninstallation</span></span>

<span data-ttu-id="fdfa6-181">Když uživatel odinstaluje balíček, odeberou se všechny soubory a složky  `C:\Program Files\WindowsApps\package_name` , které jsou umístěné v části, i všechny přesměrované zápisy na data nebo Registry zaznamenané během procesu.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-181">When the user uninstalls a package, all files and folders located under `C:\Program Files\WindowsApps\package_name` are removed, as well as any redirected writes to AppData or the registry that were captured during the process.</span></span>

<span data-ttu-id="fdfa6-182">Podrobnosti o tom, jak zabalená aplikace zpracovává instalaci, přístup k souborům, registr a odinstalaci, najdete v tématu <https://docs.microsoft.com/windows/msix/desktop/desktop-to-uwp-behind-the-scenes> .</span><span class="sxs-lookup"><span data-stu-id="fdfa6-182">For details about how a packaged application handles installation, file access, registry, and uninstallation, see <https://docs.microsoft.com/windows/msix/desktop/desktop-to-uwp-behind-the-scenes>.</span></span>

<span data-ttu-id="fdfa6-183">Můžete získat úplný seznam věcí, které byste měli kontrolovat <https://docs.microsoft.com/windows/msix/desktop/desktop-to-uwp-prepare> .</span><span class="sxs-lookup"><span data-stu-id="fdfa6-183">You can get a complete list of things to check on <https://docs.microsoft.com/windows/msix/desktop/desktop-to-uwp-prepare>.</span></span>

## <a name="how-to-add-winrt-apis-to-your-desktop-project"></a><span data-ttu-id="fdfa6-184">Postup přidání rozhraní API WinRT do desktopového projektu</span><span class="sxs-lookup"><span data-stu-id="fdfa6-184">How to add WinRT APIs to your desktop project</span></span>

<span data-ttu-id="fdfa6-185">V této části najdete návod, jak integrovat informační oznámení do existující aplikace WPF.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-185">In this section, you can find a walkthrough on how to integrate Toast Notifications in an existing WPF application.</span></span> <span data-ttu-id="fdfa6-186">I když je v perspektivě kódu jednoduché, pomůže ilustrovat celý proces.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-186">Although it's simple from the code perspective, it helps illustrate the whole process.</span></span> <span data-ttu-id="fdfa6-187">Oznámení jsou jedním z dostupných dostupných rozhraní API WinRT, která můžete použít v aplikaci .NET.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-187">Notifications are one of the many available WinRT APIs available that you can use in .NET app.</span></span> <span data-ttu-id="fdfa6-188">V takovém případě rozhraní API vyžaduje identitu balíčku.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-188">In this case, the API requires a Package Identity.</span></span> <span data-ttu-id="fdfa6-189">Tento proces je složitější, pokud rozhraní API nevyžadují identitu balíčku.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-189">This process is more straightforward if the APIs don't require Package Identity.</span></span>

<span data-ttu-id="fdfa6-190">Pojďme si nechat existující ukázkovou aplikaci WPF, která načte soubory a zobrazí její obsah na obrazovce.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-190">Let's take an existing WPF sample app that reads files and shows its contents on the screen.</span></span> <span data-ttu-id="fdfa6-191">Cílem je zobrazit informační zprávy při spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-191">The goal is to display a Toast Notification when the application starts.</span></span>

![Snímek obrazovky se spuštěnou ukázkovou aplikací](./media/windows-migration/sample-application.png)

<span data-ttu-id="fdfa6-193">Nejdřív byste měli vrátit následující odkaz na to, jestli rozhraní Windows 10 API, které budete používat, vyžaduje identitu balíčku:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-193">First, you should check in the following link whether the Windows 10 API that you'll use requires a Package Identity:</span></span>

<https://docs.microsoft.com/windows/apps/desktop/modernize/desktop-to-uwp-supported-api>

<span data-ttu-id="fdfa6-194">Naše ukázka bude používat <xref:Windows.UI.Notifications.Notification?displayProperty=nameWithType> rozhraní API, které vyžaduje zabalenou identitu:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-194">Our sample will use the <xref:Windows.UI.Notifications.Notification?displayProperty=nameWithType> API that requires a packaged identity:</span></span>

![Třída oznámení v dokumentaci Microsoftu](./media/windows-migration/notification-class-documentation.png)

<span data-ttu-id="fdfa6-196">Pokud chcete získat přístup k rozhraní API WinRT, přidejte odkaz na `Microsoft.Windows.SDK.Contracts`   balíček NuGet a tento balíček provede Magic na pozadí (viz podrobnosti na adrese <https://blogs.windows.com/windowsdeveloper/2019/04/30/calling-windows-10-apis-from-a-desktop-application-just-got-easier/> ).</span><span class="sxs-lookup"><span data-stu-id="fdfa6-196">To access the WinRT API, add a reference to the `Microsoft.Windows.SDK.Contracts` NuGet package and this package will do the magic behind the scenes (see details at <https://blogs.windows.com/windowsdeveloper/2019/04/30/calling-windows-10-apis-from-a-desktop-application-just-got-easier/>).</span></span>

<span data-ttu-id="fdfa6-197">Teď jste připraveni začít přidávat nějaký kód.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-197">You're now prepared to start adding some code.</span></span>

<span data-ttu-id="fdfa6-198">Vytvořte `ShowToastNotification` metodu, která bude volána při spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-198">Create a `ShowToastNotification` method that will be called on application startup.</span></span> <span data-ttu-id="fdfa6-199">Pouze vytvoří informační zprávu ze vzoru XML:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-199">It just builds a toast notification from an XML pattern:</span></span>

```csharp
private void ShowNotification(string title, string content, string image)
{
    string xmlString = $@"<toast><visual><binding template = 'ToastGeneric'><text>{title}</text><text>{content}</text><image src=>'{image}'</image></binding></visual></toast>";
    XmlDocument toastXml = new XmlDocument();
    toastXml.LoadXml(xmlString);
    ToastNotification toast = new ToastNotification(toastXml);
    ToastNotificationManager.CreateToastNotifier().Show(toast);
}
```

<span data-ttu-id="fdfa6-200">I když je projekt sestaven, dochází k chybám, protože rozhraní API oznámení vyžaduje identitu balíčku a neposkytli jste ji.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-200">Although the project builds, there are errors because the Notifications API requires a Package Identity and you didn't provide it.</span></span> <span data-ttu-id="fdfa6-201">Při přidání projektového balíčku Windows do řešení se problém vyřeší:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-201">Adding a Windows Packaging Project to the solution will fix the issue:</span></span>

![Snímek obrazovky dialogového okna Přidat nový projekt v aplikaci Visual Studio](./media/windows-migration/add-packaging-project.png)

<span data-ttu-id="fdfa6-203">Vyberte minimální verzi Windows, kterou chcete podporovat, a verzi, na kterou cílíte.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-203">Select the minimum Windows version you want to support and the version you're targeting.</span></span> <span data-ttu-id="fdfa6-204">Všechna rozhraní API WinRT nejsou podporovaná ve všech verzích Windows 10.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-204">Not all the WinRT APIs are supported in all Windows 10 versions.</span></span> <span data-ttu-id="fdfa6-205">Každá aktualizace Windows 10 přidává nová rozhraní API, která jsou dostupná jenom z této verze. Podpora nižší úrovně není k dispozici.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-205">Each Windows 10 update adds new APIs that are only available from this version; down-level support isn't available.</span></span>

![Výběr minimální verze Windows](./media/windows-migration/select-versions.png)

<span data-ttu-id="fdfa6-207">Dalším krokem je přidání aplikace WPF do projektového balíčku Windows přidáním odkazu na projekt:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-207">Next step is to add the WPF application to the Windows Packaging Project by adding a project reference:</span></span>

![Přidání aplikace WPF do balícího projektu Windows](./media/windows-migration/add-application.png)

![Správce odkazů](./media/windows-migration/reference-manager.png)

<span data-ttu-id="fdfa6-210">Projekt balíčku Windows může zabalit několik aplikací, takže byste měli nastavit, který z nich je vstupním bodem:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-210">A Windows Packaging Project can package several apps so you should set which one is the Entry Point:</span></span>

![Nastavení vstupního bodu](./media/windows-migration/set-entry-point.png)

<span data-ttu-id="fdfa6-212">Dalším krokem je nastavení projektu WPF jako spouštěného projektu v konfiguraci řešení.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-212">Next step is to set the WPF Project as the startup Project in the solution configuration.</span></span> <span data-ttu-id="fdfa6-213">Stiskem klávesy F5 můžete kompilovat a sestavovat a zobrazovat výsledky.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-213">You can press F5 to compile and build and see the results.</span></span>

![Ukázková aplikace běží a zobrazuje výsledky.](./media/windows-migration/sample-app-result.png)

<span data-ttu-id="fdfa6-215">Pojďme vygenerovat balíček, abyste mohli nainstalovat aplikaci.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-215">Let's generate the package so you can install your app.</span></span> <span data-ttu-id="fdfa6-216">Klikněte pravým tlačítkem na **úložiště**  >  **vytvořit balíčky aplikací**.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-216">Right click on **Store** > **Create App Packages**.</span></span>

![Dialogové okno vytvořit balíčky aplikací](./media/windows-migration/create-app-packages.png)

<span data-ttu-id="fdfa6-218">Vyberte možnost zkušební načtení pro nasazení aplikace z počítače:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-218">Select the sideloading option to deploy the app from your machine:</span></span>

![Výběr možnosti pro zkušební načtení](./media/windows-migration/select-sideloading-option.png)

<span data-ttu-id="fdfa6-220">Vyberte architekturu aplikace vaší aplikace:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-220">Select the application architecture of your app:</span></span>

![Výběr architektury aplikace](./media/windows-migration/select-app-architecture.png)

<span data-ttu-id="fdfa6-222">Nakonec vytvořte balíček kliknutím na **vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-222">Finally, create the package by clicking on **Create**.</span></span>

## <a name="xaml-islands"></a><span data-ttu-id="fdfa6-223">XAML – ostrovy</span><span class="sxs-lookup"><span data-stu-id="fdfa6-223">XAML Islands</span></span>

<span data-ttu-id="fdfa6-224">XAML – ostrovy jsou sada komponent, které vývojářům pro stolní počítače s Windows umožňují používat ovládací prvky UWP v jazyce XAML na svých stávajících aplikacích Win32, včetně model Windows Forms a WPF.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-224">XAML Islands are a set of components that enable Windows desktop developers to use UWP XAML controls on their existing Win32 applications, including Windows Forms and WPF.</span></span>

![Struktura na ostrovech XAML](./media/windows-migration/xaml-islands.png)

<span data-ttu-id="fdfa6-226">Pomocí standardních ovládacích prvků a mezi nimi můžete image aplikace Win32, která obsahuje ovládací prvky z moderního světa, a mezi nimi i "ostrov".</span><span class="sxs-lookup"><span data-stu-id="fdfa6-226">You can image your Win32 app with your standard controls and among them an "island" of UWP UI containing controls from the modern world.</span></span> <span data-ttu-id="fdfa6-227">Koncept je podobný jako při zobrazení prvku iFrame uvnitř webové stránky, která zobrazuje obsah z`different page.`</span><span class="sxs-lookup"><span data-stu-id="fdfa6-227">The concept is similar as having an iFrame inside a web page that shows content from a `different page.`</span></span>

<span data-ttu-id="fdfa6-228">Kromě přidávání funkcí z rozhraní API pro Windows 10 můžete do své aplikace přidat části prostředí UWP XAML pomocí ostrovů v jazyce XAML.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-228">Besides adding functionality from the Windows 10 APIs, you can add pieces of UWP XAML inside of your app using XAML Islands.</span></span>

<span data-ttu-id="fdfa6-229">Windows 10 1903 Update zavádí sadu rozhraní API, která umožňuje hostování obsahu UWP ve Windows v systému Win32.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-229">Windows 10 1903 update introduces a set of APIs that allows hosting UWP XAML content in Win32 windows.</span></span> <span data-ttu-id="fdfa6-230">Pro aplikace, které běží na Windows 10 1903, můžou používat i jazyky XAML.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-230">Only apps running on Windows 10 1903 can use XAML Islands.</span></span>

### <a name="the-road-to-xaml-islands"></a><span data-ttu-id="fdfa6-231">Silnice na ostrovy XAML</span><span class="sxs-lookup"><span data-stu-id="fdfa6-231">The road to XAML Islands</span></span>

<span data-ttu-id="fdfa6-232">Cesta na ostrovy XAML začala v 2012, když společnost Microsoft představila rozhraní API WinRT jako rozhraní pro modernizovat aplikací Win32 (model Windows Forms, WPF a nativní aplikace Win32).</span><span class="sxs-lookup"><span data-stu-id="fdfa6-232">The road to XAML Islands started in 2012 when Microsoft introduced the WinRT APIs as a framework to modernize the Win32 apps (Windows Forms, WPF, and native Win32 apps).</span></span> <span data-ttu-id="fdfa6-233">Nové ovládací prvky uživatelského rozhraní v WinRT byly ale k dispozici pro nové aplikace, ale ne pro stávající.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-233">However, the new UI controls inside WinRT were available for new applications but not for existing ones.</span></span>

<span data-ttu-id="fdfa6-234">V 2015, společně s Windows 10, se nenarodila UWP.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-234">In 2015, along with Windows 10, UWP was born.</span></span> <span data-ttu-id="fdfa6-235">UWP umožňují vytvářet aplikace, které fungují na zařízeních s Windows, jako je XBox, Mobile a Desktop.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-235">UWP allows you to create apps that work across Windows devices like XBox, Mobile, and Desktop.</span></span> <span data-ttu-id="fdfa6-236">Po jednom roce později Microsoft oznámil stolní most (dříve označovaný jako projekt Centennial).</span><span class="sxs-lookup"><span data-stu-id="fdfa6-236">One year later, Microsoft announced Desktop Bridge (formerly known as Project Centennial).</span></span> <span data-ttu-id="fdfa6-237">Desktopový most je sada nástrojů, které vývojářům umožňují přenést své stávající aplikace Win32 do Microsoft Store.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-237">Desktop Bridge is a set of tools that allowed developers to bring their existing Win32 apps to the Microsoft Store.</span></span> <span data-ttu-id="fdfa6-238">V 2017 byly přidány další možnosti, které vývojářům umožňují vylepšit aplikace Win32 s využitím některých nových rozhraní API Windows 10, jako jsou živé dlaždice a oznámení v centru akcí.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-238">More capabilities were added in 2017, allowing developers to enhance their Win32 apps leveraging some of the new Windows 10 APIs, like live tiles and notifications on the action center.</span></span> <span data-ttu-id="fdfa6-239">Ale pořád žádné nové ovládací prvky uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-239">But still, no new UI controls.</span></span>

<span data-ttu-id="fdfa6-240">V buildu 2018 Microsoft oznámil vývojářům možnost používat nové ovládací prvky Windows 10 XAML ve svých aktuálních aplikacích Win32, aniž by museli plně migrovat své aplikace na UWP.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-240">At Build 2018, Microsoft announced a way for developers to use the new Windows 10 XAML controls into their current Win32 apps, without fully migrating their apps to UWP.</span></span> <span data-ttu-id="fdfa6-241">Byla označena jako ostrovy UWP v jazyce XAML.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-241">It was branded as UWP XAML Islands.</span></span>

### <a name="how-it-works"></a><span data-ttu-id="fdfa6-242">Jak to funguje</span><span class="sxs-lookup"><span data-stu-id="fdfa6-242">How it works</span></span>

<span data-ttu-id="fdfa6-243">Aktualizace pro Windows 10 1903 zavádí několik rozhraní API pro hostování XAML.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-243">The Windows 10 1903 update introduces several XAML hosting APIs.</span></span> <span data-ttu-id="fdfa6-244">Dva z nich jsou `WindowsXamlManager`   a  `DesktopWindowXamlSource` .</span><span class="sxs-lookup"><span data-stu-id="fdfa6-244">Two of them are `WindowsXamlManager` and `DesktopWindowXamlSource`.</span></span>

<span data-ttu-id="fdfa6-245"> `WindowsXamlManager`   Třída zpracovává rozhraní XAML pro UWP.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-245">The `WindowsXamlManager` class handles the UWP XAML Framework.</span></span> <span data-ttu-id="fdfa6-246">Jeho `InitializeForCurrentThread` Metoda načte architekturu UWP v rámci aktuálního vlákna aplikace Win32.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-246">Its `InitializeForCurrentThread` method loads the UWP XAML Framework inside the current thread of the Win32 app.</span></span>

<span data-ttu-id="fdfa6-247"> `DesktopWindowXamlSource`   Je instancí vašeho obsahu v jazyce XAML.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-247">The `DesktopWindowXamlSource` is the instance of your XAML Island content.</span></span> <span data-ttu-id="fdfa6-248">Má `Content` vlastnost, kterou zodpovídáte za vytváření instancí a nastavení.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-248">It has the `Content` property, which you're responsible for instantiating and setting.</span></span> <span data-ttu-id="fdfa6-249">`DesktopWindowXamlSource`   Vykreslí a získá jeho vstup z HWND.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-249">The `DesktopWindowXamlSource` renders and gets its input from an HWND.</span></span> <span data-ttu-id="fdfa6-250">Oddělení IT musí znát, ke kterému druhému HWND bude připojovat prvek XAML a Vy zodpovídáte za jeho určení velikosti a umístění jeho nadřazeného prvku HWND.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-250">It needs to know to which other HWND it will attach the XAML Island's one, and you're responsible for sizing and positioning the parent's HWND.</span></span>

<span data-ttu-id="fdfa6-251">WPF nebo model Windows Forms vývojáři obvykle nepracují s HWND uvnitř kódu, takže může být obtížné pochopit a zpracovávat ukazatele HWND a základní kabeláži pro komunikaci Win32 a UWP světů.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-251">WPF or Windows Forms developers don't usually deal with HWND inside their code, so it may be hard to understand and handle HWND pointers and the underlying wiring stuff to communicate Win32 and UWP worlds.</span></span>

#### <a name="the-xaml-islands-net-wrappers"></a><span data-ttu-id="fdfa6-252">Obálky XAML na ostrovech</span><span class="sxs-lookup"><span data-stu-id="fdfa6-252">The XAML Islands .NET Wrappers</span></span>

<span data-ttu-id="fdfa6-253">Sada nástrojů Community Toolkit pro Windows má nastavovat obálky XAML pro WPF nebo model Windows Forms, které usnadňují použití na ostrovech XAML.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-253">The Windows Community Toolkit has a set the XAML Islands .NET wrappers for WPF or Windows Forms that make easier to use XAML Islands.</span></span> <span data-ttu-id="fdfa6-254">Tyto obálky spravují HWND, správu fokusu mimo jiné.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-254">These wrappers manage the HWNDs, the focus management, among other things.</span></span> <span data-ttu-id="fdfa6-255">Vývojáři model Windows Forms a WPF by měli používat tyto obálky.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-255">Windows Forms and WPF developers should use these wrappers.</span></span>

<span data-ttu-id="fdfa6-256">Sada nástrojů Windows Community Toolkit nabízí dva typy ovládacích prvků: zabalené ovládací prvky a hostitelské ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-256">The Windows Community Toolkit offers two types of controls: Wrapped Controls and Hosting Controls.</span></span>

##### <a name="wrapped-controls"></a><span data-ttu-id="fdfa6-257">Zabalené ovládací prvky</span><span class="sxs-lookup"><span data-stu-id="fdfa6-257">Wrapped Controls</span></span>

<span data-ttu-id="fdfa6-258">Tyto zabalené ovládací prvky zabalí některé ovládací prvky UWP do ovládacích prvků model Windows Forms nebo WPF, které těmto vývojářům skrývají koncepty UWP.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-258">These wrapped controls wrap some UWP controls into Windows Forms or WPF controls, hiding UWP concepts for those developers.</span></span> <span data-ttu-id="fdfa6-259">Jsou to tyto ovládací prvky:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-259">These controls are:</span></span>

* <span data-ttu-id="fdfa6-260">WebView a WebViewCompatible</span><span class="sxs-lookup"><span data-stu-id="fdfa6-260">WebView and WebViewCompatible</span></span>
* <span data-ttu-id="fdfa6-261">InkCanvas a InkToolbar</span><span class="sxs-lookup"><span data-stu-id="fdfa6-261">InkCanvas and InkToolbar</span></span>
* <span data-ttu-id="fdfa6-262">MediaPlayerElement</span><span class="sxs-lookup"><span data-stu-id="fdfa6-262">MediaPlayerElement</span></span>
* <span data-ttu-id="fdfa6-263">MapControl</span><span class="sxs-lookup"><span data-stu-id="fdfa6-263">MapControl</span></span>

<span data-ttu-id="fdfa6-264">Přidejte `Microsoft.Toolkit.Wpf.UI.Controls` balíček do projektu, zahrňte odkaz na obor názvů a začněte ho používat.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-264">Add the `Microsoft.Toolkit.Wpf.UI.Controls` package to your project, include the reference to the namespace, and start using them.</span></span>

```xml
<Window
        ...
        xmlns:uwpControls="clr-namespace:Microsoft.Toolkit.Wpf.UI.Controls;assembly=Microsoft.Toolkit.Wpf.UI.Controls">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="\*"/>
    </Grid.RowDefinitions>
    <uwpControls:InkToolbar TargetInkCanvas="{x:Reference Name=inkCanvas}"/>
    <uwpControls:InkCanvas Grid.Row="1" x:Name="inkCanvas" />
</Grid>
```

##### <a name="hosting-controls"></a><span data-ttu-id="fdfa6-265">Hostování ovládacích prvků</span><span class="sxs-lookup"><span data-stu-id="fdfa6-265">Hosting controls</span></span>

<span data-ttu-id="fdfa6-266">Výkon ostrovů v jazyce XAML rozšiřuje na většinu ovládacích prvků první strany, ovládací prvky třetích stran a vlastní ovládací prvky vyvinuté pro UWP, které je možné integrovat do model Windows Forms a WPF jako "ostrovy" s plně funkčním uživatelským rozhraním.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-266">The power of XAML Islands extends to most first-party controls, third-party controls, and custom controls developed for UWP, which can be integrated into Windows Forms and WPF as "Islands" with fully functional UI.</span></span> <span data-ttu-id="fdfa6-267">`WindowsXamlHost`To umožňuje ovládací prvek pro WPF a model Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-267">The `WindowsXamlHost` control for WPF and Windows Forms allows doing this.</span></span>

<span data-ttu-id="fdfa6-268">Chcete-li například použít `WindowsXamlHost` ovládací prvek v WPF, přidejte odkaz na `Microsoft.Toolkit.Wpf.UI.XamlHost` balíček poskytovaný sadu nástrojů Windows Community Toolkit.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-268">For example, to use the `WindowsXamlHost` control in WPF, add a reference to the `Microsoft.Toolkit.Wpf.UI.XamlHost` package provided by the Windows Community Toolkit.</span></span>

<span data-ttu-id="fdfa6-269">Po umístění `WindowsXamlHost` do kódu uživatelského rozhraní určete, který typ UWP chcete načíst.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-269">Once you've placed your `WindowsXamlHost` into your UI code, specify which UWP type you want to load.</span></span> <span data-ttu-id="fdfa6-270">Můžete zvolit, že se má používat zabalený ovládací prvek jako nebo složitější a `Button` tvořený několika různými ovládacími prvky, které jsou vlastním ovládacím prvkem UWP.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-270">You can choose to use a wrapped control like a `Button` or a more complex one composed by several different controls, which are a custom UWP control.</span></span>

<span data-ttu-id="fdfa6-271">Následující příklad ukazuje, jak přidat UWP `Button` :</span><span class="sxs-lookup"><span data-stu-id="fdfa6-271">The following example shows how to add a UWP `Button`:</span></span>

```xml
<Window
        ...
        xmlns:xamlhost="clr-namespace:Microsoft.Toolkit.Wpf.UI.XamlHost;assembly=Microsoft.Toolkit.Wpf.UI.XamlHost">

<xamlhost:WindowsXamlHost x:Name="myUwpButton"
                          InitialTypeName="Windows.UI.Xaml.Controls.Button" />
```

<span data-ttu-id="fdfa6-272">Existuje jasné doporučení k tomuto přístupu a je lepší mít jeden a větší jazyk XAML, který obsahuje vlastní složený ovládací prvek, než má několik ostrovů s jedním ovládacím prvkem.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-272">There's a clear recommendation on how to approach this and it's better to have one single and bigger XAML Island containing a custom composite control than to have several islands with one control on each.</span></span>

<span data-ttu-id="fdfa6-273">Jedna z klíčových funkcí jazyka XAML je vazba a funguje mezi kódem Win32 a ostrovem.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-273">One of the core features of XAML is binding and it works between your Win32 code and the island.</span></span> <span data-ttu-id="fdfa6-274">To znamená, že můžete vytvořit instanci Win32 `Textbox` pomocí UWP `Textbox` .</span><span class="sxs-lookup"><span data-stu-id="fdfa6-274">So, you can bind, for instance, a Win32 `Textbox` with a UWP `Textbox`.</span></span> <span data-ttu-id="fdfa6-275">Jedním z důležitých věcí, které je třeba zvážit, je, že tyto vazby jsou jednosměrné vazby, od UWP po Win32, takže pokud aktualizujete `Textbox` uvnitř ostrova XAML, bude textové pole Win32 aktualizováno, ale nikoli jiným způsobem.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-275">One important thing to consider is that these bindings are one-way bindings, from UWP to Win32, so if you update the `Textbox` inside the XAML Island the Win32 Textbox will be updated, but not the other way around.</span></span>

<span data-ttu-id="fdfa6-276">Návod, jak používat ostrovy XAML, najdete v těchto tématech:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-276">To see a walkthrough about how to use XAML Islands, see:</span></span>

<https://docs.microsoft.com/windows/apps/desktop/modernize/host-standard-control-with-xaml-islands>

#### <a name="adding-uwp-xaml-custom-controls"></a><span data-ttu-id="fdfa6-277">Přidávání vlastních ovládacích prvků XAML pro UWP</span><span class="sxs-lookup"><span data-stu-id="fdfa6-277">Adding UWP XAML custom controls</span></span>

<span data-ttu-id="fdfa6-278">Vlastní ovládací prvek XAML je ovládací prvek (nebo uživatelský ovládací prvek), který jste vytvořili vy nebo třetí strany (včetně ovládacích prvků WinUI 2. x).</span><span class="sxs-lookup"><span data-stu-id="fdfa6-278">A XAML custom control is a control (or user control) created by you or by third parties (including WinUI 2.x controls).</span></span> <span data-ttu-id="fdfa6-279">Chcete-li hostovat vlastní ovládací prvek UWP v aplikaci model Windows Forms nebo WPF, budete potřebovat:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-279">To host a custom UWP control in a Windows Forms or WPF app, you'll need:</span></span>

- <span data-ttu-id="fdfa6-280">Použití `WindowsXamlHost` ovládacího prvku UWP v aplikaci .NET Core 3. x.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-280">To use the `WindowsXamlHost` UWP control in your .NET Core 3.x app.</span></span>
- <span data-ttu-id="fdfa6-281">Chcete-li vytvořit projekt aplikace UWP definující `XamlApplication` objekt.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-281">To create a UWP app project that defines a `XamlApplication` object.</span></span>

<span data-ttu-id="fdfa6-282">Váš projekt WPF nebo model Windows Forms musí mít přístup k instanci `Microsoft.Toolkit.Win32.UI.XamlHost.XamlApplication` třídy poskytované sadu nástrojů Windows Community Toolkit.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-282">Your WPF or Windows Forms project must have access to an instance of the `Microsoft.Toolkit.Win32.UI.XamlHost.XamlApplication` class provided by the Windows Community Toolkit.</span></span> <span data-ttu-id="fdfa6-283">Tento objekt funguje jako zprostředkovatel kořenových metadat pro načítání metadat pro vlastní typy jazyka XAML UWP v sestaveních v aktuálním adresáři aplikace.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-283">This object acts as a root metadata provider for loading metadata for custom UWP XAML types in assemblies in the current directory of your application.</span></span> <span data-ttu-id="fdfa6-284">Doporučeným způsobem je přidat prázdný projekt aplikace (univerzální pro Windows) do stejného řešení jako vaše WPF nebo model Windows Forms projekt a revidovat výchozí třídu aplikace v tomto projektu.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-284">The recommended way to do this is to add a Blank App (Universal Windows) project to the same solution as your WPF or Windows Forms project and revise the default App class in this project.</span></span>

<span data-ttu-id="fdfa6-285">Vlastní ovládací prvek XAML pro UWP může být součástí této aplikace pro UWP nebo v nezávislém projektu knihovny tříd UWP, na který odkazujete ve stejném řešení jako vaše WPF nebo model Windows Forms projekt.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-285">The custom UWP XAML control can be included on this UWP app or in an independent UWP Class Library project that you reference in the same solution as your WPF or Windows Forms project.</span></span>

<span data-ttu-id="fdfa6-286">Podrobný popis procesu najdete v těchto krocích:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-286">You can check a detailed step-by-step process description at:</span></span>

<https://docs.microsoft.com/windows/apps/desktop/modernize/host-custom-control-with-xaml-islands>

#### <a name="the-windows-ui-library-winui-2"></a><span data-ttu-id="fdfa6-287">Knihovna uživatelského rozhraní systému Windows (WinUI 2)</span><span class="sxs-lookup"><span data-stu-id="fdfa6-287">The Windows UI Library (WinUI 2)</span></span>

<span data-ttu-id="fdfa6-288">Kromě ovládacích prvků Doručená pošta systému Windows 10, které jsou součástí operačního systému, je stejný tým pro UWP XAML také poskytovat další ovládací prvky v knihovně uživatelského rozhraní systému Windows (**WinUI 2**).</span><span class="sxs-lookup"><span data-stu-id="fdfa6-288">Besides the inbox Windows 10 controls that comes with the OS, the same UWP XAML team also deliver additional controls in the Windows UI Library (**WinUI 2**).</span></span> <span data-ttu-id="fdfa6-289">WinUI 2 poskytuje oficiální nativní ovládací prvky a funkce uživatelského rozhraní Microsoft pro aplikace pro Windows UWP a tyto ovládací prvky je možné použít uvnitř na ostrovech XAML.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-289">WinUI 2 provides official native Microsoft UI controls and features for Windows UWP apps and these controls can be used inside of XAML Islands.</span></span>

<span data-ttu-id="fdfa6-290">WinUI 2 je open source a informace najdete na adrese <https://github.com/microsoft/microsoft-ui-xaml> .</span><span class="sxs-lookup"><span data-stu-id="fdfa6-290">WinUI 2 is open source and you can find information at <https://github.com/microsoft/microsoft-ui-xaml>.</span></span>

<span data-ttu-id="fdfa6-291">Následující článek ukazuje, jak hostovat ovládací prvek jazyka XAML UWP z knihovny WinUI 2:<https://docs.microsoft.com/windows/apps/desktop/modernize/host-custom-control-with-xaml-islands></span><span class="sxs-lookup"><span data-stu-id="fdfa6-291">The following article demonstrates how to host a UWP XAML control from the WinUI 2 library: <https://docs.microsoft.com/windows/apps/desktop/modernize/host-custom-control-with-xaml-islands></span></span>

### <a name="do-you-need-xaml-islands"></a><span data-ttu-id="fdfa6-292">Potřebujete ostrovy XAML</span><span class="sxs-lookup"><span data-stu-id="fdfa6-292">Do you need XAML Islands</span></span>

<span data-ttu-id="fdfa6-293">Ostrovy XAML jsou určené pro existující aplikace Win32, které chtějí zlepšit uživatelské prostředí tím, že využívají nové ovládací prvky a chování UWP bez úplného přepsání aplikace.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-293">XAML Islands are intended for existing Win32 apps that want to improve their user experience by leveraging new UWP controls and behaviors without a full rewrite of the app.</span></span> <span data-ttu-id="fdfa6-294">Mohli jste už [využít rozhraní API Windows 10](/windows/uwp/porting/desktop-to-uwp-enhance), ale až do kódování XAML, ale jenom pro rozhraní API, které nesouvisí s UŽIVATELSKÝm rozhraním.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-294">You could already [leverage Windows 10 APIs](/windows/uwp/porting/desktop-to-uwp-enhance), but up until XAML Islands, only non-UI related APIs.</span></span>

<span data-ttu-id="fdfa6-295">Pokud vyvíjíte novou aplikaci pro Windows, je pravděpodobně to správný přístup k [aplikaci pro UWP](/windows/uwp/get-started/universal-application-platform-guide)   .</span><span class="sxs-lookup"><span data-stu-id="fdfa6-295">If you're developing a new Windows App, a [UWP App](/windows/uwp/get-started/universal-application-platform-guide) is probably the right approach.</span></span>

### <a name="the-road-ahead-xaml-islands-winui-30"></a><span data-ttu-id="fdfa6-296">Silniční a XAML – ostrovy WinUI 3,0</span><span class="sxs-lookup"><span data-stu-id="fdfa6-296">The road ahead XAML Islands: WinUI 3.0</span></span>

<span data-ttu-id="fdfa6-297">Vzhledem k tomu, že systém Windows 8, platforma uživatelského rozhraní systému Windows, včetně rozhraní XAML UI, vizuálního složení a vstupního zpracování, byla dodávána jako nedílnou součást systému Windows.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-297">Since Windows 8, the Windows UI platform, including the XAML UI framework, visual composition layer, and input processing has been shipped as an integral part of Windows.</span></span> <span data-ttu-id="fdfa6-298">To znamená, že pokud chcete využít nejnovější vylepšení technologií uživatelského rozhraní, musíte upgradovat na nejnovější verzi uživatelského rozhraní a zpomalit tempo inovací při vývoji aplikací.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-298">This means that to benefit from the latest improvements on UI technologies, you must upgrade to the latest version of the UI, slowing down the pace of innovation when you develop your apps.</span></span> <span data-ttu-id="fdfa6-299">Aby bylo možné oddělit tyto dva cykly vývoje a podpořit inovace, společnost Microsoft aktivně pracuje na projektu WinUI.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-299">To decouple these two evolution cycles and foster innovation, Microsoft is actively working on the WinUI project.</span></span>

<span data-ttu-id="fdfa6-300">Od WinUI 2 v 2018 se společnost Microsoft začala dodávat některé nové ovládací prvky a funkce uživatelského rozhraní XAML jako samostatné balíčky NuGet, které sestavují na základě sady SDK pro UWP.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-300">Starting with WinUI 2 in 2018, Microsoft started shipping some new XAML UI controls and features as separate NuGet packages that build on top of the UWP SDK.</span></span>

![Struktura WinUI 2,0](./media/windows-migration/winui2.png)

<span data-ttu-id="fdfa6-302">WinUI 3 je pod aktivním vývojem a výrazně rozšiřuje rozsah WinUI tak, aby zahrnoval celou platformu uživatelského rozhraní, která bude plně oddělená od sady SDK pro UWP:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-302">WinUI 3 is under active development and will greatly expand the scope of WinUI to include the full UI platform, which will be fully decoupled from the UWP SDK:</span></span>

![Struktura WinUI 3,0](./media/windows-migration/winui3.png)

<span data-ttu-id="fdfa6-304">Rozhraní XAML Framework bude nyní vyvíjeno na GitHubu a dodáváno mimo IP síť jako balíčky [NuGet](/nuget/what-is-nuget)   .</span><span class="sxs-lookup"><span data-stu-id="fdfa6-304">XAML framework will now be developed on GitHub and shipped out of band as [NuGet](/nuget/what-is-nuget) packages.</span></span>

<span data-ttu-id="fdfa6-305">Existující funkce rozhraní API pro UWP, dodávané jako součást operačního systému, již nebudou dostávat nové aktualizace funkcí.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-305">The existing UWP XAML APIs that ship as part of the OS will no longer receive new feature updates.</span></span> <span data-ttu-id="fdfa6-306">Budou dál dostávat aktualizace zabezpečení a kritické opravy v souladu s životním cyklem podpory Windows 10.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-306">They will still receive security updates and critical fixes according to the Windows 10 support lifecycle.</span></span>

<span data-ttu-id="fdfa6-307">Univerzální platforma Windows obsahuje více než pouze rozhraní XAML Framework (například model aplikace a zabezpečení, kanál médií, integrace prostředí Xbox a Windows 10, Rozsáhlá podpora zařízení) a bude nadále vyvíjet.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-307">The Universal Windows Platform contains more than just the XAML framework (for example, application and security model, media pipeline, Xbox and Windows 10 shell integrations, broad device support) and will continue to evolve.</span></span> <span data-ttu-id="fdfa6-308">Všechny nové funkce XAML se budou vyvíjet a místo toho budou dodávat jako součást WinUI.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-308">All new XAML features will just be developed and ship as part of WinUI instead.</span></span>

#### <a name="winui-3-in-desktop-app-and-winui-xaml-islands"></a><span data-ttu-id="fdfa6-309">WinUI 3 v desktopové aplikaci a na ostrovech WinUI XAML</span><span class="sxs-lookup"><span data-stu-id="fdfa6-309">WinUI 3 in desktop app and WinUI XAML Islands</span></span>

<span data-ttu-id="fdfa6-310">Jak vidíte, WinUI 3 je vývoj pro UWP XAML a přirozeně funguje v rámci modelu aplikace UWP a všech jeho požadavků (MSIX zabaleného ID, izolovaného prostoru, CoreWindow atd.).</span><span class="sxs-lookup"><span data-stu-id="fdfa6-310">As you can see, WinUI 3 is the evolution of UWP XAML and it works naturally within the UWP app model and all its requirements (MSIX packaged ID, sandbox, CoreWindow, and so on.</span></span> <span data-ttu-id="fdfa6-311">Chcete-li použít pouze WinUI 3 v modelu aplikace Win32, měl by být obsah WinUI hostovaný jiným rozhraním uživatelského rozhraní (model Windows Forms, WPF a tak dále) pomocí **WinUIch ostrovů jazyka XAML**.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-311">To use just WinUI 3 in a Win32 app model, the WinUI content should be hosted by another UI Framework (Windows Forms, WPF, and so on) using **WinUI XAML Islands**.</span></span> <span data-ttu-id="fdfa6-312">Jedná se o správnou cestu, pokud chcete vyvíjet aplikace a míchat technologie.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-312">This is the right path if you want to evolve your app and mix technologies.</span></span> <span data-ttu-id="fdfa6-313">Pokud ale chcete nahradit celé staré uživatelské rozhraní pro WinUI, vaše aplikace by by neměla načíst architektury uživatelského rozhraní pro jenom hostování WinUI.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-313">However, if you want to replace your entire old UI for WinUI, your app shouldn't load UI Frameworks for just hosting WinUI.</span></span>

<span data-ttu-id="fdfa6-314">WinUI 3 bude tuto kritickou zpětnou vazbu přidávat **v desktopových aplikacích WinUI**.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-314">WinUI 3 will address this critical feedback adding **WinUI in desktop apps**.</span></span> <span data-ttu-id="fdfa6-315">To umožní, aby aplikace Win32 používaly jako samostatné rozhraní WinUI 3. není nutné načítat model Windows Forms ani WPF.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-315">This will allow that Win32 apps can use WinUI 3 as standalone UI Framework; no need to load Windows Forms or WPF.</span></span>

<span data-ttu-id="fdfa6-316">WinUI 3 v rámci této agregace umožní vývojářům snadno kombinovat a porovnat pravou kombinaci:</span><span class="sxs-lookup"><span data-stu-id="fdfa6-316">Within this aggregation, WinUI 3 will let developers easily mix and match the right combination of:</span></span>

* <span data-ttu-id="fdfa6-317">Aplikační model: UWP, Win32</span><span class="sxs-lookup"><span data-stu-id="fdfa6-317">App model: UWP, Win32</span></span>
* <span data-ttu-id="fdfa6-318">Platforma: .NET Core nebo nativní</span><span class="sxs-lookup"><span data-stu-id="fdfa6-318">Platform: .NET Core or Native</span></span>
* <span data-ttu-id="fdfa6-319">Jazyk: .NET (C \# , Visual Basic), Standard C++</span><span class="sxs-lookup"><span data-stu-id="fdfa6-319">Language: .NET (C\#, Visual Basic), standard C++</span></span>
* <span data-ttu-id="fdfa6-320">Balení: MSIX, AppX pro Microsoft Store, unpackageed</span><span class="sxs-lookup"><span data-stu-id="fdfa6-320">Packaging: MSIX, AppX for the Microsoft Store, unpackaged</span></span>
* <span data-ttu-id="fdfa6-321">Spolupráce: použijte WinUI 3 pro rozšiřování existujících aplikací WPF, WinForms a MFC pomocí WinUIových ostrovů.</span><span class="sxs-lookup"><span data-stu-id="fdfa6-321">Interop: use WinUI 3 to extend existing WPF, WinForms, and MFC apps using WinUI XAML Islands.</span></span>

<span data-ttu-id="fdfa6-322">Pokud chcete získat další informace, Microsoft tento plán sdílí v nástroji <https://github.com/microsoft/microsoft-ui-xaml/blob/master/docs/roadmap.md> .</span><span class="sxs-lookup"><span data-stu-id="fdfa6-322">If you want to know more details, Microsoft is sharing this roadmap in <https://github.com/microsoft/microsoft-ui-xaml/blob/master/docs/roadmap.md>.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="fdfa6-323">[Předchozí](migrate-modern-applications.md) 
> [Další](example-migration-core.md)</span><span class="sxs-lookup"><span data-stu-id="fdfa6-323">[Previous](migrate-modern-applications.md)
[Next](example-migration-core.md)</span></span>
