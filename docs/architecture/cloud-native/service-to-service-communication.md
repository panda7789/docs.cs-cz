---
title: Komunikace mezi službami
description: Zjistěte, jak back-end cloud nativní mikroslužby komunikovat s ostatními back-end mikroslužeb.
author: robvet
ms.date: 09/09/2019
ms.openlocfilehash: 926be3c2eb4513c89ebcd1f31dceb7d58639dc6f
ms.sourcegitcommit: 79b0dd8bfc63f33a02137121dd23475887ecefda
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/01/2020
ms.locfileid: "80523552"
---
# <a name="service-to-service-communication"></a><span data-ttu-id="75016-103">Komunikace mezi službami</span><span class="sxs-lookup"><span data-stu-id="75016-103">Service-to-service communication</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="75016-104">Přechod z front-endklienta, nyní řešíme back-end ové mikroslužby komunikovat mezi sebou.</span><span class="sxs-lookup"><span data-stu-id="75016-104">Moving from the front-end client, we now address back-end microservices communicate with each other.</span></span>

<span data-ttu-id="75016-105">Při vytváření aplikace nativní pro cloud, budete chtít být citliví na to, jak back-endové služby vzájemně komunikují.</span><span class="sxs-lookup"><span data-stu-id="75016-105">When constructing a cloud-native application, you'll want to be sensitive to how back-end services communicate with each other.</span></span> <span data-ttu-id="75016-106">V ideálním případě, čím méně meziútvarové komunikace, tím lépe.</span><span class="sxs-lookup"><span data-stu-id="75016-106">Ideally, the less inter-service communication, the better.</span></span> <span data-ttu-id="75016-107">Vyhýbání se však není vždy možné, protože back-endové služby se často spoléhají na sebe k dokončení operace.</span><span class="sxs-lookup"><span data-stu-id="75016-107">However, avoidance isn't always possible as back-end services often rely on one another to complete an operation.</span></span>

<span data-ttu-id="75016-108">Existuje několik široce přijímaných přístupů k implementaci meziútvarové komunikace.</span><span class="sxs-lookup"><span data-stu-id="75016-108">There are several widely accepted approaches to implementing cross-service communication.</span></span> <span data-ttu-id="75016-109">*Typ komunikace interakce* bude často určovat nejlepší přístup.</span><span class="sxs-lookup"><span data-stu-id="75016-109">The *type of communication interaction* will often determine the best approach.</span></span>

<span data-ttu-id="75016-110">Zvažte následující typy interakcí:</span><span class="sxs-lookup"><span data-stu-id="75016-110">Consider the following interaction types:</span></span>

- <span data-ttu-id="75016-111">*Dotaz* – pokud volající mikroslužba vyžaduje odpověď z volané mikroslužby, například "Hey, give me the buyer information for a given customer Id."</span><span class="sxs-lookup"><span data-stu-id="75016-111">*Query* – when a calling microservice requires a response from a called microservice, such as, "Hey, give me the buyer information for a given customer Id."</span></span>

- <span data-ttu-id="75016-112">*Příkaz* – když volající mikroslužba potřebuje jinou mikroslužbu k provedení akce, ale nevyžaduje odpověď, například "Hey, just ship this order."</span><span class="sxs-lookup"><span data-stu-id="75016-112">*Command* – when the calling microservice needs another microservice to execute an action but doesn't require a response, such as, "Hey, just ship this order."</span></span>

- <span data-ttu-id="75016-113">*Událost* – když mikroslužba, nazývaná vydavatel, vyvolá událost, která se změnila nebo došlo k akci.</span><span class="sxs-lookup"><span data-stu-id="75016-113">*Event* – when a microservice, called the publisher, raises an event that state has changed or an action has occurred.</span></span> <span data-ttu-id="75016-114">Ostatní mikroslužby, nazývané předplatitelé, kteří mají zájem, mohou na událost odpovídajícím způsobem reagovat.</span><span class="sxs-lookup"><span data-stu-id="75016-114">Other microservices, called subscribers, who are interested, can react to the event appropriately.</span></span> <span data-ttu-id="75016-115">Vydavatel a odběratelé si nejsou vědomi navzájem.</span><span class="sxs-lookup"><span data-stu-id="75016-115">The publisher and the subscribers aren't aware of each other.</span></span>

<span data-ttu-id="75016-116">Mikroslužby systémy obvykle používají kombinaci těchto typů interakce při provádění operací, které vyžadují interakci mezi službami.</span><span class="sxs-lookup"><span data-stu-id="75016-116">Microservice systems typically use a combination of these interaction types when executing operations that require cross-service interaction.</span></span> <span data-ttu-id="75016-117">Podívejme se na ně zblízka a na to, jak byste je mohli implementovat.</span><span class="sxs-lookup"><span data-stu-id="75016-117">Let's take a close look at each and how you might implement them.</span></span>

## <a name="queries"></a><span data-ttu-id="75016-118">Dotazy</span><span class="sxs-lookup"><span data-stu-id="75016-118">Queries</span></span>

<span data-ttu-id="75016-119">Mnohokrát, jeden mikroslužeb může být nutné *dotaz* jiné, vyžadující okamžitou odpověď k dokončení operace.</span><span class="sxs-lookup"><span data-stu-id="75016-119">Many times, one microservice might need to *query* another, requiring an immediate response to complete an operation.</span></span> <span data-ttu-id="75016-120">Mikroslužba nákupního košíku může potřebovat informace o produktu a cenu pro přidání položky do košíku.</span><span class="sxs-lookup"><span data-stu-id="75016-120">A shopping basket microservice may need product information and a price to add an item to its basket.</span></span> <span data-ttu-id="75016-121">Existuje několik přístupů pro implementaci operací dotazu.</span><span class="sxs-lookup"><span data-stu-id="75016-121">There are a number of approaches for implementing query operations.</span></span>

### <a name="requestresponse-messaging"></a><span data-ttu-id="75016-122">Zasílání zpráv požadavku a odpovědi</span><span class="sxs-lookup"><span data-stu-id="75016-122">Request/Response Messaging</span></span>

<span data-ttu-id="75016-123">Jednou z možností pro implementaci tohoto scénáře je pro volání back-end mikroslužeb, aby přímé požadavky HTTP na mikroslužeb, které potřebuje k dotazování, je znázorněno na obrázku 4-8.</span><span class="sxs-lookup"><span data-stu-id="75016-123">One option for implementing this scenario is for the calling back-end microservice to make direct HTTP requests to the microservices it needs to query, shown in Figure 4-8.</span></span>

![Přímá HTTP komunikace](./media/direct-http-communication.png)

<span data-ttu-id="75016-125">**Obrázek 4-8**.</span><span class="sxs-lookup"><span data-stu-id="75016-125">**Figure 4-8**.</span></span> <span data-ttu-id="75016-126">Přímá HTTP komunikace</span><span class="sxs-lookup"><span data-stu-id="75016-126">Direct HTTP communication</span></span>

<span data-ttu-id="75016-127">Zatímco přímé volání HTTP mezi mikroslužbami jsou relativně jednoduché implementovat, je třeba dbát na minimalizaci tohoto praxe.</span><span class="sxs-lookup"><span data-stu-id="75016-127">While direct HTTP calls between microservices are relatively simple to implement, care should be taken to minimize this practice.</span></span> <span data-ttu-id="75016-128">Chcete-li spustit, tato volání jsou vždy *synchronní* a bude blokovat operaci, dokud je vrácen výsledek nebo časový čas požadavku.</span><span class="sxs-lookup"><span data-stu-id="75016-128">To start, these calls are always *synchronous* and will block the operation until a result is returned or the request times outs.</span></span> <span data-ttu-id="75016-129">To, co bylo kdysi soběstačné, nezávislé služby, schopné se vyvíjet nezávisle a nasadit často, se nyní navzájem spojily.</span><span class="sxs-lookup"><span data-stu-id="75016-129">What were once self-contained, independent services, able to evolve independently and deploy frequently, now become coupled to each other.</span></span> <span data-ttu-id="75016-130">Jak se zvyšuje propojení mezi mikroslužbami, jejich architektonické výhody se zmenšují.</span><span class="sxs-lookup"><span data-stu-id="75016-130">As coupling among microservices increase, their architectural benefits diminish.</span></span>

<span data-ttu-id="75016-131">Provádění zřídka požadavku, který provede jedno přímé volání HTTP do jiné mikroslužby může být přijatelné pro některé systémy.</span><span class="sxs-lookup"><span data-stu-id="75016-131">Executing an infrequent request that makes a single direct HTTP call to another microservice might be acceptable for some systems.</span></span> <span data-ttu-id="75016-132">Volání na vysoké svazek, které vyvolávají přímé volání HTTP na více mikroslužeb však nejsou vhodné.</span><span class="sxs-lookup"><span data-stu-id="75016-132">However, high-volume calls that invoke direct HTTP calls to multiple microservices aren't advisable.</span></span> <span data-ttu-id="75016-133">Mohou zvýšit latenci a negativně ovlivnit výkon, škálovatelnost a dostupnost vašeho systému.</span><span class="sxs-lookup"><span data-stu-id="75016-133">They can increase latency and negatively impact the performance, scalability, and availability of your system.</span></span> <span data-ttu-id="75016-134">Ještě horší je, že dlouhá řada přímé http komunikace může vést k hluboké a složité řetězce synchronní volání mikroslužeb, znázorněno na obrázku 4-9:</span><span class="sxs-lookup"><span data-stu-id="75016-134">Even worse, a long series of direct HTTP communication can lead to deep and complex chains of synchronous microservices calls, shown in Figure 4-9:</span></span>

![Řetězení dotazů HTTP](./media/chaining-http-queries.png)

<span data-ttu-id="75016-136">**Obrázek 4-9**.</span><span class="sxs-lookup"><span data-stu-id="75016-136">**Figure 4-9**.</span></span> <span data-ttu-id="75016-137">Řetězení dotazů HTTP</span><span class="sxs-lookup"><span data-stu-id="75016-137">Chaining HTTP queries</span></span>

<span data-ttu-id="75016-138">Určitě si můžete představit riziko v designu zobrazeném na předchozím obrázku.</span><span class="sxs-lookup"><span data-stu-id="75016-138">You can certainly imagine the risk in the design shown in the previous image.</span></span> <span data-ttu-id="75016-139">Co se \#stane, pokud krok 3 selže?</span><span class="sxs-lookup"><span data-stu-id="75016-139">What happens if Step \#3 fails?</span></span> <span data-ttu-id="75016-140">Nebo \#krok 8 selže?</span><span class="sxs-lookup"><span data-stu-id="75016-140">Or Step \#8 fails?</span></span> <span data-ttu-id="75016-141">Jak se zotavíte?</span><span class="sxs-lookup"><span data-stu-id="75016-141">How do you recover?</span></span> <span data-ttu-id="75016-142">Co když \#je krok 6 pomalý, protože základní služba je zaneprázdněna?</span><span class="sxs-lookup"><span data-stu-id="75016-142">What if Step \#6 is slow because the underlying service is busy?</span></span> <span data-ttu-id="75016-143">Jak budete pokračovat?</span><span class="sxs-lookup"><span data-stu-id="75016-143">How do you continue?</span></span> <span data-ttu-id="75016-144">I v případě, že všechny funguje správně, představte si latence toto volání by vzniklo, což je součet latence každého kroku.</span><span class="sxs-lookup"><span data-stu-id="75016-144">Even if all works correctly, think of the latency this call would incur, which is the sum of the latency of each step.</span></span>

<span data-ttu-id="75016-145">Velký stupeň párování v předchozím obrázku naznačuje, že služby nebyly optimálně modelovány.</span><span class="sxs-lookup"><span data-stu-id="75016-145">The large degree of coupling in the previous image suggests the services weren't optimally modeled.</span></span> <span data-ttu-id="75016-146">Bylo by vhodné, aby tým přehodnotil jejich design.</span><span class="sxs-lookup"><span data-stu-id="75016-146">It would behoove the team to revisit their design.</span></span>

### <a name="materialized-view-pattern"></a><span data-ttu-id="75016-147">Model materializovaného zobrazení</span><span class="sxs-lookup"><span data-stu-id="75016-147">Materialized View pattern</span></span>

<span data-ttu-id="75016-148">Oblíbenou možností pro odebrání mikroservisu je [vzor Materialized View](https://docs.microsoft.com/azure/architecture/patterns/materialized-view).</span><span class="sxs-lookup"><span data-stu-id="75016-148">A popular option for removing microservice coupling is the [Materialized View pattern](https://docs.microsoft.com/azure/architecture/patterns/materialized-view).</span></span> <span data-ttu-id="75016-149">S tímto vzorem mikroslužby ukládá vlastní místní, nenormalizované kopie dat, která je vlastněna jinými službami.</span><span class="sxs-lookup"><span data-stu-id="75016-149">With this pattern, a microservice stores its own local, denormalized copy of data that's owned by other services.</span></span> <span data-ttu-id="75016-150">Místo toho, nákupní košík mikroslužeb dotazování katalogu produktů a ceny mikroslužeb, udržuje vlastní místní kopii těchto dat.</span><span class="sxs-lookup"><span data-stu-id="75016-150">Instead of the Shopping Basket microservice querying the Product Catalog and Pricing microservices, it maintains its own local copy of that data.</span></span> <span data-ttu-id="75016-151">Tento vzor eliminuje zbytečné párování a zlepšuje spolehlivost a dobu odezvy.</span><span class="sxs-lookup"><span data-stu-id="75016-151">This pattern eliminates unnecessary coupling and improves reliability and response time.</span></span> <span data-ttu-id="75016-152">Celá operace se provede uvnitř jednoho procesu.</span><span class="sxs-lookup"><span data-stu-id="75016-152">The entire operation executes inside a single process.</span></span> <span data-ttu-id="75016-153">Tento vzor a další obavy týkající se údajů zkoumáme v kapitole 5.</span><span class="sxs-lookup"><span data-stu-id="75016-153">We explore this pattern and other data concerns in Chapter 5.</span></span>

### <a name="service-aggregator-pattern"></a><span data-ttu-id="75016-154">Vzor agregátoru služeb</span><span class="sxs-lookup"><span data-stu-id="75016-154">Service Aggregator Pattern</span></span>

<span data-ttu-id="75016-155">Další možností pro odstranění mikroslužeb mikroslužeb připojení je [mikroslužba agregátor](https://devblogs.microsoft.com/cesardelatorre/designing-and-implementing-api-gateways-with-ocelot-in-a-microservices-and-container-based-architecture/), je znázorněno v fialové na obrázku 4-10.</span><span class="sxs-lookup"><span data-stu-id="75016-155">Another option for eliminating microservice-to-microservice coupling is an [Aggregator microservice](https://devblogs.microsoft.com/cesardelatorre/designing-and-implementing-api-gateways-with-ocelot-in-a-microservices-and-container-based-architecture/), shown in purple in Figure 4-10.</span></span>

![Agregátor služby](./media/aggregator-service.png)

<span data-ttu-id="75016-157">**Obrázek 4-10**.</span><span class="sxs-lookup"><span data-stu-id="75016-157">**Figure 4-10**.</span></span> <span data-ttu-id="75016-158">Mikroslužba agregátoru</span><span class="sxs-lookup"><span data-stu-id="75016-158">Aggregator microservice</span></span>

<span data-ttu-id="75016-159">Vzor izoluje operaci, která provádí volání více back-endových mikroslužeb, centralizace jeho logiku do specializované mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="75016-159">The pattern isolates an operation that makes calls to multiple back-end microservices, centralizing its logic into a specialized microservice.</span></span>  <span data-ttu-id="75016-160">Fialová agregátor pokladny mikroslužby na předchozí obrázku orchestruje pracovní postup pro operaci pokladny.</span><span class="sxs-lookup"><span data-stu-id="75016-160">The purple checkout aggregator microservice in the previous figure orchestrates the workflow for the Checkout operation.</span></span> <span data-ttu-id="75016-161">Zahrnuje volání několika back-endových mikroslužeb v sekvenčním pořadí.</span><span class="sxs-lookup"><span data-stu-id="75016-161">It includes calls to several back-end microservices in a sequenced order.</span></span> <span data-ttu-id="75016-162">Data z pracovního postupu jsou agregována a vrácena volajícímu.</span><span class="sxs-lookup"><span data-stu-id="75016-162">Data from the workflow is aggregated and returned to the caller.</span></span> <span data-ttu-id="75016-163">Zatímco stále implementuje přímé volání HTTP, agregátor mikroslužby snižuje přímé závislosti mezi back-endmikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="75016-163">While it still implements direct HTTP calls, the aggregator microservice reduces direct dependencies among back-end microservices.</span></span>

### <a name="requestreply-pattern"></a><span data-ttu-id="75016-164">Vzor požadavku/odpovědi</span><span class="sxs-lookup"><span data-stu-id="75016-164">Request/Reply Pattern</span></span>

<span data-ttu-id="75016-165">Dalším přístupem pro oddělení synchronních zpráv HTTP je [vzor požadavku a odpovědi](https://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html), který používá komunikaci ve frontě.</span><span class="sxs-lookup"><span data-stu-id="75016-165">Another approach for decoupling synchronous HTTP messages is a [Request-Reply Pattern](https://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html), which uses queuing communication.</span></span> <span data-ttu-id="75016-166">Komunikace pomocí fronty je vždy jednosměrný kanál, přičemž výrobce zprávu odesílá a příjemce ji přijímá.</span><span class="sxs-lookup"><span data-stu-id="75016-166">Communication using a queue is always a one-way channel, with a producer sending the message and consumer receiving it.</span></span> <span data-ttu-id="75016-167">Pomocí tohoto vzoru jsou implementovány fronty požadavků a fronty odpovědí, je znázorněno na obrázku 4-11.</span><span class="sxs-lookup"><span data-stu-id="75016-167">With this pattern, both a request queue and response queue are implemented, shown in Figure 4-11.</span></span>

![Vzor požadavku a odpovědi](./media/request-reply-pattern.png)

<span data-ttu-id="75016-169">**Obrázek 4-11**.</span><span class="sxs-lookup"><span data-stu-id="75016-169">**Figure 4-11**.</span></span> <span data-ttu-id="75016-170">Vzor požadavku a odpovědi</span><span class="sxs-lookup"><span data-stu-id="75016-170">Request-reply pattern</span></span>

<span data-ttu-id="75016-171">Zde výrobce zpráv vytvoří zprávu založenou na dotazu, která obsahuje jedinečné ID korelace a umístí ji do fronty požadavků.</span><span class="sxs-lookup"><span data-stu-id="75016-171">Here, the message producer creates a query-based message that contains a unique correlation ID and places it into a request queue.</span></span> <span data-ttu-id="75016-172">Náročná služba dequeues zprávy, zpracovává a umístí odpověď do fronty odpovědí se stejným ID korelace.</span><span class="sxs-lookup"><span data-stu-id="75016-172">The consuming service dequeues the messages, processes it and places the response into the response queue with the same correlation ID.</span></span> <span data-ttu-id="75016-173">Služba producer dequeues the message, matches it with the correlation ID and continues processing.</span><span class="sxs-lookup"><span data-stu-id="75016-173">The producer service dequeues the message, matches it with the correlation ID and continues processing.</span></span> <span data-ttu-id="75016-174">Fronty podrobně pokrýváme v další části.</span><span class="sxs-lookup"><span data-stu-id="75016-174">We cover queues in detail in the next section.</span></span>

## <a name="commands"></a><span data-ttu-id="75016-175">Příkazy</span><span class="sxs-lookup"><span data-stu-id="75016-175">Commands</span></span>

<span data-ttu-id="75016-176">Dalším typem komunikační interakce je *příkaz*.</span><span class="sxs-lookup"><span data-stu-id="75016-176">Another type of communication interaction is a *command*.</span></span> <span data-ttu-id="75016-177">Mikroslužbu může potřebovat jinou mikroslužbu k provedení akce.</span><span class="sxs-lookup"><span data-stu-id="75016-177">A microservice may need another microservice to perform an action.</span></span> <span data-ttu-id="75016-178">Objednávání mikroslužby může potřebovat doprava mikroslužby k vytvoření dodávky pro schválené objednávky.</span><span class="sxs-lookup"><span data-stu-id="75016-178">The Ordering microservice may need the Shipping microservice to create a shipment for an approved order.</span></span> <span data-ttu-id="75016-179">Na obrázku 4-12 jedna mikroslužba, nazývaná Výrobce, odešle zprávu jiné mikroslužbě, spotřebiteli, přikazující mu něco udělat.</span><span class="sxs-lookup"><span data-stu-id="75016-179">In Figure 4-12, one microservice, called a Producer, sends a message to another microservice, the Consumer, commanding it to do something.</span></span>

![Interakce příkazů s frontou](./media/command-interaction-with-queue.png)

<span data-ttu-id="75016-181">**Obrázek 4-12**.</span><span class="sxs-lookup"><span data-stu-id="75016-181">**Figure 4-12**.</span></span> <span data-ttu-id="75016-182">Interakce příkazů s frontou</span><span class="sxs-lookup"><span data-stu-id="75016-182">Command interaction with a queue</span></span>

<span data-ttu-id="75016-183">Nejčastěji producent nevyžaduje odpověď a může *oheň-a-zapomenout* na zprávu.</span><span class="sxs-lookup"><span data-stu-id="75016-183">Most often, the Producer doesn't require a response and can *fire-and-forget* the message.</span></span> <span data-ttu-id="75016-184">Pokud je potřeba odpověď, příjemce odešle samostatnou zprávu zpět producent na jiném kanálu.</span><span class="sxs-lookup"><span data-stu-id="75016-184">If a reply is needed, the Consumer sends a separate message back to Producer on another channel.</span></span> <span data-ttu-id="75016-185">Zpráva příkazu je nejlépe odeslána asynchronně s frontou zpráv.</span><span class="sxs-lookup"><span data-stu-id="75016-185">A command message is best sent asynchronously with a message queue.</span></span> <span data-ttu-id="75016-186">podporovány zjednodušené zprávy zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="75016-186">supported by a lightweight message broker.</span></span> <span data-ttu-id="75016-187">V předchozím diagramu si všimněte, jak fronta odděluje a odděluje obě služby.</span><span class="sxs-lookup"><span data-stu-id="75016-187">In the previous diagram, note how a queue separates and decouples both services.</span></span>

<span data-ttu-id="75016-188">Fronta zpráv je zprostředkující konstrukce, jehož prostřednictvím výrobce a příjemce předat zprávu.</span><span class="sxs-lookup"><span data-stu-id="75016-188">A message queue is an intermediary construct through which a producer and consumer pass a message.</span></span> <span data-ttu-id="75016-189">Fronty implementují asynchronní vzor zasílání zpráv typu point-to-point.</span><span class="sxs-lookup"><span data-stu-id="75016-189">Queues implement an asynchronous, point-to-point messaging pattern.</span></span> <span data-ttu-id="75016-190">Výrobce ví, kam musí být příkaz odeslán a trasy vhodně.</span><span class="sxs-lookup"><span data-stu-id="75016-190">The Producer knows where a command needs to be sent and routes appropriately.</span></span> <span data-ttu-id="75016-191">Fronta zaručuje, že zpráva je zpracována přesně jedním z instancí příjemce, které jsou čtení z kanálu.</span><span class="sxs-lookup"><span data-stu-id="75016-191">The queue guarantees that a message is processed by exactly one of the consumer instances that are reading from the channel.</span></span> <span data-ttu-id="75016-192">V tomto scénáři může výrobce nebo spotřebitelská služba horizontální navýšení kapacity bez ovlivnění druhého.</span><span class="sxs-lookup"><span data-stu-id="75016-192">In this scenario, either the producer or consumer service can scale out without affecting the other.</span></span> <span data-ttu-id="75016-193">Také technologie mohou být různorodé na každé straně, což znamená, že můžeme mít mikroslužbu Java volání [mikroslužby Golang.](https://golang.org)</span><span class="sxs-lookup"><span data-stu-id="75016-193">As well, technologies can be disparate on each side, meaning that we might have a Java microservice calling a [Golang](https://golang.org) microservice.</span></span>

<span data-ttu-id="75016-194">V kapitole 1 jsme hovořili o *podpůrné služby*.</span><span class="sxs-lookup"><span data-stu-id="75016-194">In chapter 1, we talked about *backing services*.</span></span> <span data-ttu-id="75016-195">Podpůrné služby jsou pomocné prostředky, na kterých závisí cloudové nativní systémy.</span><span class="sxs-lookup"><span data-stu-id="75016-195">Backing services are ancillary resources upon which cloud-native systems depend.</span></span> <span data-ttu-id="75016-196">Fronty zpráv jsou podpůrné služby.</span><span class="sxs-lookup"><span data-stu-id="75016-196">Message queues are backing services.</span></span> <span data-ttu-id="75016-197">Cloud Azure podporuje dva typy front zpráv, které můžou vaše cloudové nativní systémy využívat k implementaci zasílání příkazů: Fronty úložiště Azure a Fronty služby Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="75016-197">The Azure cloud supports two types of message queues that your cloud-native systems can consume to implement command messaging: Azure Storage Queues and Azure Service Bus Queues.</span></span>

### <a name="azure-storage-queues"></a><span data-ttu-id="75016-198">Fronty Azure Storage</span><span class="sxs-lookup"><span data-stu-id="75016-198">Azure Storage Queues</span></span>

<span data-ttu-id="75016-199">Fronty úložišť Azure nabízejí jednoduchou infrastrukturu front, která je rychlá, cenově dostupná a podporovaná účty úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="75016-199">Azure storage queues offer a simple queueing infrastructure that is fast, affordable, and backed by Azure storage accounts.</span></span>

<span data-ttu-id="75016-200">[Fronty úložiště Azure](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction) jsou vybaveny mechanismem frontzaložené na rest se spolehlivým a trvalým zasíláním zpráv.</span><span class="sxs-lookup"><span data-stu-id="75016-200">[Azure Storage Queues](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction) feature a REST-based queuing mechanism with reliable and persistent messaging.</span></span> <span data-ttu-id="75016-201">Poskytují minimální sadu funkcí, ale jsou levné a ukládají miliony zpráv.</span><span class="sxs-lookup"><span data-stu-id="75016-201">They provide a minimal feature set, but are inexpensive and store millions of messages.</span></span> <span data-ttu-id="75016-202">Jejich kapacita se pohybuje až 500 TB.</span><span class="sxs-lookup"><span data-stu-id="75016-202">Their capacity ranges up to 500 TB.</span></span> <span data-ttu-id="75016-203">Jedna zpráva může mít velikost až 64 kB.</span><span class="sxs-lookup"><span data-stu-id="75016-203">A single message can be up to 64 KB in size.</span></span>

<span data-ttu-id="75016-204">Ke zprávám můžete přistupovat odkudkoli na světě prostřednictvím ověřených volání pomocí protokolu HTTP nebo HTTPS.</span><span class="sxs-lookup"><span data-stu-id="75016-204">You can access messages from anywhere in the world via authenticated calls using HTTP or HTTPS.</span></span> <span data-ttu-id="75016-205">Fronty úložiště můžete škálovat na velký počet souběžných klientů pro zpracování špičky provozu.</span><span class="sxs-lookup"><span data-stu-id="75016-205">Storage queues can scale out to large numbers of concurrent clients to handle traffic spikes.</span></span>

<span data-ttu-id="75016-206">To znamená, že existují omezení se službou:</span><span class="sxs-lookup"><span data-stu-id="75016-206">That said, there are limitations with the service:</span></span>

- <span data-ttu-id="75016-207">Objednávka zpráv není zaručena.</span><span class="sxs-lookup"><span data-stu-id="75016-207">Message order isn't guaranteed.</span></span>

- <span data-ttu-id="75016-208">Zpráva může přetrvávat pouze sedm dní, než bude automaticky odebrána.</span><span class="sxs-lookup"><span data-stu-id="75016-208">A message can only persist for seven days before it's automatically removed.</span></span>

- <span data-ttu-id="75016-209">Podpora správy stavu, vyhledávání duplicit nebo transakcí není k dispozici.</span><span class="sxs-lookup"><span data-stu-id="75016-209">Support for state management, duplicate detection, or transactions isn't available.</span></span>

<span data-ttu-id="75016-210">Obrázek 4-13 znázorňuje hierarchii fronty úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="75016-210">Figure 4-13 shows the hierarchy of an Azure Storage Queue.</span></span>

![Hierarchie fronty úložiště](./media/storage-queue-hierarchy.png)

<span data-ttu-id="75016-212">**Obrázek 4-13**.</span><span class="sxs-lookup"><span data-stu-id="75016-212">**Figure 4-13**.</span></span> <span data-ttu-id="75016-213">Hierarchie fronty úložiště</span><span class="sxs-lookup"><span data-stu-id="75016-213">Storage queue hierarchy</span></span>

<span data-ttu-id="75016-214">Na předchozím obrázku si všimněte, jak fronty úložiště ukládají své zprávy ve podkladovém účtu úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="75016-214">In the previous figure, note how storage queues store their messages in the underlying Azure Storage account.</span></span>

<span data-ttu-id="75016-215">Pro vývojáře poskytuje společnost Microsoft několik knihoven na straně klienta a serveru pro zpracování fronty úložiště.</span><span class="sxs-lookup"><span data-stu-id="75016-215">For developers, Microsoft provides several client and server-side libraries for Storage queue processing.</span></span> <span data-ttu-id="75016-216">Většina hlavních platforem je podporována, včetně .NET, Java, JavaScript, Ruby, Python a Go.</span><span class="sxs-lookup"><span data-stu-id="75016-216">Most major platforms are supported including .NET, Java, JavaScript, Ruby, Python, and Go.</span></span> <span data-ttu-id="75016-217">Vývojáři by nikdy komunikovat přímo s těmito knihovnami.</span><span class="sxs-lookup"><span data-stu-id="75016-217">Developers should never communicate directly with these libraries.</span></span> <span data-ttu-id="75016-218">Pokud tak učiníte, bude úzce spárovat kód mikroslužeb na službu Azure Storage Queue.</span><span class="sxs-lookup"><span data-stu-id="75016-218">Doing so will tightly couple your microservice code to the Azure Storage Queue service.</span></span> <span data-ttu-id="75016-219">Je lepší praxe izolovat podrobnosti implementace rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="75016-219">It's a better practice to insulate the implementation details of the API.</span></span> <span data-ttu-id="75016-220">Zavést zprostředkovatelskou vrstvu nebo zprostředkující rozhraní API, které zveřejňuje obecné operace a zapouzdřuje konkrétní knihovnu.</span><span class="sxs-lookup"><span data-stu-id="75016-220">Introduce an intermediation layer, or intermediate API, that exposes generic operations and encapsulates the concrete library.</span></span> <span data-ttu-id="75016-221">Tato volná spojka umožňuje vyměnit jednu službu řazení do fronty za jinou, aniž byste museli provádět změny v kódu hlavní linky.</span><span class="sxs-lookup"><span data-stu-id="75016-221">This loose coupling enables you to swap out one queuing service for another without having to make changes to the mainline service code.</span></span>

<span data-ttu-id="75016-222">Fronty azure storage jsou ekonomickou možností implementace zasílání zpráv příkazů ve vašich aplikacích nativních pro cloud.</span><span class="sxs-lookup"><span data-stu-id="75016-222">Azure Storage queues are an economical option to implement command messaging in your cloud-native applications.</span></span> <span data-ttu-id="75016-223">Zvláště když velikost fronty překročí 80 GB nebo je přijatelná jednoduchá sada funkcí.</span><span class="sxs-lookup"><span data-stu-id="75016-223">Especially when a queue size will exceed 80 GB, or a simple feature set is acceptable.</span></span> <span data-ttu-id="75016-224">Platíte pouze za ukládání zpráv; neexistují žádné pevné hodinové poplatky.</span><span class="sxs-lookup"><span data-stu-id="75016-224">You only pay for the storage of the messages; there are no fixed hourly charges.</span></span>

### <a name="azure-service-bus-queues"></a><span data-ttu-id="75016-225">Fronty služby Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="75016-225">Azure Service Bus Queues</span></span>

<span data-ttu-id="75016-226">Pro složitější požadavky na zasílání zpráv, zvažte fronty Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="75016-226">For more complex messaging requirements, consider Azure Service Bus queues.</span></span>

<span data-ttu-id="75016-227">Azure [Service Bus,](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview) která se nachází na robustní infrastruktuře zpráv, podporuje *zprostředkovaný model zasílání zpráv*.</span><span class="sxs-lookup"><span data-stu-id="75016-227">Sitting atop a robust message infrastructure, [Azure Service Bus](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview) supports a *brokered messaging model*.</span></span> <span data-ttu-id="75016-228">Zprávy jsou spolehlivě uloženy v zprostředkovateli (fronty), dokud přijaté spotřebitelem.</span><span class="sxs-lookup"><span data-stu-id="75016-228">Messages are reliably stored in a broker (the queue) until received by the consumer.</span></span> <span data-ttu-id="75016-229">Fronta zaručuje doručení zpráv FIFO první dovnitř/první ven (, respektování pořadí, ve kterém byly zprávy přidány do fronty.</span><span class="sxs-lookup"><span data-stu-id="75016-229">The queue guarantees First-In/First-Out (FIFO) message delivery, respecting the order in which messages were added to the queue.</span></span>

<span data-ttu-id="75016-230">Velikost zprávy může být mnohem větší, až 256 KB.</span><span class="sxs-lookup"><span data-stu-id="75016-230">The size of a message can be much larger, up to 256 KB.</span></span> <span data-ttu-id="75016-231">Zprávy jsou trvalé ve frontě po neomezenou dobu.</span><span class="sxs-lookup"><span data-stu-id="75016-231">Messages are persisted in the queue for an unlimited period of time.</span></span> <span data-ttu-id="75016-232">Service Bus podporuje nejen volání založená na protokolu HTTP, ale také poskytuje plnou podporu pro [protokol AMPQ](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-amqp-overview).</span><span class="sxs-lookup"><span data-stu-id="75016-232">Service Bus supports not only HTTP-based calls, but also provides full support for the [AMPQ protocol](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-amqp-overview).</span></span> <span data-ttu-id="75016-233">AMPQ je otevřený standard napříč dodavateli, který podporuje binární protokol a vyšší stupeň spolehlivosti.</span><span class="sxs-lookup"><span data-stu-id="75016-233">AMPQ is an open-standard across vendors that supports a binary protocol and higher degrees of reliability.</span></span>

<span data-ttu-id="75016-234">Service Bus poskytuje bohatou sadu funkcí, včetně [podpory transakcí](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions) a funkce [vyhledávání duplicit](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection).</span><span class="sxs-lookup"><span data-stu-id="75016-234">Service Bus provides a rich set of features, including [transaction support](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions) and a [duplicate detection feature](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection).</span></span> <span data-ttu-id="75016-235">Fronta zaručuje "maximálně jednou doručení" na zprávu.</span><span class="sxs-lookup"><span data-stu-id="75016-235">The queue guarantees "at most once delivery" per message.</span></span> <span data-ttu-id="75016-236">Automaticky zahodí zprávu, která již byla odeslána.</span><span class="sxs-lookup"><span data-stu-id="75016-236">It automatically discards a message that has already been sent.</span></span> <span data-ttu-id="75016-237">Pokud výrobce je na pochybách, může znovu odeslat stejnou zprávu a Service Bus zaručuje, že budou zpracovány pouze jednu kopii.</span><span class="sxs-lookup"><span data-stu-id="75016-237">If a producer is in doubt, it can resend the same message, and Service Bus guarantees that only one copy will be processed.</span></span> <span data-ttu-id="75016-238">Vyhledávání duplicit vás osvobozuje od nutnosti vytvářet další infrastrukturu.</span><span class="sxs-lookup"><span data-stu-id="75016-238">Duplicate detection frees you from  having to build additional infrastructure plumbing.</span></span>

<span data-ttu-id="75016-239">Další dvě podnikové funkce jsou dělení a relace.</span><span class="sxs-lookup"><span data-stu-id="75016-239">Two more enterprise features are partitioning and sessions.</span></span> <span data-ttu-id="75016-240">Konvenční fronta service bus je zpracována jedním zprostředkovatelem zpráv a uložena v jednom úložišti zpráv.</span><span class="sxs-lookup"><span data-stu-id="75016-240">A conventional Service Bus queue is handled by a single message broker and stored in a single message store.</span></span> <span data-ttu-id="75016-241">Ale [dělení service bus](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) šíří fronty přes více zprostředkovatelů zpráv a úložiště zpráv.</span><span class="sxs-lookup"><span data-stu-id="75016-241">But, [Service Bus Partitioning](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) spreads the queue across multiple message brokers and message stores.</span></span> <span data-ttu-id="75016-242">Celková propustnost již není omezena výkonem jednoho zprostředkovatele zpráv nebo úložiště zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="75016-242">The overall throughput is no longer limited by the performance of a single message broker or messaging store.</span></span> <span data-ttu-id="75016-243">Dočasný výpadek úložiště zpráv nevykresluje rozdělenou frontu nek dispozici.</span><span class="sxs-lookup"><span data-stu-id="75016-243">A temporary outage of a messaging store doesn't render a partitioned queue unavailable.</span></span>

<span data-ttu-id="75016-244">[Relace služby Service Bus](https://codingcanvas.com/azure-service-bus-sessions/) poskytují způsob, jak zprávy související se skupinou.</span><span class="sxs-lookup"><span data-stu-id="75016-244">[Service Bus Sessions](https://codingcanvas.com/azure-service-bus-sessions/) provide a way to group-related messages.</span></span> <span data-ttu-id="75016-245">Představte si scénář pracovního postupu, kde zprávy musí být zpracovány společně a operace dokončena na konci.</span><span class="sxs-lookup"><span data-stu-id="75016-245">Imagine a workflow scenario where messages must be processed together and the operation completed at the end.</span></span> <span data-ttu-id="75016-246">Chcete-li využít výhod, musí být relace explicitně povoleny pro frontu a každá související zpráva musí obsahovat stejné ID relace.</span><span class="sxs-lookup"><span data-stu-id="75016-246">To take advantage, sessions must be explicitly enabled for the queue and each related messaged must contain the same session ID.</span></span>

<span data-ttu-id="75016-247">Existují však některé důležité upozornění: Velikost front service bus je omezena na 80 GB, což je mnohem menší než to, co je k dispozici z front úložiště.</span><span class="sxs-lookup"><span data-stu-id="75016-247">However, there are some important caveats: Service Bus queues size is limited to 80 GB, which is much smaller than what's available from store queues.</span></span> <span data-ttu-id="75016-248">Kromě toho service bus fronty za následek základní náklady a poplatek za operaci.</span><span class="sxs-lookup"><span data-stu-id="75016-248">Additionally, Service Bus queues incur a base cost and charge per operation.</span></span>

<span data-ttu-id="75016-249">Obrázek 4-14 popisuje architekturu fronty service bus na vysoké úrovni.</span><span class="sxs-lookup"><span data-stu-id="75016-249">Figure 4-14 outlines the high-level architecture of a Service Bus queue.</span></span>

![Fronta služby Service Bus](./media/service-bus-queue.png)

<span data-ttu-id="75016-251">**Obrázek 4-14**.</span><span class="sxs-lookup"><span data-stu-id="75016-251">**Figure 4-14**.</span></span> <span data-ttu-id="75016-252">Fronta služby Service Bus</span><span class="sxs-lookup"><span data-stu-id="75016-252">Service Bus queue</span></span>

<span data-ttu-id="75016-253">Na předchozím obrázku si poznamenejte vztah mezi bodem a bodem.</span><span class="sxs-lookup"><span data-stu-id="75016-253">In the previous figure, note the point-to-point relationship.</span></span> <span data-ttu-id="75016-254">Dvě instance stejného zprostředkovatele zařazují zprávy do jedné fronty služby Service Bus.</span><span class="sxs-lookup"><span data-stu-id="75016-254">Two instances of the same provider are enqueuing messages into a single Service Bus queue.</span></span> <span data-ttu-id="75016-255">Každá zpráva je spotřebována pouze jednou ze tří instancí příjemce na pravé straně.</span><span class="sxs-lookup"><span data-stu-id="75016-255">Each message is consumed by only one of three consumer instances on the right.</span></span> <span data-ttu-id="75016-256">Dále diskutujeme o tom, jak implementovat zasílání zpráv, kde mohou mít všichni různí spotřebitelé zájem o stejnou zprávu.</span><span class="sxs-lookup"><span data-stu-id="75016-256">Next, we discuss how to implement messaging where different consumers may all be interested the same message.</span></span>

## <a name="events"></a><span data-ttu-id="75016-257">Události</span><span class="sxs-lookup"><span data-stu-id="75016-257">Events</span></span>

<span data-ttu-id="75016-258">Řízení front zpráv je efektivní způsob implementace komunikace, kde může výrobce asynchronně odeslat spotřebiteli zprávu.</span><span class="sxs-lookup"><span data-stu-id="75016-258">Message queuing is an effective way to implement communication where a producer can asynchronously send a consumer a message.</span></span> <span data-ttu-id="75016-259">Co se však stane, když *mnoho různých spotřebitelů* má zájem o stejnou zprávu?</span><span class="sxs-lookup"><span data-stu-id="75016-259">However, what happens when *many different consumers* are interested in the same message?</span></span> <span data-ttu-id="75016-260">Vyhrazená fronta zpráv pro každého spotřebitele by se dobře neškálovat a bylo by obtížné je spravovat.</span><span class="sxs-lookup"><span data-stu-id="75016-260">A dedicated message queue for each consumer wouldn't scale well and would become difficult to manage.</span></span>

<span data-ttu-id="75016-261">Chcete-li tento scénář vyřešit, přesuneme se na třetí typ interakce se zprávou, *událost*.</span><span class="sxs-lookup"><span data-stu-id="75016-261">To address this scenario, we move to the third type of message interaction, the *event*.</span></span> <span data-ttu-id="75016-262">Jedna mikroslužba oznamuje, že došlo k akci.</span><span class="sxs-lookup"><span data-stu-id="75016-262">One microservice announces that an action had occurred.</span></span> <span data-ttu-id="75016-263">Ostatní mikroslužby, pokud máte zájem, reagovat na akci nebo událost.</span><span class="sxs-lookup"><span data-stu-id="75016-263">Other microservices, if interested, react to the action, or event.</span></span>

<span data-ttu-id="75016-264">Eventing je dvoustupňový proces.</span><span class="sxs-lookup"><span data-stu-id="75016-264">Eventing is a two-step process.</span></span> <span data-ttu-id="75016-265">Pro danou změnu stavu mikroslužby publikuje událost zprostředkovatele zpráv, zpřístupní ji jakékoli jiné zainteresované mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="75016-265">For a given state change, a microservice publishes an event to a message broker, making it available to any other interested microservice.</span></span> <span data-ttu-id="75016-266">Zainteresovaná mikroslužba je upozorněna přihlášením k odběru události v zprostředkovateli zpráv.</span><span class="sxs-lookup"><span data-stu-id="75016-266">The interested microservice is notified by subscribing to the event in the message broker.</span></span> <span data-ttu-id="75016-267">Vzor [Publikování/přihlášení k odběru](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) slouží k implementaci [komunikace založené na událostech](https://docs.microsoft.com/dotnet/standard/microservices-architecture/multi-container-microservice-net-applications/integration-event-based-microservice-communications).</span><span class="sxs-lookup"><span data-stu-id="75016-267">You use the [Publish/Subscribe](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) pattern to implement [event-based communication](https://docs.microsoft.com/dotnet/standard/microservices-architecture/multi-container-microservice-net-applications/integration-event-based-microservice-communications).</span></span>

<span data-ttu-id="75016-268">Obrázek 4-15 ukazuje nákupní košík mikroslužeb publikování události s dvěma dalšími mikroslužeb k odběru.</span><span class="sxs-lookup"><span data-stu-id="75016-268">Figure 4-15 shows a shopping basket microservice publishing an event with two other microservices subscribing to it.</span></span>

![Zasílání zpráv řízených událostmi](./media/event-driven-messaging.png)

<span data-ttu-id="75016-270">**Obrázek 4-15**.</span><span class="sxs-lookup"><span data-stu-id="75016-270">**Figure 4-15**.</span></span> <span data-ttu-id="75016-271">Zasílání zpráv řízených událostmi</span><span class="sxs-lookup"><span data-stu-id="75016-271">Event-Driven messaging</span></span>

<span data-ttu-id="75016-272">Všimněte si součásti *sběrnice událostí,* která je uprostřed komunikačního kanálu.</span><span class="sxs-lookup"><span data-stu-id="75016-272">Note the *event bus* component that sits in the middle of the communication channel.</span></span> <span data-ttu-id="75016-273">Je to vlastní třída, která zapouzdřuje zprostředkovatele zpráv a odděluje ji od podkladové aplikace.</span><span class="sxs-lookup"><span data-stu-id="75016-273">It's a custom class that encapsulates the message broker and decouples it from the underlying application.</span></span> <span data-ttu-id="75016-274">Objednávání a inventář mikroslužeb nezávisle provozovat událost bez znalosti o sobě navzájem, ani nákupní košík mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="75016-274">The ordering and inventory microservices independently operate the event with no knowledge of each other, nor the shopping basket microservice.</span></span> <span data-ttu-id="75016-275">Když je registrovaná událost zveřejněna na sběrnici události, jednají podle ní.</span><span class="sxs-lookup"><span data-stu-id="75016-275">When the registered event is published to the event bus, they act upon it.</span></span>

<span data-ttu-id="75016-276">S eventing, jsme se přesunout z fronty technologie na *témata*.</span><span class="sxs-lookup"><span data-stu-id="75016-276">With eventing, we move from queuing technology to *topics*.</span></span> <span data-ttu-id="75016-277">[Téma](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions) je podobné fronty, ale podporuje jeden-k-n zasílání zpráv vzor.</span><span class="sxs-lookup"><span data-stu-id="75016-277">A [topic](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions) is similar to a queue, but supports a one-to-many messaging pattern.</span></span> <span data-ttu-id="75016-278">Jedna mikroslužba publikuje zprávu.</span><span class="sxs-lookup"><span data-stu-id="75016-278">One microservice publishes a message.</span></span> <span data-ttu-id="75016-279">Více přihlášení k odběru mikroslužeb můžete zvolit přijímat a jednat na tuto zprávu.</span><span class="sxs-lookup"><span data-stu-id="75016-279">Multiple subscribing microservices can choose to receive and act upon that message.</span></span> <span data-ttu-id="75016-280">Obrázek 4-16 ukazuje architekturu tématu.</span><span class="sxs-lookup"><span data-stu-id="75016-280">Figure 4-16 shows a topic architecture.</span></span>

![Architektura tématu](./media/topic-architecture.png)

<span data-ttu-id="75016-282">**Obrázek 4-16**.</span><span class="sxs-lookup"><span data-stu-id="75016-282">**Figure 4-16**.</span></span> <span data-ttu-id="75016-283">Architektura tématu</span><span class="sxs-lookup"><span data-stu-id="75016-283">Topic architecture</span></span>

<span data-ttu-id="75016-284">Na předchozím obrázku vydavatelé posílají zprávy k tématu.</span><span class="sxs-lookup"><span data-stu-id="75016-284">In the previous figure, publishers send messages to the topic.</span></span> <span data-ttu-id="75016-285">Na konci odběratelé přijímat zprávy z odběrů.</span><span class="sxs-lookup"><span data-stu-id="75016-285">At the end, subscribers receive messages from subscriptions.</span></span> <span data-ttu-id="75016-286">Ve středu téma předává zprávy odběrům na základě sady *pravidel*zobrazených v tmavě modrých polích.</span><span class="sxs-lookup"><span data-stu-id="75016-286">In the middle, the topic forwards messages to subscriptions based on a set of *rules*, shown in dark blue boxes.</span></span> <span data-ttu-id="75016-287">Pravidla fungují jako filtr, který předává konkrétní zprávy předplatnému.</span><span class="sxs-lookup"><span data-stu-id="75016-287">Rules act as a filter that forward specific messages to a subscription.</span></span> <span data-ttu-id="75016-288">Zde "CreateOrder" událost by být \#odeslány \#předplatné 1 a \#předplatné 3, ale ne předplatné 2.</span><span class="sxs-lookup"><span data-stu-id="75016-288">Here, a "CreateOrder" event would be sent to Subscription \#1 and Subscription \#3, but not to Subscription \#2.</span></span> <span data-ttu-id="75016-289">Událost "OrderCompleted" by byla \#odeslána \#na předplatné 2 a předplatné 3.</span><span class="sxs-lookup"><span data-stu-id="75016-289">An "OrderCompleted" event would be sent to Subscription \#2 and Subscription \#3.</span></span>

<span data-ttu-id="75016-290">Cloud Azure podporuje dvě různé tematické služby: Témata azure service busu a Azure EventGrid.</span><span class="sxs-lookup"><span data-stu-id="75016-290">The Azure cloud supports two different topic services: Azure Service Bus Topics and Azure EventGrid.</span></span>

### <a name="azure-service-bus-topics"></a><span data-ttu-id="75016-291">Téma služby Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="75016-291">Azure Service Bus Topics</span></span>

<span data-ttu-id="75016-292">Nad stejným robustním modelem zprostředkovaných zpráv front Azure Service Bus jsou [témata Azure Service Bus](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions).</span><span class="sxs-lookup"><span data-stu-id="75016-292">Sitting on top of the same robust brokered message model of Azure Service Bus queues are [Azure Service Bus Topics](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions).</span></span> <span data-ttu-id="75016-293">Téma může přijímat zprávy od více nezávislých vydavatelů a odesílat zprávy až 2 000 odběratelům.</span><span class="sxs-lookup"><span data-stu-id="75016-293">A topic can receive messages from multiple independent publishers and send messages to up to 2,000 subscribers.</span></span> <span data-ttu-id="75016-294">Odběry lze dynamicky přidávat nebo odebírat za běhu bez zastavení systému nebo opětovné vytvoření tématu.</span><span class="sxs-lookup"><span data-stu-id="75016-294">Subscriptions can be dynamically added or removed at runtime without stopping the system or recreating the topic.</span></span>

<span data-ttu-id="75016-295">Mnoho pokročilých funkcí z front Azure Service Bus jsou k dispozici také pro témata, včetně [vyhledávání duplicit](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection) a [podporu transakcí](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions).</span><span class="sxs-lookup"><span data-stu-id="75016-295">Many advanced features from Azure Service Bus queues are also available for topics, including [Duplicate Detection](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection) and [Transaction support](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions).</span></span> <span data-ttu-id="75016-296">Ve výchozím nastavení service bus témata jsou zpracovány zprostředkovatele jedné zprávy a uloženy v jednom úložišti zpráv.</span><span class="sxs-lookup"><span data-stu-id="75016-296">By default, Service Bus topics are handled by a single message broker and stored in a single message store.</span></span> <span data-ttu-id="75016-297">Ale [dělení service bus](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) škáluje téma tím, že šíří mezi mnoho zprostředkovatelů zpráv a úložiště zpráv.</span><span class="sxs-lookup"><span data-stu-id="75016-297">But, [Service Bus Partitioning](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) scales a topic by spreading it across many message brokers and message stores.</span></span>

<span data-ttu-id="75016-298">[Plánované doručení zprávy](https://docs.microsoft.com/azure/service-bus-messaging/message-sequencing) označí zprávu s určitým časem zpracování.</span><span class="sxs-lookup"><span data-stu-id="75016-298">[Scheduled Message Delivery](https://docs.microsoft.com/azure/service-bus-messaging/message-sequencing) tags a message with a specific time for processing.</span></span> <span data-ttu-id="75016-299">Zpráva se v tématu do té doby nezobrazí.</span><span class="sxs-lookup"><span data-stu-id="75016-299">The message won't appear in the topic before that time.</span></span> <span data-ttu-id="75016-300">[Odložení zprávy](https://docs.microsoft.com/azure/service-bus-messaging/message-deferral) umožňuje odložit načtení zprávy na pozdější dobu.</span><span class="sxs-lookup"><span data-stu-id="75016-300">[Message Deferral](https://docs.microsoft.com/azure/service-bus-messaging/message-deferral) enables you to defer a retrieval of a message to a later time.</span></span> <span data-ttu-id="75016-301">Obě se běžně používají ve scénářích zpracování pracovního postupu, kde jsou operace zpracovány v určitém pořadí.</span><span class="sxs-lookup"><span data-stu-id="75016-301">Both are commonly used in workflow processing scenarios where operations are processed in a particular order.</span></span> <span data-ttu-id="75016-302">Zpracování přijatých zpráv můžete odložit, dokud nebude dokončena předchozí práce.</span><span class="sxs-lookup"><span data-stu-id="75016-302">You can postpone processing of received messages until prior work has been completed.</span></span>

<span data-ttu-id="75016-303">Témata služby Service Bus jsou robustní a osvědčenou technologií umožňující publikování/odběr komunikace ve vašich cloudových nativních systémech.</span><span class="sxs-lookup"><span data-stu-id="75016-303">Service Bus topics are a robust and proven technology for enabling publish/subscribe communication in your cloud-native systems.</span></span>

### <a name="azure-event-grid"></a><span data-ttu-id="75016-304">Azure Event Grid</span><span class="sxs-lookup"><span data-stu-id="75016-304">Azure Event Grid</span></span>

<span data-ttu-id="75016-305">Zatímco Azure Service Bus je bitva-testovány zasílání zpráv broker s úplnou sadou podnikových funkcí, [Azure Event Grid](https://docs.microsoft.com/azure/event-grid/overview) je nové dítě na bloku.</span><span class="sxs-lookup"><span data-stu-id="75016-305">While Azure Service Bus is a battle-tested messaging broker with a full set of enterprise features, [Azure Event Grid](https://docs.microsoft.com/azure/event-grid/overview) is the new kid on the block.</span></span>

<span data-ttu-id="75016-306">Na první pohled může Event Grid vypadat jako další systém zasílání zpráv založený na tématech.</span><span class="sxs-lookup"><span data-stu-id="75016-306">At first glance, Event Grid may look like just another topic-based messaging system.</span></span> <span data-ttu-id="75016-307">Nicméně, je to jiné v mnoha ohledech.</span><span class="sxs-lookup"><span data-stu-id="75016-307">However, it's different in many ways.</span></span> <span data-ttu-id="75016-308">Zaměřuje se na úlohy založené na událostech a umožňuje zpracování událostí v reálném čase, hlubokou integraci Azure a otevřenou platformu – to vše na infrastruktuře bez serveru.</span><span class="sxs-lookup"><span data-stu-id="75016-308">Focused on event-driven workloads, it enables real-time event processing, deep Azure integration, and an open-platform - all on serverless infrastructure.</span></span> <span data-ttu-id="75016-309">Je navržen pro současné aplikace nativní pro cloud a bez serveru.</span><span class="sxs-lookup"><span data-stu-id="75016-309">It's designed for contemporary cloud-native and serverless applications</span></span>

<span data-ttu-id="75016-310">Jako centralizovaný *backplane událostí*nebo kanálu event grid reaguje na události uvnitř prostředků Azure a z vašich vlastních služeb.</span><span class="sxs-lookup"><span data-stu-id="75016-310">As a centralized *eventing backplane*, or pipe, Event Grid reacts to events inside Azure resources and from your own services.</span></span>

<span data-ttu-id="75016-311">Oznámení událostí jsou publikována v tématu mřížky událostí, které zase směruje každou událost k předplatnému.</span><span class="sxs-lookup"><span data-stu-id="75016-311">Event notifications are published to an Event Grid Topic, which, in turn, routes each event to a subscription.</span></span> <span data-ttu-id="75016-312">Předplatitelé mapovat odběry a využívat události.</span><span class="sxs-lookup"><span data-stu-id="75016-312">Subscribers map to subscriptions and consume the events.</span></span> <span data-ttu-id="75016-313">Stejně jako Service Bus, Event Grid podporuje *filtrovaný model odběratele,* kde předplatné nastaví pravidlo pro události, které chce přijímat.</span><span class="sxs-lookup"><span data-stu-id="75016-313">Like Service Bus, Event Grid supports a *filtered subscriber model* where a subscription sets rule for the events it wishes to receive.</span></span> <span data-ttu-id="75016-314">Event Grid poskytuje rychlou propustnost se zárukou 10 milionů událostí za sekundu, což umožňuje téměř doručení v reálném čase – mnohem víc, než dokáže služba Azure Service Bus generovat.</span><span class="sxs-lookup"><span data-stu-id="75016-314">Event Grid provides fast throughput with a guarantee of 10 million events per second enabling near real-time delivery - far more than what Azure Service Bus can generate.</span></span>

<span data-ttu-id="75016-315">Sweet spot pro Event Grid je jeho hluboká integrace do struktury infrastruktury Azure.</span><span class="sxs-lookup"><span data-stu-id="75016-315">A sweet spot for Event Grid is its deep integration into the fabric of Azure infrastructure.</span></span> <span data-ttu-id="75016-316">Prostředek Azure, jako je Cosmos DB, můžete publikovat předdefinované události přímo do jiných zainteresovaných prostředků Azure – bez nutnosti vlastního kódu.</span><span class="sxs-lookup"><span data-stu-id="75016-316">An Azure resource, such as Cosmos DB, can publish built-in events directly to other interested Azure resources - without the need for custom code.</span></span> <span data-ttu-id="75016-317">Event Grid můžete publikovat události z předplatného Azure, skupiny prostředků nebo služby, poskytuje vývojářům jemně odstupňovanou kontrolu nad životním cyklem cloudových prostředků.</span><span class="sxs-lookup"><span data-stu-id="75016-317">Event Grid can publish events from an Azure Subscription, Resource Group, or Service, giving developers fine-grained control over the lifecycle of cloud resources.</span></span> <span data-ttu-id="75016-318">Služba Event Grid se však neomezuje jen na Azure.</span><span class="sxs-lookup"><span data-stu-id="75016-318">However, Event Grid isn't limited to Azure.</span></span> <span data-ttu-id="75016-319">Je to otevřená platforma, která může využívat vlastní události HTTP publikované z aplikací nebo služeb třetích stran a směrovat události externím odběratelům.</span><span class="sxs-lookup"><span data-stu-id="75016-319">It's an open platform that can consume custom HTTP events published from applications or third-party services and route events to external subscribers.</span></span>

<span data-ttu-id="75016-320">Při publikování a přihlášení k odběru nativních událostí z prostředků Azure není vyžadováno žádné kódování.</span><span class="sxs-lookup"><span data-stu-id="75016-320">When publishing and subscribing to native events from Azure resources, no coding is required.</span></span> <span data-ttu-id="75016-321">S jednoduchou konfigurací můžete integrovat události z jednoho prostředku Azure do jiného s využitím integrované instalace pro témata a předplatná.</span><span class="sxs-lookup"><span data-stu-id="75016-321">With simple configuration, you can integrate events from one Azure resource to another leveraging built-in plumbing for Topics and Subscriptions.</span></span> <span data-ttu-id="75016-322">Obrázek 4-17 ukazuje anatomii Event Grid.</span><span class="sxs-lookup"><span data-stu-id="75016-322">Figure 4-17 shows the anatomy of Event Grid.</span></span>

![Anatomie sítě událostí](./media/event-grid-anatomy.png)

<span data-ttu-id="75016-324">**Obrázek 4-17**.</span><span class="sxs-lookup"><span data-stu-id="75016-324">**Figure 4-17**.</span></span> <span data-ttu-id="75016-325">Anatomie sítě událostí</span><span class="sxs-lookup"><span data-stu-id="75016-325">Event Grid anatomy</span></span>

<span data-ttu-id="75016-326">Hlavní rozdíl mezi EventGrid a Service Bus je základní *vzor výměny zpráv*.</span><span class="sxs-lookup"><span data-stu-id="75016-326">A major difference between EventGrid and Service Bus is the underlying *message exchange pattern*.</span></span>

<span data-ttu-id="75016-327">Service Bus implementuje starší *model vyžádat* styl, ve kterém příjem odběratel aktivně dotazování odběr tématu pro nové zprávy.</span><span class="sxs-lookup"><span data-stu-id="75016-327">Service Bus implements an older style *pull model* in which the downstream subscriber actively polls the topic subscription for new messages.</span></span> <span data-ttu-id="75016-328">Na druhou stranu, tento přístup dává účastníkovi plnou kontrolu nad tempem, při kterém zpracovává zprávy.</span><span class="sxs-lookup"><span data-stu-id="75016-328">On the upside, this approach gives the subscriber full control of the pace at which it processes messages.</span></span> <span data-ttu-id="75016-329">Určuje, kdy a kolik zpráv se má v daném okamžiku zpracovat.</span><span class="sxs-lookup"><span data-stu-id="75016-329">It controls when and how many messages to process at any given time.</span></span> <span data-ttu-id="75016-330">Nepřečtené zprávy zůstávají v předplatném, dokud nebudou zpracovány.</span><span class="sxs-lookup"><span data-stu-id="75016-330">Unread messages remain in the subscription until processed.</span></span> <span data-ttu-id="75016-331">Významným nedostatkem je latence mezi čas generování události a dotazování operace, která vyžádá tuto zprávu odběratele pro zpracování.</span><span class="sxs-lookup"><span data-stu-id="75016-331">A significant shortcoming is the latency between the time the event is generated and the polling operation that pulls that message to the subscriber for processing.</span></span> <span data-ttu-id="75016-332">Také režie konstantní dotazování pro další událost spotřebovává prostředky a peníze.</span><span class="sxs-lookup"><span data-stu-id="75016-332">Also, the overhead of constant polling for the next event consumes resources and money.</span></span>

<span data-ttu-id="75016-333">EventGrid se však liší.</span><span class="sxs-lookup"><span data-stu-id="75016-333">EventGrid, however, is different.</span></span> <span data-ttu-id="75016-334">Implementuje *model push,* ve kterém jsou události odesílány do EventHandlers jako přijaté, což poskytuje doručení událostí téměř v reálném čase.</span><span class="sxs-lookup"><span data-stu-id="75016-334">It implements a *push model* in which events are sent to the EventHandlers as received, giving near real-time event delivery.</span></span> <span data-ttu-id="75016-335">Snižuje také náklady, protože služba se aktivuje pouze v případě, že je potřeba ke spotřebování události – ne nepřetržitě jako u dotazování.</span><span class="sxs-lookup"><span data-stu-id="75016-335">It also reduces cost as the service is triggered only when it's needed to consume an event – not continually as with polling.</span></span> <span data-ttu-id="75016-336">To znamená, že obslužná rutina události musí zpracovat příchozí zatížení a poskytnout mechanismy omezení, aby se ochránila před zahlcením.</span><span class="sxs-lookup"><span data-stu-id="75016-336">That said, an event handler must handle the incoming load and provide throttling mechanisms to protect itself from becoming overwhelmed.</span></span> <span data-ttu-id="75016-337">Mnoho služeb Azure, které tyto události spotřebovávají, jako jsou funkce Azure a logic apps, poskytuje funkce automatického škálování pro zpracování zvýšených zatížení.</span><span class="sxs-lookup"><span data-stu-id="75016-337">Many Azure services that consume these events, such as Azure Functions and Logic Apps provide automatic autoscaling capabilities to handle increased loads.</span></span>  

<span data-ttu-id="75016-338">Event Grid je plně spravovaná cloudová služba bez serveru.</span><span class="sxs-lookup"><span data-stu-id="75016-338">Event Grid is a fully managed serverless cloud service.</span></span> <span data-ttu-id="75016-339">Dynamicky se škáluje na základě vašeho provozu a účtuje vám pouze za skutečné využití, nikoli za předem zakoupenou kapacitu.</span><span class="sxs-lookup"><span data-stu-id="75016-339">It dynamically scales based on your traffic and charges you only for your actual usage, not pre-purchased capacity.</span></span> <span data-ttu-id="75016-340">Prvních 100 000 operací za měsíc je zdarma – operace jsou definovány jako příchozí přenos událostí (oznámení o příchozích událostech), pokusy o doručení předplatného, volání správy a filtrování podle předmětu.</span><span class="sxs-lookup"><span data-stu-id="75016-340">The first 100,000 operations per month are free – operations being defined as event ingress (incoming event notifications), subscription delivery attempts, management calls, and filtering by subject.</span></span> <span data-ttu-id="75016-341">S 99,99% dostupností eventgrid zaručuje doručení události během 24 hodin, s integrovanou funkcí opakování pro neúspěšné doručení.</span><span class="sxs-lookup"><span data-stu-id="75016-341">With 99.99% availability, EventGrid guarantees the delivery of an event within a 24-hour period, with built-in retry functionality for unsuccessful delivery.</span></span> <span data-ttu-id="75016-342">Nedoručené zprávy lze přesunout do fronty "nedoručené písmeno" pro řešení.</span><span class="sxs-lookup"><span data-stu-id="75016-342">Undelivered messages can be moved to a "dead-letter" queue for resolution.</span></span>  <span data-ttu-id="75016-343">Na rozdíl od Azure Service Bus je Event Grid vyladěný pro rychlý výkon a nepodporuje funkce, jako je objednané zasílání zpráv, transakce a relace.</span><span class="sxs-lookup"><span data-stu-id="75016-343">Unlike Azure Service Bus, Event Grid is tuned for fast performance and doesn't support features like ordered messaging, transactions, and sessions.</span></span>

### <a name="streaming-messages-in-the-azure-cloud"></a><span data-ttu-id="75016-344">Streamování zpráv v cloudu Azure</span><span class="sxs-lookup"><span data-stu-id="75016-344">Streaming messages in the Azure cloud</span></span>

<span data-ttu-id="75016-345">Azure Service Bus a Event Grid poskytují skvělou podporu pro aplikace, které zveřejňují jednotlivé samostatné události, jako je nový dokument, který byl vložen do databáze Cosmos.</span><span class="sxs-lookup"><span data-stu-id="75016-345">Azure Service Bus and Event Grid provide great support for applications that expose single, discrete events like a new document has been inserted into a Cosmos DB.</span></span> <span data-ttu-id="75016-346">Ale co když váš cloud nativní systém potřebuje zpracovat *proud souvisejících událostí?*</span><span class="sxs-lookup"><span data-stu-id="75016-346">But, what if your cloud-native system needs to process a *stream of related events*?</span></span> <span data-ttu-id="75016-347">[Datové proudy událostí](https://docs.microsoft.com/archive/msdn-magazine/2015/february/microsoft-azure-the-rise-of-event-stream-oriented-systems) jsou složitější.</span><span class="sxs-lookup"><span data-stu-id="75016-347">[Event streams](https://docs.microsoft.com/archive/msdn-magazine/2015/february/microsoft-azure-the-rise-of-event-stream-oriented-systems) are more complex.</span></span> <span data-ttu-id="75016-348">Obvykle jsou časově uspořádané, vzájemně propojené a musí být zpracovány jako skupina.</span><span class="sxs-lookup"><span data-stu-id="75016-348">They're typically time-ordered, interrelated, and must be processed as a group.</span></span>

<span data-ttu-id="75016-349">[Azure Event Hub](https://azure.microsoft.com/services/event-hubs/) je platforma pro streamování dat a služba pro ingestování událostí, která shromažďuje, transformuje a ukládá události.</span><span class="sxs-lookup"><span data-stu-id="75016-349">[Azure Event Hub](https://azure.microsoft.com/services/event-hubs/) is a data streaming platform and event ingestion service that collects, transforms, and stores events.</span></span> <span data-ttu-id="75016-350">Je vyladěný pro sběr dat streamování, jako jsou například nepřetržité oznámení událostí vyzařované z kontextu telemetrie.</span><span class="sxs-lookup"><span data-stu-id="75016-350">It's fine-tuned to capture streaming data, such as continuous event notifications emitted from a telemetry context.</span></span> <span data-ttu-id="75016-351">Služba je vysoce škálovatelná a může ukládat a [zpracovávat miliony událostí za sekundu](https://docs.microsoft.com/azure/event-hubs/event-hubs-about).</span><span class="sxs-lookup"><span data-stu-id="75016-351">The service is highly scalable and can store and [process millions of events per second](https://docs.microsoft.com/azure/event-hubs/event-hubs-about).</span></span> <span data-ttu-id="75016-352">Zobrazeno na obrázku 4-18, je to často přední dveře pro kanál událostí, oddělení datového proudu od spotřeby událostí.</span><span class="sxs-lookup"><span data-stu-id="75016-352">Shown in Figure 4-18, it's often a front door for an event pipeline, decoupling ingest stream from event consumption.</span></span>

![Azure Event Hub](./media/azure-event-hub.png)

<span data-ttu-id="75016-354">**Obrázek 4-18**.</span><span class="sxs-lookup"><span data-stu-id="75016-354">**Figure 4-18**.</span></span> <span data-ttu-id="75016-355">Azure Event Hub</span><span class="sxs-lookup"><span data-stu-id="75016-355">Azure Event Hub</span></span>

<span data-ttu-id="75016-356">Event Hub podporuje nízkou latenci a konfigurovatelné uchovávání času.</span><span class="sxs-lookup"><span data-stu-id="75016-356">Event Hub supports low latency and configurable time retention.</span></span> <span data-ttu-id="75016-357">Na rozdíl od front a témat uchovávejte centra událostí data událostí po přečtení spotřebitelem.</span><span class="sxs-lookup"><span data-stu-id="75016-357">Unlike queues and topics, Event Hubs keep event data after it's been read by a consumer.</span></span> <span data-ttu-id="75016-358">Tato funkce umožňuje dalším službám analýzy dat, interním i externím, přehrát data pro další analýzu.</span><span class="sxs-lookup"><span data-stu-id="75016-358">This feature enables other data analytic services, both internal and external, to replay the data for further analysis.</span></span> <span data-ttu-id="75016-359">Události uložené v centru událostí jsou odstraněny pouze po vypršení doby uchovávání, což je ve výchozím nastavení jeden den, ale konfigurovatelné.</span><span class="sxs-lookup"><span data-stu-id="75016-359">Events stored in event hub are only deleted upon expiration of the retention period, which is one day by default, but configurable.</span></span>

<span data-ttu-id="75016-360">Centrum událostí podporuje běžné protokoly pro publikování událostí včetně protokolů HTTPS a AMQP.</span><span class="sxs-lookup"><span data-stu-id="75016-360">Event Hub supports common event publishing protocols including HTTPS and AMQP.</span></span> <span data-ttu-id="75016-361">Podporuje také Kafku 1.0.</span><span class="sxs-lookup"><span data-stu-id="75016-361">It also supports Kafka 1.0.</span></span> <span data-ttu-id="75016-362">[Existující aplikace Kafka mohou komunikovat s Event Hub](https://docs.microsoft.com/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview) pomocí protokolu Kafka poskytující alternativu ke správě velkých clusterů Kafka.</span><span class="sxs-lookup"><span data-stu-id="75016-362">[Existing Kafka applications can communicate with Event Hub](https://docs.microsoft.com/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview) using the Kafka protocol providing an alternative to managing large Kafka clusters.</span></span> <span data-ttu-id="75016-363">Kafka zahrnuje mnoho cloudových systémů s otevřeným zdrojovým kódem.</span><span class="sxs-lookup"><span data-stu-id="75016-363">Many open-source cloud-native systems embrace Kafka.</span></span>

<span data-ttu-id="75016-364">Event Hubs implementuje streamování zpráv prostřednictvím [modelu rozděleného spotřebitele,](https://docs.microsoft.com/azure/event-hubs/event-hubs-features) ve kterém každý příjemce čte pouze určitou podmnožinu nebo oddíl datového proudu zpráv.</span><span class="sxs-lookup"><span data-stu-id="75016-364">Event Hubs implements message streaming through a [partitioned consumer model](https://docs.microsoft.com/azure/event-hubs/event-hubs-features) in which each consumer only reads a specific subset, or partition, of the message stream.</span></span> <span data-ttu-id="75016-365">Tento vzor umožňuje obrovské horizontální škálování pro zpracování událostí a poskytuje další funkce zaměřené na datový proud, které nejsou k dispozici ve frontách a tématech.</span><span class="sxs-lookup"><span data-stu-id="75016-365">This pattern enables tremendous horizontal scale for event processing and provides other stream-focused features that are unavailable in queues and topics.</span></span> <span data-ttu-id="75016-366">Oddíl je seřazená posloupnost událostí, která se nachází v centru událostí.</span><span class="sxs-lookup"><span data-stu-id="75016-366">A partition is an ordered sequence of events that is held in an event hub.</span></span> <span data-ttu-id="75016-367">Při doručení novějších událostí jsou přidány na konec této sekvence.</span><span class="sxs-lookup"><span data-stu-id="75016-367">As newer events arrive, they're added to the end of this sequence.</span></span><span data-ttu-id="75016-368">Obrázek 4-19 znázorňuje dělení v centru událostí.</span><span class="sxs-lookup"><span data-stu-id="75016-368"> Figure 4-19 shows partitioning in an Event Hub.</span></span>

![Dělení centra událostí](./media/event-hub-partitioning.png)

<span data-ttu-id="75016-370">**Obrázek 4-19**.</span><span class="sxs-lookup"><span data-stu-id="75016-370">**Figure 4-19**.</span></span> <span data-ttu-id="75016-371">Dělení centra událostí</span><span class="sxs-lookup"><span data-stu-id="75016-371">Event Hub partitioning</span></span>

<span data-ttu-id="75016-372">Místo čtení ze stejného prostředku, každá skupina spotřebitelů čte přes podmnožinu nebo oddíl datového proudu zpráv.</span><span class="sxs-lookup"><span data-stu-id="75016-372">Instead of reading from the same resource, each consumer group reads across a subset, or partition, of the message stream.</span></span>

<span data-ttu-id="75016-373">Pro aplikace nativní pro cloud, které musí streamovat velký počet událostí, azure event hub může být robustní a cenově dostupné řešení.</span><span class="sxs-lookup"><span data-stu-id="75016-373">For cloud-native applications that must stream large numbers of events, Azure Event Hub can be a robust and affordable solution.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="75016-374">[Předchozí](front-end-communication.md)
>[další](grpc.md)</span><span class="sxs-lookup"><span data-stu-id="75016-374">[Previous](front-end-communication.md)
[Next](grpc.md)</span></span>
