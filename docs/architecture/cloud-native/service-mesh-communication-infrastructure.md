---
title: Komunikační infrastruktura Service Mesh
description: Přečtěte si, jak technologie sítě sítě zefektivňují komunikaci mikroslužeb v cloudu.
author: robvet
ms.date: 09/10/2019
ms.openlocfilehash: a9192bf9f5827d05b2453c796c72e11782f9f911
ms.sourcegitcommit: 559259da2738a7b33a46c0130e51d336091c2097
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/22/2019
ms.locfileid: "72771029"
---
# <a name="service-mesh-communication-infrastructure"></a><span data-ttu-id="a25e0-103">Komunikační infrastruktura Service Mesh</span><span class="sxs-lookup"><span data-stu-id="a25e0-103">Service Mesh communication infrastructure</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="a25e0-104">V rámci této kapitoly jsme prozkoumali problémy s komunikací mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="a25e0-104">Throughout this chapter, we've explored the challenges of microservice communication.</span></span> <span data-ttu-id="a25e0-105">Zjistili jsme, že vývojové týmy musí být citlivé na to, jak vzájemně komunikují služby back-end.</span><span class="sxs-lookup"><span data-stu-id="a25e0-105">We said that development teams need to be sensitive to how back-end services communicate with each other.</span></span> <span data-ttu-id="a25e0-106">V ideálním případě je to lepší komunikace mezi službami.</span><span class="sxs-lookup"><span data-stu-id="a25e0-106">Ideally, the less inter-service communication, the better.</span></span> <span data-ttu-id="a25e0-107">Vyloučení ale není vždycky možné, protože back-endové služby se obvykle vzájemně spoléhá na to, že se operace dokončí.</span><span class="sxs-lookup"><span data-stu-id="a25e0-107">However, avoidance isn't always possible as back-end services often rely on one another to complete operations.</span></span>

<span data-ttu-id="a25e0-108">Prozkoumali jsme různé přístupy k implementaci synchronní komunikace HTTP a asynchronního zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="a25e0-108">We explored different approaches for implementing synchronous HTTP communication and asynchronous messaging.</span></span> <span data-ttu-id="a25e0-109">V každém z těchto případů je vývojář zatížen implementací komunikačního kódu.</span><span class="sxs-lookup"><span data-stu-id="a25e0-109">In each of the cases, the developer is burdened with implementing communication code.</span></span> <span data-ttu-id="a25e0-110">Kód komunikace je složitý a časově náročný.</span><span class="sxs-lookup"><span data-stu-id="a25e0-110">Communication code is complex and time intensive.</span></span> <span data-ttu-id="a25e0-111">Nesprávná rozhodnutí mohou vést k významným problémům s výkonem.</span><span class="sxs-lookup"><span data-stu-id="a25e0-111">Incorrect decisions can lead to significant performance issues.</span></span>

<span data-ttu-id="a25e0-112">Moderní přístup k komunikačním centrům mikroslužeb kolem nové a rychle se vyvíjející technologie s názvem *síť*.</span><span class="sxs-lookup"><span data-stu-id="a25e0-112">A more modern approach to microservice communication centers around a new and rapidly evolving technology entitled *Service Mesh*.</span></span> <span data-ttu-id="a25e0-113">[Síť](https://www.nginx.com/blog/what-is-a-service-mesh/) je konfigurovatelná vrstva infrastruktury s integrovanými možnostmi pro zpracování komunikace mezi službami, odolnosti a mnoha různých otázek.</span><span class="sxs-lookup"><span data-stu-id="a25e0-113">A [service mesh](https://www.nginx.com/blog/what-is-a-service-mesh/) is a configurable infrastructure layer with built-in capabilities to handle service-to-service communication, resiliency, and many cross-cutting concerns.</span></span> <span data-ttu-id="a25e0-114">Přesune zodpovědnost za tyto otázky z mikroslužeb a do vrstvy sítě.</span><span class="sxs-lookup"><span data-stu-id="a25e0-114">It moves the responsibility for these concerns out of the microservices and into service mesh layer.</span></span> <span data-ttu-id="a25e0-115">Komunikace je z vašich mikroslužeb abstraktní.</span><span class="sxs-lookup"><span data-stu-id="a25e0-115">Communication is abstracted away from your microservices.</span></span>

<span data-ttu-id="a25e0-116">Klíčovou součástí sítě je proxy.</span><span class="sxs-lookup"><span data-stu-id="a25e0-116">A key component of a service mesh is a proxy.</span></span> <span data-ttu-id="a25e0-117">V nativní aplikaci pro Cloud je instance proxy obvykle společně umístěná u každé mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="a25e0-117">In a cloud-native application, an instance of a proxy is typically colocated with each microservice.</span></span> <span data-ttu-id="a25e0-118">I když se spouštějí v samostatných procesech, jsou tyto dva úzce propojené a sdílejí stejný životní cyklus.</span><span class="sxs-lookup"><span data-stu-id="a25e0-118">While they execute in separate processes, the two are closely linked and share the same lifecycle.</span></span> <span data-ttu-id="a25e0-119">Tento model, známý jako [vzorek postranního vozíku](https://docs.microsoft.com/azure/architecture/patterns/sidecar), je zobrazen na obrázku 4-23.</span><span class="sxs-lookup"><span data-stu-id="a25e0-119">This pattern, known as the [Sidecar pattern](https://docs.microsoft.com/azure/architecture/patterns/sidecar), and is shown in Figure 4-23.</span></span>

![Síť s postranním vozíkem](./media/service-mesh-with-side-car.png)

<span data-ttu-id="a25e0-121">**Obrázek 4-23**.</span><span class="sxs-lookup"><span data-stu-id="a25e0-121">**Figure 4-23**.</span></span> <span data-ttu-id="a25e0-122">Síť s postranním vozíkem</span><span class="sxs-lookup"><span data-stu-id="a25e0-122">Service mesh with a side car</span></span>

<span data-ttu-id="a25e0-123">Všimněte si na předchozím obrázku, jak jsou zprávy zachyceny proxy serverem, který se souběžně používá v rámci každé mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="a25e0-123">Note in the previous figure how messages are intercepted by a proxy that runs alongside each microservice.</span></span> <span data-ttu-id="a25e0-124">Jednotlivé proxy servery je možné nakonfigurovat s pravidly přenosů, které jsou specifické pro mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="a25e0-124">Each proxy can be configured with traffic rules specific to the microservice.</span></span> <span data-ttu-id="a25e0-125">Chápe zprávy a můžou je směrovat mezi vaše služby a vnějším světem.</span><span class="sxs-lookup"><span data-stu-id="a25e0-125">It understands messages and can route them across your services and the outside world.</span></span>

<span data-ttu-id="a25e0-126">Spolu se správou komunikace mezi službami zajišťuje služba síť podporu zjišťování služeb a vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="a25e0-126">Along with managing service-to-service communication, the Service Mesh provides support for service discovery and load balancing.</span></span>

<span data-ttu-id="a25e0-127">Po nakonfigurování je síť velmi funkční.</span><span class="sxs-lookup"><span data-stu-id="a25e0-127">Once configured, a service mesh is highly functional.</span></span> <span data-ttu-id="a25e0-128">Síť načte odpovídající fond instancí z koncového bodu zjišťování služby.</span><span class="sxs-lookup"><span data-stu-id="a25e0-128">The mesh retrieves a corresponding pool of instances from a service discovery endpoint.</span></span> <span data-ttu-id="a25e0-129">Pošle požadavek na konkrétní instanci služby, která zaznamená latenci a typ odpovědi pro výsledek.</span><span class="sxs-lookup"><span data-stu-id="a25e0-129">It sends a request to a specific service instance, recording the latency and response type of the result.</span></span> <span data-ttu-id="a25e0-130">Zvolí instanci, která pravděpodobně vrátí rychlou odpověď na základě různých faktorů, včetně pozorované latence pro poslední požadavky.</span><span class="sxs-lookup"><span data-stu-id="a25e0-130">It chooses the instance most likely to return a fast response based on different factors, including the observed latency for recent requests.</span></span>

<span data-ttu-id="a25e0-131">Síť zajišťuje provoz, komunikaci a problémy se sítí na úrovni aplikace.</span><span class="sxs-lookup"><span data-stu-id="a25e0-131">A service mesh manages traffic, communication, and networking concerns at the application level.</span></span> <span data-ttu-id="a25e0-132">Pochopení zpráv a požadavků.</span><span class="sxs-lookup"><span data-stu-id="a25e0-132">It understands messages and requests.</span></span> <span data-ttu-id="a25e0-133">Síť se obvykle integruje s nástrojem Orchestrator kontejneru.</span><span class="sxs-lookup"><span data-stu-id="a25e0-133">A service mesh typically integrates with a container orchestrator.</span></span> <span data-ttu-id="a25e0-134">Kubernetes podporuje rozšiřitelnou architekturu, ve které lze přidat síť služby.</span><span class="sxs-lookup"><span data-stu-id="a25e0-134">Kubernetes supports an extensible architecture in which a service mesh can be added.</span></span>

<span data-ttu-id="a25e0-135">V kapitole 6 jsme podrobně na technologie sítě, včetně diskuzí o architektuře a dostupných Open Source implementací.</span><span class="sxs-lookup"><span data-stu-id="a25e0-135">In chapter 6, we deep-dive into Service Mesh technologies including a discussion on its architecture and available open-source implementations.</span></span>

## <a name="summary"></a><span data-ttu-id="a25e0-136">Souhrn</span><span class="sxs-lookup"><span data-stu-id="a25e0-136">Summary</span></span>

<span data-ttu-id="a25e0-137">V této kapitole jsme probrali vzory komunikace v cloudu Native.</span><span class="sxs-lookup"><span data-stu-id="a25e0-137">In this chapter, we discussed cloud-native communication patterns.</span></span> <span data-ttu-id="a25e0-138">Začali jsme zkoumat, jak klienti front-end komunikují s back-end mikroslužbami.</span><span class="sxs-lookup"><span data-stu-id="a25e0-138">We started by examining how front-end clients communicate with back-end microservices.</span></span> <span data-ttu-id="a25e0-139">Mluvili se na platformě rozhraní API Gateway a na komunikaci v reálném čase.</span><span class="sxs-lookup"><span data-stu-id="a25e0-139">Along the way, we talked about API Gateway platforms and real-time communication.</span></span> <span data-ttu-id="a25e0-140">Pak jsme si prohlédli, jak mikroslužby komunikují s jinými back-endové službami.</span><span class="sxs-lookup"><span data-stu-id="a25e0-140">We then looked at how microservices communicate with other back-end services.</span></span> <span data-ttu-id="a25e0-141">Vyhledali jsme synchronní komunikaci HTTP i asynchronní zasílání zpráv napříč službami.</span><span class="sxs-lookup"><span data-stu-id="a25e0-141">We looked at both synchronous HTTP communication and asynchronous messaging across services.</span></span> <span data-ttu-id="a25e0-142">Pokryli jsme gRPC, nadcházející technologii v cloudu Native World.</span><span class="sxs-lookup"><span data-stu-id="a25e0-142">We covered gRPC, an upcoming technology in the cloud-native world.</span></span> <span data-ttu-id="a25e0-143">Nakonec jsme zavedli novou a rychle se vyvíjející technologii, která může zjednodušit komunikaci mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="a25e0-143">Finally, we introduced a new and rapidly evolving technology entitled Service Mesh that can streamline microservice communication.</span></span>

<span data-ttu-id="a25e0-144">Speciální důraz byl na spravované služby Azure, které můžou přispět k implementaci komunikace v systémech nativních pro Cloud:</span><span class="sxs-lookup"><span data-stu-id="a25e0-144">Special emphasis was on managed Azure services that can help implement communication in cloud-native systems:</span></span>

- [<span data-ttu-id="a25e0-145">Application Gateway Azure</span><span class="sxs-lookup"><span data-stu-id="a25e0-145">Azure Application Gateway</span></span>](https://docs.microsoft.com/azure/application-gateway/overview)
- [<span data-ttu-id="a25e0-146">API Management Azure</span><span class="sxs-lookup"><span data-stu-id="a25e0-146">Azure API Management</span></span>](https://azure.microsoft.com/services/api-management/)
- [<span data-ttu-id="a25e0-147">Služba Azure SignalR</span><span class="sxs-lookup"><span data-stu-id="a25e0-147">Azure SignalR Service</span></span>](https://azure.microsoft.com/services/signalr-service/)
- [<span data-ttu-id="a25e0-148">Fronty Azure Storage</span><span class="sxs-lookup"><span data-stu-id="a25e0-148">Azure Storage Queues</span></span>](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction)
- [<span data-ttu-id="a25e0-149">Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="a25e0-149">Azure Service Bus</span></span>](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview)
- [<span data-ttu-id="a25e0-150">Azure Event Grid</span><span class="sxs-lookup"><span data-stu-id="a25e0-150">Azure Event Grid</span></span>](https://docs.microsoft.com/azure/event-grid/overview)
- [<span data-ttu-id="a25e0-151">Centrum událostí Azure</span><span class="sxs-lookup"><span data-stu-id="a25e0-151">Azure Event Hub</span></span>](https://azure.microsoft.com/services/event-hubs/)

<span data-ttu-id="a25e0-152">Dál jsme přešli na distribuovaná data v systémech nativních pro Cloud a na výhody a výzvy, které prezentují.</span><span class="sxs-lookup"><span data-stu-id="a25e0-152">We next move to distributed data in cloud-native systems and the benefits and challenges that it presents.</span></span>

### <a name="references"></a><span data-ttu-id="a25e0-153">Reference</span><span class="sxs-lookup"><span data-stu-id="a25e0-153">References</span></span>

- [<span data-ttu-id="a25e0-154">Mikroslužby .NET: architektura pro kontejnerové aplikace .NET</span><span class="sxs-lookup"><span data-stu-id="a25e0-154">.NET Microservices: Architecture for Containerized .NET applications</span></span>](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook)

- [<span data-ttu-id="a25e0-155">Návrh komunikace mezi službami pro mikroslužby</span><span class="sxs-lookup"><span data-stu-id="a25e0-155">Designing Interservice Communication for Microservices</span></span>](https://docs.microsoft.com/azure/architecture/microservices/design/interservice-communication)

- [<span data-ttu-id="a25e0-156">Služba signalizace Azure, plně spravovaná služba pro přidání funkcí v reálném čase</span><span class="sxs-lookup"><span data-stu-id="a25e0-156">Azure SignalR Service, a fully managed service to add real-time functionality</span></span>](https://azure.microsoft.com/blog/azure-signalr-service-a-fully-managed-service-to-add-real-time-functionality/)

- [<span data-ttu-id="a25e0-157">Kontroler příchozího přenosu brány API Azure</span><span class="sxs-lookup"><span data-stu-id="a25e0-157">Azure API Gateway Ingress Controller</span></span>](https://azure.github.io/application-gateway-kubernetes-ingress/)

- [<span data-ttu-id="a25e0-158">Informace o příchozím přenosu ve službě Azure Kubernetes (AKS)</span><span class="sxs-lookup"><span data-stu-id="a25e0-158">About Ingress in Azure Kubernetes Service (AKS)</span></span>](https://vincentlauzon.com/2018/10/10/about-ingress-in-azure-kubernetes-service-aks/)

- [<span data-ttu-id="a25e0-159">Praktické gRPC</span><span class="sxs-lookup"><span data-stu-id="a25e0-159">Practical gRPC</span></span>](https://www.worldcat.org/title/practical-grpc/oclc/1042342319)

- [<span data-ttu-id="a25e0-160">Dokumentace k gRPC</span><span class="sxs-lookup"><span data-stu-id="a25e0-160">gRPC Documentation</span></span>](https://grpc.io/docs/guides/)

- <span data-ttu-id="a25e0-161">[gRPC pro vývojáře WCF](https://bing.com) [značka gRPC]</span><span class="sxs-lookup"><span data-stu-id="a25e0-161">[gRPC for WCF Developers](https://bing.com) [Mark's gRPC book]</span></span>

- [<span data-ttu-id="a25e0-162">Porovnávání služeb gRPC s rozhraními API HTTP</span><span class="sxs-lookup"><span data-stu-id="a25e0-162">Comparing gRPC Services with HTTP APIs</span></span>](https://docs.microsoft.com/aspnet/core/grpc/comparison?view=aspnetcore-3.0)

>[!div class="step-by-step"]
><span data-ttu-id="a25e0-163">[Předchozí](rest-grpc.md)
>[Další](distributed-data.md)</span><span class="sxs-lookup"><span data-stu-id="a25e0-163">[Previous](rest-grpc.md)
[Next](distributed-data.md)</span></span>
