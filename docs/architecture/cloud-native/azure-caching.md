---
title: Ukládání do mezipaměti v nativní cloudové aplikaci
description: Přečtěte si o strategiích ukládání do mezipaměti v cloudové nativní aplikaci.
author: robvet
ms.date: 05/17/2020
ms.openlocfilehash: a33f143499b5f9545493bc4bc757cc3d152f7aa9
ms.sourcegitcommit: 8bfeb5930ca48b2ee6053f16082dcaf24d46d221
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2020
ms.locfileid: "88557513"
---
# <a name="caching-in-a-cloud-native-app"></a><span data-ttu-id="ea8fd-103">Ukládání do mezipaměti v nativní aplikaci cloudu</span><span class="sxs-lookup"><span data-stu-id="ea8fd-103">Caching in a cloud-native app</span></span>

<span data-ttu-id="ea8fd-104">Výhody ukládání do mezipaměti se dobře rozumí.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-104">The benefits of caching are well understood.</span></span> <span data-ttu-id="ea8fd-105">Technika funguje tak, že dočasně kopíruje často používaná data z back-endu úložiště dat do *rychlého úložiště* , které se nachází blíže k aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-105">The technique works by temporarily copying frequently accessed data from a backend data store to *fast storage* that's located closer to the application.</span></span> <span data-ttu-id="ea8fd-106">Ukládání do mezipaměti je často implementováno tam, kde...</span><span class="sxs-lookup"><span data-stu-id="ea8fd-106">Caching is often implemented where...</span></span>

- <span data-ttu-id="ea8fd-107">Data zůstávají relativně statická.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-107">Data remains relatively static.</span></span>
- <span data-ttu-id="ea8fd-108">Přístup k datům je pomalý, zejména v porovnání s rychlostí paměti.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-108">Data access is slow, especially compared to the speed of the cache.</span></span>
- <span data-ttu-id="ea8fd-109">Data podléhají vysoké míře sporů.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-109">Data is subject to high levels of contention.</span></span>

## <a name="why"></a><span data-ttu-id="ea8fd-110">Proč?</span><span class="sxs-lookup"><span data-stu-id="ea8fd-110">Why?</span></span>

<span data-ttu-id="ea8fd-111">Jak je popsáno v tématu [pokyny k ukládání do mezipaměti Microsoftu](https://docs.microsoft.com/azure/architecture/best-practices/caching), ukládání do mezipaměti může zvýšit výkon, škálovatelnost a dostupnost jednotlivých mikroslužeb a systému jako celku.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-111">As discussed in the [Microsoft caching guidance](https://docs.microsoft.com/azure/architecture/best-practices/caching), caching can increase performance, scalability, and availability for individual microservices and the system as a whole.</span></span> <span data-ttu-id="ea8fd-112">Snižuje latenci a spory při zpracování velkých objemů souběžných požadavků do úložiště dat.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-112">It reduces the latency and contention of handling large volumes of concurrent requests to a data store.</span></span> <span data-ttu-id="ea8fd-113">Po zvýšení objemu dat a počtu uživatelů se stane větší výhoda ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-113">As data volume and the number of users increase, the greater the benefits of caching become.</span></span>

<span data-ttu-id="ea8fd-114">Ukládání do mezipaměti je nejúčinnější, když klient opakovaně čte data, která jsou neměnná nebo se nečasto mění.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-114">Caching is most effective when a client repeatedly reads data that is immutable or that changes infrequently.</span></span> <span data-ttu-id="ea8fd-115">Příklady zahrnují referenční informace, jako jsou informace o produktech a cenách, nebo sdílené statické prostředky, které je náročné vytvořit.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-115">Examples include reference information such as product and pricing information, or shared static resources that are costly to construct.</span></span>

<span data-ttu-id="ea8fd-116">I když by mikroslužby měly být bezstavové, distribuovaná mezipaměť může podporovat souběžný přístup k datům stavu relace, když je to nezbytně nutné.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-116">While microservices should be stateless, a distributed cache can support concurrent access to session state data when absolutely required.</span></span>

<span data-ttu-id="ea8fd-117">Zvažte také ukládání do mezipaměti, aby se předešlo opakovaným výpočtům.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-117">Also consider caching to avoid repetitive computations.</span></span> <span data-ttu-id="ea8fd-118">Pokud operace transformuje data nebo provede složitý výpočet, uloží výsledek pro následné požadavky do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-118">If an operation transforms data or performs a complicated calculation, cache the result for subsequent requests.</span></span>

## <a name="caching-architecture"></a><span data-ttu-id="ea8fd-119">Architektura mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ea8fd-119">Caching architecture</span></span>

<span data-ttu-id="ea8fd-120">Nativní cloudové aplikace obvykle implementují distribuovanou architekturu ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-120">Cloud native applications typically implement a distributed caching architecture.</span></span> <span data-ttu-id="ea8fd-121">Mezipaměť je hostována jako cloudová [Služba](./definition.md#backing-services), která je oddělená od mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-121">The cache is hosted as a cloud-based [backing service](./definition.md#backing-services), separate from the microservices.</span></span> <span data-ttu-id="ea8fd-122">Obrázek 5-15 ukazuje architekturu.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-122">Figure 5-15 shows the architecture.</span></span>

![Ukládání do mezipaměti v nativní aplikaci v cloudu](media/caching-in-a-cloud-native-app.png)

<span data-ttu-id="ea8fd-124">**Obrázek 5-15**: ukládání do mezipaměti v nativní aplikaci v cloudu</span><span class="sxs-lookup"><span data-stu-id="ea8fd-124">**Figure 5-15**: Caching in a cloud native app</span></span>

<span data-ttu-id="ea8fd-125">Na předchozím obrázku si všimněte, jak je mezipaměť nezávislá a je sdílena mikroslužbami.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-125">In the previous figure, note how the cache is independent of and shared by the microservices.</span></span> <span data-ttu-id="ea8fd-126">V tomto scénáři je mezipaměť vyvolaná [bránou rozhraní API](./front-end-communication.md).</span><span class="sxs-lookup"><span data-stu-id="ea8fd-126">In this scenario, the cache is invoked by the [API Gateway](./front-end-communication.md).</span></span> <span data-ttu-id="ea8fd-127">Jak je popsáno v kapitole 4, brána slouží jako front-end pro všechny příchozí požadavky.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-127">As discussed in chapter 4, the gateway serves as a front end for all incoming requests.</span></span> <span data-ttu-id="ea8fd-128">Distribuovaná mezipaměť zvyšuje odezvu systému tím, že vrací data uložená v mezipaměti, kdykoli je to možné.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-128">The distributed cache increases system responsiveness by returning cached data whenever possible.</span></span> <span data-ttu-id="ea8fd-129">Kromě toho oddělení mezipaměti od služeb umožňuje, aby se mezipaměť nezávisle nastavila nebo vyčerpala, aby se splnily zvýšené nároky na provoz.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-129">Additionally, separating the cache from the services allows the cache to scale up or out independently to meet increased traffic demands.</span></span>

<span data-ttu-id="ea8fd-130">Předchozí obrázek představuje společný vzor pro ukládání do mezipaměti, který je známý jako model doplňování [mezipaměti](https://docs.microsoft.com/azure/architecture/patterns/cache-aside).</span><span class="sxs-lookup"><span data-stu-id="ea8fd-130">The previous figure presents a common caching pattern known as the [cache-aside pattern](https://docs.microsoft.com/azure/architecture/patterns/cache-aside).</span></span> <span data-ttu-id="ea8fd-131">U příchozího požadavku nejprve vydáte dotaz na mezipaměť (krok \# 1) pro odpověď.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-131">For an incoming request, you first query the cache (step \#1) for a response.</span></span> <span data-ttu-id="ea8fd-132">Pokud se najde, data se vrátí hned.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-132">If found, the data is returned immediately.</span></span> <span data-ttu-id="ea8fd-133">Pokud data v mezipaměti neexistují (označovaná jako [neúspěšný mezipaměť](https://www.techopedia.com/definition/6308/cache-miss)), načte se z místní databáze v rámci služby pro příjem dat (krok \# 2).</span><span class="sxs-lookup"><span data-stu-id="ea8fd-133">If the data doesn't exist in the cache (known as a [cache miss](https://www.techopedia.com/definition/6308/cache-miss)), it's retrieved from a local database in a downstream service (step \#2).</span></span> <span data-ttu-id="ea8fd-134">Pak se zapíše do mezipaměti pro budoucí požadavky (krok \# 3) a vrátí se volajícímu.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-134">It's then written to the cache for future requests (step \#3), and returned to the caller.</span></span> <span data-ttu-id="ea8fd-135">K pravidelnému vyřazení dat uložených v mezipaměti musí být nutná péče, aby systém zůstal včas a konzistentní.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-135">Care must be taken to periodically evict cached data so that the system remains timely and consistent.</span></span>

<span data-ttu-id="ea8fd-136">Jak sdílená mezipaměť roste, může být výhodné rozdělit data do oddílů napříč více uzly.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-136">As a shared cache grows, it might prove beneficial to partition its data across multiple nodes.</span></span> <span data-ttu-id="ea8fd-137">Díky tomu může pomoci minimalizovat spory a zlepšit škálovatelnost.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-137">Doing so can help minimize contention and improve scalability.</span></span> <span data-ttu-id="ea8fd-138">Celá řada služeb ukládání do mezipaměti podporuje možnost dynamického přidávání a odebírání uzlů a vyrovnávání dat napříč oddíly.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-138">Many Caching services support the ability to dynamically add and remove nodes and rebalance data across partitions.</span></span> <span data-ttu-id="ea8fd-139">Tento přístup obvykle zahrnuje clusteringu.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-139">This approach typically involves clustering.</span></span> <span data-ttu-id="ea8fd-140">Clustering zpřístupňuje kolekci federovaných uzlů jako bezproblémové a jedinou mezipaměť.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-140">Clustering exposes a collection of federated nodes as a seamless, single cache.</span></span> <span data-ttu-id="ea8fd-141">Interně se ale data přenáší napříč uzly po předdefinované distribuční strategii, která zatížení rovnoměrně vyrovnává.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-141">Internally, however, the data is dispersed across the nodes following a predefined distribution strategy that balances the load evenly.</span></span>

## <a name="azure-cache-for-redis"></a><span data-ttu-id="ea8fd-142">Azure Cache for Redis</span><span class="sxs-lookup"><span data-stu-id="ea8fd-142">Azure Cache for Redis</span></span>

<span data-ttu-id="ea8fd-143">[Azure cache pro Redis](https://azure.microsoft.com/services/cache/) je zabezpečená služba pro ukládání dat do mezipaměti a službu Zprostředkovatel zasílání zpráv, která je plně spravovaná Microsoftem.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-143">[Azure Cache for Redis](https://azure.microsoft.com/services/cache/) is a secure data caching and messaging broker service, fully managed by Microsoft.</span></span> <span data-ttu-id="ea8fd-144">Využito jako nabídka platformy jako služby (PaaS), poskytuje přístup k datům s vysokou propustností a nízkou latencí.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-144">Consumed as a Platform as a Service (PaaS) offering, it provides high throughput and low-latency access to data.</span></span> <span data-ttu-id="ea8fd-145">Služba je přístupná pro jakoukoli aplikaci v rámci Azure i mimo ni.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-145">The service is accessible to any application within or outside of Azure.</span></span>

<span data-ttu-id="ea8fd-146">Služba Azure cache for Redis spravuje přístup k serverům Redis Open Source hostovaným v datových centrech Azure.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-146">The Azure Cache for Redis service manages access to open-source Redis servers hosted across Azure data centers.</span></span> <span data-ttu-id="ea8fd-147">Služba funguje jako fasáda, která poskytuje správu, řízení přístupu a zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-147">The service acts as a facade providing management, access control, and security.</span></span> <span data-ttu-id="ea8fd-148">Služba nativně podporuje bohatou sadu datových struktur, včetně řetězců, hodnot hash, seznamů a sad.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-148">The service natively supports a rich set of data structures, including strings, hashes, lists, and sets.</span></span> <span data-ttu-id="ea8fd-149">Pokud už vaše aplikace používá Redis, bude pro Redis fungovat tak, jak je s mezipamětí Azure cache.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-149">If your application already uses Redis, it will work as-is with Azure Cache for Redis.</span></span>

<span data-ttu-id="ea8fd-150">Mezipaměť Azure pro Redis je větší než server mezipaměti Simple cache.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-150">Azure Cache for Redis is more than a simple cache server.</span></span> <span data-ttu-id="ea8fd-151">Může podporovat několik scénářů pro vylepšení architektury mikroslužeb:</span><span class="sxs-lookup"><span data-stu-id="ea8fd-151">It can support a number of scenarios to enhance a microservices architecture:</span></span>

- <span data-ttu-id="ea8fd-152">Úložiště dat v paměti</span><span class="sxs-lookup"><span data-stu-id="ea8fd-152">An in-memory data store</span></span>
- <span data-ttu-id="ea8fd-153">Distribuovaná databáze, která není relační</span><span class="sxs-lookup"><span data-stu-id="ea8fd-153">A distributed non-relational database</span></span>
- <span data-ttu-id="ea8fd-154">Zprostředkovatel zpráv</span><span class="sxs-lookup"><span data-stu-id="ea8fd-154">A message broker</span></span>
- <span data-ttu-id="ea8fd-155">Konfigurační server nebo server zjišťování</span><span class="sxs-lookup"><span data-stu-id="ea8fd-155">A configuration or discovery server</span></span>
  
<span data-ttu-id="ea8fd-156">V případě pokročilých scénářů lze kopii dat uložených v mezipaměti [zachovat na disku](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-how-to-premium-persistence).</span><span class="sxs-lookup"><span data-stu-id="ea8fd-156">For advanced scenarios, a copy of the cached data can be [persisted to disk](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-how-to-premium-persistence).</span></span> <span data-ttu-id="ea8fd-157">Pokud závažná událost zakáže primární i mezipaměť repliky, mezipaměť se znovu vytvoří z posledního snímku.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-157">If a catastrophic event disables both the primary and replica caches, the cache is reconstructed from the most recent snapshot.</span></span>

<span data-ttu-id="ea8fd-158">Azure Redis Cache je k dispozici v rámci několika předdefinovaných konfigurací a cenových úrovní.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-158">Azure Redis Cache is available across a number of predefined configurations and pricing tiers.</span></span> <span data-ttu-id="ea8fd-159">[Úroveň Premium](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-overview#service-tiers) nabízí mnoho funkcí na podnikové úrovni, jako je clustering, trvalost dat, geografická replikace a izolace virtuální sítě.</span><span class="sxs-lookup"><span data-stu-id="ea8fd-159">The [Premium tier](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-overview#service-tiers) features many enterprise-level features such as clustering, data persistence, geo-replication, and virtual-network isolation.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="ea8fd-160">[Předchozí](relational-vs-nosql-data.md) 
> [Další](elastic-search-in-azure.md)</span><span class="sxs-lookup"><span data-stu-id="ea8fd-160">[Previous](relational-vs-nosql-data.md)
[Next](elastic-search-in-azure.md)</span></span>
