---
title: Využití bezserverových funkcí
description: Využití bez serveru a Azure Functions v cloudových nativních aplikacích
ms.date: 04/13/2020
ms.openlocfilehash: 176499e3cd0349cd689b9d13d1c237a6343d13f3
ms.sourcegitcommit: 5988e9a29cedb8757320817deda3c08c6f44a6aa
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/28/2020
ms.locfileid: "82199739"
---
# <a name="leveraging-serverless-functions"></a><span data-ttu-id="b16c2-103">Využití bezserverových funkcí</span><span class="sxs-lookup"><span data-stu-id="b16c2-103">Leveraging serverless functions</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="b16c2-104">V rámci spektra od správy fyzických počítačů po využití cloudových možností bez serveru na extrémním konci.</span><span class="sxs-lookup"><span data-stu-id="b16c2-104">In the spectrum from managing physical machines to leveraging cloud capabilities, serverless lives at the extreme end.</span></span> <span data-ttu-id="b16c2-105">Vaše jediná odpovědnost je váš kód a platíte jenom při spuštění kódu.</span><span class="sxs-lookup"><span data-stu-id="b16c2-105">Your only responsibility is your code, and you only pay when your code runs.</span></span> <span data-ttu-id="b16c2-106">Azure Functions poskytuje způsob, jak sestavovat možnosti bez serveru do nativních aplikací pro Cloud.</span><span class="sxs-lookup"><span data-stu-id="b16c2-106">Azure Functions provides a way to build serverless capabilities into your cloud-native applications.</span></span>

## <a name="what-is-serverless"></a><span data-ttu-id="b16c2-107">Co je bez serveru?</span><span class="sxs-lookup"><span data-stu-id="b16c2-107">What is serverless?</span></span>

<span data-ttu-id="b16c2-108">Bez serveru je poměrně novým modelem služby cloud computingu.</span><span class="sxs-lookup"><span data-stu-id="b16c2-108">Serverless is a relatively new service model of cloud computing.</span></span> <span data-ttu-id="b16c2-109">Neznamená to, že jsou servery volitelné – váš kód pořád běží na serveru někam.</span><span class="sxs-lookup"><span data-stu-id="b16c2-109">It doesn't mean that servers are optional - your code still runs on a server somewhere.</span></span> <span data-ttu-id="b16c2-110">Rozdíl je v tom, že se tým aplikace již netýká správy serverové infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="b16c2-110">The distinction is that the application team no longer concerns itself with managing server infrastructure.</span></span> <span data-ttu-id="b16c2-111">Místo toho dodavatel cloudu tuto zodpovědnost vlastní.</span><span class="sxs-lookup"><span data-stu-id="b16c2-111">Instead, the cloud vendor own this responsibility.</span></span> <span data-ttu-id="b16c2-112">Vývojový tým zvyšuje svou produktivitu díky doručování podnikových řešení zákazníkům, ne při přípravě na domovníing.</span><span class="sxs-lookup"><span data-stu-id="b16c2-112">The development team increases its productivity by delivering business solutions to customers, not plumbing.</span></span>

<span data-ttu-id="b16c2-113">Výpočetní prostředí bez serveru používá pro hostování služeb nestavové kontejnery s událostmi.</span><span class="sxs-lookup"><span data-stu-id="b16c2-113">Serverless computing uses event-triggered stateless containers to host your services.</span></span> <span data-ttu-id="b16c2-114">Můžou škálovat a v závislosti na potřebě požadavků.</span><span class="sxs-lookup"><span data-stu-id="b16c2-114">They can scale out and in to meet demand as-needed.</span></span> <span data-ttu-id="b16c2-115">Platformy bez serveru, jako je Azure Functions, mají úzkou integraci s dalšími službami Azure, jako jsou fronty, události a úložiště.</span><span class="sxs-lookup"><span data-stu-id="b16c2-115">Serverless platforms like Azure Functions have tight integration with other Azure services like queues, events, and storage.</span></span>

## <a name="what-challenges-are-solved-by-serverless"></a><span data-ttu-id="b16c2-116">Jaké problémy řeší bez serveru?</span><span class="sxs-lookup"><span data-stu-id="b16c2-116">What challenges are solved by serverless?</span></span>

<span data-ttu-id="b16c2-117">Platformy bez serveru řeší mnoho časově náročných a nákladných otázek:</span><span class="sxs-lookup"><span data-stu-id="b16c2-117">Serverless platforms address many time-consuming and expensive concerns:</span></span>

- <span data-ttu-id="b16c2-118">Nákup počítačů a licencí softwaru</span><span class="sxs-lookup"><span data-stu-id="b16c2-118">Purchasing machines and software licenses</span></span>
- <span data-ttu-id="b16c2-119">Ubytování, zabezpečení, konfigurace a údržba počítačů a jejich požadavků na síť, výkon a/C</span><span class="sxs-lookup"><span data-stu-id="b16c2-119">Housing, securing, configuring, and maintaining the machines and their networking, power, and A/C requirements</span></span>
- <span data-ttu-id="b16c2-120">Opravy a upgrade operačních systémů a softwaru</span><span class="sxs-lookup"><span data-stu-id="b16c2-120">Patching and upgrading operating systems and software</span></span>
- <span data-ttu-id="b16c2-121">Konfigurace webových serverů nebo služeb počítače pro hostování aplikačního softwaru</span><span class="sxs-lookup"><span data-stu-id="b16c2-121">Configuring web servers or machine services to host application software</span></span>
- <span data-ttu-id="b16c2-122">Konfigurace aplikačního softwaru v rámci své platformy</span><span class="sxs-lookup"><span data-stu-id="b16c2-122">Configuring application software within its platform</span></span>

<span data-ttu-id="b16c2-123">Mnoho společností přiděluje velké rozpočty na podporu týkající se hardwarové infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="b16c2-123">Many companies allocate large budgets to support hardware infrastructure concerns.</span></span> <span data-ttu-id="b16c2-124">Přechod do cloudu může snížit náklady. posunutí aplikací na bez serveru může přispět k jejich odstranění.</span><span class="sxs-lookup"><span data-stu-id="b16c2-124">Moving to the cloud can help reduce these costs; shifting applications to serverless can help eliminate them.</span></span>

## <a name="what-is-the-difference-between-a-microservice-and-a-serverless-function"></a><span data-ttu-id="b16c2-125">Jaký je rozdíl mezi mikroslužbou a funkcí bez serveru?</span><span class="sxs-lookup"><span data-stu-id="b16c2-125">What is the difference between a microservice and a serverless function?</span></span>

<span data-ttu-id="b16c2-126">Mikroslužba obvykle zapouzdřuje obchodní schopnost, jako je například nákupní košík pro online web elektronického obchodování.</span><span class="sxs-lookup"><span data-stu-id="b16c2-126">Typically, a microservice encapsulates a business capability, such as a shopping cart for an online eCommerce site.</span></span> <span data-ttu-id="b16c2-127">Zpřístupňuje více operací, které umožní uživateli spravovat své možnosti nákupu.</span><span class="sxs-lookup"><span data-stu-id="b16c2-127">It exposes multiple operations that enable a user to manage their shopping experience.</span></span> <span data-ttu-id="b16c2-128">Funkce je však malý, odlehčený blok kódu, který spouští operace s jedním účelem v reakci na událost.</span><span class="sxs-lookup"><span data-stu-id="b16c2-128">A function, however, is a small, lightweight block of code that executes a single-purpose operation in response to an event.</span></span>
<span data-ttu-id="b16c2-129">Mikroslužby jsou obvykle vytvořené tak, aby reagovaly na žádosti, často z rozhraní.</span><span class="sxs-lookup"><span data-stu-id="b16c2-129">Microservices are typically constructed to respond to requests, often from an interface.</span></span> <span data-ttu-id="b16c2-130">Požadavky mohou být založené na protokolu HTTP REST nebo gRPC.</span><span class="sxs-lookup"><span data-stu-id="b16c2-130">Requests can be HTTP Rest- or gRPC-based.</span></span> <span data-ttu-id="b16c2-131">Služby bez serveru reagují na události.</span><span class="sxs-lookup"><span data-stu-id="b16c2-131">Serverless services respond to events.</span></span> <span data-ttu-id="b16c2-132">Jeho architektura řízená událostmi je ideální pro zpracování krátkodobě spuštěných úloh na pozadí.</span><span class="sxs-lookup"><span data-stu-id="b16c2-132">Its event-driven architecture is ideal for processing short-running, background tasks.</span></span>

## <a name="what-scenarios-are-appropriate-for-serverless"></a><span data-ttu-id="b16c2-133">Jaké scénáře jsou vhodné pro bez serveru?</span><span class="sxs-lookup"><span data-stu-id="b16c2-133">What scenarios are appropriate for serverless?</span></span>

<span data-ttu-id="b16c2-134">Bez serveru zveřejňuje jednotlivé krátkodobé běžící funkce, které jsou vyvolány v reakci na Trigger.</span><span class="sxs-lookup"><span data-stu-id="b16c2-134">Serverless exposes individual short-running functions that are invoked in response to a trigger.</span></span> <span data-ttu-id="b16c2-135">Díky tomu jsou ideální pro zpracování úloh na pozadí.</span><span class="sxs-lookup"><span data-stu-id="b16c2-135">This makes them ideal for processing background tasks.</span></span>

<span data-ttu-id="b16c2-136">Aplikace může potřebovat poslat e-mail jako krok v pracovním postupu.</span><span class="sxs-lookup"><span data-stu-id="b16c2-136">An application might need to send an email as a step in a workflow.</span></span> <span data-ttu-id="b16c2-137">Místo odeslání oznámení v rámci žádosti mikroslužeb umístěte podrobnosti zprávy do fronty.</span><span class="sxs-lookup"><span data-stu-id="b16c2-137">Instead of sending the notification as part of a microservice request, place the message details onto a queue.</span></span> <span data-ttu-id="b16c2-138">Funkce Azure může vyřadit zprávu do fronty a asynchronně odeslat e-mail.</span><span class="sxs-lookup"><span data-stu-id="b16c2-138">An Azure Function can dequeue the message and asynchronously send the email.</span></span> <span data-ttu-id="b16c2-139">To by mohlo zlepšit výkon a škálovatelnost mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="b16c2-139">Doing so could improve the performance and scalability of the microservice.</span></span> <span data-ttu-id="b16c2-140">[Vyrovnávání zátěže založené na frontách](https://docs.microsoft.com/azure/architecture/patterns/queue-based-load-leveling) se dá implementovat, aby nedocházelo k problémům při posílání e-mailů.</span><span class="sxs-lookup"><span data-stu-id="b16c2-140">[Queue-based load leveling](https://docs.microsoft.com/azure/architecture/patterns/queue-based-load-leveling) can be implemented to avoid bottlenecks related to sending the emails.</span></span> <span data-ttu-id="b16c2-141">Tato samostatná služba se navíc dá znovu použít jako nástroj pro celou řadu různých aplikací.</span><span class="sxs-lookup"><span data-stu-id="b16c2-141">Additionally, this stand-alone service could be reused as a utility across many different applications.</span></span>

<span data-ttu-id="b16c2-142">Asynchronní zasílání zpráv z front a témat je běžným vzorem pro aktivaci funkcí bez serveru.</span><span class="sxs-lookup"><span data-stu-id="b16c2-142">Asynchronous messaging from queues and topics is a common pattern to trigger serverless functions.</span></span> <span data-ttu-id="b16c2-143">Azure Functions se ale můžou aktivovat jinými událostmi, jako jsou třeba změny v Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="b16c2-143">However, Azure Functions can be triggered by other events, such as changes to Azure Blob Storage.</span></span> <span data-ttu-id="b16c2-144">Služba, která podporuje nahrávání imagí, může mít za účelem optimalizace velikosti obrázku zodpovědnost funkce Azure.</span><span class="sxs-lookup"><span data-stu-id="b16c2-144">A service that supports image uploads could have an Azure Function responsible for optimizing the image size.</span></span> <span data-ttu-id="b16c2-145">Funkci lze aktivovat přímo vložením do služby Azure Blob Storage, což zachovává složitost operací mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="b16c2-145">The function could be triggered directly by inserts into Azure Blob Storage, keeping complexity out of the microservice operations.</span></span>

<span data-ttu-id="b16c2-146">Mnohé služby mají dlouhotrvající procesy v rámci svých pracovních postupů.</span><span class="sxs-lookup"><span data-stu-id="b16c2-146">Many services have long-running processes as part of their workflows.</span></span> <span data-ttu-id="b16c2-147">Tyto úlohy jsou často prováděny v rámci interakce uživatele s aplikací.</span><span class="sxs-lookup"><span data-stu-id="b16c2-147">Often these tasks are done as part of the user's interaction with the application.</span></span> <span data-ttu-id="b16c2-148">Tyto úlohy můžou vynutit, aby uživatel čekal a negativně ovlivnil své zkušenosti.</span><span class="sxs-lookup"><span data-stu-id="b16c2-148">These tasks can force the user to wait, negatively impacting their experience.</span></span> <span data-ttu-id="b16c2-149">Computing bez serveru poskytuje skvělý způsob, jak přesunout pomalejší úlohy mimo smyčku interakce uživatele.</span><span class="sxs-lookup"><span data-stu-id="b16c2-149">Serverless computing provides a great way to move slower tasks outside of the user interaction loop.</span></span> <span data-ttu-id="b16c2-150">Tyto úlohy se můžou škálovat na vyžádání bez nutnosti škálovat celou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="b16c2-150">These tasks can scale with demand without requiring the entire application to scale.</span></span>

## <a name="when-should-you-avoid-serverless"></a><span data-ttu-id="b16c2-151">Kdy byste se měli vyhnout bez serveru?</span><span class="sxs-lookup"><span data-stu-id="b16c2-151">When should you avoid serverless?</span></span>

<span data-ttu-id="b16c2-152">Řešení bez serveru jsou zajišťována a škálovatelná na vyžádání.</span><span class="sxs-lookup"><span data-stu-id="b16c2-152">Serverless solutions provision and scale on demand.</span></span> <span data-ttu-id="b16c2-153">Při vyvolání nové instance se jedná o běžný problém Starter.</span><span class="sxs-lookup"><span data-stu-id="b16c2-153">When a new instance is invoked, cold starts are a common issue.</span></span> <span data-ttu-id="b16c2-154">Studené zahájení je doba potřebná k zajištění této instance.</span><span class="sxs-lookup"><span data-stu-id="b16c2-154">A cold start is the period of time it takes to provision this instance.</span></span> <span data-ttu-id="b16c2-155">Obvykle může tato prodleva trvat několik sekund, ale může to trvat v závislosti na různých faktorech.</span><span class="sxs-lookup"><span data-stu-id="b16c2-155">Normally, this delay might be a few seconds, but can be longer depending on various factors.</span></span> <span data-ttu-id="b16c2-156">Po zřízení se jedna instance udržuje jako aktivní, dokud obdrží pravidelné požadavky.</span><span class="sxs-lookup"><span data-stu-id="b16c2-156">Once provisioned, a single instance is kept alive as long as it receives periodic requests.</span></span> <span data-ttu-id="b16c2-157">Pokud je však služba volána méně často, může ji Azure odstranit z paměti a při vyvolání vyžadovat studenou spouštěcí službu.</span><span class="sxs-lookup"><span data-stu-id="b16c2-157">But, if a service is called less frequently, Azure may remove it from memory and require a cold start when reinvoked.</span></span> <span data-ttu-id="b16c2-158">V případě, že se funkce škáluje na novou instanci, jsou také vyžadovány studené starty.</span><span class="sxs-lookup"><span data-stu-id="b16c2-158">Cold starts are also required when a function scales out to a new instance.</span></span>

<span data-ttu-id="b16c2-159">Obrázek 3-10 ukazuje vzorek pro studený start.</span><span class="sxs-lookup"><span data-stu-id="b16c2-159">Figure 3-10 shows a cold-start pattern.</span></span> <span data-ttu-id="b16c2-160">Všimněte si dalších kroků, které jsou potřeba, když je aplikace studená.</span><span class="sxs-lookup"><span data-stu-id="b16c2-160">Note the extra steps required when the app is cold.</span></span>

<span data-ttu-id="b16c2-161">![Studená vs.](./media/cold-start-warm-start.png)
počáteční**Obrázek 3-10**.</span><span class="sxs-lookup"><span data-stu-id="b16c2-161">![Cold versus warm start](./media/cold-start-warm-start.png)
**Figure 3-10**.</span></span> <span data-ttu-id="b16c2-162">Studené zahájení vs. začátek</span><span class="sxs-lookup"><span data-stu-id="b16c2-162">Cold start versus warm start.</span></span>

<span data-ttu-id="b16c2-163">Aby nedocházelo k úplnému startu, můžete přepnout z [plánu spotřeby na vyhrazený plán](https://azure.microsoft.com/blog/understanding-serverless-cold-start/).</span><span class="sxs-lookup"><span data-stu-id="b16c2-163">To avoid cold starts entirely, you might switch from a [consumption plan to a dedicated plan](https://azure.microsoft.com/blog/understanding-serverless-cold-start/).</span></span> <span data-ttu-id="b16c2-164">Můžete také nakonfigurovat jednu nebo více předem zavedených [instancí](https://docs.microsoft.com/azure/azure-functions/functions-premium-plan#pre-warmed-instances) s upgradem plánu Premium.</span><span class="sxs-lookup"><span data-stu-id="b16c2-164">You can also configure one or more [pre-warmed instances](https://docs.microsoft.com/azure/azure-functions/functions-premium-plan#pre-warmed-instances) with the premium plan upgrade.</span></span> <span data-ttu-id="b16c2-165">V takových případech, pokud potřebujete přidat jinou instanci, je už na cestách a připraveno k použití.</span><span class="sxs-lookup"><span data-stu-id="b16c2-165">In these cases, when you need to add another instance, it's already up and ready to go.</span></span> <span data-ttu-id="b16c2-166">Tyto možnosti mohou přispět ke zmírnění potíží s studeným startem souvisejícím s výpočetním prostředím bez serveru.</span><span class="sxs-lookup"><span data-stu-id="b16c2-166">These options can help mitigate the cold start issue associated with serverless computing.</span></span>

<span data-ttu-id="b16c2-167">Poskytovatelé cloudových služeb se účtují za servery bez serveru založeného na době provádění výpočetního prostředí a spotřebované paměti.</span><span class="sxs-lookup"><span data-stu-id="b16c2-167">Cloud providers bill for serverless based on compute execution time and consumed memory.</span></span> <span data-ttu-id="b16c2-168">Dlouho běžící operace nebo úlohy s vysokou spotřebou paměti nejsou vždy nejlepšími kandidáty pro bez serveru.</span><span class="sxs-lookup"><span data-stu-id="b16c2-168">Long running operations or high memory consumption workloads aren't always the best candidates for serverless.</span></span> <span data-ttu-id="b16c2-169">Funkce bez serveru přidává malým blokům práce, které je možné rychle dokončit.</span><span class="sxs-lookup"><span data-stu-id="b16c2-169">Serverless functions favor small chunks of work that can complete quickly.</span></span> <span data-ttu-id="b16c2-170">Většina platforem bez serveru vyžaduje, aby se jednotlivé funkce dokončily během několika minut.</span><span class="sxs-lookup"><span data-stu-id="b16c2-170">Most serverless platforms require individual functions to complete within a few minutes.</span></span> <span data-ttu-id="b16c2-171">Azure Functions výchozí doba trvání 5 minut, která se dá nakonfigurovat až na 10 minut.</span><span class="sxs-lookup"><span data-stu-id="b16c2-171">Azure Functions defaults to a 5-minute time-out duration, which can be configured up to 10 minutes.</span></span> <span data-ttu-id="b16c2-172">Plán Azure Functions Premium může zmírnit tento problém taky, což je výchozí časové limity na 30 minut s neomezeným vyšším limitem, který se dá nakonfigurovat.</span><span class="sxs-lookup"><span data-stu-id="b16c2-172">The Azure Functions premium plan can mitigate this issue as well, defaulting time-outs to 30 minutes with an unbounded higher limit that can be configured.</span></span> <span data-ttu-id="b16c2-173">Výpočetní čas není kalendářní čas.</span><span class="sxs-lookup"><span data-stu-id="b16c2-173">Compute time isn't calendar time.</span></span> <span data-ttu-id="b16c2-174">Pokročilejší funkce využívající [Azure Durable Functions Framework](https://docs.microsoft.com/azure/azure-functions/durable/durable-functions-overview?tabs=csharp) můžou pozastavit provádění v průběhu několika dnů.</span><span class="sxs-lookup"><span data-stu-id="b16c2-174">More advanced functions using the [Azure Durable Functions framework](https://docs.microsoft.com/azure/azure-functions/durable/durable-functions-overview?tabs=csharp) may pause execution over a course of several days.</span></span> <span data-ttu-id="b16c2-175">Fakturace vychází z skutečné doby spuštění – když se funkce probudí a pokračuje ve zpracování.</span><span class="sxs-lookup"><span data-stu-id="b16c2-175">The billing is based on actual execution time - when the function wakes up and resumes processing.</span></span>

<span data-ttu-id="b16c2-176">A konečně využití Azure Functions pro úlohy aplikace přináší složitost.</span><span class="sxs-lookup"><span data-stu-id="b16c2-176">Finally, leveraging Azure Functions for application tasks adds complexity.</span></span> <span data-ttu-id="b16c2-177">Je vhodné nejdřív navrhnout svou aplikaci s modulárním, volně vázaným návrhem.</span><span class="sxs-lookup"><span data-stu-id="b16c2-177">It's wise to first architect your application with a modular, loosely coupled design.</span></span> <span data-ttu-id="b16c2-178">Pak zjistíte, jestli neexistují výhody serveru, které budou mít větší složitost.</span><span class="sxs-lookup"><span data-stu-id="b16c2-178">Then, identify if there are benefits serverless would offer that justify the additional complexity.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="b16c2-179">[Předchozí](leverage-containers-orchestrators.md)
>[Další](combine-containers-serverless-approaches.md)</span><span class="sxs-lookup"><span data-stu-id="b16c2-179">[Previous](leverage-containers-orchestrators.md)
[Next](combine-containers-serverless-approaches.md)</span></span>
