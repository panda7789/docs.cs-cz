---
title: REST a gRPC
description: Přečtěte si o gRPC, její roli v cloudových nativních aplikacích a o tom, jak se liší od protokolu HTTP REST.
author: robvet
ms.date: 09/08/2019
ms.openlocfilehash: 80960a9042b1514fb78e7a8c993a1854067407e8
ms.sourcegitcommit: 14ad34f7c4564ee0f009acb8bfc0ea7af3bc9541
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/01/2019
ms.locfileid: "73417132"
---
# <a name="rest-and-grpc"></a><span data-ttu-id="84a29-103">REST a gRPC</span><span class="sxs-lookup"><span data-stu-id="84a29-103">REST and gRPC</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="84a29-104">V této knize jsme se zaměřili na komunikaci na [bázi REST](https://docs.microsoft.com/azure/architecture/best-practices/api-design) .</span><span class="sxs-lookup"><span data-stu-id="84a29-104">So far in this book, we’ve focused on [REST-based](https://docs.microsoft.com/azure/architecture/best-practices/api-design) communication.</span></span> <span data-ttu-id="84a29-105">REST je styl architektury, který podporuje interoperabilitu mezi distribuovanými počítačovým systémem.</span><span class="sxs-lookup"><span data-stu-id="84a29-105">REST is an architectural style that promotes interoperability between distributed computer systems.</span></span> <span data-ttu-id="84a29-106">Používá model požadavků a odpovědí, ve kterém každá odpověď ze serveru na požadavek od klienta.</span><span class="sxs-lookup"><span data-stu-id="84a29-106">It uses a request/response model where every response from the server is to a request from the client.</span></span> <span data-ttu-id="84a29-107">V širokém oblíbeným se KLIDně nehodí pro všechny problémy.</span><span class="sxs-lookup"><span data-stu-id="84a29-107">While widely popular, REST isn't a perfect fit for every problem.</span></span> <span data-ttu-id="84a29-108">Novější komunikační technologie, která je oprávněná gRPC, rychle získává oblíbenou a dává se způsobem do cloudového nativního světa.</span><span class="sxs-lookup"><span data-stu-id="84a29-108">A newer communication technology, entitled gRPC, is rapidly gaining popularity and making its way into the cloud-native world.</span></span>

## <a name="grpc"></a><span data-ttu-id="84a29-109">gRPC</span><span class="sxs-lookup"><span data-stu-id="84a29-109">gRPC</span></span>

<span data-ttu-id="84a29-110">gRPC je open source komunikace pocházející z Google.</span><span class="sxs-lookup"><span data-stu-id="84a29-110">gRPC is an open-source communication that originates from Google.</span></span> <span data-ttu-id="84a29-111">Je postavená na modelu [vzdáleného volání procedur (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) , který je oblíbený v distribuovaném výpočetním prostředí.</span><span class="sxs-lookup"><span data-stu-id="84a29-111">It's built upon the [remote procedure call (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) model, popular in distributed computing.</span></span> <span data-ttu-id="84a29-112">Po provedení tohoto modelu zveřejňuje místní klientský program metodu, která provádí operaci.</span><span class="sxs-lookup"><span data-stu-id="84a29-112">Following this model, a local client program exposes an in-process method to execute an operation.</span></span> <span data-ttu-id="84a29-113">Na pozadí se toto volání vyvolá v rámci distribuované sítě mimo proces.</span><span class="sxs-lookup"><span data-stu-id="84a29-113">Behind the scenes, that call is invoked on an out-of-process microservice across a distributed network.</span></span> <span data-ttu-id="84a29-114">Vývojář kód operace jako místní volání procedury.</span><span class="sxs-lookup"><span data-stu-id="84a29-114">The developer codes the operation as a local procedure call.</span></span> <span data-ttu-id="84a29-115">Základní platforma vyabstrakce síťovou komunikaci, serializaci a spuštění sítě Point-to-Point.</span><span class="sxs-lookup"><span data-stu-id="84a29-115">The underlying platform abstracts the point-to-point networking communication, serialization, and execution.</span></span>

<span data-ttu-id="84a29-116">gRPC je moderní architektura RPC, která je odlehčená a vysoce výkonná.</span><span class="sxs-lookup"><span data-stu-id="84a29-116">gRPC is a modern RPC framework that is lightweight and highly performant.</span></span> <span data-ttu-id="84a29-117">Pro svůj transportní protokol používá protokol HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="84a29-117">It uses HTTP/2 for its transport protocol.</span></span> <span data-ttu-id="84a29-118">I když je kompatibilní s HTTP 1,1, funkce HTTP/2 nabízí mnoho pokročilých možností:</span><span class="sxs-lookup"><span data-stu-id="84a29-118">While compatible with HTTP 1.1, HTTP/2 features many advanced capabilities:</span></span>

- <span data-ttu-id="84a29-119">I když HTTP 1,1 posílá data jako nešifrovaný text, HTTP/2 je binární protokol.</span><span class="sxs-lookup"><span data-stu-id="84a29-119">While HTTP 1.1 sends data as clear text, HTTP/2 is a binary protocol.</span></span> <span data-ttu-id="84a29-120">Analyzuje data rychleji pomocí méně paměti, snižuje latenci sítě se souvisejícími vylepšeními rychlosti a efektivněji spravuje síťové prostředky.</span><span class="sxs-lookup"><span data-stu-id="84a29-120">It parses data faster using less memory, reduces network latency with the related improvements to speed, and manages network resources more efficiently.</span></span>
- <span data-ttu-id="84a29-121">I když je protokol HTTP 1,1 omezený na zpracování jednoho požadavku nebo odpovědi na operaci round-trip v čase, protokol HTTP/2 podporuje multiplexování nebo více paralelních požadavků přes stejné připojení.</span><span class="sxs-lookup"><span data-stu-id="84a29-121">While HTTP 1.1 is limited to processing one round-trip request/response at a time, HTTP/2 supports multiplexing, or multiple parallel requests over the same connection.</span></span>
- <span data-ttu-id="84a29-122">HTTP/2 podporuje plně duplexní nebo obousměrnou komunikaci, kde oba klienti i servery můžou komunikovat současně.</span><span class="sxs-lookup"><span data-stu-id="84a29-122">HTTP/2 supports full-duplex, or bidirectional communication, where both client and server and can communicate at the same time.</span></span> <span data-ttu-id="84a29-123">Klient může odesílat data žádosti současně se serverem, který odesílá data odpovědi zpět.</span><span class="sxs-lookup"><span data-stu-id="84a29-123">The client can be uploading request data at the same time the server is sending back response data.</span></span>
- <span data-ttu-id="84a29-124">Streamování je integrované do HTTP/2, což znamená, že požadavky i odpovědi můžou asynchronně streamovat velké datové sady.</span><span class="sxs-lookup"><span data-stu-id="84a29-124">Streaming is built into HTTP/2 meaning that both requests and responses can asynchronously stream large data sets.</span></span>
- <span data-ttu-id="84a29-125">V kombinaci gRPC a HTTP/2 se výrazně zvyšuje výkon.</span><span class="sxs-lookup"><span data-stu-id="84a29-125">Combining gRPC and HTTP/2, performance dramatically increases.</span></span> <span data-ttu-id="84a29-126">V [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) agilním výkon gRPC a překračuje rychlost a efektivitu [vazeb NetTcp](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span><span class="sxs-lookup"><span data-stu-id="84a29-126">In [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) parlance, gRPC performance meets and exceeds the speed and efficiency of [NetTCP bindings](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span></span> <span data-ttu-id="84a29-127">Ale na rozdíl od NetTCP se gRPC neomezuje na jazyky Microsoftu, jako je C# nebo VB.NET.</span><span class="sxs-lookup"><span data-stu-id="84a29-127">However, unlike NetTCP, gRPC isn't constrained to Microsoft languages such as C# or VB.NET.</span></span>

<span data-ttu-id="84a29-128">gRPC se podporuje na nejoblíbenějších platformách, včetně jazyků C#Java,, golang a NodeJS.</span><span class="sxs-lookup"><span data-stu-id="84a29-128">gRPC is supported across most popular platforms, including Java, C#, Golang, and NodeJS.</span></span>

## <a name="protocol-buffers"></a><span data-ttu-id="84a29-129">Vyrovnávací paměti protokolů</span><span class="sxs-lookup"><span data-stu-id="84a29-129">Protocol Buffers</span></span>

<span data-ttu-id="84a29-130">gRPC zahrnuje další Open Source technologii s názvem [vyrovnávací paměti protokolu](https://developers.google.com/protocol-buffers/docs/overview) nebo zprávy Protobuf pro odesílání a příjem dat.</span><span class="sxs-lookup"><span data-stu-id="84a29-130">gRPC embraces another open-source technology called [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview) or Protobuf messages to send and receive data.</span></span> <span data-ttu-id="84a29-131">Podobně jako u [kontraktu dat WCF](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/using-data-contracts)Protobuf serializovat strukturovaná data pro systémy ke čtení a zápisu.</span><span class="sxs-lookup"><span data-stu-id="84a29-131">Similar to a [WCF Data Contract](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/using-data-contracts), Protobuf serializes structured data for systems to read and write.</span></span> <span data-ttu-id="84a29-132">Snižuje režijní náklady, které uživatelsky čitelné formáty, jako je například XML nebo JSON.</span><span class="sxs-lookup"><span data-stu-id="84a29-132">It reduces the overhead that human-readable formats like XML or JSON incur.</span></span>

<span data-ttu-id="84a29-133">Mnoho technik serializace objektů odráží napříč strukturou datových objektů v době běhu.</span><span class="sxs-lookup"><span data-stu-id="84a29-133">Many object serialization techniques reflect across the structure of data objects at run-time.</span></span> <span data-ttu-id="84a29-134">Protobuf vyžaduje, abyste definovali strukturu předem s jazykem nezávislá (jazyk vyrovnávací paměti protokolu).</span><span class="sxs-lookup"><span data-stu-id="84a29-134">Protobuf requires you to define the structure up front with a platform-agnostic language (Protocol Buffer Language).</span></span> <span data-ttu-id="84a29-135">Každá definice je uložená v souboru. proto.</span><span class="sxs-lookup"><span data-stu-id="84a29-135">Each definition is stored in a ".proto" file.</span></span> <span data-ttu-id="84a29-136">Pak pomocí kompilátoru Protobuf "Proton" vygenerujete kód klienta a serveru pro libovolnou z podporovaných platforem.</span><span class="sxs-lookup"><span data-stu-id="84a29-136">Then using Protobuf compiler, "Proton," you generate client and server code for any of the supported platforms.</span></span> <span data-ttu-id="84a29-137">Vygenerovaný kód je optimalizován pro rychlou serializaci/deserializaci dat.</span><span class="sxs-lookup"><span data-stu-id="84a29-137">The generated code is optimized for fast serialization/deserialization of data.</span></span> <span data-ttu-id="84a29-138">V době běhu jsou jednotlivé zprávy zabaleny do kontraktu služby silného typu a serializovány ve standardní reprezentaci Protobuf.</span><span class="sxs-lookup"><span data-stu-id="84a29-138">At runtime, each message is wrapped in the strongly-typed service contract and serialized in a standard Protobuf representation.</span></span>

## <a name="grpc-support-in-net"></a><span data-ttu-id="84a29-139">Podpora gRPC v .NET</span><span class="sxs-lookup"><span data-stu-id="84a29-139">gRPC support in .NET</span></span>

<span data-ttu-id="84a29-140">Rozhraní Microsoft .NET Core Framework 3,0 zahrnuje nástroje a nativní podporu pro gRPC.</span><span class="sxs-lookup"><span data-stu-id="84a29-140">The Microsoft .NET Core framework 3.0 includes tooling and native support for gRPC.</span></span> <span data-ttu-id="84a29-141">Obrázek 4-20 ukazuje šablonu sady Visual Studio 2019, která generuje gRPC projekt kostry pro službu gRPC.</span><span class="sxs-lookup"><span data-stu-id="84a29-141">Figure 4-20 shows the Visual Studio 2019 template that scaffolds a gRPC skeleton project for a gRPC service.</span></span> <span data-ttu-id="84a29-142">Všimněte si, jak .NET Core podporuje platformy Windows, Linux a macOS.</span><span class="sxs-lookup"><span data-stu-id="84a29-142">Note how .NET Core supports the Windows, Linux, and macOS platforms.</span></span>

![Podpora gRPC v aplikaci Visual Studio 2019](./media/visual-studio-2019-grpc-template.png)

<span data-ttu-id="84a29-144">**Obrázek 4-20**.</span><span class="sxs-lookup"><span data-stu-id="84a29-144">**Figure 4-20**.</span></span> <span data-ttu-id="84a29-145">Podpora gRPC v aplikaci Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="84a29-145">gRPC support in Visual Studio 2019</span></span>

<span data-ttu-id="84a29-146">.NET Core 3,0 bez problémů integruje gRPC do své architektury, včetně směrování koncových bodů, integrované podpory IoC a protokolování.</span><span class="sxs-lookup"><span data-stu-id="84a29-146">.NET Core 3.0 seamlessly integrates gRPC into its framework, including endpoint routing, built-in IoC support, and logging.</span></span> <span data-ttu-id="84a29-147">Open source webový server Kestrel plně podporuje připojení HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="84a29-147">The open-source Kestrel web server fully supports HTTP/2 connections.</span></span>

<span data-ttu-id="84a29-148">Obrázek 4-21 ukazuje strukturu služby gRPC ve Visual Studiu 2019.</span><span class="sxs-lookup"><span data-stu-id="84a29-148">Figure 4-21 shows structure of a gRPC service in Visual Studio 2019.</span></span> <span data-ttu-id="84a29-149">Všimněte si, jak struktura složek zahrnuje složky pro soubory a kód služby.</span><span class="sxs-lookup"><span data-stu-id="84a29-149">Note how the folder structure includes folders for the proto files and service code.</span></span>

![projekt gRPC v aplikaci Visual Studio 2019](./media/grpc-project.png  )

<span data-ttu-id="84a29-151">**Obrázek 4-21**.</span><span class="sxs-lookup"><span data-stu-id="84a29-151">**Figure 4-21**.</span></span> <span data-ttu-id="84a29-152">projekt gRPC v aplikaci Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="84a29-152">gRPC project in Visual Studio 2019</span></span>

## <a name="grpc-usage"></a><span data-ttu-id="84a29-153">Využití gRPC</span><span class="sxs-lookup"><span data-stu-id="84a29-153">gRPC Usage</span></span>

<span data-ttu-id="84a29-154">gRPC je vhodný pro následující scénáře:</span><span class="sxs-lookup"><span data-stu-id="84a29-154">gRPC is well suited for the following scenarios:</span></span>

- <span data-ttu-id="84a29-155">Nízká latence a komunikace s vysokou propustností.</span><span class="sxs-lookup"><span data-stu-id="84a29-155">Low latency and high throughput communication.</span></span> <span data-ttu-id="84a29-156">gRPC je ideální pro odlehčené mikroslužby, kde je efektivita nejdůležitější.</span><span class="sxs-lookup"><span data-stu-id="84a29-156">gRPC is great for lightweight microservices where efficiency is critical.</span></span>
- <span data-ttu-id="84a29-157">Komunikace v reálném čase Point-to-Point.</span><span class="sxs-lookup"><span data-stu-id="84a29-157">Point-to-point real-time communication.</span></span> <span data-ttu-id="84a29-158">gRPC má skvělou podporu pro obousměrné streamování.</span><span class="sxs-lookup"><span data-stu-id="84a29-158">gRPC has excellent support for bi-directional streaming.</span></span> <span data-ttu-id="84a29-159">služby gRPC mohou nabízet zprávy v reálném čase bez cyklického dotazování.</span><span class="sxs-lookup"><span data-stu-id="84a29-159">gRPC services can push messages in real time without polling.</span></span>
- <span data-ttu-id="84a29-160">Polyglot prostředí – Nástroj pro gRPC podporuje většinu oblíbených vývojových jazyků, takže pro prostředí s více jazyky je vhodná volba.</span><span class="sxs-lookup"><span data-stu-id="84a29-160">Polyglot environments – gRPC tooling supports most popular development languages, making it a good choice for multi-language environments.</span></span>
- <span data-ttu-id="84a29-161">Omezená prostředí sítě – zprávy gRPC jsou serializovány pomocí Protobuf, což je odlehčený formát zprávy.</span><span class="sxs-lookup"><span data-stu-id="84a29-161">Network constrained environments – gRPC messages are serialized with Protobuf, a lightweight message format.</span></span> <span data-ttu-id="84a29-162">Zpráva gRPC je vždy menší než ekvivalentní zpráva JSON.</span><span class="sxs-lookup"><span data-stu-id="84a29-162">A gRPC message is always smaller than an equivalent JSON message.</span></span>

<span data-ttu-id="84a29-163">V době psaní této knihy mají většina prohlížečů omezené podpory pro gRPC.</span><span class="sxs-lookup"><span data-stu-id="84a29-163">At the time of writing of this book, most browsers have limited support for gRPC.</span></span> <span data-ttu-id="84a29-164">gRPC intenzivně používá funkce HTTP/2 a bez prohlížeče poskytuje úroveň řízení požadovaná pro webové požadavky na podporu klienta gRPC.</span><span class="sxs-lookup"><span data-stu-id="84a29-164">gRPC heavily uses HTTP/2 features and no browser provides the level of control required over web requests to support a gRPC client.</span></span> <span data-ttu-id="84a29-165">gRPC se obvykle používá pro interní mikroslužby pro komunikaci mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="84a29-165">gRPC is typically used for internal microservice to microservice communication.</span></span> <span data-ttu-id="84a29-166">Obrázek 4-22 ukazuje jednoduchý, ale běžný vzor použití.</span><span class="sxs-lookup"><span data-stu-id="84a29-166">Figure 4-22 shows a simple, but common usage pattern.</span></span>

![Vzorce používání gRPC](./media/grpc-usage.png)

<span data-ttu-id="84a29-168">**Obrázek 4-22**.</span><span class="sxs-lookup"><span data-stu-id="84a29-168">**Figure 4-22**.</span></span> <span data-ttu-id="84a29-169">vzorce používání gRPC</span><span class="sxs-lookup"><span data-stu-id="84a29-169">gRPC usage patterns</span></span>

<span data-ttu-id="84a29-170">Všimněte si, že předchozí obrázek je vyvolán front-end přenosem pomocí protokolu HTTP, zatímco mikroslužba back-end používá gRPC.</span><span class="sxs-lookup"><span data-stu-id="84a29-170">Note in the previous figure how front-end traffic is invoked with HTTP while back-end microservice to microservice uses gRPC.</span></span>

<span data-ttu-id="84a29-171">GRPC se může hrát významnou roli v dethroning dominantnímu postavení REST pro nativní cloudové systémy.</span><span class="sxs-lookup"><span data-stu-id="84a29-171">Looking ahead, gRPC could play a major role in dethroning the dominance of REST for cloud-native systems.</span></span> <span data-ttu-id="84a29-172">Výhody výkonu a snadné vývoje jsou příliš dobré.</span><span class="sxs-lookup"><span data-stu-id="84a29-172">The performance benefits and ease of development are too good to pass up.</span></span> <span data-ttu-id="84a29-173">Bez jakýchkoli chyb však bude klid stále delší dobu trvat.</span><span class="sxs-lookup"><span data-stu-id="84a29-173">However, make no mistake, REST will still be around for a long time.</span></span> <span data-ttu-id="84a29-174">Stále jsou v Excelu pro veřejně vystavená rozhraní API a z důvodů zpětné kompatibility.</span><span class="sxs-lookup"><span data-stu-id="84a29-174">It still excels for publicly exposed APIs and for backward compatibility reasons.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="84a29-175">[Předchozí](service-to-service-communication.md)
>[Další](service-mesh-communication-infrastructure.md)</span><span class="sxs-lookup"><span data-stu-id="84a29-175">[Previous](service-to-service-communication.md)
[Next](service-mesh-communication-infrastructure.md)</span></span>
