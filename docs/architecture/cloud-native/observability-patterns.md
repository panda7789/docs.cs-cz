---
title: Vzory pozorovatelnosti
description: Vzory pozorování pro cloudové nativní aplikace
ms.date: 05/13/2020
ms.openlocfilehash: db6a56358923025cbcca9478908474227e5da96d
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/19/2020
ms.locfileid: "83613808"
---
# <a name="observability-patterns"></a><span data-ttu-id="2ba86-103">Vzory pozorovatelnosti</span><span class="sxs-lookup"><span data-stu-id="2ba86-103">Observability patterns</span></span>

<span data-ttu-id="2ba86-104">Stejně jako byly vyvinuty vzory pro podporu v rozložení kódu v aplikacích, existují vzory pro operační aplikace spolehlivě.</span><span class="sxs-lookup"><span data-stu-id="2ba86-104">Just as patterns have been developed to aid in the layout of code in applications, there are patterns for operating applications in a reliable way.</span></span> <span data-ttu-id="2ba86-105">Existují tři užitečné vzory pro údržbu aplikací: **protokolování**, **monitorování**a **výstrahy**.</span><span class="sxs-lookup"><span data-stu-id="2ba86-105">Three useful patterns in maintaining applications have emerged: **logging**, **monitoring**, and **alerts**.</span></span>

## <a name="when-to-use-logging"></a><span data-ttu-id="2ba86-106">Kdy použít protokolování</span><span class="sxs-lookup"><span data-stu-id="2ba86-106">When to use logging</span></span>

<span data-ttu-id="2ba86-107">Bez ohledu na to, jak opatrní, se aplikace téměř vždy chovají neočekávaným způsobem v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="2ba86-107">No matter how careful we are, applications almost always behave in unexpected ways in production.</span></span> <span data-ttu-id="2ba86-108">Když uživatelé nahlásí problémy s aplikací, je velmi užitečné, abyste mohli zjistit, co se v aplikaci v případě problému stalo.</span><span class="sxs-lookup"><span data-stu-id="2ba86-108">When users report problems with an application, it's extremely useful to be able to see what was going on with the app when the problem occurred.</span></span> <span data-ttu-id="2ba86-109">Jedním z nejpravděpodobnějších a pravdivých způsobů, jak zachytit informace o tom, co aplikace provádí během chodu, je nechat aplikaci zapisovat, co dělá.</span><span class="sxs-lookup"><span data-stu-id="2ba86-109">One of the most tried and true ways of capturing information about what an application is doing while it's running is to have the application write down what it's doing.</span></span> <span data-ttu-id="2ba86-110">Tento proces se označuje jako protokolování.</span><span class="sxs-lookup"><span data-stu-id="2ba86-110">This process is known as logging.</span></span> <span data-ttu-id="2ba86-111">V době, kdy dojde k selhání nebo k problémům v produkčním prostředí, by měl být cílem reprodukce podmínek, za kterých došlo k selhání, v neprodukčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="2ba86-111">Any time failures or problems occur in production, the goal should be to reproduce the conditions under which the failures occurred, in a non-production environment.</span></span> <span data-ttu-id="2ba86-112">Po vhodném přihlášení poskytuje vývojářům plán, jak postupovat v prostředí, které lze testovat a experimentovat s.</span><span class="sxs-lookup"><span data-stu-id="2ba86-112">Having good logging in place provides a roadmap for developers to follow in order to duplicate problems in an environment that can be tested and experimented with.</span></span>

### <a name="challenges-when-logging-with-cloud-native-applications"></a><span data-ttu-id="2ba86-113">Problémy při protokolování s využitím nativních aplikací cloudu</span><span class="sxs-lookup"><span data-stu-id="2ba86-113">Challenges when logging with cloud-native applications</span></span>

<span data-ttu-id="2ba86-114">V tradičních aplikacích se soubory protokolu obvykle ukládají na místním počítači.</span><span class="sxs-lookup"><span data-stu-id="2ba86-114">In traditional applications, log files are typically stored on the local machine.</span></span> <span data-ttu-id="2ba86-115">Ve skutečnosti v operačních systémech, které používají systém UNIX, je definována struktura složek, která bude obsahovat všechny protokoly, obvykle v části `/var/log` .</span><span class="sxs-lookup"><span data-stu-id="2ba86-115">In fact, on Unix-like operating systems, there's a folder structure defined to hold any logs, typically under `/var/log`.</span></span>

<span data-ttu-id="2ba86-116">![Protokolování do souboru v aplikaci ](./media/single-monolith-logging.png)
 monolitické **Obrázek 7-1**.</span><span class="sxs-lookup"><span data-stu-id="2ba86-116">![Logging to a file in a monolithic app.](./media/single-monolith-logging.png)
**Figure 7-1**.</span></span> <span data-ttu-id="2ba86-117">Protokolování do souboru v aplikaci monolitické</span><span class="sxs-lookup"><span data-stu-id="2ba86-117">Logging to a file in a monolithic app.</span></span>

<span data-ttu-id="2ba86-118">Užitečnost protokolování do plochého souboru na jednom počítači se výrazně snižuje v cloudovém prostředí.</span><span class="sxs-lookup"><span data-stu-id="2ba86-118">The usefulness of logging to a flat file on a single machine is vastly reduced in a cloud environment.</span></span> <span data-ttu-id="2ba86-119">Aplikace vytvářející protokoly nemusí mít přístup k místnímu disku nebo je místní disk vysoce přechodný, protože kontejnery jsou v rámci fyzických počítačů přemísťování.</span><span class="sxs-lookup"><span data-stu-id="2ba86-119">Applications producing logs may not have access to the local disk or the local disk may be highly transient as containers are shuffled around physical machines.</span></span> <span data-ttu-id="2ba86-120">I jednoduché škálování aplikací monolitické napříč více uzly může zjednodušit vyhledání příslušného souboru protokolu založeného na souborech.</span><span class="sxs-lookup"><span data-stu-id="2ba86-120">Even simple scaling up of monolithic applications across multiple nodes can make it challenging to locate the appropriate file-based log file.</span></span>

<span data-ttu-id="2ba86-121">![Protokolování do souborů v aplikaci monolitické s měřítkem. ](./media/multiple-node-monolith-logging.png)
 **Obrázek 7-2**.</span><span class="sxs-lookup"><span data-stu-id="2ba86-121">![Logging to files in a scaled monolithic app.](./media/multiple-node-monolith-logging.png)
**Figure 7-2**.</span></span> <span data-ttu-id="2ba86-122">Protokolování do souborů v aplikaci monolitické s měřítkem.</span><span class="sxs-lookup"><span data-stu-id="2ba86-122">Logging to files in a scaled monolithic app.</span></span>

<span data-ttu-id="2ba86-123">Nativní aplikace v cloudu vyvinuté pomocí architektury mikroslužeb také představují problémy pro protokolovací soubory založené na souborech.</span><span class="sxs-lookup"><span data-stu-id="2ba86-123">Cloud-native applications developed using a microservices architecture also pose some challenges for file-based loggers.</span></span> <span data-ttu-id="2ba86-124">Žádosti uživatelů teď můžou zahrnovat několik služeb, které běží na různých počítačích a můžou zahrnovat funkce bez serveru bez přístupu k místnímu systému souborů.</span><span class="sxs-lookup"><span data-stu-id="2ba86-124">User requests may now span multiple services that are run on different machines and may include serverless functions with no access to a local file system at all.</span></span> <span data-ttu-id="2ba86-125">V rámci těchto mnoha služeb a počítačů by bylo velmi náročné korelovat protokoly od uživatele nebo relace.</span><span class="sxs-lookup"><span data-stu-id="2ba86-125">It would be very challenging to correlate the logs from a user or a session across these many services and machines.</span></span>

<span data-ttu-id="2ba86-126">![Protokolování do místních souborů v aplikaci mikroslužeb. ](./media/local-log-file-per-service.png)
 **Obrázek 7-3**.</span><span class="sxs-lookup"><span data-stu-id="2ba86-126">![Logging to local files in a microservices app.](./media/local-log-file-per-service.png)
**Figure 7-3**.</span></span> <span data-ttu-id="2ba86-127">Protokolování do místních souborů v aplikaci mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="2ba86-127">Logging to local files in a microservices app.</span></span>

<span data-ttu-id="2ba86-128">Nakonec je velký počet uživatelů v některých aplikacích nativních pro Cloud.</span><span class="sxs-lookup"><span data-stu-id="2ba86-128">Finally, the number of users in some cloud-native applications is high.</span></span> <span data-ttu-id="2ba86-129">Představte si, že každý uživatel při přihlášení k aplikaci vygeneruje stovky řádků protokolu.</span><span class="sxs-lookup"><span data-stu-id="2ba86-129">Imagine that each user generates a hundred lines of log messages when they log into an application.</span></span> <span data-ttu-id="2ba86-130">V izolaci, která je spravovatelná, ale vynásobte to více než 100 000 uživatelů a objem protokolů je dostatečně velký, aby byly k dispozici specializované nástroje pro podporu efektivního používání protokolů.</span><span class="sxs-lookup"><span data-stu-id="2ba86-130">In isolation, that is manageable, but multiply that over 100,000 users and the volume of logs becomes large enough that specialized tools are needed to support effective use of the logs.</span></span>

### <a name="logging-in-cloud-native-applications"></a><span data-ttu-id="2ba86-131">Protokolování v cloudových nativních aplikacích</span><span class="sxs-lookup"><span data-stu-id="2ba86-131">Logging in cloud-native applications</span></span>

<span data-ttu-id="2ba86-132">U každého programovacího jazyka jsou k dispozici nástroje, které umožňují zápis protokolů, a obvykle jsou režie pro zápis těchto protokolů nízká.</span><span class="sxs-lookup"><span data-stu-id="2ba86-132">Every programming language has tooling that permits writing logs, and typically the overhead for writing these logs is low.</span></span> <span data-ttu-id="2ba86-133">Mnohé z knihoven protokolování poskytují protokolování různých druhů závažnosti, které mohou být vyladěny v době běhu.</span><span class="sxs-lookup"><span data-stu-id="2ba86-133">Many of the logging libraries provide logging different kinds of criticalities, which can be tuned at run time.</span></span> <span data-ttu-id="2ba86-134">Například [Knihovna Serilog](https://serilog.net/) je oblíbená strukturovaná knihovna protokolování pro .NET, která poskytuje následující úrovně protokolování:</span><span class="sxs-lookup"><span data-stu-id="2ba86-134">For instance, the [Serilog library](https://serilog.net/) is a popular structured logging library for .NET that provides the following logging levels:</span></span>

* <span data-ttu-id="2ba86-135">Verbose</span><span class="sxs-lookup"><span data-stu-id="2ba86-135">Verbose</span></span>
* <span data-ttu-id="2ba86-136">Ladit</span><span class="sxs-lookup"><span data-stu-id="2ba86-136">Debug</span></span>
* <span data-ttu-id="2ba86-137">Informace</span><span class="sxs-lookup"><span data-stu-id="2ba86-137">Information</span></span>
* <span data-ttu-id="2ba86-138">Upozornění</span><span class="sxs-lookup"><span data-stu-id="2ba86-138">Warning</span></span>
* <span data-ttu-id="2ba86-139">Chyba</span><span class="sxs-lookup"><span data-stu-id="2ba86-139">Error</span></span>
* <span data-ttu-id="2ba86-140">Závažná</span><span class="sxs-lookup"><span data-stu-id="2ba86-140">Fatal</span></span>

<span data-ttu-id="2ba86-141">Tyto různé úrovně protokolu poskytují v protokolování členitost.</span><span class="sxs-lookup"><span data-stu-id="2ba86-141">These different log levels provide granularity in logging.</span></span> <span data-ttu-id="2ba86-142">Když aplikace funguje v produkčním prostředí správně, může být nakonfigurována pouze k protokolování důležitých zpráv.</span><span class="sxs-lookup"><span data-stu-id="2ba86-142">When the application is functioning properly in production, it may be configured to only log important messages.</span></span> <span data-ttu-id="2ba86-143">Pokud se aplikace nechová, je možné zvýšit úroveň protokolu, aby se shromáždily podrobnější protokoly.</span><span class="sxs-lookup"><span data-stu-id="2ba86-143">When the application is misbehaving, then the log level can be increased so more verbose logs are gathered.</span></span> <span data-ttu-id="2ba86-144">To vyvažuje výkon proti snadnému ladění.</span><span class="sxs-lookup"><span data-stu-id="2ba86-144">This balances performance against ease of debugging.</span></span>

<span data-ttu-id="2ba86-145">Vysoký výkon nástrojů protokolování a tunability podrobností by měl vývojářům přizvat k častému protokolování.</span><span class="sxs-lookup"><span data-stu-id="2ba86-145">The high performance of logging tools and the tunability of verbosity should encourage developers to log frequently.</span></span> <span data-ttu-id="2ba86-146">Řada upřednostňuje vzor protokolování vstupu a ukončení jednotlivých metod.</span><span class="sxs-lookup"><span data-stu-id="2ba86-146">Many favor a pattern of logging the entry and exit of each method.</span></span> <span data-ttu-id="2ba86-147">Tento přístup může být podobný jako přehnaně důkladné, ale je nečastější, že vývojáři budou chtít snížit protokolování.</span><span class="sxs-lookup"><span data-stu-id="2ba86-147">This approach may sound like overkill, but it's infrequent that developers will wish for less logging.</span></span> <span data-ttu-id="2ba86-148">Ve skutečnosti není Neběžné provádět nasazení pouze pro účely přidávání protokolování do problematické metody.</span><span class="sxs-lookup"><span data-stu-id="2ba86-148">In fact, it's not uncommon to perform deployments for the sole purpose of adding logging around a problematic method.</span></span> <span data-ttu-id="2ba86-149">Chyba na straně příliš velkého množství protokolování a není příliš malá.</span><span class="sxs-lookup"><span data-stu-id="2ba86-149">Err on the side of too much logging and not on too little.</span></span> <span data-ttu-id="2ba86-150">Některé nástroje lze použít k automatickému poskytnutí tohoto typu protokolování.</span><span class="sxs-lookup"><span data-stu-id="2ba86-150">Some tools can be used to automatically provide this kind of logging.</span></span>

<span data-ttu-id="2ba86-151">Z důvodu problémů spojených s používáním protokolů založených na souborech v cloudových nativních aplikacích jsou upřednostňovány centralizované protokoly.</span><span class="sxs-lookup"><span data-stu-id="2ba86-151">Because of the challenges associated with using file-based logs in cloud-native apps, centralized logs are preferred.</span></span> <span data-ttu-id="2ba86-152">Protokoly jsou shromažďovány aplikacemi a dodávány do centrální protokolovací aplikace, která indexuje a ukládá protokoly.</span><span class="sxs-lookup"><span data-stu-id="2ba86-152">Logs are collected by the applications and shipped to a central logging application which indexes and stores the logs.</span></span> <span data-ttu-id="2ba86-153">Tato třída systému může každý den ingestovat desítky gigabajtů protokolů.</span><span class="sxs-lookup"><span data-stu-id="2ba86-153">This class of system can ingest tens of gigabytes of logs every day.</span></span>

<span data-ttu-id="2ba86-154">Při sestavování protokolování, které zahrnuje mnoho služeb, je také užitečné dodržovat některé standardní postupy.</span><span class="sxs-lookup"><span data-stu-id="2ba86-154">It's also helpful to follow some standard practices when building logging that spans many services.</span></span> <span data-ttu-id="2ba86-155">Například generování [ID korelace](https://blog.rapid7.com/2016/12/23/the-value-of-correlation-ids/) na začátku zdlouhavé interakce a jejich protokolování v každé zprávě, která souvisí s touto interakcí, usnadňuje hledání všech souvisejících zpráv.</span><span class="sxs-lookup"><span data-stu-id="2ba86-155">For instance, generating a [correlation ID](https://blog.rapid7.com/2016/12/23/the-value-of-correlation-ids/) at the start of a lengthy interaction, and then logging it in each message that is related to that interaction, makes it easier to search for all related messages.</span></span> <span data-ttu-id="2ba86-156">Jedna zpráva potřebuje najít jenom jednu zprávu a extrahovat ID korelace a najít všechny související zprávy.</span><span class="sxs-lookup"><span data-stu-id="2ba86-156">One need only find a single message and extract the correlation ID to find all the related messages.</span></span> <span data-ttu-id="2ba86-157">Dalším příkladem je zajistěte, aby byl formát protokolu pro každou službu stejný, bez ohledu na to, jaký jazyk nebo knihovna protokolů používá.</span><span class="sxs-lookup"><span data-stu-id="2ba86-157">Another example is ensuring that the log format is the same for every service, whatever the language or logging library it uses.</span></span> <span data-ttu-id="2ba86-158">Díky této standardizaci je čtení protokolů mnohem jednodušší.</span><span class="sxs-lookup"><span data-stu-id="2ba86-158">This standardization makes reading logs much easier.</span></span> <span data-ttu-id="2ba86-159">Obrázek 7-4 ukazuje, jak může architektura mikroslužeb využít centralizované protokolování v rámci svého pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="2ba86-159">Figure 7-4 demonstrates how a microservices architecture can leverage centralized logging as part of its workflow.</span></span>

<span data-ttu-id="2ba86-160">![Protokoly z různých zdrojů se ingestují do centralizovaného úložiště protokolů. ](./media/centralized-logging.png)
 **Obrázek 7-4**.</span><span class="sxs-lookup"><span data-stu-id="2ba86-160">![Logs from various sources are ingested into a centralized log store.](./media/centralized-logging.png)
**Figure 7-4**.</span></span> <span data-ttu-id="2ba86-161">Protokoly z různých zdrojů se ingestují do centralizovaného úložiště protokolů.</span><span class="sxs-lookup"><span data-stu-id="2ba86-161">Logs from various sources are ingested into a centralized log store.</span></span>

## <a name="challenges-with-detecting-and-responding-to-potential-app-health-issues"></a><span data-ttu-id="2ba86-162">Výzvy k detekci a reakci na potenciální problémy s kompatibilitou stavu aplikací</span><span class="sxs-lookup"><span data-stu-id="2ba86-162">Challenges with detecting and responding to potential app health issues</span></span>

<span data-ttu-id="2ba86-163">Některé aplikace nejsou klíčové.</span><span class="sxs-lookup"><span data-stu-id="2ba86-163">Some applications aren't mission critical.</span></span> <span data-ttu-id="2ba86-164">Je možné, že se používají jenom interně, a když dojde k problému, může uživatel kontaktovat odpovědného týmu a aplikace se může restartovat.</span><span class="sxs-lookup"><span data-stu-id="2ba86-164">Maybe they're only used internally, and when a problem occurs, the user can contact the team responsible and the application can be restarted.</span></span> <span data-ttu-id="2ba86-165">Zákazníci ale mají často větší očekávání pro aplikace, které spotřebovávají.</span><span class="sxs-lookup"><span data-stu-id="2ba86-165">However, customers often have higher expectations for the applications they consume.</span></span> <span data-ttu-id="2ba86-166">Měli byste vědět, kdy k problémům dochází ve vaší aplikaci *předtím, než* se uživatelé dostanou.</span><span class="sxs-lookup"><span data-stu-id="2ba86-166">You should know when problems occur with your application *before* users do, or before users notify you.</span></span> <span data-ttu-id="2ba86-167">V opačném případě se může stát, že když si všimnete, že Angry Deluge příspěvky sociálních médií do vaší aplikace nebo dokonce vaší organizace, může to být první, co víte o problému.</span><span class="sxs-lookup"><span data-stu-id="2ba86-167">Otherwise, the first you know about a problem may be when you notice an angry deluge of social media posts deriding your application or even your organization.</span></span>

<span data-ttu-id="2ba86-168">Mezi scénáře, které možná budete potřebovat vzít v úvahu, patří:</span><span class="sxs-lookup"><span data-stu-id="2ba86-168">Some scenarios you may need to consider include:</span></span>

- <span data-ttu-id="2ba86-169">Jedna služba ve vaší aplikaci zajišťuje neúspěšné a restartování, což vede k občasné pomalé odezvy.</span><span class="sxs-lookup"><span data-stu-id="2ba86-169">One service in your application keeps failing and restarting, resulting in intermittent slow responses.</span></span>
- <span data-ttu-id="2ba86-170">Čas odezvy vaší aplikace je v určitou dobu pomalý.</span><span class="sxs-lookup"><span data-stu-id="2ba86-170">At some times of the day, your application's response time is slow.</span></span>
- <span data-ttu-id="2ba86-171">Po nedávném nasazení je zatížení databáze trojnásobné.</span><span class="sxs-lookup"><span data-stu-id="2ba86-171">After a recent deployment, load on the database has tripled.</span></span>

<span data-ttu-id="2ba86-172">Při správné implementaci vám monitorování může informovat o podmínkách, které vedou k problémům, a zajistit tak splnění základních podmínek, které budou mít za následek značný dopad na uživatele.</span><span class="sxs-lookup"><span data-stu-id="2ba86-172">Implemented properly, monitoring can let you know about conditions that will lead to problems, letting you address underlying conditions before they result in any significant user impact.</span></span>

### <a name="monitoring-cloud-native-apps"></a><span data-ttu-id="2ba86-173">Monitorování nativních aplikací v cloudu</span><span class="sxs-lookup"><span data-stu-id="2ba86-173">Monitoring cloud-native apps</span></span>

<span data-ttu-id="2ba86-174">Některé centralizované systémy protokolování přijímají další roli shromažďování telemetrie mimo čistých protokolů.</span><span class="sxs-lookup"><span data-stu-id="2ba86-174">Some centralized logging systems take on an additional role of collecting telemetry outside of pure logs.</span></span> <span data-ttu-id="2ba86-175">Můžou shromažďovat metriky, jako je čas pro spuštění databázového dotazu, Průměrná doba odezvy z webového serveru a dokonce i průměr zatížení procesoru a tlak na paměť, který je hlášený operačním systémem.</span><span class="sxs-lookup"><span data-stu-id="2ba86-175">They can collect metrics, such as time to run a database query, average response time from a web server, and even CPU load averages and memory pressure as reported by the operating system.</span></span> <span data-ttu-id="2ba86-176">V kombinaci s protokoly můžou tyto systémy poskytovat holistický zobrazení stavu uzlů v systému a aplikace jako celku.</span><span class="sxs-lookup"><span data-stu-id="2ba86-176">In conjunction with the logs, these systems can provide a holistic view of the health of nodes in the system and the application as a whole.</span></span>

<span data-ttu-id="2ba86-177">Funkce shromažďování metriky, které jsou v rámci aplikace pro monitorování metriky, je také možné v aplikaci ručně doplňovat.</span><span class="sxs-lookup"><span data-stu-id="2ba86-177">The metric-gathering capabilities of the monitoring tools can also be fed manually from within the application.</span></span> <span data-ttu-id="2ba86-178">Obchodní toky, které mají zvláštní význam, jako jsou například noví uživatelé registrace nebo objednávky, mohou být instrumentované tak, že zvýší čítač v centrálním monitorovacím systému.</span><span class="sxs-lookup"><span data-stu-id="2ba86-178">Business flows that are of particular interest such as new users signing up or orders being placed, may be instrumented such that they increment a counter in the central monitoring system.</span></span> <span data-ttu-id="2ba86-179">To odemkne nástroje pro monitorování, aby nesledovaly jenom stav aplikace, ale i stav podniku.</span><span class="sxs-lookup"><span data-stu-id="2ba86-179">This unlocks the monitoring tools to not only monitor the health of the application but the health of the business.</span></span>

<span data-ttu-id="2ba86-180">Dotazy se dají vytvořit v nástrojích pro agregaci protokolů a vyhledat konkrétní statistiky nebo vzory, které se pak dají zobrazit v grafickém formuláři, na vlastních řídicích panelech.</span><span class="sxs-lookup"><span data-stu-id="2ba86-180">Queries can be constructed in the log aggregation tools to look for certain statistics or patterns, which can then be displayed in graphical form, on custom dashboards.</span></span> <span data-ttu-id="2ba86-181">Týmy budou často investovat do rozsáhlých displejů připojených k stěnám, které se pohybují prostřednictvím statistik vztahujících se k aplikaci.</span><span class="sxs-lookup"><span data-stu-id="2ba86-181">Frequently, teams will invest in large, wall-mounted displays that rotate through the statistics related to an application.</span></span> <span data-ttu-id="2ba86-182">Tímto způsobem je snadné zobrazit problémy tak, jak se vyskytují.</span><span class="sxs-lookup"><span data-stu-id="2ba86-182">This way, it's simple to see the problems as they occur.</span></span>

<span data-ttu-id="2ba86-183">Nástroje pro monitorování nativní pro Cloud poskytují telemetrie v reálném čase a nabízí přehled o aplikacích bez ohledu na to, jestli jsou monolitické aplikace s jedním procesem nebo distribuované architektury mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="2ba86-183">Cloud-native monitoring tools provide real-time telemetry and insight into apps regardless of whether they're single-process monolithic applications or distributed microservice architectures.</span></span> <span data-ttu-id="2ba86-184">Zahrnují nástroje, které umožňují shromažďování dat z aplikace a také nástroje pro dotazování a zobrazování informací o stavu aplikace.</span><span class="sxs-lookup"><span data-stu-id="2ba86-184">They include tools that allow collection of data from the app as well as tools for querying and displaying information about the app's health.</span></span>

## <a name="challenges-with-reacting-to-critical-problems-in-cloud-native-apps"></a><span data-ttu-id="2ba86-185">Problémy s tím, jak reagovat na kritické problémy v cloudových nativních aplikacích</span><span class="sxs-lookup"><span data-stu-id="2ba86-185">Challenges with reacting to critical problems in cloud-native apps</span></span>

<span data-ttu-id="2ba86-186">Pokud potřebujete reagovat na problémy s vaší aplikací, budete potřebovat nějaký způsob, jak upozornit na správné pracovníky.</span><span class="sxs-lookup"><span data-stu-id="2ba86-186">If you need to react to problems with your application, you need some way to alert the right personnel.</span></span> <span data-ttu-id="2ba86-187">Toto je třetí model závislosti aplikace v nativním cloudu a závisí na protokolování a monitorování.</span><span class="sxs-lookup"><span data-stu-id="2ba86-187">This is the third cloud-native application observability pattern and depends on logging and monitoring.</span></span> <span data-ttu-id="2ba86-188">Vaše aplikace musí mít místo přihlášení, aby bylo možné diagnostikovat problémy, a v některých případech předávat do monitorovacích nástrojů.</span><span class="sxs-lookup"><span data-stu-id="2ba86-188">Your application needs to have logging in place to allow problems to be diagnosed, and in some cases to feed into monitoring tools.</span></span> <span data-ttu-id="2ba86-189">Potřebuje monitorovat agregované metriky aplikací a data o stavu na jednom místě.</span><span class="sxs-lookup"><span data-stu-id="2ba86-189">It needs monitoring to aggregate application metrics and health data in one place.</span></span> <span data-ttu-id="2ba86-190">Jakmile je tato operace navázána, je možné vytvořit pravidla, která aktivují výstrahy, když určité metriky přestanou být mimo přijatelné úrovně.</span><span class="sxs-lookup"><span data-stu-id="2ba86-190">Once this has been established, rules can be created that will trigger alerts when certain metrics fall outside of acceptable levels.</span></span>

<span data-ttu-id="2ba86-191">Obecně platí, že výstrahy jsou vrstveny nad monitorováním, aby určité podmínky aktivovaly příslušné výstrahy, aby upozornily členy týmu na naléhavé problémy.</span><span class="sxs-lookup"><span data-stu-id="2ba86-191">Generally, alerts are layered on top of monitoring such that certain conditions trigger appropriate alerts to notify team members of urgent problems.</span></span> <span data-ttu-id="2ba86-192">Mezi scénáře, které mohou vyžadovat výstrahy, patří:</span><span class="sxs-lookup"><span data-stu-id="2ba86-192">Some scenarios that may require alerts include:</span></span>

- <span data-ttu-id="2ba86-193">Jedna ze služeb vaší aplikace po 1 minutách výpadků nereaguje.</span><span class="sxs-lookup"><span data-stu-id="2ba86-193">One of your application's services is not responding after 1 minute of downtime.</span></span>
- <span data-ttu-id="2ba86-194">Vaše aplikace vrací neúspěšné odpovědi HTTP na více než 1% požadavků.</span><span class="sxs-lookup"><span data-stu-id="2ba86-194">Your application is returning unsuccessful HTTP responses to more than 1% of requests.</span></span>
- <span data-ttu-id="2ba86-195">Průměrná doba odezvy vaší aplikace pro klíčové body překračuje 2000 MS.</span><span class="sxs-lookup"><span data-stu-id="2ba86-195">Your application's average response time for key endpoints exceeds 2000 ms.</span></span>

### <a name="alerts-in-cloud-native-apps"></a><span data-ttu-id="2ba86-196">Výstrahy v cloudových nativních aplikacích</span><span class="sxs-lookup"><span data-stu-id="2ba86-196">Alerts in cloud-native apps</span></span>

<span data-ttu-id="2ba86-197">Můžete vytvářet dotazy na nástroje pro monitorování a hledat tak známé stavy selhání.</span><span class="sxs-lookup"><span data-stu-id="2ba86-197">You can craft queries against the monitoring tools to look for known failure conditions.</span></span> <span data-ttu-id="2ba86-198">Dotazy například můžou vyhledat přes příchozí protokoly pro indikaci stavového kódu HTTP 500, což indikuje problém na webovém serveru.</span><span class="sxs-lookup"><span data-stu-id="2ba86-198">For instance, queries could search through the incoming logs for indications of HTTP status code 500, which indicates a problem on a web server.</span></span> <span data-ttu-id="2ba86-199">Jakmile se zjistí jedna z těchto hodnot, může se e-mailem nebo serverem SMS odeslat vlastníkovi původní služby, která může začít prozkoumat.</span><span class="sxs-lookup"><span data-stu-id="2ba86-199">As soon as one of these is detected, then an e-mail or an SMS could be sent to the owner of the originating service who can begin to investigate.</span></span>

<span data-ttu-id="2ba86-200">Obvykle ale jedna chyba 500 není dostačující k určení toho, že došlo k problému.</span><span class="sxs-lookup"><span data-stu-id="2ba86-200">Typically, though, a single 500 error isn't enough to determine that a problem has occurred.</span></span> <span data-ttu-id="2ba86-201">Může to znamenat, že uživatel nesprávně zadal svoje heslo, nebo zadal některá poškozená data.</span><span class="sxs-lookup"><span data-stu-id="2ba86-201">It could mean that a user mistyped their password or entered some malformed data.</span></span> <span data-ttu-id="2ba86-202">Dotazy na upozornění se dají vytvořit tak, aby se aktivovaly jenom v případě, že se zjistí větší než průměrný počet chyb 500.</span><span class="sxs-lookup"><span data-stu-id="2ba86-202">The alert queries can be crafted to only fire when a larger than average number of 500 errors are detected.</span></span>

<span data-ttu-id="2ba86-203">Jedním z nejvíce škodlivých vzorů při upozorňování je vyvolat příliš mnoho výstrah, aby se lidé mohli prozkoumat.</span><span class="sxs-lookup"><span data-stu-id="2ba86-203">One of the most damaging patterns in alerting is to fire too many alerts for humans to investigate.</span></span> <span data-ttu-id="2ba86-204">Vlastníci služby se rychle odeberou na chyby, které byly dříve prověřené a které byly shledány neškodně.</span><span class="sxs-lookup"><span data-stu-id="2ba86-204">Service owners will rapidly become desensitized to errors that they've previously investigated and found to be benign.</span></span> <span data-ttu-id="2ba86-205">Když dojde k skutečným chybám, ztratí se v důsledku výskytu stovky falešně pozitivních hodnot.</span><span class="sxs-lookup"><span data-stu-id="2ba86-205">Then, when true errors occur, they'll be lost in the noise of hundreds of false positives.</span></span> <span data-ttu-id="2ba86-206">Parable pro [Boy, kteří provedli Jillian,](https://en.wikipedia.org/wiki/The_Boy_Who_Cried_Wolf) se často dozvěděli dětem, aby jim upozornili na toto velmi nebezpečné.</span><span class="sxs-lookup"><span data-stu-id="2ba86-206">The parable of the [Boy Who Cried Wolf](https://en.wikipedia.org/wiki/The_Boy_Who_Cried_Wolf) is frequently told to children to warn them of this very danger.</span></span> <span data-ttu-id="2ba86-207">Je důležité zajistit, aby výstrahy, které se aktivují, byly indikativní pro skutečný problém.</span><span class="sxs-lookup"><span data-stu-id="2ba86-207">It's important to ensure that the alerts that do fire are indicative of a real problem.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="2ba86-208">[Předchozí](monitoring-health.md) 
> [Další](logging-with-elastic-stack.md)</span><span class="sxs-lookup"><span data-stu-id="2ba86-208">[Previous](monitoring-health.md)
[Next](logging-with-elastic-stack.md)</span></span>
