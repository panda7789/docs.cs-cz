---
title: Nasazení aplikace eShopOnContainers do Azure
description: Nasazení aplikace eShopOnContainers pomocí služby Azure Kubernetes, Helm a DevSpaces.
ms.date: 06/30/2019
ms.openlocfilehash: 21033cc904dc595193c69f3452ce2522740f8ff6
ms.sourcegitcommit: 55f438d4d00a34b9aca9eedaac3f85590bb11565
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/23/2019
ms.locfileid: "71183271"
---
# <a name="deploying-eshoponcontainers-to-azure"></a><span data-ttu-id="93db2-103">Nasazení aplikace eShopOnContainers do Azure</span><span class="sxs-lookup"><span data-stu-id="93db2-103">Deploying eShopOnContainers to Azure</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="93db2-104">Logiku podporující aplikaci eShopOnContainers může podporovat Azure pomocí nejrůznějších služeb.</span><span class="sxs-lookup"><span data-stu-id="93db2-104">The logic supporting the eShopOnContainers application can be supported by Azure using a variety of services.</span></span> <span data-ttu-id="93db2-105">Doporučený postup je využít Kubernetes pomocí služby Azure Kubernetes Service (AKS).</span><span class="sxs-lookup"><span data-stu-id="93db2-105">The recommended approach is to leverage Kubernetes using Azure Kubernetes Service (AKS).</span></span> <span data-ttu-id="93db2-106">To se dá zkombinovat s nasazením Helm, aby se zajistila jednoduchá opakovaná konfigurace infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="93db2-106">This can be combined with Helm deployment to ensure easily repeated infrastructure configuration.</span></span> <span data-ttu-id="93db2-107">Vývojáři mohou volitelně využít Azure Dev Spaces Kubernetes jako součást jejich procesu vývoje.</span><span class="sxs-lookup"><span data-stu-id="93db2-107">Optionally, developers can leverage Azure Dev Spaces for Kubernetes as part of their development process.</span></span> <span data-ttu-id="93db2-108">Další možností je hostování funkcí aplikace pomocí funkcí bez serveru Azure, jako jsou Azure Functions a Azure Logic Apps.</span><span class="sxs-lookup"><span data-stu-id="93db2-108">Another option is to host the functionality of the app using Azure Serverless features like Azure Functions and Azure Logic Apps.</span></span>

## <a name="azure-kubernetes-service"></a><span data-ttu-id="93db2-109">Azure Kubernetes Service</span><span class="sxs-lookup"><span data-stu-id="93db2-109">Azure Kubernetes Service</span></span>

<span data-ttu-id="93db2-110">Pokud byste chtěli hostovat aplikaci eShopOnContainers ve vlastním clusteru AKS, je prvním krokem vytvoření clusteru.</span><span class="sxs-lookup"><span data-stu-id="93db2-110">If you'd like to host the eShopOnContainers application in your own AKS cluster, the first step is to create your cluster.</span></span> <span data-ttu-id="93db2-111">Můžete to provést pomocí Azure Portal, který vás provede potřebnými kroky, nebo můžete použít Azure CLI, abyste měli jistotu, že v takovém případě povolíte Access Control a směrování na základě rolí (RBAC).</span><span class="sxs-lookup"><span data-stu-id="93db2-111">You can do this using the Azure portal, which will walk you through the required steps, or you can use the Azure CLI, taking care to ensure you enable Role-Based Access Control (RBAC) and application routing when you do so.</span></span> <span data-ttu-id="93db2-112">V dokumentaci k eShopOnContainers najdete postup, který se zabývá vytvořením vlastního clusteru AKS.</span><span class="sxs-lookup"><span data-stu-id="93db2-112">The eShopOnContainers' documentation describes the steps involved in creating your own AKS cluster.</span></span> <span data-ttu-id="93db2-113">Po vytvoření clusteru musíte povolit přístup k řídicímu panelu Kubernetes. v takovém případě byste měli být schopni přejít na řídicí panel Kubernetes a spravovat cluster.</span><span class="sxs-lookup"><span data-stu-id="93db2-113">Once the cluster is created, you must enable access to the Kubernetes dashboard, at which point you should be able to browse to the Kubernetes dashboard to manage the cluster.</span></span>

<span data-ttu-id="93db2-114">Jakmile je cluster vytvořený a nakonfigurovaný, můžete do něj nasadit aplikaci pomocí Helm a pokladny.</span><span class="sxs-lookup"><span data-stu-id="93db2-114">Once the cluster has been created and configured, you can deploy the application to it using Helm and Tiller.</span></span>

## <a name="deploying-to-azure-kubernetes-service-using-helm"></a><span data-ttu-id="93db2-115">Nasazení do služby Azure Kubernetes pomocí Helm</span><span class="sxs-lookup"><span data-stu-id="93db2-115">Deploying to Azure Kubernetes Service using Helm</span></span>

<span data-ttu-id="93db2-116">Základní nasazení na AKS můžou používat vlastní skripty rozhraní příkazového řádku nebo jednoduché soubory nasazení, ale složitější aplikace by měly používat nástroj pro správu závislostí, jako je Helm.</span><span class="sxs-lookup"><span data-stu-id="93db2-116">Basic deployments to AKS may use custom CLI scripts or simple deployment files, but more complex applications should use a dependency management tool like Helm.</span></span> <span data-ttu-id="93db2-117">Helm je udržována v rámci cloudové výpočetní platformy a pomáhá definovat, instalovat a upgradovat Kubernetes aplikace.</span><span class="sxs-lookup"><span data-stu-id="93db2-117">Helm is maintained by the Cloud-native Computing Foundation and helps you define, install, and upgrade Kubernetes applications.</span></span> <span data-ttu-id="93db2-118">Helm se skládá z klienta příkazového řádku, Helm, který používá grafy Helm, a součásti v clusteru.</span><span class="sxs-lookup"><span data-stu-id="93db2-118">Helm is composed of a command-line client, helm, which uses helm charts, and an in-cluster component, Tiller.</span></span> <span data-ttu-id="93db2-119">Grafy Helm používají standardní soubory ve formátu YAML k popisu související sady Kubernetesch prostředků a obvykle jsou společně s aplikací, které popisují.</span><span class="sxs-lookup"><span data-stu-id="93db2-119">Helm Charts use standard YAML-formatted files to describe a related set of Kubernetes resources and are typically versioned alongside the application they describe.</span></span> <span data-ttu-id="93db2-120">Grafy Helm se od jednoduchých po složité v závislosti na požadavcích instalace, které popisují.</span><span class="sxs-lookup"><span data-stu-id="93db2-120">Helm Charts range from simple to complex depending on the requirements of the installation they describe.</span></span>

<span data-ttu-id="93db2-121">Grafy eShopOnContainers Helm najdete ve složce/k8s/Helm.</span><span class="sxs-lookup"><span data-stu-id="93db2-121">You'll find the eShopOnContainers helm charts in the /k8s/helm folder.</span></span> <span data-ttu-id="93db2-122">Obrázek 2-6 ukazuje, jak jsou různé komponenty aplikace uspořádány do struktury složek, kterou používá Helm k definování a správě nasazení.</span><span class="sxs-lookup"><span data-stu-id="93db2-122">Figure 2-6 shows how the different components of the application are organized into a folder structure used by helm to define and managed deployments.</span></span>

<span data-ttu-id="93db2-123">![architektury eShopOnContainers](./media/eshoponcontainers-helm-folder.png)
**obrázek 2-6**.</span><span class="sxs-lookup"><span data-stu-id="93db2-123">![eShopOnContainers Architecture](./media/eshoponcontainers-helm-folder.png)
**Figure 2-6**.</span></span> <span data-ttu-id="93db2-124">Složka Helm eShopOnContainers</span><span class="sxs-lookup"><span data-stu-id="93db2-124">The eShopOnContainers helm folder.</span></span>

<span data-ttu-id="93db2-125">Jednotlivé komponenty jsou nainstalovány pomocí příkazu `helm install`.</span><span class="sxs-lookup"><span data-stu-id="93db2-125">Each individual component is installed using a `helm install` command.</span></span> <span data-ttu-id="93db2-126">Tyto příkazy jsou snadno skriptované a eShopOnContainers poskytuje skript "nasadit vše", který projde různými komponentami a nainstaluje je pomocí příslušných Helm grafů.</span><span class="sxs-lookup"><span data-stu-id="93db2-126">These commands are easily scripted, and eShopOnContainers provides a "deploy all" script that loops through the different components and installs them using their respective helm charts.</span></span> <span data-ttu-id="93db2-127">Výsledkem je opakovaný proces, ve kterém je verze aplikace ve správě zdrojového kódu, kterou může kdokoli v týmu nasadit do clusteru AKS s jedním řádkovým příkazem skriptu.</span><span class="sxs-lookup"><span data-stu-id="93db2-127">The result is a repeatable process, versioned with the application in source control, that anyone on the team can deploy to an AKS cluster with a one-line script command.</span></span> <span data-ttu-id="93db2-128">Zejména v kombinaci s Azure Dev Spaces umožňuje vývojářům snadno diagnostikovat a testovat jejich jednotlivé změny v cloudových nativních aplikacích založených na mikroslužbách.</span><span class="sxs-lookup"><span data-stu-id="93db2-128">Especially when combined with Azure Dev Spaces, this makes it easy for developers to diagnose and test their individual changes to their microservice-based cloud-native apps.</span></span>

## <a name="azure-dev-spaces"></a><span data-ttu-id="93db2-129">Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="93db2-129">Azure Dev Spaces</span></span>

<span data-ttu-id="93db2-130">Azure Dev Spaces pomáhá jednotlivým vývojářům hostovat během vývoje svou vlastní jedinečnou verzi clusterů AKS v Azure.</span><span class="sxs-lookup"><span data-stu-id="93db2-130">Azure Dev Spaces helps individual developers host their own unique version of AKS clusters in Azure during development.</span></span> <span data-ttu-id="93db2-131">To minimalizuje požadavky na místní počítače a umožňuje členům týmu rychle zjistit, jak se jejich změny chovají ve skutečném prostředí AKS.</span><span class="sxs-lookup"><span data-stu-id="93db2-131">This minimizes local machine requirements and allows team members to quickly see how their changes will behave in a real AKS environment.</span></span> <span data-ttu-id="93db2-132">Azure Dev Spaces nabízí rozhraní příkazového řádku, které se vývojářům používá ke správě svých vývojových prostorů a k nasazení v konkrétním podřízeném prostoru pro vývoj podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="93db2-132">Azure Dev Spaces offers a CLI for developers to use to manage their dev spaces and to deploy to a specific child dev space as needed.</span></span> <span data-ttu-id="93db2-133">Na každý podřízený prostor pro vývoj se odkazuje pomocí jedinečné subdomény adresy URL, která umožňuje souběžné nasazení upravených clusterů, aby se jednotliví vývojáři mohli vyhnout konfliktům probíhajících vzájemně pracujících úloh.</span><span class="sxs-lookup"><span data-stu-id="93db2-133">Each child dev space is referenced using a unique URL subdomain, allowing side-by-side deployments of modified clusters so that individual developers can avoid conflicting with each other's work in progress.</span></span> <span data-ttu-id="93db2-134">Na obrázku 2-7 vidíte, jak vývojář Susie nasadil svoji vlastní verzi mikroslužeb kol do svého vývojového prostoru.</span><span class="sxs-lookup"><span data-stu-id="93db2-134">In Figure 2-7 you can see how developer Susie has deployed her own version of the Bikes microservice into her dev space.</span></span> <span data-ttu-id="93db2-135">Potom je možné otestovat své změny pomocí vlastní adresy URL začínající názvem jejího místa (susie.s.dev.myapp.eus.azds.io).</span><span class="sxs-lookup"><span data-stu-id="93db2-135">She's then able to test her changes using a custom URL starting with the name of her space (susie.s.dev.myapp.eus.azds.io).</span></span>

<span data-ttu-id="93db2-136">![architektury eShopOnContainers](./media/azure-devspaces-one.png)
**obrázek 2-7**.</span><span class="sxs-lookup"><span data-stu-id="93db2-136">![eShopOnContainers Architecture](./media/azure-devspaces-one.png)
**Figure 2-7**.</span></span> <span data-ttu-id="93db2-137">Vývojář Susie nasadí svoji vlastní verzi mikroslužby bicyklů a otestuje ji.</span><span class="sxs-lookup"><span data-stu-id="93db2-137">Developer Susie deploys her own version of the Bikes microservice and tests it.</span></span>

<span data-ttu-id="93db2-138">V současné době vývojář Jan přizpůsobuje mikroslužbu rezervací a potřebuje testovat své změny.</span><span class="sxs-lookup"><span data-stu-id="93db2-138">At the same time, developer John is customizing the Reservations microservice and needs to test his changes.</span></span> <span data-ttu-id="93db2-139">Může nasadit své změny do vlastního prostoru pro vývoj bez konfliktu se změnami Susie, jak je znázorněno na obrázku 2-8.</span><span class="sxs-lookup"><span data-stu-id="93db2-139">He's able to deploy his changes to his own dev space without conflicting with Susie's changes as shown in Figure 2-8.</span></span> <span data-ttu-id="93db2-140">Může otestovat své změny pomocí vlastní adresy URL, která má předponu s názvem svého místa (john.s.dev.myapp.eus.azds.io).</span><span class="sxs-lookup"><span data-stu-id="93db2-140">He can test his changes using his own URL which is prefixed with the name of his space (john.s.dev.myapp.eus.azds.io).</span></span>

<span data-ttu-id="93db2-141">![architektury eShopOnContainers](./media/azure-devspaces-two.png)
**obrázek 2-8**.</span><span class="sxs-lookup"><span data-stu-id="93db2-141">![eShopOnContainers Architecture](./media/azure-devspaces-two.png)
**Figure 2-8**.</span></span> <span data-ttu-id="93db2-142">Vývojář Jan nasadí svoji vlastní verzi mikroslužby rezervací a otestuje ji bez konfliktu s ostatními vývojáři.</span><span class="sxs-lookup"><span data-stu-id="93db2-142">Developer John deploys his own version of the Reservations microservice and tests it without conflicting with other developers.</span></span>

<span data-ttu-id="93db2-143">Pomocí Azure Dev Spaces můžou týmy pracovat přímo se AKS a přitom nezávisle měnit, nasazovat a testovat jejich změny.</span><span class="sxs-lookup"><span data-stu-id="93db2-143">Using Azure Dev Spaces, teams can work directly with AKS while independently changing, deploying, and testing their changes.</span></span> <span data-ttu-id="93db2-144">Tento přístup omezuje nutnost samostatných vyhrazených hostovaných prostředí, protože každý vývojář efektivně má své vlastní prostředí AKS.</span><span class="sxs-lookup"><span data-stu-id="93db2-144">This approach reduces the need for separate dedicated hosted environments since every developer effectively has their own AKS environment.</span></span> <span data-ttu-id="93db2-145">Vývojáři mohou pracovat s Azure Dev Spaces pomocí svého rozhraní příkazového řádku nebo spustit aplikaci pro Azure Dev Spaces přímo ze sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="93db2-145">Developers can work with Azure Dev Spaces using its CLI or launch their application to Azure Dev Spaces directly from Visual Studio.</span></span> [<span data-ttu-id="93db2-146">Přečtěte si další informace o tom, jak Azure Dev Spaces fungují a jsou nakonfigurované.</span><span class="sxs-lookup"><span data-stu-id="93db2-146">Learn more about how Azure Dev Spaces works and is configured.</span></span>](https://docs.microsoft.com/azure/dev-spaces/how-dev-spaces-works)

## <a name="azure-functions-and-logic-apps-serverless"></a><span data-ttu-id="93db2-147">Azure Functions a Logic Apps (bez serveru)</span><span class="sxs-lookup"><span data-stu-id="93db2-147">Azure Functions and Logic Apps (Serverless)</span></span>

<span data-ttu-id="93db2-148">Ukázka eShopOnContainers zahrnuje podporu pro sledování online marketingových kampaní.</span><span class="sxs-lookup"><span data-stu-id="93db2-148">The eShopOnContainers sample includes support for tracking online marketing campaigns.</span></span> <span data-ttu-id="93db2-149">Funkce Azure slouží k získání podrobností o marketingové kampani pro dané ID kampaně.</span><span class="sxs-lookup"><span data-stu-id="93db2-149">An Azure Function is used to pull marketing campaign details for a given campaign ID.</span></span> <span data-ttu-id="93db2-150">Místo vytváření kompletní aplikace ASP.NET Core pro tento účel je jeden koncový bod Azure Functions jednodušší a dostatečný.</span><span class="sxs-lookup"><span data-stu-id="93db2-150">Rather than creating a complete ASP.NET Core application for this purpose, a single Azure Function endpoint is simpler and sufficient.</span></span> <span data-ttu-id="93db2-151">Azure Functions mít mnohem jednodušší model sestavování a nasazování než úplné ASP.NET Core aplikace, zejména pokud je nakonfigurované tak, aby běžely v Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="93db2-151">Azure Functions have a much simpler build and deployment model than full ASP.NET Core applications, especially when configured to run in Kubernetes.</span></span> <span data-ttu-id="93db2-152">Nasazení funkce se skriptuje pomocí šablon Azure Resource Manager (ARM) a rozhraní příkazového řádku Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="93db2-152">Deploying the function is scripted using Azure Resource Manager (ARM) templates and the Azure CLI.</span></span> <span data-ttu-id="93db2-153">Tato mikroslužba podrobností o kampani není dostupná pro zákazníka a nemá stejné požadavky jako online obchod, takže je vhodným kandidátem na Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="93db2-153">This campaign details microservice isn't customer-facing and doesn't have the same requirements as the online store, making it a good candidate for Azure Functions.</span></span> <span data-ttu-id="93db2-154">Funkce vyžaduje, aby některá konfigurace fungovala správně, jako jsou data připojovacího řetězce databáze a nastavení obrázku základní identifikátor URI.</span><span class="sxs-lookup"><span data-stu-id="93db2-154">The function requires some configuration to work properly, such as database connection string data and image base URI settings.</span></span> <span data-ttu-id="93db2-155">Azure Functions můžete nakonfigurovat na webu Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="93db2-155">You configure Azure Functions in the Azure Portal.</span></span>

## <a name="references"></a><span data-ttu-id="93db2-156">Reference</span><span class="sxs-lookup"><span data-stu-id="93db2-156">References</span></span>

- <span data-ttu-id="93db2-157">[eShopOnContainers: Vytvoření clusteru Kubernetes v AKS](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Deploy-to-Azure-Kubernetes-Service-(AKS)#create-kubernetes-cluster-in-aks)</span><span class="sxs-lookup"><span data-stu-id="93db2-157">[eShopOnContainers: Create Kubernetes cluster in AKS](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Deploy-to-Azure-Kubernetes-Service-(AKS)#create-kubernetes-cluster-in-aks)</span></span>
- [<span data-ttu-id="93db2-158">eShopOnContainers: Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="93db2-158">eShopOnContainers: Azure Dev Spaces</span></span>](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Azure-Dev-Spaces)
- [<span data-ttu-id="93db2-159">Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="93db2-159">Azure Dev Spaces</span></span>](https://docs.microsoft.com/azure/dev-spaces/about)

>[!div class="step-by-step"]
><span data-ttu-id="93db2-160">[Předchozí](map-eshoponcontainers-azure-services.md)
>[Další](centralized-configuration.md)</span><span class="sxs-lookup"><span data-stu-id="93db2-160">[Previous](map-eshoponcontainers-azure-services.md)
[Next](centralized-configuration.md)</span></span>
