---
title: Kombinování kontejnerů a přístupů bez serveru pro cloudové nativní služby
description: Kombinování kontejnerů a Kubernetes s přístupy bez serveru
ms.date: 04/23/2020
ms.openlocfilehash: fe9e9fd5d07132971d64bc6433a762fb7bd22048
ms.sourcegitcommit: 5988e9a29cedb8757320817deda3c08c6f44a6aa
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/28/2020
ms.locfileid: "82199661"
---
# <a name="combining-containers-and-serverless-approaches"></a><span data-ttu-id="76304-103">Kombinování kontejnerů a bezserverových přístupů</span><span class="sxs-lookup"><span data-stu-id="76304-103">Combining containers and serverless approaches</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="76304-104">Nativní aplikace pro Cloud obvykle implementují služby, které využívají kontejnery a orchestraci.</span><span class="sxs-lookup"><span data-stu-id="76304-104">Cloud-native applications typically implement services leveraging containers and orchestration.</span></span> <span data-ttu-id="76304-105">K dispozici jsou často příležitosti k vystavování některých služeb aplikace jako Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="76304-105">There are often opportunities to expose some of the application's services as Azure Functions.</span></span> <span data-ttu-id="76304-106">V případě nativní aplikace v cloudu nasazené do Kubernetes by ale bylo skvělé využít Azure Functions v rámci této stejné sady nástrojů.</span><span class="sxs-lookup"><span data-stu-id="76304-106">However, with a cloud-native app deployed to Kubernetes, it would be nice to leverage Azure Functions within this same toolset.</span></span> <span data-ttu-id="76304-107">Naštěstí můžete zalamovat Azure Functions uvnitř kontejnerů Docker a nasazovat je pomocí stejných procesů a nástrojů jako zbytek aplikace založené na Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="76304-107">Fortunately, you can wrap Azure Functions inside Docker containers and deploy them using the same processes and tools as the rest of your Kubernetes-based app.</span></span>

## <a name="when-does-it-make-sense-to-use-containers-with-serverless"></a><span data-ttu-id="76304-108">Kdy je vhodné používat kontejnery s bez serveru?</span><span class="sxs-lookup"><span data-stu-id="76304-108">When does it make sense to use containers with serverless?</span></span>

<span data-ttu-id="76304-109">Vaše funkce Azure nemá žádné znalosti o platformě, na které je nasazená.</span><span class="sxs-lookup"><span data-stu-id="76304-109">Your Azure Function has no knowledge of the platform on which it's deployed.</span></span> <span data-ttu-id="76304-110">V některých scénářích můžete mít specifické požadavky a potřebujete přizpůsobit prostředí, na kterém se váš kód funkce spustí.</span><span class="sxs-lookup"><span data-stu-id="76304-110">For some scenarios, you may have specific requirements and need to customize the environment on which your function code will run.</span></span> <span data-ttu-id="76304-111">Budete potřebovat vlastní image, která podporuje závislosti nebo konfiguraci, která není podporovaná výchozím imagí.</span><span class="sxs-lookup"><span data-stu-id="76304-111">You'll need a custom image that supports dependencies or a configuration not supported by the default image.</span></span> <span data-ttu-id="76304-112">V těchto případech má smysl nasadit funkci ve vlastním kontejneru Docker.</span><span class="sxs-lookup"><span data-stu-id="76304-112">In these cases, it makes sense to deploy your function in a custom Docker container.</span></span>

## <a name="when-should-you-avoid-using-containers-with-azure-functions"></a><span data-ttu-id="76304-113">Kdy byste se měli vyhnout použití kontejnerů s Azure Functions?</span><span class="sxs-lookup"><span data-stu-id="76304-113">When should you avoid using containers with Azure Functions?</span></span>

<span data-ttu-id="76304-114">Pokud chcete použít účtování spotřeby, nebudete moci spustit funkci v kontejneru.</span><span class="sxs-lookup"><span data-stu-id="76304-114">If you want to use consumption billing, you won't be able to run your function in a container.</span></span> <span data-ttu-id="76304-115">I když nasadíte funkci do clusteru Kubernetes, už nebudete mít k dispozici integrované škálování, které poskytuje Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="76304-115">What's more, if you deploy your function to a Kubernetes cluster, you'll no longer benefit from the built-in scaling provided by Azure Functions.</span></span> <span data-ttu-id="76304-116">Budete muset použít funkce škálování Kubernetes popsané dříve v této kapitole.</span><span class="sxs-lookup"><span data-stu-id="76304-116">You'll need to use Kubernetes' scaling features, described earlier in this chapter.</span></span>

## <a name="how-to-combine-serverless-and-docker-containers"></a><span data-ttu-id="76304-117">Jak kombinovat kontejnery bez serveru a Docker</span><span class="sxs-lookup"><span data-stu-id="76304-117">How to combine serverless and Docker containers</span></span>

<span data-ttu-id="76304-118">Pokud chcete zabalit funkci Azure do kontejneru Docker, nainstalujte [Azure Functions Core Tools](https://github.com/Azure/azure-functions-core-tools) a pak spusťte následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="76304-118">To wrap an Azure Function in a Docker container, install the [Azure Functions Core Tools](https://github.com/Azure/azure-functions-core-tools) and then run the following command:</span></span>

```console
func init ProjectName --worker-runtime dotnet --docker
```

<span data-ttu-id="76304-119">Když je projekt vytvořen, bude obsahovat souboru Dockerfile a modul runtime Worker nakonfigurovaný na `dotnet`.</span><span class="sxs-lookup"><span data-stu-id="76304-119">When the project is created, it will include a Dockerfile and the worker runtime configured to `dotnet`.</span></span> <span data-ttu-id="76304-120">Nyní můžete funkci vytvořit a otestovat místně.</span><span class="sxs-lookup"><span data-stu-id="76304-120">Now, you can create and test your function locally.</span></span> <span data-ttu-id="76304-121">Sestavte a spusťte pomocí `docker build` příkazů `docker run` a.</span><span class="sxs-lookup"><span data-stu-id="76304-121">Build and run it using the  `docker build` and `docker run` commands.</span></span> <span data-ttu-id="76304-122">Podrobný postup, jak začít sestavovat Azure Functions s podporou Docker, najdete v kurzu [Vytvoření funkce na platformě Linux s využitím vlastního obrázku](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image) .</span><span class="sxs-lookup"><span data-stu-id="76304-122">For detailed steps to get started building Azure Functions with Docker support, see the [Create a function on Linux using a custom image](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image) tutorial.</span></span>

## <a name="how-to-combine-serverless-and-kubernetes-with-keda"></a><span data-ttu-id="76304-123">Jak kombinovat bez serveru a Kubernetes pomocí KEDA</span><span class="sxs-lookup"><span data-stu-id="76304-123">How to combine serverless and Kubernetes with KEDA</span></span>

<span data-ttu-id="76304-124">Služba Azure Functions se automaticky škáluje tak, aby splňovala požadavky na základě frekvence událostí, které cílí na ni.</span><span class="sxs-lookup"><span data-stu-id="76304-124">Azure functions scale automatically to meet demand based on the rate of events that are targeting it.</span></span> <span data-ttu-id="76304-125">Můžete vždycky využít AKS k hostování vašich funkcí a používat automatické škálování založené na událostech založených na Kubernetes nebo KEDA.</span><span class="sxs-lookup"><span data-stu-id="76304-125">You can always leverage AKS to host your functions and use Kubernetes-based Event Driven Autoscaling, or KEDA.</span></span> <span data-ttu-id="76304-126">Když se nevyskytnou žádné události, KEDA může škálovat dolů na nulové instance.</span><span class="sxs-lookup"><span data-stu-id="76304-126">When no events are occurring, KEDA can scale down to zero instances.</span></span> <span data-ttu-id="76304-127">[Přečtěte si další informace o škálování Azure Functions pomocí keda](https://docs.microsoft.com/azure/azure-functions/functions-kubernetes-keda).</span><span class="sxs-lookup"><span data-stu-id="76304-127">[Learn more about scaling Azure functions with KEDA](https://docs.microsoft.com/azure/azure-functions/functions-kubernetes-keda).</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="76304-128">[Předchozí](leverage-serverless-functions.md)
>[Další](deploy-containers-azure.md)</span><span class="sxs-lookup"><span data-stu-id="76304-128">[Previous](leverage-serverless-functions.md)
[Next](deploy-containers-azure.md)</span></span>
