---
title: Využití kontejnerů a orchestrátorů
description: Využití kontejnerů Docker a orchestrace Kubernetes v Azure
ms.date: 05/13/2020
ms.openlocfilehash: 5d0b7f41caecb3422a4416514de2fdd54e94539a
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/19/2020
ms.locfileid: "83613888"
---
# <a name="leveraging-containers-and-orchestrators"></a><span data-ttu-id="16a11-103">Využití kontejnerů a orchestrátorů</span><span class="sxs-lookup"><span data-stu-id="16a11-103">Leveraging containers and orchestrators</span></span>

<span data-ttu-id="16a11-104">Kontejnery a orchestrace jsou navržené tak, aby se vyřešily běžné problémy monolitické nasazení.</span><span class="sxs-lookup"><span data-stu-id="16a11-104">Containers and orchestrators are designed to solve problems common to monolithic deployment approaches.</span></span>

## <a name="challenges-with-monolithic-deployments"></a><span data-ttu-id="16a11-105">Problémy s nasazeními monolitické</span><span class="sxs-lookup"><span data-stu-id="16a11-105">Challenges with monolithic deployments</span></span>

<span data-ttu-id="16a11-106">Většina aplikací je tradičně nasazená jako jediná jednotka.</span><span class="sxs-lookup"><span data-stu-id="16a11-106">Traditionally, most applications have been deployed as a single unit.</span></span> <span data-ttu-id="16a11-107">Takové aplikace jsou označovány jako monolitu.</span><span class="sxs-lookup"><span data-stu-id="16a11-107">Such applications are referred to as a monolith.</span></span> <span data-ttu-id="16a11-108">Tento obecný přístup k nasazení aplikací jako samostatných jednotek i v případě, že se skládají z několika modulů nebo sestavení, se označuje jako monolitické architektura, jak je znázorněno na obrázku 3-1.</span><span class="sxs-lookup"><span data-stu-id="16a11-108">This general approach of deploying applications as single units even if they're composed of multiple modules or assemblies is known as monolithic architecture, as shown in Figure 3-1.</span></span>

![Architektura monolitické](./media/monolithic-design.png)

<span data-ttu-id="16a11-110">**Obrázek 3-1**.</span><span class="sxs-lookup"><span data-stu-id="16a11-110">**Figure 3-1**.</span></span> <span data-ttu-id="16a11-111">Architektura monolitické</span><span class="sxs-lookup"><span data-stu-id="16a11-111">Monolithic architecture.</span></span>

<span data-ttu-id="16a11-112">I když mají výhodu jednoduchosti, monolitické architektury čelí několika problémům:</span><span class="sxs-lookup"><span data-stu-id="16a11-112">Although they have the benefit of simplicity, monolithic architectures face a number of challenges:</span></span>

### <a name="deployment"></a><span data-ttu-id="16a11-113">Nasazení</span><span class="sxs-lookup"><span data-stu-id="16a11-113">Deployment</span></span>

<span data-ttu-id="16a11-114">Aplikace monolitické vyžadují úplné nasazení celé aplikace, a to i v případě, že byla provedena pouze malá změna.</span><span class="sxs-lookup"><span data-stu-id="16a11-114">Monolithic applications require a full deployment of the entire application, even if only a small change has been made.</span></span> <span data-ttu-id="16a11-115">Plná nasazení můžou být náročná a náchylná k chybám.</span><span class="sxs-lookup"><span data-stu-id="16a11-115">Full deployments can be expensive and error prone.</span></span> <span data-ttu-id="16a11-116">Kromě toho vyžadují restart aplikace, který dočasně ovlivňuje nedostupnost.</span><span class="sxs-lookup"><span data-stu-id="16a11-116">Additionally, they require a restart of the application, which temporarily impacts unavailability.</span></span>

### <a name="scaling"></a><span data-ttu-id="16a11-117">Škálování</span><span class="sxs-lookup"><span data-stu-id="16a11-117">Scaling</span></span>

<span data-ttu-id="16a11-118">Aplikace monolitické je hostována výhradně na jedné instanci počítače, která často vyžaduje hardware s vysokou schopností.</span><span class="sxs-lookup"><span data-stu-id="16a11-118">A monolithic application is hosted entirely on a single machine instance, often requiring high-capability hardware.</span></span> <span data-ttu-id="16a11-119">Pokud některá z částí monolitu vyžaduje škálování, je nutné nasadit jinou kopii celé aplikace na jiný počítač.</span><span class="sxs-lookup"><span data-stu-id="16a11-119">If any part of the monolith requires scaling, another copy of the entire application must be deployed to another machine.</span></span> <span data-ttu-id="16a11-120">S monolitu nemůžete škálovat součásti aplikace jednotlivě – je to vše nebo nic.</span><span class="sxs-lookup"><span data-stu-id="16a11-120">With a monolith, you can't scale application components individually - it's all or nothing.</span></span> <span data-ttu-id="16a11-121">Škálování komponent, které nevyžadují škálování, má za následek neefektivní a nákladné využití prostředků.</span><span class="sxs-lookup"><span data-stu-id="16a11-121">Scaling components that don't require scaling results in inefficient and costly resource usage.</span></span>

### <a name="environment"></a><span data-ttu-id="16a11-122">Prostředí</span><span class="sxs-lookup"><span data-stu-id="16a11-122">Environment</span></span>

<span data-ttu-id="16a11-123">Aplikace monolitické jsou obvykle nasazeny do hostitelského prostředí s předem instalovaným operačním systémem, modulem runtime a závislostmi knihoven.</span><span class="sxs-lookup"><span data-stu-id="16a11-123">Monolithic applications are typically deployed to a hosting environment with a pre-installed operating system, runtime, and library dependencies.</span></span> <span data-ttu-id="16a11-124">Toto prostředí se nemusí shodovat s tím, na kterém byla aplikace vyvíjena nebo testována.</span><span class="sxs-lookup"><span data-stu-id="16a11-124">This environment may not match that upon which the application was developed or tested.</span></span> <span data-ttu-id="16a11-125">Nekonzistence v různých prostředích aplikací představují společný zdroj problémů pro nasazení monolitické.</span><span class="sxs-lookup"><span data-stu-id="16a11-125">Inconsistencies across application environments are a common source of problems for monolithic deployments.</span></span>

### <a name="coupling"></a><span data-ttu-id="16a11-126">Potrubí</span><span class="sxs-lookup"><span data-stu-id="16a11-126">Coupling</span></span>

<span data-ttu-id="16a11-127">Aplikace monolitické se může setkat s vysokým propojením napříč jeho funkčními součástmi.</span><span class="sxs-lookup"><span data-stu-id="16a11-127">A monolithic application is likely to experience high coupling across its functional components.</span></span> <span data-ttu-id="16a11-128">Bez tvrdých hranic jsou systémové změny často výsledkem nezamýšleného a nákladného vedlejšího efektu.</span><span class="sxs-lookup"><span data-stu-id="16a11-128">Without hard boundaries, system changes often result in unintended and costly side effects.</span></span> <span data-ttu-id="16a11-129">Nové funkce nebo opravy se stávají podniknout, časově náročné a náročné na implementaci.</span><span class="sxs-lookup"><span data-stu-id="16a11-129">New features/fixes become tricky, time-consuming, and expensive to implement.</span></span> <span data-ttu-id="16a11-130">Aktualizace vyžadují rozsáhlé testování.</span><span class="sxs-lookup"><span data-stu-id="16a11-130">Updates require extensive testing.</span></span> <span data-ttu-id="16a11-131">Spojení také znemožňuje refaktorování součástí nebo jejich prohození v alternativních implementacích.</span><span class="sxs-lookup"><span data-stu-id="16a11-131">Coupling also makes it difficult to refactor components or swap in alternative implementations.</span></span> <span data-ttu-id="16a11-132">I v případě, že je vybudováno přísné oddělení obav, se v rámci architektury architektury architektury nastaví v systému jako základ kódu monolitické, který se nikdy neukončí "speciálními případy".</span><span class="sxs-lookup"><span data-stu-id="16a11-132">Even when constructed with a strict separation of concerns, architectural erosion sets in as the monolithic code base deteriorates with never-ending "special cases."</span></span>

### <a name="platform-lock-in"></a><span data-ttu-id="16a11-133">Zámek platformy</span><span class="sxs-lookup"><span data-stu-id="16a11-133">Platform lock-in</span></span>

<span data-ttu-id="16a11-134">Aplikace monolitické je vytvořená s jedním technologickým zásobníkem.</span><span class="sxs-lookup"><span data-stu-id="16a11-134">A monolithic application is constructed with a single technology stack.</span></span> <span data-ttu-id="16a11-135">I když je nabídka jednotná, může se tento závazek stát překážkou inovace.</span><span class="sxs-lookup"><span data-stu-id="16a11-135">While offering uniformity, this commitment can become a barrier to innovation.</span></span> <span data-ttu-id="16a11-136">Nové funkce a komponenty budou sestaveny pomocí aktuálního zásobníku aplikace – i když lepší volba může být vhodnější pro moderní technologie.</span><span class="sxs-lookup"><span data-stu-id="16a11-136">New features and components will be built using the application's current stack - even when more modern technologies may be a better choice.</span></span> <span data-ttu-id="16a11-137">Dlouhodobé riziko je, že vaše technologie se přestává zastaralá a zastaralá.</span><span class="sxs-lookup"><span data-stu-id="16a11-137">A longer-term risk is your technology stack becoming outdated and obsolete.</span></span> <span data-ttu-id="16a11-138">V rámci architektury celé aplikace na novou, moderní platformu je nejlepší nákladná a riziková.</span><span class="sxs-lookup"><span data-stu-id="16a11-138">Rearchitecting an entire application to a new, more modern platform is at best expensive and risky.</span></span>

## <a name="what-are-the-benefits-of-containers-and-orchestrators"></a><span data-ttu-id="16a11-139">Jaké jsou výhody kontejnerů a orchestrací?</span><span class="sxs-lookup"><span data-stu-id="16a11-139">What are the benefits of containers and orchestrators?</span></span>

<span data-ttu-id="16a11-140">V kapitole 1 jsme zavedli kontejnery.</span><span class="sxs-lookup"><span data-stu-id="16a11-140">We introduced containers in Chapter 1.</span></span> <span data-ttu-id="16a11-141">Zdůraznili jsme, jak CNCF (Cloud Native Computing Foundation) řadí kontejner jako první krok v rámci svých [cloudových nativních map](https://raw.githubusercontent.com/cncf/trailmap/master/CNCF_TrailMap_latest.png) – doprovodné materiály pro podniky, které začínají svoji nativní cloudovou cestu.</span><span class="sxs-lookup"><span data-stu-id="16a11-141">We highlighted how the Cloud Native Computing Foundation (CNCF) ranks containerization as the first step in their [Cloud-Native Trail Map](https://raw.githubusercontent.com/cncf/trailmap/master/CNCF_TrailMap_latest.png) - guidance for enterprises beginning their cloud-native journey.</span></span> <span data-ttu-id="16a11-142">V této části se podíváme na výhody kontejnerů.</span><span class="sxs-lookup"><span data-stu-id="16a11-142">In this section, we discuss the benefits of containers.</span></span>

<span data-ttu-id="16a11-143">Docker je nejoblíbenější platforma pro správu kontejnerů.</span><span class="sxs-lookup"><span data-stu-id="16a11-143">Docker is the most popular container management platform.</span></span> <span data-ttu-id="16a11-144">Pracuje s kontejnery v systému Linux nebo Windows.</span><span class="sxs-lookup"><span data-stu-id="16a11-144">It works with containers on both Linux or Windows.</span></span> <span data-ttu-id="16a11-145">Kontejnery poskytují samostatné, ale reprodukovatelná aplikační prostředí, která se spouštějí stejným způsobem na jakémkoli systému.</span><span class="sxs-lookup"><span data-stu-id="16a11-145">Containers provide separate but reproducible application environments that run the same way on any system.</span></span> <span data-ttu-id="16a11-146">Díky tomuto aspektu jsou ideální pro vývoj a hostování cloudových nativních služeb.</span><span class="sxs-lookup"><span data-stu-id="16a11-146">This aspect makes them perfect for developing and hosting cloud-native services.</span></span> <span data-ttu-id="16a11-147">Kontejnery jsou od sebe izolované.</span><span class="sxs-lookup"><span data-stu-id="16a11-147">Containers are isolated from one another.</span></span> <span data-ttu-id="16a11-148">Dva kontejnery na stejném hostitelském hardwaru můžou mít různé verze softwaru, aniž by to způsobilo konflikty.</span><span class="sxs-lookup"><span data-stu-id="16a11-148">Two containers on the same host hardware can have different versions of software, without causing conflicts.</span></span>

<span data-ttu-id="16a11-149">Kontejnery jsou definovány jednoduchými textovými soubory, které se stanou artefakty projektu a jsou zkontrolovány do správy zdrojového kódu.</span><span class="sxs-lookup"><span data-stu-id="16a11-149">Containers are defined by simple text-based files that become project artifacts and are checked into source control.</span></span> <span data-ttu-id="16a11-150">I když úplné servery a virtuální počítače vyžadují ruční aktualizaci, kontejnery jsou snadno řízené správou verzí.</span><span class="sxs-lookup"><span data-stu-id="16a11-150">While full servers and virtual machines require manual effort to update, containers are easily version-controlled.</span></span> <span data-ttu-id="16a11-151">Aplikace sestavené pro běh v kontejnerech se dají vyvíjet, testovat a nasazovat pomocí automatizovaných nástrojů jako součást kanálu sestavení.</span><span class="sxs-lookup"><span data-stu-id="16a11-151">Apps built to run in containers can be developed, tested, and deployed using automated tools as part of a build pipeline.</span></span>

<span data-ttu-id="16a11-152">Kontejnery jsou neměnné.</span><span class="sxs-lookup"><span data-stu-id="16a11-152">Containers are immutable.</span></span> <span data-ttu-id="16a11-153">Po definování kontejneru ho můžete znovu vytvořit a spustit přesně stejným způsobem.</span><span class="sxs-lookup"><span data-stu-id="16a11-153">Once you define a container, you can recreate and run it exactly the same way.</span></span> <span data-ttu-id="16a11-154">Tato neměnnosti se zapůjčuje do návrhu založeného na komponentách.</span><span class="sxs-lookup"><span data-stu-id="16a11-154">This immutability lends itself to component-based design.</span></span> <span data-ttu-id="16a11-155">Pokud se některé části aplikace rozvíjejí jinak než jiné, proč je možné znovu nasadit celou aplikaci, když můžete jenom nasadit části, které se mění nejčastěji?</span><span class="sxs-lookup"><span data-stu-id="16a11-155">If some parts of an application evolve differently than others, why redeploy the entire app when you can just deploy the parts that change most frequently?</span></span> <span data-ttu-id="16a11-156">Různé funkce a průřezové aspekty aplikace je možné rozdělit na samostatné jednotky.</span><span class="sxs-lookup"><span data-stu-id="16a11-156">Different features and cross-cutting concerns of an app can be broken up into separate units.</span></span> <span data-ttu-id="16a11-157">Obrázek 3-2 ukazuje, jak může aplikace monolitické využít výhod kontejnerů a mikroslužeb pomocí delegování určitých funkcí nebo funkcí.</span><span class="sxs-lookup"><span data-stu-id="16a11-157">Figure 3-2 shows how a monolithic app can take advantage of containers and microservices by delegating certain features or functionality.</span></span> <span data-ttu-id="16a11-158">Zbývající funkce samotné aplikace také byly kontejnery.</span><span class="sxs-lookup"><span data-stu-id="16a11-158">The remaining functionality in the app itself has also been containerized.</span></span>

<span data-ttu-id="16a11-159">Kontejnery jsou neměnné.</span><span class="sxs-lookup"><span data-stu-id="16a11-159">Containers are immutable.</span></span> <span data-ttu-id="16a11-160">Po definování kontejneru ho můžete znovu vytvořit a spustit přesně stejným způsobem.</span><span class="sxs-lookup"><span data-stu-id="16a11-160">Once you define a container, you can recreate and run it exactly the same way.</span></span> <span data-ttu-id="16a11-161">Tato neměnnosti se zapůjčuje do návrhu založeného na komponentách.</span><span class="sxs-lookup"><span data-stu-id="16a11-161">This immutability lends itself to component-based design.</span></span> <span data-ttu-id="16a11-162">Pokud se některé části aplikace rozvíjejí jinak než jiné, proč je možné znovu nasadit celou aplikaci, když můžete jenom nasadit části, které se mění nejčastěji?</span><span class="sxs-lookup"><span data-stu-id="16a11-162">If some parts of an application evolve differently than others, why redeploy the entire app when you can just deploy the parts that change most frequently?</span></span> <span data-ttu-id="16a11-163">Různé funkce a průřezové aspekty aplikace je možné rozdělit na samostatné jednotky.</span><span class="sxs-lookup"><span data-stu-id="16a11-163">Different features and cross-cutting concerns of an app can be broken up into separate units.</span></span> <span data-ttu-id="16a11-164">Obrázek 3-2 ukazuje, jak může aplikace monolitické využít výhod kontejnerů a mikroslužeb pomocí delegování určitých funkcí nebo funkcí.</span><span class="sxs-lookup"><span data-stu-id="16a11-164">Figure 3-2 shows how a monolithic app can take advantage of containers and microservices by delegating certain features or functionality.</span></span> <span data-ttu-id="16a11-165">Zbývající funkce samotné aplikace také byly kontejnery.</span><span class="sxs-lookup"><span data-stu-id="16a11-165">The remaining functionality in the app itself has also been containerized.</span></span>

![Rozdělení aplikace monolitické pro použití mikroslužeb v back-endu.](./media/cloud-native-design.png)

<span data-ttu-id="16a11-167">**Obrázek 3-2**.</span><span class="sxs-lookup"><span data-stu-id="16a11-167">**Figure 3-2**.</span></span> <span data-ttu-id="16a11-168">Rozložení aplikace monolitické k zapojení mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="16a11-168">Decomposing a monolithic app to embrace microservices.</span></span>

<span data-ttu-id="16a11-169">Každá nativní cloudová služba je sestavená a nasazená v samostatném kontejneru.</span><span class="sxs-lookup"><span data-stu-id="16a11-169">Each cloud-native service is built and deployed in a separate container.</span></span> <span data-ttu-id="16a11-170">Každý se může podle potřeby aktualizovat.</span><span class="sxs-lookup"><span data-stu-id="16a11-170">Each can update as needed.</span></span> <span data-ttu-id="16a11-171">Jednotlivé služby můžou být hostované na uzlech s prostředky, které jsou vhodné pro každou službu.</span><span class="sxs-lookup"><span data-stu-id="16a11-171">Individual services can be hosted on nodes with resources appropriate to each service.</span></span> <span data-ttu-id="16a11-172">Prostředí, ve kterém každá služba běží, je neměnné, sdílí se s vývojem, testovacím a produkčním prostředím a snadnou verzí.</span><span class="sxs-lookup"><span data-stu-id="16a11-172">The environment each service runs in is immutable, shared across dev, test, and production environments, and easily versioned.</span></span> <span data-ttu-id="16a11-173">Propojení mezi různými oblastmi aplikace probíhá explicitně jako volání nebo zprávy mezi službami, nikoli závislosti na kompilaci v rámci monolitu.</span><span class="sxs-lookup"><span data-stu-id="16a11-173">Coupling between different areas of the application occurs explicitly as calls or messages between services, not compile-time dependencies within the monolith.</span></span> <span data-ttu-id="16a11-174">Můžete také zvolit technologii, která nejlépe nastaví danou schopnost, aniž byste museli měnit zbytek aplikace.</span><span class="sxs-lookup"><span data-stu-id="16a11-174">You can also choose the technology that best suites a given capability without requiring changes to the rest of the app.</span></span>

<span data-ttu-id="16a11-175">Kontejnerové služby vyžadují automatizovanou správu.</span><span class="sxs-lookup"><span data-stu-id="16a11-175">Containerized services require automated management.</span></span> <span data-ttu-id="16a11-176">Nebylo by možné ručně spravovat velkou sadu nezávisle nasazených kontejnerů.</span><span class="sxs-lookup"><span data-stu-id="16a11-176">It wouldn't be feasible to manually administer a large set of independently deployed containers.</span></span> <span data-ttu-id="16a11-177">Zvažte například následující úlohy:</span><span class="sxs-lookup"><span data-stu-id="16a11-177">For example, consider the following tasks:</span></span>

- <span data-ttu-id="16a11-178">Jak budou instance kontejnerů zajištěny v rámci clusteru mnoha počítačů?</span><span class="sxs-lookup"><span data-stu-id="16a11-178">How will container instances be provisioned across a cluster of many machines?</span></span>
- <span data-ttu-id="16a11-179">Jak bude po nasazení, jak budou kontejnery zjišťovat a komunikovat mezi sebou?</span><span class="sxs-lookup"><span data-stu-id="16a11-179">Once deployed, how will containers discover and communicate with each other?</span></span>
- <span data-ttu-id="16a11-180">Jak se můžou kontejnery škálovat na vyžádání?</span><span class="sxs-lookup"><span data-stu-id="16a11-180">How can containers scale in or out on-demand?</span></span>
- <span data-ttu-id="16a11-181">Jak monitorovat stav každého kontejneru?</span><span class="sxs-lookup"><span data-stu-id="16a11-181">How do you monitor the health of each container?</span></span>
- <span data-ttu-id="16a11-182">Jak chránit kontejner proti selhání hardwaru a softwaru?</span><span class="sxs-lookup"><span data-stu-id="16a11-182">How do you protect a container against hardware and software failures?</span></span>
- <span data-ttu-id="16a11-183">Jak provedete upgrade kontejnerů pro živou aplikaci s nulovými výpadky?</span><span class="sxs-lookup"><span data-stu-id="16a11-183">How do upgrade containers for a live application with zero downtime?</span></span>

<span data-ttu-id="16a11-184">Orchestrace kontejnerů řeší a automatizují tyto a další obavy.</span><span class="sxs-lookup"><span data-stu-id="16a11-184">Container orchestrators address and automate these and other concerns.</span></span>

<span data-ttu-id="16a11-185">V rámci nativního ekosystému cloudu se Kubernetes stává nástrojem Orchestrator.</span><span class="sxs-lookup"><span data-stu-id="16a11-185">In the cloud-native eco-system, Kubernetes has become the de facto container orchestrator.</span></span> <span data-ttu-id="16a11-186">Je to open source platforma spravovaná platformou Cloud Native Computing (CNCF).</span><span class="sxs-lookup"><span data-stu-id="16a11-186">It's an open-source platform managed by the Cloud Native Computing Foundation (CNCF).</span></span> <span data-ttu-id="16a11-187">Kubernetes automatizuje nasazení, škálování a provozní obavy z kontejnerových úloh v clusteru počítače.</span><span class="sxs-lookup"><span data-stu-id="16a11-187">Kubernetes automates the deployment, scaling, and operational concerns of containerized workloads across a machine cluster.</span></span> <span data-ttu-id="16a11-188">Instalace a Správa Kubernetes je ale obvykle odlaďuje složitá.</span><span class="sxs-lookup"><span data-stu-id="16a11-188">However, installing and managing Kubernetes is notoriously complex.</span></span>

<span data-ttu-id="16a11-189">Mnohem lepším řešením je využití Kubernetes jako spravované služby od dodavatele cloudu.</span><span class="sxs-lookup"><span data-stu-id="16a11-189">A much better approach is to leverage Kubernetes as a managed service from a cloud vendor.</span></span> <span data-ttu-id="16a11-190">Cloud Azure nabízí plně spravovanou platformu Kubernetes s názvem [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span><span class="sxs-lookup"><span data-stu-id="16a11-190">The Azure cloud features a fully managed Kubernetes platform entitled [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span></span> <span data-ttu-id="16a11-191">AKS vyabstrakce složitost a provozní režii správy Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="16a11-191">AKS abstracts the complexity and operational overhead of managing Kubernetes.</span></span> <span data-ttu-id="16a11-192">Kubernetes spotřebováváte jako cloudovou službu. Společnost Microsoft má odpovědnost za správu a podporu.</span><span class="sxs-lookup"><span data-stu-id="16a11-192">You consume Kubernetes as a cloud service; Microsoft takes responsibility for managing and supporting it.</span></span> <span data-ttu-id="16a11-193">AKS se také úzce integruje s dalšími službami Azure a nástroji pro vývoj.</span><span class="sxs-lookup"><span data-stu-id="16a11-193">AKS also tightly integrates with other Azure services and dev tools.</span></span>

<span data-ttu-id="16a11-194">AKS je technologie založená na clusteru.</span><span class="sxs-lookup"><span data-stu-id="16a11-194">AKS is a cluster-based technology.</span></span> <span data-ttu-id="16a11-195">Fond federovaných virtuálních počítačů nebo uzlů je nasazený do cloudu Azure.</span><span class="sxs-lookup"><span data-stu-id="16a11-195">A pool of federated virtual machines, or nodes, is deployed to the Azure cloud.</span></span> <span data-ttu-id="16a11-196">Dohromady tvoří vysoce dostupné prostředí nebo cluster.</span><span class="sxs-lookup"><span data-stu-id="16a11-196">Together they form a highly available environment, or cluster.</span></span> <span data-ttu-id="16a11-197">Cluster se jeví jako bezproblémová a jediná entita do vaší cloudové nativní aplikace.</span><span class="sxs-lookup"><span data-stu-id="16a11-197">The cluster appears as a seamless, single entity to your cloud-native application.</span></span> <span data-ttu-id="16a11-198">V digestoři AKS nasadí vaše kontejnerové služby v těchto uzlech podle předdefinované strategie, která rovnoměrně distribuuje zatížení.</span><span class="sxs-lookup"><span data-stu-id="16a11-198">Under the hood, AKS deploys your containerized services across these nodes following a predefined strategy that evenly distributes the load.</span></span>

<span data-ttu-id="16a11-199">Kontejnerové služby vyžadují automatizovanou správu.</span><span class="sxs-lookup"><span data-stu-id="16a11-199">Containerized services require automated management.</span></span> <span data-ttu-id="16a11-200">Nebylo by možné ručně spravovat velkou sadu nezávisle nasazených kontejnerů.</span><span class="sxs-lookup"><span data-stu-id="16a11-200">It wouldn't be feasible to manually administer a large set of independently deployed containers.</span></span> <span data-ttu-id="16a11-201">Zvažte například následující úlohy:</span><span class="sxs-lookup"><span data-stu-id="16a11-201">For example, consider the following tasks:</span></span>

- <span data-ttu-id="16a11-202">Jak budou instance kontejnerů zajištěny v rámci clusteru mnoha počítačů?</span><span class="sxs-lookup"><span data-stu-id="16a11-202">How will container instances be provisioned across a cluster of many machines?</span></span>
- <span data-ttu-id="16a11-203">Jak bude po nasazení, jak budou kontejnery zjišťovat a komunikovat mezi sebou?</span><span class="sxs-lookup"><span data-stu-id="16a11-203">Once deployed, how will containers discover and communicate with each other?</span></span>
- <span data-ttu-id="16a11-204">Jak se můžou kontejnery škálovat na vyžádání?</span><span class="sxs-lookup"><span data-stu-id="16a11-204">How can containers scale in or out on-demand?</span></span>
- <span data-ttu-id="16a11-205">Jak monitorovat stav každého kontejneru?</span><span class="sxs-lookup"><span data-stu-id="16a11-205">How do you monitor the health of each container?</span></span>
- <span data-ttu-id="16a11-206">Jak chránit kontejner proti selhání hardwaru a softwaru?</span><span class="sxs-lookup"><span data-stu-id="16a11-206">How do you protect a container against hardware and software failures?</span></span>
- <span data-ttu-id="16a11-207">Jak provedete upgrade kontejnerů pro živou aplikaci s nulovými výpadky?</span><span class="sxs-lookup"><span data-stu-id="16a11-207">How do upgrade containers for a live application with zero downtime?</span></span>

<span data-ttu-id="16a11-208">Orchestrace kontejnerů řeší a automatizují tyto a další obavy.</span><span class="sxs-lookup"><span data-stu-id="16a11-208">Container orchestrators address and automate these and other concerns.</span></span>

<span data-ttu-id="16a11-209">V rámci nativního ekosystému cloudu se Kubernetes stává nástrojem Orchestrator.</span><span class="sxs-lookup"><span data-stu-id="16a11-209">In the cloud-native eco-system, Kubernetes has become the de facto container orchestrator.</span></span> <span data-ttu-id="16a11-210">Je to open source platforma spravovaná platformou Cloud Native Computing (CNCF).</span><span class="sxs-lookup"><span data-stu-id="16a11-210">It's an open-source platform managed by the Cloud Native Computing Foundation (CNCF).</span></span> <span data-ttu-id="16a11-211">Kubernetes automatizuje nasazení, škálování a provozní obavy z kontejnerových úloh v clusteru počítače.</span><span class="sxs-lookup"><span data-stu-id="16a11-211">Kubernetes automates the deployment, scaling, and operational concerns of containerized workloads across a machine cluster.</span></span> <span data-ttu-id="16a11-212">Instalace a Správa Kubernetes je ale obvykle odlaďuje složitá.</span><span class="sxs-lookup"><span data-stu-id="16a11-212">However, installing and managing Kubernetes is notoriously complex.</span></span>

<span data-ttu-id="16a11-213">Mnohem lepším řešením je využití Kubernetes jako spravované služby od dodavatele cloudu.</span><span class="sxs-lookup"><span data-stu-id="16a11-213">A much better approach is to leverage Kubernetes as a managed service from a cloud vendor.</span></span> <span data-ttu-id="16a11-214">Cloud Azure nabízí plně spravovanou platformu Kubernetes s názvem [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span><span class="sxs-lookup"><span data-stu-id="16a11-214">The Azure cloud features a fully managed Kubernetes platform entitled [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span></span> <span data-ttu-id="16a11-215">AKS vyabstrakce složitost a provozní režii správy Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="16a11-215">AKS abstracts the complexity and operational overhead of managing Kubernetes.</span></span> <span data-ttu-id="16a11-216">Kubernetes spotřebováváte jako cloudovou službu. Společnost Microsoft má odpovědnost za správu a podporu.</span><span class="sxs-lookup"><span data-stu-id="16a11-216">You consume Kubernetes as a cloud service; Microsoft takes responsibility for managing and supporting it.</span></span> <span data-ttu-id="16a11-217">AKS se také úzce integruje s dalšími službami Azure a nástroji pro vývoj.</span><span class="sxs-lookup"><span data-stu-id="16a11-217">AKS also tightly integrates with other Azure services and dev tools.</span></span>

<span data-ttu-id="16a11-218">AKS je technologie založená na clusteru.</span><span class="sxs-lookup"><span data-stu-id="16a11-218">AKS is a cluster-based technology.</span></span> <span data-ttu-id="16a11-219">Fond federovaných virtuálních počítačů nebo uzlů je nasazený do cloudu Azure.</span><span class="sxs-lookup"><span data-stu-id="16a11-219">A pool of federated virtual machines, or nodes, is deployed to the Azure cloud.</span></span> <span data-ttu-id="16a11-220">Dohromady tvoří vysoce dostupné prostředí nebo cluster.</span><span class="sxs-lookup"><span data-stu-id="16a11-220">Together they form a highly available environment, or cluster.</span></span> <span data-ttu-id="16a11-221">Cluster se jeví jako bezproblémová a jediná entita do vaší cloudové nativní aplikace.</span><span class="sxs-lookup"><span data-stu-id="16a11-221">The cluster appears as a seamless, single entity to your cloud-native application.</span></span> <span data-ttu-id="16a11-222">V digestoři AKS nasadí vaše kontejnerové služby v těchto uzlech podle předdefinované strategie, která rovnoměrně distribuuje zatížení.</span><span class="sxs-lookup"><span data-stu-id="16a11-222">Under the hood, AKS deploys your containerized services across these nodes following a predefined strategy that evenly distributes the load.</span></span>

## <a name="what-are-the-scaling-benefits"></a><span data-ttu-id="16a11-223">Jaké jsou výhody škálování?</span><span class="sxs-lookup"><span data-stu-id="16a11-223">What are the scaling benefits?</span></span>

<span data-ttu-id="16a11-224">Služby postavené na kontejnerech můžou využívat výhody škálování poskytované nástroji pro orchestraci, jako je Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="16a11-224">Services built on containers can leverage scaling benefits provided by orchestration tools like Kubernetes.</span></span> <span data-ttu-id="16a11-225">Kontejnery návrhu se týkají pouze samotných.</span><span class="sxs-lookup"><span data-stu-id="16a11-225">By design containers only know about themselves.</span></span> <span data-ttu-id="16a11-226">Jakmile budete mít více kontejnerů, které potřebují spolupracovat, měli byste je uspořádat na vyšší úrovni.</span><span class="sxs-lookup"><span data-stu-id="16a11-226">Once you have multiple containers that need to work together, you should organize them at a higher level.</span></span> <span data-ttu-id="16a11-227">Uspořádání velkého počtu kontejnerů a jejich sdílených závislostí, jako je například konfigurace sítě, je místo, kde nástroje pro orchestraci docházejí, aby ušetřily den.</span><span class="sxs-lookup"><span data-stu-id="16a11-227">Organizing large numbers of containers and their shared dependencies, such as network configuration, is where orchestration tools come in to save the day!</span></span> <span data-ttu-id="16a11-228">Kubernetes vytvoří vrstvu abstrakce přes skupiny kontejnerů a uspořádá je do *lusků*.</span><span class="sxs-lookup"><span data-stu-id="16a11-228">Kubernetes creates an abstraction layer over groups of containers and organizes them into *pods*.</span></span> <span data-ttu-id="16a11-229">Lusky se spouštějí na pracovních počítačích, které jsou označovány jako *uzly*.</span><span class="sxs-lookup"><span data-stu-id="16a11-229">Pods run on worker machines referred to as *nodes*.</span></span> <span data-ttu-id="16a11-230">Tato uspořádaná struktura se označuje jako *cluster*.</span><span class="sxs-lookup"><span data-stu-id="16a11-230">This organized structure is referred to as a *cluster*.</span></span> <span data-ttu-id="16a11-231">Obrázek 3-3 ukazuje různé komponenty clusteru Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="16a11-231">Figure 3-3 shows the different components of a Kubernetes cluster.</span></span>

<span data-ttu-id="16a11-232">![Součásti clusteru Kubernetes. ](./media/kubernetes-cluster-components.png)
 **Obrázek 3-3**.</span><span class="sxs-lookup"><span data-stu-id="16a11-232">![Kubernetes cluster components.](./media/kubernetes-cluster-components.png)
**Figure 3-3**.</span></span> <span data-ttu-id="16a11-233">Součásti clusteru Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="16a11-233">Kubernetes cluster components.</span></span>

<span data-ttu-id="16a11-234">Škálování kontejnerových úloh je klíčovou funkcí orchestrace kontejnerů.</span><span class="sxs-lookup"><span data-stu-id="16a11-234">Scaling containerized workloads is a key feature of container orchestrators.</span></span> <span data-ttu-id="16a11-235">AKS podporuje automatické škálování ve dvou dimenzích: instance kontejnerů a výpočetní uzly.</span><span class="sxs-lookup"><span data-stu-id="16a11-235">AKS supports automatic scaling across two dimensions: Container instances and compute nodes.</span></span> <span data-ttu-id="16a11-236">Společně poskytují AKS schopnost rychle a efektivně reagovat na špičky v poptávce a přidávat další prostředky.</span><span class="sxs-lookup"><span data-stu-id="16a11-236">Together they give AKS the ability to quickly and efficiently respond to spikes in demand and add additional resources.</span></span> <span data-ttu-id="16a11-237">V této části probereme škálování v AKS dále.</span><span class="sxs-lookup"><span data-stu-id="16a11-237">We discuss scaling in AKS later in this chapter.</span></span>

### <a name="declarative-versus-imperative"></a><span data-ttu-id="16a11-238">Deklarativní versus imperativní</span><span class="sxs-lookup"><span data-stu-id="16a11-238">Declarative versus imperative</span></span>

<span data-ttu-id="16a11-239">Kubernetes podporuje deklarativní i imperativní konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="16a11-239">Kubernetes supports both declarative and imperative configuration.</span></span> <span data-ttu-id="16a11-240">Nepodmíněný přístup zahrnuje spuštění různých příkazů, které oznamují Kubernetes, co dělat v každém kroku jak.</span><span class="sxs-lookup"><span data-stu-id="16a11-240">The imperative approach involves running various commands that tell Kubernetes what to do each step of the way.</span></span> <span data-ttu-id="16a11-241">Spusťte tuto bitovou kopii.</span><span class="sxs-lookup"><span data-stu-id="16a11-241">Run this image.</span></span> <span data-ttu-id="16a11-242">Odstraňte tento pod.</span><span class="sxs-lookup"><span data-stu-id="16a11-242">Delete this pod.</span></span> <span data-ttu-id="16a11-243">Zveřejněte tento port.</span><span class="sxs-lookup"><span data-stu-id="16a11-243">Expose this port.</span></span> <span data-ttu-id="16a11-244">Pomocí deklarativního přístupu vytvoříte konfigurační soubor nazvaný manifest, který popíšete, co chcete, a místo toho, co chcete udělat.</span><span class="sxs-lookup"><span data-stu-id="16a11-244">With the declarative approach, you create a configuration file, called a manifest, to describe what you want instead of what to do.</span></span> <span data-ttu-id="16a11-245">Kubernetes přečte manifest a transformuje požadovaný koncový stav do skutečného koncového stavu.</span><span class="sxs-lookup"><span data-stu-id="16a11-245">Kubernetes reads the manifest and transforms your desired end state into actual end state.</span></span>

<span data-ttu-id="16a11-246">Imperativní příkazy jsou skvělé pro výukové a interaktivní experimenty.</span><span class="sxs-lookup"><span data-stu-id="16a11-246">Imperative commands are great for learning and interactive experimentation.</span></span> <span data-ttu-id="16a11-247">Nicméně budete chtít deklarativně vytvořit soubory manifestu Kubernetes, které budou využívat infrastrukturu jako přístup kódu, a zajistit tak spolehlivá a opakující se nasazení.</span><span class="sxs-lookup"><span data-stu-id="16a11-247">However, you'll want to declaratively create Kubernetes manifest files to embrace an infrastructure as code approach, providing for reliable and repeatable deployments.</span></span> <span data-ttu-id="16a11-248">Soubor manifestu se stal artefaktem projektu a používá se v kanálu CI/CD pro automatizaci nasazení Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="16a11-248">The manifest file becomes a project artifact and is used in your CI/CD pipeline for automating Kubernetes deployments.</span></span>

<span data-ttu-id="16a11-249">Pokud jste cluster již nakonfigurovali pomocí imperativních příkazů, můžete exportovat deklarativní manifest pomocí `kubectl get svc SERVICENAME -o yaml > service.yaml` .</span><span class="sxs-lookup"><span data-stu-id="16a11-249">If you've already configured your cluster using imperative commands, you can export a declarative manifest by using `kubectl get svc SERVICENAME -o yaml > service.yaml`.</span></span> <span data-ttu-id="16a11-250">Tento příkaz vytvoří manifest podobný jednomu, který vidíte níže:</span><span class="sxs-lookup"><span data-stu-id="16a11-250">This command produces a manifest similar to one shown below:</span></span>

```yaml
apiVersion: v1
kind: Service
metadata:
  creationTimestamp: "2019-09-13T13:58:47Z"
  labels:
    component: apiserver
    provider: kubernetes
  name: kubernetes
  namespace: default
  resourceVersion: "153"
  selfLink: /api/v1/namespaces/default/services/kubernetes
  uid: 9b1fac62-d62e-11e9-8968-00155d38010d
spec:
  clusterIP: 10.96.0.1
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: 6443
  sessionAffinity: None
  type: ClusterIP
status:
  loadBalancer: {}
```

<span data-ttu-id="16a11-251">Při použití deklarativní konfigurace můžete zobrazit náhled změn, které budou provedeny před jejich potvrzením, pomocí `kubectl diff -f FOLDERNAME` složky ve složce, ve které jsou umístěny konfigurační soubory.</span><span class="sxs-lookup"><span data-stu-id="16a11-251">When using declarative configuration, you can preview the changes that will be made before committing them by using `kubectl diff -f FOLDERNAME` against the folder where your configuration files are located.</span></span> <span data-ttu-id="16a11-252">Až si opravdu chcete změny použít, spusťte příkaz `kubectl apply -f FOLDERNAME` .</span><span class="sxs-lookup"><span data-stu-id="16a11-252">Once you're sure you want to apply the changes, run `kubectl apply -f FOLDERNAME`.</span></span> <span data-ttu-id="16a11-253">Přidejte `-R` k rekurzivnímu zpracování hierarchie složek.</span><span class="sxs-lookup"><span data-stu-id="16a11-253">Add `-R` to recursively process a folder hierarchy.</span></span>

<span data-ttu-id="16a11-254">Můžete také použít deklarativní konfiguraci s jinými Kubernetes funkcemi, z nichž jeden je nasazování.</span><span class="sxs-lookup"><span data-stu-id="16a11-254">You can also use declarative configuration with other Kubernetes features, one of which being deployments.</span></span> <span data-ttu-id="16a11-255">Deklarativní nasazení vám pomůžou spravovat verze, aktualizace a škálování.</span><span class="sxs-lookup"><span data-stu-id="16a11-255">Declarative deployments help manage releases, updates, and scaling.</span></span> <span data-ttu-id="16a11-256">Kontroler nasazení Kubernetes řídí, jak nasadit nové změny, škálovat zatížení nebo vrátit zpět k předchozí revizi.</span><span class="sxs-lookup"><span data-stu-id="16a11-256">They instruct the Kubernetes deployment controller on how to deploy new changes, scale out load, or roll back to a previous revision.</span></span> <span data-ttu-id="16a11-257">Pokud je cluster nestabilní, bude deklarativní nasazení automaticky vracet cluster zpět do požadovaného stavu.</span><span class="sxs-lookup"><span data-stu-id="16a11-257">If a cluster is unstable, a declarative deployment will automatically return the cluster back to a desired state.</span></span> <span data-ttu-id="16a11-258">Například pokud by došlo k selhání uzlu, mechanismus nasazení znovu nasadí náhradu, aby dosáhli požadovaného stavu.</span><span class="sxs-lookup"><span data-stu-id="16a11-258">For example, if a node should crash, the deployment mechanism will redeploy a replacement to achieve your desired state</span></span>

<span data-ttu-id="16a11-259">Použití deklarativní konfigurace umožňuje, aby infrastruktura byla reprezentovaná jako kód, který se dá vrátit se změnami, a zároveň používat verzi společně s kódem aplikace.</span><span class="sxs-lookup"><span data-stu-id="16a11-259">Using declarative configuration allows infrastructure to be represented as code that can be checked in and versioned alongside the application code.</span></span> <span data-ttu-id="16a11-260">Poskytuje vylepšené řízení změn a lepší podporu pro průběžné nasazování pomocí kanálu sestavení a nasazení.</span><span class="sxs-lookup"><span data-stu-id="16a11-260">It provides improved change control and better support for continuous deployment using a build and deploy pipeline.</span></span>

## <a name="what-scenarios-are-ideal-for-containers-and-orchestrators"></a><span data-ttu-id="16a11-261">Jaké scénáře jsou ideální pro kontejnery a orchestraci?</span><span class="sxs-lookup"><span data-stu-id="16a11-261">What scenarios are ideal for containers and orchestrators?</span></span>

<span data-ttu-id="16a11-262">Následující scénáře jsou ideální pro používání kontejnerů a orchestrací.</span><span class="sxs-lookup"><span data-stu-id="16a11-262">The following scenarios are ideal for using containers and orchestrators.</span></span>

### <a name="applications-requiring-high-uptime-and-scalability"></a><span data-ttu-id="16a11-263">Aplikace vyžadující vysokou dobu provozu a škálovatelnost</span><span class="sxs-lookup"><span data-stu-id="16a11-263">Applications requiring high uptime and scalability</span></span>

<span data-ttu-id="16a11-264">Jednotlivé aplikace, které mají vysoké požadavky na provozuschopnost a škálovatelnost, jsou ideálními kandidáty pro nativní cloudové architektury pomocí mikroslužeb, kontejnerů a orchestrací.</span><span class="sxs-lookup"><span data-stu-id="16a11-264">Individual applications that have high uptime and scalability requirements are ideal candidates for cloud-native architectures using microservices, containers, and orchestrators.</span></span> <span data-ttu-id="16a11-265">Je možné je vyvíjet v kontejnerech, testovat napříč různými verzemi prostředí a nasazovat do provozu s nulovými výpadky.</span><span class="sxs-lookup"><span data-stu-id="16a11-265">They can be developed in containers, tested across versioned environments, and deployed into production with zero downtime.</span></span> <span data-ttu-id="16a11-266">Použití clusterů Kubernetes zajišťuje, aby takové aplikace mohly také škálovat na vyžádání a automaticky obnovovat při selhání uzlu.</span><span class="sxs-lookup"><span data-stu-id="16a11-266">The use of Kubernetes clusters ensures such apps can also scale on demand and recover automatically from node failures.</span></span>

### <a name="large-numbers-of-applications"></a><span data-ttu-id="16a11-267">Velký počet aplikací</span><span class="sxs-lookup"><span data-stu-id="16a11-267">Large numbers of applications</span></span>

<span data-ttu-id="16a11-268">Organizace, které nasazují a udržují velký počet aplikací, využívají z kontejnerů a orchestrací.</span><span class="sxs-lookup"><span data-stu-id="16a11-268">Organizations that deploy and maintain large numbers of applications benefit from containers and orchestrators.</span></span> <span data-ttu-id="16a11-269">V rámci nastavení kontejnerových prostředí a clusterů Kubernetes jsou primárně pevné náklady.</span><span class="sxs-lookup"><span data-stu-id="16a11-269">The up front effort of setting up containerized environments and Kubernetes clusters is primarily a fixed cost.</span></span> <span data-ttu-id="16a11-270">Nasazení, údržba a aktualizace jednotlivých aplikací má náklady, které se liší podle počtu aplikací.</span><span class="sxs-lookup"><span data-stu-id="16a11-270">Deploying, maintaining, and updating individual applications has a cost that varies with the number of applications.</span></span> <span data-ttu-id="16a11-271">Mimo malý počet aplikací je složitá složitost údržby vlastních aplikací ručním překračovat náklady na implementaci řešení s využitím kontejnerů a orchestrací.</span><span class="sxs-lookup"><span data-stu-id="16a11-271">Beyond a small number of applications, the complexity of maintaining custom applications manually exceeds the cost of implementing a solution using containers and orchestrators.</span></span>

## <a name="when-should-you-avoid-using-containers-and-orchestrators"></a><span data-ttu-id="16a11-272">Kdy byste se měli vyhnout použití kontejnerů a orchestrací?</span><span class="sxs-lookup"><span data-stu-id="16a11-272">When should you avoid using containers and orchestrators?</span></span>

<span data-ttu-id="16a11-273">Pokud nemůžete sestavit aplikaci za použití zásad dvanácti, měli byste zvážit vyloučení kontejnerů a orchestrací.</span><span class="sxs-lookup"><span data-stu-id="16a11-273">If you're unable to build your application following the Twelve-Factor App principles, you should consider avoiding containers and orchestrators.</span></span> <span data-ttu-id="16a11-274">V těchto případech zvažte hostující platformu založenou na virtuálním počítači, nebo případně nějaký hybridní systém.</span><span class="sxs-lookup"><span data-stu-id="16a11-274">In these cases, consider a VM-based hosting platform, or possibly some hybrid system.</span></span> <span data-ttu-id="16a11-275">Díky tomu můžete určité části funkcí vypnout na samostatné kontejnery nebo i na funkce bez serveru.</span><span class="sxs-lookup"><span data-stu-id="16a11-275">With it, you can always spin off certain pieces of functionality into separate containers or even serverless functions.</span></span>

## <a name="development-resources"></a><span data-ttu-id="16a11-276">Prostředky pro vývoj</span><span class="sxs-lookup"><span data-stu-id="16a11-276">Development resources</span></span>

<span data-ttu-id="16a11-277">V této části se zobrazuje krátký seznam vývojářských prostředků, které vám můžou pomoci začít s používáním kontejnerů a orchestrací pro vaši další aplikaci.</span><span class="sxs-lookup"><span data-stu-id="16a11-277">This section shows a short list of development resources that may help you get started using containers and orchestrators for your next application.</span></span> <span data-ttu-id="16a11-278">Pokud hledáte pokyny k návrhu aplikace architektury mikroslužeb nativního pro Cloud, přečtěte si tohoto doprovodného pomocníka [.NET mikroslužby: architektura pro kontejnery aplikací .NET](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook).</span><span class="sxs-lookup"><span data-stu-id="16a11-278">If you're looking for guidance on how to design your cloud-native microservices architecture app, read this book's companion, [.NET Microservices: Architecture for Containerized .NET Applications](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook).</span></span>

### <a name="local-kubernetes-development"></a><span data-ttu-id="16a11-279">Vývoj místních Kubernetes</span><span class="sxs-lookup"><span data-stu-id="16a11-279">Local Kubernetes Development</span></span>

<span data-ttu-id="16a11-280">Kubernetes nasazení poskytují skvělou hodnotu v produkčním prostředí, ale můžou běžet i místně na svém vývojovém počítači.</span><span class="sxs-lookup"><span data-stu-id="16a11-280">Kubernetes deployments provide great value in production environments, but can also run locally on your development machine.</span></span> <span data-ttu-id="16a11-281">I když můžete jednotlivé mikroslužby pracovat nezávisle, může nastat situace, kdy budete muset spustit celý systém místně – stejně jako při nasazení do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="16a11-281">While you may work on individual microservices independently, there may be times when you'll need to run the entire system locally - just as it will run when deployed to production.</span></span> <span data-ttu-id="16a11-282">K dispozici je několik nástrojů, které vám pomůžou: Minikube a Docker Desktop.</span><span class="sxs-lookup"><span data-stu-id="16a11-282">There are several tools that can help: Minikube and Docker Desktop.</span></span> <span data-ttu-id="16a11-283">Visual Studio také poskytuje nástroje pro vývoj v Docker.</span><span class="sxs-lookup"><span data-stu-id="16a11-283">Visual Studio also provides tooling for Docker development.</span></span>

### <a name="minikube"></a><span data-ttu-id="16a11-284">Minikube</span><span class="sxs-lookup"><span data-stu-id="16a11-284">Minikube</span></span>

<span data-ttu-id="16a11-285">Co je Minikube?</span><span class="sxs-lookup"><span data-stu-id="16a11-285">What is Minikube?</span></span> <span data-ttu-id="16a11-286">Projekt Minikube říká "Minikube implementuje místní Kubernetes cluster na macOS, Linux a Windows."</span><span class="sxs-lookup"><span data-stu-id="16a11-286">The Minikube project says "Minikube implements a local Kubernetes cluster on macOS, Linux, and Windows."</span></span> <span data-ttu-id="16a11-287">Jeho primárními cíli je "nejlepší nástroj pro vývoj místních aplikací Kubernetes a podpora všech Kubernetes funkcí, které odpovídají."</span><span class="sxs-lookup"><span data-stu-id="16a11-287">Its primary goals are "to be the best tool for local Kubernetes application development and to support all Kubernetes features that fit."</span></span> <span data-ttu-id="16a11-288">Instalace Minikube je oddělená od Docker, ale Minikube podporuje jiné hypervisory než Docker Desktop podporuje.</span><span class="sxs-lookup"><span data-stu-id="16a11-288">Installing Minikube is separate from Docker, but Minikube supports different hypervisors than Docker Desktop supports.</span></span> <span data-ttu-id="16a11-289">Minikube aktuálně podporuje následující funkce Kubernetes:</span><span class="sxs-lookup"><span data-stu-id="16a11-289">The following Kubernetes features are currently supported by Minikube:</span></span>

- <span data-ttu-id="16a11-290">DNS</span><span class="sxs-lookup"><span data-stu-id="16a11-290">DNS</span></span>
- <span data-ttu-id="16a11-291">NodePorts</span><span class="sxs-lookup"><span data-stu-id="16a11-291">NodePorts</span></span>
- <span data-ttu-id="16a11-292">ConfigMaps a tajné klíče</span><span class="sxs-lookup"><span data-stu-id="16a11-292">ConfigMaps and secrets</span></span>
- <span data-ttu-id="16a11-293">Řídicí panely</span><span class="sxs-lookup"><span data-stu-id="16a11-293">Dashboards</span></span>
- <span data-ttu-id="16a11-294">Moduly runtime kontejnerů: Docker, RKT, CRI-O a kontejnery</span><span class="sxs-lookup"><span data-stu-id="16a11-294">Container runtimes: Docker, rkt, CRI-O, and containerd</span></span>
- <span data-ttu-id="16a11-295">Povolení síťového rozhraní kontejneru (CNI)</span><span class="sxs-lookup"><span data-stu-id="16a11-295">Enabling Container Network Interface (CNI)</span></span>
- <span data-ttu-id="16a11-296">Příchozí přenos dat</span><span class="sxs-lookup"><span data-stu-id="16a11-296">Ingress</span></span>

<span data-ttu-id="16a11-297">Po instalaci Minikube je můžete rychle začít používat spuštěním `minikube start` příkazu, který stáhne image a spustí místní cluster Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="16a11-297">After installing Minikube, you can quickly start using it by running the `minikube start` command, which downloads an image and start the local Kubernetes cluster.</span></span> <span data-ttu-id="16a11-298">Po spuštění clusteru s ním budete pracovat pomocí standardních `kubectl` příkazů Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="16a11-298">Once the cluster is started, you interact with it using the standard Kubernetes `kubectl` commands.</span></span>

### <a name="docker-desktop"></a><span data-ttu-id="16a11-299">Docker Desktop</span><span class="sxs-lookup"><span data-stu-id="16a11-299">Docker Desktop</span></span>

<span data-ttu-id="16a11-300">S Kubernetes můžete také pracovat přímo z Docker desktopu ve Windows.</span><span class="sxs-lookup"><span data-stu-id="16a11-300">You can also work with Kubernetes directly from Docker Desktop on Windows.</span></span> <span data-ttu-id="16a11-301">Tato možnost je jediná, pokud používáte kontejnery Windows a je skvělou volbou pro kontejnery jiné než Windows.</span><span class="sxs-lookup"><span data-stu-id="16a11-301">It is your only option if you're using Windows Containers, and is a great choice for non-Windows containers as well.</span></span> <span data-ttu-id="16a11-302">Obrázek 3-4 ukazuje, jak povolit místní podporu Kubernetes při spuštění Docker desktopu.</span><span class="sxs-lookup"><span data-stu-id="16a11-302">Figure 3-4 shows how to enable local Kubernetes support when running Docker Desktop.</span></span>

![Konfigurace Kubernetes v Docker desktopu](./media/docker-desktop-kubernetes.png)

<span data-ttu-id="16a11-304">**Obrázek 3-4**.</span><span class="sxs-lookup"><span data-stu-id="16a11-304">**Figure 3-4**.</span></span> <span data-ttu-id="16a11-305">Konfigurace Kubernetes v Docker desktopu.</span><span class="sxs-lookup"><span data-stu-id="16a11-305">Configuring Kubernetes in Docker Desktop.</span></span>

<span data-ttu-id="16a11-306">Docker Desktop je nejoblíbenějším nástrojem pro místní konfiguraci a spouštění kontejnerových aplikací.</span><span class="sxs-lookup"><span data-stu-id="16a11-306">Docker Desktop is the most popular tool for configuring and running containerized apps locally.</span></span> <span data-ttu-id="16a11-307">Při práci s Docker desktopem se můžete místně vyvíjet na základě stejné sady imagí kontejnerů Docker, které nasadíte do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="16a11-307">When you work with Docker Desktop, you can develop locally against the exact same set of Docker container images that you'll deploy to production.</span></span> <span data-ttu-id="16a11-308">Docker Desktop je navržený tak, aby vytvořil, otestoval a dodal aplikace s podporou kontejnerů v místním prostředí.</span><span class="sxs-lookup"><span data-stu-id="16a11-308">Docker Desktop is designed to "build, test, and ship" containerized apps locally.</span></span> <span data-ttu-id="16a11-309">Podporuje kontejnery pro Linux i Windows.</span><span class="sxs-lookup"><span data-stu-id="16a11-309">It supports both Linux and Windows containers.</span></span> <span data-ttu-id="16a11-310">Po nahrání imagí do registru imagí, jako je Azure Container Registry nebo Docker Hub, může AKS vyžádat a nasadit je do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="16a11-310">Once you push your images to an image registry, like Azure Container Registry or Docker Hub, AKS can pull and deploy them to production.</span></span>

### <a name="visual-studio-docker-tooling"></a><span data-ttu-id="16a11-311">Nástroje Docker sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="16a11-311">Visual Studio Docker Tooling</span></span>

<span data-ttu-id="16a11-312">Visual Studio podporuje vývoj Docker pro webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="16a11-312">Visual Studio supports Docker development for web-based applications.</span></span> <span data-ttu-id="16a11-313">Když vytváříte novou ASP.NET Core aplikaci, máte možnost ji nakonfigurovat s podporou Docker, jak je znázorněno na obrázku 3-5.</span><span class="sxs-lookup"><span data-stu-id="16a11-313">When you create a new ASP.NET Core application, you have an option to configure it with Docker support, as shown in Figure 3-5.</span></span>

![Povolit podporu Docker pro Visual Studio](./media/visual-studio-enable-docker-support.png)

<span data-ttu-id="16a11-315">**Obrázek 3-5**.</span><span class="sxs-lookup"><span data-stu-id="16a11-315">**Figure 3-5**.</span></span> <span data-ttu-id="16a11-316">Povolit podporu Docker pro Visual Studio</span><span class="sxs-lookup"><span data-stu-id="16a11-316">Visual Studio Enable Docker Support</span></span>

<span data-ttu-id="16a11-317">Když je vybraná tato možnost, projekt se vytvoří s a `Dockerfile` v jeho kořenovém adresáři, který se dá použít k sestavení a hostování aplikace v kontejneru Docker.</span><span class="sxs-lookup"><span data-stu-id="16a11-317">When this option is selected, the project is created with a `Dockerfile` in its root, which can be used to build and host the app in a Docker container.</span></span> <span data-ttu-id="16a11-318">Příklad souboru Dockerfile je znázorněný na obrázku 3 -6. Git.</span><span class="sxs-lookup"><span data-stu-id="16a11-318">An example Dockerfile is shown in Figure 3-6.git</span></span>

```docker
FROM mcr.microsoft.com/dotnet/core/aspnet:3.1-buster-slim AS base
WORKDIR /app
EXPOSE 80
EXPOSE 443

FROM mcr.microsoft.com/dotnet/core/sdk:3.1-buster AS build
WORKDIR /src
COPY ["eShopWeb/eShopWeb.csproj", "eShopWeb/"]
RUN dotnet restore "eShopWeb/eShopWeb.csproj"
COPY . .
WORKDIR "/src/eShopWeb"
RUN dotnet build "eShopWeb.csproj" -c Release -o /app/build

FROM build AS publish
RUN dotnet publish "eShopWeb.csproj" -c Release -o /app/publish

FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "eShopWeb.dll"]
```

<span data-ttu-id="16a11-319">**Obrázek 3-6**.</span><span class="sxs-lookup"><span data-stu-id="16a11-319">**Figure 3-6**.</span></span> <span data-ttu-id="16a11-320">Souboru Dockerfile vygenerované v aplikaci Visual Studio</span><span class="sxs-lookup"><span data-stu-id="16a11-320">Visual Studio generated Dockerfile</span></span>

<span data-ttu-id="16a11-321">Výchozí chování při spuštění aplikace je nakonfigurováno pro použití Docker.</span><span class="sxs-lookup"><span data-stu-id="16a11-321">The default behavior when the app runs is configured to use Docker as well.</span></span> <span data-ttu-id="16a11-322">Obrázek 3-7 ukazuje různé možnosti spuštění, které jsou k dispozici z nového projektu ASP.NET Core vytvořeného pomocí přidání podpory Docker.</span><span class="sxs-lookup"><span data-stu-id="16a11-322">Figure 3-7 shows the different run options available from a new ASP.NET Core project created with Docker support added.</span></span>

![Možnosti spuštění aplikace Visual Studio Docker](./media/visual-studio-docker-run-options.png)

<span data-ttu-id="16a11-324">**Obrázek 3-7**.</span><span class="sxs-lookup"><span data-stu-id="16a11-324">**Figure 3-7**.</span></span> <span data-ttu-id="16a11-325">Možnosti spuštění aplikace Visual Studio Docker</span><span class="sxs-lookup"><span data-stu-id="16a11-325">Visual Studio Docker Run Options</span></span>

<span data-ttu-id="16a11-326">Kromě místního vývoje [Azure dev Spaces](https://docs.microsoft.com/azure/dev-spaces/) poskytuje vývojářům pohodlný způsob, jak v rámci Azure pracovat s vlastními konfiguracemi Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="16a11-326">In addition to local development, [Azure Dev Spaces](https://docs.microsoft.com/azure/dev-spaces/) provides a convenient way for multiple developers to work with their own Kubernetes configurations within Azure.</span></span> <span data-ttu-id="16a11-327">Jak vidíte na obrázku 3-7, můžete také spustit aplikaci v Azure Dev Spaces.</span><span class="sxs-lookup"><span data-stu-id="16a11-327">As you can see in Figure 3-7, you can also run the application in Azure Dev Spaces.</span></span>

<span data-ttu-id="16a11-328">Kromě toho můžete kdykoli přidat podporu Docker do existující aplikace ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="16a11-328">Also, at any time you can add Docker support to an existing ASP.NET Core application.</span></span> <span data-ttu-id="16a11-329">V Průzkumník řešení sady Visual Studio klikněte pravým tlačítkem na projekt a **přidejte**  >  **podporu Docker**, jak je znázorněno na obrázku 3-8.</span><span class="sxs-lookup"><span data-stu-id="16a11-329">From the Visual Studio Solution Explorer, right click on the project and **Add** > **Docker Support**, as shown in Figure 3-8.</span></span>

![Přidat podporu Docker pro Visual Studio](./media/visual-studio-add-docker-support.png)

<span data-ttu-id="16a11-331">**Obrázek 3-8**.</span><span class="sxs-lookup"><span data-stu-id="16a11-331">**Figure 3-8**.</span></span> <span data-ttu-id="16a11-332">Přidání podpory Docker do sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="16a11-332">Adding Docker support to Visual Studio</span></span>

<span data-ttu-id="16a11-333">Můžete také přidat podporu orchestrace kontejnerů, která je také znázorněna na obrázku 3-8.</span><span class="sxs-lookup"><span data-stu-id="16a11-333">You can also add Container Orchestration Support, also shown in Figure 3-8.</span></span> <span data-ttu-id="16a11-334">Ve výchozím nastavení nástroj Orchestrator používá Kubernetes a Helm.</span><span class="sxs-lookup"><span data-stu-id="16a11-334">By default, the orchestrator uses Kubernetes and Helm.</span></span> <span data-ttu-id="16a11-335">Po zvolení nástroje Orchestrator se do `azds.yaml` kořenového adresáře projektu přidá soubor a `charts` přidá se složka obsahující Helm grafy používané ke konfiguraci a nasazení aplikace do Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="16a11-335">Once you've chosen the orchestrator, a `azds.yaml` file is added to the project root and a `charts` folder is added containing the Helm charts used to configure and deploy the application to Kubernetes.</span></span> <span data-ttu-id="16a11-336">Obrázek 3-9 ukazuje výsledné soubory v novém projektu.</span><span class="sxs-lookup"><span data-stu-id="16a11-336">Figure 3-9 shows the resulting files in a new project.</span></span>

<span data-ttu-id="16a11-337">Můžete také přidat podporu orchestrace kontejnerů, která je také znázorněna na obrázku 3-8.</span><span class="sxs-lookup"><span data-stu-id="16a11-337">You can also add Container Orchestration Support, also shown in Figure 3-8.</span></span> <span data-ttu-id="16a11-338">Ve výchozím nastavení nástroj Orchestrator používá Kubernetes a Helm.</span><span class="sxs-lookup"><span data-stu-id="16a11-338">By default, the orchestrator uses Kubernetes and Helm.</span></span> <span data-ttu-id="16a11-339">Po zvolení nástroje Orchestrator se do `azds.yaml` kořenového adresáře projektu přidá soubor a `charts` přidá se složka obsahující Helm grafy používané ke konfiguraci a nasazení aplikace do Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="16a11-339">Once you've chosen the orchestrator, a `azds.yaml` file is added to the project root and a `charts` folder is added containing the Helm charts used to configure and deploy the application to Kubernetes.</span></span> <span data-ttu-id="16a11-340">Obrázek 3-9 ukazuje výsledné soubory v novém projektu.</span><span class="sxs-lookup"><span data-stu-id="16a11-340">Figure 3-9 shows the resulting files in a new project.</span></span>

![Přidání podpory nástroje Orchestrator pro Visual Studio](./media/visual-studio-add-orchestrator-support.png)

<span data-ttu-id="16a11-342">**Obrázek 3-9**.</span><span class="sxs-lookup"><span data-stu-id="16a11-342">**Figure 3-9**.</span></span> <span data-ttu-id="16a11-343">Přidání podpory orchestrace do sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="16a11-343">Adding orchestration support to Visual Studio</span></span>

### <a name="visual-studio-code-docker-tooling"></a><span data-ttu-id="16a11-344">Nástroje Visual Studio Code Docker</span><span class="sxs-lookup"><span data-stu-id="16a11-344">Visual Studio Code Docker Tooling</span></span>

<span data-ttu-id="16a11-345">K dispozici je několik rozšíření pro Visual Studio Code, která podporují vývoj v Docker.</span><span class="sxs-lookup"><span data-stu-id="16a11-345">There are a number of extensions available for Visual Studio Code that support Docker development.</span></span>

<span data-ttu-id="16a11-346">Microsoft poskytuje [Docker pro rozšíření Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker).</span><span class="sxs-lookup"><span data-stu-id="16a11-346">Microsoft provides the [Docker for Visual Studio Code extension](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker).</span></span> <span data-ttu-id="16a11-347">Toto rozšíření zjednodušuje proces přidávání podpory kontejneru do aplikací.</span><span class="sxs-lookup"><span data-stu-id="16a11-347">This extension simplifies the process of adding container support to applications.</span></span> <span data-ttu-id="16a11-348">Tato generátory IT vyžaduje soubory, sestavuje image Docker a umožňuje ladit aplikaci v rámci kontejneru.</span><span class="sxs-lookup"><span data-stu-id="16a11-348">It scaffolds required files, builds Docker images, and enables you to debug your app inside a container.</span></span> <span data-ttu-id="16a11-349">Rozšíření nabízí vizuální Průzkumníka, který usnadňuje provedení akcí na kontejnerech a obrázcích, jako je například spuštění, zastavení, kontrola, odebrání a další.</span><span class="sxs-lookup"><span data-stu-id="16a11-349">The extension features a visual explorer that makes it easy to take actions on containers and images such as start, stop, inspect, remove, and more.</span></span> <span data-ttu-id="16a11-350">Rozšíření také podporuje Docker Compose, které vám umožní spravovat více spuštěných kontejnerů jako jednu jednotku.</span><span class="sxs-lookup"><span data-stu-id="16a11-350">The extension also supports Docker Compose enabling you to manage multiple running containers as a single unit.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="16a11-351">[Předchozí](scale-applications.md) 
> [Další](leverage-serverless-functions.md)</span><span class="sxs-lookup"><span data-stu-id="16a11-351">[Previous](scale-applications.md)
[Next](leverage-serverless-functions.md)</span></span>
