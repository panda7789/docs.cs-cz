---
title: Migrace jádra .NET z souboru project.json
description: Zjistěte, jak migrovat starší projekt .NET Core pomocí souboru project.json
ms.date: 07/19/2017
ms.openlocfilehash: 8a9dc05c82fd5476a70ee36a294a287abbfb68c4
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/15/2020
ms.locfileid: "77450684"
---
# <a name="migrating-net-core-projects-from-projectjson"></a><span data-ttu-id="94b84-103">Migrace základních projektů .NET z aplikace project.json</span><span class="sxs-lookup"><span data-stu-id="94b84-103">Migrating .NET Core projects from project.json</span></span>

<span data-ttu-id="94b84-104">Tento dokument popisuje následující tři scénáře migrace pro projekty .NET Core:</span><span class="sxs-lookup"><span data-stu-id="94b84-104">This document covers the following three migration scenarios for .NET Core projects:</span></span>

1. [<span data-ttu-id="94b84-105">Migrace z platného nejnovějšího schématu *project.json* na *csproj*</span><span class="sxs-lookup"><span data-stu-id="94b84-105">Migration from a valid latest schema of *project.json* to *csproj*</span></span>](#migration-from-projectjson-to-csproj)
2. [<span data-ttu-id="94b84-106">Migrace z DNX na csproj</span><span class="sxs-lookup"><span data-stu-id="94b84-106">Migration from DNX to csproj</span></span>](#migration-from-dnx-to-csproj)
3. [<span data-ttu-id="94b84-107">Přechod z RC3 a předchozích projektů .NET Core csproj do konečného formátu</span><span class="sxs-lookup"><span data-stu-id="94b84-107">Migration from RC3 and previous .NET Core csproj projects to the final format</span></span>](#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj)

<span data-ttu-id="94b84-108">Tento dokument je použitelný pouze pro starší projekty .NET Core, které používají project.json.</span><span class="sxs-lookup"><span data-stu-id="94b84-108">This document is only applicable to older .NET Core projects that use project.json.</span></span> <span data-ttu-id="94b84-109">Nevztahuje se na migraci z rozhraní .NET Framework na .NET Core.</span><span class="sxs-lookup"><span data-stu-id="94b84-109">It does not apply to migrating from .NET Framework to .NET Core.</span></span>

## <a name="migration-from-projectjson-to-csproj"></a><span data-ttu-id="94b84-110">Migrace z project.json na csproj</span><span class="sxs-lookup"><span data-stu-id="94b84-110">Migration from project.json to csproj</span></span>

<span data-ttu-id="94b84-111">Přechod z *project.json* na *.csproj* lze provést pomocí jedné z následujících metod:</span><span class="sxs-lookup"><span data-stu-id="94b84-111">Migration from *project.json* to *.csproj* can be done using one of the following methods:</span></span>

- [<span data-ttu-id="94b84-112">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="94b84-112">Visual Studio</span></span>](#visual-studio)
- [<span data-ttu-id="94b84-113">nástroj příkazového řádku dotnet migrate</span><span class="sxs-lookup"><span data-stu-id="94b84-113">dotnet migrate command-line tool</span></span>](#dotnet-migrate)

<span data-ttu-id="94b84-114">Obě metody používají stejný základní modul pro migraci projektů, takže výsledky budou stejné pro oba.</span><span class="sxs-lookup"><span data-stu-id="94b84-114">Both methods use the same underlying engine to migrate the projects, so the results will be the same for both.</span></span> <span data-ttu-id="94b84-115">Ve většině případů pomocí jednoho z těchto dvou způsobů migrace *project.json* na *csproj* je jediná věc, která je potřeba, a žádné další ruční úpravy souboru projektu je nutné.</span><span class="sxs-lookup"><span data-stu-id="94b84-115">In most cases, using one of these two ways to migrate the *project.json* to *csproj* is the only thing that is needed, and no further manual editing of the project file is necessary.</span></span> <span data-ttu-id="94b84-116">Výsledný soubor *.csproj* bude pojmenován stejně jako obsahující název adresáře.</span><span class="sxs-lookup"><span data-stu-id="94b84-116">The resulting *.csproj* file will be named the same as the containing directory name.</span></span>

### <a name="visual-studio"></a><span data-ttu-id="94b84-117">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="94b84-117">Visual Studio</span></span>

<span data-ttu-id="94b84-118">Když otevřete soubor *.xproj* nebo soubor řešení, který odkazuje na soubory *.xproj* v sadě Visual Studio 2017 nebo Visual Studio 2019 verze 16.2 a starší, zobrazí se dialogové okno **jednosměrného upgradu.**</span><span class="sxs-lookup"><span data-stu-id="94b84-118">When you open an *.xproj* file or a solution file that references *.xproj* files in Visual Studio 2017 or Visual Studio 2019 version 16.2 and earlier, the **One-way upgrade** dialog appears.</span></span> <span data-ttu-id="94b84-119">V dialogovém okně se zobrazí projekty, které mají být migrovány.</span><span class="sxs-lookup"><span data-stu-id="94b84-119">The dialog displays the projects to be migrated.</span></span> <span data-ttu-id="94b84-120">Pokud otevřete soubor řešení, jsou uvedeny všechny projekty zadané v souboru řešení.</span><span class="sxs-lookup"><span data-stu-id="94b84-120">If you open a solution file, all the projects specified in the solution file are listed.</span></span> <span data-ttu-id="94b84-121">Zkontrolujte seznam projektů, které mají být migrovány, a vyberte **ok**.</span><span class="sxs-lookup"><span data-stu-id="94b84-121">Review the list of projects to be migrated and select **OK**.</span></span>

![Dialogové okno jednosměrného upgradu se seznamem projektů, které mají být migrovány](media/one-way-upgrade.jpg)

<span data-ttu-id="94b84-123">Visual Studio migruje vybrané projekty automaticky.</span><span class="sxs-lookup"><span data-stu-id="94b84-123">Visual Studio migrates the selected projects automatically.</span></span> <span data-ttu-id="94b84-124">Při migraci řešení, pokud nevyberete všechny projekty, se zobrazí stejné dialogové okno s žádostí o upgrade zbývajících projektů z tohoto řešení.</span><span class="sxs-lookup"><span data-stu-id="94b84-124">When migrating a solution, if you don't choose all projects, the same dialog appears asking you to upgrade the remaining projects from that solution.</span></span> <span data-ttu-id="94b84-125">Po migraci projektu můžete zobrazit a upravit jeho obsah klepnutím pravým tlačítkem myši na projekt v okně **Průzkumník řešení** a výběrem **možnosti Upravit \<název projektu>.csproj**.</span><span class="sxs-lookup"><span data-stu-id="94b84-125">After the project is migrated, you can see and modify its contents by right-clicking the project in the **Solution Explorer** window and selecting **Edit \<project name>.csproj**.</span></span>

<span data-ttu-id="94b84-126">Přenesené soubory *(project.json*, *global.json*, *.xproj*a soubor řešení) jsou *přesunuty* do složky Backup.</span><span class="sxs-lookup"><span data-stu-id="94b84-126">Files that were migrated (*project.json*, *global.json*, *.xproj*, and solution file) are moved to a *Backup* folder.</span></span> <span data-ttu-id="94b84-127">Soubor přeneseného řešení se upgraduje na Visual Studio 2017 nebo Visual Studio 2019 a tento soubor řešení nebudete moct otevřít v visual tase 2015 nebo starších verzích.</span><span class="sxs-lookup"><span data-stu-id="94b84-127">The migrated solution file is upgraded to Visual Studio 2017 or Visual Studio 2019 and you won't be able to open that solution file in Visual Studio 2015 or earlier versions.</span></span> <span data-ttu-id="94b84-128">Soubor s názvem *UpgradeLog.htm,* který obsahuje sestavu migrace je také uložen a otevřen automaticky.</span><span class="sxs-lookup"><span data-stu-id="94b84-128">A file named *UpgradeLog.htm* that contains a migration report is also saved and opened automatically.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="94b84-129">Ve Visual Studiu 2019 verze 16.3 a novějších nelze načíst nebo migrovat soubor *.xproj.*</span><span class="sxs-lookup"><span data-stu-id="94b84-129">In Visual Studio 2019 version 16.3 and later, you cannot load or migrate an *.xproj* file.</span></span> <span data-ttu-id="94b84-130">Visual Studio 2015 navíc neposkytuje možnost migrace souboru *.xproj.*</span><span class="sxs-lookup"><span data-stu-id="94b84-130">Additionally, Visual Studio 2015 doesn't provide the ability to migrate an *.xproj* file.</span></span> <span data-ttu-id="94b84-131">Pokud používáte některou z těchto verzí sady Visual Studio, nainstalujte vhodnou verzi sady Visual Studio nebo použijte nástroj pro migraci příkazového řádku, který je popsán dále.</span><span class="sxs-lookup"><span data-stu-id="94b84-131">If you're using one of these Visual Studio versions, either install a suitable version of Visual Studio, or use the command line migration tool that's described next.</span></span>

### <a name="dotnet-migrate"></a><span data-ttu-id="94b84-132">dotnet migrate</span><span class="sxs-lookup"><span data-stu-id="94b84-132">dotnet migrate</span></span>

<span data-ttu-id="94b84-133">Ve scénáři příkazového řádku můžete [`dotnet migrate`](../tools/dotnet-migrate.md) použít příkaz.</span><span class="sxs-lookup"><span data-stu-id="94b84-133">In the command-line scenario, you can use the [`dotnet migrate`](../tools/dotnet-migrate.md) command.</span></span> <span data-ttu-id="94b84-134">Migruje projekt, řešení nebo sadu složek v tomto pořadí, v závislosti na tom, které byly nalezeny.</span><span class="sxs-lookup"><span data-stu-id="94b84-134">It migrates a project, a solution, or a set of folders in that order, depending on which ones were found.</span></span> <span data-ttu-id="94b84-135">Při migraci projektu se migruje projekt a všechny jeho závislosti.</span><span class="sxs-lookup"><span data-stu-id="94b84-135">When you migrate a project, the project and all its dependencies are migrated.</span></span>

<span data-ttu-id="94b84-136">Přenesené soubory *(project.json*, *global.json*a *.xproj*) jsou přesunuty do *záložní* složky.</span><span class="sxs-lookup"><span data-stu-id="94b84-136">Files that were migrated (*project.json*, *global.json*, and *.xproj*) are moved to a *backup* folder.</span></span>

> [!NOTE]
> <span data-ttu-id="94b84-137">Pokud používáte visual studio `dotnet migrate` kód, příkaz nemění Soubory specifické pro kód sady Visual Studio, jako je *například tasks.json*.</span><span class="sxs-lookup"><span data-stu-id="94b84-137">If you are using Visual Studio Code, the `dotnet migrate` command does not modify Visual Studio Code-specific files such as *tasks.json*.</span></span> <span data-ttu-id="94b84-138">Tyto soubory je třeba změnit ručně.</span><span class="sxs-lookup"><span data-stu-id="94b84-138">These files need to be changed manually.</span></span>
> <span data-ttu-id="94b84-139">To platí také, pokud používáte editor nebo integrované vývojové prostředí (IDE) než Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="94b84-139">This is also true if you are using an editor or Integrated Development Environment (IDE) other than Visual Studio.</span></span>

<span data-ttu-id="94b84-140">Porovnání formátů *project.json* a *.csproj* naleznete v [tématu Mapování mezi vlastnostmi project.json a csproj.](../tools/project-json-to-csproj.md)</span><span class="sxs-lookup"><span data-stu-id="94b84-140">See [A mapping between project.json and csproj properties](../tools/project-json-to-csproj.md) for a comparison of *project.json* and *.csproj* formats.</span></span>

<span data-ttu-id="94b84-141">Pokud se zobrazí chyba:</span><span class="sxs-lookup"><span data-stu-id="94b84-141">If you get an error:</span></span>

> <span data-ttu-id="94b84-142">Nebyl nalezen žádný spustitelný soubor odpovídající příkaz dotnet-migrate</span><span class="sxs-lookup"><span data-stu-id="94b84-142">No executable found matching command dotnet-migrate</span></span>

<span data-ttu-id="94b84-143">Spuštěním `dotnet --version` zobrazíte, kterou verzi používáte.</span><span class="sxs-lookup"><span data-stu-id="94b84-143">Run `dotnet --version` to see which version you are using.</span></span> <span data-ttu-id="94b84-144">[`dotnet migrate`](../tools/dotnet-migrate.md)byl zaveden v .NET Core SDK 1.0.0 a odebrán ve verzi 3.0.100.</span><span class="sxs-lookup"><span data-stu-id="94b84-144">[`dotnet migrate`](../tools/dotnet-migrate.md) was introduced in .NET Core SDK 1.0.0 and removed in version 3.0.100.</span></span>
<span data-ttu-id="94b84-145">Tato chyba se zobrazí, pokud máte soubor *global.json* v aktuálním `sdk` nebo nadřazeném adresáři a verze, kterou určuje, je mimo tento rozsah.</span><span class="sxs-lookup"><span data-stu-id="94b84-145">You'll get this error if you have a *global.json* file in the current or parent directory, and the `sdk` version it specifies is outside this range.</span></span>

## <a name="migration-from-dnx-to-csproj"></a><span data-ttu-id="94b84-146">Migrace z DNX na csproj</span><span class="sxs-lookup"><span data-stu-id="94b84-146">Migration from DNX to csproj</span></span>

<span data-ttu-id="94b84-147">Pokud stále používáte DNX pro vývoj jádra .NET, proces migrace by měl být proveden ve dvou fázích:</span><span class="sxs-lookup"><span data-stu-id="94b84-147">If you are still using DNX for .NET Core development, your migration process should be done in two stages:</span></span>

1. <span data-ttu-id="94b84-148">Pomocí [existujících pokynů pro migraci DNX](from-dnx.md) migrujte z rozhraní cli s podporou projektu-json.</span><span class="sxs-lookup"><span data-stu-id="94b84-148">Use the [existing DNX migration guidance](from-dnx.md) to migrate from DNX to project-json enabled CLI.</span></span>
2. <span data-ttu-id="94b84-149">Podle pokynů z předchozí části migrujte z *souboru project.json* na *soubor .csproj*.</span><span class="sxs-lookup"><span data-stu-id="94b84-149">Follow the steps from the previous section to migrate from *project.json* to *.csproj*.</span></span>

> [!NOTE]
> <span data-ttu-id="94b84-150">DNX se stala oficiálně zastaralé během verze Preview 1 rozhraní CLI .NET Core.</span><span class="sxs-lookup"><span data-stu-id="94b84-150">DNX has become officially deprecated during the Preview 1 release of the .NET Core CLI.</span></span>

## <a name="migration-from-earlier-net-core-csproj-formats-to-rtm-csproj"></a><span data-ttu-id="94b84-151">Migrace z dřívějších formátů csproj .NET Core do RTM csproj</span><span class="sxs-lookup"><span data-stu-id="94b84-151">Migration from earlier .NET Core csproj formats to RTM csproj</span></span>

<span data-ttu-id="94b84-152">Formát .NET Core csproj se mění a vyvíjí s každou novou předběžnou verzí nástroje.</span><span class="sxs-lookup"><span data-stu-id="94b84-152">The .NET Core csproj format has been changing and evolving with each new pre-release version of the tooling.</span></span> <span data-ttu-id="94b84-153">Neexistuje žádný nástroj, který bude migrovat soubor projektu z dřívějších verzí csproj na nejnovější, takže je třeba ručně upravit soubor projektu.</span><span class="sxs-lookup"><span data-stu-id="94b84-153">There is no tool that will migrate your project file from earlier versions of csproj to the latest, so you need to manually edit the project file.</span></span> <span data-ttu-id="94b84-154">Skutečné kroky závisí na verzi souboru projektu, který migrujete.</span><span class="sxs-lookup"><span data-stu-id="94b84-154">The actual steps depend on the version of the project file you are migrating.</span></span> <span data-ttu-id="94b84-155">Následuje některé pokyny, které je třeba zvážit na základě změn, ke kterým došlo mezi verzemi:</span><span class="sxs-lookup"><span data-stu-id="94b84-155">The following is some guidance to consider based on the changes that happened between versions:</span></span>

- <span data-ttu-id="94b84-156">Odeberte vlastnost verze `<Project>` nástrojů z prvku, pokud existuje.</span><span class="sxs-lookup"><span data-stu-id="94b84-156">Remove the tools version property from the `<Project>` element, if it exists.</span></span>
- <span data-ttu-id="94b84-157">Odeberte z`xmlns`elementu `<Project>` obor názvů XML ( ).</span><span class="sxs-lookup"><span data-stu-id="94b84-157">Remove the XML namespace (`xmlns`) from the `<Project>` element.</span></span>
- <span data-ttu-id="94b84-158">Pokud neexistuje, přidejte `Sdk` atribut do `<Project>` prvku a nastavte `Microsoft.NET.Sdk` `Microsoft.NET.Sdk.Web`jej na nebo .</span><span class="sxs-lookup"><span data-stu-id="94b84-158">If it doesn't exist, add the `Sdk` attribute to the `<Project>` element and set it to `Microsoft.NET.Sdk` or `Microsoft.NET.Sdk.Web`.</span></span> <span data-ttu-id="94b84-159">Tento atribut určuje, že projekt používá sadu SDK, která má být použita.</span><span class="sxs-lookup"><span data-stu-id="94b84-159">This attribute specifies that the project uses the SDK to be used.</span></span> <span data-ttu-id="94b84-160">`Microsoft.NET.Sdk.Web`se používá pro webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="94b84-160">`Microsoft.NET.Sdk.Web` is used for web apps.</span></span>
- <span data-ttu-id="94b84-161">Odeberte příkazy `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` a `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` z horní a dolní části projektu.</span><span class="sxs-lookup"><span data-stu-id="94b84-161">Remove the `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` and `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` statements from the top and bottom of the project.</span></span> <span data-ttu-id="94b84-162">Tyto příkazy importu jsou implicitní sadou SDK, takže není nutné, aby byly v projektu.</span><span class="sxs-lookup"><span data-stu-id="94b84-162">These import statements are implied by the SDK, so there is no need for them to be in the project.</span></span>
- <span data-ttu-id="94b84-163">Pokud máte `Microsoft.NETCore.App` `NETStandard.Library` `<PackageReference>` nebo položky v projektu, měli byste je odebrat.</span><span class="sxs-lookup"><span data-stu-id="94b84-163">If you have `Microsoft.NETCore.App` or `NETStandard.Library` `<PackageReference>` items in your project, you should remove them.</span></span> <span data-ttu-id="94b84-164">Tyto odkazy na balíček jsou [implikovány sadou SDK](https://aka.ms/sdkimplicitrefs).</span><span class="sxs-lookup"><span data-stu-id="94b84-164">These package references are [implied by the SDK](https://aka.ms/sdkimplicitrefs).</span></span>
- <span data-ttu-id="94b84-165">`Microsoft.NET.Sdk` `<PackageReference>` Odeberte prvek, pokud existuje.</span><span class="sxs-lookup"><span data-stu-id="94b84-165">Remove the `Microsoft.NET.Sdk` `<PackageReference>` element, if it exists.</span></span> <span data-ttu-id="94b84-166">Odkaz sady SDK `Sdk` prochází atributem na `<Project>` prvku.</span><span class="sxs-lookup"><span data-stu-id="94b84-166">The SDK reference comes through the `Sdk` attribute on the `<Project>` element.</span></span>
- <span data-ttu-id="94b84-167">Odeberte [globs,](https://en.wikipedia.org/wiki/Glob_(programming)) které jsou [implikovány sadou SDK](../project-sdk/overview.md#default-compilation-includes).</span><span class="sxs-lookup"><span data-stu-id="94b84-167">Remove the [globs](https://en.wikipedia.org/wiki/Glob_(programming)) that are [implied by the SDK](../project-sdk/overview.md#default-compilation-includes).</span></span> <span data-ttu-id="94b84-168">Ponechání těchto globs v projektu způsobí chybu na sestavení, protože kompilace položky budou duplikovány.</span><span class="sxs-lookup"><span data-stu-id="94b84-168">Leaving these globs in your project will cause an error on build because compile items will be duplicated.</span></span>

<span data-ttu-id="94b84-169">Po těchto krocích by měl být projekt plně kompatibilní s formátem CSProJ RTM .NET Core.</span><span class="sxs-lookup"><span data-stu-id="94b84-169">After these steps your project should be fully compatible with the RTM .NET Core csproj format.</span></span>

<span data-ttu-id="94b84-170">Příklady před a po migraci ze starého formátu csproj do nového, naleznete [v aktualizaci Visual Studio 2017 RC – .NET Core Tooling vylepšení](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) článku na blogu .NET.</span><span class="sxs-lookup"><span data-stu-id="94b84-170">For examples of before and after the migration from old csproj format to the new one, see the [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) article on the .NET blog.</span></span>

## <a name="see-also"></a><span data-ttu-id="94b84-171">Viz také</span><span class="sxs-lookup"><span data-stu-id="94b84-171">See also</span></span>

- [<span data-ttu-id="94b84-172">Port, migrace a upgrade projektů sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="94b84-172">Port, Migrate, and Upgrade Visual Studio Projects</span></span>](/visualstudio/porting/port-migrate-and-upgrade-visual-studio-projects)
