---
title: .NET core migrace na formát csproj
description: .NET core project.json na csproj migrace
author: blackdwarf
ms.author: mairaw
ms.date: 07/19/2017
ms.openlocfilehash: da1995ed3b77cb802d1f3d04e6d741809de20927
ms.sourcegitcommit: 3ab9254890a52a50762995fa6d7d77a00348db7e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/20/2018
ms.locfileid: "46471850"
---
# <a name="migrating-net-core-projects-to-the-csproj-format"></a><span data-ttu-id="9107e-103">Migrace projektů .NET Core na formát csproj</span><span class="sxs-lookup"><span data-stu-id="9107e-103">Migrating .NET Core projects to the .csproj format</span></span>

<span data-ttu-id="9107e-104">V tomto dokumentu se týkají scénářů migrace pro projekty .NET Core a půjdou přes následující scénáře migrace tři:</span><span class="sxs-lookup"><span data-stu-id="9107e-104">This document will cover migration scenarios for .NET Core projects and will go over the following three migration scenarios:</span></span>

1. [<span data-ttu-id="9107e-105">Migrace z platné schéma nejnovější *project.json* k *csproj*</span><span class="sxs-lookup"><span data-stu-id="9107e-105">Migration from a valid latest schema of *project.json* to *csproj*</span></span>](#migration-from-projectjson-to-csproj)
2. [<span data-ttu-id="9107e-106">Migrace z DNX na csproj</span><span class="sxs-lookup"><span data-stu-id="9107e-106">Migration from DNX to csproj</span></span>](#migration-from-dnx-to-csproj)
3. [<span data-ttu-id="9107e-107">Migrace z předchozích projektů csproj .NET Core a RC3 do konečné</span><span class="sxs-lookup"><span data-stu-id="9107e-107">Migration from RC3 and previous .NET Core csproj projects to the final format</span></span>](#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj)

## <a name="migration-from-projectjson-to-csproj"></a><span data-ttu-id="9107e-108">Migrace z project.json na csproj</span><span class="sxs-lookup"><span data-stu-id="9107e-108">Migration from project.json to csproj</span></span>

<span data-ttu-id="9107e-109">Migrace z *project.json* k *.csproj* lze provést pomocí jedné z následujících metod:</span><span class="sxs-lookup"><span data-stu-id="9107e-109">Migration from *project.json* to *.csproj* can be done using one of the following methods:</span></span>

- [<span data-ttu-id="9107e-110">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="9107e-110">Visual Studio 2017</span></span>](#visual-studio-2017)
- [<span data-ttu-id="9107e-111">migrace nástroje příkazového řádku DotNet</span><span class="sxs-lookup"><span data-stu-id="9107e-111">dotnet migrate command-line tool</span></span>](#dotnet-migrate)

<span data-ttu-id="9107e-112">Obě metody používají stejný základní modul k migraci projektů, takže výsledky budou stejné pro obě.</span><span class="sxs-lookup"><span data-stu-id="9107e-112">Both methods use the same underlying engine to migrate the projects, so the results will be the same for both.</span></span> <span data-ttu-id="9107e-113">Ve většině případů pomocí jedné z těchto dvou způsobů, jak migrovat *project.json* k *csproj* pouze jednu, která je potřeba a žádné další ruční úpravy souboru projektu je nezbytné.</span><span class="sxs-lookup"><span data-stu-id="9107e-113">In most cases, using one of these two ways to migrate the *project.json* to *csproj* is the only thing that is needed and no further manual editing of the project file is necessary.</span></span> <span data-ttu-id="9107e-114">Výsledná *.csproj* soubor bude pojmenován stejně jako obsahující název adresáře.</span><span class="sxs-lookup"><span data-stu-id="9107e-114">The resulting *.csproj* file will be named the same as the containing directory name.</span></span>

### <a name="visual-studio-2017"></a><span data-ttu-id="9107e-115">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="9107e-115">Visual Studio 2017</span></span>

<span data-ttu-id="9107e-116">Při otevření *xproj* soubor nebo řešení, který se odkazuje na soubor *xproj* soubory, **jednosměrnou aktualizaci** se zobrazí dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="9107e-116">When you open a *.xproj* file or a solution file which references *.xproj* files, the **One-way upgrade** dialog appears.</span></span> <span data-ttu-id="9107e-117">Dialogové okno zobrazuje projekty, které chcete migrovat.</span><span class="sxs-lookup"><span data-stu-id="9107e-117">The dialog displays the projects to be migrated.</span></span>
<span data-ttu-id="9107e-118">Pokud otevřete soubor řešení, zobrazí se všechny projekty určené v souboru řešení.</span><span class="sxs-lookup"><span data-stu-id="9107e-118">If you open a solution file, all the projects specified in the solution file will be listed.</span></span> <span data-ttu-id="9107e-119">Zkontrolujte seznam projektů, které chcete migrovat a vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="9107e-119">Review the list of projects to be migrated and select **OK**.</span></span>

![Jednosměrný upgrade dialogové okno se seznamem projekty k migraci](media/one-way-upgrade.jpg)

<span data-ttu-id="9107e-121">Visual Studio bude migrovat projekty automaticky vybrána.</span><span class="sxs-lookup"><span data-stu-id="9107e-121">Visual Studio will migrate the projects chosen automatically.</span></span> <span data-ttu-id="9107e-122">Při migraci řešení, pokud není možnost všechny projekty, stejné zobrazí se dialogové okno s výzvou k upgradu Zbývající projekty z řešení.</span><span class="sxs-lookup"><span data-stu-id="9107e-122">When migrating a solution, if you don't choose all projects, the same dialog will appear asking you to upgrade the remaining projects from that solution.</span></span> <span data-ttu-id="9107e-123">Po migraci oznámení o projekt, můžete zobrazit a upravit jeho obsah kliknutím pravým tlačítkem myši na projekt v **Průzkumníka řešení** okno a vyberete **upravit \<název projektu > .csproj**.</span><span class="sxs-lookup"><span data-stu-id="9107e-123">After the project is migrated, you can see and modify its contents by right-clicking the project in the **Solution Explorer** window and selecting **Edit \<project name>.csproj**.</span></span>

<span data-ttu-id="9107e-124">Soubory, které se migrovaly (*project.json*, *global.json*, *xproj* a soubor řešení) se přesune do *zálohování* složky.</span><span class="sxs-lookup"><span data-stu-id="9107e-124">Files that were migrated (*project.json*, *global.json*, *.xproj* and solution file) will be moved to a *Backup* folder.</span></span> <span data-ttu-id="9107e-125">Soubor řešení, která je migrována se upgraduje na Visual Studio 2017 a nebude možné v předchozích verzích sady Visual Studio otevřete soubor řešení.</span><span class="sxs-lookup"><span data-stu-id="9107e-125">The solution file that is migrated will be upgraded to Visual Studio 2017 and you won't be able to open that solution file in previous versions of Visual Studio.</span></span>
<span data-ttu-id="9107e-126">Soubor s názvem *UpgradeLog.htm* je také uložena a automaticky otevře, která obsahuje sestavu migrace.</span><span class="sxs-lookup"><span data-stu-id="9107e-126">A file named *UpgradeLog.htm* is also saved and automatically opened that contains a migration report.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9107e-127">Nové nástroje není k dispozici v sadě Visual Studio 2015, proto nejde migraci vašich projektů pomocí této verze sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="9107e-127">The new tooling is not available in Visual Studio 2015, so you cannot migrate your projects using that version of Visual Studio.</span></span>

### <a name="dotnet-migrate"></a><span data-ttu-id="9107e-128">DotNet migrate</span><span class="sxs-lookup"><span data-stu-id="9107e-128">dotnet migrate</span></span>

<span data-ttu-id="9107e-129">Ve scénáři příkazového řádku, můžete použít [ `dotnet migrate` ](../tools/dotnet-migrate.md) příkazu.</span><span class="sxs-lookup"><span data-stu-id="9107e-129">In the command-line scenario, you can use the [`dotnet migrate`](../tools/dotnet-migrate.md) command.</span></span> <span data-ttu-id="9107e-130">Se bude migrovat projekt, řešení nebo sadě složek v tomto pořadí, v závislosti na tom, které stojí za nebyly nalezeny.</span><span class="sxs-lookup"><span data-stu-id="9107e-130">It will migrate a project, a solution or a set of folders in that order, depending on which ones were found.</span></span>
<span data-ttu-id="9107e-131">Při migraci projekt, se migrují projektu a všechny jeho závislosti.</span><span class="sxs-lookup"><span data-stu-id="9107e-131">When you migrate a project, the project and all its dependencies are migrated.</span></span>

<span data-ttu-id="9107e-132">Soubory, které se migrovaly (*project.json*, *global.json* a *xproj*) bude přesunut do *zálohování* složky.</span><span class="sxs-lookup"><span data-stu-id="9107e-132">Files that were migrated (*project.json*, *global.json* and *.xproj*) will be moved to a *backup* folder.</span></span>

> [!NOTE]
> <span data-ttu-id="9107e-133">Pokud používáte Visual Studio Code `dotnet migrate` příkaz nezmění, jako soubory specifické pro Visual Studio Code `tasks.json`.</span><span class="sxs-lookup"><span data-stu-id="9107e-133">If you are using Visual Studio Code, the `dotnet migrate` command will not modify Visual Studio Code-specific files such as `tasks.json`.</span></span> <span data-ttu-id="9107e-134">Tyto soubory musí být změněno ručně.</span><span class="sxs-lookup"><span data-stu-id="9107e-134">These files need to be changed manually.</span></span>
> <span data-ttu-id="9107e-135">Toto je hodnota true, pokud používáte Ryder projektu nebo editor nebo integrované vývojové prostředí (IDE) jiné než Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="9107e-135">This is also true if you are using Project Ryder or any editor or Integrated Development Environment (IDE) other than Visual Studio.</span></span>

<span data-ttu-id="9107e-136">Zobrazit [mapování mezi project.json a csproj vlastnosti](../tools/project-json-to-csproj.md) porovnání project.json a csproj formátů.</span><span class="sxs-lookup"><span data-stu-id="9107e-136">See [A mapping between project.json and csproj properties](../tools/project-json-to-csproj.md) for a comparison of project.json and csproj formats.</span></span>

### <a name="common-issues"></a><span data-ttu-id="9107e-137">Běžné problémy</span><span class="sxs-lookup"><span data-stu-id="9107e-137">Common issues</span></span>

- <span data-ttu-id="9107e-138">Pokud dojde k chybě: "žádná spustitelný soubor se nenašel odpovídající příkaz dotnet-migrace":</span><span class="sxs-lookup"><span data-stu-id="9107e-138">If you get an error: "No executable found matching command dotnet-migrate":</span></span>

<span data-ttu-id="9107e-139">Spustit `dotnet --version` zobrazíte kterou verzi používáte.</span><span class="sxs-lookup"><span data-stu-id="9107e-139">Run `dotnet --version` to see which version you are using.</span></span> <span data-ttu-id="9107e-140">[`dotnet migrate`](../tools/dotnet-migrate.md) vyžaduje RC3 rozhraní příkazového řádku .NET Core nebo vyšší.</span><span class="sxs-lookup"><span data-stu-id="9107e-140">[`dotnet migrate`](../tools/dotnet-migrate.md) requires .NET Core CLI RC3 or higher.</span></span>
<span data-ttu-id="9107e-141">Pokud máte, zobrazí se tato chyba *global.json* soubor v aktuálním nebo nadřazeném adresáři a `sdk` verze je nastaveno na starší verze.</span><span class="sxs-lookup"><span data-stu-id="9107e-141">You’ll get this error if you have a *global.json* file in the current or parent directory and the `sdk` version is set to an older version.</span></span>

## <a name="migration-from-dnx-to-csproj"></a><span data-ttu-id="9107e-142">Migrace z DNX na csproj</span><span class="sxs-lookup"><span data-stu-id="9107e-142">Migration from DNX to csproj</span></span>

<span data-ttu-id="9107e-143">Pokud stále používáte DNX pro vývoj v .NET Core, proces migrace by měl provést ve dvou fázích:</span><span class="sxs-lookup"><span data-stu-id="9107e-143">If you are still using DNX for .NET Core development, your migration process should be done in two stages:</span></span>

1. <span data-ttu-id="9107e-144">Použití [pokyny k migraci existujícího DNX](from-dnx.md) migrace z DNX project-json povolené rozhraní příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="9107e-144">Use the [existing DNX migration guidance](from-dnx.md) to migrate from DNX to project-json enabled CLI.</span></span>
2. <span data-ttu-id="9107e-145">Postupujte podle kroků v předchozí části migrace z *project.json* k *.csproj*.</span><span class="sxs-lookup"><span data-stu-id="9107e-145">Follow the steps from the previous section to migrate from *project.json* to *.csproj*.</span></span>  

> [!NOTE]
> <span data-ttu-id="9107e-146">DNX stát oficiálně zastaralé během verze Preview 1 z rozhraní příkazového řádku .NET Core.</span><span class="sxs-lookup"><span data-stu-id="9107e-146">DNX has become officially deprecated during the Preview 1 release of the .NET Core CLI.</span></span>

## <a name="migration-from-earlier-net-core-csproj-formats-to-rtm-csproj"></a><span data-ttu-id="9107e-147">Migrace ze starší formáty souboru csproj .NET Core na verzi RTM csproj</span><span class="sxs-lookup"><span data-stu-id="9107e-147">Migration from earlier .NET Core csproj formats to RTM csproj</span></span>

<span data-ttu-id="9107e-148">Formát csproj .NET Core byly změny a vyvíjejí s každou novou verzí předběžné verze nástrojů.</span><span class="sxs-lookup"><span data-stu-id="9107e-148">The .NET Core csproj format has been changing and evolving with each new pre-release version of the tooling.</span></span> <span data-ttu-id="9107e-149">Neexistuje žádný nástroj, budete migrovat váš soubor projektu z předchozích verzí souboru csproj na nejnovější verzi, takže budete muset ručně upravit soubor projektu.</span><span class="sxs-lookup"><span data-stu-id="9107e-149">There is no tool that will migrate your project file from earlier versions of csproj to the latest, so you need to manually edit the project file.</span></span> <span data-ttu-id="9107e-150">Skutečné postup závisí na verzi souboru projektu, kterou migrujete.</span><span class="sxs-lookup"><span data-stu-id="9107e-150">The actual steps depend on the version of the project file you are migrating.</span></span> <span data-ttu-id="9107e-151">Níže uvádíme některé pokyny, které je třeba zvážit podle změn, ke kterým došlo mezi verzemi:</span><span class="sxs-lookup"><span data-stu-id="9107e-151">The following is some guidance to consider based on the changes that happened between versions:</span></span>

* <span data-ttu-id="9107e-152">Odebrat vlastnost verze nástroje z `<Project>` element, pokud existuje.</span><span class="sxs-lookup"><span data-stu-id="9107e-152">Remove the tools version property from the `<Project>` element, if it exists.</span></span>
* <span data-ttu-id="9107e-153">Odebrat obor názvů XML (`xmlns`) z `<Project>` elementu.</span><span class="sxs-lookup"><span data-stu-id="9107e-153">Remove the XML namespace (`xmlns`) from the `<Project>` element.</span></span>
* <span data-ttu-id="9107e-154">Pokud neexistuje, přidejte `Sdk` atribut `<Project>` elementu a nastavte ho na `Microsoft.NET.Sdk` nebo `Microsoft.NET.Sdk.Web`.</span><span class="sxs-lookup"><span data-stu-id="9107e-154">If it doesn't exist, add the `Sdk` attribute to the `<Project>` element and set it to `Microsoft.NET.Sdk` or `Microsoft.NET.Sdk.Web`.</span></span> <span data-ttu-id="9107e-155">Tento atribut určuje, že projekt používá sadu SDK má být použit.</span><span class="sxs-lookup"><span data-stu-id="9107e-155">This attribute specifies that the project uses the SDK to be used.</span></span> <span data-ttu-id="9107e-156">`Microsoft.NET.Sdk.Web` se používá pro webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="9107e-156">`Microsoft.NET.Sdk.Web` is used for web apps.</span></span>
* <span data-ttu-id="9107e-157">Odeberte `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` a `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` příkazů v horní a dolní část projektu.</span><span class="sxs-lookup"><span data-stu-id="9107e-157">Remove the `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` and `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` statements from the top and bottom of the project.</span></span> <span data-ttu-id="9107e-158">Import, tyto příkazy jsou odvozené od SDK, takže není nutné, aby se v projektu.</span><span class="sxs-lookup"><span data-stu-id="9107e-158">These import statements are implied by the SDK, so there is no need for them to be in the project.</span></span>
* <span data-ttu-id="9107e-159">Pokud máte `Microsoft.NETCore.App` nebo `NETStandard.Library` `<PackageReference>` položky ve vašem projektu, měli byste odebrat je.</span><span class="sxs-lookup"><span data-stu-id="9107e-159">If you have `Microsoft.NETCore.App` or `NETStandard.Library` `<PackageReference>` items in your project, you should remove them.</span></span> <span data-ttu-id="9107e-160">Odkazy na tyto balíčky jsou [mlčky předpokládané sadou SDK](https://aka.ms/sdkimplicitrefs).</span><span class="sxs-lookup"><span data-stu-id="9107e-160">These package references are [implied by the SDK](https://aka.ms/sdkimplicitrefs).</span></span>
* <span data-ttu-id="9107e-161">Odeberte `Microsoft.NET.Sdk` `<PackageReference>` element, pokud existuje.</span><span class="sxs-lookup"><span data-stu-id="9107e-161">Remove the `Microsoft.NET.Sdk` `<PackageReference>` element, if it exists.</span></span> <span data-ttu-id="9107e-162">Prochází odkazu sady SDK `Sdk` atribut na `<Project>` elementu.</span><span class="sxs-lookup"><span data-stu-id="9107e-162">The SDK reference comes through the `Sdk` attribute on the `<Project>` element.</span></span>
* <span data-ttu-id="9107e-163">Odeberte [globy](https://en.wikipedia.org/wiki/Glob_(programming)) , které jsou [mlčky předpokládané sadou SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span><span class="sxs-lookup"><span data-stu-id="9107e-163">Remove the [globs](https://en.wikipedia.org/wiki/Glob_(programming)) that are [implied by the SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span></span> <span data-ttu-id="9107e-164">Opuštění tyto globy ve vašem projektu způsobí chybu sestavení vzhledem k tomu, že bude duplikovat položky kompilace.</span><span class="sxs-lookup"><span data-stu-id="9107e-164">Leaving these globs in your project will cause an error on build because compile items will be duplicated.</span></span>

<span data-ttu-id="9107e-165">Po provedení těchto kroků by měl být váš projekt plně kompatibilní s formátem souboru csproj RTM .NET Core.</span><span class="sxs-lookup"><span data-stu-id="9107e-165">After these steps your project should be fully compatible with the RTM .NET Core csproj format.</span></span>

<span data-ttu-id="9107e-166">Příklady před a po dokončení migrace ze starého formátu csproj do nové, najdete v článku [aktualizace sady Visual Studio 2017 RC – vylepšení nástrojů .NET Core](https://blogs.msdn.microsoft.com/dotnet/2016/12/12/updating-visual-studio-2017-rc-net-core-tooling-improvements/) článek na blogu .NET.</span><span class="sxs-lookup"><span data-stu-id="9107e-166">For examples of before and after the migration from old csproj format to the new one, see the [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://blogs.msdn.microsoft.com/dotnet/2016/12/12/updating-visual-studio-2017-rc-net-core-tooling-improvements/) article on the .NET blog.</span></span>

## <a name="see-also"></a><span data-ttu-id="9107e-167">Viz také:</span><span class="sxs-lookup"><span data-stu-id="9107e-167">See also</span></span>

- [<span data-ttu-id="9107e-168">Přenos, migrace a Upgrade projektů sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="9107e-168">Port, Migrate, and Upgrade Visual Studio Projects</span></span>](/visualstudio/porting/port-migrate-and-upgrade-visual-studio-projects)
