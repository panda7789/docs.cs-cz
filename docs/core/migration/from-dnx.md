---
title: Migrace z DNX na .NET Core CLI
description: Migrujte z použití nástrojů DNX k .NET Core CLI nástrojů.
ms.date: 06/20/2016
ms.openlocfilehash: e15e7ce10bb7a36deb2acd2abb9a0bd4ec8cd4a9
ms.sourcegitcommit: cdf5084648bf5e77970cbfeaa23f1cab3e6e234e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 02/01/2020
ms.locfileid: "76920628"
---
# <a name="migrating-from-dnx-to-net-core-cli-projectjson"></a><span data-ttu-id="e6f5b-103">Migrace z DNX na .NET Core CLI (Project. JSON)</span><span class="sxs-lookup"><span data-stu-id="e6f5b-103">Migrating from DNX to .NET Core CLI (project.json)</span></span>

## <a name="overview"></a><span data-ttu-id="e6f5b-104">Přehled</span><span class="sxs-lookup"><span data-stu-id="e6f5b-104">Overview</span></span>
<span data-ttu-id="e6f5b-105">Verze RC1 rozhraní .NET Core a ASP.NET Core 1,0 představila nástroje DNX.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-105">The RC1 release of .NET Core and ASP.NET Core 1.0 introduced DNX tooling.</span></span> <span data-ttu-id="e6f5b-106">Verze RC2 rozhraní .NET Core a ASP.NET Core 1,0 byla přesunuta z DNX do .NET Core CLI.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-106">The RC2 release of .NET Core and ASP.NET Core 1.0 moved from DNX to the .NET Core CLI.</span></span>

<span data-ttu-id="e6f5b-107">Jako mírnou aktualizační program si rekapitulace, co se DNX.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-107">As a slight refresher, let's recap what DNX was about.</span></span> <span data-ttu-id="e6f5b-108">DNX je modul runtime a sada nástrojů, která se používá k sestavování .NET Core a konkrétně k aplikacím ASP.NET Core 1,0.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-108">DNX was a runtime and a toolset used to build .NET Core and, more specifically, ASP.NET Core 1.0 applications.</span></span> <span data-ttu-id="e6f5b-109">Skládá se ze 3 hlavních částí:</span><span class="sxs-lookup"><span data-stu-id="e6f5b-109">It consisted of 3 main pieces:</span></span>

1. <span data-ttu-id="e6f5b-110">DNVM – instalační skript pro získání DNX</span><span class="sxs-lookup"><span data-stu-id="e6f5b-110">DNVM - an install script for obtaining DNX</span></span>
2. <span data-ttu-id="e6f5b-111">DNX (příkaz dotnet Execution Runtime) – modul runtime, který spouští váš kód</span><span class="sxs-lookup"><span data-stu-id="e6f5b-111">DNX (Dotnet Execution Runtime) - the runtime that executes your code</span></span>
3. <span data-ttu-id="e6f5b-112">DNU (dotnet Developer Utility) – nástroje pro správu závislostí, vytváření a publikování aplikací</span><span class="sxs-lookup"><span data-stu-id="e6f5b-112">DNU (Dotnet Developer Utility) - tooling for managing dependencies, building and publishing your applications</span></span>

<span data-ttu-id="e6f5b-113">Při zavedení rozhraní příkazového řádku jsou nyní všechny výše uvedené součásti součástí jedné sady nástrojů.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-113">With the introduction of the CLI, all of the above are now part of a single toolset.</span></span> <span data-ttu-id="e6f5b-114">Vzhledem k tomu, že služba DNX byla k dispozici v časovém rámci RC1, možná máte vytvořené projekty, které chcete přesunout na nové nástroje rozhraní příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-114">However, since DNX was available in RC1 timeframe, you might have projects that were built using it that you would want to move off to the new CLI tooling.</span></span>

<span data-ttu-id="e6f5b-115">Tato příručka k migraci se zabývá základy migrace projektů z DNX a na .NET Core CLI.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-115">This migration guide will cover the essentials on how to migrate projects off of DNX and onto .NET Core CLI.</span></span> <span data-ttu-id="e6f5b-116">Pokud právě začínáte projekt v .NET Core od začátku, můžete tento dokument volně přeskočit.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-116">If you are just starting a project on .NET Core from scratch, you can freely skip this document.</span></span>

## <a name="main-changes-in-the-tooling"></a><span data-ttu-id="e6f5b-117">Hlavní změny v nástrojích</span><span class="sxs-lookup"><span data-stu-id="e6f5b-117">Main changes in the tooling</span></span>
<span data-ttu-id="e6f5b-118">Existují některé obecné změny v nástrojích, které by měly být nejprve popsaný.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-118">There are some general changes in the tooling that should be outlined first.</span></span>

### <a name="no-more-dnvm"></a><span data-ttu-id="e6f5b-119">Žádné další DNVM</span><span class="sxs-lookup"><span data-stu-id="e6f5b-119">No more DNVM</span></span>
<span data-ttu-id="e6f5b-120">DNVM, short pro *dotnet Version Manager* , byl skript bash/PowerShellu, který se používá k instalaci DNX na vašem počítači.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-120">DNVM, short for *DotNet Version Manager* was a bash/PowerShell script used to install a DNX on your machine.</span></span> <span data-ttu-id="e6f5b-121">Pomohl uživatelům získat DNX, které potřebují z informačního kanálu, které zadal (nebo ve výchozím nastavení), a označit konkrétní DNX "aktivní", která by byla vložena do $PATH pro danou relaci.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-121">It helped users get the DNX they need from the feed they specified (or default ones) as well as mark a certain DNX "active", which would put it on the $PATH for the given session.</span></span> <span data-ttu-id="e6f5b-122">To vám umožní používat různé nástroje.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-122">This would allow you to use the various tools.</span></span>

<span data-ttu-id="e6f5b-123">DNVM byla přerušena, protože její sada funkcí byla redundantní, protože změny přicházejí v .NET Core CLI.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-123">DNVM was discontinued because its feature set was made redundant by changes coming in the .NET Core CLI.</span></span>

<span data-ttu-id="e6f5b-124">CLI se vloží do balíčku dvěma hlavními způsoby:</span><span class="sxs-lookup"><span data-stu-id="e6f5b-124">The CLI comes packaged in two main ways:</span></span>

1. <span data-ttu-id="e6f5b-125">Nativní instalační programy pro danou platformu</span><span class="sxs-lookup"><span data-stu-id="e6f5b-125">Native installers for a given platform</span></span>
2. <span data-ttu-id="e6f5b-126">Nainstalovat skript pro jiné situace (například servery CI)</span><span class="sxs-lookup"><span data-stu-id="e6f5b-126">Install script for other situations (like CI servers)</span></span>

<span data-ttu-id="e6f5b-127">V takovém případě nejsou funkce instalace DNVM potřeba.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-127">Given this, the DNVM install features are not needed.</span></span> <span data-ttu-id="e6f5b-128">Ale co o funkcích výběru za běhu?</span><span class="sxs-lookup"><span data-stu-id="e6f5b-128">But what about the runtime selection features?</span></span>

<span data-ttu-id="e6f5b-129">V `project.json` odkazujete na modul runtime přidáním balíčku určité verze k vašim závislostem.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-129">You reference a runtime in your `project.json` by adding a package of a certain version to your dependencies.</span></span> <span data-ttu-id="e6f5b-130">V této změně bude vaše aplikace moci používat nové běhové bity.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-130">With this change, your application will be able to use the new runtime bits.</span></span> <span data-ttu-id="e6f5b-131">Načítání těchto bitů do počítače je stejné jako u rozhraní příkazového řádku: modul runtime nainstalujete pomocí jednoho z nativních instalačních programů, které podporuje nebo prostřednictvím instalačního skriptu.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-131">Getting these bits to your machine is the same as with the CLI: you install the runtime via one of the native installers it supports or via its install script.</span></span>

### <a name="different-commands"></a><span data-ttu-id="e6f5b-132">Různé příkazy</span><span class="sxs-lookup"><span data-stu-id="e6f5b-132">Different commands</span></span>
<span data-ttu-id="e6f5b-133">Pokud jste používali DNX, použili jste některé příkazy z jedné ze tří částí (DNX, DNU nebo DNVM).</span><span class="sxs-lookup"><span data-stu-id="e6f5b-133">If you were using DNX, you used some commands from one of its three parts (DNX, DNU or DNVM).</span></span> <span data-ttu-id="e6f5b-134">V rozhraní příkazového řádku se některé z těchto příkazů změní, některé nejsou k dispozici a některé jsou stejné, ale mají mírně odlišnou sémantiku.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-134">With the CLI, some of these commands change, some are not available and some are the same but have slightly different semantics.</span></span>

<span data-ttu-id="e6f5b-135">Následující tabulka ukazuje mapování mezi příkazy DNX/DNU a jejich protějšky CLI.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-135">The table below shows the mapping between the DNX/DNU commands and their CLI counterparts.</span></span>

| <span data-ttu-id="e6f5b-136">DNX – příkaz</span><span class="sxs-lookup"><span data-stu-id="e6f5b-136">DNX command</span></span>                    | <span data-ttu-id="e6f5b-137">CLI – příkaz</span><span class="sxs-lookup"><span data-stu-id="e6f5b-137">CLI command</span></span>    | <span data-ttu-id="e6f5b-138">Popis</span><span class="sxs-lookup"><span data-stu-id="e6f5b-138">Description</span></span>                                                                                                     |
|--------------------------------|----------------|-----------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e6f5b-139">DNX spuštění</span><span class="sxs-lookup"><span data-stu-id="e6f5b-139">dnx run</span></span>                        | <span data-ttu-id="e6f5b-140">dotnet run</span><span class="sxs-lookup"><span data-stu-id="e6f5b-140">dotnet run</span></span>     | <span data-ttu-id="e6f5b-141">Spustí kód ze zdroje.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-141">Run code from source.</span></span>                                                                                           |
| <span data-ttu-id="e6f5b-142">dnu sestavení</span><span class="sxs-lookup"><span data-stu-id="e6f5b-142">dnu build</span></span>                      | <span data-ttu-id="e6f5b-143">dotnet build</span><span class="sxs-lookup"><span data-stu-id="e6f5b-143">dotnet build</span></span>   | <span data-ttu-id="e6f5b-144">Sestavte binární soubor IL vašeho kódu.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-144">Build an IL binary of your code.</span></span>                                                                                |
| <span data-ttu-id="e6f5b-145">dnu Pack</span><span class="sxs-lookup"><span data-stu-id="e6f5b-145">dnu pack</span></span>                       | <span data-ttu-id="e6f5b-146">dotnet pack</span><span class="sxs-lookup"><span data-stu-id="e6f5b-146">dotnet pack</span></span>    | <span data-ttu-id="e6f5b-147">Zabalit balíček NuGet vašeho kódu.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-147">Package up a NuGet package of your code.</span></span>                                                                        |
| <span data-ttu-id="e6f5b-148">DNX \[příkaz] (například "DNX web")</span><span class="sxs-lookup"><span data-stu-id="e6f5b-148">dnx \[command] (for example, "dnx web")</span></span> | <span data-ttu-id="e6f5b-149">Není k dispozici\*</span><span class="sxs-lookup"><span data-stu-id="e6f5b-149">N/A\*</span></span>          | <span data-ttu-id="e6f5b-150">V DNX World spusťte příkaz definovaný v projektu Project. JSON.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-150">In DNX world, run a command as defined in the project.json.</span></span>                                                     |
| <span data-ttu-id="e6f5b-151">instalace dnu</span><span class="sxs-lookup"><span data-stu-id="e6f5b-151">dnu install</span></span>                    | <span data-ttu-id="e6f5b-152">Není k dispozici\*</span><span class="sxs-lookup"><span data-stu-id="e6f5b-152">N/A\*</span></span>          | <span data-ttu-id="e6f5b-153">V DNX World nainstalujte balíček jako závislost.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-153">In the DNX world, install a package as a dependency.</span></span>                                                            |
| <span data-ttu-id="e6f5b-154">dnu obnovení</span><span class="sxs-lookup"><span data-stu-id="e6f5b-154">dnu restore</span></span>                    | <span data-ttu-id="e6f5b-155">dotnet restore</span><span class="sxs-lookup"><span data-stu-id="e6f5b-155">dotnet restore</span></span> | <span data-ttu-id="e6f5b-156">Obnoví závislosti zadané v projektu. JSON.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-156">Restore dependencies specified in your project.json.</span></span> <span data-ttu-id="e6f5b-157">([Viz poznámku](#dotnet-restore-note))</span><span class="sxs-lookup"><span data-stu-id="e6f5b-157">([see note](#dotnet-restore-note))</span></span>                                                            |
| <span data-ttu-id="e6f5b-158">publikování dnu</span><span class="sxs-lookup"><span data-stu-id="e6f5b-158">dnu publish</span></span>                    | <span data-ttu-id="e6f5b-159">dotnet publish</span><span class="sxs-lookup"><span data-stu-id="e6f5b-159">dotnet publish</span></span> | <span data-ttu-id="e6f5b-160">Publikujte aplikaci pro nasazení v jedné ze tří forem (přenosné, přenosné s nativní a samostatnou).</span><span class="sxs-lookup"><span data-stu-id="e6f5b-160">Publish your application for deployment in one of the three forms (portable, portable with native and standalone).</span></span> |
| <span data-ttu-id="e6f5b-161">dnu zalomení</span><span class="sxs-lookup"><span data-stu-id="e6f5b-161">dnu wrap</span></span>                       | <span data-ttu-id="e6f5b-162">Není k dispozici\*</span><span class="sxs-lookup"><span data-stu-id="e6f5b-162">N/A\*</span></span>          | <span data-ttu-id="e6f5b-163">V DNX World zabalte Project. JSON ve csproj.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-163">In DNX world, wrap a project.json in csproj.</span></span>                                                                    |
| <span data-ttu-id="e6f5b-164">příkazy dnu</span><span class="sxs-lookup"><span data-stu-id="e6f5b-164">dnu commands</span></span>                   | <span data-ttu-id="e6f5b-165">Není k dispozici\*</span><span class="sxs-lookup"><span data-stu-id="e6f5b-165">N/A\*</span></span>          | <span data-ttu-id="e6f5b-166">V DNX World spravujte globálně nainstalované příkazy.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-166">In DNX world, manage the globally installed commands.</span></span>                                                           |

<span data-ttu-id="e6f5b-167">(\*) – tyto funkce nejsou v rozhraní příkazového řádku v rámci návrhu podporovány.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-167">(\*) - these features are not supported in the CLI by design.</span></span>

## <a name="dnx-features-that-are-not-supported"></a><span data-ttu-id="e6f5b-168">Nepodporované funkce DNX</span><span class="sxs-lookup"><span data-stu-id="e6f5b-168">DNX features that are not supported</span></span>
<span data-ttu-id="e6f5b-169">Jak vidíte v tabulce výše, jsou k dispozici funkce z DNX světa, které jsme se rozhodli, že v rozhraní příkazového řádku nepodporujeme aspoň po dobu.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-169">As the table above shows, there are features from the DNX world that we decided not to support in the CLI, at least for the time being.</span></span> <span data-ttu-id="e6f5b-170">Tato část prochází nejdůležitějšími a vysvětluje odůvodnění tím, že je nepodporují, a alternativní řešení, pokud je potřebujete.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-170">This section will go through the most important ones and outline the rationale behind not supporting them as well as workarounds if you do need them.</span></span>

### <a name="global-commands"></a><span data-ttu-id="e6f5b-171">Globální příkazy</span><span class="sxs-lookup"><span data-stu-id="e6f5b-171">Global commands</span></span>
<span data-ttu-id="e6f5b-172">DNU byl dodán s konceptem s názvem "globální příkazy".</span><span class="sxs-lookup"><span data-stu-id="e6f5b-172">DNU came with a concept called "global commands".</span></span> <span data-ttu-id="e6f5b-173">V podstatě byly konzolové aplikace zabalené jako balíčky NuGet pomocí skriptu prostředí, který by vyvolal DNX, který jste zadali ke spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-173">These were, essentially, console applications packaged up as NuGet packages with a shell script that would invoke the DNX you specified to run the application.</span></span>

<span data-ttu-id="e6f5b-174">Rozhraní příkazového řádku nepodporuje tento koncept.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-174">The CLI does not support this concept.</span></span> <span data-ttu-id="e6f5b-175">Nicméně podporuje koncept přidávání příkazů pro projekt, které lze vyvolat pomocí známé `dotnet <command>` syntaxe.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-175">It does, however, support the concept of adding per-project commands that can be invoked using the familiar `dotnet <command>` syntax.</span></span>

### <a name="installing-dependencies"></a><span data-ttu-id="e6f5b-176">Instalace závislostí</span><span class="sxs-lookup"><span data-stu-id="e6f5b-176">Installing dependencies</span></span>
<span data-ttu-id="e6f5b-177">Od verze V1 nemá .NET Core CLI k dispozici `install` příkaz pro instalaci závislostí.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-177">As of v1, the .NET Core CLI doesn't have an `install` command for installing dependencies.</span></span> <span data-ttu-id="e6f5b-178">Aby bylo možné nainstalovat balíček z nástroje NuGet, je nutné jej přidat jako závislost do souboru `project.json` a potom spustit `dotnet restore` ([Viz poznámku](#dotnet-restore-note)).</span><span class="sxs-lookup"><span data-stu-id="e6f5b-178">In order to install a package from NuGet, you would need to add it as a dependency to your `project.json` file and then run `dotnet restore` ([see note](#dotnet-restore-note)).</span></span>

### <a name="running-your-code"></a><span data-ttu-id="e6f5b-179">Spuštění kódu</span><span class="sxs-lookup"><span data-stu-id="e6f5b-179">Running your code</span></span>
<span data-ttu-id="e6f5b-180">Existují dva hlavní způsoby, jak kód spustit.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-180">There are two main ways to run your code.</span></span> <span data-ttu-id="e6f5b-181">Jedna je ze zdroje, s `dotnet run`.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-181">One is from source, with `dotnet run`.</span></span> <span data-ttu-id="e6f5b-182">Na rozdíl od `dnx run`to neprovede žádnou kompilaci v paměti.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-182">Unlike `dnx run`, this will not do any in-memory compilation.</span></span> <span data-ttu-id="e6f5b-183">Ve skutečnosti vyvolá `dotnet build` sestavení kódu a potom spustí sestavený binární soubor.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-183">It will actually invoke `dotnet build` to build your code and then run the built binary.</span></span>

<span data-ttu-id="e6f5b-184">Dalším způsobem je použití samotného `dotnet` ke spuštění kódu.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-184">Another way is using the `dotnet` itself to run your code.</span></span> <span data-ttu-id="e6f5b-185">To se provádí zadáním cesty k sestavení: `dotnet path/to/an/assembly.dll`.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-185">This is done by providing a path to your assembly: `dotnet path/to/an/assembly.dll`.</span></span>

## <a name="migrating-your-dnx-project-to-net-core-cli"></a><span data-ttu-id="e6f5b-186">Migrace projektu DNX na .NET Core CLI</span><span class="sxs-lookup"><span data-stu-id="e6f5b-186">Migrating your DNX project to .NET Core CLI</span></span>
<span data-ttu-id="e6f5b-187">Kromě použití nových příkazů při práci s vaším kódem jsou v migraci z DNX tři hlavní věci:</span><span class="sxs-lookup"><span data-stu-id="e6f5b-187">In addition to using new commands when working with your code, there are three major things left in migrating from DNX:</span></span>

1. <span data-ttu-id="e6f5b-188">Pokud máte přístup k rozhraní příkazového řádku, migrujte soubor `global.json`.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-188">Migrate the `global.json` file if you have it to be able to use CLI.</span></span>
2. <span data-ttu-id="e6f5b-189">Migrace souboru projektu (`project.json`) sama na nástroje rozhraní příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-189">Migrating the project file (`project.json`) itself to the CLI tooling.</span></span>
3. <span data-ttu-id="e6f5b-190">Migrace všech DNX rozhraní API na své BCL protějšky.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-190">Migrating off of any DNX APIs to their BCL counterparts.</span></span>

### <a name="changing-the-globaljson-file"></a><span data-ttu-id="e6f5b-191">Změna souboru Global. JSON</span><span class="sxs-lookup"><span data-stu-id="e6f5b-191">Changing the global.json file</span></span>
<span data-ttu-id="e6f5b-192">Soubor `global.json` funguje jako soubor řešení pro projekty RC1 a RC2 (nebo novější).</span><span class="sxs-lookup"><span data-stu-id="e6f5b-192">The `global.json` file acts like a solution file for both the RC1 and RC2 (or later) projects.</span></span> <span data-ttu-id="e6f5b-193">Aby se .NET Core CLI (stejně jako aplikace Visual Studio) rozlišila mezi RC1 a novějšími verzemi, používají vlastnost `"sdk": { "version" }` k tomu, aby byl rozlišený, který projekt je RC1 nebo novější.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-193">In order for the .NET Core CLI (as well as Visual Studio) to differentiate between RC1 and later versions, they use the `"sdk": { "version" }` property to make the distinction which project is RC1 or later.</span></span> <span data-ttu-id="e6f5b-194">Pokud `global.json` nemá tento uzel vůbec, předpokládá se to jako poslední.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-194">If `global.json` doesn't have this node at all, it is assumed to be the latest.</span></span>

<span data-ttu-id="e6f5b-195">Chcete-li aktualizovat soubor `global.json`, buď odeberte vlastnost nebo ji nastavte na přesnou verzi nástrojů, které chcete použít, v tomto případě **1.0.0-preview2-003121**:</span><span class="sxs-lookup"><span data-stu-id="e6f5b-195">In order to update the `global.json` file, either remove the property or set it to the exact version of the tools that you wish to use, in this case **1.0.0-preview2-003121**:</span></span>

```json
{
    "sdk": {
        "version": "1.0.0-preview2-003121"
    }
}
```

### <a name="migrating-the-project-file"></a><span data-ttu-id="e6f5b-196">Migruje se soubor projektu.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-196">Migrating the project file</span></span>

<span data-ttu-id="e6f5b-197">Rozhraní příkazového řádku a DNX používají stejný základní systém projektu na základě `project.json` souboru.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-197">The CLI and DNX both use the same basic project system based on `project.json` file.</span></span> <span data-ttu-id="e6f5b-198">Syntaxe a sémantika souboru projektu je poměrně velká a s malým rozdílem na základě scénářů.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-198">The syntax and the semantics of the project file are pretty much the same, with small differences based on the scenarios.</span></span> <span data-ttu-id="e6f5b-199">K dispozici jsou také některé změny schématu, které lze zobrazit v [souboru schématu](http://json.schemastore.org/project).</span><span class="sxs-lookup"><span data-stu-id="e6f5b-199">There are also some changes to the schema which you can see in the [schema file](http://json.schemastore.org/project).</span></span>

<span data-ttu-id="e6f5b-200">Pokud vytváříte konzolovou aplikaci, je nutné do souboru projektu přidat následující fragment kódu:</span><span class="sxs-lookup"><span data-stu-id="e6f5b-200">If you are building a console application, you need to add the following snippet to your project file:</span></span>

```json
"buildOptions": {
    "emitEntryPoint": true
}
```

<span data-ttu-id="e6f5b-201">Tímto dáte `dotnet build`, aby vygenerovala vstupní bod pro vaši aplikaci a efektivně tak spustitelný kód.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-201">This instructs `dotnet build` to emit an entry point for your application, effectively making your code runnable.</span></span> <span data-ttu-id="e6f5b-202">Pokud vytváříte knihovnu tříd, jednoduše vynechejte výše uvedenou část.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-202">If you are building a class library, simply omit the above section.</span></span> <span data-ttu-id="e6f5b-203">Samozřejmě, když přidáte výše uvedený fragment kódu do souboru `project.json`, je nutné přidat statický vstupní bod.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-203">Of course, once you add the above snippet to your `project.json` file, you need to add a static entry point.</span></span> <span data-ttu-id="e6f5b-204">Při přesunutí z DNX již není k dispozici služba DI Services, kterou poskytuje, proto musí být základním vstupním bodem .NET: `static void Main()`.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-204">With the move off DNX, the DI services it provided are no longer available and thus this needs to be a basic .NET entry point: `static void Main()`.</span></span>

<span data-ttu-id="e6f5b-205">Pokud máte v `project.json`oddíl Commands, můžete ho odebrat.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-205">If you have a "commands" section in your `project.json`, you can remove it.</span></span> <span data-ttu-id="e6f5b-206">Některé příkazy, které se používají jako DNU příkazy, například Entity Framework příkazy rozhraní příkazového řádku, se předávají do rozhraní příkazového řádku jako rozšíření pro jednotlivé projekty.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-206">Some of the commands that used to exist as DNU commands, such as Entity Framework CLI commands, are being ported to be per-project extensions to the CLI.</span></span> <span data-ttu-id="e6f5b-207">Pokud jste vytvořili vlastní příkazy, které používáte v projektech, je nutné je nahradit rozšířeními rozhraní příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-207">If you built your own commands that you are using in your projects, you need to replace them with CLI extensions.</span></span> <span data-ttu-id="e6f5b-208">V takovém případě musí být uzel `commands` v `project.json` nahrazen uzlem `tools` a musí obsahovat seznam závislostí nástrojů.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-208">In this case, the `commands` node in `project.json` needs to be replaced by the `tools` node and it needs to list the tools dependencies.</span></span>

<span data-ttu-id="e6f5b-209">Po dokončení těchto akcí se musíte rozhodnout, jaký typ přenositelnosti chcete mít pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-209">After these things are done, you need to decide which type of portability you wish for you app.</span></span> <span data-ttu-id="e6f5b-210">S .NET Core jsme investovali do poskytování spektra možností přenositelnosti, ze kterých si můžete vybrat.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-210">With .NET Core, we have invested into providing a spectrum of portability options that you can choose from.</span></span> <span data-ttu-id="e6f5b-211">Například může být vhodné mít plně *přenosné* aplikace nebo může chtít mít *samostatnou* aplikaci.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-211">For instance, you may want to have a fully *portable* application or you may want to have a *self-contained* application.</span></span> <span data-ttu-id="e6f5b-212">Možnost přenosné aplikace je větší, jako .NET Framework aplikace funguje: potřebuje sdílenou komponentu, aby ji bylo možné spustit na cílovém počítači (.NET Core).</span><span class="sxs-lookup"><span data-stu-id="e6f5b-212">The portable application option is more like .NET Framework applications work: it needs a shared component to execute it on the target machine (.NET Core).</span></span> <span data-ttu-id="e6f5b-213">Samostatně obsažená aplikace nevyžaduje instalaci .NET Core na cíl, ale musíte pro každý operační systém, který chcete podporovat, vydávat jednu aplikaci.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-213">The self-contained application doesn't require .NET Core to be installed on the target, but you have to produce one application for each OS you wish to support.</span></span> <span data-ttu-id="e6f5b-214">Tyto typy přenositelnosti a další jsou popsány v dokumentu [typu přenositelnosti aplikace](../deploying/index.md) .</span><span class="sxs-lookup"><span data-stu-id="e6f5b-214">These portability types and more are discussed in the [application portability type](../deploying/index.md) document.</span></span>

<span data-ttu-id="e6f5b-215">Jakmile zavoláte, jaký typ přenositelnosti chcete, musíte změnit cílové rozhraní.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-215">Once you make a call on what type of portability you want, you need to change your targeted framework(s).</span></span> <span data-ttu-id="e6f5b-216">Pokud jste zapisovali aplikace pro .NET Core, pravděpodobně jste jako cílové rozhraní používali `dnxcore50`.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-216">If you were writing applications for .NET Core, you were most likely using `dnxcore50` as  your targeted framework.</span></span> <span data-ttu-id="e6f5b-217">V rozhraní příkazového řádku a změny, které nově [.NET Standard](../../standard/net-standard.md) , musí být rozhraní jedna z následujících:</span><span class="sxs-lookup"><span data-stu-id="e6f5b-217">With the CLI and the changes that the new [.NET Standard](../../standard/net-standard.md) brought, the framework needs to be one of the following:</span></span>

1. <span data-ttu-id="e6f5b-218">`netcoreapp1.0` – Pokud píšete aplikace v .NET Core (včetně ASP.NET Corech aplikací)</span><span class="sxs-lookup"><span data-stu-id="e6f5b-218">`netcoreapp1.0` - if you are writing applications on .NET Core (including ASP.NET Core applications)</span></span>
2. <span data-ttu-id="e6f5b-219">`netstandard1.6` – Pokud píšete knihovny tříd pro .NET Core</span><span class="sxs-lookup"><span data-stu-id="e6f5b-219">`netstandard1.6` - if you are writing class libraries for .NET Core</span></span>

<span data-ttu-id="e6f5b-220">Pokud používáte jiné cíle `dnx`, jako `dnx451`, budete je muset změnit také.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-220">If you are using other `dnx` targets, like `dnx451` you will need to change those as well.</span></span> <span data-ttu-id="e6f5b-221">`dnx451` by měl být změněn na `net451`.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-221">`dnx451` should be changed to `net451`.</span></span>
<span data-ttu-id="e6f5b-222">Další informace najdete v tématu [.NET Standard](../../standard/net-standard.md) .</span><span class="sxs-lookup"><span data-stu-id="e6f5b-222">Please refer to the [.NET Standard](../../standard/net-standard.md) topic for more information.</span></span>

<span data-ttu-id="e6f5b-223">Vaše `project.json` je teď většinou připravená.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-223">Your `project.json` is now mostly ready.</span></span> <span data-ttu-id="e6f5b-224">Musíte projít seznam závislostí a aktualizovat závislosti na jejich novějších verzích, zejména pokud používáte závislosti ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-224">You need to go through your dependencies list and update the dependencies to their newer versions, especially if you are using ASP.NET Core dependencies.</span></span> <span data-ttu-id="e6f5b-225">Pokud jste používali samostatné balíčky pro rozhraní API BCL, můžete použít balíček modulu runtime, jak je vysvětleno v dokumentu [typ přenositelnosti aplikace](../deploying/index.md) .</span><span class="sxs-lookup"><span data-stu-id="e6f5b-225">If you were using separate packages for BCL APIs, you can use the runtime package as explained in the [application portability type](../deploying/index.md) document.</span></span>

<span data-ttu-id="e6f5b-226">Až budete připraveni, můžete se pokusit o obnovení pomocí `dotnet restore` ([Viz poznámku](#dotnet-restore-note)).</span><span class="sxs-lookup"><span data-stu-id="e6f5b-226">Once you are ready, you can try restoring with `dotnet restore` ([see note](#dotnet-restore-note)).</span></span> <span data-ttu-id="e6f5b-227">V závislosti na verzi vašich závislostí může dojít k chybám, pokud NuGet nemůže vyřešit závislosti pro jednu z cílových rozhraní výše.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-227">Depending on the version of your dependencies, you may encounter errors if NuGet cannot resolve the dependencies for one of the targeted frameworks above.</span></span> <span data-ttu-id="e6f5b-228">Jedná se o problém "k určitému bodu v čase"; v průběhu času bude více a více balíčků zahrnovat podporu pro tyto architektury.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-228">This is a "point-in-time" problem; as time progresses, more and more packages will include support for these frameworks.</span></span> <span data-ttu-id="e6f5b-229">Prozatím, pokud narazíte na to, můžete použít příkaz `imports` v rámci `framework` uzlu k určení balíčku NuGet, že může obnovit balíčky cílené na rozhraní v rámci příkazu Imports.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-229">For now, if you run into this, you can use the `imports` statement within the `framework` node to specify to NuGet that it can restore the packages targeting the framework within the "imports" statement.</span></span>
<span data-ttu-id="e6f5b-230">Chyby obnovení, které v tomto případě získáte, by měly poskytnout dostatek informací, abychom vám sdělili, které architektury potřebujete importovat.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-230">The restoring errors you get in this case should provide enough information to tell you which frameworks you need to import.</span></span> <span data-ttu-id="e6f5b-231">Pokud dojde ke mírné ztrátě nebo novému tomu, v obecném případě určení `dnxcore50` a `portable-net45+win8` v příkazu `imports` by měl být štych.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-231">If you are slightly lost or new to this, in general, specifying `dnxcore50` and `portable-net45+win8` in the `imports` statement should do the trick.</span></span> <span data-ttu-id="e6f5b-232">Následující fragment kódu JSON ukazuje, jak vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="e6f5b-232">The JSON snippet below shows how this looks like:</span></span>

```json
    "frameworks": {
        "netcoreapp1.0": {
            "imports": ["dnxcore50", "portable-net45+win8"]
        }
    }
```

<span data-ttu-id="e6f5b-233">Spuštění `dotnet build` zobrazí všechny chyby sestavení, i když by nemělo být příliš mnoho z nich.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-233">Running `dotnet build` will show any eventual build errors, though there shouldn't be too many of them.</span></span> <span data-ttu-id="e6f5b-234">Poté, co kód sestaví a funguje správně, můžete ho otestovat pomocí spouštěče.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-234">After your code is building and running properly, you can test it out with the runner.</span></span> <span data-ttu-id="e6f5b-235">Spusťte `dotnet <path-to-your-assembly>` a podívejte se na to.</span><span class="sxs-lookup"><span data-stu-id="e6f5b-235">Execute `dotnet <path-to-your-assembly>` and see it run.</span></span>

<a name="dotnet-restore-note"></a>

[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]
