---
title: Práce s macOS Catalina Notarization
description: Jak zpracovat notářizaci a problémy s certifikáty s macOS při instalaci runtime .NET Core, Sady SDK a aplikací vytvořených pomocí .NET Core.
author: thraka
ms.author: adegeo
ms.date: 02/14/2020
ms.openlocfilehash: be39c1ea56699f84736a2b37bc958507b16e826b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/14/2020
ms.locfileid: "79146746"
---
# <a name="macos-catalina-notarization-and-the-impact-on-net-core-downloads-and-projects"></a><span data-ttu-id="65d4d-103">macOS Catalina Notarization a dopad na stahování a projekty .NET Core</span><span class="sxs-lookup"><span data-stu-id="65d4d-103">macOS Catalina Notarization and the impact on .NET Core downloads and projects</span></span>

<span data-ttu-id="65d4d-104">Počínaje macOS Catalina (verze 10.15), veškerý software vytvořený po červnu 1, 2019 a distribuovaný s ID vývojáře, musí být notářsky.Rúzy s MacOS Catalina (verze 10.15), veškerý software postavený po 1.</span><span class="sxs-lookup"><span data-stu-id="65d4d-104">Beginning with macOS Catalina (version 10.15), all software built after June 1, 2019, and distributed with Developer ID, must be notarized.</span></span> <span data-ttu-id="65d4d-105">Tento požadavek se vztahuje na modul runtime .NET Core, sadku .NET Core SDK a software vytvořený pomocí .NET Core.</span><span class="sxs-lookup"><span data-stu-id="65d4d-105">This requirement applies to the .NET Core runtime, .NET Core SDK, and software created with .NET Core.</span></span> <span data-ttu-id="65d4d-106">Tento článek popisuje běžné scénáře, kterým můžete čelit s notazací .NET Core a macOS.</span><span class="sxs-lookup"><span data-stu-id="65d4d-106">This article describes the common scenarios you may face with .NET Core and macOS notarization.</span></span>

## <a name="installing-net-core"></a><span data-ttu-id="65d4d-107">Instalace jádra rozhraní .NET</span><span class="sxs-lookup"><span data-stu-id="65d4d-107">Installing .NET Core</span></span>

<span data-ttu-id="65d4d-108">Instalační programy pro .NET Core (runtime a SDK) verze 3.1, 3.0 a 2.1 byly notářsky oznamovány od 18.</span><span class="sxs-lookup"><span data-stu-id="65d4d-108">The installers for .NET Core (both runtime and SDK) versions 3.1, 3.0, and 2.1, have been notarized since February 18, 2020.</span></span> <span data-ttu-id="65d4d-109">Předchozí vydané verze nejsou notářsky oslněny.</span><span class="sxs-lookup"><span data-stu-id="65d4d-109">Prior released versions aren't notarized.</span></span> <span data-ttu-id="65d4d-110">Nenotářskou verzi rozhraní .NET Core můžete nainstalovat ručně tak, že nejprve `sudo installer` stáhnete instalační program a potom použijete příkaz.</span><span class="sxs-lookup"><span data-stu-id="65d4d-110">You can manually install a non-notarized version of .NET Core by first downloading the installer, and then using the `sudo installer` command.</span></span> <span data-ttu-id="65d4d-111">Další informace najdete [v tématu Stažení a ruční instalace macOS](sdk.md?pivots=os-macos#download-and-manually-install).</span><span class="sxs-lookup"><span data-stu-id="65d4d-111">For more information, see [Download and manually install for macOS](sdk.md?pivots=os-macos#download-and-manually-install).</span></span>

<span data-ttu-id="65d4d-112">Počínaje následujícími verzemi jsou instalátory .NET Core notářsky ozářené:</span><span class="sxs-lookup"><span data-stu-id="65d4d-112">Beginning with the following versions, the .NET Core installers are notarized:</span></span>

- <span data-ttu-id="65d4d-113">.NET Core Runtime</span><span class="sxs-lookup"><span data-stu-id="65d4d-113">.NET Core Runtime</span></span>
  - <span data-ttu-id="65d4d-114">2.1.16</span><span class="sxs-lookup"><span data-stu-id="65d4d-114">2.1.16</span></span>
  - <span data-ttu-id="65d4d-115">3.0.3</span><span class="sxs-lookup"><span data-stu-id="65d4d-115">3.0.3</span></span>
  - <span data-ttu-id="65d4d-116">3.1.2</span><span class="sxs-lookup"><span data-stu-id="65d4d-116">3.1.2</span></span>

- <span data-ttu-id="65d4d-117">Sada .NET Core SDK</span><span class="sxs-lookup"><span data-stu-id="65d4d-117">.NET Core SDK</span></span>
  - <span data-ttu-id="65d4d-118">2.1.512</span><span class="sxs-lookup"><span data-stu-id="65d4d-118">2.1.512</span></span>
  - <span data-ttu-id="65d4d-119">3.0.103</span><span class="sxs-lookup"><span data-stu-id="65d4d-119">3.0.103</span></span>
  - <span data-ttu-id="65d4d-120">3.1.102</span><span class="sxs-lookup"><span data-stu-id="65d4d-120">3.1.102</span></span>

## <a name="apphost-is-disabled-by-default"></a><span data-ttu-id="65d4d-121">appHost je ve výchozím nastavení zakázán</span><span class="sxs-lookup"><span data-stu-id="65d4d-121">appHost is disabled by default</span></span>

<span data-ttu-id="65d4d-122">Ve výchozím nastavení nenotalizované verze sady .NET Core SDK 3.0 a vyšší vytvářejí nativní spustitelný soubor Mach-O (označovaný jako **appHost),** když váš projekt zkompiluje, publikuje nebo je spuštěn.</span><span class="sxs-lookup"><span data-stu-id="65d4d-122">By default, non-notarized versions of the .NET Core SDK 3.0 and above produce a native Mach-O executable (known as the **appHost**) when your project compiles, publishes, or is run.</span></span> <span data-ttu-id="65d4d-123">Tento spustitelný soubor je pohodlný způsob, jak spustit aplikaci.</span><span class="sxs-lookup"><span data-stu-id="65d4d-123">This executable is a convenient way to run your app.</span></span> <span data-ttu-id="65d4d-124">V opačném případě musí být `dotnet <filename.dll>`aplikace spuštěna spuštěním aplikace .</span><span class="sxs-lookup"><span data-stu-id="65d4d-124">Otherwise, your app must be started by running `dotnet <filename.dll>`.</span></span> <span data-ttu-id="65d4d-125">Když je appHost povolen, `dotnet run` příkaz je vyvolán v kontextu appHost.</span><span class="sxs-lookup"><span data-stu-id="65d4d-125">When the appHost is enabled, the `dotnet run` command is invoked in the context of the appHost.</span></span> <span data-ttu-id="65d4d-126">Další informace naleznete [v tématu Kontext appHost](#context-of-the-apphost).</span><span class="sxs-lookup"><span data-stu-id="65d4d-126">For more information, see [Context of the appHost](#context-of-the-apphost).</span></span>

<span data-ttu-id="65d4d-127">Počínaje notářsky oznamovanými verzemi sady .NET Core SDK 3.0 a vyšší není spustitelný soubor appHost ve výchozím nastavení generován.</span><span class="sxs-lookup"><span data-stu-id="65d4d-127">Starting with the notarized versions of the .NET Core SDK 3.0 and above, the appHost executable isn't generated by default.</span></span> <span data-ttu-id="65d4d-128">Generování appHost můžete zapnout [`UseAppHost`](../project-sdk/msbuild-props.md#useapphost) pomocí logického nastavení v souboru projektu.</span><span class="sxs-lookup"><span data-stu-id="65d4d-128">You can turn on appHost generation with the [`UseAppHost`](../project-sdk/msbuild-props.md#useapphost) boolean setting in the project file.</span></span> <span data-ttu-id="65d4d-129">Můžete také přepnout appHost `-p:UseAppHost` s parametrem na příkazovém řádku pro konkrétní `dotnet` příkaz, který spustíte:</span><span class="sxs-lookup"><span data-stu-id="65d4d-129">You can also toggle the appHost with the `-p:UseAppHost` parameter on the command line for the specific `dotnet` command you run:</span></span>

- <span data-ttu-id="65d4d-130">Soubor projektu</span><span class="sxs-lookup"><span data-stu-id="65d4d-130">Project file</span></span>

  ```xml
  <PropertyGroup>
    <UseAppHost>true</UseAppHost>
  </PropertyGroup>
  ```

- <span data-ttu-id="65d4d-131">Parametr příkazového řádku</span><span class="sxs-lookup"><span data-stu-id="65d4d-131">Command-line parameter</span></span>

  ```dotnetcli
  dotnet run -p:UseAppHost=true
  ```

<span data-ttu-id="65d4d-132">AppHost se vždy vytvoří, když publikujete aplikaci [samostatnou](../deploying/index.md#publish-self-contained).</span><span class="sxs-lookup"><span data-stu-id="65d4d-132">An appHost is always created when you publish your app [self-contained](../deploying/index.md#publish-self-contained).</span></span>

<span data-ttu-id="65d4d-133">Další informace o `UseAppHost` nastavení naleznete v [tématu Vlastnosti MSBuild pro sadu Microsoft.NET.Sdk](../project-sdk/msbuild-props.md#useapphost).</span><span class="sxs-lookup"><span data-stu-id="65d4d-133">For more information about the `UseAppHost` setting, see [MSBuild properties for Microsoft.NET.Sdk](../project-sdk/msbuild-props.md#useapphost).</span></span>

### <a name="context-of-the-apphost"></a><span data-ttu-id="65d4d-134">Kontext appHost</span><span class="sxs-lookup"><span data-stu-id="65d4d-134">Context of the appHost</span></span>

<span data-ttu-id="65d4d-135">Když je appHost ve vašem projektu povolen `dotnet run` a pomocí příkazu spustíte aplikaci, aplikace se vyvolá v kontextu appHost a `dotnet` ne výchozího hostitele (výchozí hostitel je příkaz).</span><span class="sxs-lookup"><span data-stu-id="65d4d-135">When the appHost is enabled in your project, and you use the `dotnet run` command to run your app, the app is invoked in the context of the appHost and not the default host (the default host is the `dotnet` command).</span></span> <span data-ttu-id="65d4d-136">Pokud je appHost ve vašem `dotnet run` projektu zakázán, příkaz spustí vaši aplikaci v kontextu výchozího hostitele.</span><span class="sxs-lookup"><span data-stu-id="65d4d-136">If the appHost is disabled in your project, the `dotnet run` command runs your app in the context of the default host.</span></span> <span data-ttu-id="65d4d-137">I když je appHost zakázán, publikování aplikace jako samostatné generuje spustitelný soubor appHost a uživatelé používají tento spustitelný soubor ke spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="65d4d-137">Even if the appHost is disabled, publishing your app as self-contained generates an appHost executable, and users use that executable to run your app.</span></span> <span data-ttu-id="65d4d-138">Spuštění aplikace `dotnet <filename.dll>` s vyvolá aplikaci s výchozím hostitelem, sdíleným runtime.</span><span class="sxs-lookup"><span data-stu-id="65d4d-138">Running your app with `dotnet <filename.dll>` invokes the app with the default host, the shared runtime.</span></span>

<span data-ttu-id="65d4d-139">Když je vyvolána aplikace používající appHost, oddíl certifikátu, ke kterým má aplikace přístup, se liší od notářsky oznamovaného výchozího hostitele.</span><span class="sxs-lookup"><span data-stu-id="65d4d-139">When an app using the appHost is invoked, the certificate partition accessed by the app is different from the notarized default host.</span></span> <span data-ttu-id="65d4d-140">Pokud vaše aplikace musí přistupovat k certifikátům `dotnet run` nainstalovaným přes výchozí ho hostitele, spusťte aplikaci přímo pomocí příkazu ze souboru projektu nebo pomocí příkazu `dotnet <filename.dll>` spusťte aplikaci přímo.</span><span class="sxs-lookup"><span data-stu-id="65d4d-140">If your app must access the certificates installed through the default host, use the `dotnet run` command to run your app from its project file, or use the `dotnet <filename.dll>` command to start the app directly.</span></span>

<span data-ttu-id="65d4d-141">Další informace o tomto scénáři jsou k dispozici v [části ASP.NET jádra a macOS a certifikáty.](#aspnet-core-and-macos-and-certificates)</span><span class="sxs-lookup"><span data-stu-id="65d4d-141">More information about this scenario is provided in the [ASP.NET Core and macOS and certificates](#aspnet-core-and-macos-and-certificates) section.</span></span>

## <a name="aspnet-core-and-macos-and-certificates"></a><span data-ttu-id="65d4d-142">ASP.NET Core a macOS a certifikáty</span><span class="sxs-lookup"><span data-stu-id="65d4d-142">ASP.NET Core and macOS and certificates</span></span>

<span data-ttu-id="65d4d-143">.NET Core poskytuje možnost spravovat certifikáty v řetězci <xref:System.Security.Cryptography.X509Certificates> klíčů macOS s třídou.</span><span class="sxs-lookup"><span data-stu-id="65d4d-143">.NET Core provides the ability to manage certificates in the macOS Keychain with the <xref:System.Security.Cryptography.X509Certificates> class.</span></span> <span data-ttu-id="65d4d-144">Přístup k řetězci klíčů macOS používá identitu aplikací jako primární klíč při rozhodování o tom, který oddíl je třeba zvážit.</span><span class="sxs-lookup"><span data-stu-id="65d4d-144">Access to the macOS Keychain uses the applications identity as the primary key when deciding which partition to consider.</span></span> <span data-ttu-id="65d4d-145">Například nepodepsané aplikace ukládají tajné klíče v nepodepsaném oddílu, ale podepsané aplikace ukládají své tajné klíče v oddílech pouze k nim.</span><span class="sxs-lookup"><span data-stu-id="65d4d-145">For example, unsigned applications store secrets in the unsigned partition, but signed applications store their secrets in partitions only they can access.</span></span> <span data-ttu-id="65d4d-146">Zdroj spuštění, který vyvolá vaše aplikace rozhodne, který oddíl použít.</span><span class="sxs-lookup"><span data-stu-id="65d4d-146">The source of execution that invokes your app decides which partition to use.</span></span>

<span data-ttu-id="65d4d-147">.NET Core poskytuje tři zdroje spuštění: [appHost](#apphost-is-disabled-by-default), výchozí hostitel `dotnet` (příkaz) a vlastní hostitel.</span><span class="sxs-lookup"><span data-stu-id="65d4d-147">.NET Core provides three sources of execution: [appHost](#apphost-is-disabled-by-default), default host (the `dotnet` command), and a custom host.</span></span> <span data-ttu-id="65d4d-148">Každý model spuštění může mít různé identity, podepsané nebo nepodepsané a má přístup k různým oddílům v rámci řetězce klíčů.</span><span class="sxs-lookup"><span data-stu-id="65d4d-148">Each execution model may have different identities, either signed or unsigned, and has access to different partitions within the Keychain.</span></span> <span data-ttu-id="65d4d-149">Certifikáty importované jedním režimem nemusí být přístupné z jiného režimu.</span><span class="sxs-lookup"><span data-stu-id="65d4d-149">Certificates imported by one mode may not be accessible from another.</span></span> <span data-ttu-id="65d4d-150">Například notářsky oznamované verze .NET Core mají výchozího hostitele, který je podepsán.</span><span class="sxs-lookup"><span data-stu-id="65d4d-150">For example, the notarized versions of .NET Core have a default host that is signed.</span></span> <span data-ttu-id="65d4d-151">Certifikáty jsou importovány do zabezpečeného oddílu na základě jeho identity.</span><span class="sxs-lookup"><span data-stu-id="65d4d-151">Certificates are imported into a secure partition based on its identity.</span></span> <span data-ttu-id="65d4d-152">Tyto certifikáty nejsou přístupné z generované aplikaceHost, protože appHost je nepodepsaný.</span><span class="sxs-lookup"><span data-stu-id="65d4d-152">These certificates aren't accessible from a generated appHost, as the appHost is unsigned.</span></span>

<span data-ttu-id="65d4d-153">Jiný příklad ve výchozím nastavení ASP.NET Core importuje výchozí certifikát SSL prostřednictvím výchozího hostitele.</span><span class="sxs-lookup"><span data-stu-id="65d4d-153">Another example, by default, ASP.NET Core imports a default SSL certificate through the default host.</span></span> <span data-ttu-id="65d4d-154">ASP.NET Základní aplikace, které používají appHost nebude mít přístup k tomuto certifikátu a obdrží chybu, když .NET Core zjistí, že certifikát není přístupný.</span><span class="sxs-lookup"><span data-stu-id="65d4d-154">ASP.NET Core applications that use an appHost won't have access to this certificate and will receive an error when .NET Core detects the certificate isn't accessible.</span></span> <span data-ttu-id="65d4d-155">Chybová zpráva obsahuje pokyny k vyřešení tohoto problému.</span><span class="sxs-lookup"><span data-stu-id="65d4d-155">The error message provides instructions on how to fix this problem.</span></span>

<span data-ttu-id="65d4d-156">Pokud je vyžadováno sdílení certifikátů, macOS poskytuje možnosti konfigurace s `security` nástrojem.</span><span class="sxs-lookup"><span data-stu-id="65d4d-156">If certificate sharing is required, macOS provides configuration options with the `security` utility.</span></span>

<span data-ttu-id="65d4d-157">Další informace o řešení problémů s certifikáty ASP.NET základní informace naleznete [v tématu Enforce HTTPS in ASP.NET Core](/aspnet/core/security/enforcing-ssl?view=aspnetcore-3.1&tabs=visual-studio#troubleshoot-certificate-problems).</span><span class="sxs-lookup"><span data-stu-id="65d4d-157">For more information on how to troubleshoot ASP.NET Core certificate issues, see [Enforce HTTPS in ASP.NET Core](/aspnet/core/security/enforcing-ssl?view=aspnetcore-3.1&tabs=visual-studio#troubleshoot-certificate-problems).</span></span>

## <a name="default-entitlements"></a><span data-ttu-id="65d4d-158">Výchozí nároky</span><span class="sxs-lookup"><span data-stu-id="65d4d-158">Default entitlements</span></span>

<span data-ttu-id="65d4d-159">Výchozí hostitel rozhraní .NET `dotnet` Core (příkaz) má sadu výchozích nároků.</span><span class="sxs-lookup"><span data-stu-id="65d4d-159">.NET Core’s default host (the `dotnet` command) has a set of default entitlements.</span></span> <span data-ttu-id="65d4d-160">Tyto nároky jsou vyžadovány pro správné fungování .NET Core.</span><span class="sxs-lookup"><span data-stu-id="65d4d-160">These entitlements are required for proper operation of .NET Core.</span></span> <span data-ttu-id="65d4d-161">Je možné, že vaše aplikace může potřebovat další nároky, v takovém případě budete muset generovat a používat [appHost](#apphost-is-disabled-by-default) a pak přidat potřebné nároky místně.</span><span class="sxs-lookup"><span data-stu-id="65d4d-161">It's possible that your application may need additional entitlements, in which case you'll need to generate and use an [appHost](#apphost-is-disabled-by-default) and then add the necessary entitlements locally.</span></span>

<span data-ttu-id="65d4d-162">Výchozí sada nároků pro jádro .NET:</span><span class="sxs-lookup"><span data-stu-id="65d4d-162">Default set of entitlements for .NET Core:</span></span>

- `com.apple.security.cs.allow-jit`
- `com.apple.security.cs.allow-unsigned-executable-memory`
- `com.apple.security.cs.allow-dyld-environment-variables`
- `com.apple.security.cs.disable-library-validation`

## <a name="notarize-a-net-core-app"></a><span data-ttu-id="65d4d-163">Notáži aplikace .NET Core</span><span class="sxs-lookup"><span data-stu-id="65d4d-163">Notarize a .NET Core app</span></span>

<span data-ttu-id="65d4d-164">Pokud chcete, aby vaše aplikace běžela na macOS Catalina (verze 10.15) nebo vyšší, budete chtít svou aplikaci notářsky ověřit.</span><span class="sxs-lookup"><span data-stu-id="65d4d-164">If you want your application to run on macOS Catalina (version 10.15) or higher, you'll want to notarize your app.</span></span> <span data-ttu-id="65d4d-165">AppHost, který odešlete s žádostí o notářskou insukci, by měl být používán s alespoň stejnými [výchozími nároky](#default-entitlements) pro .NET Core.</span><span class="sxs-lookup"><span data-stu-id="65d4d-165">The appHost you submit with your application for notarization should be used with at least the same [default entitlements](#default-entitlements) for .NET Core.</span></span>

## <a name="next-steps"></a><span data-ttu-id="65d4d-166">Další kroky</span><span class="sxs-lookup"><span data-stu-id="65d4d-166">Next steps</span></span>

- <span data-ttu-id="65d4d-167">[.NET Základní závislosti a požadavky](dependencies.md).</span><span class="sxs-lookup"><span data-stu-id="65d4d-167">[.NET Core dependencies and requirements](dependencies.md).</span></span>
- <span data-ttu-id="65d4d-168">[Nainstalujte sadu .NET Core SDK](sdk.md).</span><span class="sxs-lookup"><span data-stu-id="65d4d-168">[Install the .NET Core SDK](sdk.md).</span></span>
- [<span data-ttu-id="65d4d-169">Instalace rozhraní .NET Core Runtime</span><span class="sxs-lookup"><span data-stu-id="65d4d-169">Install the .NET Core Runtime</span></span>](runtime.md)
