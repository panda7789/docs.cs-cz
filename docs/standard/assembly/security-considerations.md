---
title: Důležité informace o zabezpečení sestavení
ms.date: 08/20/2019
helpviewer_keywords:
- assemblies [.NET Framework], security
- signcodes
- names [.NET Framework], assemblies
- strong-named assemblies, security considerations
- signing assemblies
- assemblies [.NET Framework], signing
- granting permissions, assemblies
- assemblies [.NET Framework], strong-named
- names [.NET Framework], strong names
- permissions [.NET Framework], assemblies
- security [.NET Framework], assemblies
- integrity with assemblies
ms.assetid: 1b5439c1-f3d5-4529-bd69-01814703d067
ms.openlocfilehash: 77c9f9131b556e0b8fa639cd723bf1ca8cd6602e
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/15/2020
ms.locfileid: "73972311"
---
# <a name="assembly-security-considerations"></a><span data-ttu-id="69860-102">Důležité informace o zabezpečení sestavení</span><span class="sxs-lookup"><span data-stu-id="69860-102">Assembly security considerations</span></span>
<span data-ttu-id="69860-103">Při vytváření sestavení můžete zadat sadu oprávnění, která sestavení vyžaduje ke spuštění.</span><span class="sxs-lookup"><span data-stu-id="69860-103">When you build an assembly, you can specify a set of permissions that the assembly requires to run.</span></span> <span data-ttu-id="69860-104">Zda jsou udělena určitá oprávnění nebo nejsou udělena sestavení, je založeno na důkazech.</span><span class="sxs-lookup"><span data-stu-id="69860-104">Whether certain permissions are granted or not granted to an assembly is based on evidence.</span></span>  
  
 <span data-ttu-id="69860-105">Existují dva odlišné způsoby, jak se používá důkaz:</span><span class="sxs-lookup"><span data-stu-id="69860-105">There are two distinct ways evidence is used:</span></span>  
  
- <span data-ttu-id="69860-106">Vstupní důkazy jsou sloučeny s důkazy shromážděnými zavaděčem k vytvoření konečné sady důkazů použitých pro řešení zásad.</span><span class="sxs-lookup"><span data-stu-id="69860-106">The input evidence is merged with the evidence gathered by the loader to create a final set of evidence used for policy resolution.</span></span> <span data-ttu-id="69860-107">Metody, které používají tuto sémantickou patří **Assembly.Load**, **Assembly.LoadFrom**a **Activator.CreateInstance**.</span><span class="sxs-lookup"><span data-stu-id="69860-107">The methods that use this semantic include **Assembly.Load**, **Assembly.LoadFrom**, and **Activator.CreateInstance**.</span></span>  
  
- <span data-ttu-id="69860-108">Vstupní důkazy se používají v nezměněné podobě jako konečný soubor důkazů použitých pro řešení zásad.</span><span class="sxs-lookup"><span data-stu-id="69860-108">The input evidence is used unaltered as the final set of evidence used for policy resolution.</span></span> <span data-ttu-id="69860-109">Metody, které používají tuto sémantickou patří **Assembly.Load(byte[])** a **AppDomain.DefineDynamicAssembly()**.</span><span class="sxs-lookup"><span data-stu-id="69860-109">The methods that use this semantic include **Assembly.Load(byte[])** and **AppDomain.DefineDynamicAssembly()**.</span></span>  
  
  <span data-ttu-id="69860-110">Volitelná oprávnění mohou být udělena [zásadami zabezpečení](../../framework/misc/code-access-security-basics.md) nastavenými v počítači, ve kterém bude sestavení spuštěno.</span><span class="sxs-lookup"><span data-stu-id="69860-110">Optional permissions can be granted by the [security policy](../../framework/misc/code-access-security-basics.md) set on the computer where the assembly will run.</span></span> <span data-ttu-id="69860-111">Pokud chcete, aby váš kód zpracovat všechny potenciální výjimky zabezpečení, můžete provést jednu z následujících akcí:</span><span class="sxs-lookup"><span data-stu-id="69860-111">If you want your code to handle all potential security exceptions, you can do one of the following:</span></span>  
  
- <span data-ttu-id="69860-112">Vložte žádost o oprávnění pro všechna oprávnění, která musí mít váš kód, a zvládněte předem selhání doby načítání, ke kterému dochází, pokud oprávnění nejsou udělena.</span><span class="sxs-lookup"><span data-stu-id="69860-112">Insert a permission request for all the permissions your code must have, and handle up front the load-time failure that occurs if the permissions are not granted.</span></span>  
  
- <span data-ttu-id="69860-113">Nepoužívejte žádost o oprávnění k získání oprávnění, která může váš kód potřebovat, ale buďte připraveni na zpracování výjimek zabezpečení, pokud oprávnění nejsou udělena.</span><span class="sxs-lookup"><span data-stu-id="69860-113">Do not use a permission request to obtain permissions your code might need, but be prepared to handle security exceptions if permissions are not granted.</span></span>  
  
  > [!NOTE]
  > <span data-ttu-id="69860-114">Zabezpečení je složitá oblast a máte mnoho možností, ze kterých si můžete vybrat.</span><span class="sxs-lookup"><span data-stu-id="69860-114">Security is a complex area, and you have many options to choose from.</span></span> <span data-ttu-id="69860-115">Další informace naleznete [v tématu Key Security Concepts](../../standard/security/key-security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="69860-115">For more information, see [Key Security Concepts](../../standard/security/key-security-concepts.md).</span></span>  
  
 <span data-ttu-id="69860-116">V době načítání důkazy sestavení se používá jako vstup do zásady zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="69860-116">At load time, the assembly's evidence is used as input to security policy.</span></span> <span data-ttu-id="69860-117">Zásady zabezpečení jsou vytvořeny podnikem a správcem počítače a také nastavením zásad uživatele a určují sadu oprávnění, která jsou udělena všem spravovaným kódům při spuštění.</span><span class="sxs-lookup"><span data-stu-id="69860-117">Security policy is established by the enterprise and the computer's administrator as well as by user policy settings, and determines the set of permissions that is granted to all managed code when executed.</span></span> <span data-ttu-id="69860-118">Zásady zabezpečení mohou být vytvořeny pro vydavatele sestavení (pokud má podpisový nástroj generovaný podpis), pro web a zónu (v podmínkách aplikace Internet Explorer) bylo sestavení staženo z nebo pro silný název sestavení.</span><span class="sxs-lookup"><span data-stu-id="69860-118">Security policy can be established for the publisher of the assembly (if it has a signing tool generated signature), for the Web site and zone (in Internet Explorer terms) the assembly was downloaded from, or for the assembly's strong name.</span></span> <span data-ttu-id="69860-119">Správce počítače může například vytvořit zásady zabezpečení, které umožní všem usměrňovaným kódům staženým z webu a podepsaným danou softwarovou společností přístup k databázi v počítači, ale neudělí přístup k zápisu na disk počítače.</span><span class="sxs-lookup"><span data-stu-id="69860-119">For example, a computer's administrator can establish security policy that allows all code downloaded from a Web site and signed by a given software company to access a database on a computer, but does not grant access to write to the computer's disk.</span></span>  
  
## <a name="strong-named-assemblies-and-signing-tools"></a><span data-ttu-id="69860-120">Sestavení se silným názvem a nástroje pro podepisování</span><span class="sxs-lookup"><span data-stu-id="69860-120">Strong-named assemblies and signing tools</span></span>  

 > [!WARNING]
 > <span data-ttu-id="69860-121">Nespoléhejte se na silné názvy pro zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="69860-121">Do not rely on strong names for security.</span></span> <span data-ttu-id="69860-122">Poskytují pouze jedinečnou identitu.</span><span class="sxs-lookup"><span data-stu-id="69860-122">They provide a unique identity only.</span></span>

 <span data-ttu-id="69860-123">Sestavení můžete podepsat dvěma různými, ale doplňkovými způsoby: silným názvem nebo pomocí [nástroje SignTool.exe (Sign Tool Tool).](../../framework/tools/signtool-exe.md)</span><span class="sxs-lookup"><span data-stu-id="69860-123">You can sign an assembly in two different but complementary ways: with a strong name or by using  [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md).</span></span> <span data-ttu-id="69860-124">Podepisování sestavení se silným názvem přidá šifrování veřejného klíče do souboru obsahujícího manifest sestavení.</span><span class="sxs-lookup"><span data-stu-id="69860-124">Signing an assembly with a strong name adds public key encryption to the file containing the assembly manifest.</span></span> <span data-ttu-id="69860-125">Podpis silného názvu pomáhá ověřit jedinečnost názvu, zabránit falšování názvů a poskytnout volajícím určitou identitu při překladu odkazu.</span><span class="sxs-lookup"><span data-stu-id="69860-125">Strong name signing helps to verify name uniqueness, prevent name spoofing, and provide callers with some identity when a reference is resolved.</span></span>  
  
 <span data-ttu-id="69860-126">Žádná úroveň důvěryhodnosti je spojena se silným názvem, což činí [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) důležité.</span><span class="sxs-lookup"><span data-stu-id="69860-126">No level of trust is associated with a strong name, which makes [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) important.</span></span> <span data-ttu-id="69860-127">Tyto dva podpisové nástroje vyžadují, aby vydavatel prokázal svou identitu orgánu třetí strany a získal certifikát.</span><span class="sxs-lookup"><span data-stu-id="69860-127">The two signing tools require a publisher to prove its identity to a third-party authority and obtain a certificate.</span></span> <span data-ttu-id="69860-128">Tento certifikát je pak vložen do souboru a může být použit správcem k rozhodnutí, zda důvěřovat pravosti kódu.</span><span class="sxs-lookup"><span data-stu-id="69860-128">This certificate is then embedded in your file and can be used by an administrator to decide whether to trust the code's authenticity.</span></span>  
  
 <span data-ttu-id="69860-129">Můžete dát silný název a digitální podpis vytvořený pomocí [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) do sestavy, nebo můžete použít buď samostatně.</span><span class="sxs-lookup"><span data-stu-id="69860-129">You can give both a strong name and a digital signature created using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) to an assembly, or you can use either alone.</span></span> <span data-ttu-id="69860-130">Dva nástroje pro podepisování mohou podepisovat pouze jeden soubor najednou. pro vícesouborové sestavení podepíšete soubor, který obsahuje manifest sestavení.</span><span class="sxs-lookup"><span data-stu-id="69860-130">The two signing tools can sign only one file at a time; for a multifile assembly, you sign the file that contains the assembly manifest.</span></span> <span data-ttu-id="69860-131">Silný název je uložen v souboru obsahujícím manifest sestavení, ale podpis vytvořený pomocí [signtool.exe (Sign Tool Tool)](../../framework/tools/signtool-exe.md) je uložen ve vyhrazeném slotu v přenosném spustitelném souboru (PE), který obsahuje manifest sestavení.</span><span class="sxs-lookup"><span data-stu-id="69860-131">A strong name is stored in the file containing the assembly manifest, but a signature created using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) is stored in a reserved slot in the portable executable (PE) file containing the assembly manifest.</span></span> <span data-ttu-id="69860-132">Podepisování sestavení pomocí [SignTool.exe (Sign Tool Tool)](../../framework/tools/signtool-exe.md) lze použít (se silným názvem nebo bez něj), pokud již máte hierarchii důvěryhodnosti, která závisí na [signtool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) generované podpisy, nebo když vaše zásada používá pouze klíčovou část a nekontroluje řetězec důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="69860-132">Signing of an assembly using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) can be used (with or without a strong name) when you already have a trust hierarchy that relies on [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) generated signatures, or when your policy uses only the key portion and does not check a chain of trust.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="69860-133">Při použití silného názvu a podpisu podpisu podpisu podpisu nástroje pro podepisování v sestavení musí být nejprve přiřazen silný název.</span><span class="sxs-lookup"><span data-stu-id="69860-133">When using both a strong name and a signing tool signature on an assembly, the strong name must be assigned first.</span></span>  
  
 <span data-ttu-id="69860-134">Běžný jazyk runtime také provádí ověření hash; manifest sestavení obsahuje seznam všech souborů, které tvoří sestavení, včetně hash každého souboru, jak existoval, když byl vytvořen manifest.</span><span class="sxs-lookup"><span data-stu-id="69860-134">The common language runtime also performs a hash verification; the assembly manifest contains a list of all files that make up the assembly, including a hash of each file as it existed when the manifest was built.</span></span> <span data-ttu-id="69860-135">Po načtení jednotlivých souborů je z obsahu vytvořena hodnota hash a ta je porovnána s hodnotou hash uloženou v manifestu.</span><span class="sxs-lookup"><span data-stu-id="69860-135">As each file is loaded, its contents are hashed and compared with the hash value stored in the manifest.</span></span> <span data-ttu-id="69860-136">Pokud se tyto dvě hodnoty hash neshodují, sestavení se nepodaří načíst.</span><span class="sxs-lookup"><span data-stu-id="69860-136">If the two hashes do not match, the assembly fails to load.</span></span>  
  
 <span data-ttu-id="69860-137">Vzhledem k tomu, že silné pojmenování a podepisování pomocí [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) zaručit integritu, můžete založit zásady zabezpečení přístupu kódu na tyto dvě formy evidence sestavení.</span><span class="sxs-lookup"><span data-stu-id="69860-137">Because strong naming and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) guarantee integrity, you can base code access security policy on these two forms of assembly evidence.</span></span> <span data-ttu-id="69860-138">Silné pojmenování a podepisování pomocí [signtool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) zaručují integritu prostřednictvím digitálních podpisů a certifikátů.</span><span class="sxs-lookup"><span data-stu-id="69860-138">Strong naming and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) guarantee integrity through digital signatures and certificates.</span></span> <span data-ttu-id="69860-139">Všechny uvedené technologie – ověření hash, silné pojmenování a podepisování pomocí [signtool.exe (Sign Tool)](../../framework/tools/signtool-exe.md)– spolupracují, aby se zajistilo, že sestavení nebylo žádným způsobem změněno.</span><span class="sxs-lookup"><span data-stu-id="69860-139">All the technologies mentioned—hash verification, strong naming, and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md)—work together to ensure that the assembly has not been altered in any way.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="69860-140">Viz také</span><span class="sxs-lookup"><span data-stu-id="69860-140">See also</span></span>

- [<span data-ttu-id="69860-141">Sestavení se silným názvem</span><span class="sxs-lookup"><span data-stu-id="69860-141">Strong-named assemblies</span></span>](strong-named.md)
- [<span data-ttu-id="69860-142">Sestavení v .NET</span><span class="sxs-lookup"><span data-stu-id="69860-142">Assemblies in .NET</span></span>](index.md)
- [<span data-ttu-id="69860-143">SignTool.exe (nástroj pro podpis)</span><span class="sxs-lookup"><span data-stu-id="69860-143">SignTool.exe (Sign Tool)</span></span>](../../framework/tools/signtool-exe.md)
