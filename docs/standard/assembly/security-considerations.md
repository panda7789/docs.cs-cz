---
title: Důležité informace o zabezpečení sestavení
description: Při sestavování sestavení .NET můžete zadat oprávnění, která sestavení vyžaduje ke spuštění. Tento článek popisuje sestavení se silným názvem a nástroje pro podepisování.
ms.date: 08/20/2019
helpviewer_keywords:
- assemblies [.NET Framework], security
- signcodes
- names [.NET Framework], assemblies
- strong-named assemblies, security considerations
- signing assemblies
- assemblies [.NET Framework], signing
- granting permissions, assemblies
- assemblies [.NET Framework], strong-named
- names [.NET Framework], strong names
- permissions [.NET Framework], assemblies
- security [.NET Framework], assemblies
- integrity with assemblies
ms.assetid: 1b5439c1-f3d5-4529-bd69-01814703d067
ms.openlocfilehash: 7f897241b121cf1bd52d02ee5f487aeafafc3cb0
ms.sourcegitcommit: d6bd7903d7d46698e9d89d3725f3bb4876891aa3
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/13/2020
ms.locfileid: "83378662"
---
# <a name="assembly-security-considerations"></a><span data-ttu-id="2a6a2-104">Důležité informace o zabezpečení sestavení</span><span class="sxs-lookup"><span data-stu-id="2a6a2-104">Assembly security considerations</span></span>
<span data-ttu-id="2a6a2-105">Při sestavování sestavení můžete zadat sadu oprávnění, které sestavení vyžaduje ke spuštění.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-105">When you build an assembly, you can specify a set of permissions that the assembly requires to run.</span></span> <span data-ttu-id="2a6a2-106">Zda jsou určitá oprávnění udělena nebo nejsou udělena sestavení, založena na legitimaci.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-106">Whether certain permissions are granted or not granted to an assembly is based on evidence.</span></span>  
  
 <span data-ttu-id="2a6a2-107">K dispozici jsou dva způsoby, jak se legitimace používá:</span><span class="sxs-lookup"><span data-stu-id="2a6a2-107">There are two distinct ways evidence is used:</span></span>  
  
- <span data-ttu-id="2a6a2-108">Vstupní legitimace se sloučí s legitimací shromážděnými zavaděčem a vytvoří finální sadu legitimace, která se používá pro řešení zásad.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-108">The input evidence is merged with the evidence gathered by the loader to create a final set of evidence used for policy resolution.</span></span> <span data-ttu-id="2a6a2-109">Metody, které používají tuto sémantickou sémantiku, zahrnují **Assembly. Load**, **Assembly. LoadFrom**a **Activator. CreateInstance**.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-109">The methods that use this semantic include **Assembly.Load**, **Assembly.LoadFrom**, and **Activator.CreateInstance**.</span></span>  
  
- <span data-ttu-id="2a6a2-110">Vstupní legitimace se nezměnila jako konečná sada legitimace, která se používá pro řešení zásad.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-110">The input evidence is used unaltered as the final set of evidence used for policy resolution.</span></span> <span data-ttu-id="2a6a2-111">Metody, které používají tuto sémantickou sémantiku, zahrnují **Assembly. Load (Byte [])** a **AppDomain. DefineDynamicAssembly ()**.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-111">The methods that use this semantic include **Assembly.Load(byte[])** and **AppDomain.DefineDynamicAssembly()**.</span></span>  
  
  <span data-ttu-id="2a6a2-112">Volitelná oprávnění mohou být udělena [zásadami zabezpečení](../../framework/misc/code-access-security-basics.md) nastavenými v počítači, kde bude sestavení spuštěno.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-112">Optional permissions can be granted by the [security policy](../../framework/misc/code-access-security-basics.md) set on the computer where the assembly will run.</span></span> <span data-ttu-id="2a6a2-113">Pokud chcete, aby váš kód zpracovával všechny potenciální výjimky zabezpečení, můžete provést jednu z následujících akcí:</span><span class="sxs-lookup"><span data-stu-id="2a6a2-113">If you want your code to handle all potential security exceptions, you can do one of the following:</span></span>  
  
- <span data-ttu-id="2a6a2-114">Vložte žádost o oprávnění pro všechna oprávnění, která váš kód musí mít, a zajistěte, aby se před tím, než se udělí oprávnění, nastavila zpráva o selhání při načtení.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-114">Insert a permission request for all the permissions your code must have, and handle up front the load-time failure that occurs if the permissions are not granted.</span></span>  
  
- <span data-ttu-id="2a6a2-115">Nepoužívejte žádost o oprávnění k získání oprávnění, která může váš kód potřebovat, ale připraví se pro zpracování výjimek zabezpečení, pokud nejsou udělená oprávnění.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-115">Do not use a permission request to obtain permissions your code might need, but be prepared to handle security exceptions if permissions are not granted.</span></span>  
  
  > [!NOTE]
  > <span data-ttu-id="2a6a2-116">Zabezpečení je složitá oblast a máte spoustu možností, jak vybírat.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-116">Security is a complex area, and you have many options to choose from.</span></span> <span data-ttu-id="2a6a2-117">Další informace najdete v tématu [klíčové koncepty zabezpečení](../../standard/security/key-security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="2a6a2-117">For more information, see [Key Security Concepts](../../standard/security/key-security-concepts.md).</span></span>  
  
 <span data-ttu-id="2a6a2-118">V době načítání se legitimace sestavení používá jako vstup do zásad zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-118">At load time, the assembly's evidence is used as input to security policy.</span></span> <span data-ttu-id="2a6a2-119">Zásady zabezpečení jsou zřízené podnikem a správcem počítače a také nastavením zásad uživatele a určují sadu oprávnění, která jsou udělena všem spravovaným kód při spuštění.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-119">Security policy is established by the enterprise and the computer's administrator as well as by user policy settings, and determines the set of permissions that is granted to all managed code when executed.</span></span> <span data-ttu-id="2a6a2-120">Zásady zabezpečení lze zřídit pro vydavatele sestavení (Pokud má podpis vygenerovaný nástrojem pro podpis), pro web a zónu (v terminologii aplikace Internet Explorer), ze kterého bylo sestavení staženo nebo pro silný název sestavení.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-120">Security policy can be established for the publisher of the assembly (if it has a signing tool generated signature), for the Web site and zone (in Internet Explorer terms) the assembly was downloaded from, or for the assembly's strong name.</span></span> <span data-ttu-id="2a6a2-121">Správce počítače může například vytvořit zásadu zabezpečení, která umožňuje veškerý kód stažený z webu a podepsaný danou softwarovou společností pro přístup k databázi v počítači, ale neuděluje přístup k zápisu do disku počítače.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-121">For example, a computer's administrator can establish security policy that allows all code downloaded from a Web site and signed by a given software company to access a database on a computer, but does not grant access to write to the computer's disk.</span></span>  
  
## <a name="strong-named-assemblies-and-signing-tools"></a><span data-ttu-id="2a6a2-122">Sestavení a nástroje pro podepisování se silným názvem</span><span class="sxs-lookup"><span data-stu-id="2a6a2-122">Strong-named assemblies and signing tools</span></span>  

 > [!WARNING]
 > <span data-ttu-id="2a6a2-123">Nespoléhá se na silné názvy zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-123">Do not rely on strong names for security.</span></span> <span data-ttu-id="2a6a2-124">Poskytují pouze jedinečnou identitu.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-124">They provide a unique identity only.</span></span>

 <span data-ttu-id="2a6a2-125">Sestavení můžete podepsat dvěma různými způsoby, ale s použitím silného názvu nebo pomocí [nástroje SignTool. exe (Sign Tool)](../../framework/tools/signtool-exe.md).</span><span class="sxs-lookup"><span data-stu-id="2a6a2-125">You can sign an assembly in two different but complementary ways: with a strong name or by using  [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md).</span></span> <span data-ttu-id="2a6a2-126">Podepsání sestavení silným názvem přidá šifrování pomocí veřejného klíče do souboru obsahujícího manifest sestavení.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-126">Signing an assembly with a strong name adds public key encryption to the file containing the assembly manifest.</span></span> <span data-ttu-id="2a6a2-127">Podepisování silným názvem pomáhá ověřit jedinečnost názvu, zabránit falšování názvů a poskytovat volajícím s určitou identitou, když se odkaz vyřeší.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-127">Strong name signing helps to verify name uniqueness, prevent name spoofing, and provide callers with some identity when a reference is resolved.</span></span>  
  
 <span data-ttu-id="2a6a2-128">Není k dispozici žádná úroveň důvěryhodnosti se silným názvem, který je důležitý pro [Nástroj SignTool. exe (Sign Tool)](../../framework/tools/signtool-exe.md) .</span><span class="sxs-lookup"><span data-stu-id="2a6a2-128">No level of trust is associated with a strong name, which makes [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) important.</span></span> <span data-ttu-id="2a6a2-129">Dva podpisové nástroje vyžadují, aby Vydavatel prokázal svoji identitu autoritě třetí strany a získal certifikát.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-129">The two signing tools require a publisher to prove its identity to a third-party authority and obtain a certificate.</span></span> <span data-ttu-id="2a6a2-130">Tento certifikát je pak vložen do souboru a může ho použít správce k rozhodnutí, jestli chcete důvěřovat pravosti kódu.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-130">This certificate is then embedded in your file and can be used by an administrator to decide whether to trust the code's authenticity.</span></span>  
  
 <span data-ttu-id="2a6a2-131">Můžete zadat silný název a digitální podpis vytvořený pomocí [nástroje SignTool. exe (Sign Tool)](../../framework/tools/signtool-exe.md) do sestavení nebo můžete použít samostatně.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-131">You can give both a strong name and a digital signature created using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) to an assembly, or you can use either alone.</span></span> <span data-ttu-id="2a6a2-132">Pomocí obou podpisových nástrojů lze současně podepsat pouze jeden soubor. pro vícesouborové sestavení podepište soubor, který obsahuje manifest sestavení.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-132">The two signing tools can sign only one file at a time; for a multifile assembly, you sign the file that contains the assembly manifest.</span></span> <span data-ttu-id="2a6a2-133">Silný název je uložen v souboru obsahujícím manifest sestavení, ale signatura vytvořená pomocí [nástroje SignTool. exe (Sign Tool)](../../framework/tools/signtool-exe.md) je uložena v přenosném spustitelném souboru (PE), který obsahuje manifest sestavení.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-133">A strong name is stored in the file containing the assembly manifest, but a signature created using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) is stored in a reserved slot in the portable executable (PE) file containing the assembly manifest.</span></span> <span data-ttu-id="2a6a2-134">Podpis sestavení pomocí [nástroje SignTool. exe (Nástroj pro podepsání)](../../framework/tools/signtool-exe.md) lze použít (s nebo bez silného názvu), pokud již máte hierarchii důvěryhodnosti, která spoléhá na signatury vygenerované pomocí [nástroje SignTool. exe (Sign Tool)](../../framework/tools/signtool-exe.md) , nebo když vaše zásada používá pouze část klíče a nekontroluje řetěz důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-134">Signing of an assembly using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) can be used (with or without a strong name) when you already have a trust hierarchy that relies on [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) generated signatures, or when your policy uses only the key portion and does not check a chain of trust.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="2a6a2-135">Při použití silného názvu a podpisu podpisového nástroje v sestavení musí být nejprve přiřazen silný název.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-135">When using both a strong name and a signing tool signature on an assembly, the strong name must be assigned first.</span></span>  
  
 <span data-ttu-id="2a6a2-136">Modul CLR (Common Language Runtime) také provádí ověřování hodnot hash; manifest sestavení obsahuje seznam všech souborů, ze kterých se sestaví sestavení, včetně hash každého souboru, který existoval při sestavení manifestu.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-136">The common language runtime also performs a hash verification; the assembly manifest contains a list of all files that make up the assembly, including a hash of each file as it existed when the manifest was built.</span></span> <span data-ttu-id="2a6a2-137">Po načtení jednotlivých souborů je z obsahu vytvořena hodnota hash a ta je porovnána s hodnotou hash uloženou v manifestu.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-137">As each file is loaded, its contents are hashed and compared with the hash value stored in the manifest.</span></span> <span data-ttu-id="2a6a2-138">Pokud se tyto dvě hodnoty hash neshodují, sestavení se nepodaří načíst.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-138">If the two hashes do not match, the assembly fails to load.</span></span>  
  
 <span data-ttu-id="2a6a2-139">Vzhledem k tomu, že silné přidělování názvů a podepisování pomocí [nástroje SignTool. exe (Sign Tool)](../../framework/tools/signtool-exe.md) zaručuje integritu, můžete zásady zabezpečení přístupu ke kódu použít na těchto dvou formulářích legitimace sestavení.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-139">Because strong naming and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) guarantee integrity, you can base code access security policy on these two forms of assembly evidence.</span></span> <span data-ttu-id="2a6a2-140">Silné pojmenování a podepisování pomocí [nástroje SignTool. exe (Sign Tool)](../../framework/tools/signtool-exe.md) zaručuje integritu prostřednictvím digitálních podpisů a certifikátů.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-140">Strong naming and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) guarantee integrity through digital signatures and certificates.</span></span> <span data-ttu-id="2a6a2-141">Všechny zmíněné technologie – ověřování hodnoty hash, silné pojmenování a podepisování pomocí [nástroje SignTool. exe (Sign Tool)](../../framework/tools/signtool-exe.md)– Pracujte společně, aby bylo zajištěno, že sestavení nebylo nijak změněno.</span><span class="sxs-lookup"><span data-stu-id="2a6a2-141">All the technologies mentioned—hash verification, strong naming, and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md)—work together to ensure that the assembly has not been altered in any way.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2a6a2-142">Viz také</span><span class="sxs-lookup"><span data-stu-id="2a6a2-142">See also</span></span>

- [<span data-ttu-id="2a6a2-143">Sestavení se silným názvem</span><span class="sxs-lookup"><span data-stu-id="2a6a2-143">Strong-named assemblies</span></span>](strong-named.md)
- [<span data-ttu-id="2a6a2-144">Sestavení v .NET</span><span class="sxs-lookup"><span data-stu-id="2a6a2-144">Assemblies in .NET</span></span>](index.md)
- [<span data-ttu-id="2a6a2-145">SignTool. exe (Nástroj pro podepsání)</span><span class="sxs-lookup"><span data-stu-id="2a6a2-145">SignTool.exe (Sign Tool)</span></span>](../../framework/tools/signtool-exe.md)
