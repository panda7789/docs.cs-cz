---
title: Připojené a odpojené podřízené úlohy
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- tasks, child tasks
ms.assetid: c95788bf-90a6-4e96-b7bc-58e36a228cc5
ms.openlocfilehash: 8f15ee4f136e3e2df1a4e1c7683467f2a4bc9bc0
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/15/2020
ms.locfileid: "73123189"
---
# <a name="attached-and-detached-child-tasks"></a><span data-ttu-id="b958c-102">Připojené a odpojené podřízené úlohy</span><span class="sxs-lookup"><span data-stu-id="b958c-102">Attached and Detached Child Tasks</span></span>
<span data-ttu-id="b958c-103">Podřízený *úkol* (nebo *vnořený úkol*) je <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> instance, která je vytvořena v delegátovi uživatele jiné úlohy, která se označuje jako *nadřazená úloha*.</span><span class="sxs-lookup"><span data-stu-id="b958c-103">A *child task* (or *nested task*) is a <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> instance that is created in the user delegate of another task, which is known as the *parent task*.</span></span> <span data-ttu-id="b958c-104">Podřízený úkol může být odpojen nebo připojen.</span><span class="sxs-lookup"><span data-stu-id="b958c-104">A child task can be either detached or attached.</span></span> <span data-ttu-id="b958c-105">*Odpojená podřízená úloha* je úloha, která se provádí nezávisle na nadřazené úloze.</span><span class="sxs-lookup"><span data-stu-id="b958c-105">A *detached child task* is a task that executes independently of its parent.</span></span> <span data-ttu-id="b958c-106">Připojený *podřízený úkol* je vnořený úkol, který je vytvořen s <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> možností, jejíž nadřazený není explicitně nebo ve výchozím nastavení zakázat připojení.</span><span class="sxs-lookup"><span data-stu-id="b958c-106">An *attached child task* is a nested task that is created with the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option whose parent does not explicitly or by default prohibit it from being attached.</span></span> <span data-ttu-id="b958c-107">Úkol může vytvořit libovolný počet připojených a odpojených podřízených úloh, omezených pouze systémovými prostředky.</span><span class="sxs-lookup"><span data-stu-id="b958c-107">A task may create any number of attached and detached child tasks, limited only by system resources.</span></span>  
  
 <span data-ttu-id="b958c-108">V následující tabulce jsou uvedeny základní rozdíly mezi dvěma druhy podřízených úkolů.</span><span class="sxs-lookup"><span data-stu-id="b958c-108">The following table lists the basic differences between the two kinds of child tasks.</span></span>  
  
|<span data-ttu-id="b958c-109">Kategorie</span><span class="sxs-lookup"><span data-stu-id="b958c-109">Category</span></span>|<span data-ttu-id="b958c-110">Odpojené podřízené úkoly</span><span class="sxs-lookup"><span data-stu-id="b958c-110">Detached child tasks</span></span>|<span data-ttu-id="b958c-111">Připojené podřízené úkoly</span><span class="sxs-lookup"><span data-stu-id="b958c-111">Attached child tasks</span></span>|  
|--------------|--------------------------|--------------------------|  
|<span data-ttu-id="b958c-112">Nadřazený čeká na dokončení podřízených úkolů.</span><span class="sxs-lookup"><span data-stu-id="b958c-112">Parent waits for child tasks to complete.</span></span>|<span data-ttu-id="b958c-113">Ne</span><span class="sxs-lookup"><span data-stu-id="b958c-113">No</span></span>|<span data-ttu-id="b958c-114">Ano</span><span class="sxs-lookup"><span data-stu-id="b958c-114">Yes</span></span>|  
|<span data-ttu-id="b958c-115">Nadřazený šíří výjimky vyzývané podřízenými úkoly.</span><span class="sxs-lookup"><span data-stu-id="b958c-115">Parent propagates exceptions thrown by child tasks.</span></span>|<span data-ttu-id="b958c-116">Ne</span><span class="sxs-lookup"><span data-stu-id="b958c-116">No</span></span>|<span data-ttu-id="b958c-117">Ano</span><span class="sxs-lookup"><span data-stu-id="b958c-117">Yes</span></span>|  
|<span data-ttu-id="b958c-118">Stav rodiče závisí na stavu dítěte.</span><span class="sxs-lookup"><span data-stu-id="b958c-118">Status of parent depends on status of child.</span></span>|<span data-ttu-id="b958c-119">Ne</span><span class="sxs-lookup"><span data-stu-id="b958c-119">No</span></span>|<span data-ttu-id="b958c-120">Ano</span><span class="sxs-lookup"><span data-stu-id="b958c-120">Yes</span></span>|  
  
 <span data-ttu-id="b958c-121">Ve většině případů doporučujeme použít odpojené podřízené úkoly, protože jejich vztahy s jinými úkoly jsou méně složité.</span><span class="sxs-lookup"><span data-stu-id="b958c-121">In most scenarios, we recommend that you use detached child tasks, because their relationships with other tasks are less complex.</span></span> <span data-ttu-id="b958c-122">To je důvod, proč jsou úkoly vytvořené uvnitř nadřazených úkolů ve výchozím nastavení odpojeny a je nutné explicitně zadat <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> možnost vytvoření připojené podřízené úlohy.</span><span class="sxs-lookup"><span data-stu-id="b958c-122">That is why tasks created inside parent tasks are detached by default, and you must explicitly specify the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option to create an attached child task.</span></span>  
  
## <a name="detached-child-tasks"></a><span data-ttu-id="b958c-123">Odpojené podřízené úkoly</span><span class="sxs-lookup"><span data-stu-id="b958c-123">Detached child tasks</span></span>  
 <span data-ttu-id="b958c-124">Přestože je podřízená úloha vytvořena nadřazeným úkolem, je ve výchozím nastavení nezávislá na nadřazené úloze.</span><span class="sxs-lookup"><span data-stu-id="b958c-124">Although a child task is created by a parent task, by default it is independent of the parent task.</span></span> <span data-ttu-id="b958c-125">V následujícím příkladu nadřazený úkol vytvoří jednu jednoduchou podřízenou úlohu.</span><span class="sxs-lookup"><span data-stu-id="b958c-125">In the following example, a parent task creates one simple child task.</span></span> <span data-ttu-id="b958c-126">Pokud spustíte ukázkový kód vícekrát, můžete si všimnout, že výstup z příkladu se liší od zobrazené a také, že výstup může změnit při každém spuštění kódu.</span><span class="sxs-lookup"><span data-stu-id="b958c-126">If you run the example code multiple times, you may notice that the output from the example differs from that shown, and also that the output may change each time you run the code.</span></span> <span data-ttu-id="b958c-127">K tomu dochází, protože nadřazené úlohy a podřízené úkoly provádět nezávisle na sobě; dítě je samostatný úkol.</span><span class="sxs-lookup"><span data-stu-id="b958c-127">This occurs because the parent task and child tasks execute independently of each other; the child is a detached task.</span></span> <span data-ttu-id="b958c-128">Příklad čeká pouze na dokončení nadřazené úlohy a podřízená úloha se nemusí spustit nebo dokončit před ukončením konzolové aplikace.</span><span class="sxs-lookup"><span data-stu-id="b958c-128">The example waits only for the parent task to complete, and the child task may not execute or complete before the console app terminates.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/nested1.cs#1)]
 [!code-vb[TPL_ChildTasks#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/nested1.vb#1)]  
  
 <span data-ttu-id="b958c-129">Pokud je podřízená <xref:System.Threading.Tasks.Task%601> úloha reprezentována objektem, nikoli objektem, <xref:System.Threading.Tasks.Task> můžete zajistit, že <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> nadřazená úloha bude čekat na dokončení podřízené ho dokončení přístupem k vlastnosti podřízeného i v případě, že se jedná o odpojenou podřízenou úlohu.</span><span class="sxs-lookup"><span data-stu-id="b958c-129">If the child task is represented by a <xref:System.Threading.Tasks.Task%601> object rather than a <xref:System.Threading.Tasks.Task> object, you can ensure that the parent task will wait for the child to complete by accessing the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property of the child even if it is a detached child task.</span></span> <span data-ttu-id="b958c-130">Vlastnost <xref:System.Threading.Tasks.Task%601.Result%2A> blokuje, dokud jeho úkol dokončí, jak ukazuje následující příklad.</span><span class="sxs-lookup"><span data-stu-id="b958c-130">The <xref:System.Threading.Tasks.Task%601.Result%2A> property blocks until its task completes, as the following example shows.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/childtasks.cs#4)]
 [!code-vb[TPL_ChildTasks#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/tpl_childtasks.vb#4)]  
  
## <a name="attached-child-tasks"></a><span data-ttu-id="b958c-131">Připojené podřízené úkoly</span><span class="sxs-lookup"><span data-stu-id="b958c-131">Attached child tasks</span></span>  
 <span data-ttu-id="b958c-132">Na rozdíl od odpojených podřízených úkolů jsou připojené podřízené úkoly úzce synchronizovány s nadřazenou úlohou.</span><span class="sxs-lookup"><span data-stu-id="b958c-132">Unlike detached child tasks, attached child tasks are closely synchronized with the parent.</span></span> <span data-ttu-id="b958c-133">Odpojenou podřízenou úlohu v předchozím příkladu můžete změnit <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> na připojenou podřízenou úlohu pomocí možnosti v příkazu vytvoření úkolu, jak je znázorněno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="b958c-133">You can change the detached child task in the previous example to an attached child task by using the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option in the task creation statement, as shown in the following example.</span></span> <span data-ttu-id="b958c-134">V tomto kódu musí být připojená podřízená úloha dokončena před nadřazenou úlohou.</span><span class="sxs-lookup"><span data-stu-id="b958c-134">In this code, the attached child task completes before its parent.</span></span> <span data-ttu-id="b958c-135">V důsledku toho výstup z příkladu je stejný při každém spuštění kódu.</span><span class="sxs-lookup"><span data-stu-id="b958c-135">As a result, the output from the example is the same each time you run the code.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/child1.cs#2)]
 [!code-vb[TPL_ChildTasks#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/child1.vb#2)]  
  
 <span data-ttu-id="b958c-136">Připojené podřízené úlohy můžete použít k vytvoření úzce synchronizovaných grafů asynchronních operací.</span><span class="sxs-lookup"><span data-stu-id="b958c-136">You can use attached child tasks to create tightly synchronized graphs of asynchronous operations.</span></span>  
  
 <span data-ttu-id="b958c-137">Podřízený úkol se však může připojit k nadřazenému úkolu pouze v případě, že její nadřazený úkol nezakazuje připojené podřízené úkoly.</span><span class="sxs-lookup"><span data-stu-id="b958c-137">However, a child task can attach to its parent only if its parent does not prohibit attached child tasks.</span></span> <span data-ttu-id="b958c-138">Nadřazené úkoly mohou explicitně zabránit <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> tomu, aby se k nim podřízené úkoly připojily zadáním možnosti v konstruktoru třídy nadřazeného úkolu nebo v metodě. <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="b958c-138">Parent tasks can explicitly prevent child tasks from attaching to them by specifying the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option in the parent task's class constructor or the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="b958c-139">Nadřazené úkoly implicitně zabránit podřízené úkoly <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> z jejich připojení, pokud jsou vytvořeny voláním metody.</span><span class="sxs-lookup"><span data-stu-id="b958c-139">Parent tasks implicitly prevent child tasks from attaching to them if they are created by calling the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="b958c-140">Toto dokládá následující příklad.</span><span class="sxs-lookup"><span data-stu-id="b958c-140">The following example illustrates this.</span></span> <span data-ttu-id="b958c-141">Je totožný s předchozím příkladem, s tím <xref:System.Threading.Tasks.Task.Run%28System.Action%29?displayProperty=nameWithType> rozdílem, <xref:System.Threading.Tasks.TaskFactory.StartNew%28System.Action%29?displayProperty=nameWithType> že nadřazený úkol je vytvořen voláním metody spíše než metody.</span><span class="sxs-lookup"><span data-stu-id="b958c-141">It is identical to the previous example, except that the parent task is created by calling the <xref:System.Threading.Tasks.Task.Run%28System.Action%29?displayProperty=nameWithType> method rather than the <xref:System.Threading.Tasks.TaskFactory.StartNew%28System.Action%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="b958c-142">Vzhledem k tomu, že podřízený úkol není schopen připojit k nadřazené, výstup z příkladu je nepředvídatelné.</span><span class="sxs-lookup"><span data-stu-id="b958c-142">Because the child task is not able to attach to its parent, the output from the example is unpredictable.</span></span> <span data-ttu-id="b958c-143">Vzhledem k tomu, <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> že výchozí <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>možnosti vytváření úloh pro přetížení zahrnují , tento příklad je funkčně ekvivalentní prvnímu příkladu v části "Odpojené podřízené úkoly".</span><span class="sxs-lookup"><span data-stu-id="b958c-143">Because the default task creation options for the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> overloads include <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>, this example is functionally equivalent to the first example in the "Detached child tasks" section.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/child1a.cs#3)]
 [!code-vb[TPL_ChildTasks#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/child1a.vb#3)]  
  
## <a name="exceptions-in-child-tasks"></a><span data-ttu-id="b958c-144">Výjimky v podřízených úkolech</span><span class="sxs-lookup"><span data-stu-id="b958c-144">Exceptions in child tasks</span></span>  
 <span data-ttu-id="b958c-145">Pokud odpojená podřízená úloha vyvolá výjimku, musí být tato výjimka pozorována nebo zpracována přímo v nadřazené úloze stejně jako u všech nevnořených úloh.</span><span class="sxs-lookup"><span data-stu-id="b958c-145">If a detached child task throws an exception, that exception must be observed or handled directly in the parent task just as with any non-nested task.</span></span> <span data-ttu-id="b958c-146">Pokud připojená podřízená úloha vyvolá výjimku, výjimka se automaticky rozšíří do nadřazené úlohy a <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> zpět do vlákna, které čeká nebo se pokusí o přístup k vlastnosti úlohy.</span><span class="sxs-lookup"><span data-stu-id="b958c-146">If an attached child task throws an exception, the exception is automatically propagated to the parent task and back to the thread that waits or tries to access the task's <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="b958c-147">Proto pomocí připojené podřízené úkoly, můžete zpracovat všechny výjimky <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> pouze v jednom bodě volání na volající vlákno.</span><span class="sxs-lookup"><span data-stu-id="b958c-147">Therefore, by using attached child tasks, you can handle all exceptions at just one point in the call to <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> on the calling thread.</span></span> <span data-ttu-id="b958c-148">Další informace naleznete v [tématu Zpracování výjimek](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="b958c-148">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span>  
  
## <a name="cancellation-and-child-tasks"></a><span data-ttu-id="b958c-149">Zrušení a podřízené úkoly</span><span class="sxs-lookup"><span data-stu-id="b958c-149">Cancellation and child tasks</span></span>  
 <span data-ttu-id="b958c-150">Zrušení úkolu je kooperativní.</span><span class="sxs-lookup"><span data-stu-id="b958c-150">Task cancellation is cooperative.</span></span> <span data-ttu-id="b958c-151">To znamená, že chcete-li zrušit, musí každá připojená nebo odpojená podřízená úloha sledovat stav tokenu zrušení.</span><span class="sxs-lookup"><span data-stu-id="b958c-151">That is, to be cancelable, every attached or detached child task must monitor the status of the cancellation token.</span></span> <span data-ttu-id="b958c-152">Pokud chcete zrušit nadřazenou položku a všechny jeho podřízené položky pomocí jednoho požadavku na zrušení, předáte stejný token jako argument všem úkolům a v každém úkolu poskytnete logiku pro odpověď na požadavek v jednotlivých úkolech.</span><span class="sxs-lookup"><span data-stu-id="b958c-152">If you want to cancel a parent and all its children by using one cancellation request, you pass the same token as an argument to all tasks and provide in each task the logic to respond to the request in each task.</span></span> <span data-ttu-id="b958c-153">Další informace naleznete v [tématu Zrušení úkolu](../../../docs/standard/parallel-programming/task-cancellation.md) a [postup: Zrušení úkolu a jeho podřízených úloh](../../../docs/standard/parallel-programming/how-to-cancel-a-task-and-its-children.md).</span><span class="sxs-lookup"><span data-stu-id="b958c-153">For more information, see [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md) and [How to: Cancel a Task and Its Children](../../../docs/standard/parallel-programming/how-to-cancel-a-task-and-its-children.md).</span></span>  
  
### <a name="when-the-parent-cancels"></a><span data-ttu-id="b958c-154">Když rodič zruší</span><span class="sxs-lookup"><span data-stu-id="b958c-154">When the parent cancels</span></span>  
 <span data-ttu-id="b958c-155">Pokud nadřazený zruší sám před spuštěním podřízené úlohy, podřízený nikdy nespustí.</span><span class="sxs-lookup"><span data-stu-id="b958c-155">If a parent cancels itself before its child task is started, the child never starts.</span></span> <span data-ttu-id="b958c-156">Pokud nadřazený zruší sám po jeho podřízené úlohy již byla zahájena, podřízený spustí k dokončení, pokud má vlastní logiku zrušení.</span><span class="sxs-lookup"><span data-stu-id="b958c-156">If a parent cancels itself after its child task has already started, the child runs to completion unless it has its own cancellation logic.</span></span> <span data-ttu-id="b958c-157">Další informace naleznete v [tématu Zrušení úkolu](../../../docs/standard/parallel-programming/task-cancellation.md).</span><span class="sxs-lookup"><span data-stu-id="b958c-157">For more information, see [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md).</span></span>  
  
### <a name="when-a-detached-child-task-cancels"></a><span data-ttu-id="b958c-158">Když se odpojená podřízená úloha zruší</span><span class="sxs-lookup"><span data-stu-id="b958c-158">When a detached child task cancels</span></span>  
 <span data-ttu-id="b958c-159">Pokud odpojené podřízené úlohy zruší sám pomocí stejného tokenu, který byl předán nadřazený a nadřazený nečeká na podřízenou úlohu, žádná výjimka je rozšířena, protože výjimka je považována za neškodné zrušení spolupráce.</span><span class="sxs-lookup"><span data-stu-id="b958c-159">If a detached child task cancels itself by using the same token that was passed to the parent, and the parent does not wait for the child task, no exception is propagated, because the exception is treated as benign cooperation cancellation.</span></span> <span data-ttu-id="b958c-160">Toto chování je stejné jako u všech úkolů nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="b958c-160">This behavior is the same as that of any top-level task.</span></span>  
  
### <a name="when-an-attached-child-task-cancels"></a><span data-ttu-id="b958c-161">Když se připojený podřízený úkol zruší</span><span class="sxs-lookup"><span data-stu-id="b958c-161">When an attached child task cancels</span></span>  
 <span data-ttu-id="b958c-162">Když připojené podřízené úlohy zruší sám pomocí stejného tokenu, <xref:System.Threading.Tasks.TaskCanceledException> který byl předán jeho nadřazené úlohy, a je rozšířena do spojovacího vlákna uvnitř <xref:System.AggregateException>.</span><span class="sxs-lookup"><span data-stu-id="b958c-162">When an attached child task cancels itself by using the same token that was passed to its parent task, a <xref:System.Threading.Tasks.TaskCanceledException> is propagated to the joining thread inside an <xref:System.AggregateException>.</span></span> <span data-ttu-id="b958c-163">Musíte počkat na nadřazenou úlohu, abyste mohli zpracovávat všechny neškodné výjimky kromě všech chybných výjimek, které jsou šířeny prostřednictvím grafu připojených podřízených úloh.</span><span class="sxs-lookup"><span data-stu-id="b958c-163">You must wait for the parent task so that you can handle all benign exceptions in addition to all faulting exceptions that are propagated up through a graph of attached child tasks.</span></span>  
  
 <span data-ttu-id="b958c-164">Další informace naleznete v [tématu Zpracování výjimek](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="b958c-164">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span>  
  
## <a name="preventing-a-child-task-from-attaching-to-its-parent"></a><span data-ttu-id="b958c-165">Zabránění připojení podřízené úlohy k nadřazené úloze</span><span class="sxs-lookup"><span data-stu-id="b958c-165">Preventing a child task from attaching to its parent</span></span>  
 <span data-ttu-id="b958c-166">Neošetřená výjimka, která je vyvolána podřízenou úlohou, je rozšířena na nadřazenou úlohu.</span><span class="sxs-lookup"><span data-stu-id="b958c-166">An unhandled exception that is thrown by a child task is propagated to the parent task.</span></span> <span data-ttu-id="b958c-167">Toto chování můžete použít k pozorování všech výjimek podřízených úloh z jedné kořenové úlohy namísto procházení stromu úkolů.</span><span class="sxs-lookup"><span data-stu-id="b958c-167">You can use this behavior to observe all child task exceptions from one root task instead of traversing a tree of tasks.</span></span> <span data-ttu-id="b958c-168">Šíření výjimek však může být problematické, pokud nadřazená úloha neočekává přílohu z jiného kódu.</span><span class="sxs-lookup"><span data-stu-id="b958c-168">However, exception propagation can be problematic when a parent task does not expect attachment from other code.</span></span> <span data-ttu-id="b958c-169">Zvažte například aplikaci, která volá komponentu <xref:System.Threading.Tasks.Task> knihovny jiného výrobce z objektu.</span><span class="sxs-lookup"><span data-stu-id="b958c-169">For example, consider an app that calls a third-party library component from a <xref:System.Threading.Tasks.Task> object.</span></span> <span data-ttu-id="b958c-170">Pokud součást knihovny jiného <xref:System.Threading.Tasks.Task> výrobce také <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> vytvoří objekt a určuje jeho připojení k nadřazené úloze, všechny neošetřené výjimky, ke kterým dochází v podřízené úloze, se rozšíří na nadřazenou úlohu.</span><span class="sxs-lookup"><span data-stu-id="b958c-170">If the third-party library component also creates a <xref:System.Threading.Tasks.Task> object and specifies <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> to attach it to the parent task, any unhandled exceptions that occur in the child task propagate to the parent.</span></span> <span data-ttu-id="b958c-171">To může vést k neočekávanému chování v hlavní aplikaci.</span><span class="sxs-lookup"><span data-stu-id="b958c-171">This could lead to unexpected behavior in the main app.</span></span>  
  
 <span data-ttu-id="b958c-172">Chcete-li zabránit připojení podřízené úlohy k <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> nadřazené <xref:System.Threading.Tasks.Task> <xref:System.Threading.Tasks.Task%601> úloze, zadejte tuto možnost při vytváření nadřazeného nebo objektu.</span><span class="sxs-lookup"><span data-stu-id="b958c-172">To prevent a child task from attaching to its parent task, specify the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option when you create the parent <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> object.</span></span> <span data-ttu-id="b958c-173">Když se úloha pokusí připojit k nadřazené a nadřazená určuje <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> možnost, podřízená <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> úloha se nebude moci připojit k nadřazené úloze a provede se stejně, jako by tato možnost nebyla zadána.</span><span class="sxs-lookup"><span data-stu-id="b958c-173">When a task tries to attach to its parent and the parent specifies the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option, the child task will not be able to attach to a parent and will execute just as if the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option was not specified.</span></span>  
  
 <span data-ttu-id="b958c-174">Můžete také zabránit podřízené úloze v připojení k nadřazené úlohě, když podřízená úloha není dokončena včas.</span><span class="sxs-lookup"><span data-stu-id="b958c-174">You might also want to prevent a child task from attaching to its parent when the child task does not finish in a timely manner.</span></span> <span data-ttu-id="b958c-175">Vzhledem k tomu, že nadřazená úloha se nedokončí, dokud nebudou dokončeny všechny podřízené úlohy, může dlouho běžící podřízená úloha způsobit, že celková aplikace bude fungovat špatně.</span><span class="sxs-lookup"><span data-stu-id="b958c-175">Because a parent task does not finish until all child tasks finish, a long-running child task can cause the overall app to perform poorly.</span></span> <span data-ttu-id="b958c-176">Příklad, který ukazuje, jak zlepšit výkon aplikace tím, že brání úkolu v připojení k nadřazenému úkolu, najdete v [tématu Jak: Zabránit podřízené úloze v připojení k nadřazené úloze](../../../docs/standard/parallel-programming/how-to-prevent-a-child-task-from-attaching-to-its-parent.md).</span><span class="sxs-lookup"><span data-stu-id="b958c-176">For an example that shows how to improve app performance by preventing a task from attaching to its parent task, see [How to: Prevent a Child Task from Attaching to its Parent](../../../docs/standard/parallel-programming/how-to-prevent-a-child-task-from-attaching-to-its-parent.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b958c-177">Viz také</span><span class="sxs-lookup"><span data-stu-id="b958c-177">See also</span></span>

- [<span data-ttu-id="b958c-178">Paralelní programování</span><span class="sxs-lookup"><span data-stu-id="b958c-178">Parallel Programming</span></span>](../../../docs/standard/parallel-programming/index.md)
- [<span data-ttu-id="b958c-179">Datový paralelismus</span><span class="sxs-lookup"><span data-stu-id="b958c-179">Data Parallelism</span></span>](../../../docs/standard/parallel-programming/data-parallelism-task-parallel-library.md)
