---
title: Přehled primitiv synchronizace
description: Informace o primitivech synchronizace vláken .NET, které se používají k synchronizaci přístupu ke sdílenému prostředku nebo interakci podprocesu ovládacího prvku
ms.date: 10/01/2018
ms.technology: dotnet-standard
helpviewer_keywords:
- synchronization, threads
- threading [.NET],synchronizing threads
- managed threading
ms.assetid: b782bcb8-da6a-4c6a-805f-2eb46d504309
ms.openlocfilehash: 7347c9b40f150febc6a163ae3aa3267123ea0e9d
ms.sourcegitcommit: 465547886a1224a5435c3ac349c805e39ce77706
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/21/2020
ms.locfileid: "81739369"
---
# <a name="overview-of-synchronization-primitives"></a><span data-ttu-id="cb87b-103">Přehled primitiv synchronizace</span><span class="sxs-lookup"><span data-stu-id="cb87b-103">Overview of synchronization primitives</span></span>

<span data-ttu-id="cb87b-104">Rozhraní .NET poskytuje řadu typů, které můžete použít k synchronizaci přístupu ke sdílenému prostředku nebo ke koordinaci interakce podprocesu.</span><span class="sxs-lookup"><span data-stu-id="cb87b-104">.NET provides a range of types that you can use to synchronize access to a shared resource or coordinate thread interaction.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="cb87b-105">Použijte stejnou instanci primitivní synchronizace k ochraně přístupu ke sdílenému prostředku.</span><span class="sxs-lookup"><span data-stu-id="cb87b-105">Use the same synchronization primitive instance to protect access of a shared resource.</span></span> <span data-ttu-id="cb87b-106">Pokud používáte různé synchronizace primitivní instance k ochraně stejného prostředku, budete obejít ochranu poskytovanou synchronizace primitivní.</span><span class="sxs-lookup"><span data-stu-id="cb87b-106">If you use different synchronization primitive instances to protect the same resource, you'll circumvent the protection provided by a synchronization primitive.</span></span>

## <a name="waithandle-class-and-lightweight-synchronization-types"></a><span data-ttu-id="cb87b-107">Třída WaitHandle a zjednodušené typy synchronizace</span><span class="sxs-lookup"><span data-stu-id="cb87b-107">WaitHandle class and lightweight synchronization types</span></span>

<span data-ttu-id="cb87b-108">Více .NET synchronizace primitiv odvozené z <xref:System.Threading.WaitHandle?displayProperty=nameWithType> třídy, která zapouzdřuje nativní operační systém synchronizační popisovač a používá mechanismus signalizace pro interakci podprocesu.</span><span class="sxs-lookup"><span data-stu-id="cb87b-108">Multiple .NET synchronization primitives derive from the <xref:System.Threading.WaitHandle?displayProperty=nameWithType> class, which encapsulates a native operating system synchronization handle and uses a signaling mechanism for thread interaction.</span></span> <span data-ttu-id="cb87b-109">Tyto třídy zahrnují:</span><span class="sxs-lookup"><span data-stu-id="cb87b-109">Those classes include:</span></span>

- <span data-ttu-id="cb87b-110"><xref:System.Threading.Mutex?displayProperty=nameWithType>, který uděluje výhradní přístup ke sdílenému prostředku.</span><span class="sxs-lookup"><span data-stu-id="cb87b-110"><xref:System.Threading.Mutex?displayProperty=nameWithType>, which grants exclusive access to a shared resource.</span></span> <span data-ttu-id="cb87b-111">Stav mutex je signalizován, pokud žádné vlákno vlastní.</span><span class="sxs-lookup"><span data-stu-id="cb87b-111">The state of a mutex is signaled if no thread owns it.</span></span>
- <span data-ttu-id="cb87b-112"><xref:System.Threading.Semaphore?displayProperty=nameWithType>, který omezuje počet podprocesů, které mají současně přístup ke sdílenému prostředku nebo fondu prostředků.</span><span class="sxs-lookup"><span data-stu-id="cb87b-112"><xref:System.Threading.Semaphore?displayProperty=nameWithType>, which limits the number of threads that can access a shared resource or a pool of resources concurrently.</span></span> <span data-ttu-id="cb87b-113">Stav semaforu je nastaven na signalizováno, když je jeho počet větší než nula a nesignalizován, když je jeho počet nulový.</span><span class="sxs-lookup"><span data-stu-id="cb87b-113">The state of a semaphore is set to signaled when its count is greater than zero, and nonsignaled when its count is zero.</span></span>
- <span data-ttu-id="cb87b-114"><xref:System.Threading.EventWaitHandle?displayProperty=nameWithType>, který představuje událost synchronizace vláken a může být v signalizovaném nebo nesignalizovaném stavu.</span><span class="sxs-lookup"><span data-stu-id="cb87b-114"><xref:System.Threading.EventWaitHandle?displayProperty=nameWithType>, which represents a thread synchronization event and can be either in a signaled or unsignaled state.</span></span>
- <span data-ttu-id="cb87b-115"><xref:System.Threading.AutoResetEvent?displayProperty=nameWithType>, který je <xref:System.Threading.EventWaitHandle> odvozen a při signalizaci automaticky resetuje do nesignalizovaného stavu po uvolnění jednoho čekajícího vlákna.</span><span class="sxs-lookup"><span data-stu-id="cb87b-115"><xref:System.Threading.AutoResetEvent?displayProperty=nameWithType>, which derives from <xref:System.Threading.EventWaitHandle> and, when signaled, resets automatically to an unsignaled state after releasing a single waiting thread.</span></span>
- <span data-ttu-id="cb87b-116"><xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>, který je <xref:System.Threading.EventWaitHandle> odvozen a při signalizaci zůstává v <xref:System.Threading.EventWaitHandle.Reset%2A> signalizovaném stavu, dokud není metoda volána.</span><span class="sxs-lookup"><span data-stu-id="cb87b-116"><xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>, which derives from <xref:System.Threading.EventWaitHandle> and, when signaled, stays in a signaled state until the <xref:System.Threading.EventWaitHandle.Reset%2A> method is called.</span></span>

<span data-ttu-id="cb87b-117">V rozhraní .NET <xref:System.Threading.WaitHandle> Framework, <xref:System.MarshalByRefObject?displayProperty=nameWithType>protože je odvozen od , tyto typy lze použít k synchronizaci aktivit podprocesů přes hranice domény aplikace.</span><span class="sxs-lookup"><span data-stu-id="cb87b-117">In the .NET Framework, because <xref:System.Threading.WaitHandle> derives from <xref:System.MarshalByRefObject?displayProperty=nameWithType>, these types can be used to synchronize the activities of threads across application domain boundaries.</span></span>

<span data-ttu-id="cb87b-118">V rozhraní .NET Framework a .NET Core mohou některé z těchto typů představovat popisovače synchronizace pojmenovaného systému, které jsou viditelné v celém operačním systému a lze je použít pro meziprocesovou synchronizaci:</span><span class="sxs-lookup"><span data-stu-id="cb87b-118">In the .NET Framework and .NET Core, some of these types can represent named system synchronization handles, which are visible throughout the operating system and can be used for the inter-process synchronization:</span></span>

- <span data-ttu-id="cb87b-119"><xref:System.Threading.Mutex>(.NET Framework a .NET Core),</span><span class="sxs-lookup"><span data-stu-id="cb87b-119"><xref:System.Threading.Mutex> (.NET Framework and .NET Core),</span></span>
- <span data-ttu-id="cb87b-120"><xref:System.Threading.Semaphore>(Rozhraní .NET Framework a .NET Core v systému Windows),</span><span class="sxs-lookup"><span data-stu-id="cb87b-120"><xref:System.Threading.Semaphore> (.NET Framework and .NET Core on Windows),</span></span>
- <span data-ttu-id="cb87b-121"><xref:System.Threading.EventWaitHandle>(.NET Framework a .NET Core v systému Windows).</span><span class="sxs-lookup"><span data-stu-id="cb87b-121"><xref:System.Threading.EventWaitHandle> (.NET Framework and .NET Core on Windows).</span></span>

<span data-ttu-id="cb87b-122">Další informace naleznete <xref:System.Threading.WaitHandle> v odkazu rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="cb87b-122">For more information, see the <xref:System.Threading.WaitHandle> API reference.</span></span>

<span data-ttu-id="cb87b-123">Zjednodušené typy synchronizace nespoléhají na základní popisovače operačního systému a obvykle poskytují lepší výkon.</span><span class="sxs-lookup"><span data-stu-id="cb87b-123">Lightweight synchronization types don't rely on underlying operating system handles and typically provide better performance.</span></span> <span data-ttu-id="cb87b-124">Nelze je však použít pro synchronizaci mezi procesy.</span><span class="sxs-lookup"><span data-stu-id="cb87b-124">However, they cannot be used for the inter-process synchronization.</span></span> <span data-ttu-id="cb87b-125">Tyto typy použijte pro synchronizaci vláken v rámci jedné aplikace.</span><span class="sxs-lookup"><span data-stu-id="cb87b-125">Use those types for thread synchronization within one application.</span></span>

<span data-ttu-id="cb87b-126">Některé z těchto typů jsou alternativy <xref:System.Threading.WaitHandle>k typům odvozeným od .</span><span class="sxs-lookup"><span data-stu-id="cb87b-126">Some of those types are alternatives to the types derived from <xref:System.Threading.WaitHandle>.</span></span> <span data-ttu-id="cb87b-127">Například <xref:System.Threading.SemaphoreSlim> je lehká <xref:System.Threading.Semaphore>alternativa k .</span><span class="sxs-lookup"><span data-stu-id="cb87b-127">For example, <xref:System.Threading.SemaphoreSlim> is a lightweight alternative to <xref:System.Threading.Semaphore>.</span></span>

## <a name="synchronization-of-access-to-a-shared-resource"></a><span data-ttu-id="cb87b-128">Synchronizace přístupu ke sdílenému prostředku</span><span class="sxs-lookup"><span data-stu-id="cb87b-128">Synchronization of access to a shared resource</span></span>

<span data-ttu-id="cb87b-129">Rozhraní .NET poskytuje řadu synchronizačních primitiv pro řízení přístupu ke sdílenému prostředku více vlákny.</span><span class="sxs-lookup"><span data-stu-id="cb87b-129">.NET provides a range of synchronization primitives to control access to a shared resource by multiple threads.</span></span>

### <a name="monitor-class"></a><span data-ttu-id="cb87b-130">Monitor – třída</span><span class="sxs-lookup"><span data-stu-id="cb87b-130">Monitor class</span></span>

<span data-ttu-id="cb87b-131">Třída <xref:System.Threading.Monitor?displayProperty=nameWithType> uděluje vzájemně vylučující přístup ke sdílenému prostředku získáním nebo uvolněním zámku na objekt, který identifikuje prostředek.</span><span class="sxs-lookup"><span data-stu-id="cb87b-131">The <xref:System.Threading.Monitor?displayProperty=nameWithType> class grants mutually exclusive access to a shared resource by acquiring or releasing a lock on the object that identifies the resource.</span></span> <span data-ttu-id="cb87b-132">Zatímco zámek je držen, podproces, který drží zámek můžete znovu získat a uvolnit zámek.</span><span class="sxs-lookup"><span data-stu-id="cb87b-132">While a lock is held, the thread that holds the lock can again acquire and release the lock.</span></span> <span data-ttu-id="cb87b-133">Jakékoli jiné vlákno je blokován o <xref:System.Threading.Monitor.Enter%2A?displayProperty=nameWithType> získání zámku a metoda čeká, dokud zámek je uvolněna.</span><span class="sxs-lookup"><span data-stu-id="cb87b-133">Any other thread is blocked from acquiring the lock and the <xref:System.Threading.Monitor.Enter%2A?displayProperty=nameWithType> method waits until the lock is released.</span></span> <span data-ttu-id="cb87b-134">Metoda <xref:System.Threading.Monitor.Enter%2A> získá uvolněný zámek.</span><span class="sxs-lookup"><span data-stu-id="cb87b-134">The <xref:System.Threading.Monitor.Enter%2A> method acquires a released lock.</span></span> <span data-ttu-id="cb87b-135">Metodu <xref:System.Threading.Monitor.TryEnter%2A?displayProperty=nameWithType> můžete také použít k určení doby, po kterou se vlákno pokusí získat zámek.</span><span class="sxs-lookup"><span data-stu-id="cb87b-135">You can also use the <xref:System.Threading.Monitor.TryEnter%2A?displayProperty=nameWithType> method to specify the amount of time during which a thread attempts to acquire a lock.</span></span> <span data-ttu-id="cb87b-136">Vzhledem <xref:System.Threading.Monitor> k tomu, že třída má spřažení podprocesů, <xref:System.Threading.Monitor.Exit%2A?displayProperty=nameWithType> podproces, který získal zámek musí uvolnit zámek voláním metody.</span><span class="sxs-lookup"><span data-stu-id="cb87b-136">Because the <xref:System.Threading.Monitor> class has thread affinity, the thread that acquired a lock must release the lock by calling the <xref:System.Threading.Monitor.Exit%2A?displayProperty=nameWithType> method.</span></span>

<span data-ttu-id="cb87b-137">Můžete koordinovat interakci podprocesů, které získávají zámek na <xref:System.Threading.Monitor.Wait%2A?displayProperty=nameWithType>stejný <xref:System.Threading.Monitor.Pulse%2A?displayProperty=nameWithType>objekt <xref:System.Threading.Monitor.PulseAll%2A?displayProperty=nameWithType> pomocí , a metody.</span><span class="sxs-lookup"><span data-stu-id="cb87b-137">You can coordinate the interaction of threads that acquire a lock on the same object by using the <xref:System.Threading.Monitor.Wait%2A?displayProperty=nameWithType>, <xref:System.Threading.Monitor.Pulse%2A?displayProperty=nameWithType>, and <xref:System.Threading.Monitor.PulseAll%2A?displayProperty=nameWithType> methods.</span></span>

<span data-ttu-id="cb87b-138">Další informace naleznete <xref:System.Threading.Monitor> v odkazu rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="cb87b-138">For more information, see the <xref:System.Threading.Monitor> API reference.</span></span>

> [!NOTE]
> <span data-ttu-id="cb87b-139">Použijte příkaz [lock](../../csharp/language-reference/keywords/lock-statement.md) v jazyce C# a příkaz [SyncLock](../../visual-basic/language-reference/statements/synclock-statement.md) v jazyce <xref:System.Threading.Monitor> Visual Basic k synchronizaci přístupu ke sdílenému prostředku namísto přímého použití třídy.</span><span class="sxs-lookup"><span data-stu-id="cb87b-139">Use the [lock](../../csharp/language-reference/keywords/lock-statement.md) statement in C# and the [SyncLock](../../visual-basic/language-reference/statements/synclock-statement.md) statement in Visual Basic to synchronize access to a shared resource instead of using the <xref:System.Threading.Monitor> class directly.</span></span> <span data-ttu-id="cb87b-140">Tyto příkazy jsou <xref:System.Threading.Monitor.Enter%2A> implementovány pomocí metody a <xref:System.Threading.Monitor.Exit%2A> `try…finally` blok, aby bylo zajištěno, že získané zámek je vždy uvolněna.</span><span class="sxs-lookup"><span data-stu-id="cb87b-140">Those statements are implemented by using the <xref:System.Threading.Monitor.Enter%2A> and <xref:System.Threading.Monitor.Exit%2A> methods and a `try…finally` block to ensure that the acquired lock is always released.</span></span>

### <a name="mutex-class"></a><span data-ttu-id="cb87b-141">Mutex – třída</span><span class="sxs-lookup"><span data-stu-id="cb87b-141">Mutex class</span></span>

<span data-ttu-id="cb87b-142">Třída, <xref:System.Threading.Mutex?displayProperty=nameWithType> jako <xref:System.Threading.Monitor>je , uděluje výhradní přístup ke sdílenému prostředku.</span><span class="sxs-lookup"><span data-stu-id="cb87b-142">The <xref:System.Threading.Mutex?displayProperty=nameWithType> class, like <xref:System.Threading.Monitor>, grants exclusive access to a shared resource.</span></span> <span data-ttu-id="cb87b-143">Použijte jeden z přetížení metody [Mutex.WaitOne](<xref:System.Threading.WaitHandle.WaitOne%2A?displayProperty=nameWithType>) požádat o vlastnictví mutex.</span><span class="sxs-lookup"><span data-stu-id="cb87b-143">Use one of the [Mutex.WaitOne](<xref:System.Threading.WaitHandle.WaitOne%2A?displayProperty=nameWithType>) method overloads to request the ownership of a mutex.</span></span> <span data-ttu-id="cb87b-144">Stejně jako <xref:System.Threading.Monitor>, <xref:System.Threading.Mutex> má spřažení podprocesů a vlákno, <xref:System.Threading.Mutex.ReleaseMutex%2A?displayProperty=nameWithType> které získalo mutex musí uvolnit voláním metody.</span><span class="sxs-lookup"><span data-stu-id="cb87b-144">Like <xref:System.Threading.Monitor>, <xref:System.Threading.Mutex> has thread affinity and the thread that acquired a mutex must release it by calling the <xref:System.Threading.Mutex.ReleaseMutex%2A?displayProperty=nameWithType> method.</span></span>

<span data-ttu-id="cb87b-145">Na <xref:System.Threading.Monitor>rozdíl <xref:System.Threading.Mutex> od , třídy lze použít pro synchronizaci mezi procesy.</span><span class="sxs-lookup"><span data-stu-id="cb87b-145">Unlike <xref:System.Threading.Monitor>, the <xref:System.Threading.Mutex> class can be used for inter-process synchronization.</span></span> <span data-ttu-id="cb87b-146">Chcete-li to provést, použijte pojmenovaný objekt mutex, který je viditelný v celém operačním systému.</span><span class="sxs-lookup"><span data-stu-id="cb87b-146">To do that, use a named mutex, which is visible throughout the operating system.</span></span> <span data-ttu-id="cb87b-147">Chcete-li vytvořit pojmenovanou instanci mutex, použijte [konstruktor Mutex,](<xref:System.Threading.Mutex.%23ctor%2A>) který určuje název.</span><span class="sxs-lookup"><span data-stu-id="cb87b-147">To create a named mutex instance, use a [Mutex constructor](<xref:System.Threading.Mutex.%23ctor%2A>) that specifies a name.</span></span> <span data-ttu-id="cb87b-148">Můžete také volat <xref:System.Threading.Mutex.OpenExisting%2A?displayProperty=nameWithType> metodu otevřít existující pojmenovaný systém mutex.</span><span class="sxs-lookup"><span data-stu-id="cb87b-148">You can also call the <xref:System.Threading.Mutex.OpenExisting%2A?displayProperty=nameWithType> method to open an existing named system mutex.</span></span>
  
<span data-ttu-id="cb87b-149">Další informace naleznete v článku [Mutexes](mutexes.md) a odkaz na <xref:System.Threading.Mutex> rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="cb87b-149">For more information, see the [Mutexes](mutexes.md) article and the <xref:System.Threading.Mutex> API reference.</span></span>

### <a name="spinlock-structure"></a><span data-ttu-id="cb87b-150">Struktura SpinLock</span><span class="sxs-lookup"><span data-stu-id="cb87b-150">SpinLock structure</span></span>

<span data-ttu-id="cb87b-151">Struktura, <xref:System.Threading.SpinLock?displayProperty=nameWithType> jako <xref:System.Threading.Monitor>je , uděluje výhradní přístup ke sdílenému prostředku na základě dostupnosti zámku.</span><span class="sxs-lookup"><span data-stu-id="cb87b-151">The <xref:System.Threading.SpinLock?displayProperty=nameWithType> structure, like <xref:System.Threading.Monitor>, grants exclusive access to a shared resource based on the availability of a lock.</span></span> <span data-ttu-id="cb87b-152">Při <xref:System.Threading.SpinLock> pokusech o získání zámku, který není k dispozici, čeká ve smyčce, opakovaně kontroluje, dokud zámek k dispozici.</span><span class="sxs-lookup"><span data-stu-id="cb87b-152">When <xref:System.Threading.SpinLock> attempts to acquire a lock that is unavailable, it waits in a loop, repeatedly checking until the lock becomes available.</span></span>

<span data-ttu-id="cb87b-153">Další informace o výhodách a nevýhodách použití spin lock, naleznete <xref:System.Threading.SpinLock> v článku [SpinLock](spinlock.md) a odkaz na rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="cb87b-153">For more information about the benefits and drawbacks of using spin lock, see the [SpinLock](spinlock.md) article and the <xref:System.Threading.SpinLock> API reference.</span></span>

### <a name="readerwriterlockslim-class"></a><span data-ttu-id="cb87b-154">Třída ReaderWriterLockSlim</span><span class="sxs-lookup"><span data-stu-id="cb87b-154">ReaderWriterLockSlim class</span></span>

<span data-ttu-id="cb87b-155">Třída <xref:System.Threading.ReaderWriterLockSlim?displayProperty=nameWithType> uděluje výhradní přístup ke sdílenému prostředku pro zápis a umožňuje více vláken pro přístup k prostředku současně pro čtení.</span><span class="sxs-lookup"><span data-stu-id="cb87b-155">The <xref:System.Threading.ReaderWriterLockSlim?displayProperty=nameWithType> class grants exclusive access to a shared resource for writing and allows multiple threads to access the resource simultaneously for reading.</span></span> <span data-ttu-id="cb87b-156">Můžete chtít použít <xref:System.Threading.ReaderWriterLockSlim> k synchronizaci přístupu ke sdílené datové struktuře, která podporuje operace čtení bezpečné pro přístup z více vláken, ale vyžaduje výhradní přístup k provedení operace zápisu.</span><span class="sxs-lookup"><span data-stu-id="cb87b-156">You might want to use <xref:System.Threading.ReaderWriterLockSlim> to synchronize access to a shared data structure that supports thread-safe read operations, but requires exclusive access to perform write operation.</span></span> <span data-ttu-id="cb87b-157">Když vlákno požaduje výhradní přístup (například <xref:System.Threading.ReaderWriterLockSlim.EnterWriteLock%2A?displayProperty=nameWithType> voláním metody), následné požadavky pro čtenáře a zapisovatele blokují, dokud všechny existující čtenáři neukončí zámek a zapisovatel nezadal a neukončil zámek.</span><span class="sxs-lookup"><span data-stu-id="cb87b-157">When a thread requests exclusive access (for example, by calling the <xref:System.Threading.ReaderWriterLockSlim.EnterWriteLock%2A?displayProperty=nameWithType> method), subsequent reader and writer requests block until all existing readers have exited the lock, and the writer has entered and exited the lock.</span></span>
  
<span data-ttu-id="cb87b-158">Další informace naleznete <xref:System.Threading.ReaderWriterLockSlim> v odkazu rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="cb87b-158">For more information, see the <xref:System.Threading.ReaderWriterLockSlim> API reference.</span></span>

### <a name="semaphore-and-semaphoreslim-classes"></a><span data-ttu-id="cb87b-159">Třídy Semafor a SemaforSlim</span><span class="sxs-lookup"><span data-stu-id="cb87b-159">Semaphore and SemaphoreSlim classes</span></span>

<span data-ttu-id="cb87b-160"><xref:System.Threading.Semaphore?displayProperty=nameWithType> Třídy <xref:System.Threading.SemaphoreSlim?displayProperty=nameWithType> a omezit počet podprocesů, které mohou přistupovat ke sdílenému prostředku nebo fondu prostředků současně.</span><span class="sxs-lookup"><span data-stu-id="cb87b-160">The <xref:System.Threading.Semaphore?displayProperty=nameWithType> and <xref:System.Threading.SemaphoreSlim?displayProperty=nameWithType> classes limit the number of threads that can access a shared resource or a pool of resources concurrently.</span></span> <span data-ttu-id="cb87b-161">Další vlákna, která požadují prostředek, počkejte, dokud žádné vlákno neuvolní semafor.</span><span class="sxs-lookup"><span data-stu-id="cb87b-161">Additional threads that request the resource wait until any thread releases the semaphore.</span></span> <span data-ttu-id="cb87b-162">Vzhledem k tomu, že semafor nemá spřažení vláken, vlákno může získat semafor a jiný ho může uvolnit.</span><span class="sxs-lookup"><span data-stu-id="cb87b-162">Because the semaphore doesn't have thread affinity, a thread can acquire the semaphore and another one can release it.</span></span>

<span data-ttu-id="cb87b-163"><xref:System.Threading.SemaphoreSlim>je zjednodušenou <xref:System.Threading.Semaphore> alternativou k a lze ji použít pouze pro synchronizaci v rámci jedné hranice procesu.</span><span class="sxs-lookup"><span data-stu-id="cb87b-163"><xref:System.Threading.SemaphoreSlim> is a lightweight alternative to <xref:System.Threading.Semaphore> and can be used only for synchronization within a single process boundary.</span></span>

<span data-ttu-id="cb87b-164">V systému Windows <xref:System.Threading.Semaphore> můžete použít pro synchronizaci mezi procesy.</span><span class="sxs-lookup"><span data-stu-id="cb87b-164">On Windows, you can use <xref:System.Threading.Semaphore> for the inter-process synchronization.</span></span> <span data-ttu-id="cb87b-165">Chcete-li to <xref:System.Threading.Semaphore> provést, vytvořte instanci, která představuje pojmenovaný systémový semafor pomocí jednoho <xref:System.Threading.Semaphore.OpenExisting%2A?displayProperty=nameWithType> z [konstruktorů Semafor,](<xref:System.Threading.Semaphore.%23ctor%2A>) který určuje název nebo metodu.</span><span class="sxs-lookup"><span data-stu-id="cb87b-165">To do that, create a <xref:System.Threading.Semaphore> instance that represents a named system semaphore by using one of the [Semaphore constructors](<xref:System.Threading.Semaphore.%23ctor%2A>) that specifies a name or the <xref:System.Threading.Semaphore.OpenExisting%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="cb87b-166"><xref:System.Threading.SemaphoreSlim>nepodporuje pojmenované systémové semafory.</span><span class="sxs-lookup"><span data-stu-id="cb87b-166"><xref:System.Threading.SemaphoreSlim> doesn't support named system semaphores.</span></span>

<span data-ttu-id="cb87b-167">Další informace naleznete v článku [Semafor a SemaphoreSlim](semaphore-and-semaphoreslim.md) a <xref:System.Threading.Semaphore> odkaz na rozhraní API nebo. <xref:System.Threading.SemaphoreSlim></span><span class="sxs-lookup"><span data-stu-id="cb87b-167">For more information, see the [Semaphore and SemaphoreSlim](semaphore-and-semaphoreslim.md) article and the <xref:System.Threading.Semaphore> or <xref:System.Threading.SemaphoreSlim> API reference.</span></span>

## <a name="thread-interaction-or-signaling"></a><span data-ttu-id="cb87b-168">Interakce závitu nebo signalizace</span><span class="sxs-lookup"><span data-stu-id="cb87b-168">Thread interaction, or signaling</span></span>

<span data-ttu-id="cb87b-169">Interakce vlákna (nebo signalizace vlákna) znamená, že vlákno musí čekat na oznámení nebo signál z jednoho nebo více vláken, aby bylo možné pokračovat.</span><span class="sxs-lookup"><span data-stu-id="cb87b-169">Thread interaction (or thread signaling) means that a thread must wait for notification, or a signal, from one or more threads in order to proceed.</span></span> <span data-ttu-id="cb87b-170">Například pokud vlákno A <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> volá metodu vlákna B, vlákno A je blokován, dokud vlákno B nedokončí.</span><span class="sxs-lookup"><span data-stu-id="cb87b-170">For example, if thread A calls the <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> method of thread B, thread A is blocked until thread B completes.</span></span> <span data-ttu-id="cb87b-171">Synchronizační primitiva popsaná v předchozí části poskytují jiný mechanismus pro signalizaci: uvolněním zámku vlákno upozorní jiné vlákno, které může pokračovat získáním zámku.</span><span class="sxs-lookup"><span data-stu-id="cb87b-171">The synchronization primitives described in the preceding section provide a different mechanism for signaling: by releasing a lock, a thread notifies another thread that it can proceed by acquiring the lock.</span></span>

<span data-ttu-id="cb87b-172">Tato část popisuje další signalizační konstrukce poskytované rozhraním .NET.</span><span class="sxs-lookup"><span data-stu-id="cb87b-172">This section describes additional signaling constructs provided by .NET.</span></span>

### <a name="eventwaithandle-autoresetevent-manualresetevent-and-manualreseteventslim-classes"></a><span data-ttu-id="cb87b-173">Třída EventWaitHandle, AutoResetEvent, ManualResetEvent a ManualResetEventSlim</span><span class="sxs-lookup"><span data-stu-id="cb87b-173">EventWaitHandle, AutoResetEvent, ManualResetEvent, and ManualResetEventSlim classes</span></span>

<span data-ttu-id="cb87b-174">Třída <xref:System.Threading.EventWaitHandle?displayProperty=nameWithType> představuje událost synchronizace vláken.</span><span class="sxs-lookup"><span data-stu-id="cb87b-174">The <xref:System.Threading.EventWaitHandle?displayProperty=nameWithType> class represents a thread synchronization event.</span></span>

<span data-ttu-id="cb87b-175">Událost synchronizace může být v nesignalizovaném nebo signalizovaném stavu.</span><span class="sxs-lookup"><span data-stu-id="cb87b-175">A synchronization event can be either in an unsignaled or signaled state.</span></span> <span data-ttu-id="cb87b-176">Pokud je stav události nesignalizován, vlákno, které volá <xref:System.Threading.WaitHandle.WaitOne%2A?> přetížení události, je blokováno, dokud není signalizována událost.</span><span class="sxs-lookup"><span data-stu-id="cb87b-176">When the state of an event is unsignaled, a thread that calls the event's <xref:System.Threading.WaitHandle.WaitOne%2A?> overload is blocked until an event is signaled.</span></span> <span data-ttu-id="cb87b-177">Metoda <xref:System.Threading.EventWaitHandle.Set%2A?displayProperty=nameWithType> nastaví stav události signalizované.</span><span class="sxs-lookup"><span data-stu-id="cb87b-177">The <xref:System.Threading.EventWaitHandle.Set%2A?displayProperty=nameWithType> method sets the state of an event to signaled.</span></span>

<span data-ttu-id="cb87b-178">Chování signalizovaného objektu <xref:System.Threading.EventWaitHandle> závisí na jeho režimu resetování:</span><span class="sxs-lookup"><span data-stu-id="cb87b-178">The behavior of an <xref:System.Threading.EventWaitHandle> that has been signaled depends on its reset mode:</span></span>

- <span data-ttu-id="cb87b-179">Vytvořené <xref:System.Threading.EventWaitHandle> s <xref:System.Threading.EventResetMode.AutoReset?displayProperty=nameWithType> příznakem resetuje automaticky po uvolnění jednoho čekajícího vlákna.</span><span class="sxs-lookup"><span data-stu-id="cb87b-179">An <xref:System.Threading.EventWaitHandle> created with the <xref:System.Threading.EventResetMode.AutoReset?displayProperty=nameWithType> flag resets automatically after releasing a single waiting thread.</span></span> <span data-ttu-id="cb87b-180">Je to jako turniket, který umožňuje pouze jedno vlákno, když je signalizováno.</span><span class="sxs-lookup"><span data-stu-id="cb87b-180">It's like a turnstile that allows only one thread through each time it's signaled.</span></span> <span data-ttu-id="cb87b-181">Třída, <xref:System.Threading.AutoResetEvent?displayProperty=nameWithType> která je <xref:System.Threading.EventWaitHandle>odvozena od , představuje toto chování.</span><span class="sxs-lookup"><span data-stu-id="cb87b-181">The <xref:System.Threading.AutoResetEvent?displayProperty=nameWithType> class, which derives from <xref:System.Threading.EventWaitHandle>, represents that behavior.</span></span>
- <span data-ttu-id="cb87b-182">Vytvořené <xref:System.Threading.EventWaitHandle> s <xref:System.Threading.EventResetMode.ManualReset?displayProperty=nameWithType> příznakem zůstane signalizováno, dokud není volána jeho <xref:System.Threading.EventWaitHandle.Reset%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="cb87b-182">An <xref:System.Threading.EventWaitHandle> created with the <xref:System.Threading.EventResetMode.ManualReset?displayProperty=nameWithType> flag remains signaled until its <xref:System.Threading.EventWaitHandle.Reset%2A> method is called.</span></span> <span data-ttu-id="cb87b-183">Je to jako brána, která je zavřená, dokud není signalizována, a pak zůstane otevřená, dokud ji někdo nezavře.</span><span class="sxs-lookup"><span data-stu-id="cb87b-183">It's like a gate that is closed until signaled and then stays open until someone closes it.</span></span> <span data-ttu-id="cb87b-184">Třída, <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType> která je <xref:System.Threading.EventWaitHandle>odvozena od , představuje toto chování.</span><span class="sxs-lookup"><span data-stu-id="cb87b-184">The <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType> class, which derives from <xref:System.Threading.EventWaitHandle>, represents that behavior.</span></span> <span data-ttu-id="cb87b-185">Třída <xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType> je lehká <xref:System.Threading.ManualResetEvent>alternativa k .</span><span class="sxs-lookup"><span data-stu-id="cb87b-185">The <xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType> class is a lightweight alternative to <xref:System.Threading.ManualResetEvent>.</span></span>

<span data-ttu-id="cb87b-186">V systému Windows <xref:System.Threading.EventWaitHandle> můžete použít pro synchronizaci mezi procesy.</span><span class="sxs-lookup"><span data-stu-id="cb87b-186">On Windows, you can use <xref:System.Threading.EventWaitHandle> for the inter-process synchronization.</span></span> <span data-ttu-id="cb87b-187">Chcete-li to <xref:System.Threading.EventWaitHandle> provést, vytvořte instanci, která představuje událost synchronizace pojmenovaného systému pomocí <xref:System.Threading.EventWaitHandle.OpenExisting%2A?displayProperty=nameWithType> jednoho z [konstruktorů EventWaitHandle,](<xref:System.Threading.EventWaitHandle.%23ctor%2A>) který určuje název nebo metodu.</span><span class="sxs-lookup"><span data-stu-id="cb87b-187">To do that, create a <xref:System.Threading.EventWaitHandle> instance that represents a named system synchronization event by using one of the [EventWaitHandle constructors](<xref:System.Threading.EventWaitHandle.%23ctor%2A>) that specifies a name or the <xref:System.Threading.EventWaitHandle.OpenExisting%2A?displayProperty=nameWithType> method.</span></span>

<span data-ttu-id="cb87b-188">Další informace naleznete v článku [EventWaitHandle.](eventwaithandle.md)</span><span class="sxs-lookup"><span data-stu-id="cb87b-188">For more information, see the [EventWaitHandle](eventwaithandle.md) article.</span></span> <span data-ttu-id="cb87b-189">Odkaz na rozhraní <xref:System.Threading.EventWaitHandle>API <xref:System.Threading.AutoResetEvent> <xref:System.Threading.ManualResetEvent>naleznete <xref:System.Threading.ManualResetEventSlim>v tématu , , a .</span><span class="sxs-lookup"><span data-stu-id="cb87b-189">For the API reference, see <xref:System.Threading.EventWaitHandle>, <xref:System.Threading.AutoResetEvent>, <xref:System.Threading.ManualResetEvent>, and <xref:System.Threading.ManualResetEventSlim>.</span></span>

### <a name="countdownevent-class"></a><span data-ttu-id="cb87b-190">Třída CountdownEvent</span><span class="sxs-lookup"><span data-stu-id="cb87b-190">CountdownEvent class</span></span>

<span data-ttu-id="cb87b-191">Třída <xref:System.Threading.CountdownEvent?displayProperty=nameWithType> představuje událost, která se stane nastavena, když je její počet nula.</span><span class="sxs-lookup"><span data-stu-id="cb87b-191">The <xref:System.Threading.CountdownEvent?displayProperty=nameWithType> class represents an event that becomes set when its count is zero.</span></span> <span data-ttu-id="cb87b-192">Zatímco <xref:System.Threading.CountdownEvent.CurrentCount?displayProperty=nameWithType> je větší než nula, vlákno, které volá <xref:System.Threading.CountdownEvent.Wait%2A?displayProperty=nameWithType> je blokován.</span><span class="sxs-lookup"><span data-stu-id="cb87b-192">While <xref:System.Threading.CountdownEvent.CurrentCount?displayProperty=nameWithType> is greater than zero, a thread that calls <xref:System.Threading.CountdownEvent.Wait%2A?displayProperty=nameWithType> is blocked.</span></span> <span data-ttu-id="cb87b-193">Volání <xref:System.Threading.CountdownEvent.Signal%2A?displayProperty=nameWithType> snížení počtu událostí.</span><span class="sxs-lookup"><span data-stu-id="cb87b-193">Call <xref:System.Threading.CountdownEvent.Signal%2A?displayProperty=nameWithType> to decrement an event's count.</span></span>

<span data-ttu-id="cb87b-194">Na rozdíl <xref:System.Threading.ManualResetEvent> <xref:System.Threading.ManualResetEventSlim>od nebo , které můžete použít k odblokování více vláken <xref:System.Threading.CountdownEvent> se signálem z jednoho vlákna, můžete použít k odblokování jednoho nebo více vláken se signály z více vláken.</span><span class="sxs-lookup"><span data-stu-id="cb87b-194">In contrast to <xref:System.Threading.ManualResetEvent> or <xref:System.Threading.ManualResetEventSlim>, which you can use to unblock multiple threads with a signal from one thread, you can use <xref:System.Threading.CountdownEvent> to unblock one or more threads with signals from multiple threads.</span></span>

<span data-ttu-id="cb87b-195">Další informace naleznete v článku [CountdownEvent](countdownevent.md) a odkaz na <xref:System.Threading.CountdownEvent> rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="cb87b-195">For more information, see the [CountdownEvent](countdownevent.md) article and the <xref:System.Threading.CountdownEvent> API reference.</span></span>

### <a name="barrier-class"></a><span data-ttu-id="cb87b-196">Bariérová třída</span><span class="sxs-lookup"><span data-stu-id="cb87b-196">Barrier class</span></span>

<span data-ttu-id="cb87b-197">Třída <xref:System.Threading.Barrier?displayProperty=nameWithType> představuje bariéru spuštění podprocesu.</span><span class="sxs-lookup"><span data-stu-id="cb87b-197">The <xref:System.Threading.Barrier?displayProperty=nameWithType> class represents a thread execution barrier.</span></span> <span data-ttu-id="cb87b-198">Podproces, který <xref:System.Threading.Barrier.SignalAndWait%2A?displayProperty=nameWithType> volá volání metody signály, že dosáhl bariéry a čeká, dokud ostatní účastník podprocesy dosáhnout bariéry.</span><span class="sxs-lookup"><span data-stu-id="cb87b-198">A thread that calls the <xref:System.Threading.Barrier.SignalAndWait%2A?displayProperty=nameWithType> method signals that it reached the barrier and waits until other participant threads reach the barrier.</span></span> <span data-ttu-id="cb87b-199">Když všechny účastníky závity dosáhnou bariéry, pokračují a bariéra se resetuje a může být znovu použita.</span><span class="sxs-lookup"><span data-stu-id="cb87b-199">When all participant threads reach the barrier, they proceed and the barrier is reset and can be used again.</span></span>

<span data-ttu-id="cb87b-200">Můžete použít, <xref:System.Threading.Barrier> když jeden nebo více vláken vyžadují výsledky jiných vláken před pokračováním do další fáze výpočtu.</span><span class="sxs-lookup"><span data-stu-id="cb87b-200">You might use <xref:System.Threading.Barrier> when one or more threads require the results of other threads before proceeding to the next computation phase.</span></span>

<span data-ttu-id="cb87b-201">Další informace naleznete v článku <xref:System.Threading.Barrier> [bariéra](barrier.md) a odkaz na rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="cb87b-201">For more information, see the [Barrier](barrier.md) article and the <xref:System.Threading.Barrier> API reference.</span></span>

## <a name="interlocked-class"></a><span data-ttu-id="cb87b-202">Interlocked – třída</span><span class="sxs-lookup"><span data-stu-id="cb87b-202">Interlocked class</span></span>

<span data-ttu-id="cb87b-203">Třída <xref:System.Threading.Interlocked?displayProperty=nameWithType> poskytuje statické metody, které provádějí jednoduché atomické operace s proměnnou.</span><span class="sxs-lookup"><span data-stu-id="cb87b-203">The <xref:System.Threading.Interlocked?displayProperty=nameWithType> class provides static methods that perform simple atomic operations on a variable.</span></span> <span data-ttu-id="cb87b-204">Tyto atomické operace zahrnují sčítání, přírůstek a snížení, výměnu a podmíněnou výměnu, která závisí na porovnání, a operace čtení 64bitové celočíselné hodnoty.</span><span class="sxs-lookup"><span data-stu-id="cb87b-204">Those atomic operations include addition, increment and decrement, exchange and conditional exchange that depends on a comparison, and read operation of a 64-bit integer value.</span></span>

<span data-ttu-id="cb87b-205">Další informace naleznete <xref:System.Threading.Interlocked> v odkazu rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="cb87b-205">For more information, see the <xref:System.Threading.Interlocked> API reference.</span></span>

## <a name="spinwait-structure"></a><span data-ttu-id="cb87b-206">Struktura SpinWait</span><span class="sxs-lookup"><span data-stu-id="cb87b-206">SpinWait structure</span></span>

<span data-ttu-id="cb87b-207"><xref:System.Threading.SpinWait?displayProperty=nameWithType> Struktura poskytuje podporu pro spin-based čekání.</span><span class="sxs-lookup"><span data-stu-id="cb87b-207">The <xref:System.Threading.SpinWait?displayProperty=nameWithType> structure provides support for spin-based waiting.</span></span> <span data-ttu-id="cb87b-208">Můžete chtít použít, když podproces musí čekat na událost, která má být signalizována nebo podmínka, která má být splněna, ale při skutečné čekací doby se očekává, že bude menší než čekací doba požadovaná pomocí popisovač čekání nebo jinak blokování podprocesu.</span><span class="sxs-lookup"><span data-stu-id="cb87b-208">You might want to use it when a thread has to wait for an event to be signaled or a condition to be met, but when the actual wait time is expected to be less than the waiting time required by using a wait handle or by otherwise blocking the thread.</span></span> <span data-ttu-id="cb87b-209">Pomocí <xref:System.Threading.SpinWait>aplikace můžete zadat krátkou dobu, po kterou se má během čekání otáčet, a potom výtěžnost (například čekáním nebo spánkem) pouze v případě, že podmínka nebyla splněna v zadaném čase.</span><span class="sxs-lookup"><span data-stu-id="cb87b-209">By using <xref:System.Threading.SpinWait>, you can specify a short period of time to spin while waiting, and then yield (for example, by waiting or sleeping) only if the condition was not met in the specified time.</span></span>

<span data-ttu-id="cb87b-210">Další informace naleznete v článku [SpinWait](spinwait.md) a odkaz na <xref:System.Threading.SpinWait> rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="cb87b-210">For more information, see the [SpinWait](spinwait.md) article and the <xref:System.Threading.SpinWait> API reference.</span></span>

## <a name="see-also"></a><span data-ttu-id="cb87b-211">Viz také</span><span class="sxs-lookup"><span data-stu-id="cb87b-211">See also</span></span>

- <xref:System.Collections.Concurrent?displayProperty=nameWithType>
- [<span data-ttu-id="cb87b-212">Kolekce bezpečné pro přístup z více vláken</span><span class="sxs-lookup"><span data-stu-id="cb87b-212">Thread-safe collections</span></span>](../collections/thread-safe/index.md)
- [<span data-ttu-id="cb87b-213">Dělení objektů a funkcí na vlákna</span><span class="sxs-lookup"><span data-stu-id="cb87b-213">Threading objects and features</span></span>](threading-objects-and-features.md)
