---
title: Použití vláken a dělení na vlákna
description: Seznamte se s používáním vláken a vláken v .NET, abyste mohli psát aplikace pro provádění mnoha operací ve stejnou dobu (multithreading).
ms.date: 08/08/2018
ms.technology: dotnet-standard
helpviewer_keywords:
- threading [.NET Framework], about threading
- managed threading
ms.assetid: 9b5ec2cd-121b-4d49-b075-222cf26f2344
ms.openlocfilehash: c092994818c9105a555acaf63ceba4b8e99bcada
ms.sourcegitcommit: 7137e12f54c4e83a94ae43ec320f8cf59c1772ea
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/10/2020
ms.locfileid: "84663028"
---
# <a name="using-threads-and-threading"></a><span data-ttu-id="2d6d6-103">Použití vláken a dělení na vlákna</span><span class="sxs-lookup"><span data-stu-id="2d6d6-103">Using threads and threading</span></span>

<span data-ttu-id="2d6d6-104">Pomocí technologie .NET můžete psát aplikace, které provádějí více operací současně.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-104">With .NET, you can write applications that perform multiple operations at the same time.</span></span> <span data-ttu-id="2d6d6-105">Operace s potenciálním provozem jiných operací se můžou spouštět v samostatných vláknech, *což je proces* , který se označuje jako *vícevláknové nebo volné podprocesy*.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-105">Operations with the potential of holding up other operations can execute on separate threads, a process known as *multithreading* or *free threading*.</span></span>  
  
<span data-ttu-id="2d6d6-106">Aplikace, které používají multithreading, mají větší reakci na uživatelský vstup, protože uživatelské rozhraní zůstává aktivní jako úlohy náročné na procesory spouštěné v samostatných vláknech.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-106">Applications that use multithreading are more responsive to user input because the user interface stays active as processor-intensive tasks execute on separate threads.</span></span> <span data-ttu-id="2d6d6-107">Multithreading je také užitečné při vytváření škálovatelných aplikací, protože je možné přidat vlákna při zvýšení zatížení.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-107">Multithreading is also useful when you create scalable applications, because you can add threads as the workload increases.</span></span>

> [!NOTE]
> <span data-ttu-id="2d6d6-108">Pokud potřebujete větší kontrolu nad chováním vláken aplikace, můžete spravovat vlákna sami.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-108">If you need more control over the behavior of the application's threads, you can manage the threads yourself.</span></span> <span data-ttu-id="2d6d6-109">Počínaje .NET Framework 4 ale vícevláknové programování je výrazně zjednodušeno pomocí <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> tříd a, [Paralelní LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md), nové souběžné třídy kolekce v <xref:System.Collections.Concurrent?displayProperty=nameWithType> oboru názvů a nového programovacího modelu, který je založen na konceptu úkolů, nikoli na vláknech.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-109">However, starting with the .NET Framework 4, multithreaded programming is greatly simplified with the <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> classes, [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md), new concurrent collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace, and a new programming model that is based on the concept of tasks rather than threads.</span></span> <span data-ttu-id="2d6d6-110">Další informace naleznete v tématu [paralelní programování](../parallel-programming/index.md) a [Task PARALLEL Library (TPL)](../parallel-programming/task-parallel-library-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="2d6d6-110">For more information, see [Parallel Programming](../parallel-programming/index.md) and [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md).</span></span>

## <a name="how-to-create-and-start-a-new-thread"></a><span data-ttu-id="2d6d6-111">Postupy: vytvoření a spuštění nového vlákna</span><span class="sxs-lookup"><span data-stu-id="2d6d6-111">How to: Create and start a new thread</span></span>

<span data-ttu-id="2d6d6-112">Vytvoříte nové vlákno vytvořením nové instance <xref:System.Threading.Thread?displayProperty=nameWithType> třídy a zadáním názvu metody, kterou chcete spustit v novém vlákně konstruktoru.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-112">You create a new thread by creating a new instance of the <xref:System.Threading.Thread?displayProperty=nameWithType> class and providing the name of the method that you want to execute on a new thread to the constructor.</span></span> <span data-ttu-id="2d6d6-113">Chcete-li spustit vytvořené vlákno, zavolejte <xref:System.Threading.Thread.Start%2A?displayProperty=nameWithType> metodu.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-113">To start a created thread, call the <xref:System.Threading.Thread.Start%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="2d6d6-114">Další informace a příklady najdete v článku [vytváření vláken a předávání dat v čase spuštění](creating-threads-and-passing-data-at-start-time.md) a <xref:System.Threading.Thread> Reference k rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-114">For more information and examples, see the [Creating threads and passing data at start time](creating-threads-and-passing-data-at-start-time.md) article and the <xref:System.Threading.Thread> API reference.</span></span>

## <a name="how-to-stop-a-thread"></a><span data-ttu-id="2d6d6-115">Postupy: zastavení vlákna</span><span class="sxs-lookup"><span data-stu-id="2d6d6-115">How to: Stop a thread</span></span>

<span data-ttu-id="2d6d6-116">Chcete-li ukončit provádění vlákna, použijte <xref:System.Threading.CancellationToken?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="2d6d6-116">To terminate the execution of a thread, use the <xref:System.Threading.CancellationToken?displayProperty=nameWithType>.</span></span> <span data-ttu-id="2d6d6-117">Nabízí jednotný způsob, jak v družstvě zastavit vlákna.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-117">It provides a unified way to stop threads cooperatively.</span></span> <span data-ttu-id="2d6d6-118">Další informace naleznete v tématu [zrušení ve spravovaných vláknech](cancellation-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="2d6d6-118">For more information, see [Cancellation in managed threads](cancellation-in-managed-threads.md).</span></span>

<span data-ttu-id="2d6d6-119">V některých případech není možné vlákno zastavovat spolupracuje, protože spouští kód třetí strany, který není navržen pro kooperativní zrušení.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-119">Sometimes it is not possible to stop a thread cooperatively, because it runs third-party code not designed for cooperative cancellation.</span></span> <span data-ttu-id="2d6d6-120">V takovém případě může být vhodné ukončit provádění jeho vynuceně.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-120">In this case, you might want to terminate its execution forcibly.</span></span> <span data-ttu-id="2d6d6-121">Chcete-li ukončit provádění vlákna vynuceně, v .NET Framework můžete použít <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> metodu.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-121">To terminate the execution of a thread forcibly, in .NET Framework you can use the <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="2d6d6-122">Tato metoda vyvolává <xref:System.Threading.ThreadAbortException> ve vlákně, ve kterém je vyvolána.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-122">That method raises a <xref:System.Threading.ThreadAbortException> on the thread on which it's invoked.</span></span> <span data-ttu-id="2d6d6-123">Další informace naleznete v tématu [zničení vláken](destroying-threads.md).</span><span class="sxs-lookup"><span data-stu-id="2d6d6-123">For more information, see [Destroying threads](destroying-threads.md).</span></span> <span data-ttu-id="2d6d6-124"><xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType>Metoda není v rozhraní .NET Core podporována.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-124">The <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method is not supported in .NET Core.</span></span> <span data-ttu-id="2d6d6-125">Pokud potřebujete ukončit provádění kódu třetí strany vynuceně v .NET Core, spusťte ho v samostatném procesu a použijte <xref:System.Diagnostics.Process.Kill%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="2d6d6-125">If you need to terminate the execution of third-party code forcibly in .NET Core, run it in the separate process and use <xref:System.Diagnostics.Process.Kill%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="2d6d6-126"><xref:System.Threading.CancellationToken?displayProperty=nameWithType>Není k dispozici před .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-126">The <xref:System.Threading.CancellationToken?displayProperty=nameWithType> is not available before .NET Framework 4.</span></span> <span data-ttu-id="2d6d6-127">Chcete-li zastavit vlákno ve starších verzích .NET Framework, měli byste implementovat kooperativní zrušení ručně pomocí technik synchronizace vláken.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-127">To stop a thread in older .NET Framework versions, you should implement the cooperative cancellation manually using the thread synchronization techniques.</span></span> <span data-ttu-id="2d6d6-128">Můžete například vytvořit pole volatile Boolean `shouldStop` a použít ho k vyžádání kódu spuštěného vláknem k zastavení.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-128">For example, you can create the volatile boolean field `shouldStop` and use it to request the code executed by the thread to stop.</span></span> <span data-ttu-id="2d6d6-129">Další informace naleznete v tématu [volatile](../../csharp/language-reference/keywords/volatile.md) v jazyce C# Reference a <xref:System.Threading.Volatile?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="2d6d6-129">For more information, see [volatile](../../csharp/language-reference/keywords/volatile.md) in C# Reference and <xref:System.Threading.Volatile?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="2d6d6-130">Použijte <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> metodu, aby volající vlákno čekalo na ukončení zastaveného vlákna.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-130">Use the <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> method to make the calling thread wait for the termination of the thread being stopped.</span></span>

## <a name="how-to-pause-or-interrupt-a-thread"></a><span data-ttu-id="2d6d6-131">Postupy: pozastavení nebo přerušení vlákna</span><span class="sxs-lookup"><span data-stu-id="2d6d6-131">How to: Pause or interrupt a thread</span></span>

<span data-ttu-id="2d6d6-132">Použijte <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> metodu pro pozastavení aktuálního vlákna po zadanou dobu.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-132">You use the <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> method to pause the current thread for a specified amount of time.</span></span> <span data-ttu-id="2d6d6-133">Blokované vlákno lze přerušit voláním <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-133">You can interrupt a blocked thread by calling the <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="2d6d6-134">Další informace najdete v tématu [pozastavení a přerušení vláken](pausing-and-resuming-threads.md).</span><span class="sxs-lookup"><span data-stu-id="2d6d6-134">For more information, see [Pausing and interrupting threads](pausing-and-resuming-threads.md).</span></span>

## <a name="thread-properties"></a><span data-ttu-id="2d6d6-135">Vlastnosti vlákna</span><span class="sxs-lookup"><span data-stu-id="2d6d6-135">Thread properties</span></span>

<span data-ttu-id="2d6d6-136">Následující tabulka uvádí některé z <xref:System.Threading.Thread> vlastností:</span><span class="sxs-lookup"><span data-stu-id="2d6d6-136">The following table presents some of the <xref:System.Threading.Thread> properties:</span></span>  
  
|<span data-ttu-id="2d6d6-137">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="2d6d6-137">Property</span></span>|<span data-ttu-id="2d6d6-138">Popis</span><span class="sxs-lookup"><span data-stu-id="2d6d6-138">Description</span></span>|  
|--------------|-----------|  
|<xref:System.Threading.Thread.IsAlive%2A>|<span data-ttu-id="2d6d6-139">Vrátí, `true` zda bylo vlákno spuštěno a dosud nebylo ukončeno normální nebo přerušeno.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-139">Returns `true` if a thread has been started and has not yet terminated normally or aborted.</span></span>|  
|<xref:System.Threading.Thread.IsBackground%2A>|<span data-ttu-id="2d6d6-140">Získá nebo nastaví logickou hodnotu, která označuje, zda se jedná o vlákno na pozadí.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-140">Gets or sets a Boolean that indicates if a thread is a background thread.</span></span> <span data-ttu-id="2d6d6-141">Vlákna na pozadí jsou jako vlákna na popředí, ale vlákno na pozadí nezabrání procesu v jeho zastavení.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-141">Background threads are like foreground threads, but a background thread doesn't prevent a process from stopping.</span></span> <span data-ttu-id="2d6d6-142">Po zastavení všech vláken na popředí, která patří do procesu, ukončí modul CLR (Common Language Runtime) proces voláním <xref:System.Threading.Thread.Abort%2A> metody na vláknech na pozadí, které jsou stále aktivní.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-142">Once all foreground threads that belong to a process have stopped, the common language runtime ends the process by calling the <xref:System.Threading.Thread.Abort%2A> method on background threads that are still alive.</span></span> <span data-ttu-id="2d6d6-143">Další informace naleznete v tématu [vlákna v popředí a na pozadí](foreground-and-background-threads.md).</span><span class="sxs-lookup"><span data-stu-id="2d6d6-143">For more information, see [Foreground and Background Threads](foreground-and-background-threads.md).</span></span>|  
|<xref:System.Threading.Thread.Name%2A>|<span data-ttu-id="2d6d6-144">Získá nebo nastaví název vlákna.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-144">Gets or sets the name of a thread.</span></span> <span data-ttu-id="2d6d6-145">Nejčastěji se používá ke zjišťování jednotlivých vláken při ladění.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-145">Most frequently used to discover individual threads when you debug.</span></span>|  
|<xref:System.Threading.Thread.Priority%2A>|<span data-ttu-id="2d6d6-146">Získá nebo nastaví <xref:System.Threading.ThreadPriority> hodnotu, která je používána operačním systémem k určení priorit plánování vláken.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-146">Gets or sets a <xref:System.Threading.ThreadPriority> value that is used by the operating system to prioritize thread scheduling.</span></span> <span data-ttu-id="2d6d6-147">Další informace naleznete v tématu [plánování vláken](scheduling-threads.md) a <xref:System.Threading.ThreadPriority> reference.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-147">For more information, see [Scheduling threads](scheduling-threads.md) and the <xref:System.Threading.ThreadPriority> reference.</span></span>|  
|<xref:System.Threading.Thread.ThreadState%2A>|<span data-ttu-id="2d6d6-148">Získá <xref:System.Threading.ThreadState> hodnotu obsahující aktuální stavy vlákna.</span><span class="sxs-lookup"><span data-stu-id="2d6d6-148">Gets a <xref:System.Threading.ThreadState> value containing the current states of a thread.</span></span>|  

## <a name="see-also"></a><span data-ttu-id="2d6d6-149">Viz také</span><span class="sxs-lookup"><span data-stu-id="2d6d6-149">See also</span></span>

- <xref:System.Threading.Thread?displayProperty=nameWithType>
- [<span data-ttu-id="2d6d6-150">Vlákna a dělení na vlákna</span><span class="sxs-lookup"><span data-stu-id="2d6d6-150">Threads and Threading</span></span>](threads-and-threading.md)
- [<span data-ttu-id="2d6d6-151">Paralelní programování</span><span class="sxs-lookup"><span data-stu-id="2d6d6-151">Parallel Programming</span></span>](../parallel-programming/index.md)
