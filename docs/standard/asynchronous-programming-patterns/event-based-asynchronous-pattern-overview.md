---
title: Přehled asynchronních vzorů založených na událostech
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Event-based Asynchronous Pattern
- ProgressChangedEventArgs class
- BackgroundWorker component
- events [.NET Framework], asynchronous
- Asynchronous Pattern
- AsyncOperationManager class
- threading [.NET Framework], asynchronous features
- AsyncOperation class
- AsyncCompletedEventArgs class
ms.assetid: 792aa8da-918b-458e-b154-9836b97735f3
ms.openlocfilehash: cce01a7c87f6f20b5e6c46881b8c863bb5a72a88
ms.sourcegitcommit: 00aa62e2f469c2272a457b04e66b4cc3c97a800b
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 02/28/2020
ms.locfileid: "78160064"
---
# <a name="event-based-asynchronous-pattern-overview"></a><span data-ttu-id="7b0b2-102">Přehled asynchronních vzorů založených na událostech</span><span class="sxs-lookup"><span data-stu-id="7b0b2-102">Event-based Asynchronous Pattern Overview</span></span>
<span data-ttu-id="7b0b2-103">Aplikace, které provádějí mnoho úloh současně, stále reagují na interakci s uživatelem, často vyžadují návrh, který používá více vláken.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-103">Applications that perform many tasks simultaneously, yet remain responsive to user interaction, often require a design that uses multiple threads.</span></span> <span data-ttu-id="7b0b2-104">Obor názvů <xref:System.Threading> poskytuje všechny nástroje, které jsou nezbytné pro vytváření vysoce výkonných aplikací s vysokým výkonem, ale používání těchto nástrojů efektivně vyžaduje významné prostředí pro vícevláknové softwarové inženýry.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-104">The <xref:System.Threading> namespace provides all the tools necessary to create high-performance multithreaded applications, but using these tools effectively requires significant experience with multithreaded software engineering.</span></span> <span data-ttu-id="7b0b2-105">Pro relativně jednoduché vícevláknové aplikace <xref:System.ComponentModel.BackgroundWorker> komponenta poskytuje jasné řešení.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-105">For relatively simple multithreaded applications, the <xref:System.ComponentModel.BackgroundWorker> component provides a straightforward solution.</span></span> <span data-ttu-id="7b0b2-106">Pro propracovanější asynchronní aplikace zvažte implementaci třídy, která odpovídá asynchronnímu vzoru založenému na událostech.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-106">For more sophisticated asynchronous applications, consider implementing a class that adheres to the Event-based Asynchronous Pattern.</span></span>  
  
 <span data-ttu-id="7b0b2-107">Asynchronní vzor založený na událostech zpřístupňuje výhody vícevláknových aplikací a zároveň skrývá mnoho složitých problémů, které jsou v podstatě vícevláknové konstrukce.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-107">The Event-based Asynchronous Pattern makes available the advantages of multithreaded applications while hiding many of the complex issues inherent in multithreaded design.</span></span> <span data-ttu-id="7b0b2-108">Použití třídy, která podporuje tento model, vám umožní:</span><span class="sxs-lookup"><span data-stu-id="7b0b2-108">Using a class that supports this pattern can allow you to:</span></span>  
  
- <span data-ttu-id="7b0b2-109">Provádějte časově náročné úkoly, například soubory ke stažení a databázové operace, na pozadí, aniž by došlo k přerušení aplikace.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-109">Perform time-consuming tasks, such as downloads and database operations, "in the background," without interrupting your application.</span></span>  
  
- <span data-ttu-id="7b0b2-110">Spouštějte více operací současně a při každém dokončení přijímají oznámení.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-110">Execute multiple operations simultaneously, receiving notifications when each completes.</span></span>  
  
- <span data-ttu-id="7b0b2-111">Počkejte, než budou prostředky k dispozici bez zastavení ("blokování") vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-111">Wait for resources to become available without stopping ("blocking") your application.</span></span>  
  
- <span data-ttu-id="7b0b2-112">Komunikujte s nedokončenými asynchronními operacemi pomocí známého modelu událostí a delegátů.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-112">Communicate with pending asynchronous operations using the familiar events-and-delegates model.</span></span> <span data-ttu-id="7b0b2-113">Další informace o používání obslužných rutin událostí a delegátů naleznete v tématu [events](../../../docs/standard/events/index.md).</span><span class="sxs-lookup"><span data-stu-id="7b0b2-113">For more information on using event handlers and delegates, see [Events](../../../docs/standard/events/index.md).</span></span>  
  
 <span data-ttu-id="7b0b2-114">Třída, která podporuje asynchronní vzor založený na událostech, bude mít jednu nebo více metod s názvem _methodName_**Async**.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-114">A class that supports the Event-based Asynchronous Pattern will have one or more methods named _MethodName_**Async**.</span></span> <span data-ttu-id="7b0b2-115">Tyto metody mohou zrcadlit synchronní verze, které provádějí stejnou operaci v aktuálním vlákně.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-115">These methods may mirror synchronous versions, which perform the same operation on the current thread.</span></span> <span data-ttu-id="7b0b2-116">Třída může mít také událost _methodName_**Completed** a může mít metodu _methodName_**AsyncCancel** (nebo jednoduše **CancelAsync**).</span><span class="sxs-lookup"><span data-stu-id="7b0b2-116">The class may also have a _MethodName_**Completed** event and it may have a _MethodName_**AsyncCancel** (or simply **CancelAsync**) method.</span></span>  
  
 <span data-ttu-id="7b0b2-117"><xref:System.Windows.Forms.PictureBox> je typická komponenta, která podporuje asynchronní vzor založený na událostech.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-117"><xref:System.Windows.Forms.PictureBox> is a typical component that supports the Event-based Asynchronous Pattern.</span></span> <span data-ttu-id="7b0b2-118">Bitovou kopii lze synchronně stáhnout voláním její <xref:System.Windows.Forms.PictureBox.Load%2A> metody, ale pokud je bitová kopie velká, nebo pokud je síťové připojení pomalé, přestane vaše aplikace reagovat, dokud nebude dokončena operace stahování a volání <xref:System.Windows.Forms.PictureBox.Load%2A> vrátí.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-118">You can download an image synchronously by calling its <xref:System.Windows.Forms.PictureBox.Load%2A> method, but if the image is large, or if the network connection is slow, your application will stop responding until the download operation is completed and the call to <xref:System.Windows.Forms.PictureBox.Load%2A> returns.</span></span>  
  
 <span data-ttu-id="7b0b2-119">Pokud chcete, aby vaše aplikace zůstala v průběhu načítání obrázku, můžete zavolat metodu <xref:System.Windows.Forms.PictureBox.LoadAsync%2A> a zpracovat událost <xref:System.Windows.Forms.PictureBox.LoadCompleted>, stejně jako byste poznamenali jakoukoli jinou událost.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-119">If you want your application to keep running while the image is loading, you can call the <xref:System.Windows.Forms.PictureBox.LoadAsync%2A> method and handle the <xref:System.Windows.Forms.PictureBox.LoadCompleted> event, just as you would handle any other event.</span></span> <span data-ttu-id="7b0b2-120">Při volání metody <xref:System.Windows.Forms.PictureBox.LoadAsync%2A> bude aplikace nadále běžet, zatímco stahování pokračuje v samostatném vlákně ("na pozadí").</span><span class="sxs-lookup"><span data-stu-id="7b0b2-120">When you call the <xref:System.Windows.Forms.PictureBox.LoadAsync%2A> method, your application will continue to run while the download proceeds on a separate thread ("in the background").</span></span> <span data-ttu-id="7b0b2-121">Vaše obslužná rutina události bude volána, když je dokončena operace načítání obrázku, a vaše obslužná rutina události může ověřit parametr <xref:System.ComponentModel.AsyncCompletedEventArgs> a zjistit, zda bylo stahování úspěšně dokončeno.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-121">Your event handler will be called when the image-loading operation is complete, and your event handler can examine the <xref:System.ComponentModel.AsyncCompletedEventArgs> parameter to determine if the download completed successfully.</span></span>  
  
 <span data-ttu-id="7b0b2-122">Asynchronní vzor založený na událostech vyžaduje zrušení asynchronní operace a ovládací prvek <xref:System.Windows.Forms.PictureBox> tento požadavek podporuje s jeho <xref:System.Windows.Forms.PictureBox.CancelAsync%2A> metodou.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-122">The Event-based Asynchronous Pattern requires that an asynchronous operation can be canceled, and the <xref:System.Windows.Forms.PictureBox> control supports this requirement with its <xref:System.Windows.Forms.PictureBox.CancelAsync%2A> method.</span></span> <span data-ttu-id="7b0b2-123">Volání <xref:System.Windows.Forms.PictureBox.CancelAsync%2A> odešle požadavek na zastavení čeká na stažení a při zrušení úlohy dojde k vyvolání události <xref:System.Windows.Forms.PictureBox.LoadCompleted>.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-123">Calling <xref:System.Windows.Forms.PictureBox.CancelAsync%2A> submits a request to stop the pending download, and when the task is canceled, the <xref:System.Windows.Forms.PictureBox.LoadCompleted> event is raised.</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="7b0b2-124">Je možné, že stahování se dokončí jenom v případě, že se vyžádá <xref:System.Windows.Forms.PictureBox.CancelAsync%2A> žádost, takže <xref:System.ComponentModel.AsyncCompletedEventArgs.Cancelled%2A> nemusí odrážet požadavek na zrušení.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-124">It is possible that the download will finish just as the <xref:System.Windows.Forms.PictureBox.CancelAsync%2A> request is made, so <xref:System.ComponentModel.AsyncCompletedEventArgs.Cancelled%2A> may not reflect the request to cancel.</span></span> <span data-ttu-id="7b0b2-125">Označuje se jako *konflikt časování* a jedná se o běžný problém v programování s více vlákny.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-125">This is called a *race condition* and is a common issue in multithreaded programming.</span></span> <span data-ttu-id="7b0b2-126">Další informace o problémech v programování s více vlákny najdete v tématu [osvědčené postupy spravovaného vlákna](../../../docs/standard/threading/managed-threading-best-practices.md).</span><span class="sxs-lookup"><span data-stu-id="7b0b2-126">For more information on issues in multithreaded programming, see [Managed Threading Best Practices](../../../docs/standard/threading/managed-threading-best-practices.md).</span></span>  
  
## <a name="characteristics-of-the-event-based-asynchronous-pattern"></a><span data-ttu-id="7b0b2-127">Charakteristiky asynchronního vzoru založeného na událostech</span><span class="sxs-lookup"><span data-stu-id="7b0b2-127">Characteristics of the Event-based Asynchronous Pattern</span></span>  
 <span data-ttu-id="7b0b2-128">Asynchronní vzor založený na událostech může v závislosti na složitosti operací podporovaných určitou třídou trvat několik forem.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-128">The Event-based Asynchronous Pattern may take several forms, depending on the complexity of the operations supported by a particular class.</span></span> <span data-ttu-id="7b0b2-129">Nejjednodušší třídy mohou mít jednu**asynchronní** metodu _methodName_a odpovídající událost _methodName_**Completed** .</span><span class="sxs-lookup"><span data-stu-id="7b0b2-129">The simplest classes may have a single _MethodName_**Async** method and a corresponding _MethodName_**Completed** event.</span></span> <span data-ttu-id="7b0b2-130">Složitější třídy mohou mít několik**asynchronních** metod _methodName_, z nichž každá má odpovídající událost _methodName_**Completed** , a také synchronní verze těchto metod.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-130">More complex classes may have several _MethodName_**Async** methods, each with a corresponding _MethodName_**Completed** event, as well as synchronous versions of these methods.</span></span> <span data-ttu-id="7b0b2-131">Třídy mohou volitelně podporovat zrušení, vytváření sestav o průběhu a přírůstkové výsledky pro každou asynchronní metodu.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-131">Classes can optionally support cancellation, progress reporting, and incremental results for each asynchronous method.</span></span>  
  
 <span data-ttu-id="7b0b2-132">Asynchronní metoda může také podporovat více nevyřízených volání (více souběžných vyvolání), což umožňuje vašemu kódu volat je libovolným počtem výskytů, než dokončí jiné operace, které čekají na vyřízení.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-132">An asynchronous method may also support multiple pending calls (multiple concurrent invocations), allowing your code to call it any number of times before it completes other pending operations.</span></span> <span data-ttu-id="7b0b2-133">Správné zpracování této situace může vyžadovat, aby vaše aplikace mohla sledovat dokončení jednotlivých operací.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-133">Correctly handling this situation may require your application to track the completion of each operation.</span></span>  
  
### <a name="examples-of-the-event-based-asynchronous-pattern"></a><span data-ttu-id="7b0b2-134">Příklady asynchronního vzoru založeného na událostech</span><span class="sxs-lookup"><span data-stu-id="7b0b2-134">Examples of the Event-based Asynchronous Pattern</span></span>  
 <span data-ttu-id="7b0b2-135">Komponenty <xref:System.Media.SoundPlayer> a <xref:System.Windows.Forms.PictureBox> reprezentují jednoduché implementace asynchronního vzoru založeného na událostech.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-135">The <xref:System.Media.SoundPlayer> and <xref:System.Windows.Forms.PictureBox> components represent simple implementations of the Event-based Asynchronous Pattern.</span></span> <span data-ttu-id="7b0b2-136">Komponenty <xref:System.Net.WebClient> a <xref:System.ComponentModel.BackgroundWorker> reprezentují složitější implementace asynchronního vzoru založeného na událostech.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-136">The <xref:System.Net.WebClient> and <xref:System.ComponentModel.BackgroundWorker> components represent more complex implementations of the Event-based Asynchronous Pattern.</span></span>  
  
 <span data-ttu-id="7b0b2-137">Níže je příklad deklarace třídy, která odpovídá vzoru:</span><span class="sxs-lookup"><span data-stu-id="7b0b2-137">Below is an example class declaration that conforms to the pattern:</span></span>  
  
```vb  
Public Class AsyncExample  
    ' Synchronous methods.  
    Public Function Method1(ByVal param As String) As Integer
    Public Sub Method2(ByVal param As Double)
  
    ' Asynchronous methods.  
    Overloads Public Sub Method1Async(ByVal param As String)
    Overloads Public Sub Method1Async(ByVal param As String, ByVal userState As Object)
    Public Event Method1Completed As Method1CompletedEventHandler  
  
    Overloads Public Sub Method2Async(ByVal param As Double)
    Overloads Public Sub Method2Async(ByVal param As Double, ByVal userState As Object)
    Public Event Method2Completed As Method2CompletedEventHandler  
  
    Public Sub CancelAsync(ByVal userState As Object)
  
    Public ReadOnly Property IsBusy () As Boolean  
  
    ' Class implementation not shown.  
End Class  
```  
  
```csharp  
public class AsyncExample  
{  
    // Synchronous methods.  
    public int Method1(string param);  
    public void Method2(double param);  
  
    // Asynchronous methods.  
    public void Method1Async(string param);  
    public void Method1Async(string param, object userState);  
    public event Method1CompletedEventHandler Method1Completed;  
  
    public void Method2Async(double param);  
    public void Method2Async(double param, object userState);  
    public event Method2CompletedEventHandler Method2Completed;  
  
    public void CancelAsync(object userState);  
  
    public bool IsBusy { get; }  
  
    // Class implementation not shown.  
}  
```  
  
 <span data-ttu-id="7b0b2-138">Fiktivní `AsyncExample` třída má dvě metody, které podporují synchronní i asynchronní vyvolání.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-138">The fictitious `AsyncExample` class has two methods, both of which support synchronous and asynchronous invocations.</span></span> <span data-ttu-id="7b0b2-139">Synchronní přetížení se chová stejně jako jakékoli volání metody a spustí operaci na volajícím vlákně. Pokud je operace časově náročná, může před vrácením volání dojít k znatelnému zpoždění.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-139">The synchronous overloads behave like any method call and execute the operation on the calling thread; if the operation is time-consuming, there may be a noticeable delay before the call returns.</span></span> <span data-ttu-id="7b0b2-140">Asynchronní přetížení spustí operaci v jiném vlákně a pak okamžitě vrátí, což umožní volajícímu vláknu pokračovat, zatímco operace se spustí na pozadí.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-140">The asynchronous overloads will start the operation on another thread and then return immediately, allowing the calling thread to continue while the operation executes "in the background."</span></span>  
  
### <a name="asynchronous-method-overloads"></a><span data-ttu-id="7b0b2-141">Přetížení asynchronní metody</span><span class="sxs-lookup"><span data-stu-id="7b0b2-141">Asynchronous Method Overloads</span></span>  
 <span data-ttu-id="7b0b2-142">Existují potenciálně dvě přetížení pro asynchronní operace: jedno vyvolání a vícenásobné volání.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-142">There are potentially two overloads for the asynchronous operations: single-invocation and multiple-invocation.</span></span> <span data-ttu-id="7b0b2-143">Tyto dva formuláře lze odlišit svými signaturami metod: formulář s vícenásobným voláním má navíc parametr s názvem `userState`.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-143">You can distinguish these two forms by their method signatures: the multiple-invocation form has an extra parameter called `userState`.</span></span> <span data-ttu-id="7b0b2-144">Tento formulář umožňuje vašemu kódu volat `Method1Async(string param, object userState)` několikrát bez čekání na dokončení všech čekajících asynchronních operací.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-144">This form makes it possible for your code to call `Method1Async(string param, object userState)` multiple times without waiting for any pending asynchronous operations to finish.</span></span> <span data-ttu-id="7b0b2-145">Pokud na druhé straně zkusíte volat `Method1Async(string param)` před dokončením předchozího vyvolání, metoda vyvolá <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-145">If, on the other hand, you try to call `Method1Async(string param)` before a previous invocation has completed, the method raises an <xref:System.InvalidOperationException>.</span></span>  
  
 <span data-ttu-id="7b0b2-146">Parametr `userState` pro přetížení vícenásobného navýšení volání umožňuje rozlišovat mezi asynchronními operacemi.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-146">The `userState` parameter for the multiple-invocation overloads allows you to distinguish among asynchronous operations.</span></span> <span data-ttu-id="7b0b2-147">Poskytnete jedinečnou hodnotu (například identifikátor GUID nebo kód hash) pro každé volání `Method1Async(string param, object userState)`a po dokončení každé operace může vaše obslužná rutina události určit, která instance operace vyvolala událost dokončení.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-147">You provide a unique value (for example, a GUID or hash code) for each call to `Method1Async(string param, object userState)`, and when each operation is completed, your event handler can determine which instance of the operation raised the completion event.</span></span>  
  
### <a name="tracking-pending-operations"></a><span data-ttu-id="7b0b2-148">Sledování nevyřízených operací</span><span class="sxs-lookup"><span data-stu-id="7b0b2-148">Tracking Pending Operations</span></span>  
 <span data-ttu-id="7b0b2-149">Pokud používáte přetížení s vícenásobným vyvoláním, váš kód bude potřebovat sledovat `userState` objektů (ID úloh) pro probíhající úkoly.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-149">If you use the multiple-invocation overloads, your code will need to keep track of the `userState` objects (task IDs) for pending tasks.</span></span> <span data-ttu-id="7b0b2-150">Pro každé volání `Method1Async(string param, object userState)`obvykle vygenerujete nový jedinečný `userState` objekt a přidáte ho do kolekce.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-150">For each call to `Method1Async(string param, object userState)`, you will typically generate a new, unique `userState` object and add it to a collection.</span></span> <span data-ttu-id="7b0b2-151">Když úloha odpovídající tomuto objektu `userState` vyvolá událost dokončení, vaše implementace metody dokončení prověřuje <xref:System.ComponentModel.AsyncCompletedEventArgs.UserState%2A?displayProperty=nameWithType> a odebere ji z kolekce.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-151">When the task corresponding to this `userState` object raises the completion event, your completion method implementation will examine <xref:System.ComponentModel.AsyncCompletedEventArgs.UserState%2A?displayProperty=nameWithType> and remove it from your collection.</span></span> <span data-ttu-id="7b0b2-152">Tímto způsobem parametr `userState` přebírá roli ID úlohy.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-152">Used this way, the `userState` parameter takes the role of a task ID.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="7b0b2-153">Musíte být opatrní, abyste zadali jedinečnou hodnotu pro `userState` v voláních přetížení vícenásobného volání.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-153">You must be careful to provide a unique value for `userState` in your calls to multiple-invocation overloads.</span></span> <span data-ttu-id="7b0b2-154">Nejedinečná ID úlohy způsobí, že asynchronní třída vyvolá <xref:System.ArgumentException>.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-154">Non-unique task IDs will cause the asynchronous class throw an <xref:System.ArgumentException>.</span></span>  
  
### <a name="canceling-pending-operations"></a><span data-ttu-id="7b0b2-155">Rušení probíhajících operací</span><span class="sxs-lookup"><span data-stu-id="7b0b2-155">Canceling Pending Operations</span></span>  
 <span data-ttu-id="7b0b2-156">Je důležité mít schopnost zrušit asynchronní operace kdykoli před jejich dokončením.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-156">It is important to be able to cancel asynchronous operations at any time before their completion.</span></span> <span data-ttu-id="7b0b2-157">Třídy, které implementují asynchronní vzor založený na událostech, budou mít metodu `CancelAsync` (pokud existuje pouze jedna asynchronní metoda) nebo metoda _methodName_**AsyncCancel** (pokud existuje více asynchronních metod).</span><span class="sxs-lookup"><span data-stu-id="7b0b2-157">Classes that implement the Event-based Asynchronous Pattern will have a `CancelAsync` method (if there is only one asynchronous method) or a _MethodName_**AsyncCancel** method (if there are multiple asynchronous methods).</span></span>  
  
 <span data-ttu-id="7b0b2-158">Metody umožňující vícenásobné vyvolání přebírají `userState` parametr, který lze použít ke sledování životnosti každého úkolu.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-158">Methods that allow multiple invocations take a `userState` parameter, which can be used to track the lifetime of each task.</span></span> <span data-ttu-id="7b0b2-159">`CancelAsync` převezme parametr `userState`, který vám umožní zrušit konkrétní nedokončené úlohy.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-159">`CancelAsync` takes a `userState` parameter, which allows you to cancel particular pending tasks.</span></span>  
  
 <span data-ttu-id="7b0b2-160">Metody, které podporují pouze jednu nevyřízenou operaci v čase, například `Method1Async(string param)`, nelze zrušit.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-160">Methods that support only a single pending operation at a time, like `Method1Async(string param)`, are not cancelable.</span></span>  
  
### <a name="receiving-progress-updates-and-incremental-results"></a><span data-ttu-id="7b0b2-161">Přijímání aktualizací průběhu a přírůstkových výsledků</span><span class="sxs-lookup"><span data-stu-id="7b0b2-161">Receiving Progress Updates and Incremental Results</span></span>  
 <span data-ttu-id="7b0b2-162">Třída, která odpovídá asynchronnímu vzoru založenému na událostech, může volitelně poskytnout událost pro sledování průběhu a přírůstkových výsledků.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-162">A class that adheres to the Event-based Asynchronous Pattern may optionally provide an event for tracking progress and incremental results.</span></span> <span data-ttu-id="7b0b2-163">To se obvykle jmenuje `ProgressChanged` nebo _methodName_**ProgressChanged**a jeho odpovídající obslužná rutina události bude přebírat parametr <xref:System.ComponentModel.ProgressChangedEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-163">This will typically be named `ProgressChanged` or _MethodName_**ProgressChanged**, and its corresponding event handler will take a <xref:System.ComponentModel.ProgressChangedEventArgs> parameter.</span></span>  
  
 <span data-ttu-id="7b0b2-164">Obslužná rutina události `ProgressChanged` může prošetřit vlastnost <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A?displayProperty=nameWithType> a určit, jaké procento asynchronního úkolu bylo dokončeno.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-164">The event handler for the `ProgressChanged` event can examine the <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A?displayProperty=nameWithType> property to determine what percentage of an asynchronous task has been completed.</span></span> <span data-ttu-id="7b0b2-165">Tato vlastnost bude v rozsahu od 0 do 100 a lze ji použít k aktualizaci vlastnosti <xref:System.Windows.Forms.ProgressBar.Value%2A> <xref:System.Windows.Forms.ProgressBar>.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-165">This property will range from 0 to 100, and it can be used to update the <xref:System.Windows.Forms.ProgressBar.Value%2A> property of a <xref:System.Windows.Forms.ProgressBar>.</span></span> <span data-ttu-id="7b0b2-166">Pokud čekají více asynchronních operací, můžete pomocí vlastnosti <xref:System.ComponentModel.ProgressChangedEventArgs.UserState%2A?displayProperty=nameWithType> odlišit, kterou operaci oznamuje průběh.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-166">If multiple asynchronous operations are pending, you can use the <xref:System.ComponentModel.ProgressChangedEventArgs.UserState%2A?displayProperty=nameWithType> property to distinguish which operation is reporting progress.</span></span>  
  
 <span data-ttu-id="7b0b2-167">Některé třídy mohou nahlásit přírůstkové výsledky, jakmile budou asynchronní operace pokračovat.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-167">Some classes may report incremental results as asynchronous operations proceed.</span></span> <span data-ttu-id="7b0b2-168">Tyto výsledky budou uloženy ve třídě, která je odvozena od <xref:System.ComponentModel.ProgressChangedEventArgs> a zobrazí se jako vlastnosti v odvozené třídě.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-168">These results will be stored in a class that derives from <xref:System.ComponentModel.ProgressChangedEventArgs> and they will appear as properties in the derived class.</span></span> <span data-ttu-id="7b0b2-169">K těmto výsledkům můžete přistupovat v obslužné rutině události `ProgressChanged`, stejně jako při přístupu k vlastnosti <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A>.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-169">You can access these results in the event handler for the `ProgressChanged` event, just as you would access the <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A> property.</span></span> <span data-ttu-id="7b0b2-170">Pokud čekáte na více asynchronních operací, můžete pomocí vlastnosti <xref:System.ComponentModel.ProgressChangedEventArgs.UserState%2A> odlišit, jakou operaci sestavy přírůstkových výsledků vytvářejí.</span><span class="sxs-lookup"><span data-stu-id="7b0b2-170">If multiple asynchronous operations are pending, you can use the <xref:System.ComponentModel.ProgressChangedEventArgs.UserState%2A> property to distinguish which operation is reporting incremental results.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7b0b2-171">Viz také</span><span class="sxs-lookup"><span data-stu-id="7b0b2-171">See also</span></span>

- <xref:System.ComponentModel.ProgressChangedEventArgs>
- <xref:System.ComponentModel.BackgroundWorker>
- <xref:System.ComponentModel.AsyncCompletedEventArgs>
- [<span data-ttu-id="7b0b2-172">Postupy: Použití komponent, které podporují asynchronní vzor založený na událostech</span><span class="sxs-lookup"><span data-stu-id="7b0b2-172">How to: Use Components That Support the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/how-to-use-components-that-support-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="7b0b2-173">Postupy: Spuštění operace na pozadí</span><span class="sxs-lookup"><span data-stu-id="7b0b2-173">How to: Run an Operation in the Background</span></span>](../../../docs/framework/winforms/controls/how-to-run-an-operation-in-the-background.md)
- [<span data-ttu-id="7b0b2-174">Postupy: Implementace formuláře, který používá operaci na pozadí</span><span class="sxs-lookup"><span data-stu-id="7b0b2-174">How to: Implement a Form That Uses a Background Operation</span></span>](../../../docs/framework/winforms/controls/how-to-implement-a-form-that-uses-a-background-operation.md)
- [<span data-ttu-id="7b0b2-175">Asynchronní vzor založený na událostech (EAP)</span><span class="sxs-lookup"><span data-stu-id="7b0b2-175">Event-based Asynchronous Pattern (EAP)</span></span>](../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-eap.md)
- [<span data-ttu-id="7b0b2-176">Osvědčené postupy pro implementaci asynchronního vzoru založeného na událostech</span><span class="sxs-lookup"><span data-stu-id="7b0b2-176">Best Practices for Implementing the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/best-practices-for-implementing-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="7b0b2-177">Rozhodování, kdy implementovat asynchronní vzor založený na událostech</span><span class="sxs-lookup"><span data-stu-id="7b0b2-177">Deciding When to Implement the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/deciding-when-to-implement-the-event-based-asynchronous-pattern.md)
