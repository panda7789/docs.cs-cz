---
title: Kroky v postupu DevOps vnější smyčky pro aplikaci v Dockeru
description: Životní cyklus aplikace kontejnerizovaných Dockeru s platformou a nástroji Microsoft
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/10/2018
ms.openlocfilehash: a03853a508cfb3d5dd5fbfe66e4ef484b685faaa
ms.sourcegitcommit: 6eac9a01ff5d70c6d18460324c016a3612c5e268
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/15/2018
ms.locfileid: "45653236"
---
# <a name="steps-in-the-outer-loop-devops-workflow-for-a-docker-application"></a><span data-ttu-id="0bf36-103">Kroky v postupu DevOps vnější smyčky pro aplikaci v Dockeru</span><span class="sxs-lookup"><span data-stu-id="0bf36-103">Steps in the outer-loop DevOps workflow for a Docker application</span></span>

<span data-ttu-id="0bf36-104">Obrázek 5-1 představuje začátku do konce znázornění postup skládající se z aplikací pracovních postupů DevOps vnější smyčky.</span><span class="sxs-lookup"><span data-stu-id="0bf36-104">Figure 5-1 presents an end-to-end depiction of the steps comprising the DevOps outer-loop workflow.</span></span>

![](./media/image1.png)

<span data-ttu-id="0bf36-105">Obrázek 5-1: DevOps vnější smyčky pracovní postup pro aplikace Dockeru pomocí nástrojů Microsoftu</span><span class="sxs-lookup"><span data-stu-id="0bf36-105">Figure 5-1: DevOps outer-loop workflow for Docker applications with Microsoft tools</span></span>

<span data-ttu-id="0bf36-106">Teď se podívejme se na každý z těchto kroků podrobněji.</span><span class="sxs-lookup"><span data-stu-id="0bf36-106">Now, let's examine each of these steps in greater detail.</span></span>

## <a name="step-1-inner-loop-development-workflow"></a><span data-ttu-id="0bf36-107">Krok 1: Pracovní postup vývoje vnitřní smyčky</span><span class="sxs-lookup"><span data-stu-id="0bf36-107">Step 1: Inner-loop development workflow</span></span>

<span data-ttu-id="0bf36-108">Tento krok je podrobně popsána v kapitole 4, ale na rekapitulace, tady je kde vnější smyčky začíná, v okamžiku, kdy vývojář vloží kód do systému správy správy zdrojového kódu (např. Git) zahajuje akce kanálu CI.</span><span class="sxs-lookup"><span data-stu-id="0bf36-108">This step is explained in detail in Chapter 4, but, to recap, here is where the outer-loop begins, the moment at which a developer pushes code to the source control management system (like Git) initiating CI pipeline actions.</span></span>

## <a name="step-2-source-code-control-integration-and-management-with-azure-devops-services-and-git"></a><span data-ttu-id="0bf36-109">Krok 2: Integrace správy zdrojového kódu a správa pomocí služby Azure DevOps a Git</span><span class="sxs-lookup"><span data-stu-id="0bf36-109">Step 2: Source-Code Control integration and management with Azure DevOps Services and Git</span></span>

<span data-ttu-id="0bf36-110">V tomto kroku musíte mít systém správy verzí ke shromáždění konsolidované verzi veškerý kód pocházející z různými vývojáři v týmu.</span><span class="sxs-lookup"><span data-stu-id="0bf36-110">At this step, you need to have a version-control system to gather a consolidated version of all the code coming from the different developers in the team.</span></span>

<span data-ttu-id="0bf36-111">I když zdát samozřejmostí pro většinu vývojářů, při vytváření aplikací Dockeru v DevOps životního cyklu, správy zdrojového kódu (SCC) a správy zdrojového kódu, je důležité zdůraznit, že nemůže odeslat Image Dockeru s aplikací přímo do globální registru Docker (jako je Azure Container Registry nebo Docker Hubu) z počítače pro vývojáře.</span><span class="sxs-lookup"><span data-stu-id="0bf36-111">Even though source-code control (SCC) and source-code management might seem second-nature to most developers, when creating Docker applications in a DevOps life cycle, it is critical to emphasize that you must not submit the Docker images with the application directly to the global Docker Registry (like Azure Container Registry or Docker Hub) from the developer's machine.</span></span> <span data-ttu-id="0bf36-112">Naopak imagí Dockeru do všeobecně dostupné a nasazené do produkčního prostředí musí být vytvořeny výhradně na zdrojový kód, který je integrován v kanálu CI podle vašeho úložiště zdrojového kódu (např. Git) nebo globálního sestavení.</span><span class="sxs-lookup"><span data-stu-id="0bf36-112">On the contrary, the Docker images to be released and deployed to production environments must be created solely on the source code that is being integrated in your global build or CI pipeline based on your source-code repository (like Git).</span></span>

<span data-ttu-id="0bf36-113">Místní Image generovaných vývojáře sami by měly být používány pouze vývojáři při testování v rámci svých vlastních počítačích.</span><span class="sxs-lookup"><span data-stu-id="0bf36-113">The local images generated by the developers themselves should be used just by the developers when testing within their own machines.</span></span> <span data-ttu-id="0bf36-114">To je důvod, proč je důležité mít aktivovat z kódu SCC kanálu DevOps.</span><span class="sxs-lookup"><span data-stu-id="0bf36-114">This is why it is critical to have the DevOps pipeline activated from the SCC code.</span></span>

<span data-ttu-id="0bf36-115">Azure DevOps služby a Team Foundation Server podporují Gitu a Team Foundation Version Control.</span><span class="sxs-lookup"><span data-stu-id="0bf36-115">Azure DevOps Services and Team Foundation Server support Git and Team Foundation Version Control.</span></span> <span data-ttu-id="0bf36-116">Můžete zvolit mezi nimi a prostředí, použijte ho začátku do konce Microsoft.</span><span class="sxs-lookup"><span data-stu-id="0bf36-116">You can choose between them and use it for an end-to-end Microsoft experience.</span></span> <span data-ttu-id="0bf36-117">Ale také můžete spravovat svůj kód v externích úložištích (např. GitHub, v místním úložišti Git nebo Subversion) a stále se může připojit k němu a získat kód jako výchozí bod pro svůj kanál DevOps CI.</span><span class="sxs-lookup"><span data-stu-id="0bf36-117">However, you also can manage your code in external repositories (like GitHub, on-premises Git repositories, or Subversion) and still be able to connect to it and get the code as the starting point for your DevOps CI pipeline.</span></span>

## <a name="step-3-build-ci-integrate-and-test-with-azure-devops-services-and-docker"></a><span data-ttu-id="0bf36-118">Krok 3: Sestavení, průběžná integrace, integrace a testování s Azure DevOps služby a Dockeru</span><span class="sxs-lookup"><span data-stu-id="0bf36-118">Step 3: Build, CI, Integrate, and Test with Azure DevOps Services and Docker</span></span>

<span data-ttu-id="0bf36-119">Průběžná integrace se stal standardem pro moderní softwaru, testování a doručení.</span><span class="sxs-lookup"><span data-stu-id="0bf36-119">CI has emerged as a standard for modern software testing and delivery.</span></span> <span data-ttu-id="0bf36-120">Řešení Dockeru udržuje jasně oddělené oblasti zájmu mezi týmy vývoje a provozu.</span><span class="sxs-lookup"><span data-stu-id="0bf36-120">The Docker solution maintains a clear separation of concerns between the development and operations teams.</span></span> <span data-ttu-id="0bf36-121">Neměnnost imagí Dockeru zajišťuje opakovatelné nasazování mezi co vyvíjel, testovat pomocí položek konfigurace a spusťte v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="0bf36-121">The immutability of Docker images ensures a repeatable deployment between what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="0bf36-122">Modul docker nasazených na přenosné počítače pro vývojáře a testovací infrastrukturu zpřístupňuje kontejnery přenosné mezi prostředími.</span><span class="sxs-lookup"><span data-stu-id="0bf36-122">Docker Engine deployed across the developer laptops and test infrastructure makes the containers portable across environments.</span></span>

<span data-ttu-id="0bf36-123">V tomto okamžiku až budete mít systém správy verzí se správným kódem odeslání, musíte *sestavení služby* vyzvednout kód a spouštět globální sestavení a testů.</span><span class="sxs-lookup"><span data-stu-id="0bf36-123">At this point, after you have a version-control system with the correct code submitted, you need a *build service* to pick up the code and run the global build and tests.</span></span>

<span data-ttu-id="0bf36-124">Informace o vytváření kanálu CI skládající se z vašeho úložiště kódu (Git, atd.), váš server sestavení (Azure DevOps služby), modul Docker a Docker Registry je interní pracovní postup pro tento krok (průběžná integrace, sestavení, testování).</span><span class="sxs-lookup"><span data-stu-id="0bf36-124">The internal workflow for this step (CI, build, test) is about the construction of a CI pipeline consisting of your code repository (Git, etc.), your build server (Azure DevOps Services), Docker Engine, and a Docker Registry.</span></span>

<span data-ttu-id="0bf36-125">Můžete Azure DevOps Services jako základ pro vytváření aplikací a nastavení kanálu CI a publikování "artefaktů sestavení" na "úložiště artefaktů," který je vysvětlen v dalším kroku.</span><span class="sxs-lookup"><span data-stu-id="0bf36-125">You can use Azure DevOps Services as the foundation for building your applications and setting your CI pipeline, and for publishing the built "artifacts" to an "artifacts repository," which is explained in the next step.</span></span>

<span data-ttu-id="0bf36-126">Při použití Docker pro nasazení "konečné artefakty" nasazení jsou Image Dockeru s aplikací nebo služeb vložené v nich.</span><span class="sxs-lookup"><span data-stu-id="0bf36-126">When using Docker for the deployment, the "final artifacts" to be deployed are Docker images with your application or services embedded within them.</span></span> <span data-ttu-id="0bf36-127">Tyto Image jsou vloženy nebo publikovanou do *registru Dockeru* (soukromé úložiště jako ty, které můžete mít ve službě Azure Container Registry nebo veřejnou verzi jako registru Docker Hub, která se běžně používá pro oficiální základní Image).</span><span class="sxs-lookup"><span data-stu-id="0bf36-127">Those images are pushed or published to a *Docker Registry* (a private repository like the ones you can have in Azure Container Registry, or a public one like Docker Hub Registry, which is commonly used for official base images).</span></span>

<span data-ttu-id="0bf36-128">Tady je základní princip: kanál CI bude začaly vypnout potvrzení pro úložiště SCC jako je Git.</span><span class="sxs-lookup"><span data-stu-id="0bf36-128">Here is the basic concept: The CI pipeline will be kicked-off by a commit to an SCC repository like Git.</span></span> <span data-ttu-id="0bf36-129">Potvrzení změn způsobí služby Azure DevOps a spustit úlohu sestavení a v kontejneru Dockeru, po úspěšném dokončení této úlohy, nasdílení image Dockeru do registru Dockeru, jak je znázorněno na obrázku 5-2.</span><span class="sxs-lookup"><span data-stu-id="0bf36-129">The commit will cause Azure DevOps Services to run a build job within a Docker container and, upon successful completion of that job, push a Docker image to the Docker Registry, as illustrated in Figure 5-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="0bf36-130">Obrázek 5 – 2: potřebnými kroky k CI</span><span class="sxs-lookup"><span data-stu-id="0bf36-130">Figure 5-2: The steps involved in CI</span></span>

<span data-ttu-id="0bf36-131">Tady jsou základní kroky pracovního postupu CI s využitím Dockeru a Azure DevOps služby:</span><span class="sxs-lookup"><span data-stu-id="0bf36-131">Here are the basic CI workflow steps with Docker and Azure DevOps Services:</span></span>

1.  <span data-ttu-id="0bf36-132">Vývojář nasdílí potvrzení změn do úložiště SCC (Git/Azure DevOps Services, Githubu, atd.).</span><span class="sxs-lookup"><span data-stu-id="0bf36-132">The developer pushes a commit to an SCC repository (Git/Azure DevOps Services, GitHub, etc.).</span></span>

2.  <span data-ttu-id="0bf36-133">Pokud používáte Azure DevOps Services nebo Git, CI je součástí, což znamená, že je stejně jednoduché jako zaškrtnutím políčka ve službách Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="0bf36-133">If you're using Azure DevOps Services or Git, CI is built in, which means that it is as simple as selecting a check box in Azure DevOps Services.</span></span> <span data-ttu-id="0bf36-134">Pokud používáte externí SCC (např. GitHub) *webhooku* budou upozornění služby Azure DevOps aktualizace nebo push pro Git/GitHub.</span><span class="sxs-lookup"><span data-stu-id="0bf36-134">If you're using an external SCC (like GitHub), a *webhook* will notify Azure DevOps Services of the update or push to Git/GitHub.</span></span>

3.  <span data-ttu-id="0bf36-135">Služby Azure DevOps si vyžádá SCC úložiště, včetně souboru DockerFile popisující bitovou kopii, jakož i kód aplikace a testů.</span><span class="sxs-lookup"><span data-stu-id="0bf36-135">Azure DevOps Services pulls the SCC repository, including the DockerFile describing the image as well as the application and test code.</span></span>

4.  <span data-ttu-id="0bf36-136">Služby Azure DevOps vytvoří image Dockeru a označí ji číslem sestavení.</span><span class="sxs-lookup"><span data-stu-id="0bf36-136">Azure DevOps Services builds a Docker image and labels it with a build number.</span></span>

5.  <span data-ttu-id="0bf36-137">Služby Azure DevOps vytvoří instanci kontejneru Dockeru v rámci zřízené hostitele Docker a spouští příslušné testy.</span><span class="sxs-lookup"><span data-stu-id="0bf36-137">Azure DevOps Services instantiates the Docker container within the provisioned Docker Host, and runs the appropriate tests.</span></span>

6.  <span data-ttu-id="0bf36-138">Pokud jsou testy úspěšné, image je nejprve relabeled na smysluplný název, abyste věděli, je "blessed sestavení" (například "/ 1.0.0" nebo libovolný popisek) a pak nahrány do registru Dockeru (Docker Hub, Azure Container Registry, DTR atd.)</span><span class="sxs-lookup"><span data-stu-id="0bf36-138">If the tests are successful, the image is first relabeled to a meaningful name so that you know it is a "blessed build" (like "/1.0.0" or any other label), and then pushed up to your Docker Registry (Docker Hub, Azure Container Registry, DTR, etc.)</span></span>

### <a name="implementing-the-ci-pipeline-with-azure-devops-services-and-the-docker-extension-for-azure-devops-services"></a><span data-ttu-id="0bf36-139">Implementace kanálu CI pomocí služby Azure DevOps a rozšíření Dockeru pro Azure DevOps služby</span><span class="sxs-lookup"><span data-stu-id="0bf36-139">Implementing the CI pipeline with Azure DevOps Services and the Docker extension for Azure DevOps Services</span></span>

<span data-ttu-id="0bf36-140">[Rozšíření Azure DevOps služby Docker](https://aka.ms/vstsdockerextension) přidá úkol do vašeho kanálu CI, se kterým můžete sestavit Image Dockeru, nasdílení změn imagí Dockeru do ověřeného registru Dockeru, spuštění imagí Dockeru nebo spustit další operace, které nabízí Dockeru ROZHRANÍ PŘÍKAZOVÉHO ŘÁDKU.</span><span class="sxs-lookup"><span data-stu-id="0bf36-140">The [Azure DevOps Services Docker extension](https://aka.ms/vstsdockerextension) adds a task to your CI pipeline with which you can build Docker images, push Docker images to an authenticated Docker registry, run Docker images, or run other operations offered by the Docker CLI.</span></span> <span data-ttu-id="0bf36-141">Také přidá úkol Docker Compose, který můžete použít k sestavení, nasdílet a spusťte vícekontejnerových aplikací Dockeru nebo spuštění jiné operace, které rozhraní Docker Compose příkazového řádku, jak je znázorněno v obrázek 5-3.</span><span class="sxs-lookup"><span data-stu-id="0bf36-141">It also adds a Docker Compose task that you can use to build, push, and run multicontainer Docker applications, or run other operations offered by the Docker Compose CLI, as shown in Figure 5-3.</span></span>

![](./media/image3.png)

<span data-ttu-id="0bf36-142">Obrázek 5-3: kanálu Docker CI v Azure DevOps služby</span><span class="sxs-lookup"><span data-stu-id="0bf36-142">Figure 5-3: The Docker CI pipeline in Azure DevOps Services</span></span>

<span data-ttu-id="0bf36-143">Rozšíření Docker můžete použít koncové body služby pro hostitele Dockeru a kontejnerů nebo registry imagí.</span><span class="sxs-lookup"><span data-stu-id="0bf36-143">The Docker extension can use service endpoints for Docker hosts and for container or image registries.</span></span> <span data-ttu-id="0bf36-144">Výchozí úkoly pomocí místního hostitele Docker, pokud je k dispozici (to aktuálně vyžaduje vlastní agenta služby Azure DevOps); v opačném případě vyžadují zadání připojení hostitele Dockeru.</span><span class="sxs-lookup"><span data-stu-id="0bf36-144">The tasks default to using a local Docker host if available (this currently requires a custom Azure DevOps Services agent); otherwise, they require that you provide a Docker host connection.</span></span> <span data-ttu-id="0bf36-145">Akce, které jsou závislé na ověřuje pomocí registru Dockeru, jako je například nahráním image, vyžadují, abyste zadali Docker připojení k registru.</span><span class="sxs-lookup"><span data-stu-id="0bf36-145">Actions that depend on being authenticated with a Docker registry, such as pushing an image, require that you provide a Docker registry connection.</span></span>

<span data-ttu-id="0bf36-146">Rozšíření Azure DevOps služby Docker nainstaluje následující součásti ve vašem účtu služby Azure DevOps:</span><span class="sxs-lookup"><span data-stu-id="0bf36-146">The Azure DevOps Services Docker extension installs the following components in your Azure DevOps Services account:</span></span>

-   <span data-ttu-id="0bf36-147">Koncový bod služby pro připojení k registru Dockeru</span><span class="sxs-lookup"><span data-stu-id="0bf36-147">A service endpoint for connecting to a Docker registry</span></span>

-   <span data-ttu-id="0bf36-148">Koncový bod služby pro připojení k hostiteli kontejneru Dockeru</span><span class="sxs-lookup"><span data-stu-id="0bf36-148">A service endpoint for connecting to a Docker Container Host</span></span>

-   <span data-ttu-id="0bf36-149">Docker úkolů můžete provádět následující:</span><span class="sxs-lookup"><span data-stu-id="0bf36-149">A Docker task to do the following:</span></span>

-   <span data-ttu-id="0bf36-150">Sestavte image</span><span class="sxs-lookup"><span data-stu-id="0bf36-150">Build an image</span></span>

-   <span data-ttu-id="0bf36-151">Nahrání image nebo úložiště do registru</span><span class="sxs-lookup"><span data-stu-id="0bf36-151">Push an image or a repository to a registry</span></span>

-   <span data-ttu-id="0bf36-152">Spuštění image v kontejneru</span><span class="sxs-lookup"><span data-stu-id="0bf36-152">Run an image in a container</span></span>

-   <span data-ttu-id="0bf36-153">Spuštění příkazu Dockeru</span><span class="sxs-lookup"><span data-stu-id="0bf36-153">Run a Docker command</span></span>

-   <span data-ttu-id="0bf36-154">Docker Compose úlohy ke spuštění příkazu Docker Compose</span><span class="sxs-lookup"><span data-stu-id="0bf36-154">A Docker Compose task to run a Docker Compose command</span></span>

<span data-ttu-id="0bf36-155">S těmito úlohami Azure DevOps služby sestavení linuxového Dockeru hostitelů/virtuálních počítačů zřízené v Azure a upřednostňované registru Dockeru (Azure Container Registry, Docker Hubu, privátní DTR Dockeru nebo jiných registru Dockeru) můžete sestavit v kanálu Docker CI velmi konzistentní způsob.</span><span class="sxs-lookup"><span data-stu-id="0bf36-155">With these Azure DevOps Services tasks, a build Linux-Docker Host/VM provisioned in Azure and your preferred Docker registry (Azure Container Registry, Docker Hub, private Docker DTR, or any other Docker registry) you can assemble your Docker CI pipeline in a very consistent way.</span></span>

<span data-ttu-id="0bf36-156">***Požadavky:***</span><span class="sxs-lookup"><span data-stu-id="0bf36-156">***Requirements:***</span></span>

-   <span data-ttu-id="0bf36-157">Služby Azure DevOps, nebo na místní instalace Team Foundation Server 2015 Update 3 nebo novější.</span><span class="sxs-lookup"><span data-stu-id="0bf36-157">Azure DevOps Services, or for on-premises installations, Team Foundation Server 2015 Update 3 or later.</span></span>

-   <span data-ttu-id="0bf36-158">Azure DevOps služby agenta, který obsahuje binární soubory Docker.</span><span class="sxs-lookup"><span data-stu-id="0bf36-158">An Azure DevOps Services agent that has the Docker binaries.</span></span>

<span data-ttu-id="0bf36-159">Snadný způsob, jak vytvořit jeden z nich se má používat Docker ke spuštění kontejneru na základě image Dockeru agenta služby Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="0bf36-159">An easy way to create one of these is to use Docker to run a container based on the Azure DevOps Services agent Docker image.</span></span>

<span data-ttu-id="0bf36-160">**Další informace o** číst informace o sestavení CI Azure DevOps služby Docker kanálu a návody, naleznete na následujících stránkách:</span><span class="sxs-lookup"><span data-stu-id="0bf36-160">**More info** To read more about assembling a Azure DevOps Services Docker CI pipeline and to view walkthroughs, visit the following sites:</span></span>

<span data-ttu-id="0bf36-161">Spuštění agenta služby Azure DevOps jako kontejneru Docker: [ https://hub.docker.com/r/\ microsoft/vsts-agent /](https://hub.docker.com/r/microsoft/vsts-agent/)</span><span class="sxs-lookup"><span data-stu-id="0bf36-161">Running an Azure DevOps Services agent as a Docker container: [https://hub.docker.com/r/\ microsoft/vsts-agent/](https://hub.docker.com/r/microsoft/vsts-agent/)</span></span>

<span data-ttu-id="0bf36-162">Rozšíření Azure Docker DevOps služby: <https://aka.ms/vstsdockerextension></span><span class="sxs-lookup"><span data-stu-id="0bf36-162">Azure DevOps Services Docker extension: <https://aka.ms/vstsdockerextension></span></span>

<span data-ttu-id="0bf36-163">Vytváření imagí Dockeru Linux .NET Core se službami Azure DevOps: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span><span class="sxs-lookup"><span data-stu-id="0bf36-163">Building .NET Core Linux Docker images with Azure DevOps Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span></span>

<span data-ttu-id="0bf36-164">Vytváření sestavení počítače založené na Linuxu Visual Studio Team Service s podporou Dockeru: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span><span class="sxs-lookup"><span data-stu-id="0bf36-164">Building a Linux-based Visual Studio Team Service build machine with Docker support: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span></span>

### <a name="integrate-test-and-validate-multicontainer-docker-applications"></a><span data-ttu-id="0bf36-165">Integrovat, otestovat a ověřit vícekontejnerových aplikací Dockeru</span><span class="sxs-lookup"><span data-stu-id="0bf36-165">Integrate, test, and validate multicontainer Docker applications</span></span>

<span data-ttu-id="0bf36-166">Většina aplikací Dockeru se obvykle skládají z víc kontejnerů než jednoho kontejneru.</span><span class="sxs-lookup"><span data-stu-id="0bf36-166">Typically, most Docker applications are composed of multiple containers rather than a single container.</span></span> <span data-ttu-id="0bf36-167">Dobrým příkladem je aplikace orientované na mikroslužby pro kterou byste měli jeden kontejner na mikroslužbách.</span><span class="sxs-lookup"><span data-stu-id="0bf36-167">A good example is a microservices-oriented application for which you would have one container per microservice.</span></span> <span data-ttu-id="0bf36-168">Ale i bez striktního vzory přístupu mikroslužeb, je velmi pravděpodobné, že vaši aplikaci v Dockeru by obsahovat více kontejnerů a služeb.</span><span class="sxs-lookup"><span data-stu-id="0bf36-168">But, even without strictly following the microservices approach patterns, it is very probable that your Docker application would be composed of multiple containers or services.</span></span>

<span data-ttu-id="0bf36-169">Proto po vytvoření aplikace kontejnerů v kanálu CI, budete potřebovat k nasazení, integrovat a otestujte aplikaci jako celek se všemi jeho kontejnery v rámci hostitele služby integrace Dockeru nebo dokonce do testovací cluster, ke kterému jsou kontejnery distribuovat.</span><span class="sxs-lookup"><span data-stu-id="0bf36-169">Therefore, after building the application containers in the CI pipeline, you also need to deploy, integrate, and test the application as a whole with all of its containers within an integration Docker host or even into a test cluster to which your containers are distributed.</span></span>

<span data-ttu-id="0bf36-170">Pokud při použití jednoho hostitele, můžete použít příkazy Dockeru, jako je docker-compose pro sestavování a nasazování kontejnerů související k testování a validaci prostředí Docker v jednom virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="0bf36-170">If you're using a single host, you can use Docker commands such as docker-compose to build and deploy related containers to test and validate the Docker environment in a single VM.</span></span> <span data-ttu-id="0bf36-171">Ale při práci s clusterem orchestrator jako DC/OS, Kubernetes a Docker Swarm, budete muset nasadit prostřednictvím orchestrator, v závislosti na vybrané cluster a Plánovač a jiný mechanismus kontejnery.</span><span class="sxs-lookup"><span data-stu-id="0bf36-171">But, if you are working with an orchestrator cluster like DC/OS, Kubernetes, or Docker Swarm, you need to deploy your containers through a different mechanism or orchestrator, depending on your selected cluster/scheduler.</span></span>

<span data-ttu-id="0bf36-172">Následuje několik typů testů, které lze spustit pro kontejnery Dockeru:</span><span class="sxs-lookup"><span data-stu-id="0bf36-172">Following are several types of tests that you can run against Docker containers:</span></span>

-   <span data-ttu-id="0bf36-173">Testy jednotek pro kontejnery Dockeru</span><span class="sxs-lookup"><span data-stu-id="0bf36-173">Unit tests for Docker containers</span></span>

-   <span data-ttu-id="0bf36-174">Testování skupin vzájemně propojené aplikace nebo mikroslužeb</span><span class="sxs-lookup"><span data-stu-id="0bf36-174">Testing groups of interrelated applications or microservices</span></span>

-   <span data-ttu-id="0bf36-175">Testování v produkčním prostředí a "Kanárské" verze</span><span class="sxs-lookup"><span data-stu-id="0bf36-175">Test in production and "canary" releases</span></span>

<span data-ttu-id="0bf36-176">Důležité je, že při spuštění integrace a funkční testy, musíte spustit tyto testy z mimo kontejnery.</span><span class="sxs-lookup"><span data-stu-id="0bf36-176">The important point is that when running integration and functional tests, you must run those tests from outside of the containers.</span></span> <span data-ttu-id="0bf36-177">Testy nesmí být definována a spuštěna v rámci kontejnerů, které nasazujete, protože kontejnery jsou založeny na statické obrázky, které by měly být úplně stejně jako ty, které budete nasazovat do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="0bf36-177">Tests must not be defined and run within the containers that you are deploying, because the containers are based on static images that should be exactly like those that you will be deploying into production.</span></span>

<span data-ttu-id="0bf36-178">Je velmi vhodná možnost při testování pokročilejší scénáře, jako je testování (test clusteru, pracovní clusteru a clusteru pro produkční prostředí) několik clusterů k publikování Image do registru k testování v různých clusterech.</span><span class="sxs-lookup"><span data-stu-id="0bf36-178">A very feasible option when testing more advanced scenarios like testing several clusters (test cluster, staging cluster, and production cluster) is to publish the images to a registry to test in various clusters.</span></span>

### <a name="push-the-custom-application-docker-image-into-your-global-docker-registry"></a><span data-ttu-id="0bf36-179">Odeslání image Dockeru vlastní aplikace na globální registru Dockeru</span><span class="sxs-lookup"><span data-stu-id="0bf36-179">Push the custom application Docker image into your global Docker Registry</span></span>

<span data-ttu-id="0bf36-180">Po imagí Dockeru otestovali a ověřili, budete chtít označit a publikovat je do registru Dockeru.</span><span class="sxs-lookup"><span data-stu-id="0bf36-180">After the Docker images have been tested and validated, you'll want to tag and publish them to your Docker registry.</span></span> <span data-ttu-id="0bf36-181">Registr Dockeru je důležité část v životním cyklu aplikace Dockeru, protože je centrální místo, kam ukládat vaše vlastní test (označuje se také jako "blessed Image") má být nasazen do dotazů a odpovědí a produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="0bf36-181">The Docker registry is a critical piece in the Docker application life cycle because it is the central place where you store your custom test (aka "blessed images") to be deployed into QA and production environments.</span></span>

<span data-ttu-id="0bf36-182">Podobně jako na to, jak kód aplikace, které jsou uložené v úložišti SCC (Git atd.) je "zdrojem pravdivých informací", "zdroji pravdivých informací" pro binární aplikace nebo služba bits k nasazení do prostředí QA nebo produkčním prostředí je registru Dockeru.</span><span class="sxs-lookup"><span data-stu-id="0bf36-182">Similar to how the application code stored in your SCC repository (Git, etc.) is your "source of truth," the Docker registry is your "source of truth" for your binary application or bits to be deployed to the QA or production environments.</span></span>

<span data-ttu-id="0bf36-183">Obvykle můžete chtít mít privátní úložiště pro vaše vlastní Image do soukromého úložiště ve službě Azure Container Registry nebo v místním registru, jako je Docker Trusted Registry nebo veřejný cloud registru s omezeným přístupem (např. Docker Hubu), i když v tomto posledním případě, pokud není váš kód jako software open source musí důvěřovat zabezpečení od příslušného dodavatele.</span><span class="sxs-lookup"><span data-stu-id="0bf36-183">Typically, you might want to have your private repositories for your custom images either in a private repository in Azure Container Registry or in an on-premises registry like Docker Trusted Registry, or in a public-cloud registry with restricted access (like Docker Hub), although in this last case if your code is not open source, you must trust the vendor's security.</span></span> <span data-ttu-id="0bf36-184">V obou případech metodu, pomocí kterého lze provést je hodně podobné a nakonec podle v příkazu push docker znázorněný v obrázku 5 až 4.</span><span class="sxs-lookup"><span data-stu-id="0bf36-184">Either way, the method by which you do this is pretty similar and ultimately based on the docker push command, as depicted in Figure 5-4.</span></span>

![](./media/image4.png)

<span data-ttu-id="0bf36-185">Obrázek 5 – 4: publikování vlastní Image do registru Dockeru</span><span class="sxs-lookup"><span data-stu-id="0bf36-185">Figure 5-4: Publishing custom images to Docker Registry</span></span>

<span data-ttu-id="0bf36-186">Existuje několik nabídek registry Dockeru z cloudových vendorů, jako je Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, molo registru a tak dále.</span><span class="sxs-lookup"><span data-stu-id="0bf36-186">There are multiple offerings of Docker registries from cloud vendors like Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry, and so on.</span></span>

<span data-ttu-id="0bf36-187">Použití rozšíření Azure DevOps služby Docker, můžete nabízet sadu imagí služby určené soubor docker-compose.yml s více značek do ověřeného registru Dockeru (jako je Azure Container Registry), jak je znázorněno v obrázek 5 – 5.</span><span class="sxs-lookup"><span data-stu-id="0bf36-187">Using the Azure DevOps Services Docker extension, you can push a set of service images defined by a docker-compose.yml file, with multiple tags, to an authenticated Docker registry (like Azure Container Registry), as shown in Figure 5-5.</span></span>

![](./media/image5.png)

<span data-ttu-id="0bf36-188">Obrázek 5 – 5: publikování vlastní Image do registru Dockeru pomocí služby Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="0bf36-188">Figure 5-5: Using Azure DevOps Services to publishing custom images to a Docker Registry</span></span>

<span data-ttu-id="0bf36-189">**Další informace o** Další informace o rozšíření Dockeru pro Azure DevOps služby, přejděte na <https://aka.ms/vstsdockerextension>.</span><span class="sxs-lookup"><span data-stu-id="0bf36-189">**More info** To read more about the Docker extension for Azure DevOps Services, go to <https://aka.ms/vstsdockerextension>.</span></span> <span data-ttu-id="0bf36-190">Další informace o službě Azure Container Registry, pokračujte <https://aka.ms/azurecontainerregistry>.</span><span class="sxs-lookup"><span data-stu-id="0bf36-190">To learn more about Azure Container Registry, go to <https://aka.ms/azurecontainerregistry>.</span></span>

## <a name="step-4-cd-deploy"></a><span data-ttu-id="0bf36-191">Krok 4: CD nasazení</span><span class="sxs-lookup"><span data-stu-id="0bf36-191">Step 4: CD, Deploy</span></span>

<span data-ttu-id="0bf36-192">Neměnnost imagí Dockeru zajišťuje opakovatelné nasazování s co vyvíjel, testovat pomocí položek konfigurace a spusťte v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="0bf36-192">The immutability of Docker images ensures a repeatable deployment with what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="0bf36-193">Až budete mít Image Dockeru aplikace publikované v registru Dockeru (privátní nebo veřejné), můžete je nasadit do několika prostředí, které bude pravděpodobně (výroba, kontrola kvality, Fázování importu, atd.) z kanálu průběžného Doručování s využitím služby Azure DevOps úlohy kanálu nebo Azure DevOps služby Release Management.</span><span class="sxs-lookup"><span data-stu-id="0bf36-193">After you have the application Docker images published in your Docker registry (either private or public), you can deploy them to the several environments that you might have (production, QA, staging, etc.) from your CD pipeline by using Azure DevOps Services pipeline tasks or Azure DevOps Services Release Management.</span></span>

<span data-ttu-id="0bf36-194">Ale v tuto chvíli to závisí na druhu aplikaci v Dockeru, kterou nasazujete.</span><span class="sxs-lookup"><span data-stu-id="0bf36-194">However, at this point it depends on what kind of Docker application you are deploying.</span></span> <span data-ttu-id="0bf36-195">Nasazení jednoduché aplikace (ze sestavení a nasazení hlediska) stejně jako monolitické aplikace zahrnující několik kontejnerů nebo služeb a nasazené na několika serverech nebo virtuálních počítačů se velmi liší od složitější aplikaci, jako je nasazení aplikace orientované na mikroslužby s mnoha funkcemi.</span><span class="sxs-lookup"><span data-stu-id="0bf36-195">Deploying a simple application (from a composition and deployment point of view) like a monolithic application comprising a few containers or services and deployed to a few servers or VMs is very different from deploying a more complex application like a microservices-oriented application with hyperscale capabilities.</span></span> <span data-ttu-id="0bf36-196">Tyto dva scénáře jsou vysvětlené v následujících částech.</span><span class="sxs-lookup"><span data-stu-id="0bf36-196">These two scenarios are explained in the following sections.</span></span>

### <a name="deploying-composed-docker-applications-to-multiple-docker-environments"></a><span data-ttu-id="0bf36-197">Nasazení skládá aplikací Dockeru do různých prostředí Dockeru</span><span class="sxs-lookup"><span data-stu-id="0bf36-197">Deploying composed Docker applications to multiple Docker environments</span></span>

<span data-ttu-id="0bf36-198">Podívejme se nejprve sledovat bez komplexní scénář: nasazení do jednoduchého hostitelů Docker (virtuální počítače nebo servery) v prostředí jeden nebo více prostředí (dotazů a odpovědí, přípravným a produkčním prostředím).</span><span class="sxs-lookup"><span data-stu-id="0bf36-198">Let's look first at the less-complex scenario: deploying to simple Docker hosts (VMs or servers) in a single environment or multiple environments (QA, staging, and production).</span></span> <span data-ttu-id="0bf36-199">V tomto scénáři interně kanálu průběžného Doručování můžete použít docker-compose (z vaší úlohy nasazení služby Azure DevOps) při nasazování aplikací Dockeru s jeho související sadu kontejnerů a služeb, jak je znázorněno na obrázku 5 a 6.</span><span class="sxs-lookup"><span data-stu-id="0bf36-199">In this scenario, internally your CD pipeline can use docker-compose (from your Azure DevOps Services deployment tasks) to deploy the Docker applications with its related set of containers or services, as illustrated in Figure 5-6.</span></span>

![](./media/image6.png)

<span data-ttu-id="0bf36-200">Obrázek 5 a 6: nasazení kontejnerů aplikací jednoduché registru prostředí hostitele Docker</span><span class="sxs-lookup"><span data-stu-id="0bf36-200">Figure 5-6: Deploying application containers to simple Docker host environments registry</span></span>

<span data-ttu-id="0bf36-201">Obrázek 5 – 7 ukazuje, jak připojit vaše sestavení CI pro kontrolu kvality a testovacích prostředí pomocí služby Azure DevOps kliknutím Docker Compose v dialogovém okně Přidat úkol.</span><span class="sxs-lookup"><span data-stu-id="0bf36-201">Figure 5-7 highlights how you can connect your build CI to QA/test environments via Azure DevOps Services by clicking Docker Compose in the Add Task dialog box.</span></span> <span data-ttu-id="0bf36-202">Ale při nasazení v přípravném nebo produkčním prostředí, obvykle použijete funkcím nástroje Release Management zpracování více prostředí (procesu kontroly kvality, jako jsou přípravným a produkčním prostředím).</span><span class="sxs-lookup"><span data-stu-id="0bf36-202">However, when deploying to staging or production environments, you would usually use Release Management features handling multiple environments (like QA, staging, and production).</span></span> <span data-ttu-id="0bf36-203">Pokud nasazujete na jednoho hostitele Docker, je pomocí služby Azure DevOps "Docker Compose" úloh (což je vyvolání docker-compose up příkaz pod pokličkou).</span><span class="sxs-lookup"><span data-stu-id="0bf36-203">If you're deploying to single Docker hosts, it is using the Azure DevOps Services "Docker Compose" task (which is invoking the docker-compose up command under the hood).</span></span> <span data-ttu-id="0bf36-204">Pokud nasazení provádíte do služby Azure Container Service, používá úlohy nasazení prostředí Docker, jak je vysvětleno v následující části.</span><span class="sxs-lookup"><span data-stu-id="0bf36-204">If you're deploying to Azure Container Service, it uses the Docker Deployment task, as explained in the section that follows.</span></span>

![](./media/image7.png)

<span data-ttu-id="0bf36-205">Obrázek 5 – 7: Přidání úkolu Docker Compose v kanálu služby Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="0bf36-205">Figure 5-7: Adding a Docker Compose task in a Azure DevOps Services pipeline</span></span>

<span data-ttu-id="0bf36-206">Při vytváření vydané verze ve službě Azure DevOps Services trvá sadu vstupní artefakty.</span><span class="sxs-lookup"><span data-stu-id="0bf36-206">When you create a release in Azure DevOps Services, it takes a set of input artifacts.</span></span> <span data-ttu-id="0bf36-207">Ty by měla být neměnný po celou dobu vydání napříč několika prostředími.</span><span class="sxs-lookup"><span data-stu-id="0bf36-207">These are intended to be immutable throughout the lifetime of the release across multiple environments.</span></span> <span data-ttu-id="0bf36-208">Když zavádíte kontejnery, vstupní artefakty zjistit imagí v registru pro nasazení.</span><span class="sxs-lookup"><span data-stu-id="0bf36-208">When you introduce containers, the input artifacts identify images in a registry to deploy.</span></span> <span data-ttu-id="0bf36-209">V závislosti na tom, jak tyto identifikovat není zaručeno nebudou po dobu, vydání, se při odkazování na "myimage:latest" ze souboru docker-compose nejobvyklejší je případ.</span><span class="sxs-lookup"><span data-stu-id="0bf36-209">Depending on how these are identified, they are not guaranteed to remain the same throughout the duration of the release, the most obvious case being when you reference "myimage:latest" from a docker-compose file.</span></span>

<span data-ttu-id="0bf36-210">Rozšíření Dockeru pro Azure DevOps služby vám, které hodnoty Digest generovat artefaktů sestavení, které obsahují konkrétní registru image, která se zaručeně k jednoznačné identifikaci binární stejnou bitovou kopii.</span><span class="sxs-lookup"><span data-stu-id="0bf36-210">The Docker extension for Azure DevOps Services gives you the ability to generate build artifacts that contain specific registry image digests that are guaranteed to uniquely identify the same image binary.</span></span> <span data-ttu-id="0bf36-211">Jedná se o co skutečně chcete použít jako vstup pro vydanou verzi.</span><span class="sxs-lookup"><span data-stu-id="0bf36-211">These are what you really want to use as input to a release.</span></span>

### <a name="managing-releases-to-docker-environments-by-using-azure-devops-services-release-management"></a><span data-ttu-id="0bf36-212">Správa vydaných verzí do prostředí Dockeru pomocí Azure DevOps služby Release Management</span><span class="sxs-lookup"><span data-stu-id="0bf36-212">Managing releases to Docker environments by using Azure DevOps Services Release Management</span></span>

<span data-ttu-id="0bf36-213">Prostřednictvím rozšíření Azure DevOps služby můžete vytvořit novou bitovou kopii, její publikování do registru Dockeru, spustit na hostitelích se systémem Linux nebo Windows a použít příkazech, jako je docker-compose pro nasazení několika kontejnerů jako celé aplikace, to vše prostřednictvím Azure DevOps Služby určené pro více prostředí, možnosti správy vydaných verzí, jak je znázorněno v obrázek 5 až 8.</span><span class="sxs-lookup"><span data-stu-id="0bf36-213">Through the Azure DevOps Services extensions, you can build a new image, publish it to a Docker registry, run it on Linux or Windows hosts, and use commands such as docker-compose to deploy multiple containers as an entire application, all through the Azure DevOps Services Release Management capabilities intended for multiple environments, as shown in Figure 5-8.</span></span>

![](./media/image8.png)

<span data-ttu-id="0bf36-214">Obrázek 5 – 8: Konfigurace úloh Azure DevOps služby Docker Compose v Azure DevOps služby Release Management</span><span class="sxs-lookup"><span data-stu-id="0bf36-214">Figure 5-8: Configuring Azure DevOps Services Docker Compose tasks from Azure DevOps Services Release Management</span></span>

<span data-ttu-id="0bf36-215">Však mít na paměti, že scénáře uvedené v obrázek 5 a 6 a implementovat v obrázek 5 až 8 je poměrně základní (je nasazování jednoduchý hostitelů Docker a virtuálním počítačům a bude možné jedním kontejnerem nebo instance pro každý obrázek) a pravděpodobně by měla sloužit pouze pro vývoj nebo testování sc enarios.</span><span class="sxs-lookup"><span data-stu-id="0bf36-215">However, keep in mind that the scenario shown in Figure 5-6 and implemented in Figure 5-8 is pretty basic (it is deploying to simple Docker hosts and VMs, and there will be a single container or instance per image) and probably should be used only for development or test scenarios.</span></span> <span data-ttu-id="0bf36-216">Ve většině scénářů organizace produkčního prostředí, byste měli mít vysokou dostupnost (HA) a snadno spravovat škálovatelnosti pomocí služby Vyrovnávání zatížení napříč více uzly, servery a virtuální počítače navíc "inteligentní převzetí služeb při selhání" tak, pokud server nebo uzel selže, jejích služeb a kontejnery se přesune do jiné hostitelský server nebo virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="0bf36-216">In most enterprise production scenarios, you would want to have High Availability (HA) and easy-to-manage scalability by load balancing across multiple nodes, servers, and VMs, plus "intelligent failovers" so that if a server or node fails, its services and containers will be moved to another host server or VM.</span></span> <span data-ttu-id="0bf36-217">V takovém případě potřebujete pokročilé technologie, jako jsou clustery kontejnerů a orchestrátorů, plánovače.</span><span class="sxs-lookup"><span data-stu-id="0bf36-217">In that case, you need more advanced technologies like container clusters, orchestrators, and schedulers.</span></span> <span data-ttu-id="0bf36-218">Proto je způsob, jak nasadit do těchto clusterů přesně prostřednictvím pokročilých scénářů je vysvětleno v další části.</span><span class="sxs-lookup"><span data-stu-id="0bf36-218">Thus, the way to deploy to those clusters is precisely through the advanced scenarios explained in the next section.</span></span>

### <a name="deploying-complex-docker-applications-to-docker-clusters-dcos-kubernetes-and-docker-swarm"></a><span data-ttu-id="0bf36-219">Nasazení složitých aplikací Dockeru do Docker clusterů (DC/OS, Kubernetes a Docker Swarm)</span><span class="sxs-lookup"><span data-stu-id="0bf36-219">Deploying complex Docker applications to Docker clusters (DC/OS, Kubernetes, and Docker Swarm)</span></span>

<span data-ttu-id="0bf36-220">Povaze distribuovaných aplikací vyžaduje výpočetní prostředky, které se taky distribuují.</span><span class="sxs-lookup"><span data-stu-id="0bf36-220">The nature of distributed applications requires compute resources that are also distributed.</span></span> <span data-ttu-id="0bf36-221">Pokud chcete, aby funkce produkčním měřítku, musíte mít clusteringu, které poskytují vysokou škálovatelnost a vysokou DOSTUPNOSTÍ na základě ve fondu prostředků.</span><span class="sxs-lookup"><span data-stu-id="0bf36-221">To have production-scale capabilities, you need to have clustering capabilities that provide high scalability and HA based on pooled resources.</span></span>

<span data-ttu-id="0bf36-222">Můžete nasadit kontejnery ručně do těchto clusterů z rozhraní příkazového řádku nástroje, jako je Docker Swarm (například [vytvoření služby docker](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) nebo webovým uživatelským rozhraním, jako [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) pro DC/OS clustery, ale měli Rezervujte, který pouze pro včasnou nasazení testování nebo pro účely správy, jako je škálování na více instancí nebo účely monitorování.</span><span class="sxs-lookup"><span data-stu-id="0bf36-222">You could deploy containers manually to those clusters from a CLI tool such as Docker Swarm (like using [docker service create](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) or a web UI such as [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) for DC/OS clusters, but you should reserve that only for punctual deployment testing or for management purposes like scaling-out or monitoring purposes.</span></span>

<span data-ttu-id="0bf36-223">Z hlediska CD a služeb Azure DevOps konkrétně, můžete spustit úlohy speciálně provedl nasazení z prostředí Azure DevOps služby Release Management, které se nasazují kontejnerizovaných aplikací do distribuované clusterů v kontejneru Služby, jak je znázorněno na obrázku 5 až 9.</span><span class="sxs-lookup"><span data-stu-id="0bf36-223">From a CD point of view, and Azure DevOps Services specifically, you can run specially made deployment tasks from your Azure DevOps Services Release Management environments which will deploy your containerized applications to distributed clusters in Container Service, as illustrated in Figure 5-9.</span></span>

![](./media/image9.png)

<span data-ttu-id="0bf36-224">Obrázek 5 až 9: nasazení distribuované aplikace do služby Container Service</span><span class="sxs-lookup"><span data-stu-id="0bf36-224">Figure 5-9: Deploying distributed applications to Container Service</span></span>

<span data-ttu-id="0bf36-225">Na začátku při nasazování do některých clusterů nebo orchestrátorů, obvykle použijete mechanismy jednotlivých orchestrátorů (to znamená, Mesosphere DC/OS nebo Kubernetes, mějte připravené mechanismy jiné nasazení než Docker a Docker a skriptů pro konkrétní nasazení Swarm) namísto jednodušší a snadným ovládáním docker-compose nástroj na základě definice souboru docker-compose.yml.</span><span class="sxs-lookup"><span data-stu-id="0bf36-225">Initially, when deploying to certain clusters or orchestrators, you would traditionally use specific deployment scripts and mechanisms per each orchestrator (that is, Mesosphere DC/OS or Kubernetes have different deployment mechanisms than Docker and Docker Swarm) instead of the simpler and easy-to-use docker-compose tool based on the docker-compose.yml definition file.</span></span> <span data-ttu-id="0bf36-226">Ale díky Microsoft Azure DevOps služby Docker nasazení úloh zobrazí obrázek 5 až 10 nyní také můžete nasadit na DC/OS pouze pomocí souboru docker-compose.yml zkušenosti, protože Microsoft za vás provádí tento "překlad" (z vašeho soubor docker-compose.yml do jiných formátů vyžadované DC/OS).</span><span class="sxs-lookup"><span data-stu-id="0bf36-226">However, thanks to the Microsoft Azure DevOps Services Docker Deploy task, shown in Figure 5-10, you now also can deploy to DC/OS by just using your familiar docker-compose.yml file because Microsoft performs that "translation" for you (from your docker-compose.yml file to other formats needed by DC/OS).</span></span>

![](./media/image10.png)

<span data-ttu-id="0bf36-227">Obrázek 5 – 10: přidání úlohy nasazení Dockeru na váš správce prostředků prostředí</span><span class="sxs-lookup"><span data-stu-id="0bf36-227">Figure 5-10: Adding the Docker Deploy task to your Environment RM</span></span>

<span data-ttu-id="0bf36-228">Obrázek 5 – 11 předvádí, jak můžete upravit úkol nasadit Docker a zadat typ cíle (Azure Container Service DC/OS, v tomto případě), váš soubor Docker Compose a připojení k registru Dockeru (jako je Azure Container Registry nebo Docker Hubu).</span><span class="sxs-lookup"><span data-stu-id="0bf36-228">Figure 5-11 demonstrates how you can edit the Docker Deploy task and specify the Target Type (Azure Container Service DC/OS, in this case), your Docker Compose File, and the Docker Registry connection (like Azure Container Registry or Docker Hub).</span></span> <span data-ttu-id="0bf36-229">Je to, kde úloha načte připravené k použití imagí vlastní Dockeru umožňující nasadit ho jako kontejnery v clusteru DC/OS.</span><span class="sxs-lookup"><span data-stu-id="0bf36-229">This is where the task will retrieve your ready-to-use custom Docker images to be deployed as containers in the DC/OS cluster.</span></span>

![](./media/image11.png)

<span data-ttu-id="0bf36-230">Obrázek 5 – 11: Docker nasazení úloh definici nasazení Azure Container Service DC/OS</span><span class="sxs-lookup"><span data-stu-id="0bf36-230">Figure 5-11: Docker Deploy task definition deploying to Azure Container Service DC/OS</span></span>

<span data-ttu-id="0bf36-231">**Další informace o** Další informace o kanálu CD se službami Azure DevOps a Docker, naleznete na následujících stránkách:</span><span class="sxs-lookup"><span data-stu-id="0bf36-231">**More info** To read more about the CD pipeline with Azure DevOps Services and Docker, visit the following sites:</span></span>

<span data-ttu-id="0bf36-232">Rozšíření Azure DevOps služby Docker a Azure Container Service: [ https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span><span class="sxs-lookup"><span data-stu-id="0bf36-232">Azure DevOps Services extension for Docker and Azure Container Service: [https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span></span>

<span data-ttu-id="0bf36-233">Azure Container Service: <https://aka.ms/azurecontainerservice></span><span class="sxs-lookup"><span data-stu-id="0bf36-233">Azure Container Service: <https://aka.ms/azurecontainerservice></span></span>

<span data-ttu-id="0bf36-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span><span class="sxs-lookup"><span data-stu-id="0bf36-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span></span>

## <a name="step-5-run-and-manage"></a><span data-ttu-id="0bf36-235">Krok 5: Spuštění a Správa</span><span class="sxs-lookup"><span data-stu-id="0bf36-235">Step 5: Run and manage</span></span>

<span data-ttu-id="0bf36-236">Vzhledem k tomu, že spouštění a správu aplikací na podnikové produkční úroveň je hlavní předmět v a sám sebe a z důvodu typ operace a lidé pracují na této úrovni (IT oddělení) a také velký rozsah této oblasti, můžeme mít věnovala celý vedle kapitola s vysvětlením ho.</span><span class="sxs-lookup"><span data-stu-id="0bf36-236">Because running and managing applications at enterprise-production level is a major subject in and of itself, and due to the type of operations and people working at that level (IT operations) as well as the large scope of this area, we have devoted the entire next chapter to explaining it.</span></span>

## <a name="step-6-monitor-and-diagnose"></a><span data-ttu-id="0bf36-237">Krok 6: Monitorování a Diagnostika</span><span class="sxs-lookup"><span data-stu-id="0bf36-237">Step 6: Monitor and diagnose</span></span>

<span data-ttu-id="0bf36-238">Toto téma také je obsaženo v následující kapitole jako součást úlohy, které IT oddělení provádí v produkční systémy; je však třeba zvýraznit, že poznatky získané v tomto kroku musí informačního kanálu zpět k vývojovému týmu tak, aby se neustále vylepšené aplikace.</span><span class="sxs-lookup"><span data-stu-id="0bf36-238">This topic also is covered in the next chapter as part of the tasks that IT operations performs in production systems; however, is important to highlight that the insights obtained in this step must feed back to the development team so that the application is constantly improved.</span></span> <span data-ttu-id="0bf36-239">Z tohoto hlediska, je také součástí DevOps, i když se úkoly a operace se obvykle zpracovávají pomocí IT.</span><span class="sxs-lookup"><span data-stu-id="0bf36-239">From that point of view, it is also part of DevOps, although the tasks and operations are usually performed by IT.</span></span>

<span data-ttu-id="0bf36-240">Pouze v případě monitorování a Diagnostika jsou 100 % jeho obsahu v rámci sféry DevOps se monitorování procesů a analytics provádí vývojový tým proti testování nebo beta prostředí.</span><span class="sxs-lookup"><span data-stu-id="0bf36-240">Only when monitoring and diagnostics are 100 percent within the realm of DevOps are the monitoring processes and analytics performed by the development team against testing or beta environments.</span></span> <span data-ttu-id="0bf36-241">To se provádí pomocí provádí zátěžové testování nebo jednoduše tak, že monitorování beta nebo dotazů a odpovědí prostředí, ve kterém jsou testerům beta verzí pokusu o nové verze.</span><span class="sxs-lookup"><span data-stu-id="0bf36-241">This is done either by performing load testing or simply by monitoring beta or QA environments, where beta testers are trying the new versions.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="0bf36-242">[Předchozí](index.md)
[další](../run-manage-monitor-docker-environments/index.md)</span><span class="sxs-lookup"><span data-stu-id="0bf36-242">[Previous](index.md)
[Next](../run-manage-monitor-docker-environments/index.md)</span></span>
