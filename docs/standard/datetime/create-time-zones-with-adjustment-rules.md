---
title: 'Postupy: Vytváření časových pásem s pravidly úpravy'
ms.date: 04/10/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- time zones [.NET Framework], creating
- time zones [.NET Framework], and adjustment rules
- adjustment rule [.NET Framework]
ms.assetid: c52ef192-13a9-435f-8015-3b12eae8c47c
ms.openlocfilehash: b7e938581dfde3f1566aa2506302292686c2fc5c
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/02/2020
ms.locfileid: "84278165"
---
# <a name="how-to-create-time-zones-with-adjustment-rules"></a><span data-ttu-id="04736-102">Postupy: Vytváření časových pásem s pravidly úpravy</span><span class="sxs-lookup"><span data-stu-id="04736-102">How to: Create time zones with adjustment rules</span></span>

<span data-ttu-id="04736-103">Přesné informace o časovém pásmu, které vyžaduje aplikace, nemusí být k dispozici v konkrétním systému z několika důvodů:</span><span class="sxs-lookup"><span data-stu-id="04736-103">The precise time zone information that is required by an application may not be present on a particular system for several reasons:</span></span>

- <span data-ttu-id="04736-104">Časové pásmo nebylo nikdy definováno v registru místního systému.</span><span class="sxs-lookup"><span data-stu-id="04736-104">The time zone has never been defined in the local system's registry.</span></span>

- <span data-ttu-id="04736-105">Data o časovém pásmu byla upravena nebo odebrána z registru.</span><span class="sxs-lookup"><span data-stu-id="04736-105">Data about the time zone has been modified or removed from the registry.</span></span>

- <span data-ttu-id="04736-106">Časové pásmo nemá správné informace o úpravách časového pásma pro konkrétní historické období.</span><span class="sxs-lookup"><span data-stu-id="04736-106">The time zone does not have accurate information about time zone adjustments for a particular historic period.</span></span>

<span data-ttu-id="04736-107">V těchto případech můžete zavolat <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> metodu pro definování časového pásma vyžadovaného vaší aplikací.</span><span class="sxs-lookup"><span data-stu-id="04736-107">In these cases, you can call the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method to define the time zone required by your application.</span></span> <span data-ttu-id="04736-108">Pomocí přetížení této metody můžete vytvořit časové pásmo s pravidly úprav nebo bez nich.</span><span class="sxs-lookup"><span data-stu-id="04736-108">You can use the overloads of this method to create a time zone with or without adjustment rules.</span></span> <span data-ttu-id="04736-109">Pokud časové pásmo podporuje letní čas, můžete definovat úpravy s pravidly úpravy s pevnou nebo plovoucí.</span><span class="sxs-lookup"><span data-stu-id="04736-109">If the time zone supports daylight saving time, you can define adjustments with either fixed or floating adjustment rules.</span></span> <span data-ttu-id="04736-110">(Pro definice těchto podmínek si přečtěte část "Terminologie časových pásem" v tématu [Přehled časového pásma](time-zone-overview.md).)</span><span class="sxs-lookup"><span data-stu-id="04736-110">(For definitions of these terms, see the "Time Zone Terminology" section in [Time zone overview](time-zone-overview.md).)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="04736-111">Vlastní časová pásma vytvořená voláním <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> metody nejsou přidána do registru.</span><span class="sxs-lookup"><span data-stu-id="04736-111">Custom time zones created by calling the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method are not added to the registry.</span></span> <span data-ttu-id="04736-112">Místo toho mohou být k dispozici pouze prostřednictvím odkazu objektu vráceného <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> voláním metody.</span><span class="sxs-lookup"><span data-stu-id="04736-112">Instead, they can be accessed only through the object reference returned by the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method call.</span></span>

<span data-ttu-id="04736-113">V tomto tématu se dozvíte, jak vytvořit časové pásmo s pravidly úprav.</span><span class="sxs-lookup"><span data-stu-id="04736-113">This topic shows how to create a time zone with adjustment rules.</span></span> <span data-ttu-id="04736-114">Chcete-li vytvořit časové pásmo, které nepodporuje pravidla pro úpravu letního času, přečtěte si téma [Postup: vytváření časových pásem bez pravidel úprav](create-time-zones-without-adjustment-rules.md).</span><span class="sxs-lookup"><span data-stu-id="04736-114">To create a time zone that does not support daylight saving time adjustment rules, see [How to: Create Time Zones Without Adjustment Rules](create-time-zones-without-adjustment-rules.md).</span></span>

### <a name="to-create-a-time-zone-with-floating-adjustment-rules"></a><span data-ttu-id="04736-115">Vytvoření časového pásma s plovoucími pravidly úpravy</span><span class="sxs-lookup"><span data-stu-id="04736-115">To create a time zone with floating adjustment rules</span></span>

1. <span data-ttu-id="04736-116">Pro každou úpravu (tj. pro každý přechod mimo určitý časový interval a zpět na běžný čas) udělejte toto:</span><span class="sxs-lookup"><span data-stu-id="04736-116">For each adjustment (that is, for each transition away from and back to standard time over a particular time interval), do the following:</span></span>

    1. <span data-ttu-id="04736-117">Definujte dobu zahájení přechodu pro úpravu časového pásma.</span><span class="sxs-lookup"><span data-stu-id="04736-117">Define the starting transition time for the time zone adjustment.</span></span>

       <span data-ttu-id="04736-118">Je nutné zavolat <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> metodu a předat jí <xref:System.DateTime> hodnotu, která definuje čas přechodu, celočíselnou hodnotu, která definuje měsíc přechodu, celočíselnou hodnotu, která definuje týden, ke kterému dojde přechod, a <xref:System.DayOfWeek> hodnotu, která definuje den v týdnu, k němuž dojde přechod.</span><span class="sxs-lookup"><span data-stu-id="04736-118">You must call the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> method and pass it a <xref:System.DateTime> value that defines the time of the transition, an integer value that defines the month of the transition, an integer value that defines the week on which the transition occurs, and a <xref:System.DayOfWeek> value that defines the day of the week on which the transition occurs.</span></span> <span data-ttu-id="04736-119">Toto volání metody vytvoří instanci <xref:System.TimeZoneInfo.TransitionTime> objektu.</span><span class="sxs-lookup"><span data-stu-id="04736-119">This method call instantiates a <xref:System.TimeZoneInfo.TransitionTime> object.</span></span>

    2. <span data-ttu-id="04736-120">Definujte čas ukončení přechodu pro úpravu časového pásma.</span><span class="sxs-lookup"><span data-stu-id="04736-120">Define the ending transition time for the time zone adjustment.</span></span> <span data-ttu-id="04736-121">To vyžaduje jiné volání <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="04736-121">This requires another call to the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="04736-122">Toto volání metody vytvoří instanci druhého <xref:System.TimeZoneInfo.TransitionTime> objektu.</span><span class="sxs-lookup"><span data-stu-id="04736-122">This method call instantiates a second <xref:System.TimeZoneInfo.TransitionTime> object.</span></span>

    3. <span data-ttu-id="04736-123">Zavolejte <xref:System.TimeZoneInfo.AdjustmentRule.CreateAdjustmentRule%2A> metodu a předejte jí efektivní počáteční a koncové datum úpravy, <xref:System.TimeSpan> objekt, který definuje množství času v přechodu, a dva <xref:System.TimeZoneInfo.TransitionTime> objekty, které definují, kdy dojde k přechodu do a z letního času.</span><span class="sxs-lookup"><span data-stu-id="04736-123">Call the <xref:System.TimeZoneInfo.AdjustmentRule.CreateAdjustmentRule%2A> method and pass it the effective start and end dates of the adjustment, a <xref:System.TimeSpan> object that defines the amount of time in the transition, and the two <xref:System.TimeZoneInfo.TransitionTime> objects that define when the transitions to and from daylight saving time occur.</span></span> <span data-ttu-id="04736-124">Toto volání metody vytvoří instanci <xref:System.TimeZoneInfo.AdjustmentRule> objektu.</span><span class="sxs-lookup"><span data-stu-id="04736-124">This method call instantiates a <xref:System.TimeZoneInfo.AdjustmentRule> object.</span></span>

    4. <span data-ttu-id="04736-125">Přiřaďte <xref:System.TimeZoneInfo.AdjustmentRule> objekt k poli <xref:System.TimeZoneInfo.AdjustmentRule> objektů.</span><span class="sxs-lookup"><span data-stu-id="04736-125">Assign the <xref:System.TimeZoneInfo.AdjustmentRule> object to an array of <xref:System.TimeZoneInfo.AdjustmentRule> objects.</span></span>

2. <span data-ttu-id="04736-126">Zadejte zobrazovaný název časového pásma.</span><span class="sxs-lookup"><span data-stu-id="04736-126">Define the time zone's display name.</span></span> <span data-ttu-id="04736-127">Zobrazovaný název se řídí poměrně standardním formátem, ve kterém je posun časového pásma od koordinovaného světového času (UTC) uzavřený v závorkách a následován řetězcem, který určuje časové pásmo, jednu nebo více měst v časovém pásmu nebo jednu nebo více zemí nebo oblastí v časovém pásmu.</span><span class="sxs-lookup"><span data-stu-id="04736-127">The display name follows a fairly standard format in which the time zone's offset from Coordinated Universal Time (UTC) is enclosed in parentheses and is followed by a string that identifies the time zone, one or more of the cities in the time zone, or one or more of the countries or regions in the time zone.</span></span>

3. <span data-ttu-id="04736-128">Zadejte název standardního času časového pásma.</span><span class="sxs-lookup"><span data-stu-id="04736-128">Define the name of the time zone's standard time.</span></span> <span data-ttu-id="04736-129">Obvykle se tento řetězec používá také jako identifikátor časového pásma.</span><span class="sxs-lookup"><span data-stu-id="04736-129">Typically, this string is also used as the time zone's identifier.</span></span>

4. <span data-ttu-id="04736-130">Zadejte název letního času časového pásma.</span><span class="sxs-lookup"><span data-stu-id="04736-130">Define the name of the time zone's daylight time.</span></span>

5. <span data-ttu-id="04736-131">Pokud chcete použít jiný identifikátor než standardní název časového pásma, definujte identifikátor časového pásma.</span><span class="sxs-lookup"><span data-stu-id="04736-131">If you want to use a different identifier than the time zone's standard name, define the time zone identifier.</span></span>

6. <span data-ttu-id="04736-132">Vytvořte instanci <xref:System.TimeSpan> objektu, který definuje posun časového pásma od času UTC.</span><span class="sxs-lookup"><span data-stu-id="04736-132">Instantiate a <xref:System.TimeSpan> object that defines the time zone's offset from UTC.</span></span> <span data-ttu-id="04736-133">Časová pásma s časy, které jsou pozdější než UTC, mají kladný posun.</span><span class="sxs-lookup"><span data-stu-id="04736-133">Time zones with times that are later than UTC have a positive offset.</span></span> <span data-ttu-id="04736-134">Časová pásma s časy, které jsou starší než UTC, mají záporný posun.</span><span class="sxs-lookup"><span data-stu-id="04736-134">Time zones with times that are earlier than UTC have a negative offset.</span></span>

7. <span data-ttu-id="04736-135">Zavolejte <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> metodu pro vytvoření instance nového časového pásma.</span><span class="sxs-lookup"><span data-stu-id="04736-135">Call the <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> method to instantiate the new time zone.</span></span>

## <a name="example"></a><span data-ttu-id="04736-136">Příklad</span><span class="sxs-lookup"><span data-stu-id="04736-136">Example</span></span>

<span data-ttu-id="04736-137">Následující příklad definuje centrální standardní časové pásmo pro USA, které obsahuje pravidla úprav pro celou řadu časových intervalů od 1918 do současného.</span><span class="sxs-lookup"><span data-stu-id="04736-137">The following example defines a Central Standard Time zone for the United States that includes adjustment rules for a variety of time intervals from 1918 to the present.</span></span>

[!code-csharp[System.TimeZone2.CreateTimeZone#5](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#5)]
[!code-vb[System.TimeZone2.CreateTimeZone#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#5)]

<span data-ttu-id="04736-138">Časové pásmo vytvořené v tomto příkladu má více pravidel úprav.</span><span class="sxs-lookup"><span data-stu-id="04736-138">The time zone created in this example has multiple adjustment rules.</span></span> <span data-ttu-id="04736-139">Je třeba dbát na to, aby se efektivní počáteční a koncové datum u libovolného pravidla úpravy nepřekrývaly s daty jiného pravidla úpravy.</span><span class="sxs-lookup"><span data-stu-id="04736-139">Care must be taken to ensure that the effective start and end dates of any adjustment rule do not overlap with the dates of another adjustment rule.</span></span> <span data-ttu-id="04736-140">Pokud dojde k překrytí, <xref:System.InvalidTimeZoneException> je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="04736-140">If there is an overlap, an <xref:System.InvalidTimeZoneException> is thrown.</span></span>

<span data-ttu-id="04736-141">U pravidel pro plovoucí úpravu je hodnota 5 předána `week` parametru <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> metody k označení toho, že přechod proběhne za poslední týden konkrétního měsíce.</span><span class="sxs-lookup"><span data-stu-id="04736-141">For floating adjustment rules, the value 5 is passed to the `week` parameter of the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> method to indicate that the transition occurs on the last week of a particular month.</span></span>

<span data-ttu-id="04736-142">Při vytváření pole <xref:System.TimeZoneInfo.AdjustmentRule> objektů, které chcete použít ve <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> volání metody, může kód inicializovat pole na velikost požadovanou počtem úprav, které mají být vytvořeny pro časové pásmo.</span><span class="sxs-lookup"><span data-stu-id="04736-142">In creating the array of <xref:System.TimeZoneInfo.AdjustmentRule> objects to use in the <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> method call, the code could initialize the array to the size required by the number of adjustments to be created for the time zone.</span></span> <span data-ttu-id="04736-143">Místo toho tento příklad kódu volá <xref:System.Collections.Generic.List%601.Add%2A> metodu pro přidání pravidla úprav do obecné <xref:System.Collections.Generic.List%601> kolekce <xref:System.TimeZoneInfo.AdjustmentRule> objektů.</span><span class="sxs-lookup"><span data-stu-id="04736-143">Instead, this code example calls the <xref:System.Collections.Generic.List%601.Add%2A> method to add each adjustment rule to a generic <xref:System.Collections.Generic.List%601> collection of <xref:System.TimeZoneInfo.AdjustmentRule> objects.</span></span> <span data-ttu-id="04736-144">Kód pak zavolá <xref:System.Collections.Generic.List%601.CopyTo%2A> metodu pro zkopírování členů této kolekce do pole.</span><span class="sxs-lookup"><span data-stu-id="04736-144">The code then calls the <xref:System.Collections.Generic.List%601.CopyTo%2A> method to copy the members of this collection to the array.</span></span>

<span data-ttu-id="04736-145">Příklad také používá <xref:System.TimeZoneInfo.TransitionTime.CreateFixedDateRule%2A> metodu k definování úprav s pevným datem.</span><span class="sxs-lookup"><span data-stu-id="04736-145">The example also uses the <xref:System.TimeZoneInfo.TransitionTime.CreateFixedDateRule%2A> method to define fixed-date adjustments.</span></span> <span data-ttu-id="04736-146">To je podobné volání <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> metody s tím rozdílem, že vyžaduje pouze dobu, měsíc a den parametrů přechodu.</span><span class="sxs-lookup"><span data-stu-id="04736-146">This is similar to calling the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> method, except that it requires only the time, month, and day of the transition parameters.</span></span>

<span data-ttu-id="04736-147">Příklad lze otestovat pomocí následujícího kódu:</span><span class="sxs-lookup"><span data-stu-id="04736-147">The example can be tested using code such as the following:</span></span>

[!code-csharp[System.TimeZone2.CreateTimeZone#7](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#7)]
[!code-vb[System.TimeZone2.CreateTimeZone#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#7)]

## <a name="compiling-the-code"></a><span data-ttu-id="04736-148">Zkompilování kódu</span><span class="sxs-lookup"><span data-stu-id="04736-148">Compiling the code</span></span>

<span data-ttu-id="04736-149">Tento příklad vyžaduje:</span><span class="sxs-lookup"><span data-stu-id="04736-149">This example requires:</span></span>

- <span data-ttu-id="04736-150">Následující obory názvů se naimportují:</span><span class="sxs-lookup"><span data-stu-id="04736-150">That the following namespaces be imported:</span></span>

  [!code-csharp[System.TimeZone2.CreateTimeZone#6](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#6)]
  [!code-vb[System.TimeZone2.CreateTimeZone#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#6)]

## <a name="see-also"></a><span data-ttu-id="04736-151">Viz také</span><span class="sxs-lookup"><span data-stu-id="04736-151">See also</span></span>

- [<span data-ttu-id="04736-152">Data, časy a časová pásma</span><span class="sxs-lookup"><span data-stu-id="04736-152">Dates, times, and time zones</span></span>](index.md)
- [<span data-ttu-id="04736-153">Přehled časových pásem</span><span class="sxs-lookup"><span data-stu-id="04736-153">Time zone overview</span></span>](time-zone-overview.md)
- [<span data-ttu-id="04736-154">Postupy: Vytváření časových pásem bez pravidel úpravy</span><span class="sxs-lookup"><span data-stu-id="04736-154">How to: Create time zones without adjustment rules</span></span>](create-time-zones-without-adjustment-rules.md)
