---
title: Izolované úložiště
description: Prozkoumejte izolované úložiště, což je mechanismus úložiště dat, který poskytuje izolaci & bezpečnost definováním standardizovaných způsobů asociace kódu s uloženými daty.
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- data storage using isolated storage
- stores
- storing data using isolated storage
- isolated storage
- location of isolated storage in file system
- standardizing storage systems
- storing data using isolated storage, when not to use
- code, isolated storage
- isolated storage, options
- data storage using isolated storage, when not to use
- storing data using isolated storage, options
- isolated storage, when not to use
- data storage using isolated storage, options
- isolation
ms.assetid: aff939d7-9e49-46f2-a8cd-938d3020e94e
ms.openlocfilehash: b9915faff2593cc51868c20e1a83a05ffca9f548
ms.sourcegitcommit: dc2feef0794cf41dbac1451a13b8183258566c0e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/24/2020
ms.locfileid: "85325929"
---
# <a name="isolated-storage"></a><span data-ttu-id="a2a7b-103">Izolované úložiště</span><span class="sxs-lookup"><span data-stu-id="a2a7b-103">Isolated Storage</span></span>
<a name="top"></a><span data-ttu-id="a2a7b-104">Pro desktopové aplikace je izolované úložiště mechanismus pro ukládání dat, který poskytuje izolaci a bezpečnost definováním standardizovaných způsobů asociace kódu s uloženými daty.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-104">For desktop apps, isolated storage is a data storage mechanism that provides isolation and safety by defining standardized ways of associating code with saved data.</span></span> <span data-ttu-id="a2a7b-105">Standardizace poskytuje také další výhody.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-105">Standardization provides other benefits as well.</span></span> <span data-ttu-id="a2a7b-106">Správci mohou používat nástroje, které jsou navrženy pro manipulaci izolovaného úložiště, a nakonfigurovat kapacitu úložiště souborů, nastavit zásady zabezpečení a odstranit nepoužívaná data.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-106">Administrators can use tools designed to manipulate isolated storage to configure file storage space, set security policies, and delete unused data.</span></span> <span data-ttu-id="a2a7b-107">Díky izolovanému úložišti váš kód pro zadání bezpečných umístění v systému souborů již nevyžaduje jedinečné cesty a data jsou chráněna před ostatními aplikacemi, které mají přístup pouze k izolovanému úložišti.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-107">With isolated storage, your code no longer needs unique paths to specify safe locations in the file system, and data is protected from other applications that only have isolated storage access.</span></span> <span data-ttu-id="a2a7b-108">Pevně zakódovaná informace, která označuje oblast umístění aplikace, není vyžadována.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-108">Hard-coded information that indicates where an application's storage area is located is unnecessary.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a2a7b-109">Izolované úložiště není k dispozici pro aplikace Windows 8. x Store.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-109">Isolated storage is not available for Windows 8.x Store apps.</span></span> <span data-ttu-id="a2a7b-110">Místo toho použijte aplikační datové třídy v `Windows.Storage` oborech názvů obsažených v rozhraní prostředí Windows Runtime API k ukládání místních dat a souborů.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-110">Instead, use the application data classes in the `Windows.Storage` namespaces included in the Windows Runtime API to store local data and files.</span></span> <span data-ttu-id="a2a7b-111">Další informace najdete v tématu [data aplikací](https://docs.microsoft.com/previous-versions/windows/apps/hh464917(v=win.10)) na stránce Windows Dev Center.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-111">For more information, see [Application data](https://docs.microsoft.com/previous-versions/windows/apps/hh464917(v=win.10)) in the Windows Dev Center.</span></span>

<span data-ttu-id="a2a7b-112">Toto téma obsahuje následující oddíly:</span><span class="sxs-lookup"><span data-stu-id="a2a7b-112">This topic contains the following sections:</span></span>

- [<span data-ttu-id="a2a7b-113">Datové přihrádky a úložiště dat</span><span class="sxs-lookup"><span data-stu-id="a2a7b-113">Data Compartments and Stores</span></span>](#data_compartments_and_stores)

- [<span data-ttu-id="a2a7b-114">Kvóty pro izolované úložiště</span><span class="sxs-lookup"><span data-stu-id="a2a7b-114">Quotas for Isolated Storage</span></span>](#quotas)

- [<span data-ttu-id="a2a7b-115">Bezpečný přístup</span><span class="sxs-lookup"><span data-stu-id="a2a7b-115">Secure Access</span></span>](#secure_access)

- [<span data-ttu-id="a2a7b-116">Povolené využití a rizika zabezpečení</span><span class="sxs-lookup"><span data-stu-id="a2a7b-116">Allowed Usage and Security Risks</span></span>](#allowed_usage)

- [<span data-ttu-id="a2a7b-117">Umístění izolovaného úložiště</span><span class="sxs-lookup"><span data-stu-id="a2a7b-117">Isolated Storage Locations</span></span>](#isolated_storage_locations)

- [<span data-ttu-id="a2a7b-118">Vytváření, provádění výčtů a odstraňování izolovaného úložiště</span><span class="sxs-lookup"><span data-stu-id="a2a7b-118">Creating, Enumerating, and Deleting Isolated Storage</span></span>](#isolated_storage_tasks)

- [<span data-ttu-id="a2a7b-119">Scénáře pro izolované úložiště</span><span class="sxs-lookup"><span data-stu-id="a2a7b-119">Scenarios for Isolated Storage</span></span>](#scenarios_for_isolated_storage)

- [<span data-ttu-id="a2a7b-120">Související témata</span><span class="sxs-lookup"><span data-stu-id="a2a7b-120">Related Topics</span></span>](#related_topics)

- [<span data-ttu-id="a2a7b-121">Reference</span><span class="sxs-lookup"><span data-stu-id="a2a7b-121">Reference</span></span>](#reference)

<a name="data_compartments_and_stores"></a>

## <a name="data-compartments-and-stores"></a><span data-ttu-id="a2a7b-122">Datové přihrádky a úložiště dat</span><span class="sxs-lookup"><span data-stu-id="a2a7b-122">Data Compartments and Stores</span></span>

<span data-ttu-id="a2a7b-123">Pokud aplikace ukládá data do souboru, je nutné pečlivě zvolit název souboru a umístění úložiště, a to za účelem minimalizace možnosti, že toto umístění úložiště bude známo také jiné aplikaci, což může způsobit náchylnost k poškození.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-123">When an application stores data in a file, the file name and storage location must be carefully chosen to minimize the possibility that the storage location will be known to another application and, therefore, will be vulnerable to corruption.</span></span> <span data-ttu-id="a2a7b-124">Bez standardního systému pro řešení těchto problémů může být vývoj ad hoc technik minimalizujících konflikty úložiště složitý a výsledky nemusí být nespolehlivé.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-124">Without a standard system in place to manage these problems, developing ad hoc techniques that minimize storage conflicts can be complex, and the results can be unreliable.</span></span>

<span data-ttu-id="a2a7b-125">V případě izolovaného úložiště jsou data vždy izolována podle uživatele a podle sestavení.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-125">With isolated storage, data is always isolated by user and by assembly.</span></span> <span data-ttu-id="a2a7b-126">Pověření, jako je například původ nebo silný název sestavení, určují identitu sestavení.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-126">Credentials such as the origin or the strong name of the assembly determine assembly identity.</span></span> <span data-ttu-id="a2a7b-127">Data mohou být izolována také podle domény aplikace pomocí obdobných pověření.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-127">Data can also be isolated by application domain, using similar credentials.</span></span>

<span data-ttu-id="a2a7b-128">Používáte-li izolované úložiště, aplikace uloží data do jedinečné datové přihrádky, která je přidružena k některým aspektům identity kódu, jako je vydavatel nebo signatura.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-128">When you use isolated storage, your application saves data to a unique data compartment that is associated with some aspect of the code's identity, such as its publisher or signature.</span></span> <span data-ttu-id="a2a7b-129">Datová přihrádka je abstrakcí, nikoli specifickým umístěním úložiště. Sestává z jednoho nebo více souborů izolovaného úložiště, které se nazývají „úložiště“, jež obsahují umístění skutečného adresáře, ve kterém jsou data uložena.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-129">The data compartment is an abstraction, not a specific storage location; it consists of one or more isolated storage files, called stores, which contain the actual directory locations where data is stored.</span></span> <span data-ttu-id="a2a7b-130">Aplikace může mít například přidruženou datovou přihrádku a adresář v systému souborů může implementovat úložiště, které uchovává skutečná data pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-130">For example, an application might have a data compartment associated with it, and a directory in the file system would implement the store that actually preserves the data for that application.</span></span> <span data-ttu-id="a2a7b-131">Data uložená v úložišti mohou být libovolného druhu, od informací o uživatelských předvolbách až po stav aplikace.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-131">The data saved in the store can be any kind of data, from user preference information to application state.</span></span> <span data-ttu-id="a2a7b-132">Pro vývojáře je umístění datové přihrádky transparentní.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-132">For the developer, the location of the data compartment is transparent.</span></span> <span data-ttu-id="a2a7b-133">Úložiště se většinou nachází na straně klienta, serverová aplikace však může využívat izolovaná úložiště k ukládání informací zosobňováním uživatele, jehož jménem funguje.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-133">Stores usually reside on the client, but a server application could use isolated stores to store information by impersonating the user on whose behalf it is functioning.</span></span> <span data-ttu-id="a2a7b-134">Izolované úložiště může také ukládat informace na serveru s cestovním profilem uživatele, aby se informace mohly přesouvat spolu s uživatelem, který je na cestách.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-134">Isolated storage can also store information on a server with a user's roaming profile so that the information will travel with the roaming user.</span></span>

<a name="quotas"></a>

## <a name="quotas-for-isolated-storage"></a><span data-ttu-id="a2a7b-135">Kvóty pro izolované úložiště</span><span class="sxs-lookup"><span data-stu-id="a2a7b-135">Quotas for Isolated Storage</span></span>

<span data-ttu-id="a2a7b-136">Kvóta je limit využívané velikosti izolovaného úložiště.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-136">A quota is a limit on the amount of isolated storage that can be used.</span></span> <span data-ttu-id="a2a7b-137">Kvóta úložiště zahrnuje bajty prostoru pro soubory a také informace o režijních nákladech spojených s adresářem a další informace.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-137">The quota includes bytes of file space as well as the overhead associated with the directory and other information in the store.</span></span> <span data-ttu-id="a2a7b-138">Izolované úložiště používá kvóty oprávnění, což jsou omezení úložiště, která jsou nastavena pomocí <xref:System.Security.Permissions.IsolatedStoragePermission> objektů.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-138">Isolated storage uses permission quotas, which are storage limits that are set by using <xref:System.Security.Permissions.IsolatedStoragePermission> objects.</span></span> <span data-ttu-id="a2a7b-139">Pokud se pokusíte zapsat data, která přesahují kvótu, <xref:System.IO.IsolatedStorage.IsolatedStorageException> je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-139">If you try to write data that exceeds the quota, an <xref:System.IO.IsolatedStorage.IsolatedStorageException> exception is thrown.</span></span>  <span data-ttu-id="a2a7b-140">Zásady zabezpečení, které lze upravit pomocí konfiguračního nástroje rozhraní .NET Framework (Mscorcfg.msc), určují, která oprávnění jsou kódu udělována.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-140">Security policy, which can be modified using the .NET Framework Configuration Tool (Mscorcfg.msc), determines which permissions are granted to code.</span></span> <span data-ttu-id="a2a7b-141">Kód, který byl udělen, <xref:System.Security.Permissions.IsolatedStoragePermission> je omezen na použití bez dalšího úložiště než <xref:System.Security.Permissions.IsolatedStoragePermission.UserQuota%2A> vlastnost povoluje.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-141">Code that has been granted <xref:System.Security.Permissions.IsolatedStoragePermission> is restricted to using no more storage than the <xref:System.Security.Permissions.IsolatedStoragePermission.UserQuota%2A> property allows.</span></span> <span data-ttu-id="a2a7b-142">Avšak vzhledem k tomu, že kód může obejít kvóty oprávnění předložením identity jiného uživatele, slouží kvóty oprávnění jako pokyny pro chování kódu, nikoli jako pevně stanovené omezení chování kódu.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-142">However, because code can bypass permission quotas by presenting different user identities, permission quotas serve as guidelines for how code should behave rather than as a firm limit on code behavior.</span></span>

<span data-ttu-id="a2a7b-143">V případě cestovních úložišť nejsou kvóty vynucovány.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-143">Quotas are not enforced on roaming stores.</span></span> <span data-ttu-id="a2a7b-144">Chcete-li je použít, je potřeba z tohoto důvodu použít mírně vyšší stupeň oprávnění pro kód.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-144">Because of this, a slightly higher level of permission is required for code to use them.</span></span> <span data-ttu-id="a2a7b-145">Hodnoty výčtu <xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser> a <xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser> Určete oprávnění k použití izolovaného úložiště pro uživatele typu roaming.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-145">The enumeration values <xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser> and <xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser> specify a permission to use isolated storage for a roaming user.</span></span>

<a name="secure_access"></a>

## <a name="secure-access"></a><span data-ttu-id="a2a7b-146">Bezpečný přístup</span><span class="sxs-lookup"><span data-stu-id="a2a7b-146">Secure Access</span></span>

<span data-ttu-id="a2a7b-147">Používání izolovaného úložiště umožňuje částečně důvěryhodným aplikacím ukládat data způsobem, který je řízen zásadami zabezpečení počítače.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-147">Using isolated storage enables partially trusted applications to store data in a manner that is controlled by the computer's security policy.</span></span> <span data-ttu-id="a2a7b-148">Tato možnost je vhodná především pro stažené komponenty, které by měl uživatel spouštět s rozvahou.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-148">This is especially useful for downloaded components that a user might want to run cautiously.</span></span> <span data-ttu-id="a2a7b-149">Zásady zabezpečení zřídka udělí tento druh oprávnění kódu pro přístup k systému souborů pomocí standardních vstupně-výstupních mechanismů.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-149">Security policy rarely grants this kind of code permission when you access the file system by using standard I/O mechanisms.</span></span> <span data-ttu-id="a2a7b-150">Ve výchozím nastavení je však oprávnění k používání izolovaného úložiště uděleno kódu, který se spouští z místního počítače, místní sítě nebo z Internetu.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-150">However, by default, code running from the local computer, a local network, or the Internet is granted the right to use isolated storage.</span></span>

<span data-ttu-id="a2a7b-151">Správci mohou stanovit omezení kapacity izolovaného úložiště pro aplikaci nebo uživatele, a to na základě příslušné úrovně důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-151">Administrators can limit how much isolated storage an application or a user has available, based on an appropriate trust level.</span></span> <span data-ttu-id="a2a7b-152">Dále mohou správci kompletně odebrat trvalá data uživatele.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-152">In addition, administrators can remove a user's persisted data completely.</span></span> <span data-ttu-id="a2a7b-153">Aby bylo možné vytvořit nebo získat přístup k izolovanému úložišti, musí být pro kód uděleno příslušné <xref:System.Security.Permissions.IsolatedStorageFilePermission> oprávnění.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-153">To create or access isolated storage, code must be granted the appropriate <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission.</span></span>

<span data-ttu-id="a2a7b-154">Chcete-li získat přístup k izolovanému úložišti, musí být kódu přidělena veškerá oprávnění pro operační systém nativní platformy.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-154">To access isolated storage, code must have all necessary native platform operating system rights.</span></span> <span data-ttu-id="a2a7b-155">Musí být splněny podmínky seznamů řízení přístupu (ACL), jež ověřují, kteří uživatelé mají oprávnění použít systém souborů.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-155">The access control lists (ACLs) that control which users have the rights to use the file system must be satisfied.</span></span> <span data-ttu-id="a2a7b-156">Aplikace rozhraní .NET framework již mají oprávnění operačního systému pro přístup k izolovanému úložišti, pokud však neprovedou zosobnění (specifické pro platformu).</span><span class="sxs-lookup"><span data-stu-id="a2a7b-156">.NET Framework applications already have operating system rights to access isolated storage unless they perform (platform-specific) impersonation.</span></span> <span data-ttu-id="a2a7b-157">V tomto případě musí aplikace zajistit, aby identita zosobněného uživatele měla příslušná oprávnění pro přístup k izolovanému úložišti.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-157">In this case, the application is responsible for ensuring that the impersonated user identity has the proper operating system rights to access isolated storage.</span></span> <span data-ttu-id="a2a7b-158">Tento přístup poskytuje kódu spuštěnému nebo staženému z webu čtení a zápis do oblasti úložiště vztahujícího se ke konkrétnímu uživateli.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-158">This access provides a convenient way for code that is run or downloaded from the web to read and write to a storage area related to a particular user.</span></span>

<span data-ttu-id="a2a7b-159">Pro řízení přístupu k izolovanému úložišti používá modul CLR (Common Language Runtime) <xref:System.Security.Permissions.IsolatedStorageFilePermission> objekty.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-159">To control access to isolated storage, the common language runtime uses <xref:System.Security.Permissions.IsolatedStorageFilePermission> objects.</span></span> <span data-ttu-id="a2a7b-160">Jednotlivé objekty mají vlastnosti, které určují následující hodnoty:</span><span class="sxs-lookup"><span data-stu-id="a2a7b-160">Each object has properties that specify the following values:</span></span>

- <span data-ttu-id="a2a7b-161">Povolené využití, které označuje typ povoleného přístupu.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-161">Allowed usage, which indicates the type of access that is allowed.</span></span> <span data-ttu-id="a2a7b-162">Hodnoty jsou členy <xref:System.Security.Permissions.IsolatedStorageContainment> výčtu.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-162">The values are members of the <xref:System.Security.Permissions.IsolatedStorageContainment> enumeration.</span></span> <span data-ttu-id="a2a7b-163">Další informace o těchto hodnotách naleznete v tabulce v další části.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-163">For more information about these values, see the table in the next section.</span></span>

- <span data-ttu-id="a2a7b-164">Kvóta úložiště, která byla popsána v předchozím oddílu.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-164">Storage quota, as discussed in the preceding section.</span></span>

<span data-ttu-id="a2a7b-165">Modul runtime požaduje <xref:System.Security.Permissions.IsolatedStorageFilePermission> oprávnění, když se kód poprvé pokusí otevřít úložiště.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-165">The runtime demands <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission when code first attempts to open a store.</span></span> <span data-ttu-id="a2a7b-166">Rozhodne, zda udělit toto oprávnění na základě toho, kolik je kód důvěryhodný.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-166">It decides whether to grant this permission, based on how much the code is trusted.</span></span> <span data-ttu-id="a2a7b-167">Pokud je uděleno oprávnění, povolené hodnoty kvóty využití a úložiště jsou určeny zásadami zabezpečení a žádostí o kód pro <xref:System.Security.Permissions.IsolatedStorageFilePermission> .</span><span class="sxs-lookup"><span data-stu-id="a2a7b-167">If the permission is granted, the allowed usage and storage quota values are determined by security policy and by the code's request for <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span></span> <span data-ttu-id="a2a7b-168">Zásada zabezpečení je nastavena pomocí konfiguračního nástroje rozhraní .NET Framework (Mscorcfg.msc).</span><span class="sxs-lookup"><span data-stu-id="a2a7b-168">Security policy is set by using the .NET Framework Configuration Tool (Mscorcfg.msc).</span></span> <span data-ttu-id="a2a7b-169">Aby měli jednotliví volající alespoň povolené využití, jsou ověřování všichni volající v zásobníku volání.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-169">All callers in the call stack are checked to ensure that each caller has at least the appropriate allowed usage.</span></span> <span data-ttu-id="a2a7b-170">Modul runtime ověřuje také kvóty zadané do kódu, který otevřel nebo vytvořil úložiště, ve kterém má být soubor uložen.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-170">The runtime also checks the quota imposed on the code that opened or created the store in which the file is to be saved.</span></span> <span data-ttu-id="a2a7b-171">Pokud jsou tyto podmínky splněny, je povolení uděleno.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-171">If these conditions are satisfied, permission is granted.</span></span> <span data-ttu-id="a2a7b-172">Kvóta se ověřuje znovu pokaždé, když je soubor zapsán do úložiště.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-172">The quota is checked again every time a file is written to the store.</span></span>

<span data-ttu-id="a2a7b-173">Kód aplikace není požadován k vyžádání oprávnění, protože modul CLR (Common Language Runtime) udělí jakékoli <xref:System.Security.Permissions.IsolatedStorageFilePermission> vhodnosti na základě zásad zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-173">Application code is not required to request permission because the common language runtime will grant whatever <xref:System.Security.Permissions.IsolatedStorageFilePermission> is appropriate based on security policy.</span></span> <span data-ttu-id="a2a7b-174">Existují však dobré důvody pro vyžádání konkrétních oprávnění, která vaše aplikace potřebuje, včetně <xref:System.Security.Permissions.IsolatedStorageFilePermission> .</span><span class="sxs-lookup"><span data-stu-id="a2a7b-174">However, there are good reasons to request specific permissions that your application needs, including <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span></span>

<a name="allowed_usage"></a>

## <a name="allowed-usage-and-security-risks"></a><span data-ttu-id="a2a7b-175">Povolené využití a rizika zabezpečení</span><span class="sxs-lookup"><span data-stu-id="a2a7b-175">Allowed Usage and Security Risks</span></span>

<span data-ttu-id="a2a7b-176">Povolené využití určené dle <xref:System.Security.Permissions.IsolatedStorageFilePermission> Určuje, do jaké míry bude kód moci vytvářet a používat izolované úložiště.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-176">The allowed usage specified by <xref:System.Security.Permissions.IsolatedStorageFilePermission> determines the degree to which code will be allowed to create and use isolated storage.</span></span> <span data-ttu-id="a2a7b-177">Následující tabulka znázorňuje, jakým způsobem povolené využití zadané v rámci oprávnění odpovídá typům izolace, a podává přehled rizik zabezpečení spojených s jednotlivými typy povoleného využití.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-177">The following table shows how the allowed usage specified in the permission corresponds to types of isolation and summarizes the security risks associated with each allowed usage.</span></span>

|<span data-ttu-id="a2a7b-178">Povolené využití</span><span class="sxs-lookup"><span data-stu-id="a2a7b-178">Allowed usage</span></span>|<span data-ttu-id="a2a7b-179">Typy izolace</span><span class="sxs-lookup"><span data-stu-id="a2a7b-179">Isolation types</span></span>|<span data-ttu-id="a2a7b-180">Dopad na zabezpečení</span><span class="sxs-lookup"><span data-stu-id="a2a7b-180">Security impact</span></span>|
|-------------------|---------------------|---------------------|
|<xref:System.Security.Permissions.IsolatedStorageContainment.None>|<span data-ttu-id="a2a7b-181">Není povoleno žádné použití izolovaného úložiště.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-181">No isolated storage use is allowed.</span></span>|<span data-ttu-id="a2a7b-182">Neexistuje žádný dopad na zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-182">There is no security impact.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByUser>|<span data-ttu-id="a2a7b-183">Izolace podle uživatele, domény a sestavení.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-183">Isolation by user, domain, and assembly.</span></span> <span data-ttu-id="a2a7b-184">Každé sestavení má samostatné dílčí úložiště v rámci domény.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-184">Each assembly has a separate substore within the domain.</span></span> <span data-ttu-id="a2a7b-185">Úložiště používající toto oprávnění jsou také implicitně izolována počítačem.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-185">Stores that use this permission are also implicitly isolated by computer.</span></span>|<span data-ttu-id="a2a7b-186">Tato úroveň oprávnění ponechává prostředky otevřené neoprávněnému nadměrnému využití, ačkoli vynucené kvóty toto znesnadňují.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-186">This permission level leaves resources open to unauthorized overuse, although enforced quotas make it more difficult.</span></span> <span data-ttu-id="a2a7b-187">Mluvíme o útoku na dostupnost služby (DOS).</span><span class="sxs-lookup"><span data-stu-id="a2a7b-187">This is called a denial of service attack.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser>|<span data-ttu-id="a2a7b-188">Stejné jako `DomainIsolationByUser` , ale úložiště se uloží do umístění, které se bude používat při roamingu, pokud jsou povolené cestovní profily uživatelů a neuplatní se kvóty.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-188">Same as `DomainIsolationByUser`, but store is saved to a location that will roam if roaming user profiles are enabled and quotas are not enforced.</span></span>|<span data-ttu-id="a2a7b-189">Vzhledem k tomu, že kvóty musí být zakázány, úložiště prostředků jsou zranitelnější vůči útokům na dostupnost služby (DOS).</span><span class="sxs-lookup"><span data-stu-id="a2a7b-189">Because quotas must be disabled, storage resources are more vulnerable to a denial of service attack.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByUser>|<span data-ttu-id="a2a7b-190">Izolace podle uživatele a sestavení.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-190">Isolation by user and assembly.</span></span> <span data-ttu-id="a2a7b-191">Úložiště používající toto oprávnění jsou také implicitně izolována počítačem.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-191">Stores that use this permission are also implicitly isolated by computer.</span></span>|<span data-ttu-id="a2a7b-192">Kvóty jsou na této úrovni vynuceny za účelem zamezení útoku na dostupnost služby (DOS).</span><span class="sxs-lookup"><span data-stu-id="a2a7b-192">Quotas are enforced at this level to help prevent a denial of service attack.</span></span> <span data-ttu-id="a2a7b-193">Možnost přístupu k tomuto úložišti stejným sestavením z jiné domény otevírá možnost úniku informací mezi aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-193">The same assembly in another domain can access this store, opening the possibility that information could be leaked between applications.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser>|<span data-ttu-id="a2a7b-194">Stejné jako `AssemblyIsolationByUser` , ale úložiště se uloží do umístění, které se bude používat při roamingu, pokud jsou povolené cestovní profily uživatelů a neuplatní se kvóty.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-194">Same as `AssemblyIsolationByUser`, but store is saved to a location that will roam if roaming user profiles are enabled and quotas are not enforced.</span></span>|<span data-ttu-id="a2a7b-195">Stejné jako v systému `AssemblyIsolationByUser` , ale bez kvót se zvyšuje riziko útoku DOS (Denial of Service).</span><span class="sxs-lookup"><span data-stu-id="a2a7b-195">Same as in `AssemblyIsolationByUser`, but without quotas, the risk of a denial of service attack increases.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AdministerIsolatedStorageByUser>|<span data-ttu-id="a2a7b-196">Izolace podle uživatele.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-196">Isolation by user.</span></span> <span data-ttu-id="a2a7b-197">Tuto úroveň oprávnění používají obvykle pouze nástroje pro správu a ladění.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-197">Typically, only administrative or debugging tools use this level of permission.</span></span>|<span data-ttu-id="a2a7b-198">Přístup s tímto oprávněním umožňuje kódu zobrazit nebo odstranit jakýkoli soubor nebo adresář v izolovaném úložišti uživatele (bez ohledu na izolaci sestavení).</span><span class="sxs-lookup"><span data-stu-id="a2a7b-198">Access with this permission allows code to view or delete any of a user's isolated storage files or directories (regardless of assembly isolation).</span></span> <span data-ttu-id="a2a7b-199">Mezi rizika patří mimo jiné únik informací a ztráta dat.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-199">Risks include, but are not limited to, leaking information and data loss.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.UnrestrictedIsolatedStorage>|<span data-ttu-id="a2a7b-200">Izolace podle všech uživatelů, domén a sestavení.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-200">Isolation by all users, domains, and assemblies.</span></span> <span data-ttu-id="a2a7b-201">Tuto úroveň oprávnění používají obvykle pouze nástroje pro správu a ladění.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-201">Typically, only administrative or debugging tools use this level of permission.</span></span>|<span data-ttu-id="a2a7b-202">Toto oprávnění vytváří potenciál pro celkové vyzrazení veškerých izolovaných úložišť všech uživatelů.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-202">This permission creates the potential for a total compromise of all isolated stores for all users.</span></span>|

## <a name="safety-of-isolated-storage-components-with-regard-to-untrusted-data"></a><span data-ttu-id="a2a7b-203">Bezpečnost komponent izolovaného úložiště s ohledem na nedůvěryhodná data</span><span class="sxs-lookup"><span data-stu-id="a2a7b-203">Safety of isolated storage components with regard to untrusted data</span></span>

<span data-ttu-id="a2a7b-204">__Tato část se vztahuje na následující architektury:__</span><span class="sxs-lookup"><span data-stu-id="a2a7b-204">__This section applies to the following frameworks:__</span></span>

- <span data-ttu-id="a2a7b-205">.NET Framework (všechny verze)</span><span class="sxs-lookup"><span data-stu-id="a2a7b-205">.NET Framework (all versions)</span></span>
- <span data-ttu-id="a2a7b-206">.NET Core 2.1 +</span><span class="sxs-lookup"><span data-stu-id="a2a7b-206">.NET Core 2.1+</span></span>
- <span data-ttu-id="a2a7b-207">.NET 5.0 +</span><span class="sxs-lookup"><span data-stu-id="a2a7b-207">.NET 5.0+</span></span>

<span data-ttu-id="a2a7b-208">.NET Framework a .NET Core nabízejí [izolované úložiště](/dotnet/standard/io/isolated-storage) jako mechanismus pro zachování dat pro uživatele, aplikaci nebo komponentu.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-208">The .NET Framework and .NET Core offer [isolated storage](/dotnet/standard/io/isolated-storage) as a mechanism to persist data for a user, an application, or a component.</span></span> <span data-ttu-id="a2a7b-209">Toto je starší verze součásti, která je primárně navržena pro scénáře zabezpečení přístupu ke kódu.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-209">This is a legacy component primarily designed for now-deprecated Code Access Security scenarios.</span></span>

<span data-ttu-id="a2a7b-210">Různá rozhraní API a nástroje izolovaného úložiště se dají použít ke čtení dat napříč hranicemi důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-210">Various isolated storage APIs and tools can be used to read data across trust boundaries.</span></span> <span data-ttu-id="a2a7b-211">Například čtení dat z oboru v rámci počítače může agregovat data z jiných, případně méně důvěryhodných uživatelských účtů v počítači.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-211">For example, reading data from a machine-wide scope can aggregate data from other, possibly less-trusted user accounts on the machine.</span></span> <span data-ttu-id="a2a7b-212">Komponenty nebo aplikace, které se čtou z oborů izolovaného úložiště v rámci počítače, by měly znát důsledky čtení těchto dat.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-212">Components or applications which read from machine-wide isolated storage scopes should be aware of the consequences of reading this data.</span></span>

### <a name="security-sensitive-apis-which-can-read-from-the-machine-wide-scope"></a><span data-ttu-id="a2a7b-213">Rozhraní API citlivá na zabezpečení, která se dají číst z rozsahu v rámci počítače</span><span class="sxs-lookup"><span data-stu-id="a2a7b-213">Security-sensitive APIs which can read from the machine-wide scope</span></span>

<span data-ttu-id="a2a7b-214">Komponenty nebo aplikace, které volají některá z následujících rozhraní API načtených z oboru v rámci počítače:</span><span class="sxs-lookup"><span data-stu-id="a2a7b-214">Components or applications that call any of the following APIs read from the machine-wide scope:</span></span>

* <span data-ttu-id="a2a7b-215">[IsolatedStorageFile. GetEnumerator](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getenumerator), předání oboru, který obsahuje příznak IsolatedStorageScope. Machine</span><span class="sxs-lookup"><span data-stu-id="a2a7b-215">[IsolatedStorageFile.GetEnumerator](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getenumerator), passing a scope that includes the IsolatedStorageScope.Machine flag</span></span>
* [<span data-ttu-id="a2a7b-216">IsolatedStorageFile. GetMachineStoreForApplication</span><span class="sxs-lookup"><span data-stu-id="a2a7b-216">IsolatedStorageFile.GetMachineStoreForApplication</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestoreforapplication)
* [<span data-ttu-id="a2a7b-217">IsolatedStorageFile. GetMachineStoreForAssembly</span><span class="sxs-lookup"><span data-stu-id="a2a7b-217">IsolatedStorageFile.GetMachineStoreForAssembly</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestoreforassembly)
* [<span data-ttu-id="a2a7b-218">IsolatedStorageFile. GetMachineStoreForDomain</span><span class="sxs-lookup"><span data-stu-id="a2a7b-218">IsolatedStorageFile.GetMachineStoreForDomain</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestorefordomain)
* <span data-ttu-id="a2a7b-219">[IsolatedStorageFile. GetStore](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getstore)– předání oboru, který obsahuje příznak IsolatedStorageScope. Machine</span><span class="sxs-lookup"><span data-stu-id="a2a7b-219">[IsolatedStorageFile.GetStore](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getstore), passing a scope that includes the IsolatedStorageScope.Machine flag</span></span>
* <span data-ttu-id="a2a7b-220">[IsolatedStorageFile. Remove](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.remove), předání oboru, který obsahuje `IsolatedStorageScope.Machine` příznak</span><span class="sxs-lookup"><span data-stu-id="a2a7b-220">[IsolatedStorageFile.Remove](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.remove), passing a scope that includes the `IsolatedStorageScope.Machine` flag</span></span>

<span data-ttu-id="a2a7b-221">[Nástroj izolovaného úložiště](/dotnet/framework/tools/storeadm-exe-isolated-storage-tool) `storeadm.exe` je ovlivněn při volání s `/machine` přepínačem, jak je znázorněno v následujícím kódu:</span><span class="sxs-lookup"><span data-stu-id="a2a7b-221">The [isolated storage tool](/dotnet/framework/tools/storeadm-exe-isolated-storage-tool) `storeadm.exe` is impacted if called with the `/machine` switch, as shown in the following code:</span></span>

```txt
storeadm.exe /machine [any-other-switches]
```

<span data-ttu-id="a2a7b-222">Nástroj izolovaného úložiště je k dispozici jako součást sady Visual Studio a sady .NET Framework SDK.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-222">The isolated storage tool is provided as part of Visual Studio and the .NET Framework SDK.</span></span>

<span data-ttu-id="a2a7b-223">Pokud aplikace nezahrnuje volání do předchozích rozhraní API, nebo pokud pracovní postup nezahrnuje volání `storeadm.exe` tímto způsobem, tento dokument se nepoužije.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-223">If the application doesn't involve calls to the preceding APIs, or if the workflow doesn't involve calling `storeadm.exe` in this manner, this document doesn't apply.</span></span>

### <a name="impact-in-multi-user-environments"></a><span data-ttu-id="a2a7b-224">Dopad na prostředí s více uživateli</span><span class="sxs-lookup"><span data-stu-id="a2a7b-224">Impact in multi-user environments</span></span>

<span data-ttu-id="a2a7b-225">Jak už bylo zmíněno dříve, dopad z těchto rozhraní API z dat zapsaných z jednoho vztahu důvěryhodnosti na zabezpečení je načtený z jiného důvěryhodného prostředí.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-225">As mentioned previously, the security impact from these APIs results from data written from one trust environment is read from a different trust environment.</span></span> <span data-ttu-id="a2a7b-226">Izolované úložiště obecně používá jedno ze tří umístění ke čtení a zápisu dat:</span><span class="sxs-lookup"><span data-stu-id="a2a7b-226">Isolated storage generally uses one of three locations to read and write data:</span></span>

1. <span data-ttu-id="a2a7b-227">`%LOCALAPPDATA%\IsolatedStorage\`Například `C:\Users\<username>\AppData\Local\IsolatedStorage\` , pro `User` obor.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-227">`%LOCALAPPDATA%\IsolatedStorage\`: For example, `C:\Users\<username>\AppData\Local\IsolatedStorage\`, for `User` scope.</span></span>
2. <span data-ttu-id="a2a7b-228">`%APPDATA%\IsolatedStorage\`Například `C:\Users\<username>\AppData\Roaming\IsolatedStorage\` , pro `User|Roaming` obor.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-228">`%APPDATA%\IsolatedStorage\`: For example, `C:\Users\<username>\AppData\Roaming\IsolatedStorage\`, for `User|Roaming` scope.</span></span>
3. <span data-ttu-id="a2a7b-229">`%PROGRAMDATA%\IsolatedStorage\`Například `C:\ProgramData\IsolatedStorage\` , pro `Machine` obor.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-229">`%PROGRAMDATA%\IsolatedStorage\`: For example, `C:\ProgramData\IsolatedStorage\`, for `Machine` scope.</span></span>

<span data-ttu-id="a2a7b-230">První dvě umístění jsou izolovaná pro jednotlivé uživatele.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-230">The first two locations are isolated per-user.</span></span> <span data-ttu-id="a2a7b-231">Systém Windows zajišťuje, aby různé uživatelské účty ve stejném počítači nemohly přistupovat ke složkám uživatelských profilů.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-231">Windows ensures that different user accounts on the same machine cannot access each other's user profile folders.</span></span> <span data-ttu-id="a2a7b-232">Pomocí dvou různých uživatelských účtů, které používají nebo ukládají, se nezobrazují `User` `User|Roaming` data ostatních a nemůžou kolidovat mezi ostatními daty.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-232">Two different user accounts who use the `User` or `User|Roaming` stores will not see each other's data and cannot interfere with each other's data.</span></span>

<span data-ttu-id="a2a7b-233">Třetí umístění se sdílí mezi všemi uživatelskými účty v počítači.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-233">The third location is shared across all user accounts on the machine.</span></span> <span data-ttu-id="a2a7b-234">Různé účty můžou číst z tohoto umístění a zapisovat do tohoto umístění a můžou si vidět data ostatních.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-234">Different accounts can read from and write to this location, and they're able to see each other's data.</span></span>

<span data-ttu-id="a2a7b-235">Předchozí cesty se můžou lišit v závislosti na používané verzi Windows.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-235">The preceding paths may differ based on the version of Windows in use.</span></span>

<span data-ttu-id="a2a7b-236">Nyní uvažujte o více uživatelích se dvěma registrovanými uživateli _Mallory_ a _Bob_.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-236">Now consider a multi-user system with two registered users _Mallory_ and _Bob_.</span></span> <span data-ttu-id="a2a7b-237">Mallory má možnost přístupu ke svému adresáři profilu uživatele `C:\Users\Mallory\` a může přistupovat k umístění úložiště v rámci sdíleného počítače `C:\ProgramData\IsolatedStorage\` .</span><span class="sxs-lookup"><span data-stu-id="a2a7b-237">Mallory has the ability to access her user profile directory `C:\Users\Mallory\`, and she can access the shared machine-wide storage location `C:\ProgramData\IsolatedStorage\`.</span></span> <span data-ttu-id="a2a7b-238">Nemůže získat přístup k adresáři uživatelských profilů Bob `C:\Users\Bob\` .</span><span class="sxs-lookup"><span data-stu-id="a2a7b-238">She cannot access Bob's user profile directory `C:\Users\Bob\`.</span></span>

<span data-ttu-id="a2a7b-239">Pokud chce Mallory zaútočit na Bob, může zapsat data do umístění úložiště v rámci místního počítače a pak se pokusit o vlivu Bobovi na čtení z úložiště na úrovni počítače.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-239">If Mallory wishes to attack Bob, she might write data to the machine-wide storage location, then attempt to influence Bob into reading from the machine-wide store.</span></span> <span data-ttu-id="a2a7b-240">Když Bob spustí aplikaci, která čte z tohoto obchodu, bude tato aplikace pracovat s daty, která jsou tam umístěná, ale z kontextu uživatelského účtu Boba.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-240">When Bob runs an app that reads from this store, that app will operate on the data Mallory placed there, but from within the context of Bob's user account.</span></span> <span data-ttu-id="a2a7b-241">Zbývající část tohoto dokumentu má za cíl nejrůznější vektory útoku a kroky, které aplikace můžou udělat, aby se minimalizovala rizika těchto útoků.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-241">The remainder of this document contemplates various attack vectors and what steps apps can do to minimize their risk to these attacks.</span></span>

<span data-ttu-id="a2a7b-242">__Poznámka:__ Aby byl takový útok proveden, Mallory vyžaduje:</span><span class="sxs-lookup"><span data-stu-id="a2a7b-242">__Note:__ In order for such an attack to take place, Mallory requires:</span></span>

* <span data-ttu-id="a2a7b-243">Uživatelský účet v počítači.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-243">A user account on the machine.</span></span>
* <span data-ttu-id="a2a7b-244">Možnost umístit soubor do známého umístění v systému souborů.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-244">The ability to place a file into a known location on the file system.</span></span>
* <span data-ttu-id="a2a7b-245">Znalosti, které Bob bude v určitém okamžiku, spustí aplikaci, která se pokusí číst tato data.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-245">Knowledge that Bob will at some point run an app which attempts to read this data.</span></span>

<span data-ttu-id="a2a7b-246">Nejedná se o vektory hrozeb, které se vztahují na standardní desktopové prostředí s jedním uživatelem, jako jsou domácí počítače nebo firemní pracovní stanice s jedním zaměstnancem.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-246">These are not threat vectors which apply to standard single-user desktop environments like home PCs or single-employee enterprise workstations.</span></span>

#### <a name="elevation-of-privilege"></a><span data-ttu-id="a2a7b-247">Zvýšení oprávnění</span><span class="sxs-lookup"><span data-stu-id="a2a7b-247">Elevation of privilege</span></span>

<span data-ttu-id="a2a7b-248">K útoku __na zvýšení oprávnění__ dochází, když aplikace Bob přečte soubor Mallory a automaticky se pokusí provést určitou akci na základě obsahu této datové části.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-248">An __elevation of privilege__ attack occurs when Bob's app reads Mallory's file and automatically tries to take some action based on the contents of that payload.</span></span> <span data-ttu-id="a2a7b-249">Vezměte v úvahu aplikaci, která čte obsah spouštěcího skriptu z úložiště pro celé počítače a předává je do nástroje `Process.Start` .</span><span class="sxs-lookup"><span data-stu-id="a2a7b-249">Consider an app that reads the contents of a startup script from the machine-wide store and passes those contents to `Process.Start`.</span></span> <span data-ttu-id="a2a7b-250">Pokud Mallory může umístit škodlivý skript do úložiště v celém počítači, když Bob spustí svoji aplikaci:</span><span class="sxs-lookup"><span data-stu-id="a2a7b-250">If Mallory can place a malicious script inside the machine-wide store, when Bob launches his app:</span></span>

* <span data-ttu-id="a2a7b-251">Jeho aplikace analyzuje a spouští škodlivý skript Mallory _v kontextu profilu uživatele Boba_.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-251">His app parses and launches Mallory's malicious script _under the context of Bob's user profile_.</span></span>
* <span data-ttu-id="a2a7b-252">Mallory Gaines přístup k účtu Boba na místním počítači.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-252">Mallory gaines access to Bob's account on the local machine.</span></span>

#### <a name="denial-of-service"></a><span data-ttu-id="a2a7b-253">Odmítnutí služby</span><span class="sxs-lookup"><span data-stu-id="a2a7b-253">Denial of service</span></span>

<span data-ttu-id="a2a7b-254">K útoku __DOS__ dojde, když aplikace Bob přečte soubor Mallory a dojde k chybě nebo jinak přestane fungovat správně.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-254">A __denial of service__ attack occurs when Bob's app reads Mallory's file and crashes or otherwise stops functioning correctly.</span></span> <span data-ttu-id="a2a7b-255">Zvažte znovu výše zmíněnou aplikaci, která se pokusí analyzovat spouštěcí skript z úložiště na úrovni počítače.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-255">Consider again the app mentioned previously, which attempts to parse a startup script from the machine-wide store.</span></span> <span data-ttu-id="a2a7b-256">Pokud Mallory může umístit soubor s poškozeným obsahem v rámci úložiště na úrovni počítače, může:</span><span class="sxs-lookup"><span data-stu-id="a2a7b-256">If Mallory can place a file with malformed contents inside the machine-wide store, she might:</span></span>

* <span data-ttu-id="a2a7b-257">Způsobí, že aplikace Bob vyvolá v úvodní cestě výjimku.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-257">Cause Bob's app to throw an exception early in the startup path.</span></span>
* <span data-ttu-id="a2a7b-258">Zabrání spuštění aplikace úspěšně v důsledku výjimky.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-258">Prevent the app from launching successfully because of the exception.</span></span>

<span data-ttu-id="a2a7b-259">Pak má Bobovi možnost spustit aplikaci v rámci vlastního uživatelského účtu.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-259">She has then denied Bob the ability to launch the app under his own user account.</span></span>

#### <a name="information-disclosure"></a><span data-ttu-id="a2a7b-260">Zpřístupnění informací</span><span class="sxs-lookup"><span data-stu-id="a2a7b-260">Information disclosure</span></span>

<span data-ttu-id="a2a7b-261">K __odhalení informací__ dojde v případě, že Mallory může přesvědčit Bobovi o zpřístupnění obsahu souboru, ke kterému Mallory nemá normálně přístup.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-261">An __information disclosure__ attack occurs when Mallory can trick Bob into disclosing the contents of a file that Mallory does not normally have access to.</span></span> <span data-ttu-id="a2a7b-262">Vezměte v úvahu, že Bob má tajný soubor *C:\Users\Bob\secret.txt* , který chce Mallory načíst.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-262">Consider that Bob has a secret file *C:\Users\Bob\secret.txt* that Mallory wants to read.</span></span> <span data-ttu-id="a2a7b-263">Zná cestu k tomuto souboru, ale nemůže ji přečíst, protože systém Windows ji zakazuje získat přístup k adresáři profilu uživatele Boba.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-263">She knows the path to this file, but she cannot read it because Windows forbids her from gaining access to Bob's user profile directory.</span></span>

<span data-ttu-id="a2a7b-264">Místo toho Mallory umístí pevný odkaz do úložiště na úrovni počítače.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-264">Instead, Mallory places a hard link into the machine-wide store.</span></span> <span data-ttu-id="a2a7b-265">Jedná se o speciální druh souboru, který neobsahuje žádný obsah, ale odkazuje na jiný soubor na disku.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-265">This is a special kind of file that itself does not contain any contents, rather, it points to another file on disk.</span></span> <span data-ttu-id="a2a7b-266">Při pokusu o čtení souboru pevného odkazu se místo toho přečte obsah souboru, který cílí na odkaz.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-266">Attempting to read the hard link file will instead read the contents of the file targeted by the link.</span></span> <span data-ttu-id="a2a7b-267">Po vytvoření pevného odkazu nemůže Mallory stále číst obsah souboru, protože nemá přístup k cíli ( `C:\Users\Bob\secret.txt` ) odkazu.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-267">After creating the hard link, Mallory still cannot read the file contents because she does not have access to the target (`C:\Users\Bob\secret.txt`) of the link.</span></span> <span data-ttu-id="a2a7b-268">_Bob ale má k_ tomuto souboru přístup.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-268">However, Bob _does_ have access to this file.</span></span>

<span data-ttu-id="a2a7b-269">Když aplikace Bob načte z úložiště na celém počítači, nyní nechtěně přečte obsah svého `secret.txt` souboru, stejně jako kdyby byl samotný soubor přítomen v úložišti na celé počítače.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-269">When Bob's app reads from the machine-wide store, it now inadvertently reads the contents of his `secret.txt` file, just as if the file itself had been present in the machine-wide store.</span></span> <span data-ttu-id="a2a7b-270">Když se aplikace Bob ukončí, při pokusu o uložení souboru do úložiště na celé počítače se v adresáři \* C:\ProgramData\IsolatedStorage zachová aktuální kopie souboru \* .</span><span class="sxs-lookup"><span data-stu-id="a2a7b-270">When Bob's app exits, if it attempts to resave the file to the machine-wide store, it will end up placing an actual copy of the file in the \*C:\ProgramData\IsolatedStorage\* directory.</span></span> <span data-ttu-id="a2a7b-271">Vzhledem k tomu, že tento adresář je čitelný jakýmkoli uživatelem v počítači, může Mallory nyní číst obsah souboru.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-271">Since this directory is readable by any user on the machine, Mallory can now read the contents of the file.</span></span>

### <a name="best-practices-to-defend-against-these-attacks"></a><span data-ttu-id="a2a7b-272">Osvědčené postupy pro obranu před těmito útoky</span><span class="sxs-lookup"><span data-stu-id="a2a7b-272">Best practices to defend against these attacks</span></span>

<span data-ttu-id="a2a7b-273">__Důležité informace:__ Pokud má vaše prostředí více vzájemně nedůvěryhodných __uživatelů,__ NEVOLEJTE rozhraní API `IsolatedStorageFile.GetEnumerator(IsolatedStorageScope.Machine)` ani Nevolejte nástroj `storeadm.exe /machine /list` .</span><span class="sxs-lookup"><span data-stu-id="a2a7b-273">__Important:__ If your environment has multiple mutually untrusted users, __do not__ call the API `IsolatedStorageFile.GetEnumerator(IsolatedStorageScope.Machine)` or invoke the tool `storeadm.exe /machine /list`.</span></span> <span data-ttu-id="a2a7b-274">Obě tyto předpokládají, že provozují důvěryhodná data.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-274">Both of these assume that they're operating on trusted data.</span></span> <span data-ttu-id="a2a7b-275">Může-li útočník naplnit škodlivou datovou část v úložišti na celém počítači, může tato datová část vést k zvýšení úrovně oprávnění v kontextu uživatele, který tyto příkazy spouští.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-275">If an attacker can seed a malicious payload in the machine-wide store, that payload can lead to an elevation of privilege attack under the context of the user who runs these commands.</span></span>

<span data-ttu-id="a2a7b-276">Pokud pracujete v prostředí s více uživateli, zvažte použití izolovaných funkcí úložiště, které cílí na obor _počítače_ .</span><span class="sxs-lookup"><span data-stu-id="a2a7b-276">If operating in a multi-user environment, reconsider use of isolated storage features which target the _Machine_ scope.</span></span> <span data-ttu-id="a2a7b-277">Pokud aplikace musí číst data z umístění v rámci počítače, raději Přečtěte data z umístění, do kterého budou zapisovat jenom účty správců.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-277">If an app must read data from a machine-wide location, prefer to read the data from a location that are writable only by admin accounts.</span></span> <span data-ttu-id="a2a7b-278">`%PROGRAMFILES%`Adresář a `HKLM` podregistr registru představují příklady umístění, která jsou zapisovatelná jenom správcům a jsou čitelná pro všechny.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-278">The `%PROGRAMFILES%` directory and the `HKLM` registry hive are examples of locations which are writable by only administrators and readable by everyone.</span></span> <span data-ttu-id="a2a7b-279">Data načtená z těchto umístění se proto považují za důvěryhodná.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-279">Data read from those locations is therefore considered trustworthy.</span></span>

<span data-ttu-id="a2a7b-280">Pokud aplikace musí používat obor _počítače_ v prostředí s více uživateli, ověřte obsah všech souborů, které si přečtete z úložiště pro celé počítače.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-280">If an app must use the _Machine_ scope in a multi-user environment, validate the contents of any file that you read from the machine-wide store.</span></span> <span data-ttu-id="a2a7b-281">Pokud aplikace deserializace grafy objektů z těchto souborů, zvažte použití bezpečnějších serializátorů, jako je `XmlSerializer` místo nebezpečných serializátorů, jako je například `BinaryFormatter` nebo `NetDataContractSerializer` .</span><span class="sxs-lookup"><span data-stu-id="a2a7b-281">If the app deserializing object graphs from these files, consider using safer serializers like `XmlSerializer` instead of dangerous serializers like `BinaryFormatter` or `NetDataContractSerializer`.</span></span> <span data-ttu-id="a2a7b-282">Používejte opatrnost u hluboce vnořených grafů objektů nebo objektů, které provádějí přidělování prostředků na základě obsahu souboru.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-282">Use caution with deeply nested object graphs or object graphs which perform resource allocation based on the file contents.</span></span>

<a name="isolated_storage_locations"></a>

## <a name="isolated-storage-locations"></a><span data-ttu-id="a2a7b-283">Umístění izolovaného úložiště</span><span class="sxs-lookup"><span data-stu-id="a2a7b-283">Isolated Storage Locations</span></span>

<span data-ttu-id="a2a7b-284">Někdy je vhodné ověřit změnu izolovaného úložiště pomocí systému souborů operačního systému.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-284">Sometimes it is helpful to verify a change to isolated storage by using the file system of the operating system.</span></span> <span data-ttu-id="a2a7b-285">Budete pravděpodobně chtít znát umístění souborů izolovaného úložiště.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-285">You might also want to know the location of isolated storage files.</span></span> <span data-ttu-id="a2a7b-286">Toto umístění se liší v závislosti na operačním systému.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-286">This location is different depending on the operating system.</span></span> <span data-ttu-id="a2a7b-287">V následující tabulce jsou uvedeny kořenové adresáře, ve kterých je izolované úložiště vytvořeno v několika běžných operačních systémech.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-287">The following table shows the root locations where isolated storage is created on a few common operating systems.</span></span> <span data-ttu-id="a2a7b-288">Hledejte v tomto kořenovém adresáři adresáře Microsoft\IsolatedStorage.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-288">Look for Microsoft\IsolatedStorage directories under this root location.</span></span> <span data-ttu-id="a2a7b-289">Chcete-li izolované úložiště zobrazit v systému souborů, musíte změnit nastavení složek tak, aby se zobrazovaly skryté soubory a složky.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-289">You must change folder settings to show hidden files and folders in order to see isolated storage in the file system.</span></span>

|<span data-ttu-id="a2a7b-290">Operační systém</span><span class="sxs-lookup"><span data-stu-id="a2a7b-290">Operating system</span></span>|<span data-ttu-id="a2a7b-291">Umístění v systému souborů</span><span class="sxs-lookup"><span data-stu-id="a2a7b-291">Location in file system</span></span>|
|----------------------|-----------------------------|
|<span data-ttu-id="a2a7b-292">Windows 2000, Windows XP, Windows Server 2003 (upgrade z Windows NT 4.0)</span><span class="sxs-lookup"><span data-stu-id="a2a7b-292">Windows 2000, Windows XP, Windows Server 2003  (upgrade from Windows NT 4.0)</span></span>|<span data-ttu-id="a2a7b-293">Úložiště podporující cestovní profily =</span><span class="sxs-lookup"><span data-stu-id="a2a7b-293">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="a2a7b-294">\<SYSTEMROOT>\Profiles \\<uživatelem \> \Application data</span><span class="sxs-lookup"><span data-stu-id="a2a7b-294">\<SYSTEMROOT>\Profiles\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="a2a7b-295">Úložiště bez možnosti cestovního profilu =</span><span class="sxs-lookup"><span data-stu-id="a2a7b-295">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="a2a7b-296">\<SYSTEMROOT>\Profiles \\<uživatel \> \Local Settings\Application data</span><span class="sxs-lookup"><span data-stu-id="a2a7b-296">\<SYSTEMROOT>\Profiles\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="a2a7b-297">Windows 2000 – čistá instalace (a upgrady ze systému Windows 98 a Windows NT 3.51)</span><span class="sxs-lookup"><span data-stu-id="a2a7b-297">Windows 2000  - clean installation (and upgrades from Windows 98 and Windows NT 3.51)</span></span>|<span data-ttu-id="a2a7b-298">Úložiště podporující cestovní profily =</span><span class="sxs-lookup"><span data-stu-id="a2a7b-298">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="a2a7b-299">\<SYSTEMDRIVE>\Documents and Settings \\<User \> \Application data</span><span class="sxs-lookup"><span data-stu-id="a2a7b-299">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="a2a7b-300">Úložiště bez možnosti cestovního profilu =</span><span class="sxs-lookup"><span data-stu-id="a2a7b-300">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="a2a7b-301">\<SYSTEMDRIVE>\Documents and Settings \\<uživatel \> \Local Settings\Application data</span><span class="sxs-lookup"><span data-stu-id="a2a7b-301">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="a2a7b-302">Windows XP, Windows Server 2003 – čistá instalace (a upgrady ze systému Windows 2000 a Windows 98)</span><span class="sxs-lookup"><span data-stu-id="a2a7b-302">Windows XP, Windows Server 2003 - clean installation (and upgrades from Windows 2000 and Windows 98)</span></span>|<span data-ttu-id="a2a7b-303">Úložiště podporující cestovní profily =</span><span class="sxs-lookup"><span data-stu-id="a2a7b-303">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="a2a7b-304">\<SYSTEMDRIVE>\Documents and Settings \\<User \> \Application data</span><span class="sxs-lookup"><span data-stu-id="a2a7b-304">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="a2a7b-305">Úložiště bez možnosti cestovního profilu =</span><span class="sxs-lookup"><span data-stu-id="a2a7b-305">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="a2a7b-306">\<SYSTEMDRIVE>\Documents and Settings \\<uživatel \> \Local Settings\Application data</span><span class="sxs-lookup"><span data-stu-id="a2a7b-306">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="a2a7b-307">Windows 8, Windows 7, Windows Server 2008, Windows Vista</span><span class="sxs-lookup"><span data-stu-id="a2a7b-307">Windows 8, Windows 7, Windows Server 2008, Windows Vista</span></span>|<span data-ttu-id="a2a7b-308">Úložiště podporující cestovní profily =</span><span class="sxs-lookup"><span data-stu-id="a2a7b-308">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="a2a7b-309">\<SYSTEMDRIVE>\Users \\<\> \AppData\Roaming uživatele</span><span class="sxs-lookup"><span data-stu-id="a2a7b-309">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Roaming</span></span><br /><br /> <span data-ttu-id="a2a7b-310">Úložiště bez možnosti cestovního profilu =</span><span class="sxs-lookup"><span data-stu-id="a2a7b-310">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="a2a7b-311">\<SYSTEMDRIVE>\Users \\<\> \AppData\Local uživatele</span><span class="sxs-lookup"><span data-stu-id="a2a7b-311">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Local</span></span>|

<a name="isolated_storage_tasks"></a>

## <a name="creating-enumerating-and-deleting-isolated-storage"></a><span data-ttu-id="a2a7b-312">Vytváření, provádění výčtů a odstraňování izolovaného úložiště</span><span class="sxs-lookup"><span data-stu-id="a2a7b-312">Creating, Enumerating, and Deleting Isolated Storage</span></span>

<span data-ttu-id="a2a7b-313">.NET Framework poskytuje tři třídy v <xref:System.IO.IsolatedStorage> oboru názvů, které vám pomůžou provádět úlohy, které zahrnují izolované úložiště:</span><span class="sxs-lookup"><span data-stu-id="a2a7b-313">The .NET Framework provides three classes in the <xref:System.IO.IsolatedStorage> namespace to help you perform tasks that involve isolated storage:</span></span>

- <span data-ttu-id="a2a7b-314"><xref:System.IO.IsolatedStorage.IsolatedStorageFile>, je odvozen z <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType> a poskytuje základní správu uložených sestavení a souborů aplikace.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-314"><xref:System.IO.IsolatedStorage.IsolatedStorageFile>, derives from <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType> and provides basic management of stored assembly and application files.</span></span> <span data-ttu-id="a2a7b-315">Instance <xref:System.IO.IsolatedStorage.IsolatedStorageFile> třídy představuje jedno úložiště umístěné v systému souborů.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-315">An instance of the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class represents a single store located in the file system.</span></span>

- <span data-ttu-id="a2a7b-316"><xref:System.IO.IsolatedStorage.IsolatedStorageFileStream>je odvozen z <xref:System.IO.FileStream?displayProperty=nameWithType> a poskytuje přístup k souborům v úložišti.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-316"><xref:System.IO.IsolatedStorage.IsolatedStorageFileStream> derives from <xref:System.IO.FileStream?displayProperty=nameWithType> and provides access to the files in a store.</span></span>

- <span data-ttu-id="a2a7b-317"><xref:System.IO.IsolatedStorage.IsolatedStorageScope>je výčet, který umožňuje vytvořit a vybrat úložiště s příslušným typem izolace.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-317"><xref:System.IO.IsolatedStorage.IsolatedStorageScope> is an enumeration that enables you to create and select a store with the appropriate isolation type.</span></span>

<span data-ttu-id="a2a7b-318">Třídy izolovaného úložiště umožňují vytvořit, provádět výčty a odstranit izolované úložiště.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-318">The isolated storage classes enable you to create, enumerate, and delete isolated storage.</span></span> <span data-ttu-id="a2a7b-319">Metody pro provádění těchto úloh jsou k dispozici prostřednictvím <xref:System.IO.IsolatedStorage.IsolatedStorageFile> objektu.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-319">The methods for performing these tasks are available through the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> object.</span></span> <span data-ttu-id="a2a7b-320">Některé operace vyžadují, abyste měli <xref:System.Security.Permissions.IsolatedStorageFilePermission> oprávnění, které představuje právo na správu izolovaného úložiště. pro přístup k souboru nebo adresáři možná budete muset mít i oprávnění operačního systému.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-320">Some operations require you to have the <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission that represents the right to administer isolated storage; you might also need to have operating system rights to access the file or directory.</span></span>

<span data-ttu-id="a2a7b-321">Řadu příkladů, které předvádějí běžné úlohy izolovaného úložiště, najdete v tématech s postupy uvedenými v části [Příbuzná témata](#related_topics).</span><span class="sxs-lookup"><span data-stu-id="a2a7b-321">For a series of examples that demonstrate common isolated storage tasks, see the how-to topics listed in [Related Topics](#related_topics).</span></span>

<a name="scenarios_for_isolated_storage"></a>

## <a name="scenarios-for-isolated-storage"></a><span data-ttu-id="a2a7b-322">Scénáře pro izolované úložiště</span><span class="sxs-lookup"><span data-stu-id="a2a7b-322">Scenarios for Isolated Storage</span></span>

<span data-ttu-id="a2a7b-323">Izolované úložiště lze využít v mnoha situacích, mezi které patří tyto čtyři scénáře:</span><span class="sxs-lookup"><span data-stu-id="a2a7b-323">Isolated storage is useful in many situations, including these four scenarios:</span></span>

- <span data-ttu-id="a2a7b-324">Stažené ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-324">Downloaded controls.</span></span> <span data-ttu-id="a2a7b-325">Ovládací prvky spravovaného kódu stažené z Internetu nemohou zapisovat na pevný disk pomocí běžných vstupně-výstupních tříd, mohou však používat izolované úložiště pro uchování uživatelských nastavení a stavů aplikace.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-325">Managed code controls downloaded from the Internet are not allowed to write to the hard drive through normal I/O classes, but they can use isolated storage to persist users' settings and application states.</span></span>

- <span data-ttu-id="a2a7b-326">Úložiště sdílených komponent.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-326">Shared component storage.</span></span> <span data-ttu-id="a2a7b-327">Komponenty sdílené mezi aplikacemi mohou používat izolované úložiště pro poskytování řízeného přístupu k úložišti dat.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-327">Components that are shared between applications can use isolated storage to provide controlled access to data stores.</span></span>

- <span data-ttu-id="a2a7b-328">Serverové úložiště.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-328">Server storage.</span></span> <span data-ttu-id="a2a7b-329">Serverové aplikace mohou používat izolované úložiště pro poskytování individuálních úložišť pro velký počet uživatelů, kteří vytvářejí požadavky na aplikaci.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-329">Server applications can use isolated storage to provide individual stores for a large number of users making requests to the application.</span></span> <span data-ttu-id="a2a7b-330">Vzhledem k tomu, že izolované úložiště je vždy odděleno od uživatele, musí server zosobnit uživatele, který vytváří daný požadavek.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-330">Because isolated storage is always segregated by user, the server must impersonate the user making the request.</span></span> <span data-ttu-id="a2a7b-331">V tomto případě se data izolují na základě identity objektu zabezpečení, který je stejnou identitou, kterou aplikace používá k rozlišení mezi svými uživateli.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-331">In this case, data is isolated based on the identity of the principal, which is the same identity the application uses to distinguish between its users.</span></span>

- <span data-ttu-id="a2a7b-332">Cestovní profily.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-332">Roaming.</span></span> <span data-ttu-id="a2a7b-333">Aplikace mohou izolované úložiště používat také s cestovními profily uživatelů.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-333">Applications can also use isolated storage with roaming user profiles.</span></span> <span data-ttu-id="a2a7b-334">Díky tomu se mohou izolovaná úložiště přesouvat spolu s profilem.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-334">This allows a user's isolated stores to roam with the profile.</span></span>

<span data-ttu-id="a2a7b-335">Izolované úložiště byste neměli používat v následujících situacích:</span><span class="sxs-lookup"><span data-stu-id="a2a7b-335">You should not use isolated storage in the following situations:</span></span>

- <span data-ttu-id="a2a7b-336">Pro ukládání vysoce citlivých údajů, jako jsou například nezašifrované klíče nebo hesla, protože izolované úložiště není chráněno před vysoce důvěryhodným kódem, nespravovaným kódem nebo před důvěryhodnými uživateli počítače.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-336">To store high-value secrets, such as unencrypted keys or passwords, because isolated storage is not protected from highly trusted code, from unmanaged code, or from trusted users of the computer.</span></span>

- <span data-ttu-id="a2a7b-337">Pro uložení kódu.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-337">To store code.</span></span>

- <span data-ttu-id="a2a7b-338">Pro uložení nastavení konfigurace a nasazení, které řídí správci.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-338">To store configuration and deployment settings, which administrators control.</span></span> <span data-ttu-id="a2a7b-339">(Předvolby uživatele se nepovažují za nastavení konfigurace, protože je správci neovládají.)</span><span class="sxs-lookup"><span data-stu-id="a2a7b-339">(User preferences are not considered to be configuration settings because administrators do not control them.)</span></span>

<span data-ttu-id="a2a7b-340">Mnoho aplikací používá databáze k ukládání a izolaci dat. V tomto případě jeden nebo více řádků v databázi může představovat úložiště pro konkrétního uživatele.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-340">Many applications use a database to store and isolate data, in which case one or more rows in a database might represent storage for a specific user.</span></span> <span data-ttu-id="a2a7b-341">Můžete se rozhodnout pro používání izolovaného úložiště namísto databáze, pokud je počet uživatelů nízký, pokud je režie používání databáze značná, nebo pokud neexistuje žádné zařízení pro databázi.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-341">You might choose to use isolated storage instead of a database when the number of users is small, when the overhead of using a database is significant, or when no database facility exists.</span></span> <span data-ttu-id="a2a7b-342">Také pokud aplikace vyžaduje úložiště, které je pružnější a složitější než možnosti řádku v databázi. Izolované úložiště může poskytnout reálnou alternativu.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-342">Also, when the application requires storage that is more flexible and complex than what a row in a database provides, isolated storage can provide a viable alternative.</span></span>

<a name="related_topics"></a>

## <a name="related-topics"></a><span data-ttu-id="a2a7b-343">Související témata</span><span class="sxs-lookup"><span data-stu-id="a2a7b-343">Related Topics</span></span>

|<span data-ttu-id="a2a7b-344">Nadpis</span><span class="sxs-lookup"><span data-stu-id="a2a7b-344">Title</span></span>|<span data-ttu-id="a2a7b-345">Popis</span><span class="sxs-lookup"><span data-stu-id="a2a7b-345">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="a2a7b-346">Typy izolace</span><span class="sxs-lookup"><span data-stu-id="a2a7b-346">Types of Isolation</span></span>](types-of-isolation.md)|<span data-ttu-id="a2a7b-347">Popisuje různé typy izolace.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-347">Describes the different types of isolation.</span></span>|
|[<span data-ttu-id="a2a7b-348">Postupy: Získávání úložišť pro izolované úložiště</span><span class="sxs-lookup"><span data-stu-id="a2a7b-348">How to: Obtain Stores for Isolated Storage</span></span>](how-to-obtain-stores-for-isolated-storage.md)|<span data-ttu-id="a2a7b-349">Poskytuje příklad použití <xref:System.IO.IsolatedStorage.IsolatedStorageFile> třídy pro získání úložiště izolovaného uživatelem a sestavením.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-349">Provides an example of using the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class to obtain a store isolated by user and assembly.</span></span>|
|[<span data-ttu-id="a2a7b-350">Postupy: Vytvoření výčtu úložišť pro izolované úložiště</span><span class="sxs-lookup"><span data-stu-id="a2a7b-350">How to: Enumerate Stores for Isolated Storage</span></span>](how-to-enumerate-stores-for-isolated-storage.md)|<span data-ttu-id="a2a7b-351">Ukazuje, jak použít <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A?displayProperty=nameWithType> metodu pro výpočet velikosti veškerého izolovaného úložiště pro uživatele.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-351">Shows how to use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A?displayProperty=nameWithType> method to calculate the size of all isolated storage for the user.</span></span>|
|[<span data-ttu-id="a2a7b-352">Postupy: Odstraňování úložišť v izolovaném úložišti</span><span class="sxs-lookup"><span data-stu-id="a2a7b-352">How to: Delete Stores in Isolated Storage</span></span>](how-to-delete-stores-in-isolated-storage.md)|<span data-ttu-id="a2a7b-353">Ukazuje, jak použít <xref:System.IO.IsolatedStorage.IsolatedStorageFile.Remove%2A?displayProperty=nameWithType> metodu dvěma různými způsoby odstranění izolovaných úložišť.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-353">Shows how to use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.Remove%2A?displayProperty=nameWithType> method in two different ways to delete isolated stores.</span></span>|
|[<span data-ttu-id="a2a7b-354">Postupy: Příprava na vyčerpání volného prostoru pomocí izolovaného úložiště</span><span class="sxs-lookup"><span data-stu-id="a2a7b-354">How to: Anticipate Out-of-Space Conditions with Isolated Storage</span></span>](how-to-anticipate-out-of-space-conditions-with-isolated-storage.md)|<span data-ttu-id="a2a7b-355">Zobrazuje způsob měření zbývající kapacity v izolovaném úložišti.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-355">Shows how to measure the remaining space in an isolated store.</span></span>|
|[<span data-ttu-id="a2a7b-356">Postupy: Vytváření souborů a adresářů v izolovaném úložišti</span><span class="sxs-lookup"><span data-stu-id="a2a7b-356">How to: Create Files and Directories in Isolated Storage</span></span>](how-to-create-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="a2a7b-357">Obsahuje některé příklady vytváření souborů a adresářů v izolovaném úložišti.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-357">Provides some examples of creating files and directories in an isolated store.</span></span>|
|[<span data-ttu-id="a2a7b-358">Postupy: Hledání existujících souborů a adresářů v izolovaném úložišti</span><span class="sxs-lookup"><span data-stu-id="a2a7b-358">How to: Find Existing Files and Directories in Isolated Storage</span></span>](how-to-find-existing-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="a2a7b-359">Znázorňuje způsob čtení struktury adresářů a souborů v izolovaném úložišti.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-359">Demonstrates how to read the directory structure and files in isolated storage.</span></span>|
|[<span data-ttu-id="a2a7b-360">Postupy: Čtení a zápis do souborů v izolovaném úložišti</span><span class="sxs-lookup"><span data-stu-id="a2a7b-360">How to: Read and Write to Files in Isolated Storage</span></span>](how-to-read-and-write-to-files-in-isolated-storage.md)|<span data-ttu-id="a2a7b-361">Poskytuje příklad zápisu řetězce do souboru izolovaného úložiště a jeho zpětné čtení.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-361">Provides an example of writing a string to an isolated storage file and reading it back.</span></span>|
|[<span data-ttu-id="a2a7b-362">Postupy: Odstraňování souborů a adresářů v izolovaném úložišti</span><span class="sxs-lookup"><span data-stu-id="a2a7b-362">How to: Delete Files and Directories in Isolated Storage</span></span>](how-to-delete-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="a2a7b-363">Znázorňuje způsob odstraňování souborů a adresářů izolovaného úložiště.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-363">Demonstrates how to delete isolated storage files and directories.</span></span>|
|[<span data-ttu-id="a2a7b-364">Vstupně-výstupní operace se soubory a datovým proudem</span><span class="sxs-lookup"><span data-stu-id="a2a7b-364">File and Stream I/O</span></span>](index.md)|<span data-ttu-id="a2a7b-365">Objasňuje způsob vytváření synchronního a asynchronního přístupu k datovým proudům souborů a dat.</span><span class="sxs-lookup"><span data-stu-id="a2a7b-365">Explains how you can perform synchronous and asynchronous file and data stream access.</span></span>|

<a name="reference"></a>

## <a name="reference"></a><span data-ttu-id="a2a7b-366">Reference</span><span class="sxs-lookup"><span data-stu-id="a2a7b-366">Reference</span></span>

- <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageFile?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageFileStream?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageScope?displayProperty=nameWithType>
