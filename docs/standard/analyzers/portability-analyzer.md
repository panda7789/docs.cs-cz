---
title: Analyzátor přenositelnosti .NET – .NET
description: Naučte se používat nástroj Analyzátor přenositelnosti .NET k vyhodnocení způsobu, jakým je přenos kódu mezi různými implementacemi .NET, včetně .NET Core, .NET Standard, UWP a Xamarin.
ms.date: 09/13/2019
ms.technology: dotnet-standard
ms.assetid: 0375250f-5704-4993-a6d5-e21c499cea1e
ms.openlocfilehash: d2a9551565e9ef0a2ed76960c869829fc2e86a1f
ms.sourcegitcommit: 3824ff187947572b274b9715b60c11269335c181
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/17/2020
ms.locfileid: "84903607"
---
# <a name="the-net-portability-analyzer"></a><span data-ttu-id="3beb0-103">Analyzátor přenositelnosti .NET</span><span class="sxs-lookup"><span data-stu-id="3beb0-103">The .NET Portability Analyzer</span></span>

<span data-ttu-id="3beb0-104">Chcete, aby vaše knihovny podporovaly více platforem?</span><span class="sxs-lookup"><span data-stu-id="3beb0-104">Want to make your libraries support multi-platform?</span></span> <span data-ttu-id="3beb0-105">Chcete zjistit, kolik práce je třeba udělat, aby vaše aplikace .NET Framework běžela v .NET Core?</span><span class="sxs-lookup"><span data-stu-id="3beb0-105">Want to see how much work is required to make your .NET Framework application run on .NET Core?</span></span> <span data-ttu-id="3beb0-106">[Analyzátor přenositelnosti .NET](https://github.com/microsoft/dotnet-apiport) je nástroj, který analyzuje sestavení a poskytuje podrobnou zprávu o rozhraních API .NET, která chybí pro aplikace nebo knihovny, které mají být přenosné na zadané cílené platformě .NET.</span><span class="sxs-lookup"><span data-stu-id="3beb0-106">The [.NET Portability Analyzer](https://github.com/microsoft/dotnet-apiport) is a tool that analyzes assemblies and provides a detailed report on .NET APIs that are missing for the applications or libraries to be portable on your specified targeted .NET platforms.</span></span> <span data-ttu-id="3beb0-107">Analyzátor přenositelnosti se nabízí jako [rozšíření sady Visual Studio](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer), které analyzuje jedno sestavení na projekt a jako [konzolovou aplikaci ApiPort](https://aka.ms/apiportdownload), která analyzuje sestavení podle zadaných souborů nebo adresáře.</span><span class="sxs-lookup"><span data-stu-id="3beb0-107">The Portability Analyzer is offered as a [Visual Studio Extension](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer), which analyzes one assembly per project, and as a [ApiPort console app](https://aka.ms/apiportdownload), which analyzes assemblies by specified files or directory.</span></span>

<span data-ttu-id="3beb0-108">Po převedení projektu na cílení na novou platformu, jako je například .NET Core, můžete použít [Nástroj analyzátoru rozhraní API](api-analyzer.md) založený na Roslyn k identifikaci vyvolání výjimek rozhraní API <xref:System.PlatformNotSupportedException> a dalších problémů s kompatibilitou.</span><span class="sxs-lookup"><span data-stu-id="3beb0-108">Once you've converted your project to target the new platform, like .NET Core, you can use the Roslyn-based [API Analyzer tool](api-analyzer.md) to identify APIs throwing <xref:System.PlatformNotSupportedException> exceptions and other compatibility issues.</span></span>

## <a name="common-targets"></a><span data-ttu-id="3beb0-109">Společné cíle</span><span class="sxs-lookup"><span data-stu-id="3beb0-109">Common targets</span></span>

- <span data-ttu-id="3beb0-110">[.NET Core](../../core/index.yml): má modulární návrh, podporuje souběžnou instalaci a cílí na scénáře pro různé platformy.</span><span class="sxs-lookup"><span data-stu-id="3beb0-110">[.NET Core](../../core/index.yml): Has a modular design, supports side-by-side installation, and targets cross-platform scenarios.</span></span> <span data-ttu-id="3beb0-111">Souběžná instalace umožňuje přijímat nové verze .NET Core bez porušení dalších aplikací.</span><span class="sxs-lookup"><span data-stu-id="3beb0-111">Side-by-side installation allows you to adopt new .NET Core versions without breaking other apps.</span></span> <span data-ttu-id="3beb0-112">Pokud vaším cílem je přenést aplikaci do .NET Core a podporovat více platforem, jedná se o doporučený cíl.</span><span class="sxs-lookup"><span data-stu-id="3beb0-112">If your goal is to port your app to .NET Core and support multiple platforms, this is the recommended target.</span></span>
- <span data-ttu-id="3beb0-113">. [NET Standard](../net-standard.md): zahrnuje rozhraní api pro .NET Standard dostupná ve všech implementacích .NET.</span><span class="sxs-lookup"><span data-stu-id="3beb0-113">.[NET Standard](../net-standard.md): Includes the .NET Standard APIs available on all .NET implementations.</span></span> <span data-ttu-id="3beb0-114">Pokud je vaším cílem, aby se vaše knihovna spouštěla na všech platformách podporovaných .NET, je to doporučený cíl.</span><span class="sxs-lookup"><span data-stu-id="3beb0-114">If your goal is to make your library run on all .NET supported platforms, this is recommended target.</span></span>
- <span data-ttu-id="3beb0-115">[ASP.NET Core](/aspnet/core): moderní webové rozhraní postavené na .NET Core.</span><span class="sxs-lookup"><span data-stu-id="3beb0-115">[ASP.NET Core](/aspnet/core): A modern web-framework built on .NET Core.</span></span> <span data-ttu-id="3beb0-116">Pokud je vaším cílem, aby vaše webová aplikace podporovala více platforem na .NET Core, jedná se o doporučený cíl.</span><span class="sxs-lookup"><span data-stu-id="3beb0-116">If your goal is to port your web app to .NET Core to support multiple platforms, this is the recommended target.</span></span>
- <span data-ttu-id="3beb0-117">Rozšíření .NET Core + [Platform](../../core/porting/windows-compat-pack.md): Kromě sady Windows Compatibility Pack obsahuje rozhraní API .NET Core, které poskytuje mnoho dostupných technologií .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="3beb0-117">.NET Core + [Platform Extensions](../../core/porting/windows-compat-pack.md): Includes the .NET Core APIs in addition to the Windows Compatibility Pack, which provides many of the .NET Framework available technologies.</span></span> <span data-ttu-id="3beb0-118">Toto je doporučený cíl pro přenos vaší aplikace z .NET Framework do .NET Core ve Windows.</span><span class="sxs-lookup"><span data-stu-id="3beb0-118">This is a recommended target for porting your app from .NET Framework to .NET Core on Windows.</span></span>
- <span data-ttu-id="3beb0-119">Rozšíření .NET Standard + [platforma](../../core/porting/windows-compat-pack.md): Kromě sady Windows Compatibility Pack zahrnuje i rozhraní API .NET Standard, která poskytují mnoho dostupných technologií .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="3beb0-119">.NET Standard + [Platform Extensions](../../core/porting/windows-compat-pack.md): Includes the .NET Standard APIs in addition to the Windows Compatibility Pack, which provides many of the .NET Framework available technologies.</span></span> <span data-ttu-id="3beb0-120">Toto je doporučený cíl pro přenos knihovny z .NET Framework do .NET Core ve Windows.</span><span class="sxs-lookup"><span data-stu-id="3beb0-120">This is a recommended target for porting your library from .NET Framework to .NET Core on Windows.</span></span>

## <a name="how-to-use-the-net-portability-analyzer"></a><span data-ttu-id="3beb0-121">Jak používat analyzátor přenositelnosti .NET</span><span class="sxs-lookup"><span data-stu-id="3beb0-121">How to use the .NET Portability Analyzer</span></span>

<span data-ttu-id="3beb0-122">Pokud chcete začít používat analyzátor přenositelnosti .NET v aplikaci Visual Studio, musíte nejdřív stáhnout a nainstalovat rozšíření z [Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer).</span><span class="sxs-lookup"><span data-stu-id="3beb0-122">To begin using the .NET Portability Analyzer in Visual Studio, you first need to download and install the extension from the [Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer).</span></span> <span data-ttu-id="3beb0-123">Funguje v sadě Visual Studio 2017 a novějších verzích.</span><span class="sxs-lookup"><span data-stu-id="3beb0-123">It works on Visual Studio 2017 and later versions.</span></span> <span data-ttu-id="3beb0-124">Nakonfigurujte ho v aplikaci Visual Studio pomocí možnosti **Analýza**  >  **Nastavení analyzátoru přenositelnosti** a vyberte cílové platformy, které jsou platformami a verzemi .NET, u kterých chcete vyhodnotit přenositelnost mezer v porovnání s platformou/verzí, se kterou je vaše aktuální sestavení sestavené.</span><span class="sxs-lookup"><span data-stu-id="3beb0-124">Configure it in Visual Studio via **Analyze** > **Portability Analyzer Settings** and select your Target Platforms, which are the .NET platforms/versions that you want to evaluate the portability gaps comparing with the platform/version that your current assembly is built with.</span></span>

![Snímek obrazovky s analyzátorem přenositelnosti](./media/portability-analyzer/portability-screenshot.png)

<span data-ttu-id="3beb0-126">Můžete také použít konzolovou aplikaci ApiPort, kterou si můžete stáhnout z [úložiště ApiPort](https://aka.ms/apiportdownload).</span><span class="sxs-lookup"><span data-stu-id="3beb0-126">You can also use the ApiPort console application, download it from [ApiPort repository](https://aka.ms/apiportdownload).</span></span> <span data-ttu-id="3beb0-127">Pomocí `listTargets` Možnosti příkaz můžete zobrazit dostupný cílový seznam a pak vybrat cílové platformy zadáním `-t` Možnosti nebo pomocí `--target` příkazu.</span><span class="sxs-lookup"><span data-stu-id="3beb0-127">You can use `listTargets` command option to display the available target list, then pick target platforms by specifying `-t` or `--target` command option.</span></span>

### <a name="solution-wide-view"></a><span data-ttu-id="3beb0-128">Zobrazení v celé řešení</span><span class="sxs-lookup"><span data-stu-id="3beb0-128">Solution wide view</span></span>

<span data-ttu-id="3beb0-129">Užitečným krokem při analýze řešení s mnoha projekty by bylo vizualizovat závislosti, abyste pochopili, která podmnožina sestavení závisí na tom, co.</span><span class="sxs-lookup"><span data-stu-id="3beb0-129">A useful step in analyzing a solution with many projects would be to visualize the dependencies to understand which subset of assemblies depend on what.</span></span> <span data-ttu-id="3beb0-130">Obecně se doporučuje použít výsledky analýzy v rámci nejnižšího přístupu počínaje koncovými uzly v grafu závislostí.</span><span class="sxs-lookup"><span data-stu-id="3beb0-130">The general recommendation is to apply the results of the analysis in a bottom-up approach starting with the leaf nodes in a dependency graph.</span></span>

<span data-ttu-id="3beb0-131">K načtení můžete použít následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="3beb0-131">To retrieve this, you may run the following command:</span></span>

```
ApiPort.exe analyze -r DGML -f [directory or file]
```

<span data-ttu-id="3beb0-132">Výsledek by měl vypadat takto jako při otevření v sadě Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="3beb0-132">A result of this would look like the following when opened in Visual Studio:</span></span>

![Snímek obrazovky s analýzou DGML](./media/portability-analyzer/dgml-example.png)

### <a name="analyze-portability"></a><span data-ttu-id="3beb0-134">Analýza přenositelnosti</span><span class="sxs-lookup"><span data-stu-id="3beb0-134">Analyze portability</span></span>
<span data-ttu-id="3beb0-135">Chcete-li analyzovat celý projekt v aplikaci Visual Studio, klikněte pravým tlačítkem myši na projekt v **Průzkumník řešení** a vyberte možnost **analyzovat přenositelnost sestavení**.</span><span class="sxs-lookup"><span data-stu-id="3beb0-135">To analyze your entire project in Visual Studio, right-click on your project in **Solution Explorer** and select **Analyze Assembly Portability**.</span></span> <span data-ttu-id="3beb0-136">V opačném případě přejděte do nabídky **analyzovat** a vyberte možnost **analyzovat přenositelnost sestavení**.</span><span class="sxs-lookup"><span data-stu-id="3beb0-136">Otherwise, go to the **Analyze** menu and select **Analyze Assembly Portability**.</span></span> <span data-ttu-id="3beb0-137">Odtud vyberte spustitelný soubor nebo knihovnu DLL vašeho projektu.</span><span class="sxs-lookup"><span data-stu-id="3beb0-137">From there, select your project's executable or DLL.</span></span>

![Snímek obrazovky analyzátoru přenositelnosti z Průzkumník řešení.](./media/portability-analyzer/portability-solution-explorer.png)

<span data-ttu-id="3beb0-139">Můžete také použít [konzolovou aplikaci ApiPort](https://aka.ms/apiportdownload).</span><span class="sxs-lookup"><span data-stu-id="3beb0-139">You can also use the [ApiPort console app](https://aka.ms/apiportdownload).</span></span>

- <span data-ttu-id="3beb0-140">Chcete-li analyzovat aktuální adresář, zadejte následující příkaz:`ApiPort.exe analyze -f .`</span><span class="sxs-lookup"><span data-stu-id="3beb0-140">Type the following command to analyze the current directory: `ApiPort.exe analyze -f .`</span></span>
- <span data-ttu-id="3beb0-141">Chcete-li analyzovat konkrétní seznam souborů. dll, zadejte následující příkaz:`ApiPort.exe analyze -f first.dll -f second.dll -f third.dll`</span><span class="sxs-lookup"><span data-stu-id="3beb0-141">To analyze a specific list of .dll files, type the following command: `ApiPort.exe analyze -f first.dll -f second.dll -f third.dll`</span></span>
- <span data-ttu-id="3beb0-142">Spusťte `ApiPort.exe -?` , abyste získali další nápovědu.</span><span class="sxs-lookup"><span data-stu-id="3beb0-142">Run `ApiPort.exe -?` to get more help</span></span>

<span data-ttu-id="3beb0-143">Doporučujeme, abyste zahrnuli všechny související soubory exe a DLL, které vlastníte a chcete portovat, a vyloučíte soubory, na kterých vaše aplikace závisí, ale nevlastníte a nemůžete port.</span><span class="sxs-lookup"><span data-stu-id="3beb0-143">It is recommended that you include all the related exe and dll files that you own and want to port, and exclude the files that your app depends on, but you don't own and can't port.</span></span> <span data-ttu-id="3beb0-144">Tím získáte nejvíc relevantní sestavu přenositelnosti.</span><span class="sxs-lookup"><span data-stu-id="3beb0-144">This will give you most relevant portability report.</span></span>

### <a name="view-and-interpret-portability-result"></a><span data-ttu-id="3beb0-145">Zobrazit a interpretovat výsledek přenositelnosti</span><span class="sxs-lookup"><span data-stu-id="3beb0-145">View and interpret portability result</span></span>

<span data-ttu-id="3beb0-146">V sestavě se zobrazí pouze rozhraní API, která nejsou v cílové platformě podporována.</span><span class="sxs-lookup"><span data-stu-id="3beb0-146">Only APIs that are unsupported by a Target Platform appear in the report.</span></span>
<span data-ttu-id="3beb0-147">Po spuštění analýzy v aplikaci Visual Studio se zobrazí odkaz na soubor sestavy přenositelnosti .NET.</span><span class="sxs-lookup"><span data-stu-id="3beb0-147">After running the analysis in Visual Studio, you'll see your .NET Portability report file link pops up.</span></span> <span data-ttu-id="3beb0-148">Pokud jste použili [konzolovou aplikaci ApiPort](https://aka.ms/apiportdownload), vaše sestava přenositelnosti .NET se uloží jako soubor ve formátu, který jste zadali.</span><span class="sxs-lookup"><span data-stu-id="3beb0-148">If you used the [ApiPort console app](https://aka.ms/apiportdownload), your .NET Portability report is saved as a file in the format you specified.</span></span> <span data-ttu-id="3beb0-149">Výchozí hodnota je v souboru aplikace Excel (*. xlsx*) ve vašem aktuálním adresáři.</span><span class="sxs-lookup"><span data-stu-id="3beb0-149">The default is in an Excel file (*.xlsx*) in your current directory.</span></span>

#### <a name="portability-summary"></a><span data-ttu-id="3beb0-150">Souhrn přenositelnosti</span><span class="sxs-lookup"><span data-stu-id="3beb0-150">Portability Summary</span></span>

![Snímek obrazovky souhrnu přenositelnosti](./media/portability-analyzer/api-catalog-portablility-summary.png)

<span data-ttu-id="3beb0-152">V části Souhrn přenositelnosti sestavy se zobrazuje procento přenositelnosti pro každé sestavení zahrnuté v běhu.</span><span class="sxs-lookup"><span data-stu-id="3beb0-152">The Portability Summary section of the report shows the portability percentage for each assembly included in the run.</span></span> <span data-ttu-id="3beb0-153">V předchozím příkladu je 71,24% .NET Framework rozhraní API používaných v `svcutil` aplikaci dostupné v rozšířeních .NET Core + Platform.</span><span class="sxs-lookup"><span data-stu-id="3beb0-153">In the previous example, 71.24% of the .NET Framework APIs used in the `svcutil` app are available in .NET Core + Platform Extensions.</span></span> <span data-ttu-id="3beb0-154">Pokud spustíte nástroj Analyzátor přenositelnosti .NET pro více sestavení, musí mít každé sestavení řádek v sestavě souhrn přenositelnosti.</span><span class="sxs-lookup"><span data-stu-id="3beb0-154">If you run the .NET Portability Analyzer tool against multiple assemblies, each assembly should have a row in the Portability Summary report.</span></span>

#### <a name="details"></a><span data-ttu-id="3beb0-155">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="3beb0-155">Details</span></span>

![Snímek obrazovky s podrobnostmi o přenositelnosti](./media/portability-analyzer/api-catalog-portablility-details.png)

<span data-ttu-id="3beb0-157">V části **Podrobnosti** sestavy jsou uvedena chybějící rozhraní API ze všech vybraných **cílových platforem**.</span><span class="sxs-lookup"><span data-stu-id="3beb0-157">The **Details** section of the report lists the APIs missing from any of the selected **Targeted Platforms**.</span></span>

- <span data-ttu-id="3beb0-158">Cílový typ: typ má chybějící rozhraní API z cílové platformy.</span><span class="sxs-lookup"><span data-stu-id="3beb0-158">Target type: the type has missing API from a Target Platform</span></span>
- <span data-ttu-id="3beb0-159">Cílový člen: v cílové platformě chybí metoda.</span><span class="sxs-lookup"><span data-stu-id="3beb0-159">Target member: the method is missing from a Target Platform</span></span>
- <span data-ttu-id="3beb0-160">Název sestavení: .NET Framework sestavení, ve kterém chybí rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="3beb0-160">Assembly name: the .NET Framework assembly that the missing API lives in.</span></span>
- <span data-ttu-id="3beb0-161">Každá z vybraných cílových platforem je jeden sloupec, jako je například hodnota ".NET Core": "Nepodporovaná" znamená, že rozhraní API není na této cílové platformě podporováno.</span><span class="sxs-lookup"><span data-stu-id="3beb0-161">Each of the selected Target Platforms is one column, such as ".NET Core": "Not supported" value means the API is not supported on this Target Platform.</span></span>
- <span data-ttu-id="3beb0-162">Doporučené změny: Doporučené rozhraní API nebo technologie, na které se má změnit.</span><span class="sxs-lookup"><span data-stu-id="3beb0-162">Recommended Changes: the recommended API or technology to change to.</span></span> <span data-ttu-id="3beb0-163">V současné době je toto pole prázdné nebo zastaralé pro mnoho rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="3beb0-163">Currently, this field is empty or out of date for many APIs.</span></span> <span data-ttu-id="3beb0-164">Vzhledem k velkému počtu rozhraní API máme důležitou výzvu k tomu, aby byla v aktuálním stavu.</span><span class="sxs-lookup"><span data-stu-id="3beb0-164">Due to the large number of APIs, we have a significant challenge to keep it up to date.</span></span> <span data-ttu-id="3beb0-165">Prohlížíme si alternativní řešení, abychom zákazníkům poskytli užitečné informace.</span><span class="sxs-lookup"><span data-stu-id="3beb0-165">We're looking at alternative solutions to provide helpful information to customers.</span></span>

#### <a name="missing-assemblies"></a><span data-ttu-id="3beb0-166">Chybějící sestavení</span><span class="sxs-lookup"><span data-stu-id="3beb0-166">Missing Assemblies</span></span>

![Snímek obrazovky s chybějícími sestaveními](./media/portability-analyzer/api-catalog-missing-assemblies.png)

<span data-ttu-id="3beb0-168">V sestavě můžete najít část chybějící sestavení.</span><span class="sxs-lookup"><span data-stu-id="3beb0-168">You may find a Missing Assemblies section in your report.</span></span> <span data-ttu-id="3beb0-169">Tato část obsahuje seznam sestavení, na která odkazují vaše analyzovaná sestavení a které nebyly analyzovány.</span><span class="sxs-lookup"><span data-stu-id="3beb0-169">This section contains a list of assemblies that are referenced by your analyzed assemblies and were not analyzed.</span></span> <span data-ttu-id="3beb0-170">Pokud se jedná o sestavení, které vlastníte, zahrňte ho do spuštění analyzátoru přenositelnosti rozhraní API, abyste pro něj mohli získat podrobnou sestavu přenositelnosti na úrovni rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="3beb0-170">If it's an assembly that you own, include it in the API portability analyzer run so that you can get a detailed, API-level portability report for it.</span></span> <span data-ttu-id="3beb0-171">Pokud se jedná o knihovnu třetí strany, podívejte se, jestli existuje novější verze, která podporuje vaši cílovou platformu, a zvažte přechod na novější verzi.</span><span class="sxs-lookup"><span data-stu-id="3beb0-171">If it's a third-party library, check if there is a newer version that supports your target platform, and consider moving to the newer version.</span></span> <span data-ttu-id="3beb0-172">Seznam by nakonec měl zahrnovat všechna sestavení třetích stran, na kterých vaše aplikace závisí, které mají verzi podporující cílovou platformu.</span><span class="sxs-lookup"><span data-stu-id="3beb0-172">Eventually, the list should include all the third-party assemblies that your app depends on that have a version supporting your target platform.</span></span>

<span data-ttu-id="3beb0-173">Další informace o analyzátoru přenositelnosti .NET najdete v [dokumentaci k GitHubu](https://github.com/Microsoft/dotnet-apiport#documentation) a na [krátkém pohledu na video o analyzátoru přenositelnosti .NET pro](https://channel9.msdn.com/Blogs/Seth-Juarez/A-Brief-Look-at-the-NET-Portability-Analyzer) kanál 9.</span><span class="sxs-lookup"><span data-stu-id="3beb0-173">For more information on the .NET Portability Analyzer, visit the [GitHub documentation](https://github.com/Microsoft/dotnet-apiport#documentation) and [A Brief Look at the .NET Portability Analyzer](https://channel9.msdn.com/Blogs/Seth-Juarez/A-Brief-Look-at-the-NET-Portability-Analyzer) Channel 9 video.</span></span>
