---
title: Přehled nastavení aplikace
ms.date: 03/30/2017
f1_keywords:
- ApplicationsSettingsOverview
helpviewer_keywords:
- application settings [Windows Forms], about application settings
- dynamic properties
- user preferences [Windows Forms], tracking
ms.assetid: 0dd8bca5-a6bf-4ac4-8eec-5725d08b38dc
ms.openlocfilehash: ec73fb61f0a4b43e47936c864e73355ee777aeb7
ms.sourcegitcommit: cf9515122fce716bcfb6618ba366e39b5a2eb81e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/15/2019
ms.locfileid: "69040427"
---
# <a name="application-settings-overview"></a><span data-ttu-id="fa8f2-102">Přehled nastavení aplikace</span><span class="sxs-lookup"><span data-stu-id="fa8f2-102">Application Settings Overview</span></span>
<span data-ttu-id="fa8f2-103">Toto téma popisuje, jak vytvořit a uložit data nastavení jménem vaší aplikace a uživatelů.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-103">This topic discusses how to create and store settings data on behalf of your application and your users.</span></span>

 <span data-ttu-id="fa8f2-104">Funkce nastavení aplikace model Windows Forms umožňuje snadno vytvořit, Uložit a udržovat vlastní aplikace a uživatelské předvolby v klientském počítači.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-104">The Application Settings feature of Windows Forms makes it easy to create, store, and maintain custom application and user preferences on the client computer.</span></span> <span data-ttu-id="fa8f2-105">Pomocí model Windows Forms nastavení aplikace můžete ukládat nejen data aplikací, jako jsou databázové připojovací řetězce, ale také data specifická pro uživatele, jako jsou předvolby uživatelské aplikace.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-105">With Windows Forms application settings, you can store not only application data such as database connection strings, but also user-specific data, such as user application preferences.</span></span> <span data-ttu-id="fa8f2-106">Pomocí sady Visual Studio nebo vlastního spravovaného kódu můžete vytvořit nová nastavení, přečíst si je z a zapsat je na disk, vytvořit jejich vazby k vlastnostem ve formulářích a ověřit data nastavení před načtením a uložením.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-106">Using Visual Studio or custom managed code, you can create new settings, read them from and write them to disk, bind them to properties on your forms, and validate settings data prior to loading and saving.</span></span>

 <span data-ttu-id="fa8f2-107">Nastavení aplikace umožňuje vývojářům ukládat do své aplikace stav pomocí velmi malého vlastního kódu a je náhradou za dynamické vlastnosti v předchozích verzích .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-107">Application settings enables developers to save state in their application using very little custom code, and is a replacement for dynamic properties in previous versions of the .NET Framework.</span></span> <span data-ttu-id="fa8f2-108">Nastavení aplikace obsahuje mnoho vylepšení pro dynamické vlastnosti, které jsou jen pro čtení, pozdní vazby a vyžadují více vlastního programování.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-108">Application settings contains many improvements over dynamic properties, which are read-only, late-bound, and require more custom programming.</span></span> <span data-ttu-id="fa8f2-109">Třídy dynamických vlastností byly uchovány v .NET Framework 2,0, ale jsou to pouze třídy prostředí, které dynamicky zabalí třídy nastavení aplikace.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-109">The dynamic property classes have been retained in .NET Framework 2.0, but they are just shell classes that thinly wrap the application settings classes.</span></span>

## <a name="what-are-application-settings"></a><span data-ttu-id="fa8f2-110">Co jsou nastavení aplikace?</span><span class="sxs-lookup"><span data-stu-id="fa8f2-110">What Are Application Settings?</span></span>
 <span data-ttu-id="fa8f2-111">Vaše aplikace model Windows Forms budou často vyžadovat data, která jsou pro spuštění aplikace velmi důležitá, ale nechcete zahrnout přímo do kódu aplikace.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-111">Your Windows Forms applications will often require data that is critical to running the application, but which you do not want to include directly in the application's code.</span></span> <span data-ttu-id="fa8f2-112">Pokud vaše aplikace používá webovou službu nebo databázový server, můžete tyto informace uložit do samostatného souboru, abyste je mohli v budoucnu změnit bez opětovné kompilace.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-112">If your application uses a Web Service or a database server, you may want to store this information in a separate file, so that you can change it in the future without re-compiling.</span></span> <span data-ttu-id="fa8f2-113">Podobně můžou vaše aplikace vyžadovat ukládání dat, která jsou specifická pro aktuálního uživatele.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-113">Similarly, your applications may require storing data that is specific to the current user.</span></span> <span data-ttu-id="fa8f2-114">Většina aplikací má například předvolby pro uživatele, které přizpůsobují vzhled a chování aplikace.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-114">Most applications, for example, have user preferences that customize the application's appearance and behavior.</span></span>

 <span data-ttu-id="fa8f2-115">Nastavení aplikace řeší obě požadavky tím, že poskytují snadný způsob, jak uložit nastavení s rozsahem aplikace i uživatele v klientském počítači.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-115">Application settings addresses both needs by providing an easy way to store both application-scoped and user-scoped settings on the client computer.</span></span> <span data-ttu-id="fa8f2-116">Pomocí sady Visual Studio nebo editoru kódu můžete definovat nastavení pro danou vlastnost zadáním jejího názvu, datového typu a oboru (aplikace nebo uživatel).</span><span class="sxs-lookup"><span data-stu-id="fa8f2-116">Using Visual Studio or a code editor, you define a setting for a given property by specifying its name, data type, and scope (application or user).</span></span> <span data-ttu-id="fa8f2-117">Můžete dokonce umístit související nastavení do pojmenovaných skupin pro snazší použití a čitelnost.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-117">You can even place related settings into named groups for easier use and readability.</span></span> <span data-ttu-id="fa8f2-118">Po definování jsou tato nastavení trvalá a v době běhu se automaticky čtou do paměti.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-118">Once defined, these settings are persisted and read back into memory automatically at run time.</span></span> <span data-ttu-id="fa8f2-119">Připojitelná architektura umožňuje změnit mechanismus trvalosti, ale ve výchozím nastavení se použije místní systém souborů.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-119">A pluggable architecture enables the persistence mechanism to be changed, but by default, the local file system is used.</span></span>

 <span data-ttu-id="fa8f2-120">Nastavení aplikace funguje tak, že uchovává data jako XML do různých konfiguračních souborů (. config), což odpovídá tom, zda se jedná o nastavení s rozsahem aplikace nebo uživatelem.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-120">Application settings works by persisting data as XML to different configuration (.config) files, corresponding to whether the setting is application-scoped or user-scoped.</span></span> <span data-ttu-id="fa8f2-121">Ve většině případů jsou nastavení s rozsahem aplikace jen pro čtení; vzhledem k tomu, že se jedná o informace o programu, obvykle je nebudete muset přepsat.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-121">In most cases, the application-scoped settings are read-only; because they are program information, you will typically not need to overwrite them.</span></span> <span data-ttu-id="fa8f2-122">Naproti tomu může být nastavení s rozsahem uživatele čtena a zapsána bezpečně za běhu, a to i v případě, že vaše aplikace běží v částečném vztahu důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-122">By contrast, user-scoped settings can be read and written safely at run time, even if your application runs under partial trust.</span></span> <span data-ttu-id="fa8f2-123">Další informace o částečném vztahu důvěryhodnosti naleznete [v tématu Security in model Windows Forms Overview](../security-in-windows-forms-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fa8f2-123">For more information about partial trust, see [Security in Windows Forms Overview](../security-in-windows-forms-overview.md).</span></span>

 <span data-ttu-id="fa8f2-124">Nastavení se ukládají jako fragmenty XML v konfiguračních souborech.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-124">Settings are stored as XML fragments in configuration files.</span></span> <span data-ttu-id="fa8f2-125">Nastavení s rozsahem aplikace jsou reprezentována `<application.Settings>` prvkem a obecně jsou umístěna do souboru *App*. exe. config, kde *aplikace* je název vašeho hlavního spustitelného souboru.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-125">Application-scoped settings are represented by the `<application.Settings>` element, and generally are placed in *app*.exe.config, where *app* is the name of your main executable file.</span></span> <span data-ttu-id="fa8f2-126">Nastavení s rozsahem uživatele je reprezentované `<userSettings>` prvkem a je umístěno v souboru *User*. config, kde *uživatel* je uživatelské jméno osoby, která aktuálně spouští aplikaci.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-126">User-scoped settings are represented by the `<userSettings>` element and are placed in *user*.config, where *user* is the user name of the person currently running the application.</span></span> <span data-ttu-id="fa8f2-127">Soubor *App*. exe. config musíte nasadit do své aplikace. Architektura nastavení vytvoří soubory *User*. config na vyžádání, když aplikace poprvé uloží nastavení pro daného uživatele.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-127">You must deploy the *app*.exe.config file with your application; the settings architecture will create the *user*.config files on demand the first time the application saves settings for that user.</span></span> <span data-ttu-id="fa8f2-128">Můžete také definovat `<userSettings>` blok v rámci *App*. exe. config a poskytnout tak výchozí hodnoty pro nastavení s rozsahem uživatele.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-128">You can also define a `<userSettings>` block within *app*.exe.config to provide default values for user-scoped settings.</span></span>

 <span data-ttu-id="fa8f2-129">Vlastní ovládací prvky mohou také uložit vlastní nastavení implementací <xref:System.Configuration.IPersistComponentSettings> rozhraní, které <xref:System.Configuration.IPersistComponentSettings.SaveSettings%2A> zpřístupňuje metodu.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-129">Custom controls can also save their own settings by implementing the <xref:System.Configuration.IPersistComponentSettings> interface, which exposes the <xref:System.Configuration.IPersistComponentSettings.SaveSettings%2A> method.</span></span> <span data-ttu-id="fa8f2-130">Ovládací prvek <xref:System.Windows.Forms.ToolStrip> model Windows Forms implementuje toto rozhraní, aby bylo možné uložit umístění panelů nástrojů a položek panelu nástrojů mezi relacemi aplikace.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-130">The Windows Forms <xref:System.Windows.Forms.ToolStrip> control implements this interface to save the position of toolbars and toolbar items between application sessions.</span></span> <span data-ttu-id="fa8f2-131">Další informace o vlastních ovládacích prvcích a nastaveních aplikace naleznete v tématu [nastavení aplikace pro vlastní ovládací prvky](application-settings-for-custom-controls.md).</span><span class="sxs-lookup"><span data-stu-id="fa8f2-131">For more information about custom controls and application settings, see [Application Settings for Custom Controls](application-settings-for-custom-controls.md).</span></span>

## <a name="limitations-of-application-settings"></a><span data-ttu-id="fa8f2-132">Omezení nastavení aplikace</span><span class="sxs-lookup"><span data-stu-id="fa8f2-132">Limitations of Application Settings</span></span>
 <span data-ttu-id="fa8f2-133">Nastavení aplikace nemůžete použít v nespravované aplikaci, která je hostitelem .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-133">You cannot use application settings in an unmanaged application that hosts the .NET Framework.</span></span> <span data-ttu-id="fa8f2-134">Nastavení nebudou v takových prostředích fungovat jako doplňky C++ sady Visual Studio systém Microsoft Office, řídí hostování v aplikaci Internet Explorer nebo doplňky a projekty aplikace Microsoft Outlook.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-134">Settings will not work in such environments as Visual Studio add-ins, C++ for Microsoft Office, control hosting in Internet Explorer, or Microsoft Outlook add-ins and projects.</span></span>

 <span data-ttu-id="fa8f2-135">V tuto chvíli nemůžete vytvořit vazby na některé vlastnosti v model Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-135">You currently cannot bind to some properties in Windows Forms.</span></span> <span data-ttu-id="fa8f2-136">Nejvýraznějším příkladem je <xref:System.Windows.Forms.Form.ClientSize%2A> vlastnost, protože vazba na tuto vlastnost by způsobila nepředvídatelné chování v době běhu.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-136">The most notable example is the <xref:System.Windows.Forms.Form.ClientSize%2A> property, as binding to this property would cause unpredictable behavior at run time.</span></span> <span data-ttu-id="fa8f2-137">Tyto problémy obvykle můžete obejít tak, že tato nastavení uložíte a načtete programově.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-137">You can usually work around these issues by saving and loading these settings programmatically.</span></span>

 <span data-ttu-id="fa8f2-138">Nastavení aplikace nemá k dispozici žádné integrované zařízení pro automatické šifrování informací.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-138">Application settings has no built-in facility for encrypting information automatically.</span></span> <span data-ttu-id="fa8f2-139">Nikdy byste neměli ukládat informace související se zabezpečením, jako jsou například hesla databáze, ve formátu prostého textu.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-139">You should never store security-related information, such as database passwords, in clear text.</span></span> <span data-ttu-id="fa8f2-140">Pokud chcete uložit takové důvěrné informace, je jako vývojář aplikace zodpovědný za zajištění zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-140">If you want to store such sensitive information, you as the application developer are responsible for making sure it is secure.</span></span> <span data-ttu-id="fa8f2-141">Pokud chcete uložit připojovací řetězce, doporučujeme použít integrované zabezpečení systému Windows a nemusíte ho používat k pevnému kódování hesla na adresu URL.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-141">If you want to store connection strings, we recommend that you use Windows Integrated Security and not resort to hard-coding passwords into the URL.</span></span> <span data-ttu-id="fa8f2-142">Další informace najdete v tématu [zabezpečení přístupu kódu a ADO.NET](../../data/adonet/code-access-security.md).</span><span class="sxs-lookup"><span data-stu-id="fa8f2-142">For more information, see [Code Access Security and ADO.NET](../../data/adonet/code-access-security.md).</span></span>

## <a name="getting-started-with-application-settings"></a><span data-ttu-id="fa8f2-143">Začínáme s nastavením aplikace</span><span class="sxs-lookup"><span data-stu-id="fa8f2-143">Getting Started with Application Settings</span></span>
 <span data-ttu-id="fa8f2-144">Pokud používáte aplikaci Visual Studio, můžete definovat nastavení v rámci Návrhář formulářů pomocí vlastnosti **(ApplicationSettings)** v okně **vlastnosti** .</span><span class="sxs-lookup"><span data-stu-id="fa8f2-144">If you use Visual Studio, you can define settings within the Windows Forms Designer using the **(ApplicationSettings)** property in the **Properties** window.</span></span> <span data-ttu-id="fa8f2-145">Když definujete nastavení tímto způsobem, Visual Studio automaticky vytvoří vlastní spravovanou obálkovou třídu, která přidruží každé nastavení k vlastnosti Class.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-145">When you define settings this way, Visual Studio automatically creates a custom managed wrapper class which associates each setting with a class property.</span></span> <span data-ttu-id="fa8f2-146">Visual Studio také postará o vazbu nastavení na vlastnost ve formuláři nebo ovládacím prvku tak, aby se nastavení ovládacího prvku automaticky obnovilo při zobrazení jeho formuláře a automaticky se uložilo při zavření formuláře.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-146">Visual Studio also takes care of binding the setting to a property on a form or control so that the control's settings are restored automatically when its form is displayed, and saved automatically when the form is closed.</span></span>

 <span data-ttu-id="fa8f2-147">Pokud chcete podrobnější kontrolu nad nastavením, můžete definovat vlastní obálkovou třídu nastavení vlastní aplikace.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-147">If you want more detailed control over your settings, you can define your own custom applications settings wrapper class.</span></span> <span data-ttu-id="fa8f2-148">To je provedeno odvozením třídy z <xref:System.Configuration.ApplicationSettingsBase>, přidáním vlastnosti, která odpovídá jednotlivým nastavením, a aplikováním speciálních atributů na tyto vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-148">This is accomplished by deriving a class from <xref:System.Configuration.ApplicationSettingsBase>, adding a property that corresponds to each setting, and applying special attributes to these properties.</span></span> <span data-ttu-id="fa8f2-149">Podrobnosti o vytváření obálkových tříd naleznete v tématu [Architektura nastavení aplikace](application-settings-architecture.md).</span><span class="sxs-lookup"><span data-stu-id="fa8f2-149">For details about creating wrapper classes, see [Application Settings Architecture](application-settings-architecture.md).</span></span>

 <span data-ttu-id="fa8f2-150">Můžete také použít <xref:System.Windows.Forms.Binding> třídu k navázání nastavení do vlastností pro formuláře a ovládací prvky prostřednictvím kódu programu.</span><span class="sxs-lookup"><span data-stu-id="fa8f2-150">You can also use the <xref:System.Windows.Forms.Binding> class to bind settings programmatically to properties on forms and controls.</span></span>

## <a name="see-also"></a><span data-ttu-id="fa8f2-151">Viz také:</span><span class="sxs-lookup"><span data-stu-id="fa8f2-151">See also</span></span>

- <xref:System.Configuration.ApplicationSettingsBase>
- <xref:System.Configuration.SettingsProvider>
- <xref:System.Configuration.LocalFileSettingsProvider>
- <xref:System.Configuration.IPersistComponentSettings>
- [<span data-ttu-id="fa8f2-152">Postupy: Ověřit nastavení aplikace</span><span class="sxs-lookup"><span data-stu-id="fa8f2-152">How to: Validate Application Settings</span></span>](how-to-validate-application-settings.md)
- [<span data-ttu-id="fa8f2-153">Správa nastavení aplikace (.NET)</span><span class="sxs-lookup"><span data-stu-id="fa8f2-153">Managing Application Settings (.NET)</span></span>](/visualstudio/ide/managing-application-settings-dotnet)
- [<span data-ttu-id="fa8f2-154">Postupy: Číst nastavení v době běhu sC#</span><span class="sxs-lookup"><span data-stu-id="fa8f2-154">How To: Read Settings at Run Time With C#</span></span>](how-to-read-settings-at-run-time-with-csharp.md)
- [<span data-ttu-id="fa8f2-155">Použití nastavení aplikace a uživatelských nastavení</span><span class="sxs-lookup"><span data-stu-id="fa8f2-155">Using Application Settings and User Settings</span></span>](using-application-settings-and-user-settings.md)
- [<span data-ttu-id="fa8f2-156">Architektura nastavení aplikace</span><span class="sxs-lookup"><span data-stu-id="fa8f2-156">Application Settings Architecture</span></span>](application-settings-architecture.md)
- [<span data-ttu-id="fa8f2-157">Nastavení aplikace pro vlastní ovládací prvky</span><span class="sxs-lookup"><span data-stu-id="fa8f2-157">Application Settings for Custom Controls</span></span>](application-settings-for-custom-controls.md)
