---
title: Balení a nasazování prostředků v aplikacích .NET
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- deploying applications [.NET Framework], resources
- resource files, deploying
- hub-and-spoke resource deployment model
- resource files, packaging
- application resources, packaging
- single resource assembly
- satellite assemblies
- default culture for applications
- names [.NET Framework], resources
- fallback process for resources
- grouping cultures
- application resources, deploying
- application resources, naming conventions
- culture, packaging and deploying resources
- resource files, naming conventions
- packaging application resources
- application resources, fallback processes
- resource files, fallback processes
- localizing resources
- neutral cultures
ms.assetid: b224d7c0-35f8-4e82-a705-dd76795e8d16
ms.openlocfilehash: d64e3b5201e34541fdafa5724b0c7e8c3f6c0c0d
ms.sourcegitcommit: 7980a91f90ae5eca859db7e6bfa03e23e76a1a50
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/13/2020
ms.locfileid: "81243047"
---
# <a name="packaging-and-deploying-resources-in-net-apps"></a><span data-ttu-id="a0ed6-102">Balení a nasazování prostředků v aplikacích .NET</span><span class="sxs-lookup"><span data-stu-id="a0ed6-102">Packaging and Deploying Resources in .NET Apps</span></span>

<span data-ttu-id="a0ed6-103">Aplikace spoléhají na správce prostředků rozhraní .NET Framework, reprezentované třídou, <xref:System.Resources.ResourceManager> k načtení lokalizovaných prostředků.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-103">Applications rely on the .NET Framework Resource Manager, represented by the <xref:System.Resources.ResourceManager> class, to retrieve localized resources.</span></span> <span data-ttu-id="a0ed6-104">Správce prostředků předpokládá, že model rozbočovače a paprsku se používá k balení a nasazení prostředků.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-104">The Resource Manager assumes that a hub and spoke model is used to package and deploy resources.</span></span> <span data-ttu-id="a0ed6-105">Rozbočovač je hlavní sestavení, které obsahuje nelokalizovatelný spustitelný kód a prostředky pro jednu jazykovou verzi, nazývanou neutrální nebo výchozí jazyková verze.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-105">The hub is the main assembly that contains the nonlocalizable executable code and the resources for a single culture, called the neutral or default culture.</span></span> <span data-ttu-id="a0ed6-106">Výchozí jazyková verze je záložní jazyková verze pro aplikaci; je to jazyková verze, jejíž prostředky se používají, pokud nelze nalézt lokalizované prostředky.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-106">The default culture is the fallback culture for the application; it is the culture whose resources are used if localized resources cannot be found.</span></span> <span data-ttu-id="a0ed6-107">Každý paprsek se připojí k satelitnímu sestavení, které obsahuje prostředky pro jednu jazykovou verzi, ale neobsahuje žádný kód.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-107">Each spoke connects to a satellite assembly that contains the resources for a single culture, but does not contain any code.</span></span>

<span data-ttu-id="a0ed6-108">Tento model má několik výhod:</span><span class="sxs-lookup"><span data-stu-id="a0ed6-108">There are several advantages to this model:</span></span>

- <span data-ttu-id="a0ed6-109">Po nasazení aplikace můžete postupně přidávat prostředky pro nové jazykové verze.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-109">You can incrementally add resources for new cultures after you have deployed an application.</span></span> <span data-ttu-id="a0ed6-110">Vzhledem k tomu, že následný vývoj prostředků specifických pro jazykovou verzi může vyžadovat značné množství času, to umožňuje nejprve uvolnit hlavní aplikaci a později dodat prostředky specifické pro jazykovou verzi.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-110">Because subsequent development of culture-specific resources can require a significant amount of time, this allows you to release your main application first, and deliver culture-specific resources at a later date.</span></span>
- <span data-ttu-id="a0ed6-111">Satelitní sestavení aplikace můžete aktualizovat a měnit bez nutnosti opětovné kompilace aplikace.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-111">You can update and change an application's satellite assemblies without recompiling the application.</span></span>
- <span data-ttu-id="a0ed6-112">Aplikace musí načíst pouze satelitní sestavení, které obsahují prostředky potřebné pro konkrétní jazykovou verzi.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-112">An application needs to load only those satellite assemblies that contain the resources needed for a particular culture.</span></span> <span data-ttu-id="a0ed6-113">To může výrazně snížit využití systémových prostředků.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-113">This can significantly reduce the use of system resources.</span></span>

 <span data-ttu-id="a0ed6-114">Existují však také nevýhody tohoto modelu:</span><span class="sxs-lookup"><span data-stu-id="a0ed6-114">However, there are also disadvantages to this model:</span></span>

- <span data-ttu-id="a0ed6-115">Je nutné spravovat více sad prostředků.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-115">You must manage multiple sets of resources.</span></span>
- <span data-ttu-id="a0ed6-116">Počáteční náklady na testování aplikace se zvyšují, protože je nutné otestovat několik konfigurací.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-116">The initial cost of testing an application increases, because you must test several configurations.</span></span> <span data-ttu-id="a0ed6-117">Všimněte si, že v dlouhodobém horizontu bude jednodušší a levnější testovat jednu základní aplikaci s několika satelity, než testovat a udržovat několik paralelních mezinárodních verzí.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-117">Note that in the long term it will be easier and less expensive to test one core application with several satellites, than to test and maintain several parallel international versions.</span></span>

## <a name="resource-naming-conventions"></a><span data-ttu-id="a0ed6-118">Konvence pro pojmenování prostředků</span><span class="sxs-lookup"><span data-stu-id="a0ed6-118">Resource naming conventions</span></span>

<span data-ttu-id="a0ed6-119">Při balení prostředků aplikace, musíte je pojmenovat pomocí konvencí pojmenování prostředků, které očekává běžný jazyk runtime.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-119">When you package your application's resources, you must name them using the resource naming conventions that the common language runtime expects.</span></span> <span data-ttu-id="a0ed6-120">Runtime identifikuje prostředek podle jeho názvu jazykové verze.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-120">The runtime identifies a resource by its culture name.</span></span> <span data-ttu-id="a0ed6-121">Každá jazyková verze má jedinečný název, což je obvykle kombinace dvoupísmenného názvu jazykové verze s ložených písmenem a v případě potřeby dvoupísmenného názvu subkultury s velkými písmeny přidruženými k zemi nebo oblasti.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-121">Each culture is given a unique name, which is usually a combination of a two-letter, lowercase culture name associated with a language and, if required, a two-letter, uppercase subculture name associated with a country or region.</span></span> <span data-ttu-id="a0ed6-122">Název subkultury následuje název jazykové verze, oddělený pomlčkou (-).</span><span class="sxs-lookup"><span data-stu-id="a0ed6-122">The subculture name follows the culture name, separated by a dash (-).</span></span> <span data-ttu-id="a0ed6-123">Příklady zahrnují ja-JP pro japonštinu, jak se mluví v Japonsku, en-US pro angličtinu, jak se mluví ve Spojených státech, de-DE pro němčinu, jak se mluví v Německu, nebo de-AT pro němčinu, jak se mluví v Rakousku.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-123">Examples include ja-JP for Japanese as spoken in Japan, en-US for English as spoken in the United States, de-DE for German as spoken in Germany, or de-AT for German as spoken in Austria.</span></span> <span data-ttu-id="a0ed6-124">Viz sloupec **Language tag** v seznamu názvů jazyků nebo [oblastí podporovaných systémem Windows](https://docs.microsoft.com/openspecs/windows_protocols/ms-lcid/a9eac961-e77d-41a6-90a5-ce1a8b0cdb9c).</span><span class="sxs-lookup"><span data-stu-id="a0ed6-124">See the **Language tag** column in the [list of language/region names supported by Windows](https://docs.microsoft.com/openspecs/windows_protocols/ms-lcid/a9eac961-e77d-41a6-90a5-ce1a8b0cdb9c).</span></span> <span data-ttu-id="a0ed6-125">Názvy kultur postupujte podle standardu definovaného [bcp 47](https://tools.ietf.org/html/bcp47).</span><span class="sxs-lookup"><span data-stu-id="a0ed6-125">Culture names follow the standard defined by [BCP 47](https://tools.ietf.org/html/bcp47).</span></span>

> [!NOTE]
> <span data-ttu-id="a0ed6-126">Existují některé výjimky pro názvy jazykové verze `zh-Hans` se dvěma písmeny, například pro čínštinu (zjednodušená).</span><span class="sxs-lookup"><span data-stu-id="a0ed6-126">There are some exceptions for the two-letter culture names, such as `zh-Hans` for Chinese (Simplified).</span></span>

> [!NOTE]
> <span data-ttu-id="a0ed6-127">Informace o vytváření souborů prostředků naleznete v [tématu Vytváření souborů prostředků](creating-resource-files-for-desktop-apps.md) a [Vytváření satelitních sestavení](creating-satellite-assemblies-for-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="a0ed6-127">For information about creating resource files, see [Creating Resource Files](creating-resource-files-for-desktop-apps.md) and [Creating Satellite Assemblies](creating-satellite-assemblies-for-desktop-apps.md).</span></span>

<a name="cpconpackagingdeployingresourcesanchor1"></a>

## <a name="the-resource-fallback-process"></a><span data-ttu-id="a0ed6-128">Proces získávání náhradních prostředků</span><span class="sxs-lookup"><span data-stu-id="a0ed6-128">The Resource Fallback Process</span></span>

<span data-ttu-id="a0ed6-129">Model rozbočovače a paprsku pro balení a nasazování prostředků používá záložní proces k vyhledání vhodných prostředků.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-129">The hub and spoke model for packaging and deploying resources uses a fallback process to locate appropriate resources.</span></span> <span data-ttu-id="a0ed6-130">Pokud aplikace požaduje lokalizovaný prostředek, který není k dispozici, soubor RUNTIME společného jazyka vyhledá hierarchii jazykových verzí pro vhodný záložní prostředek, který nejvíce odpovídá požadavku aplikace uživatele a vyvolá výjimku pouze jako poslední možnost.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-130">If an application requests a localized resource  that is unavailable, the common language runtime searches the hierarchy of cultures for an appropriate fallback resource that most closely matches the user's application's request, and throws an exception only as a last resort.</span></span> <span data-ttu-id="a0ed6-131">Na každé úrovni hierarchie, pokud je nalezen příslušný prostředek, jej používá za běhu.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-131">At each level of the hierarchy, if an appropriate resource is found, the runtime uses it.</span></span> <span data-ttu-id="a0ed6-132">Pokud zdroj není nalezen, hledání pokračuje na další úrovni.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-132">If the resource is not found, the search continues at the next level.</span></span>

<span data-ttu-id="a0ed6-133">Chcete-li zlepšit výkon <xref:System.Resources.NeutralResourcesLanguageAttribute> vyhledávání, použijte atribut pro hlavní sestavení a předejte mu název neutrálního jazyka, který bude pracovat s hlavním sestavením.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-133">To improve lookup performance, apply the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to your main assembly, and pass it the name of the neutral language that will work with your main assembly.</span></span>

### <a name="net-framework-resource-fallback-process"></a><span data-ttu-id="a0ed6-134">Záložní proces prostředků rozhraní .NET Framework</span><span class="sxs-lookup"><span data-stu-id="a0ed6-134">.NET Framework resource fallback process</span></span>

<span data-ttu-id="a0ed6-135">Záložní proces prostředků rozhraní .NET Framework zahrnuje následující kroky:</span><span class="sxs-lookup"><span data-stu-id="a0ed6-135">The .NET Framework resource fallback process involves the following steps:</span></span>

> [!TIP]
> <span data-ttu-id="a0ed6-136">Je možné použít [ \<relativníBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) konfigurační prvek pro optimalizaci procesu záložní prostředky a proces, kterým runtime sondy pro sestavení prostředků.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-136">You may be able to use the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) configuration element to optimize the resource fallback process and the process by which the runtime probes for resource assemblies.</span></span> <span data-ttu-id="a0ed6-137">Další informace naleznete v části [Optimalizace záložního procesu prostředků.](packaging-and-deploying-resources-in-desktop-apps.md#Optimizing)</span><span class="sxs-lookup"><span data-stu-id="a0ed6-137">For more information, see the [Optimizing the Resource Fallback Process](packaging-and-deploying-resources-in-desktop-apps.md#Optimizing) section.</span></span>

1. <span data-ttu-id="a0ed6-138">Za běhu nejprve zkontroluje [globální mezipaměti sestavení](../app-domains/gac.md) pro sestavení, které odpovídá požadované jazykové verze pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-138">The runtime first checks the [global assembly cache](../app-domains/gac.md) for an assembly that matches the requested culture for your application.</span></span>

     <span data-ttu-id="a0ed6-139">Globální mezipaměť sestavení může ukládat sestavení prostředků, která jsou sdílena mnoha aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-139">The global assembly cache can store resource assemblies that are shared by many applications.</span></span> <span data-ttu-id="a0ed6-140">Tím osvobozujete nutnost zahrnout konkrétní sady prostředků do adresářové struktury každé aplikace, kterou vytvoříte.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-140">This frees you from having to include specific sets of resources in the directory structure of every application you create.</span></span> <span data-ttu-id="a0ed6-141">Pokud za běhu najde odkaz na sestavení, prohledá sestavení pro požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-141">If the runtime finds a reference to the assembly, it searches the assembly for the requested resource.</span></span> <span data-ttu-id="a0ed6-142">Pokud najde položku v sestavení, použije požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-142">If it finds the entry in the assembly, it uses the requested resource.</span></span> <span data-ttu-id="a0ed6-143">Pokud položku nenajde, pokračuje v hledání.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-143">If it doesn't find the entry, it continues the search.</span></span>

2. <span data-ttu-id="a0ed6-144">Modul runtime next zkontroluje adresář aktuálně spuštěného sestavení pro podadresář, který odpovídá požadované jazykové verzi.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-144">The runtime next checks the directory of the currently executing assembly for a subdirectory that matches the requested culture.</span></span> <span data-ttu-id="a0ed6-145">Pokud najde podadresář, vyhledá v tomto podadresáři platné satelitní sestavení pro požadovanou jazykovou verzi.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-145">If it finds the subdirectory, it searches that subdirectory for a valid satellite assembly for the requested culture.</span></span> <span data-ttu-id="a0ed6-146">Za běhu pak vyhledá satelitní sestavení pro požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-146">The runtime then searches the satellite assembly for the requested resource.</span></span> <span data-ttu-id="a0ed6-147">Pokud najde prostředek v sestavení, použije jej.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-147">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="a0ed6-148">Pokud zdroj nenajde, bude pokračovat v hledání.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-148">If it doesn't find the resource, it continues the search.</span></span>

3. <span data-ttu-id="a0ed6-149">Další runtime se dotazuje Instalační služby systému Windows k určení, zda má být satelitní sestavení nainstalováno na vyžádání.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-149">The runtime next queries the Windows Installer to determine whether the satellite assembly is to be installed on demand.</span></span> <span data-ttu-id="a0ed6-150">Pokud ano, zpracovává instalaci, načte sestavu a prohledává ji nebo požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-150">If so, it handles the installation, loads the assembly, and searches it or the requested resource.</span></span> <span data-ttu-id="a0ed6-151">Pokud najde prostředek v sestavení, použije jej.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-151">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="a0ed6-152">Pokud zdroj nenajde, bude pokračovat v hledání.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-152">If it doesn't find the resource, it continues the search.</span></span>

4. <span data-ttu-id="a0ed6-153">Runtime vyvolá <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> událost označující, že není schopen najít satelitní sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-153">The runtime raises the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="a0ed6-154">Pokud se rozhodnete zpracovat událost, obslužná rutina události může vrátit odkaz na satelitní sestavení, jehož prostředky budou použity pro vyhledávání.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-154">If you choose to handle the event, your event handler can return a reference to the satellite assembly whose resources will be used for the lookup.</span></span> <span data-ttu-id="a0ed6-155">V opačném případě `null` se vrátí obslužná rutina události a hledání pokračuje.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-155">Otherwise, the event handler returns `null` and the search continues.</span></span>

5. <span data-ttu-id="a0ed6-156">Další čas běhu znovu prohledá globální mezipaměť sestavení, tentokrát pro nadřazené sestavení požadované jazykové verze.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-156">The runtime next searches the global assembly cache again, this time for the parent assembly of the requested culture.</span></span> <span data-ttu-id="a0ed6-157">Pokud nadřazené sestavení existuje v globální mezipaměti sestavení, za běhu vyhledá sestavení pro požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-157">If the parent assembly exists in the global assembly cache, the runtime searches the assembly for the requested resource.</span></span>

     <span data-ttu-id="a0ed6-158">Nadřazená jazyková verze je definována jako příslušná záložní jazyková verze.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-158">The parent culture is defined as the appropriate fallback culture.</span></span> <span data-ttu-id="a0ed6-159">Zvažte rodiče jako záložní kandidáty, protože poskytnutí jakéhokoli prostředku je vhodnější pro vyvolání výjimky.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-159">Consider parents as fallback candidates, because providing any resource is preferable to throwing an exception.</span></span> <span data-ttu-id="a0ed6-160">Tento proces také umožňuje znovu použít prostředky.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-160">This process also allows you to reuse resources.</span></span> <span data-ttu-id="a0ed6-161">Konkrétní prostředek byste měli zahrnout na nadřazenou úroveň pouze v případě, že podřízená jazyková verze nepotřebuje lokalizovat požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-161">You should include a particular resource at the parent level only if the child culture doesn't need to localize the requested resource.</span></span> <span data-ttu-id="a0ed6-162">Například pokud zadáte satelitní sestavení `en` `en-GB` pro (neutrální angličtina), (anglicky, `en-US` jak se mluví ve Spojeném `en` království) a (anglicky, `en-GB` `en-US` jak se mluví ve Spojených státech), satelit by obsahovat společnou terminologii a a satelity by mohly poskytnout přepsání pouze pro ty termíny, které se liší.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-162">For example, if you supply satellite assemblies for `en` (neutral English), `en-GB` (English as spoken in the United Kingdom), and `en-US` (English as spoken in the United States), the `en` satellite would contain the common terminology, and the `en-GB` and `en-US` satellites could provide overrides for only those terms that differ.</span></span>

6. <span data-ttu-id="a0ed6-163">Další modul runtime zkontroluje adresář aktuálně spuštěného sestavení a zjistí, zda obsahuje nadřazený adresář.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-163">The runtime next checks the directory of the currently executing assembly to see if it contains a parent directory.</span></span> <span data-ttu-id="a0ed6-164">Pokud nadřazený adresář existuje, za běhu vyhledá v adresáři platné satelitní sestavení pro nadřazenou jazykovou verzi.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-164">If a parent directory exists, the runtime searches the directory for a valid satellite assembly for the parent culture.</span></span> <span data-ttu-id="a0ed6-165">Pokud najde sestavení, za běhu hledá sestavení pro požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-165">If it finds the assembly, the runtime searches the assembly for the requested resource.</span></span> <span data-ttu-id="a0ed6-166">Pokud najde prostředek, použije jej.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-166">If it finds the resource, it uses it.</span></span> <span data-ttu-id="a0ed6-167">Pokud zdroj nenajde, bude pokračovat v hledání.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-167">If it doesn't find the resource, it continues the search.</span></span>

7. <span data-ttu-id="a0ed6-168">Další runtime se dotazuje Instalační služby systému Windows k určení, zda má být nadřazené satelitní sestavení nainstalováno na vyžádání.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-168">The runtime next queries the Windows Installer to determine whether the parent satellite assembly is to be installed on demand.</span></span> <span data-ttu-id="a0ed6-169">Pokud ano, zpracovává instalaci, načte sestavu a prohledává ji nebo požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-169">If so, it handles the installation, loads the assembly, and searches it or the requested resource.</span></span> <span data-ttu-id="a0ed6-170">Pokud najde prostředek v sestavení, použije jej.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-170">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="a0ed6-171">Pokud zdroj nenajde, bude pokračovat v hledání.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-171">If it doesn't find the resource, it continues the search.</span></span>

8. <span data-ttu-id="a0ed6-172">Runtime vyvolá <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> událost označující, že není schopen najít vhodný záložní prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-172">The runtime raises the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find an appropriate fallback resource.</span></span> <span data-ttu-id="a0ed6-173">Pokud se rozhodnete zpracovat událost, obslužná rutina události může vrátit odkaz na satelitní sestavení, jehož prostředky budou použity pro vyhledávání.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-173">If you choose to handle the event, your event handler can return a reference to the satellite assembly whose resources will be used for the lookup.</span></span> <span data-ttu-id="a0ed6-174">V opačném případě `null` se vrátí obslužná rutina události a hledání pokračuje.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-174">Otherwise, the event handler returns `null` and the search continues.</span></span>

9. <span data-ttu-id="a0ed6-175">Další runtime hledá nadřazená sestavení, stejně jako v předchozích třech krocích, prostřednictvím mnoha potenciálních úrovní.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-175">The runtime next searches parent assemblies, as in the previous three steps, through many potential levels.</span></span> <span data-ttu-id="a0ed6-176">Každá jazyková verze má pouze jeden <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType> nadřazený, který je definován vlastností, ale nadřazený může mít svůj vlastní nadřazený.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-176">Each culture has only one parent, which is defined by the <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType> property, but a parent might have its own parent.</span></span> <span data-ttu-id="a0ed6-177">Hledání nadřazené jazykové verze <xref:System.Globalization.CultureInfo.Parent%2A> zastaví, <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>když vrátí vlastnost jazykové verze ; pro záložní prostředek invariantní jazyková verze není považována za nadřazenou jazykovou verzi nebo jazykovou verzi, která může mít prostředky.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-177">The search for parent cultures stops when a culture's <xref:System.Globalization.CultureInfo.Parent%2A> property returns <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>; for resource fallback, the invariant culture is not considered a parent culture or a culture that can have resources.</span></span>

10. <span data-ttu-id="a0ed6-178">Pokud jazyková verze, která byla původně zadána a všechny rodiče byly prohledány a prostředek stále nebyl nalezen, zdroj pro výchozí (záložní) jazyková verze se používá.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-178">If the culture that was originally specified and all parents have been searched and the resource is still not found, the resource for the default (fallback) culture is used.</span></span> <span data-ttu-id="a0ed6-179">Prostředky pro výchozí jazykovou verzi jsou obvykle zahrnuty v sestavení hlavní aplikace.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-179">Typically, the resources for the default culture are included in the main application assembly.</span></span> <span data-ttu-id="a0ed6-180">Můžete však zadat hodnotu <xref:System.Resources.UltimateResourceFallbackLocation.Satellite> <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> vlastnosti <xref:System.Resources.NeutralResourcesLanguageAttribute> atributu, která označuje, že konečné záložní umístění prostředků je satelitní sestavení, nikoli hlavní sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-180">However, you can specify a value of <xref:System.Resources.UltimateResourceFallbackLocation.Satellite> for the <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> property of the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to indicate that the ultimate fallback location for resources is a satellite assembly, rather than the main assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a0ed6-181">Výchozí prostředek je jediný prostředek, který lze zkompilovat s hlavním sestavením.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-181">The default resource is the only resource that can be compiled with the main assembly.</span></span> <span data-ttu-id="a0ed6-182">Pokud nezadáte satelitní sestavení <xref:System.Resources.NeutralResourcesLanguageAttribute> pomocí atributu, je konečným záložní (poslední nadřazený).</span><span class="sxs-lookup"><span data-stu-id="a0ed6-182">Unless you specify a satellite assembly by using the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute, it is the ultimate fallback (final parent).</span></span> <span data-ttu-id="a0ed6-183">Proto doporučujeme vždy zahrnout výchozí sadu prostředků v hlavním sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-183">Therefore, we recommend that you always include a default set of resources in your main assembly.</span></span> <span data-ttu-id="a0ed6-184">To pomáhá zabránit vyvolání výjimek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-184">This helps prevent exceptions from being thrown.</span></span> <span data-ttu-id="a0ed6-185">Zahrnutím výchozího prostředku soubor uvedete záložní pro všechny prostředky a zajistíte, že alespoň jeden prostředek je vždy k dispozici pro uživatele, i když není kulturně specifické.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-185">By including a default resource, file you provide a fallback for all resources and ensure that at least one resource is always present for the user, even if it is not culturally specific.</span></span>

11. <span data-ttu-id="a0ed6-186">Nakonec pokud runtime nenajde prostředek pro výchozí (záložní) jazykovou <xref:System.Resources.MissingManifestResourceException> verzi, nebo <xref:System.Resources.MissingSatelliteAssemblyException> je vyvolána výjimka označující, že prostředek nebyl nalezen.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-186">Finally, if the runtime doesn't find a resource for a default (fallback) culture, a <xref:System.Resources.MissingManifestResourceException> or <xref:System.Resources.MissingSatelliteAssemblyException> exception is thrown to indicate that the resource could not be found.</span></span>

<span data-ttu-id="a0ed6-187">Předpokládejme například, že aplikace požaduje prostředek lokalizovaný `es-MX` pro španělštinu (Mexiko) (jazykovou verzi).</span><span class="sxs-lookup"><span data-stu-id="a0ed6-187">For example, suppose the application requests a resource localized for Spanish (Mexico) (the `es-MX` culture).</span></span> <span data-ttu-id="a0ed6-188">Za běhu nejprve vyhledá globální mezipaměti sestavení `es-MX`pro sestavení, které odpovídá , ale nenajde ji.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-188">The runtime first searches the global assembly cache for the assembly that matches `es-MX`, but doesn't find it.</span></span> <span data-ttu-id="a0ed6-189">Modul runtime pak prohledá adresář aktuálně spuštěného `es-MX` sestavení pro adresář.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-189">The runtime then searches the directory of the currently executing assembly for an `es-MX` directory.</span></span> <span data-ttu-id="a0ed6-190">V opačném případě za běhu znovu vyhledá globální mezipaměti sestavení pro nadřazené sestavení, které odráží příslušnou záložní jazykovou verzi – v tomto případě `es` (španělština).</span><span class="sxs-lookup"><span data-stu-id="a0ed6-190">Failing that, the runtime searches the global assembly cache again for a parent assembly that reflects the appropriate fallback culture — in this case, `es` (Spanish).</span></span> <span data-ttu-id="a0ed6-191">Pokud nadřazené sestavení není nalezeno, za běhu vyhledá všechny `es-MX` potenciální úrovně nadřazených sestavení pro jazykovou verzi, dokud nenajde odpovídající prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-191">If the parent assembly is not found, the runtime searches all potential levels of parent assemblies for the `es-MX` culture until it finds a corresponding resource.</span></span> <span data-ttu-id="a0ed6-192">Pokud prostředek není nalezen, za běhu používá prostředek pro výchozí jazykovou verzi.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-192">If a resource isn't found, the runtime uses the resource for the default culture.</span></span>

<a name="Optimizing"></a>

#### <a name="optimizing-the-net-framework-resource-fallback-process"></a><span data-ttu-id="a0ed6-193">Optimalizace procesu záložního prostředku rozhraní .NET Framework</span><span class="sxs-lookup"><span data-stu-id="a0ed6-193">Optimizing the .NET Framework Resource Fallback Process</span></span>

<span data-ttu-id="a0ed6-194">Za následujících podmínek můžete optimalizovat proces, kterým za běhu vyhledává prostředky v satelitních sestaveních.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-194">Under the following conditions, you can optimize the process by which the runtime searches for resources in satellite assemblies</span></span>

- <span data-ttu-id="a0ed6-195">Satelitní sestavení jsou nasazeny ve stejném umístění jako sestavení kódu.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-195">Satellite assemblies are deployed in the same location as the code assembly.</span></span> <span data-ttu-id="a0ed6-196">Pokud je sestavení kódu nainstalováno v [globální mezipaměti sestavení](../app-domains/gac.md), satelitní sestavení jsou také nainstalována v globální mezipaměti sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-196">If the code assembly is installed in the [Global Assembly Cache](../app-domains/gac.md), satellite assemblies are also installed in the global assembly cache.</span></span> <span data-ttu-id="a0ed6-197">Pokud je sestavení kódu nainstalováno v adresáři, satelitní sestavení jsou nainstalována ve složkách tohoto adresáře specifických pro jazykovou verzi.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-197">If the code assembly is installed in a directory, satellite assemblies are installed in culture-specific folders of that directory.</span></span>

- <span data-ttu-id="a0ed6-198">Satelitní sestavení nejsou nainstalována na vyžádání.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-198">Satellite assemblies are not installed on demand.</span></span>

- <span data-ttu-id="a0ed6-199">Kód aplikace nezpracovává <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> událost.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-199">Application code does not handle the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

<span data-ttu-id="a0ed6-200">Optimalizovat sondu pro satelitní sestavení zahrnutím [ \<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) `enabled` prvek `true` a nastavení jeho atribut v konfiguračním souboru aplikace, jak je znázorněno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-200">You optimize the probe for satellite assemblies by including the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) element and setting its `enabled` attribute to `true` in the application configuration file, as shown in the following example.</span></span>

```xml
<configuration>
   <runtime>
      <relativeBindForResources enabled="true" />
   </runtime>
</configuration>
```

<span data-ttu-id="a0ed6-201">Optimalizovaná sonda pro satelitní sestavení je funkce opt-in.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-201">The optimized probe for satellite assemblies is an opt-in feature.</span></span> <span data-ttu-id="a0ed6-202">To znamená, že runtime následuje kroky zdokumentované v [procesu záložní prostředek,](packaging-and-deploying-resources-in-desktop-apps.md#cpconpackagingdeployingresourcesanchor1) pokud [ \<relativníBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) `enabled` prvek je `true`přítomen v konfiguračním souboru aplikace a jeho atribut je nastaven na .</span><span class="sxs-lookup"><span data-stu-id="a0ed6-202">That is, the runtime follows the steps documented in [The Resource Fallback Process](packaging-and-deploying-resources-in-desktop-apps.md#cpconpackagingdeployingresourcesanchor1) unless the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) element is present in the application's configuration file and its `enabled` attribute is set to `true`.</span></span> <span data-ttu-id="a0ed6-203">Pokud se jedná o tento případ, proces sondování pro satelitní sestavení se změní takto:</span><span class="sxs-lookup"><span data-stu-id="a0ed6-203">If this is the case, the process of probing for a satellite assembly is modified as follows:</span></span>

- <span data-ttu-id="a0ed6-204">Runtime používá umístění sestavení nadřazeného kódu ke sondování pro satelitní sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-204">The runtime uses the location of the parent code assembly to probe for the satellite assembly.</span></span> <span data-ttu-id="a0ed6-205">Pokud je nadřazené sestavení nainstalováno v globální mezipaměti sestavení, runtime sonduje v mezipaměti, ale ne v adresáři aplikace.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-205">If the parent assembly is installed in the global assembly cache, the runtime probes in the cache but not in the application's directory.</span></span> <span data-ttu-id="a0ed6-206">Pokud je nadřazené sestavení nainstalováno v adresáři aplikace, runtime sonduje v adresáři aplikace, ale ne v globální mezipaměti sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-206">If the parent assembly is installed in an application directory, the runtime probes in the application directory but not in the global assembly cache.</span></span>

- <span data-ttu-id="a0ed6-207">Za běhu není dotaz Instalační služby systému Windows pro instalaci satelitních sestavení na vyžádání.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-207">The runtime doesn't query the Windows Installer for on-demand installation of satellite assemblies.</span></span>

- <span data-ttu-id="a0ed6-208">Pokud sonda pro sestavení určitého prostředku selže, za <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> běhu nevyvolá událost.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-208">If the probe for a particular resource assembly fails, the runtime does not raise the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

### <a name="net-core-resource-fallback-process"></a><span data-ttu-id="a0ed6-209">Záložní proces prostředků jádra .NET</span><span class="sxs-lookup"><span data-stu-id="a0ed6-209">.NET Core resource fallback process</span></span>

<span data-ttu-id="a0ed6-210">Záložní proces prostředku .NET Core zahrnuje následující kroky:</span><span class="sxs-lookup"><span data-stu-id="a0ed6-210">The .NET Core resource fallback process involves the following steps:</span></span>

1. <span data-ttu-id="a0ed6-211">Za běhu se pokusí načíst satelitní sestavení pro požadovanou jazykovou verzi.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-211">The runtime attempts to load a satellite assembly for the requested culture.</span></span>
     - <span data-ttu-id="a0ed6-212">Zkontroluje adresář aktuálně spuštěného sestavení pro podadresář, který odpovídá požadované jazykové verzi.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-212">Checks the directory of the currently executing assembly for a subdirectory that matches the requested culture.</span></span> <span data-ttu-id="a0ed6-213">Pokud najde podadresář, vyhledá v tomto podadresáři platné satelitní sestavení pro požadovanou jazykovou verzi a načte ji.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-213">If it finds the subdirectory, it searches that subdirectory for a valid satellite assembly for the requested culture and loads it.</span></span>

       > [!NOTE]
       > <span data-ttu-id="a0ed6-214">V operačních systémech se systémy souborů rozlišujícími malá a velká písmena (tj. Linux a macOS) je hledání názvu jazykové verze rozlišováno.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-214">On operating systems with case-sensitive file systems (that is, Linux and macOS), the culture name subdirectory search is case-sensitive.</span></span> <span data-ttu-id="a0ed6-215">Název podadresáře se musí přesně <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType> shodovat s případem (například `es` nebo). `es-MX`</span><span class="sxs-lookup"><span data-stu-id="a0ed6-215">The subdirectory name must exactly match the case of the <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType> (for example, `es` or `es-MX`).</span></span>

       > [!NOTE]
       > <span data-ttu-id="a0ed6-216">Pokud programátor odvodil vlastní kontext <xref:System.Runtime.Loader.AssemblyLoadContext>zatížení sestavení z , situace je komplikovaná.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-216">If the programmer has derived a custom assembly load context from <xref:System.Runtime.Loader.AssemblyLoadContext>, the situation is complicated.</span></span> <span data-ttu-id="a0ed6-217">Pokud spuštění sestavení byla načtena do vlastního kontextu, modul runtime načte satelitní sestavení do vlastního kontextu.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-217">If the executing assembly was loaded into the custom context, the runtime loads the satellite assembly into the custom context.</span></span> <span data-ttu-id="a0ed6-218">Podrobnosti jsou mimo rozsah pro tento dokument.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-218">The details are out of scope for this document.</span></span> <span data-ttu-id="a0ed6-219">Viz <xref:System.Runtime.Loader.AssemblyLoadContext>.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-219">See  <xref:System.Runtime.Loader.AssemblyLoadContext>.</span></span>

     - <span data-ttu-id="a0ed6-220">Pokud nebyla nalezena satelitní <xref:System.Runtime.Loader.AssemblyLoadContext> sestava, <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> vyvolá událost, která označuje, že není schopna najít satelitní sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-220">If a satellite assemble has not been found, the <xref:System.Runtime.Loader.AssemblyLoadContext> raises the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="a0ed6-221">Pokud se rozhodnete zpracovat událost, obslužná rutina události můžete načíst a vrátit odkaz na satelitní sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-221">If you choose to handle the event, your event handler can load and return a reference to the satellite assembly.</span></span>
     - <span data-ttu-id="a0ed6-222">Pokud satelitní sestavení stále nebyl nalezen, AssemblyLoadContext způsobí AppDomain <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> aktivovat událost označující, že není schopen najít satelitní sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-222">If a satellite assembly still has not been found, the AssemblyLoadContext causes the AppDomain to trigger an <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="a0ed6-223">Pokud se rozhodnete zpracovat událost, obslužná rutina události můžete načíst a vrátit odkaz na satelitní sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-223">If you choose to handle the event, your event handler can load and return a reference to the satellite assembly.</span></span>

2. <span data-ttu-id="a0ed6-224">Pokud je nalezeno satelitní sestavení, za běhu vyhledá požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-224">If a satellite assembly is found, the runtime searches it for the requested resource.</span></span> <span data-ttu-id="a0ed6-225">Pokud najde prostředek v sestavení, použije jej.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-225">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="a0ed6-226">Pokud zdroj nenajde, bude pokračovat v hledání.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-226">If it doesn't find the resource, it continues the search.</span></span>

     > [!NOTE]
     > <span data-ttu-id="a0ed6-227">Chcete-li najít prostředek v satelitním sestavení, hledá za běhu <xref:System.Resources.ResourceManager> soubor <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType>prostředků požadovaný pro aktuální .</span><span class="sxs-lookup"><span data-stu-id="a0ed6-227">To find a resource within the satellite assembly, the runtime searches for the resource file requested by the <xref:System.Resources.ResourceManager> for the current <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType>.</span></span> <span data-ttu-id="a0ed6-228">V souboru prostředků vyhledá požadovaný název prostředku.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-228">Within the resource file it searches for the requested resource name.</span></span> <span data-ttu-id="a0ed6-229">Pokud buď nebyl nalezen, prostředek je považován za nebyl nalezen.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-229">If either is not found, the resource is treated as not found.</span></span>

3. <span data-ttu-id="a0ed6-230">Další runtime prohledává nadřazená sestavení jazykové verze prostřednictvím mnoha potenciálních úrovní, pokaždé, když opakuje kroky 1 & 2.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-230">The runtime next searches the parent culture assemblies through many potential levels, each time repeating steps 1 & 2.</span></span>

     <span data-ttu-id="a0ed6-231">Nadřazená jazyková verze je definována jako odpovídající záložní jazyková verze.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-231">The parent culture is defined as an appropriate fallback culture.</span></span> <span data-ttu-id="a0ed6-232">Zvažte rodiče jako záložní kandidáty, protože poskytnutí jakéhokoli prostředku je vhodnější pro vyvolání výjimky.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-232">Consider parents as fallback candidates, because providing any resource is preferable to throwing an exception.</span></span> <span data-ttu-id="a0ed6-233">Tento proces také umožňuje znovu použít prostředky.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-233">This process also allows you to reuse resources.</span></span> <span data-ttu-id="a0ed6-234">Konkrétní prostředek byste měli zahrnout na nadřazenou úroveň pouze v případě, že podřízená jazyková verze nepotřebuje lokalizovat požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-234">You should include a particular resource at the parent level only if the child culture doesn't need to localize the requested resource.</span></span> <span data-ttu-id="a0ed6-235">Například pokud zadáte satelitní sestavení `en` `en-GB` pro (neutrální angličtina), (anglicky, `en-US` jak se mluví ve Spojeném `en` království) a (anglicky, jak se mluví ve Spojených státech), satelit obsahuje společnou terminologii a `en-GB` `en-US` a satelity poskytuje přepsání pouze pro ty termíny, které se liší.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-235">For example, if you supply satellite assemblies for `en` (neutral English), `en-GB` (English as spoken in the United Kingdom), and `en-US` (English as spoken in the United States), the `en` satellite contains the common terminology, and the `en-GB` and `en-US` satellites provides overrides for only those terms that differ.</span></span>

     <span data-ttu-id="a0ed6-236">Každá jazyková verze má pouze jeden <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType> nadřazený, který je definován vlastností, ale nadřazený může mít svůj vlastní nadřazený.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-236">Each culture has only one parent, which is defined by the <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType> property, but a parent might have its own parent.</span></span> <span data-ttu-id="a0ed6-237">Hledání nadřazené jazykové verze <xref:System.Globalization.CultureInfo.Parent%2A> se <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>zastaví, když vrátí vlastnost jazykové verze .</span><span class="sxs-lookup"><span data-stu-id="a0ed6-237">The search for parent cultures stops when a culture's <xref:System.Globalization.CultureInfo.Parent%2A> property returns <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="a0ed6-238">Pro záložní prostředek invariantní jazyková verze není považována za nadřazenou jazykovou verzi nebo jazykovou verzi, která může mít prostředky.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-238">For resource fallback, the invariant culture is not considered a parent culture or a culture that can have resources.</span></span>

4. <span data-ttu-id="a0ed6-239">Pokud jazyková verze, která byla původně zadána a všechny rodiče byly prohledány a prostředek stále nebyl nalezen, zdroj pro výchozí (záložní) jazyková verze se používá.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-239">If the culture that was originally specified and all parents have been searched and the resource is still not found, the resource for the default (fallback) culture is used.</span></span> <span data-ttu-id="a0ed6-240">Prostředky pro výchozí jazykovou verzi jsou obvykle zahrnuty v sestavení hlavní aplikace.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-240">Typically, the resources for the default culture are included in the main application assembly.</span></span> <span data-ttu-id="a0ed6-241">Můžete však zadat hodnotu <xref:System.Resources.UltimateResourceFallbackLocation.Satellite?displayProperty.nameWithType> <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> vlastnosti, která označuje, že konečné záložní umístění prostředků je satelitní sestavení spíše než hlavní sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-241">However, you can specify a value of <xref:System.Resources.UltimateResourceFallbackLocation.Satellite?displayProperty.nameWithType> for the <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> property to indicate that the ultimate fallback location for resources is a satellite assembly rather than the main assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a0ed6-242">Výchozí prostředek je jediný prostředek, který lze zkompilovat s hlavním sestavením.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-242">The default resource is the only resource that can be compiled with the main assembly.</span></span> <span data-ttu-id="a0ed6-243">Pokud nezadáte satelitní sestavení <xref:System.Resources.NeutralResourcesLanguageAttribute> pomocí atributu, je konečným záložní (poslední nadřazený).</span><span class="sxs-lookup"><span data-stu-id="a0ed6-243">Unless you specify a satellite assembly by using the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute, it is the ultimate fallback (final parent).</span></span> <span data-ttu-id="a0ed6-244">Proto doporučujeme vždy zahrnout výchozí sadu prostředků v hlavním sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-244">Therefore, we recommend that you always include a default set of resources in your main assembly.</span></span> <span data-ttu-id="a0ed6-245">To pomáhá zabránit vyvolání výjimek.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-245">This helps prevent exceptions from being thrown.</span></span> <span data-ttu-id="a0ed6-246">Zahrnutím výchozího souboru prostředků poskytnete záložní informace pro všechny prostředky a zajistíte, že alespoň jeden prostředek je pro uživatele vždy k dispozici, i když není kulturně specifický.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-246">By including a default resource file, you provide a fallback for all resources and ensure that at least one resource is always present for the user, even if it is not culturally specific.</span></span>

5. <span data-ttu-id="a0ed6-247">Nakonec pokud runtime nenajde soubor prostředků pro výchozí (záložní) jazykovou <xref:System.Resources.MissingManifestResourceException> <xref:System.Resources.MissingSatelliteAssemblyException> verzi, nebo je vyvolána výjimka označující, že prostředek nebyl nalezen.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-247">Finally, if the runtime doesn't find a resource file for a default (fallback) culture, a <xref:System.Resources.MissingManifestResourceException> or <xref:System.Resources.MissingSatelliteAssemblyException> exception is thrown to indicate that the resource could not be found.</span></span> <span data-ttu-id="a0ed6-248">Pokud je soubor prostředků nalezen, ale požadovaný prostředek `null`není přítomen požadavek vrátí .</span><span class="sxs-lookup"><span data-stu-id="a0ed6-248">If the resource file is found but the requested resource is not present the request returns `null`.</span></span>

### <a name="ultimate-fallback-to-satellite-assembly"></a><span data-ttu-id="a0ed6-249">Ultimate Fallback na satelitní montáž</span><span class="sxs-lookup"><span data-stu-id="a0ed6-249">Ultimate Fallback to Satellite Assembly</span></span>

<span data-ttu-id="a0ed6-250">Volitelně můžete odebrat prostředky z hlavního sestavení a určit, že runtime by měl načíst konečné záložní prostředky ze satelitního sestavení, které odpovídá určité jazykové verzi.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-250">You can optionally remove resources from the main assembly and specify that the runtime should load the ultimate fallback resources from a satellite assembly that corresponds to a specific culture.</span></span> <span data-ttu-id="a0ed6-251">Chcete-li řídit záložní proces, <xref:System.Resources.NeutralResourcesLanguageAttribute.%23ctor%28System.String%2CSystem.Resources.UltimateResourceFallbackLocation%29> použijte konstruktor a <xref:System.Resources.UltimateResourceFallbackLocation> zajistěte hodnotu parametru, který určuje, zda má Správce prostředků extrahovat záložní prostředky z hlavního sestavení nebo ze satelitního sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-251">To control the fallback process, you use the <xref:System.Resources.NeutralResourcesLanguageAttribute.%23ctor%28System.String%2CSystem.Resources.UltimateResourceFallbackLocation%29> constructor and supply a value for the <xref:System.Resources.UltimateResourceFallbackLocation> parameter that specifies whether Resource Manager should extract the fallback resources from the main assembly or from a satellite assembly.</span></span>

<span data-ttu-id="a0ed6-252">Následující příklad rozhraní .NET <xref:System.Resources.NeutralResourcesLanguageAttribute> Framework používá atribut k uložení záložních prostředků aplikace`fr`v satelitním sestavení pro francouzský jazyk ( ).</span><span class="sxs-lookup"><span data-stu-id="a0ed6-252">The following .NET Framework example uses the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to store an application's fallback resources in a satellite assembly for the French (`fr`) language.</span></span> <span data-ttu-id="a0ed6-253">Příklad má dva soubory prostředků založené na textu, `Greeting`které definují jeden řetězec prostředku s názvem .</span><span class="sxs-lookup"><span data-stu-id="a0ed6-253">The example has two text-based resource files that define a single string resource named `Greeting`.</span></span> <span data-ttu-id="a0ed6-254">První, resources.fr.txt, obsahuje prostředek francouzského jazyka.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-254">The first, resources.fr.txt, contains a French language resource.</span></span>

```text
Greeting=Bon jour!
```

<span data-ttu-id="a0ed6-255">Druhý, resources,ru.txt, obsahuje prostředek ruského jazyka.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-255">The second, resources,ru.txt, contains a Russian language resource.</span></span>

```text
Greeting=Добрый день
```

<span data-ttu-id="a0ed6-256">Tyto dva soubory jsou kompilovány do souborů .resources spuštěním [generátoru souborů prostředků (Resgen.exe)](../tools/resgen-exe-resource-file-generator.md) z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-256">These two files are compiled to .resources files by running the [resource file generator (Resgen.exe)](../tools/resgen-exe-resource-file-generator.md) from the command line.</span></span> <span data-ttu-id="a0ed6-257">Pro prostředek francouzského jazyka je příkaz:</span><span class="sxs-lookup"><span data-stu-id="a0ed6-257">For the French language resource, the command is:</span></span>

<span data-ttu-id="a0ed6-258">**resgen.exe resources.fr.txt**</span><span class="sxs-lookup"><span data-stu-id="a0ed6-258">**resgen.exe resources.fr.txt**</span></span>

<span data-ttu-id="a0ed6-259">Pro prostředek ruského jazyka je příkaz:</span><span class="sxs-lookup"><span data-stu-id="a0ed6-259">For the Russian language resource, the command is:</span></span>

<span data-ttu-id="a0ed6-260">**resgen.exe resources.ru.txt**</span><span class="sxs-lookup"><span data-stu-id="a0ed6-260">**resgen.exe resources.ru.txt**</span></span>

<span data-ttu-id="a0ed6-261">Soubory .resources jsou vloženy do knihoven dynamických odkazů spuštěním [propojovacího systému sestavení (Al.exe)](../tools/al-exe-assembly-linker.md) z příkazového řádku pro prostředek francouzského jazyka následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="a0ed6-261">The .resources files are embedded into dynamic link libraries by running [assembly linker (Al.exe)](../tools/al-exe-assembly-linker.md) from the command line for the French language resource as follows:</span></span>

<span data-ttu-id="a0ed6-262">**al /t:lib /embed:resources.fr.resources /culture:fr /out:fr\Example1.resources.dll**</span><span class="sxs-lookup"><span data-stu-id="a0ed6-262">**al /t:lib /embed:resources.fr.resources /culture:fr /out:fr\Example1.resources.dll**</span></span>

<span data-ttu-id="a0ed6-263">a pro ruský jazyk zdroj takto:</span><span class="sxs-lookup"><span data-stu-id="a0ed6-263">and for the Russian language resource as follows:</span></span>

<span data-ttu-id="a0ed6-264">**al /t:lib /embed:resources.ru.resources /culture:ru /out:ru\Example1.resources.dll**</span><span class="sxs-lookup"><span data-stu-id="a0ed6-264">**al /t:lib /embed:resources.ru.resources /culture:ru /out:ru\Example1.resources.dll**</span></span>

<span data-ttu-id="a0ed6-265">Zdrojový kód aplikace se nachází v souboru s názvem Example1.cs nebo Example1.vb.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-265">The application source code resides in a file named Example1.cs or Example1.vb.</span></span> <span data-ttu-id="a0ed6-266">Obsahuje <xref:System.Resources.NeutralResourcesLanguageAttribute> atribut označující, že výchozí prostředek aplikace je v podadresáři fr.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-266">It includes the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to indicate that the default application resource is in the fr subdirectory.</span></span> <span data-ttu-id="a0ed6-267">Konkretně instancí Správce prostředků, `Greeting` načte hodnotu prostředku a zobrazí jej do konzoly.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-267">It instantiates the Resource Manager, retrieves the value of the `Greeting` resource, and displays it to the console.</span></span>

[!code-csharp[Conceptual.Resources.Packaging#1](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.resources.packaging/cs/example1.cs#1)]
[!code-vb[Conceptual.Resources.Packaging#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.resources.packaging/vb/example1.vb#1)]

<span data-ttu-id="a0ed6-268">Potom můžete zkompilovat zdrojový kód jazyka C# z příkazového řádku následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="a0ed6-268">You can then compile C# source code from the command line as follows:</span></span>

```console
csc Example1.cs
```

<span data-ttu-id="a0ed6-269">Příkaz pro kompilátor jazyka je velmi podobný:</span><span class="sxs-lookup"><span data-stu-id="a0ed6-269">The command for the Visual Basic compiler is very similar:</span></span>

```console
vbc Example1.vb
```

<span data-ttu-id="a0ed6-270">Vzhledem k tomu, že v hlavním sestavení nejsou vloženy `/resource` žádné prostředky, není třeba zkompilovat pomocí přepínače.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-270">Because there are no resources embedded in the main assembly, you do not have to compile by using the `/resource` switch.</span></span>

<span data-ttu-id="a0ed6-271">Při spuštění příkladu ze systému, jehož jazyk je něco jiného než ruština, zobrazí následující výstup:</span><span class="sxs-lookup"><span data-stu-id="a0ed6-271">When you run the example from a system whose language is anything other than Russian, it displays the following output:</span></span>

```output
Bon jour!
```

## <a name="suggested-packaging-alternative"></a><span data-ttu-id="a0ed6-272">Doporučená alternativa balení</span><span class="sxs-lookup"><span data-stu-id="a0ed6-272">Suggested Packaging Alternative</span></span>

<span data-ttu-id="a0ed6-273">Časová nebo rozpočtová omezení vám mohou bránit ve vytváření sady prostředků pro každou subkulturu, kterou vaše aplikace podporuje.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-273">Time or budget constraints might prevent you from creating a set of resources for every subculture that your application supports.</span></span> <span data-ttu-id="a0ed6-274">Místo toho můžete vytvořit jedno satelitní sestavení pro nadřazenou jazykovou verzi, kterou mohou používat všechny související subkultury.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-274">Instead, you can create a single satellite assembly for a parent culture that all related subcultures can use.</span></span> <span data-ttu-id="a0ed6-275">Můžete například zadat jedno anglické satelitní sestavení (en), které je načteno uživateli, kteří požadují anglické prostředky specifické pro oblast, a jedno německé satelitní sestavení (de) pro uživatele, kteří požadují německé prostředky specifické pro oblast.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-275">For example, you can provide a single English satellite assembly (en) that is retrieved by users who request region-specific English resources, and a single German satellite assembly (de) for users who request region-specific German resources.</span></span> <span data-ttu-id="a0ed6-276">Například požadavky na němčinu, jak se mluví v Německu (de-DE), Rakousku (de-AT) a Švýcarsku (de-CH), by se vrátily do německého satelitního sestavení (de).</span><span class="sxs-lookup"><span data-stu-id="a0ed6-276">For example, requests for German as spoken in Germany (de-DE), Austria (de-AT), and Switzerland (de-CH) would fall back to the German satellite assembly (de).</span></span> <span data-ttu-id="a0ed6-277">Výchozí prostředky jsou konečné záložní a proto by měly být prostředky, které budou požadovány většinou uživatelů aplikace, takže pečlivě zvolte tyto prostředky.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-277">The default resources are the final fallback and therefore should be the resources that will be requested by the majority of your application's users, so choose these resources carefully.</span></span> <span data-ttu-id="a0ed6-278">Tento přístup nasazuje prostředky, které jsou méně kulturně specifické, ale může výrazně snížit náklady na lokalizaci vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="a0ed6-278">This approach deploys resources that are less culturally specific, but can significantly reduce your application's localization costs.</span></span>

## <a name="see-also"></a><span data-ttu-id="a0ed6-279">Viz také</span><span class="sxs-lookup"><span data-stu-id="a0ed6-279">See also</span></span>

- [<span data-ttu-id="a0ed6-280">Prostředky v aplikacích klasické pracovní plochy</span><span class="sxs-lookup"><span data-stu-id="a0ed6-280">Resources in Desktop Apps</span></span>](index.md)
- [<span data-ttu-id="a0ed6-281">Globální mezipaměť sestavení</span><span class="sxs-lookup"><span data-stu-id="a0ed6-281">Global Assembly Cache</span></span>](../app-domains/gac.md)
- [<span data-ttu-id="a0ed6-282">Vytváření zdrojových souborů</span><span class="sxs-lookup"><span data-stu-id="a0ed6-282">Creating Resource Files</span></span>](creating-resource-files-for-desktop-apps.md)
- [<span data-ttu-id="a0ed6-283">Vytváření satelitních sestavení</span><span class="sxs-lookup"><span data-stu-id="a0ed6-283">Creating Satellite Assemblies</span></span>](creating-satellite-assemblies-for-desktop-apps.md)
