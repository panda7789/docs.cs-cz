---
title: Přehled směrovaných událostí
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- attached events [WPF]
- grouped button set [WPF]
- routed events [WPF]
- events [WPF], routed
- tunneling [WPF]
- events [WPF], attached
- routing strategies for events [WPF]
- button set [WPF], grouped
- bubbling [WPF]
ms.assetid: 1a2189ae-13b4-45b0-b12c-8de2e49c29d2
ms.openlocfilehash: f47eccac4e960bd6869da0da139803cd4e433393
ms.sourcegitcommit: 13e79efdbd589cad6b1de634f5d6b1262b12ab01
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/28/2020
ms.locfileid: "76794293"
---
# <a name="routed-events-overview"></a><span data-ttu-id="a8dcf-102">Přehled směrovaných událostí</span><span class="sxs-lookup"><span data-stu-id="a8dcf-102">Routed Events Overview</span></span>

<span data-ttu-id="a8dcf-103">Toto téma popisuje koncept směrovaných událostí v [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a8dcf-103">This topic describes the concept of routed events in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span></span> <span data-ttu-id="a8dcf-104">Téma definuje terminologii směrované události. popisuje, jak jsou směrované směrované události směrovány prostřednictvím stromu prvků, shrnuje, jak zpracovávat směrované události a zavádí, jak vytvořit vlastní směrované události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-104">The topic defines routed events terminology, describes how routed events are routed through a tree of elements, summarizes how you handle routed events, and introduces how to create your own custom routed events.</span></span>

<a name="prerequisites"></a>

## <a name="prerequisites"></a><span data-ttu-id="a8dcf-105">Požadavky</span><span class="sxs-lookup"><span data-stu-id="a8dcf-105">Prerequisites</span></span>

<span data-ttu-id="a8dcf-106">Toto téma předpokládá, že máte základní znalosti společného jazykového modulu runtime (CLR) a objektově orientovaného programování, a také koncept způsobu, jakým mohou být vztahy mezi prvky [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] koncepčně koncepční jako strom.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-106">This topic assumes that you have basic knowledge of the common language runtime (CLR) and object-oriented programming, as well as the concept of how the relationships between [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elements can be conceptualized as a tree.</span></span> <span data-ttu-id="a8dcf-107">Chcete-li postupovat podle příkladů v tomto tématu, měli byste také pochopit [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] a vědět, jak psát velmi základní [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] aplikace nebo stránky.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-107">In order to follow the examples in this topic, you should also understand [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] and know how to write very basic [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications or pages.</span></span> <span data-ttu-id="a8dcf-108">Další informace najdete v tématu [Návod: Moje první desktopová aplikace WPF](../getting-started/walkthrough-my-first-wpf-desktop-application.md) a [Přehled jazyka XAML (WPF)](../../../desktop-wpf/fundamentals/xaml.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-108">For more information, see [Walkthrough: My first WPF desktop application](../getting-started/walkthrough-my-first-wpf-desktop-application.md) and [XAML Overview (WPF)](../../../desktop-wpf/fundamentals/xaml.md).</span></span>

<a name="routing"></a>

## <a name="what-is-a-routed-event"></a><span data-ttu-id="a8dcf-109">Co je směrovaná událost?</span><span class="sxs-lookup"><span data-stu-id="a8dcf-109">What Is a Routed Event?</span></span>

<span data-ttu-id="a8dcf-110">Můžete si představit o směrovaných událostech buď z perspektivy funkčnosti nebo implementace.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-110">You can think about routed events either from a functional or implementation perspective.</span></span> <span data-ttu-id="a8dcf-111">Obě definice jsou uvedené tady, protože někteří lidé hledají jednu nebo jinou definici užitečnější.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-111">Both definitions are presented here, because some people find one or the other definition more useful.</span></span>

<span data-ttu-id="a8dcf-112">Definice funkce: nasměrovaná událost je typ události, která může vyvolat obslužné rutiny ve stromu elementu více posluchačů, nikoli jenom na objektu, který vyvolal událost.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-112">Functional definition: A routed event is a type of event that can invoke handlers on multiple listeners in an element tree, rather than just on the object that raised the event.</span></span>

<span data-ttu-id="a8dcf-113">Definice implementace: směrováná událost je událost modulu CLR, která je zajištěna instancí třídy <xref:System.Windows.RoutedEvent> a je zpracována [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]m systémem událostí.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-113">Implementation definition: A routed event is a CLR event that is backed by an instance of the <xref:System.Windows.RoutedEvent> class and is processed by the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] event system.</span></span>

<span data-ttu-id="a8dcf-114">Typická aplikace [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahuje mnoho prvků.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-114">A typical [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application contains many elements.</span></span> <span data-ttu-id="a8dcf-115">Bez ohledu na to, zda jsou vytvořeny v kódu nebo deklarované v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], tyto prvky existují v relaci stromu prvků navzájem.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-115">Whether created in code or declared in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], these elements exist in an element tree relationship to each other.</span></span> <span data-ttu-id="a8dcf-116">Trasa události může cestovat v jednom ze dvou směrů v závislosti na definici události, ale obecně se směruje ze zdrojového elementu a pak "bubliny" směrem nahoru přes strom elementů, dokud nedosáhne kořene stromu elementu (obvykle stránka nebo okno).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-116">The event route can travel in one of two directions depending on the event definition, but generally the route travels from the source element and then "bubbles" upward through the element tree until it reaches the element tree root (typically a page or a window).</span></span> <span data-ttu-id="a8dcf-117">Tento koncept probublávání může být obeznámený s tím, že jste předtím pracovali s modelem objektu DHTML.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-117">This bubbling concept might be familiar to you if you have worked with the DHTML object model previously.</span></span>

<span data-ttu-id="a8dcf-118">Vezměte v úvahu následující jednoduchý strom elementů:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-118">Consider the following simple element tree:</span></span>

[!code-xaml[EventOvwSupport#GroupButton](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml#groupbutton)]

<span data-ttu-id="a8dcf-119">Tento strom elementu vytvoří něco podobného jako následující:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-119">This element tree produces something like the following:</span></span>

<span data-ttu-id="a8dcf-120">![Tlačítka Ano, ne a Storno](./media/routedevent-ovw-1.gif "RoutedEvent_ovw_1")</span><span class="sxs-lookup"><span data-stu-id="a8dcf-120">![Yes, No, and Cancel buttons](./media/routedevent-ovw-1.gif "RoutedEvent_ovw_1")</span></span>

<span data-ttu-id="a8dcf-121">V tomto zjednodušeném stromu prvků je zdrojem <xref:System.Windows.Controls.Primitives.ButtonBase.Click> události jeden z <xref:System.Windows.Controls.Button> prvků a na základě toho, na kterém <xref:System.Windows.Controls.Button> byl kliknuto, je prvním prvkem, který má příležitost tuto událost zpracovat.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-121">In this simplified element tree, the source of a <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event is one of the <xref:System.Windows.Controls.Button> elements, and whichever <xref:System.Windows.Controls.Button> was clicked is the first element that has the opportunity to handle the event.</span></span> <span data-ttu-id="a8dcf-122">Pokud ale žádná obslužná rutina není připojená k <xref:System.Windows.Controls.Button> v události funguje, pak se událost doplní směrem nahoru k <xref:System.Windows.Controls.Button> nadřazenému prvku stromu elementu, který je <xref:System.Windows.Controls.StackPanel>.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-122">But if no handler attached to the <xref:System.Windows.Controls.Button> acts on the event, then the event will bubble upwards to the <xref:System.Windows.Controls.Button> parent in the element tree, which is the <xref:System.Windows.Controls.StackPanel>.</span></span> <span data-ttu-id="a8dcf-123">Může se stát, že bubliny událostí budou <xref:System.Windows.Controls.Border>a potom mimo kořenový adresář stránky stromu elementu (nezobrazuje se).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-123">Potentially, the event bubbles to <xref:System.Windows.Controls.Border>, and then beyond to the page root of the element tree (not shown).</span></span>

<span data-ttu-id="a8dcf-124">Jinými slovy, trasa události pro tuto událost <xref:System.Windows.Controls.Primitives.ButtonBase.Click>:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-124">In other words, the event route for this <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event is:</span></span>

<span data-ttu-id="a8dcf-125">Tlačítko--> StackPanel--> Border-->...</span><span class="sxs-lookup"><span data-stu-id="a8dcf-125">Button-->StackPanel-->Border-->...</span></span>

### <a name="top-level-scenarios-for-routed-events"></a><span data-ttu-id="a8dcf-126">Scénáře nejvyšší úrovně pro směrované události</span><span class="sxs-lookup"><span data-stu-id="a8dcf-126">Top-level Scenarios for Routed Events</span></span>

<span data-ttu-id="a8dcf-127">Následuje stručný souhrn scénářů, které motivují koncept směrované události a proč nebyla typická událost CLR pro tyto scénáře Dostačující:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-127">The following is a brief summary of the scenarios that motivated the routed event concept, and why a typical CLR event was not adequate for these scenarios:</span></span>

<span data-ttu-id="a8dcf-128">**Složení a zapouzdření ovládacích prvků:** Různé ovládací prvky v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] mají bohatý model obsahu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-128">**Control composition and encapsulation:** Various controls in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] have a rich content model.</span></span> <span data-ttu-id="a8dcf-129">Například můžete umístit obrázek do <xref:System.Windows.Controls.Button>, který efektivně rozšiřuje vizuální strom tlačítka.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-129">For example, you can place an image inside of a <xref:System.Windows.Controls.Button>, which effectively extends the visual tree of the button.</span></span> <span data-ttu-id="a8dcf-130">Přidaný obrázek však nesmí přerušit chování testování přístupů, které způsobí, že tlačítko reaguje na <xref:System.Windows.Controls.Primitives.ButtonBase.Click> jeho obsahu, a to i v případě, že uživatel klikne na pixely, které jsou technicky součástí obrázku.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-130">However, the added image must not break the hit-testing behavior that causes a button to respond to a <xref:System.Windows.Controls.Primitives.ButtonBase.Click> of its content, even if the user clicks on pixels that are technically part of the image.</span></span>

<span data-ttu-id="a8dcf-131">**Body příloh obslužných rutin jednotného** přiložených: V model Windows Forms bylo nutné několikrát připojit stejný popisovač pro zpracování událostí, které by mohly být vyvolány z více prvků.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-131">**Singular handler attachment points:** In Windows Forms, you would have to attach the same handler multiple times to process events that could be raised from multiple elements.</span></span> <span data-ttu-id="a8dcf-132">Směrované události umožňují připojit tuto obslužnou rutinu pouze jednou, jak je uvedeno v předchozím příkladu, a použít logiku obslužných rutin k určení, kde událost pochází v případě potřeby.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-132">Routed events enable you to attach that handler only once, as was shown in the previous example, and use handler logic to determine where the event came from if necessary.</span></span> <span data-ttu-id="a8dcf-133">Může to být například obslužná rutina pro dříve zobrazená [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-133">For instance, this might be the handler for the previously shown [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]:</span></span>

[!code-csharp[EventOvwSupport#GroupButtonCodeBehind](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml.cs#groupbuttoncodebehind)]
[!code-vb[EventOvwSupport#GroupButtonCodeBehind](~/samples/snippets/visualbasic/VS_Snippets_Wpf/EventOvwSupport/visualbasic/default.xaml.vb#groupbuttoncodebehind)]

<span data-ttu-id="a8dcf-134">**Zpracování tříd:** Směrované události umožňují statickou obslužnou rutinu, která je definována třídou.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-134">**Class handling:** Routed events permit a static handler that is defined by the class.</span></span> <span data-ttu-id="a8dcf-135">Tato obslužná rutina třídy má příležitost zpracovat událost předtím, než mohou obslužné rutiny připojené instance.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-135">This class handler has the opportunity to handle an event before any attached instance handlers can.</span></span>

<span data-ttu-id="a8dcf-136">**Odkazování na událost bez reflexe:** Některé techniky kódu a značek vyžadují způsob, jak identifikovat konkrétní událost.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-136">**Referencing an event without reflection:** Certain code and markup techniques require a way to identify a specific event.</span></span> <span data-ttu-id="a8dcf-137">Nasměrovaná událost vytvoří pole <xref:System.Windows.RoutedEvent> jako identifikátor, který poskytuje robustní techniku identifikace události, která nevyžaduje statické nebo běhové odrazy.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-137">A routed event creates a <xref:System.Windows.RoutedEvent> field as an identifier, which provides a robust event identification technique that does not require static or run-time reflection.</span></span>

### <a name="how-routed-events-are-implemented"></a><span data-ttu-id="a8dcf-138">Jak jsou implementovány směrované události</span><span class="sxs-lookup"><span data-stu-id="a8dcf-138">How Routed Events Are Implemented</span></span>

<span data-ttu-id="a8dcf-139">Směrovaná událost je událost modulu CLR, která je zajištěna instancí třídy <xref:System.Windows.RoutedEvent> a zaregistrována v systému událostí [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a8dcf-139">A routed event is a CLR event that is backed by an instance of the <xref:System.Windows.RoutedEvent> class and registered with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event system.</span></span> <span data-ttu-id="a8dcf-140">Instance <xref:System.Windows.RoutedEvent> získaná z registrace je obvykle uchována jako `public` členu pole `static` `readonly` třídy, která registruje a tedy "vlastní" směrované události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-140">The <xref:System.Windows.RoutedEvent> instance obtained from registration is typically retained as a `public` `static` `readonly` field member of the class that registers and thus "owns" the routed event.</span></span> <span data-ttu-id="a8dcf-141">Připojení k identicky pojmenované události CLR (která je někdy označována jako "Obálka") je dosaženo přepsáním `add` a `remove` implementaci pro událost CLR.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-141">The connection to the identically named CLR event (which is sometimes termed the "wrapper" event) is accomplished by overriding the `add` and `remove` implementations for the CLR event.</span></span> <span data-ttu-id="a8dcf-142">Obvykle `add` a `remove` jsou ponechány jako implicitní výchozí použití příslušné syntaxe události konkrétního jazyka pro přidávání a odebírání obslužných rutin této události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-142">Ordinarily, the `add` and `remove` are left as an implicit default that uses the appropriate language-specific event syntax for adding and removing handlers of that event.</span></span> <span data-ttu-id="a8dcf-143">Směrování směrovaného a spojovacího mechanismu události je koncepčně podobné, jako vlastnost závislosti je vlastnost CLR, která je založená na třídě <xref:System.Windows.DependencyProperty> a zaregistrovaná v systému vlastností [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a8dcf-143">The routed event backing and connection mechanism is conceptually similar to how a dependency property is a CLR property that is backed by the <xref:System.Windows.DependencyProperty> class and registered with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system.</span></span>

<span data-ttu-id="a8dcf-144">Následující příklad ukazuje deklaraci vlastní `Tap` směrované události, včetně registrace a vystavení pole identifikátoru <xref:System.Windows.RoutedEvent> a `add` a `remove` implementace pro událost `Tap` CLR.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-144">The following example shows the declaration for a custom `Tap` routed event, including the registration and exposure of the <xref:System.Windows.RoutedEvent> identifier field and the `add` and `remove` implementations for the `Tap` CLR event.</span></span>

[!code-csharp[RoutedEventCustom#AddRemoveHandler](~/samples/snippets/csharp/VS_Snippets_Wpf/RoutedEventCustom/CSharp/SDKSampleLibrary/class1.cs#addremovehandler)]
[!code-vb[RoutedEventCustom#AddRemoveHandler](~/samples/snippets/visualbasic/VS_Snippets_Wpf/RoutedEventCustom/VB/SDKSampleLibrary/Class1.vb#addremovehandler)]

### <a name="routed-event-handlers-and-xaml"></a><span data-ttu-id="a8dcf-145">Směrované obslužné rutiny událostí a XAML</span><span class="sxs-lookup"><span data-stu-id="a8dcf-145">Routed Event Handlers and XAML</span></span>

<span data-ttu-id="a8dcf-146">Chcete-li přidat obslužnou rutinu pro událost pomocí [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], deklarujete název události jako atribut prvku, který je naslouchací proces události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-146">To add a handler for an event using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you declare the event name as an attribute on the element that is an event listener.</span></span> <span data-ttu-id="a8dcf-147">Hodnota atributu je název vaší implementované metody obslužné rutiny, která musí existovat v částečné třídě souboru s kódem na pozadí.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-147">The value of the attribute is the name of your implemented handler method, which must exist in the partial class of the code-behind file.</span></span>

[!code-xaml[EventOvwSupport#SimplestSyntax](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml#simplestsyntax)]

<span data-ttu-id="a8dcf-148">Syntaxe [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pro přidání standardních obslužných rutin událostí CLR je stejná pro přidání obslužných rutin směrovaného události, protože opravdu přidáváte obslužné rutiny do obálky události CLR, která má nasměrovanou implementaci události pod.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-148">The [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] syntax for adding standard CLR event handlers is the same for adding routed event handlers, because you are really adding handlers to the CLR event wrapper, which has a routed event implementation underneath.</span></span> <span data-ttu-id="a8dcf-149">Další informace o přidávání obslužných rutin událostí v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]naleznete v tématu [XAML Overview (WPF)](../../../desktop-wpf/fundamentals/xaml.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-149">For more information about adding event handlers in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], see [XAML Overview (WPF)](../../../desktop-wpf/fundamentals/xaml.md).</span></span>

<a name="routing_strategies"></a>

## <a name="routing-strategies"></a><span data-ttu-id="a8dcf-150">Strategie směrování</span><span class="sxs-lookup"><span data-stu-id="a8dcf-150">Routing Strategies</span></span>

<span data-ttu-id="a8dcf-151">Směrované události používají jednu ze tří strategií směrování:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-151">Routed events use one of three routing strategies:</span></span>

- <span data-ttu-id="a8dcf-152">**Probublávání:** Jsou vyvolány obslužné rutiny události ve zdroji události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-152">**Bubbling:** Event handlers on the event source are invoked.</span></span> <span data-ttu-id="a8dcf-153">Směrované událost pak směruje na po sobě jdoucí nadřazené prvky, dokud se nedostane do kořenového adresáře stromu elementu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-153">The routed event then routes to successive parent elements until reaching the element tree root.</span></span> <span data-ttu-id="a8dcf-154">Většina směrovaných událostí používá ke probublávání strategii směrování.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-154">Most routed events use the bubbling routing strategy.</span></span> <span data-ttu-id="a8dcf-155">Probublávání směrované události se obecně používají k hlášení vstupních nebo stavových změn z různých ovládacích prvků nebo jiných prvků uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-155">Bubbling routed events are generally used to report input or state changes from distinct controls or other UI elements.</span></span>

- <span data-ttu-id="a8dcf-156">**Přímý odkaz:** Možnost vyvolat obslužné rutiny v reakci je dána pouze samotnému elementu source.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-156">**Direct:** Only the source element itself is given the opportunity to invoke handlers in response.</span></span> <span data-ttu-id="a8dcf-157">To je obdobou "směrování", které model Windows Forms používá pro události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-157">This is analogous to the "routing" that Windows Forms uses for events.</span></span> <span data-ttu-id="a8dcf-158">Nicméně na rozdíl od standardní události CLR, přímé směrované události podporují zpracování tříd (zpracování tříd je vysvětleno v nadcházející části) a lze je použít <xref:System.Windows.EventSetter> a <xref:System.Windows.EventTrigger>.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-158">However, unlike a standard CLR event, direct routed events support class handling (class handling is explained in an upcoming section) and can be used by <xref:System.Windows.EventSetter> and <xref:System.Windows.EventTrigger>.</span></span>

- <span data-ttu-id="a8dcf-159">**Tunelové propojení:** Zpočátku jsou vyvolány obslužné rutiny události v kořenovém adresáři stromu elementu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-159">**Tunneling:** Initially, event handlers at the element tree root are invoked.</span></span> <span data-ttu-id="a8dcf-160">Směrovaná událost pak směrují trasu prostřednictvím po sobě jdoucích podřízených prvků podél trasy směrem k elementu uzlu, který je směrovaného zdroje událostí (prvek, který vyvolal směrovanou událost).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-160">The routed event then travels a route through successive child elements along the route, towards the node element that is the routed event source (the element that raised the routed event).</span></span> <span data-ttu-id="a8dcf-161">Tunelové směrované události jsou často používány nebo zpracovávány jako součást skládání pro ovládací prvek, takže události ze složených částí mohou být záměrně potlačeny nebo nahrazeny událostmi, které jsou specifické pro úplný ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-161">Tunneling routed events are often used or handled as part of the compositing for a control, such that events from composite parts can be deliberately suppressed or replaced by events that are specific to the complete control.</span></span> <span data-ttu-id="a8dcf-162">Vstupní události, které jsou k dispozici v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], se často implementují jako dvojice tunelování/probublávání.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-162">Input events provided in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] often come implemented as a tunneling/bubbling pair.</span></span> <span data-ttu-id="a8dcf-163">Události tunelování se také někdy označují jako události ve verzi Preview, protože se používají konvence pojmenování, která se používá pro páry.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-163">Tunneling events are also sometimes referred to as Preview events, because of a naming convention that is used for the pairs.</span></span>

<a name="why_use"></a>

## <a name="why-use-routed-events"></a><span data-ttu-id="a8dcf-164">Proč používat směrované události?</span><span class="sxs-lookup"><span data-stu-id="a8dcf-164">Why Use Routed Events?</span></span>

<span data-ttu-id="a8dcf-165">Jako vývojář aplikace nemusíte vždycky znát ani se starat, že událost, kterou zpracováváte, je implementována jako směrovaná událost.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-165">As an application developer, you do not always need to know or care that the event you are handling is implemented as a routed event.</span></span> <span data-ttu-id="a8dcf-166">Směrované události mají zvláštní chování, ale toto chování je převážně neviditelné, Pokud zpracováváte událost na prvku, kde je vyvolána.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-166">Routed events have special behavior, but that behavior is largely invisible if you are handling an event on the element where it is raised.</span></span>

<span data-ttu-id="a8dcf-167">Místo toho, aby směrované události byly výkonné, je použití některého z navrhovaných scénářů: definování běžných obslužných rutin na společném kořenovém adresáři, skládání vlastního ovládacího prvku nebo definování vlastní třídy ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-167">Where routed events become powerful is if you use any of the suggested scenarios: defining common handlers at a common root, compositing your own control, or defining your own custom control class.</span></span>

<span data-ttu-id="a8dcf-168">Směrované naslouchací procesy událostí a směrované zdroje událostí nepotřebují sdílení společné události ve své hierarchii.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-168">Routed event listeners and routed event sources do not need to share a common event in their hierarchy.</span></span> <span data-ttu-id="a8dcf-169">Každý <xref:System.Windows.UIElement> nebo <xref:System.Windows.ContentElement> může být naslouchací proces události pro všechny směrované události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-169">Any <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> can be an event listener for any routed event.</span></span> <span data-ttu-id="a8dcf-170">Proto můžete použít úplnou sadu směrovaných událostí dostupných v rámci pracovní sady rozhraní API jako koncepční "rozhraní", aby různorodé prvky aplikace mohly vyměňovat informace o událostech.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-170">Therefore, you can use the full set of routed events available throughout the working API set as a conceptual "interface" whereby disparate elements in the application can exchange event information.</span></span> <span data-ttu-id="a8dcf-171">Tento koncept rozhraní pro směrované události je zvlášť použitelný pro události vstupu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-171">This "interface" concept for routed events is particularly applicable for input events.</span></span>

<span data-ttu-id="a8dcf-172">Směrované události lze také použít ke komunikaci mezi stromem elementu, protože data události pro událost jsou perpetuated ke každému prvku v trase.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-172">Routed events can also be used to communicate through the element tree, because the event data for the event is perpetuated to each element in the route.</span></span> <span data-ttu-id="a8dcf-173">Jeden prvek může změnit něco v datech události a tato změna by byla k dispozici pro další prvek v trase.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-173">One element could change something in the event data, and that change would be available to the next element in the route.</span></span>

<span data-ttu-id="a8dcf-174">Kromě aspektu směrování existují dva další důvody, proč může být jakákoli daná [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] událost implementována jako směrované událost namísto standardní události CLR.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-174">Other than the routing aspect, there are two other reasons that any given [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event might be implemented as a routed event instead of a standard CLR event.</span></span> <span data-ttu-id="a8dcf-175">Pokud implementujete vlastní události, můžete také zvážit tyto principy:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-175">If you are implementing your own events, you might also consider these principles:</span></span>

- <span data-ttu-id="a8dcf-176">Některé [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] funkce stylů a šablonování, jako je například <xref:System.Windows.EventSetter> a <xref:System.Windows.EventTrigger>, vyžadují směrované události na odkazovanou událost.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-176">Certain [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] styling and templating features such as <xref:System.Windows.EventSetter> and <xref:System.Windows.EventTrigger> require the referenced event to be a routed event.</span></span> <span data-ttu-id="a8dcf-177">Toto je výše zmíněný scénář identifikátoru události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-177">This is the event identifier scenario mentioned earlier.</span></span>

- <span data-ttu-id="a8dcf-178">Směrované události podporují mechanismus zpracování tříd, kdy třída může určovat statické metody, které mají příležitost zpracovat směrované události před tím, než k nim budou mít přístup všechny obslužné rutiny registrované instance.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-178">Routed events support a class handling mechanism whereby the class can specify static methods that have the opportunity to handle routed events before any registered instance handlers can access them.</span></span> <span data-ttu-id="a8dcf-179">To je velmi užitečné v návrhu ovládacích prvků, protože vaše třída může vymáhat chování třídy řízené událostmi, které nelze omylem potlačit pomocí zpracování události v instanci.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-179">This is very useful in control design, because your class can enforce event-driven class behaviors that cannot be accidentally suppressed by handling an event on an instance.</span></span>

<span data-ttu-id="a8dcf-180">Každé z výše uvedených doporučení je popsáno v samostatné části tohoto tématu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-180">Each of the above considerations is discussed in a separate section of this topic.</span></span>

<a name="event_handing"></a>

## <a name="adding-and-implementing-an-event-handler-for-a-routed-event"></a><span data-ttu-id="a8dcf-181">Přidání a implementace obslužné rutiny události pro směrovanou událost</span><span class="sxs-lookup"><span data-stu-id="a8dcf-181">Adding and Implementing an Event Handler for a Routed Event</span></span>

<span data-ttu-id="a8dcf-182">Chcete-li přidat obslužnou rutinu události v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], jednoduše přidáte název události do prvku jako atribut a nastavíte hodnotu atributu jako název obslužné rutiny události, která implementuje příslušný delegát, jak je uvedeno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-182">To add an event handler in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you simply add the event name to an element as an attribute and set the attribute value as the name of the event handler that implements an appropriate delegate, as in the following example.</span></span>

[!code-xaml[EventOvwSupport#SimplestSyntax](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml#simplestsyntax)]

<span data-ttu-id="a8dcf-183">`b1SetColor` je název implementované obslužné rutiny, která obsahuje kód, který zpracovává událost <xref:System.Windows.Controls.Primitives.ButtonBase.Click>.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-183">`b1SetColor` is the name of the implemented handler that contains the code that handles the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.</span></span> <span data-ttu-id="a8dcf-184">`b1SetColor` musí mít stejnou signaturu jako <xref:System.Windows.RoutedEventHandler> delegát, což je delegát obslužné rutiny události pro událost <xref:System.Windows.Controls.Primitives.ButtonBase.Click>.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-184">`b1SetColor` must have the same signature as the <xref:System.Windows.RoutedEventHandler> delegate, which is the event handler delegate for the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.</span></span> <span data-ttu-id="a8dcf-185">První parametr všech delegátů směrované obslužné rutiny události Určuje prvek, ke kterému je přidána obslužná rutina události, a druhý parametr určuje data pro událost.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-185">The first parameter of all routed event handler delegates specifies the element to which the event handler is added, and the second parameter specifies the data for the event.</span></span>

[!code-csharp[EventOvwSupport#SimpleHandlerA](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml.cs#simplehandlera)]
[!code-vb[EventOvwSupport#SimpleHandlerA](~/samples/snippets/visualbasic/VS_Snippets_Wpf/EventOvwSupport/visualbasic/default.xaml.vb#simplehandlera)]

<span data-ttu-id="a8dcf-186"><xref:System.Windows.RoutedEventHandler> je základní delegát obslužné rutiny události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-186"><xref:System.Windows.RoutedEventHandler> is the basic routed event handler delegate.</span></span> <span data-ttu-id="a8dcf-187">Pro směrované události, které jsou specializované pro určité ovládací prvky nebo scénáře, mohou být Delegáti použití pro směrované obslužné rutiny událostí také lépe specializované, aby mohli přenášet specializované údaje o událostech.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-187">For routed events that are specialized for certain controls or scenarios, the delegates to use for the routed event handlers also might become more specialized, so that they can transmit specialized event data.</span></span> <span data-ttu-id="a8dcf-188">Například v běžném vstupním scénáři můžete zpracovat událost směrované <xref:System.Windows.UIElement.DragEnter>.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-188">For instance, in a common input scenario, you might handle a <xref:System.Windows.UIElement.DragEnter> routed event.</span></span> <span data-ttu-id="a8dcf-189">Obslužná rutina by měla implementovat delegáta <xref:System.Windows.DragEventHandler>.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-189">Your handler should implement the <xref:System.Windows.DragEventHandler> delegate.</span></span> <span data-ttu-id="a8dcf-190">Pomocí nejvíce specifického delegáta můžete zpracovat <xref:System.Windows.DragEventArgs> v obslužné rutině a číst vlastnost <xref:System.Windows.DragEventArgs.Data%2A>, která obsahuje datovou část schránky operace přetažení.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-190">By using the most specific delegate, you can process the <xref:System.Windows.DragEventArgs> in the handler and read the <xref:System.Windows.DragEventArgs.Data%2A> property, which contains the clipboard payload of the drag operation.</span></span>

<span data-ttu-id="a8dcf-191">Úplný příklad, jak přidat obslužnou rutinu události k elementu pomocí [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], najdete v tématu [zpracování směrované události](how-to-handle-a-routed-event.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-191">For a complete example of how to add an event handler to an element using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], see [Handle a Routed Event](how-to-handle-a-routed-event.md).</span></span>

<span data-ttu-id="a8dcf-192">Přidání obslužné rutiny pro směrovanou událost v aplikaci, která je vytvořena v kódu, je jednoduché.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-192">Adding a handler for a routed event in an application that is created in code is straightforward.</span></span> <span data-ttu-id="a8dcf-193">Směrované obslužné rutiny událostí lze vždy přidat prostřednictvím pomocné metody <xref:System.Windows.UIElement.AddHandler%2A> (což je stejná metoda, jakou stávající volání `add`.) Stávající [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] směrované události však obvykle mají záložní implementace `add` a `remove` logiku, která umožňuje obslužné rutiny pro směrované události přidat syntaxí události specifické pro jazyk, což je intuitivnější syntaxe, než je pomocná metoda.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-193">Routed event handlers can always be added through a helper method <xref:System.Windows.UIElement.AddHandler%2A> (which is the same method that the existing backing calls for `add`.) However, existing [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] routed events generally have backing implementations of `add` and `remove` logic that allow the handlers for routed events to be added by a language-specific event syntax, which is more intuitive syntax than the helper method.</span></span> <span data-ttu-id="a8dcf-194">Následuje příklad použití pomocné metody:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-194">The following is an example usage of the helper method:</span></span>

[!code-csharp[EventOvwSupport#AddHandlerCode](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml.cs#addhandlercode)]
[!code-vb[EventOvwSupport#AddHandlerCode](~/samples/snippets/visualbasic/VS_Snippets_Wpf/EventOvwSupport/visualbasic/default.xaml.vb#addhandlercode)]

<span data-ttu-id="a8dcf-195">Následující příklad ukazuje syntaxi C# operátoru (Visual Basic má mírně odlišnou syntaxi operátora z důvodu manipulace s odkazem):</span><span class="sxs-lookup"><span data-stu-id="a8dcf-195">The next example shows the C# operator syntax (Visual Basic has slightly different operator syntax because of its handling of dereferencing):</span></span>

[!code-csharp[EventOvwSupport#AddHandlerPlusEquals](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml.cs#addhandlerplusequals)]
[!code-vb[EventOvwSupport#AddHandlerPlusEquals](~/samples/snippets/visualbasic/VS_Snippets_Wpf/EventOvwSupport/visualbasic/default.xaml.vb#addhandlerplusequals)]

<span data-ttu-id="a8dcf-196">Příklad, jak přidat obslužnou rutinu události v kódu, naleznete v tématu [Přidání obslužné rutiny události pomocí kódu](how-to-add-an-event-handler-using-code.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-196">For an example of how to add an event handler in code, see [Add an Event Handler Using Code](how-to-add-an-event-handler-using-code.md).</span></span>

<span data-ttu-id="a8dcf-197">Pokud používáte Visual Basic, můžete také použít klíčové slovo `Handles` pro přidání obslužných rutin jako součást deklarací obslužných rutin.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-197">If you are using Visual Basic, you can also use the `Handles` keyword to add handlers as part of the handler declarations.</span></span> <span data-ttu-id="a8dcf-198">Další informace naleznete v tématu [Visual Basic a zpracování událostí WPF](visual-basic-and-wpf-event-handling.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-198">For more information, see [Visual Basic and WPF Event Handling](visual-basic-and-wpf-event-handling.md).</span></span>

<a name="concept_handled"></a>

### <a name="the-concept-of-handled"></a><span data-ttu-id="a8dcf-199">Koncept zpracování</span><span class="sxs-lookup"><span data-stu-id="a8dcf-199">The Concept of Handled</span></span>

<span data-ttu-id="a8dcf-200">Všechny směrované události sdílejí základní třídu dat události <xref:System.Windows.RoutedEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-200">All routed events share a common event data base class, <xref:System.Windows.RoutedEventArgs>.</span></span> <span data-ttu-id="a8dcf-201"><xref:System.Windows.RoutedEventArgs> definuje vlastnost <xref:System.Windows.RoutedEventArgs.Handled%2A>, která přijímá logickou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-201"><xref:System.Windows.RoutedEventArgs> defines the <xref:System.Windows.RoutedEventArgs.Handled%2A> property, which takes a Boolean value.</span></span> <span data-ttu-id="a8dcf-202">Účelem vlastnosti <xref:System.Windows.RoutedEventArgs.Handled%2A> je povolení jakékoli obslužné rutiny události podél trasy k označení směrované události jako *zpracovaného*nastavením hodnoty <xref:System.Windows.RoutedEventArgs.Handled%2A> na `true`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-202">The purpose of the <xref:System.Windows.RoutedEventArgs.Handled%2A> property is to enable any event handler along the route to mark the routed event as *handled*, by setting the value of <xref:System.Windows.RoutedEventArgs.Handled%2A> to `true`.</span></span> <span data-ttu-id="a8dcf-203">Po zpracování obslužnou rutinou v jednom elementu v cestě se data sdílené události znovu nahlásí každému posluchači v trase.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-203">After being processed by the handler at one element along the route, the shared event data is again reported to each listener along the route.</span></span>

<span data-ttu-id="a8dcf-204">Hodnota <xref:System.Windows.RoutedEventArgs.Handled%2A> má vliv na to, jak je nahlášena nebo zpracována směrované událost při jejich následném přenosu podél trasy.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-204">The value of <xref:System.Windows.RoutedEventArgs.Handled%2A> affects how a routed event is reported or processed as it travels further along the route.</span></span> <span data-ttu-id="a8dcf-205">Pokud je <xref:System.Windows.RoutedEventArgs.Handled%2A> `true` v datech události pro směrovanou událost, pak obslužné rutiny, které naslouchají této události směrované na jiné prvky, nejsou obvykle vyvolány pro danou instanci události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-205">If <xref:System.Windows.RoutedEventArgs.Handled%2A> is `true` in the event data for a routed event, then handlers that listen for that routed event on other elements are generally no longer invoked for that particular event instance.</span></span> <span data-ttu-id="a8dcf-206">To platí pro obslužné rutiny připojené v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] a pro obslužné rutiny přidané syntaxmi příloh obslužných rutin událostí, jako jsou `+=` nebo `Handles`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-206">This is true both for handlers attached in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and for handlers added by language-specific event handler attachment syntaxes such as `+=` or `Handles`.</span></span> <span data-ttu-id="a8dcf-207">U většiny běžných scénářů obslužných rutin se označením události jako zpracovávané nastaví <xref:System.Windows.RoutedEventArgs.Handled%2A> na `true` bude "Stop" směrování buď trasy tunelového propojení, nebo trasy k probublávání, a také pro všechny události, které jsou zpracovávány v určitém bodě trasy obslužnou rutinou třídy.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-207">For most common handler scenarios, marking an event as handled by setting <xref:System.Windows.RoutedEventArgs.Handled%2A> to `true` will "stop" routing for either a tunneling route or a bubbling route, and also for any event that is handled at a point in the route by a class handler.</span></span>

<span data-ttu-id="a8dcf-208">Nicméně existuje mechanismus "handledEventsToo", který naslouchací procesy stále můžou spouštět obslužné rutiny v reakci na směrované události, kde <xref:System.Windows.RoutedEventArgs.Handled%2A> `true` v datech události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-208">However, there is a "handledEventsToo" mechanism whereby listeners can still run handlers in response to routed events where <xref:System.Windows.RoutedEventArgs.Handled%2A> is `true` in the event data.</span></span> <span data-ttu-id="a8dcf-209">Jinými slovy, trasa události není skutečně zastavena označením dat události jako zpracovávaných.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-209">In other words, the event route is not truly stopped by marking the event data as handled.</span></span> <span data-ttu-id="a8dcf-210">Mechanismus handledEventsToo můžete použít pouze v kódu nebo v <xref:System.Windows.EventSetter>:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-210">You can only use the handledEventsToo mechanism in code, or in an <xref:System.Windows.EventSetter>:</span></span>

- <span data-ttu-id="a8dcf-211">V kódu namísto použití syntaxe události specifické pro jazyk, která funguje pro obecné události CLR, zavolejte metodu [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.UIElement.AddHandler%28System.Windows.RoutedEvent%2CSystem.Delegate%2CSystem.Boolean%29> k přidání vaší obslužné rutiny.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-211">In code, instead of using a language-specific event syntax that works for general CLR events, call the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] method <xref:System.Windows.UIElement.AddHandler%28System.Windows.RoutedEvent%2CSystem.Delegate%2CSystem.Boolean%29> to add your handler.</span></span> <span data-ttu-id="a8dcf-212">Zadejte hodnotu `handledEventsToo` jako `true`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-212">Specify the value of `handledEventsToo` as `true`.</span></span>

- <span data-ttu-id="a8dcf-213">V <xref:System.Windows.EventSetter>nastavte atribut <xref:System.Windows.EventSetter.HandledEventsToo%2A> na hodnotu `true`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-213">In an <xref:System.Windows.EventSetter>, set the <xref:System.Windows.EventSetter.HandledEventsToo%2A> attribute to be `true`.</span></span>

<span data-ttu-id="a8dcf-214">Kromě chování, které <xref:System.Windows.RoutedEventArgs.Handled%2A> stav vytváří ve směrovaných událostech, koncept <xref:System.Windows.RoutedEventArgs.Handled%2A> má vliv na to, jak byste měli navrhnout aplikaci a napsat kód obslužné rutiny události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-214">In addition to the behavior that <xref:System.Windows.RoutedEventArgs.Handled%2A> state produces in routed events, the concept of <xref:System.Windows.RoutedEventArgs.Handled%2A> has implications for how you should design your application and write the event handler code.</span></span> <span data-ttu-id="a8dcf-215">Můžete conceptualize <xref:System.Windows.RoutedEventArgs.Handled%2A> jako jednoduchý protokol, který je vystavený směrovanými událostmi.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-215">You can conceptualize <xref:System.Windows.RoutedEventArgs.Handled%2A> as being a simple protocol that is exposed by routed events.</span></span> <span data-ttu-id="a8dcf-216">Přesně to, jak tento protokol používáte, je až vám, ale koncepční návrh, jak má být hodnota <xref:System.Windows.RoutedEventArgs.Handled%2A> určená k použití, je následující:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-216">Exactly how you use this protocol is up to you, but the conceptual design for how the value of <xref:System.Windows.RoutedEventArgs.Handled%2A> is intended to be used is as follows:</span></span>

- <span data-ttu-id="a8dcf-217">Pokud je směrováná událost označena jako zpracovaná, nemusí být zpracována dalšími prvky v této trase.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-217">If a routed event is marked as handled, then it does not need to be handled again by other elements along that route.</span></span>

- <span data-ttu-id="a8dcf-218">Pokud směrované událost není označena jako zpracovaná, pak jiné naslouchací procesy, které byly dříve v trase, zvolily buď Neregistrovat obslužnou rutinu, nebo obslužné rutiny, které byly zaregistrovány, nepracují s daty události a nastaveny <xref:System.Windows.RoutedEventArgs.Handled%2A> na `true`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-218">If a routed event is not marked as handled, then other listeners that were earlier along the route have chosen either not to register a handler, or the handlers that were registered chose not to manipulate the event data and set <xref:System.Windows.RoutedEventArgs.Handled%2A> to `true`.</span></span> <span data-ttu-id="a8dcf-219">(Nebo je samozřejmě možné, že aktuální naslouchací proces je prvním bodem v trase.) Obslužné rutiny aktuálního naslouchacího procesu teď mají tři možné kurzy k akci:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-219">(Or, it is of course possible that the current listener is the first point in the route.) Handlers on the current listener now have three possible courses of action:</span></span>

  - <span data-ttu-id="a8dcf-220">Neprovádět žádnou akci. událost zůstává neošetřená a událost se směruje do dalšího naslouchacího procesu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-220">Take no action at all; the event remains unhandled, and the event routes to the next listener.</span></span>

  - <span data-ttu-id="a8dcf-221">Spusťte kód jako odpověď na událost, ale zajistěte, aby akce, která byla provedena, nebyla dostatečně podstatná, aby bylo možné označit událost jako zpracovanou.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-221">Execute code in response to the event, but make the determination that the action taken was not substantial enough to warrant marking the event as handled.</span></span> <span data-ttu-id="a8dcf-222">Událost směruje do dalšího naslouchacího procesu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-222">The event routes to the next listener.</span></span>

  - <span data-ttu-id="a8dcf-223">Spustí kód jako odpověď na událost.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-223">Execute code in response to the event.</span></span> <span data-ttu-id="a8dcf-224">Označte událost jako zpracovanou v datech události předaných obslužné rutině, protože provedena akce byla dostatečně podstatná, aby bylo možné označit, že se označení považuje za zpracovanou.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-224">Mark the event as handled in the event data passed to the handler, because the action taken was deemed substantial enough to warrant marking as handled.</span></span> <span data-ttu-id="a8dcf-225">Událost dál směruje na další naslouchací proces, ale s <xref:System.Windows.RoutedEventArgs.Handled%2A>=`true` v datech události, takže `handledEventsToo` posluchačů mají možnost vyvolat další obslužné rutiny.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-225">The event still routes to the next listener, but with <xref:System.Windows.RoutedEventArgs.Handled%2A>=`true` in its event data, so only `handledEventsToo` listeners have the opportunity to invoke further handlers.</span></span>

<span data-ttu-id="a8dcf-226">Tento koncepční návrh je posílen výše zmíněným chováním směrování: je obtížnější (přestože je stále možné v kódu nebo stylů) připojit obslužné rutiny pro směrované události, které jsou vyvolány i v případě, že předchozí obslužná rutina v trase již nastavila <xref:System.Windows.RoutedEventArgs.Handled%2A> k `true`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-226">This conceptual design is reinforced by the routing behavior mentioned earlier: it is more difficult (although still possible in code or styles) to attach handlers for routed events that are invoked even if a previous handler along the route has already set <xref:System.Windows.RoutedEventArgs.Handled%2A> to `true`.</span></span>

<span data-ttu-id="a8dcf-227">Další informace o <xref:System.Windows.RoutedEventArgs.Handled%2A>, zpracování tříd směrovaných událostí a doporučeních, kdy je vhodné označit směrovanou událost jako <xref:System.Windows.RoutedEventArgs.Handled%2A>, naleznete v tématu [Označení směrovaných událostí jako zpracovaných a zpracování tříd](marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-227">For more information about <xref:System.Windows.RoutedEventArgs.Handled%2A>, class handling of routed events, and recommendations about when it is appropriate to mark a routed event as <xref:System.Windows.RoutedEventArgs.Handled%2A>, see [Marking Routed Events as Handled, and Class Handling](marking-routed-events-as-handled-and-class-handling.md).</span></span>

<span data-ttu-id="a8dcf-228">V aplikacích je poměrně běžné zpracovávat pouze probublávání směrované události na objekt, který ji vyvolal, a nemusíte přitom zabývat charakteristikami směrování událostí.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-228">In applications, it is quite common to just handle a bubbling routed event on the object that raised it, and not be concerned with the event's routing characteristics at all.</span></span> <span data-ttu-id="a8dcf-229">Přesto je však vhodné označit směrovanou událost jako zpracovanou v datech události, aby nedocházelo k neočekávaným vedlejším účinkům pouze v případě, že je k této stejné směrované události přidružena obslužná rutina.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-229">However, it is still a good practice to mark the routed event as handled in the event data, to prevent unanticipated side effects just in case an element that is further up the element tree also has a handler attached for that same routed event.</span></span>

<a name="class_handlers"></a>

## <a name="class-handlers"></a><span data-ttu-id="a8dcf-230">Obslužné rutiny tříd</span><span class="sxs-lookup"><span data-stu-id="a8dcf-230">Class Handlers</span></span>

<span data-ttu-id="a8dcf-231">Pokud definujete třídu, která je odvozena nějakým způsobem z <xref:System.Windows.DependencyObject>, můžete také definovat a připojit obslužnou rutinu třídy pro směrovanou událost, která je deklarována nebo zděděná členem události vaší třídy.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-231">If you are defining a class that derives in some way from <xref:System.Windows.DependencyObject>, you can also define and attach a class handler for a routed event that is a declared or inherited event member of your class.</span></span> <span data-ttu-id="a8dcf-232">Obslužné rutiny třídy jsou vyvolány před všemi obslužnými rutinami naslouchacího procesu instance, které jsou připojeny k instanci této třídy, pokaždé, když směrované událost dosáhne instance elementu v cestě.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-232">Class handlers are invoked before any instance listener handlers that are attached to an instance of that class, whenever a routed event reaches an element instance in its route.</span></span>

<span data-ttu-id="a8dcf-233">Některé ovládací prvky [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] mají podstatu zpracování tříd pro určité směrované události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-233">Some [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] controls have inherent class handling for certain routed events.</span></span> <span data-ttu-id="a8dcf-234">To může vést k vnějšímu vzhledu, že směrované událost není nikdy vyvolána, ale ve skutečnosti se jedná o zpracování tříd a směrované událost může být zpracována vašimi obslužnými rutinami instance, pokud používáte určité techniky.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-234">This might give the outward appearance that the routed event is not ever raised, but in reality it is being class handled, and the routed event can potentially still be handled by your instance handlers if you use certain techniques.</span></span> <span data-ttu-id="a8dcf-235">Mnoho základních tříd a ovládacích prvků navíc zveřejňuje virtuální metody, které lze použít k přepsání chování zpracování třídy.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-235">Also, many base classes and controls expose virtual methods that can be used to override class handling behavior.</span></span> <span data-ttu-id="a8dcf-236">Další informace o tom, jak obejít nepožadovanou manipulaci s třídou a definovat vlastní zpracování třídy ve vlastní třídě, naleznete v tématu [Označení směrovaných událostí jako zpracovaných a zpracování tříd](marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-236">For more information both on how to work around undesired class handling and on defining your own class handling in a custom class, see [Marking Routed Events as Handled, and Class Handling](marking-routed-events-as-handled-and-class-handling.md).</span></span>

<a name="attached_events"></a>

## <a name="attached-events-in-wpf"></a><span data-ttu-id="a8dcf-237">Připojené události v subsystému WPF</span><span class="sxs-lookup"><span data-stu-id="a8dcf-237">Attached Events in WPF</span></span>

<span data-ttu-id="a8dcf-238">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] jazyk definuje také zvláštní typ události označovaný jako *připojená událost*.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-238">The [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] language also defines a special type of event called an *attached event*.</span></span> <span data-ttu-id="a8dcf-239">Připojená událost umožňuje přidat obslužnou rutinu pro konkrétní událost do libovolného elementu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-239">An attached event enables you to add a handler for a particular event to an arbitrary element.</span></span> <span data-ttu-id="a8dcf-240">Element, který zpracovává událost, nedefinuje ani nedědí připojenou událost, a ani objekt, který potenciálně nevyvolává událost, ani instance zpracování cíle musí definovat nebo jinak vlastnit tuto událost jako člena třídy.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-240">The element handling the event need not define or inherit the attached event, and neither the object potentially raising the event nor the destination handling instance must define or otherwise "own" that event as a class member.</span></span>

<span data-ttu-id="a8dcf-241">Vstupní systém [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] používá rozsáhlou připojenou událost.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-241">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] input system uses attached events extensively.</span></span> <span data-ttu-id="a8dcf-242">Téměř všechny tyto připojené události jsou však předávány prostřednictvím základních prvků.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-242">However, nearly all of these attached events are forwarded through base elements.</span></span> <span data-ttu-id="a8dcf-243">Vstupní události se pak zobrazí jako ekvivalentní nepřipojené směrované události, které jsou členy třídy základního elementu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-243">The input events then appear as equivalent non-attached routed events that are members of the base element class.</span></span> <span data-ttu-id="a8dcf-244">Například základní připojené události <xref:System.Windows.Input.Mouse.MouseDown?displayProperty=nameWithType> lze snáze zpracovat na všech daných <xref:System.Windows.UIElement> pomocí <xref:System.Windows.UIElement.MouseDown> na daném <xref:System.Windows.UIElement>, nikoli v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] nebo kódu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-244">For instance, the underlying attached event <xref:System.Windows.Input.Mouse.MouseDown?displayProperty=nameWithType> can more easily be handled on any given <xref:System.Windows.UIElement> by using <xref:System.Windows.UIElement.MouseDown> on that <xref:System.Windows.UIElement> rather than dealing with attached event syntax either in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] or code.</span></span>

<span data-ttu-id="a8dcf-245">Další informace o připojených událostech v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]najdete v tématu [Přehled připojených událostí](attached-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-245">For more information about attached events in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Attached Events Overview](attached-events-overview.md).</span></span>

<a name="Qualifying_Event_Names_in_XAML_for_Anticipated_Routing"></a>

## <a name="qualified-event-names-in-xaml"></a><span data-ttu-id="a8dcf-246">Kvalifikované názvy událostí v jazyce XAML</span><span class="sxs-lookup"><span data-stu-id="a8dcf-246">Qualified Event Names in XAML</span></span>

<span data-ttu-id="a8dcf-247">Jiné použití syntaxe, které se podobá *TypeName*. *EventName* připojená syntaxe události, ale není výhradně mluvit o využití připojené události je při připojování obslužných rutin pro směrované události, které jsou vyvolány podřízenými prvky.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-247">Another syntax usage that resembles *typename*.*eventname* attached event syntax but is not strictly speaking an attached event usage is when you attach handlers for routed events that are raised by child elements.</span></span> <span data-ttu-id="a8dcf-248">Obslužné rutiny připojíte ke společné nadřazené položce, abyste mohli využít výhod směrování událostí, i když společný nadřazený objekt nemusí mít příslušnou směrovanou událost jako člen.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-248">You attach the handlers to a common parent, to take advantage of event routing, even though the common parent might not have the relevant routed event as a member.</span></span> <span data-ttu-id="a8dcf-249">Zvažte tento příklad znovu:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-249">Consider this example again:</span></span>

[!code-xaml[EventOvwSupport#GroupButton](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml#groupbutton)]

<span data-ttu-id="a8dcf-250">Zde je posluchač nadřazeného elementu, kde je obslužná rutina přidána, <xref:System.Windows.Controls.StackPanel>.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-250">Here, the parent element listener where the handler is added is a <xref:System.Windows.Controls.StackPanel>.</span></span> <span data-ttu-id="a8dcf-251">Přidává však obslužnou rutinu pro směrovanou událost, která byla deklarována a bude vyvolána třídou <xref:System.Windows.Controls.Button> (<xref:System.Windows.Controls.Primitives.ButtonBase> skutečně, ale je k dispozici <xref:System.Windows.Controls.Button> prostřednictvím dědičnosti).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-251">However, it is adding a handler for a routed event that was declared and will be raised by the <xref:System.Windows.Controls.Button> class (<xref:System.Windows.Controls.Primitives.ButtonBase> actually, but available to <xref:System.Windows.Controls.Button> through inheritance).</span></span> <span data-ttu-id="a8dcf-252"><xref:System.Windows.Controls.Button> "vlastní" událost, ale směrovaný systém událostí umožňuje, aby byly obslužné rutiny pro všechny směrované události připojeny k jakémukoli <xref:System.Windows.UIElement> nebo posluchači instance <xref:System.Windows.ContentElement>, který by jinak mohl připojit naslouchací procesy pro událost modulu CLR (Common Language Runtime).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-252"><xref:System.Windows.Controls.Button> "owns" the event, but the routed event system permits handlers for any routed event to be attached to any <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> instance listener that could otherwise attach listeners for a common language runtime (CLR) event.</span></span> <span data-ttu-id="a8dcf-253">Výchozím oborem názvů xmlns pro tyto kvalifikované názvy atributů události je obvykle výchozí [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obor názvů xmlns, ale můžete také zadat předem fixní obory názvů pro vlastní směrované události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-253">The default xmlns namespace for these qualified event attribute names is typically the default [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] xmlns namespace, but you can also specify prefixed namespaces for custom routed events.</span></span> <span data-ttu-id="a8dcf-254">Další informace o xmlns naleznete v tématu [obory názvů XAML a mapování oboru názvů pro WPF XAML](xaml-namespaces-and-namespace-mapping-for-wpf-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-254">For more information about xmlns, see [XAML Namespaces and Namespace Mapping for WPF XAML](xaml-namespaces-and-namespace-mapping-for-wpf-xaml.md).</span></span>

<a name="how_event_processing_works"></a>

## <a name="wpf-input-events"></a><span data-ttu-id="a8dcf-255">Události vstupu WPF</span><span class="sxs-lookup"><span data-stu-id="a8dcf-255">WPF Input Events</span></span>

<span data-ttu-id="a8dcf-256">Jedna častá aplikace směrovaných událostí v rámci [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] platformy je určena pro vstupní události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-256">One frequent application of routed events within the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] platform is for input events.</span></span> <span data-ttu-id="a8dcf-257">V [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]tunelování názvů směrovaných událostí je předponou "Preview" podle konvence.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-257">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], tunneling routed events names are prefixed with the word "Preview" by convention.</span></span> <span data-ttu-id="a8dcf-258">Události vstupu často přicházejí ve dvojicích, přičemž jedna se jedná o událost probublávání a druhá je událost tunelování.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-258">Input events often come in pairs, with one being the bubbling event and the other being the tunneling event.</span></span> <span data-ttu-id="a8dcf-259">Například událost <xref:System.Windows.ContentElement.KeyDown> a událost <xref:System.Windows.ContentElement.PreviewKeyDown> mají stejný podpis, přičemž původní je probublávání vstupní událost a druhá je vstupní událost tunelového propojení.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-259">For example, the <xref:System.Windows.ContentElement.KeyDown> event and the <xref:System.Windows.ContentElement.PreviewKeyDown> event have the same signature, with the former being the bubbling input event and the latter being the tunneling input event.</span></span> <span data-ttu-id="a8dcf-260">V některých případech mají vstupní události pouze šíření verze, nebo možná pouze přímo směrované verze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-260">Occasionally, input events only have a bubbling version, or perhaps only a direct routed version.</span></span> <span data-ttu-id="a8dcf-261">V dokumentaci směrované témata událostí křížově odkazují na podobné směrované události s alternativními strategiemi směrování, pokud takové směrované události existují a že oddíly na spravovaných odkazech objasňují strategii směrování u každé směrované události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-261">In the documentation, routed event topics cross-reference similar routed events with alternative routing strategies if such routed events exist, and sections in the managed reference pages clarify the routing strategy of each routed event.</span></span>

[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="a8dcf-262">vstupní události, které jsou součástí dvojic, jsou implementovány, aby jedna akce uživatele ze vstupu, například stisknutí tlačítka myši, vyvolala obě směrované události dvojice v sekvenci.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-262">input events that come in pairs are implemented so that a single user action from input, such as a mouse button press, will raise both routed events of the pair in sequence.</span></span> <span data-ttu-id="a8dcf-263">Nejprve se vygeneruje událost tunelování a dojde k přenosu své trasy.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-263">First, the tunneling event is raised and travels its route.</span></span> <span data-ttu-id="a8dcf-264">Pak dojde k vyvolání události probublávání a k přenosu trasy.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-264">Then the bubbling event is raised and travels its route.</span></span> <span data-ttu-id="a8dcf-265">Dvě události doslova sdílejí stejnou instanci dat události, protože volání metody <xref:System.Windows.UIElement.RaiseEvent%2A> v implementované třídě, která vyvolává událost probublávání pro data události z události tunelování a znovu ji používá v nově vyvolané události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-265">The two events literally share the same event data instance, because the <xref:System.Windows.UIElement.RaiseEvent%2A> method call in the implementing class that raises the bubbling event listens for the event data from the tunneling event and reuses it in the new raised event.</span></span> <span data-ttu-id="a8dcf-266">Naslouchací procesy s obslužnými rutinami pro událost tunelování mají první možnost označit zpracovávané směrované události (nejprve obslužné rutiny třídy a potom obslužné rutiny instance).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-266">Listeners with handlers for the tunneling event have the first opportunity to mark the routed event handled (class handlers first, then instance handlers).</span></span> <span data-ttu-id="a8dcf-267">Pokud prvek podél tunelového propojení označil směrovanou událost jako zpracovanou, jsou již zpracovaná data události odesílána pro událost probublávání a typické obslužné rutiny připojené k ekvivalentním vstupním událostem šíření nebudou vyvolány.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-267">If an element along the tunneling route marked the routed event as handled, the already-handled event data is sent on for the bubbling event, and typical handlers attached for the equivalent bubbling input events will not be invoked.</span></span> <span data-ttu-id="a8dcf-268">K vnějším vzhledům bude jako v případě, že událost zpracovaného probublávání není ještě vyvolána.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-268">To outward appearances it will be as if the handled bubbling event has not even been raised.</span></span> <span data-ttu-id="a8dcf-269">Toto chování při zpracování je užitečné pro skládání ovládacích prvků, kde můžete chtít, aby byly všechny vstupní události na základě testu a vstupní události na základě fokusu hlášeny konečným ovládacím prvkem, nikoli s jeho složenými částmi.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-269">This handling behavior is useful for control compositing, where you might want all hit-test based input events or focus-based input events to be reported by your final control, rather than its composite parts.</span></span> <span data-ttu-id="a8dcf-270">Konečný element ovládacího prvku je bližší ke kořenu v skládání. proto má možnost nejprve zpracovat událost tunelového propojení a případně "nahradit", který směroval událost s větším ovládacím prvkem, jako součást kódu, který vrací ovládací prvek. Deník.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-270">The final control element is closer to the root in the compositing, and therefore has the opportunity to class handle the tunneling event first and perhaps to "replace" that routed event with a more control-specific event, as part of the code that backs the control class.</span></span>

<span data-ttu-id="a8dcf-271">Jako příklad fungování zpracování událostí vstupu je třeba vzít v úvahu následující příklad události Input.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-271">As an illustration of how input event processing works, consider the following input event example.</span></span> <span data-ttu-id="a8dcf-272">Následující obrázek stromu `leaf element #2` je zdrojem `PreviewMouseDown` a pak `MouseDown` událost:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-272">In the following tree illustration, `leaf element #2` is the source of both a `PreviewMouseDown` and then a `MouseDown` event:</span></span>

![Diagram směrování událostí](./media/routed-events-overview/input-event-routing.png)

<span data-ttu-id="a8dcf-274">Pořadí zpracování událostí je následující:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-274">The order of event processing is as follows:</span></span>

1. <span data-ttu-id="a8dcf-275">`PreviewMouseDown` (tunel) na kořenovém elementu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-275">`PreviewMouseDown` (tunnel) on root element.</span></span>

2. <span data-ttu-id="a8dcf-276">`PreviewMouseDown` (tunelové propojení) na zprostředkujícím prvku #1.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-276">`PreviewMouseDown` (tunnel) on intermediate element #1.</span></span>

3. <span data-ttu-id="a8dcf-277">`PreviewMouseDown` (tunel) na zdrojovém elementu #2.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-277">`PreviewMouseDown` (tunnel) on source element #2.</span></span>

4. <span data-ttu-id="a8dcf-278">`MouseDown` (bublinové) na zdrojovém prvku #2.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-278">`MouseDown` (bubble) on source element #2.</span></span>

5. <span data-ttu-id="a8dcf-279">`MouseDown` (bublinové) na #1 mezilehlého prvku.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-279">`MouseDown` (bubble) on intermediate element #1.</span></span>

6. <span data-ttu-id="a8dcf-280">`MouseDown` (bublinové) na kořenovém elementu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-280">`MouseDown` (bubble) on root element.</span></span>

<span data-ttu-id="a8dcf-281">Delegát směrované obslužné rutiny události poskytuje odkazy na dva objekty: objekt, který vyvolal událost a objekt, kde byla obslužná rutina vyvolána.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-281">A routed event handler delegate provides references to two objects: the object that raised the event and the object where the handler was invoked.</span></span> <span data-ttu-id="a8dcf-282">Objekt, kde byla obslužná rutina vyvolána, je objekt, který je hlášen parametrem `sender`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-282">The object where the handler was invoked is the object reported by the `sender` parameter.</span></span> <span data-ttu-id="a8dcf-283">Objekt, ve kterém byla událost poprvé vyvolána, je hlášen vlastností <xref:System.Windows.RoutedEventArgs.Source%2A> v datech události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-283">The object where the event was first raised is reported by the <xref:System.Windows.RoutedEventArgs.Source%2A> property in the event data.</span></span> <span data-ttu-id="a8dcf-284">Směrovaná událost může být stále vyvolána a zpracována stejným objektem. v takovém případě `sender` a <xref:System.Windows.RoutedEventArgs.Source%2A> jsou identické (Jedná se o případ s kroky 3 a 4 v seznamu příkladů zpracování událostí).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-284">A routed event can still be raised and handled by the same object, in which case `sender` and <xref:System.Windows.RoutedEventArgs.Source%2A> are identical (this is the case with Steps 3 and 4 in the event processing example list).</span></span>

<span data-ttu-id="a8dcf-285">Z důvodu tunelového propojení a probublávání jsou v nadřazených prvcích vstupní události, kde <xref:System.Windows.RoutedEventArgs.Source%2A> je jedním z jejich podřízených prvků.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-285">Because of tunneling and bubbling, parent elements receive input events where the <xref:System.Windows.RoutedEventArgs.Source%2A> is one of their child elements.</span></span> <span data-ttu-id="a8dcf-286">Pokud je důležité znát, co je zdrojový element, můžete identifikovat zdrojový element přístupem k vlastnosti <xref:System.Windows.RoutedEventArgs.Source%2A>.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-286">When it is important to know what the source element is, you can identify the source element by accessing the <xref:System.Windows.RoutedEventArgs.Source%2A> property.</span></span>

<span data-ttu-id="a8dcf-287">Jakmile je vstupní událost označena <xref:System.Windows.RoutedEventArgs.Handled%2A>, další obslužné rutiny nejsou vyvolány.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-287">Usually, once the input event is marked <xref:System.Windows.RoutedEventArgs.Handled%2A>, further handlers are not invoked.</span></span> <span data-ttu-id="a8dcf-288">Obvykle je vhodné označit vstupní události jako zpracované, jakmile je vyvolána obslužná rutina, která řeší logické zpracování významu konkrétní události specifické pro danou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-288">Typically, you should mark input events as handled as soon as a handler is invoked that addresses your application-specific logical handling of the meaning of the input event.</span></span>

<span data-ttu-id="a8dcf-289">Výjimka z tohoto obecného příkazu o stavu <xref:System.Windows.RoutedEventArgs.Handled%2A> je, že vstupní obslužné rutiny událostí, které jsou zaregistrovány k úmyslnému ignorování <xref:System.Windows.RoutedEventArgs.Handled%2A> stavu dat události, by se pořád vyvolaly podél obou tras.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-289">The exception to this general statement about <xref:System.Windows.RoutedEventArgs.Handled%2A> state is that input event handlers that are registered to deliberately ignore <xref:System.Windows.RoutedEventArgs.Handled%2A> state of the event data would still be invoked along either route.</span></span> <span data-ttu-id="a8dcf-290">Další informace naleznete v tématech [Náhled událostí](preview-events.md) nebo [Označení směrovaných událostí jako zpracovaných a zpracování tříd](marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-290">For more information, see [Preview Events](preview-events.md) or [Marking Routed Events as Handled, and Class Handling](marking-routed-events-as-handled-and-class-handling.md).</span></span>

<span data-ttu-id="a8dcf-291">Sdílený datový model události mezi událostmi tunelového propojení a probublávání a sekvenčním vyzvednutím prvního tunelového propojení pak není koncept, který je obecně pravdivý pro všechny směrované události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-291">The shared event data model between tunneling and bubbling events, and the sequential raising of first tunneling then bubbling events, is not a concept that is generally true for all routed events.</span></span> <span data-ttu-id="a8dcf-292">Toto chování je implementováno konkrétně tím, jak [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] vstupní zařízení zvolí, aby vyvolala a připojila páry vstupních událostí.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-292">That behavior is specifically implemented by how [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] input devices choose to raise and connect the input event pairs.</span></span> <span data-ttu-id="a8dcf-293">Implementace vlastních událostí vstupu je pokročilý scénář, ale můžete se rozhodnout, že tento model budete sledovat i pro vlastní vstupní události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-293">Implementing your own input events is an advanced scenario, but you might choose to follow that model for your own input events also.</span></span>

<span data-ttu-id="a8dcf-294">Určité třídy, které zpracovávají třídy, zpracovávají určité události, obvykle s záměrem předefinování toho, co konkrétní uživatelem řízená událost znamená v rámci tohoto ovládacího prvku a vyvolání nové události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-294">Certain classes choose to class-handle certain input events, usually with the intent of redefining what a particular user-driven input event means within that control and raising a new event.</span></span> <span data-ttu-id="a8dcf-295">Další informace naleznete v tématu [Označení směrovaných událostí jako zpracovaných a zpracování tříd](marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-295">For more information, see [Marking Routed Events as Handled, and Class Handling](marking-routed-events-as-handled-and-class-handling.md).</span></span>

<span data-ttu-id="a8dcf-296">Další informace o vstupu a způsobu interakce vstupu a událostí v typických aplikačních scénářích najdete v tématu [Přehled vstupu](input-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-296">For more information on input and how input and events interact in typical application scenarios, see [Input Overview](input-overview.md).</span></span>

<a name="events_styles"></a>

## <a name="eventsetters-and-eventtriggers"></a><span data-ttu-id="a8dcf-297">EventSetters a EventTriggers</span><span class="sxs-lookup"><span data-stu-id="a8dcf-297">EventSetters and EventTriggers</span></span>

<span data-ttu-id="a8dcf-298">V části styly můžete zahrnout některé předem deklarované [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] syntaxe zpracování událostí do značek pomocí <xref:System.Windows.EventSetter>.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-298">In styles, you can include some pre-declared [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] event handling syntax in the markup by using an <xref:System.Windows.EventSetter>.</span></span> <span data-ttu-id="a8dcf-299">Při použití stylu je odkazovaná obslužná rutina přidána do instance s Style.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-299">When the style is applied, the referenced handler is added to the styled instance.</span></span> <span data-ttu-id="a8dcf-300"><xref:System.Windows.EventSetter> lze deklarovat pouze pro směrovanou událost.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-300">You can declare an <xref:System.Windows.EventSetter> only for a routed event.</span></span> <span data-ttu-id="a8dcf-301">Například:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-301">The following is an example.</span></span> <span data-ttu-id="a8dcf-302">Všimněte si, že `b1SetColor` metoda, na kterou se odkazuje, je v souboru kódu na pozadí.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-302">Note that the `b1SetColor` method referenced here is in a code-behind file.</span></span>

[!code-xaml[EventOvwSupport#XAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/page2.xaml#xaml2)]

<span data-ttu-id="a8dcf-303">Zde získaná výhoda spočívá v tom, že styl bude pravděpodobně obsahovat skvělé informace o dalších informacích, které by mohly být použity na jakékoli tlačítko v aplikaci a které <xref:System.Windows.EventSetter> být součástí tohoto stylu, propagují opětovné použití kódu i na úrovni značek.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-303">The advantage gained here is that the style is likely to contain a great deal of other information that could apply to any button in your application, and having the <xref:System.Windows.EventSetter> be part of that style promotes code reuse even at the markup level.</span></span> <span data-ttu-id="a8dcf-304">Kromě toho <xref:System.Windows.EventSetter> abstraktní názvy metod pro obslužné rutiny postupně od obecné aplikace a značky stránky.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-304">Also, an <xref:System.Windows.EventSetter> abstracts method names for handlers one step further away from the general application and page markup.</span></span>

<span data-ttu-id="a8dcf-305">Další specializovanou syntaxí, která kombinuje směrované funkce události a animace [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] je <xref:System.Windows.EventTrigger>.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-305">Another specialized syntax that combines the routed event and animation features of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is an <xref:System.Windows.EventTrigger>.</span></span> <span data-ttu-id="a8dcf-306">Stejně jako u <xref:System.Windows.EventSetter>se pro <xref:System.Windows.EventTrigger>můžou použít jenom směrované události.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-306">As with <xref:System.Windows.EventSetter>, only routed events may be used for an <xref:System.Windows.EventTrigger>.</span></span> <span data-ttu-id="a8dcf-307"><xref:System.Windows.EventTrigger> je obvykle deklarován jako součást stylu, ale <xref:System.Windows.EventTrigger> lze také deklarovat na prvky na úrovni stránky jako součást kolekce <xref:System.Windows.FrameworkElement.Triggers%2A> nebo v <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-307">Typically, an <xref:System.Windows.EventTrigger> is declared as part of a style, but an <xref:System.Windows.EventTrigger> can also be declared on page-level elements as part of the <xref:System.Windows.FrameworkElement.Triggers%2A> collection, or in a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="a8dcf-308"><xref:System.Windows.EventTrigger> umožňuje zadat <xref:System.Windows.Media.Animation.Storyboard>, která se spustí pokaždé, když směrované událost dosáhne prvku v cestě, který deklaruje <xref:System.Windows.EventTrigger> pro danou událost.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-308">An <xref:System.Windows.EventTrigger> enables you to specify a <xref:System.Windows.Media.Animation.Storyboard> that runs whenever a routed event reaches an element in its route that declares an <xref:System.Windows.EventTrigger> for that event.</span></span> <span data-ttu-id="a8dcf-309">Výhoda <xref:System.Windows.EventTrigger> přes pouze zpracování události a způsobila, že její spuštění v existujícím scénáři je, že <xref:System.Windows.EventTrigger> zajišťuje lepší kontrolu nad scénářem a jeho chování za běhu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-309">The advantage of an <xref:System.Windows.EventTrigger> over just handling the event and causing it to start an existing storyboard is that an <xref:System.Windows.EventTrigger> provides better control over the storyboard and its run-time behavior.</span></span> <span data-ttu-id="a8dcf-310">Další informace najdete v tématu [použití triggerů událostí k řízení scénáře po jeho spuštění](../graphics-multimedia/how-to-use-event-triggers-to-control-a-storyboard-after-it-starts.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-310">For more information, see [Use Event Triggers to Control a Storyboard After It Starts](../graphics-multimedia/how-to-use-event-triggers-to-control-a-storyboard-after-it-starts.md).</span></span>

<a name="more_about"></a>

## <a name="more-about-routed-events"></a><span data-ttu-id="a8dcf-311">Další informace o směrovaných událostech</span><span class="sxs-lookup"><span data-stu-id="a8dcf-311">More About Routed Events</span></span>

<span data-ttu-id="a8dcf-312">Toto téma popisuje hlavně směrované události z perspektivy popisující základní koncepty a nabízí pokyny k tomu, jak a kdy reagovat na směrované události, které jsou již přítomny v různých základních prvcích a ovládacích prvcích.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-312">This topic mainly discusses routed events from the perspective of describing the basic concepts and offering guidance on how and when to respond to the routed events that are already present in the various base elements and controls.</span></span> <span data-ttu-id="a8dcf-313">Můžete však vytvořit vlastní směrovanou událost na vlastní třídě spolu se všemi nezbytnými podporami, jako jsou například specializované třídy dat události a Delegáti.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-313">However, you can create your own routed event on your custom class along with all the necessary support, such as specialized event data classes and delegates.</span></span> <span data-ttu-id="a8dcf-314">Vlastníkem směrované události může být libovolná třída, ale směrované události musí být vyvolány a zpracovávány <xref:System.Windows.UIElement> nebo <xref:System.Windows.ContentElement> odvozených třídách, aby byly užitečné.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-314">The routed event owner can be any class, but routed events must be raised by and handled by <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> derived classes in order to be useful.</span></span> <span data-ttu-id="a8dcf-315">Další informace o vlastních událostech najdete v tématu [Vytvoření vlastní směrované události](how-to-create-a-custom-routed-event.md).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-315">For more information about custom events, see [Create a Custom Routed Event](how-to-create-a-custom-routed-event.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="a8dcf-316">Viz také:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-316">See also</span></span>

- <xref:System.Windows.EventManager>
- <xref:System.Windows.RoutedEvent>
- <xref:System.Windows.RoutedEventArgs>
- [<span data-ttu-id="a8dcf-317">Označení směrovaných událostí jako zpracovaných a zpracování tříd</span><span class="sxs-lookup"><span data-stu-id="a8dcf-317">Marking Routed Events as Handled, and Class Handling</span></span>](marking-routed-events-as-handled-and-class-handling.md)
- [<span data-ttu-id="a8dcf-318">Přehled vstupu</span><span class="sxs-lookup"><span data-stu-id="a8dcf-318">Input Overview</span></span>](input-overview.md)
- [<span data-ttu-id="a8dcf-319">Přehled příkazů</span><span class="sxs-lookup"><span data-stu-id="a8dcf-319">Commanding Overview</span></span>](commanding-overview.md)
- [<span data-ttu-id="a8dcf-320">Vlastní vlastnosti závislosti</span><span class="sxs-lookup"><span data-stu-id="a8dcf-320">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="a8dcf-321">Stromy v subsystému WPF</span><span class="sxs-lookup"><span data-stu-id="a8dcf-321">Trees in WPF</span></span>](trees-in-wpf.md)
- [<span data-ttu-id="a8dcf-322">Slabé vzory událostí</span><span class="sxs-lookup"><span data-stu-id="a8dcf-322">Weak Event Patterns</span></span>](weak-event-patterns.md)
