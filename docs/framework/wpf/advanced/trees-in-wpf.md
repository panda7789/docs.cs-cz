---
title: Stromy v subsystému WPF
ms.date: 03/30/2017
helpviewer_keywords:
- logical tree [WPF]
- element tree [WPF]
- visual tree [WPF]
ms.assetid: e83f25e5-d66b-4fc7-92d2-50130c9a6649
ms.openlocfilehash: e6173916ad64a60d3727b5d35bb2a2302b881b38
ms.sourcegitcommit: 4b6490b2529707627ad77c3a43fbe64120397175
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/10/2018
ms.locfileid: "44265010"
---
# <a name="trees-in-wpf"></a>Stromy v subsystému WPF
V mnoha technologií prvky a součásti jsou uspořádány do stromové struktury, ve kterém vývojáři přímo manipulace s uzly objektu ve stromové struktuře ovlivnit vykreslování nebo chování aplikace. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] jak definovat vztahy mezi prvky programu také používá několik metaphors stromové struktury. Ve většině případů vývojáře WPF může vytvářet aplikace v kódu nebo definovat části aplikace v XAML při koncepčně uvažovat objekt stromu jedná, ale bude volání konkrétní rozhraní API nebo použijte konkrétní značky, které udělají Ano spíše než některé obecné strom manipulaci s objekty rozhraní API jako je například můžete použít v XML modelu DOM. Poskytuje dvě třídy pomocné rutiny, které poskytují metafora strom, WPF <xref:System.Windows.LogicalTreeHelper> a <xref:System.Windows.Media.VisualTreeHelper>. Podmínky vizuální strom a Logická stromová struktura používají také v dokumentaci k WPF vzhledem k tomu, že tyto stejné struktury jsou užitečné pro pochopení chování některé klíčové funkce WPF. Toto téma definuje, co představují vizuální strom a Logická stromová struktura, pojednává o tom, jak takové stromů souvisí celkovou stromu koncept objektu a zavádí <xref:System.Windows.LogicalTreeHelper> a <xref:System.Windows.Media.VisualTreeHelper>s.  
  

  
<a name="element_tree"></a>   
## <a name="trees-in-wpf"></a>Stromy v subsystému WPF  
 Nejúplnější stromové struktury v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] je strom objektů. Pokud definujete stránku aplikace v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] a pak načíst [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], stromové struktury je založeno na vnoření vztahy mezi elementy v kódu. Definovat aplikaci nebo část aplikace v kódu a potom stromové struktury je vytvořen na základě způsobu přiřazování hodnot vlastností, které implementují obsahu modelu pro daný objekt. V [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], existují dva způsoby, které je conceptualized stromu kompletní objekt a popřípadě k jeho veřejné rozhraní API: jako Logická stromová struktura a vizuálního stromu. Rozdíly mezi Logická stromová struktura a vizuální strom vždy nejsou nezbytně důležité, ale čas od času mohou způsobit problémy s některými [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] subsystémy a vliv možností, které provedete v značek nebo kódu.  
  
 I když není vždy pracovat s Logická stromová struktura nebo vizuální strom přímo, vysvětlení konceptů velkých interakci stromy je užitečné pro pochopení technologií WPF. Uvažujete WPF stromu jedná určitého druhu je také důležité pro pochopení, jak fungují dědičnosti vlastností a směrování událostí [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].  
  
> [!NOTE]
>  Protože strom objektů je spíš koncept než skutečné rozhraní API, je další způsob, jak si můžete představit koncept jako grafu objektů. V praxi existují vztahy mezi objekty v době běhu, ve kterém se rozdělit stromu jedná. Zejména s XAML definice uživatelského rozhraní, je však dostatečně relevantní, většina dokumentace WPF použijete strom objektů období při odkazování na tento obecný koncept stromu jedná.  
  
<a name="logical_tree"></a>   
## <a name="the-logical-tree"></a>Logická stromová struktura  
 V [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], přidat obsah k elementům uživatelského rozhraní tak, že nastavíte vlastnosti objektů, které zálohují tyto elementy. Například můžete přidat položky, které chcete <xref:System.Windows.Controls.ListBox> ovládacího prvku pomocí manipulace s jeho <xref:System.Windows.Controls.ItemsControl.Items%2A> vlastnost. Tímto způsobem, jsou umístění položky do <xref:System.Windows.Controls.ItemCollection> , který je <xref:System.Windows.Controls.ItemsControl.Items%2A> hodnotu vlastnosti. Podobně, chcete-li přidat objekty do <xref:System.Windows.Controls.DockPanel>, pracovat s jeho <xref:System.Windows.Controls.Panel.Children%2A> hodnotu vlastnosti. Tady jsou přidávání objektů do <xref:System.Windows.Controls.UIElementCollection>. Příklad kódu naleznete v tématu [elementu dynamicky přidat](https://msdn.microsoft.com/library/d00f258a-7973-4de7-bc54-a3fc1f638419).  
  
 V [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)], když umístíte položky v seznamu <xref:System.Windows.Controls.ListBox> nebo ovládacích prvků nebo jiných prvků uživatelského rozhraní <xref:System.Windows.Controls.DockPanel>, můžete také použít <xref:System.Windows.Controls.ItemsControl.Items%2A> a <xref:System.Windows.Controls.Panel.Children%2A> vlastnosti, explicitně nebo implicitně, jako v následujícím příkladu.  
  
 [!code-xaml[TreeOvwsSupport#AllCode](../../../../samples/snippets/csharp/VS_Snippets_Wpf/TreeOvwsSupport/CS/page1.xaml#allcode)]  
  
 Pokud byste chtěli tento XAML zpracovat ve formátu XML v rámci modelu objektu dokumentu, a pokud jste měli zahrnuli značky opatřený komentáři out jako implicitní (které by byly právní), je výsledný strom XML DOM by zahrnovaly prvky pro `<ListBox.Items>` a jiných implicitních položky. Ale XAML nezpracovává tímto způsobem, při čtení kódu a zapisovat do objektů, výsledný graf objektu nezahrnuje doslova `ListBox.Items`. Ale nemá <xref:System.Windows.Controls.ListBox> vlastnost s názvem `Items` , která obsahuje <xref:System.Windows.Controls.ItemCollection>a že <xref:System.Windows.Controls.ItemCollection> je inicializován, ale prázdná, pokud <xref:System.Windows.Controls.ListBox> XAML je zpracování. Potom každý podřízený objekt prvek, který existuje jako obsah pro <xref:System.Windows.Controls.ListBox> se přidá do <xref:System.Windows.Controls.ItemCollection> voláním analyzátor `ItemCollection.Add`. Tento příklad zpracování XAML do stromu objektů je zatím zdánlivě příklad kde stromu vytvořený objekt je v podstatě Logická stromová struktura.  
  
 Logická stromová struktura však není celý objekt grafu, která existuje pro vaši aplikaci, kterou dostaneme uživatelského rozhraní v době běhu, dokonce i s položkami implicitní syntaxe XAML navýšení kapacity. Hlavním důvodem pro to je vizuální prvky a šablony. Představme si třeba, <xref:System.Windows.Controls.Button>. Logická stromová struktura sestavy <xref:System.Windows.Controls.Button> objekt a taky její řetězec `Content`. Ale to není toto tlačítko ve stromové struktuře run-time objekt. Zejména na tlačítko se zobrazí pouze na obrazovce tak, jak ji nepodporuje, protože konkrétní <xref:System.Windows.Controls.Button> byla použita šablony ovládacího prvku. Vizuály, které pocházejí z použité šablony (jako je šablona definovaná <xref:System.Windows.Controls.Border> tmavě šedé kolem visual tlačítka) nejsou uvádět v logickém stromu, i v případě, že máte před sebou logický strom za běhu (například zpracování vstupní události z viditelné uživatelského rozhraní a pak se čte Logická stromová struktura). Najít šablonu vizuály, by místo toho musíte ke kontrole vizuálního stromu.  
  
 Další informace o tom, [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] syntaxe mapuje se na graf vytvořený objekt a implicitní syntaxe XAML, naleznete v tématu [syntaxe XAML v podrobnosti o](../../../../docs/framework/wpf/advanced/xaml-syntax-in-detail.md) nebo [přehled XAML (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md).  
  
<a name="tree_property_inheritance_event_routing"></a>   
### <a name="the-purpose-of-the-logical-tree"></a>Účelem logického stromu  
 Logická stromová struktura existuje tak, aby obsahu modely můžete snadno iterovat jejich možných podřízené objekty, a tak, aby modely obsahu může být rozšiřitelné. Navíc Logická stromová struktura poskytuje architekturu pro určité oznámení, například když se načtou všechny objekty v logickém stromu. Logická stromová struktura je v podstatě přibližný grafu objektu běhu na úrovni rozhraní framework, která nezahrnuje vizuály, ale je vhodný pro mnoho dotazování operací s vlastní běhu složení aplikace.  
  
 Kromě toho se vyřeší nahoru procházení logický strom pro obě reference na prostředky statické a dynamické <xref:System.Windows.FrameworkElement.Resources%2A> kolekce na počáteční žádost o objekt a pak pokračuje do logického stromu a zkontrolujete jednotlivé <xref:System.Windows.FrameworkElement> (nebo <xref:System.Windows.FrameworkContentElement>) pro jiné `Resources` hodnotu, která obsahuje <xref:System.Windows.ResourceDictionary>, případně obsahující tento klíč. Logická stromová struktura se používá pro vyhledání prostředku, když Logická stromová struktura a vizuální stromové struktury jsou k dispozici. Další informace o slovníky prostředků a vyhledávání, najdete v části [prostředky XAML](../../../../docs/framework/wpf/advanced/xaml-resources.md).  
  
<a name="composition"></a>   
### <a name="composition-of-the-logical-tree"></a>Složení logického stromu  
 Logická stromová struktura je definována na WPF framework úrovni, což znamená, že je základní prvek WPF, které jsou nejdůležitější pro operace logický strom buď <xref:System.Windows.FrameworkElement> nebo <xref:System.Windows.FrameworkContentElement>. Ale při uvidí Pokud skutečně používáte <xref:System.Windows.LogicalTreeHelper> rozhraní API, Logická stromová struktura někdy obsahuje uzly, které nejsou buď <xref:System.Windows.FrameworkElement> nebo <xref:System.Windows.FrameworkContentElement>. Pro instanci logického stromu sestavy <xref:System.Windows.Controls.TextBlock.Text%2A> hodnotu <xref:System.Windows.Controls.TextBlock>, což je řetězec.  
  
<a name="override_logical_tree"></a>   
### <a name="overriding-the-logical-tree"></a>Přepsání logického stromu  
 Autoři pokročilé ovládací prvek můžete tak, že přepíšete několik přetížení logického stromu [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] , které definují, jak obecný objekt nebo model obsahu přidá nebo odebere objektů v rámci logického stromu. Příklad toho, jak přetížení logického stromu, naleznete v tématu [přetížení logického stromu](../../../../docs/framework/wpf/advanced/how-to-override-the-logical-tree.md).  
  
<a name="pvi"></a>   
### <a name="property-value-inheritance"></a>Dědičnost hodnoty vlastnosti  
 Dědičnost hodnoty vlastnosti funguje prostřednictvím hybridní stromu. Skutečné metadata, která obsahuje <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> vlastnost, která umožňuje dědičnosti vlastností je WPF úrovni architektury <xref:System.Windows.FrameworkPropertyMetadata> třídy. Proto nadřazeného objektu, který obsahuje původní hodnoty i podřízený objekt, který zdědí tato hodnota musí být <xref:System.Windows.FrameworkElement> nebo <xref:System.Windows.FrameworkContentElement>, a obě musí být součástí některých Logická stromová struktura. Pro existující vlastnosti WPF, které podporují dědičnost vlastnosti, je však možné perpetuate prostřednictvím použité objektu, který není v logickém stromu dědičnost hodnoty vlastnosti. Hlavně to je důležité pro s prvky šablony použijte všechny hodnoty zděděné vlastnosti nastavené buď na instanci, která je bez vizuálního vzhledu, nebo na ještě vyšší úrovně složení úrovni stránky a proto vyšší v logickém stromu. Aby dědičnost hodnoty vlastnosti konzistentně práci takové hranice vlastnost dědičné musí být registrovaný jako připojené vlastnosti a měli byste postupovat podle tohoto vzoru Pokud máte v úmyslu definovat vlastnost vlastní závislost s vlastností chování dědičnosti. Stromu přesně použít pro vlastnost dědičnosti nemůže být očekávané zcela Pomocná metoda utility třída, dokonce i v době běhu. Další informace najdete v tématu [dědičnost hodnoty vlastnosti](../../../../docs/framework/wpf/advanced/property-value-inheritance.md).  
  
<a name="two_trees"></a>   
## <a name="the-visual-tree"></a>Vizuální strom  
 Kromě konceptu logického stromu, existuje také koncept visual tree v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]. Vizuální strom popisuje strukturu vizuální objekty reprezentovaná <xref:System.Windows.Media.Visual> základní třídy. Když píšete šablony pro ovládací prvek, jsou definování nebo vizuální stromové struktury, která se použije pro tento ovládací prvek, nově definují obor. Vizuální stromové struktury je také zajímavé pro vývojáře, kteří mají nižší úrovně kontrolu nad kresby z důvodů výkonu a optimalizace. Jeden vystavení vizuální stromové struktury v rámci konvenční [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] programování aplikací je, že události trasy pro směrovanou událost většinou cestovní podél vizuálního stromu, není Logická stromová struktura. Tento subtlety chování směrované události nemusí být hned zjevné Pokud si nejste Autor ovládacího prvku. Směrování události prostřednictvím vizuálního stromu umožňuje ovládací prvky, které implementují složení úrovni vizuálů zpracovávat události nebo vytvořit událost setter.  
  
<a name="trees_content"></a>   
## <a name="trees-content-elements-and-content-hosts"></a>Stromy elementů obsahu a obsahu hostitele  
 Elementy obsahu (tříd, které jsou odvozeny z <xref:System.Windows.ContentElement>) nejsou součástí vizuálního stromu; není odvozena od <xref:System.Windows.Media.Visual> a nemají vizuální reprezentace. Aby bylo možné zobrazit v Uživatelském vůbec, <xref:System.Windows.ContentElement> musí být v obsahu hostitele, který je hostovaný <xref:System.Windows.Media.Visual> a Logická stromová struktura účastníka. Obvykle je takový objekt <xref:System.Windows.FrameworkElement>. Můžete pohodlným, že hostitel obsahu je něco jako "prohlížeče" obsahu a vybere způsob zobrazení tohoto obsahu v rámci oblasti obrazovky, který řídí hostitele. Pokud je umístěn obsah, obsah nelze realizovat účastník v některých strom procesů, které jsou obvykle přidruženy vizuálního stromu. Obecně platí <xref:System.Windows.FrameworkElement> třída hostitele obsahuje implementační kód, který přidá všechny hostované <xref:System.Windows.ContentElement> trasy události prostřednictvím poduzly logický strom obsahu, i když hostovaný obsah není součástí true vizuálního stromu. To je nezbytné, aby <xref:System.Windows.ContentElement> mají možnost směrované události, která směruje k libovolnému prvku než na sebe.  
  
<a name="tree_traversal"></a>   
## <a name="tree-traversal"></a>Přechod zálohovaných stromové struktury  
 <xref:System.Windows.LogicalTreeHelper> Třída poskytuje <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>, <xref:System.Windows.LogicalTreeHelper.GetParent%2A>, a <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> metody pro procházení Logická stromová struktura. Ve většině případů byste neměli procházení logického stromu existujících ovládacích prvků, protože tyto ovládací prvky téměř vždy vystavit jejich logické podřízené prvky jako vlastnost vyhrazené kolekce, která podporuje kolekci přístup, jako `Add`, indexer, a tak dále. Především scénář, který se používá ovládací prvek autory, kteří nechtějí být odvozen od vzorů zamýšlený ovládacích prvků, jako je procházení stromu <xref:System.Windows.Controls.ItemsControl> nebo <xref:System.Windows.Controls.Panel> ve kterém už jsou definovaní kolekce vlastností a který chcete poskytnout vlastní kolekce Podpora vlastností.  
  
 Vizuální strom také podporuje pomocnou třídu pro procházení vizuální strom <xref:System.Windows.Media.VisualTreeHelper>. Vizuální strom není dostupná jako vhodně vlastnosti specifické pro ovládací prvek, takže <xref:System.Windows.Media.VisualTreeHelper> třída je doporučený způsob procházení vizuálního stromu, pokud je to nezbytné pro váš scénář programování. Další informace najdete v tématu [přehled vykreslování grafiky WPF](../../../../docs/framework/wpf/graphics-multimedia/wpf-graphics-rendering-overview.md).  
  
> [!NOTE]
>  Někdy je nezbytné ke kontrole vizuálního stromu použité šablony. Měli byste být opatrní při použití této techniky. I v případě, že jsou procházení vizuálním stromu ovládacího prvku, kde definujete šablony, příjemci ovládacího prvku můžete vždycky změnit šablonu tak, že nastavíte <xref:System.Windows.Controls.Control.Template%2A> vlastnost instance a dokonce i koncový uživatel může ovlivnit použité šablony tak, že změníte motiv systému.  
  
<a name="routes"></a>   
## <a name="routes-for-routed-events-as-a-tree"></a>Trasy pro směrovaných událostí jako "Stromu"  
 Jak už bylo zmíněno dříve, trasy jakékoli dané směrované události přenáší podél jedné a předem cesty stromu, který je v hybridní kombinaci reprezentace visual a logický strom. Trasy události mohou projít v nahoru nebo dolů směry ve stromu v závislosti na tom, jestli je tunelové propojení nebo šíření směrován události. Koncept směrování událostí nemá přímo podpůrné pomocná třída, která se dá použít k "vás" nezávisle na vyvolání události, která ve skutečnosti směruje trasy události. Je třída, která reprezentuje trasu, <xref:System.Windows.EventRoute>, ale metody této třídy jsou obecně jen pro interní použití.  
  
<a name="resourcesandtrees"></a>   
## <a name="resource-dictionaries-and-trees"></a>Slovníky sloučených prostředků a stromové struktury  
 Vyhledávání slovníku prostředků pro všechny `Resources` definované na stránce prochází v podstatě Logická stromová struktura. Objekty, které nejsou v logickém stromu můžete odkazovat na prostředky s klíčem, ale pořadí vyhledávání prostředků začíná v okamžiku, kdy se tento objekt připojen k Logická stromová struktura. V WPF může mít pouze uzly logického stromu `Resources` vlastnost, která obsahuje <xref:System.Windows.ResourceDictionary>, proto neexistuje žádný přínos v procházení vizuální strom hledáte s klíčem prostředky z <xref:System.Windows.ResourceDictionary>.  
  
 Vyhledání prostředku můžete také rozšířit nad rámec okamžité Logická stromová struktura. Pro kód aplikace vyhledání prostředku můžete pokračovat dále na slovníky prostředků na úrovni aplikace a potom na hodnoty pro podporu a systém motivů, které jsou odkazovány jako statické vlastnosti nebo klíče. Motivy, sami odkazovat hodnot systémového mimo Logická stromová struktura motivu, pokud jsou dynamické vzorce reference na prostředky. Další informace o zdrojových slovnících a logika vyhledávání, najdete v části [prostředky XAML](../../../../docs/framework/wpf/advanced/xaml-resources.md).  
  
## <a name="see-also"></a>Viz také  
 [Přehled vstupu](../../../../docs/framework/wpf/advanced/input-overview.md)  
 [Přehled vykreslování grafiky WPF](../../../../docs/framework/wpf/graphics-multimedia/wpf-graphics-rendering-overview.md)  
 [Přehled směrovaných událostí](../../../../docs/framework/wpf/advanced/routed-events-overview.md)  
 [Inicializace elementů objektu, které nejsou ve stromu objektů](../../../../docs/framework/wpf/advanced/initialization-for-object-elements-not-in-an-object-tree.md)  
 [Architektura WPF](../../../../docs/framework/wpf/advanced/wpf-architecture.md)
