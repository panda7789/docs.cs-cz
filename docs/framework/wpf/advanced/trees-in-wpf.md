---
title: Předmětů
ms.date: 03/30/2017
helpviewer_keywords:
- logical tree [WPF]
- element tree [WPF]
- visual tree [WPF]
ms.assetid: e83f25e5-d66b-4fc7-92d2-50130c9a6649
ms.openlocfilehash: d4b17c34fb33f73ca1c173bebc8f94ddac5b1942
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/24/2020
ms.locfileid: "76746577"
---
# <a name="trees-in-wpf"></a><span data-ttu-id="044ac-102">Stromy v subsystému WPF</span><span class="sxs-lookup"><span data-stu-id="044ac-102">Trees in WPF</span></span>
<span data-ttu-id="044ac-103">V mnoha technologiích jsou prvky a komponenty uspořádány ve stromové struktuře, kde vývojáři přímo manipulují s uzly objektů ve stromu, aby to ovlivnilo vykreslování nebo chování aplikace.</span><span class="sxs-lookup"><span data-stu-id="044ac-103">In many technologies, elements and components are organized in a tree structure where developers directly manipulate the object nodes in the tree to affect the rendering or behavior of an application.</span></span> [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="044ac-104">také používá několik metaphors stromové struktury k definování vztahů mezi prvky programu.</span><span class="sxs-lookup"><span data-stu-id="044ac-104">also uses several tree structure metaphors to define relationships between program elements.</span></span> <span data-ttu-id="044ac-105">Pro většinu výrobců WPF mohou vývojáři vytvořit aplikaci v kódu nebo definovat části aplikace v jazyce XAML a současně se zamyslet na stromové struktuře objektů metafora, ale budou volat konkrétní rozhraní API nebo pomocí konkrétního kódu tak, aby místo obecných rozhraní API pro manipulaci se stromem objektů, například můžete použít v XML DOM.</span><span class="sxs-lookup"><span data-stu-id="044ac-105">For the most part WPF developers can create an application in code or define portions of the application in XAML while thinking conceptually about the object tree metaphor, but will be calling specific API or using specific markup to do so rather than some general object tree manipulation API such as you might use in XML DOM.</span></span> <span data-ttu-id="044ac-106">WPF zpřístupňuje dvě pomocné třídy, které poskytují stromové zobrazení metafora, <xref:System.Windows.LogicalTreeHelper> a <xref:System.Windows.Media.VisualTreeHelper>.</span><span class="sxs-lookup"><span data-stu-id="044ac-106">WPF exposes two helper classes that provide a tree metaphor view, <xref:System.Windows.LogicalTreeHelper> and <xref:System.Windows.Media.VisualTreeHelper>.</span></span> <span data-ttu-id="044ac-107">Výrazy vizuální strom a logický strom jsou také používány v dokumentaci k platformě WPF, protože tyto stejné stromy jsou užitečné pro porozumění chování některých klíčových funkcí WPF.</span><span class="sxs-lookup"><span data-stu-id="044ac-107">The terms visual tree and logical tree are also used in the WPF documentation because these same trees are useful for understanding the behavior of certain key WPF features.</span></span> <span data-ttu-id="044ac-108">Toto téma definuje, co znázorňuje vizuální strom a logický strom, popisuje, jak se tyto stromy vztahují k celkovému konceptu stromu objektů, a zavádí <xref:System.Windows.LogicalTreeHelper> a <xref:System.Windows.Media.VisualTreeHelper>s.</span><span class="sxs-lookup"><span data-stu-id="044ac-108">This topic defines what the visual tree and logical tree represent, discusses how such trees relate to an overall object tree concept, and introduces <xref:System.Windows.LogicalTreeHelper> and <xref:System.Windows.Media.VisualTreeHelper>s.</span></span>  

<a name="element_tree"></a>   
## <a name="trees-in-wpf"></a><span data-ttu-id="044ac-109">Stromy v subsystému WPF</span><span class="sxs-lookup"><span data-stu-id="044ac-109">Trees in WPF</span></span>  
 <span data-ttu-id="044ac-110">Nejvíce kompletní stromová struktura v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] je stromem objektů.</span><span class="sxs-lookup"><span data-stu-id="044ac-110">The most complete tree structure in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is the object tree.</span></span> <span data-ttu-id="044ac-111">Pokud definujete stránku aplikace v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] a potom načtete [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], vytvoří se stromová struktura na základě vztahů vnořování prvků v kódu.</span><span class="sxs-lookup"><span data-stu-id="044ac-111">If you define an application page in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and then load the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], the tree structure is created based on the nesting relationships of the elements in the markup.</span></span> <span data-ttu-id="044ac-112">Definujete-li aplikaci nebo část aplikace v kódu, je vytvořena stromová struktura na základě toho, jak přiřazujete hodnoty vlastností pro vlastnosti, které implementují model obsahu pro daný objekt.</span><span class="sxs-lookup"><span data-stu-id="044ac-112">If you define an application or a portion of the application in code, then the tree structure is created based on how you assign property values for properties that implement the content model for a given object.</span></span> <span data-ttu-id="044ac-113">V [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]existují dva způsoby, jak je koncepčně dokončen strom objektů a může být hlášen jeho veřejnému rozhraní API: jako logický strom a jako vizuální strom.</span><span class="sxs-lookup"><span data-stu-id="044ac-113">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], there are two ways that the complete object tree is conceptualized and can be reported to its public API: as the logical tree and as the visual tree.</span></span> <span data-ttu-id="044ac-114">Rozdíly mezi logickým stromem a vizuálním stromem nejsou vždy nutně důležité, ale mohou občas způsobit problémy s některými [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] subsystémy a ovlivnit volby, které provedete v kódu nebo kódu.</span><span class="sxs-lookup"><span data-stu-id="044ac-114">The distinctions between logical tree and visual tree are not always necessarily important, but they can occasionally cause issues with certain [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] subsystems and affect choices you make in markup or code.</span></span>  
  
 <span data-ttu-id="044ac-115">I když nebudete vždy pracovat buď s logickým stromem, nebo s vizuálním stromem přímo, porozumět konceptům, jak jsou stromy interakce, užitečné pro porozumění WPF jako technologii.</span><span class="sxs-lookup"><span data-stu-id="044ac-115">Even though you do not always manipulate either the logical tree or the visual tree directly, understanding the concepts of how the trees interact is useful for understanding WPF as a technology.</span></span> <span data-ttu-id="044ac-116">Metafora WPF jako stromové struktury určitého druhu je také zásadní pro porozumění, jak dědičnost vlastností a funkce směrování událostí fungují v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="044ac-116">Thinking of WPF as a tree metaphor of some kind is also crucial to understanding how property inheritance and event routing work in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
> [!NOTE]
> <span data-ttu-id="044ac-117">Vzhledem k tomu, že strom objektů je více konceptů než skutečné rozhraní API, je další způsob, jak si představit koncept, je jako graf objektů.</span><span class="sxs-lookup"><span data-stu-id="044ac-117">Because the object tree is more of a concept than an actual API, another way to think of the concept is as an object graph.</span></span> <span data-ttu-id="044ac-118">V praxi jsou relace mezi objekty v době běhu, kde se metafora stromové struktury rozdělují.</span><span class="sxs-lookup"><span data-stu-id="044ac-118">In practice, there are relationships between objects at run time where the tree metaphor will break down.</span></span> <span data-ttu-id="044ac-119">Nicméně, zejména s uživatelským rozhraním definovaným v jazyce XAML, je metafora ke stromu dostatečně důležité, aby většina dokumentace WPF při odkazování na tento obecný koncept používala pojem strom objektů.</span><span class="sxs-lookup"><span data-stu-id="044ac-119">Nevertheless, particularly with XAML-defined UI, the tree metaphor is relevant enough that most WPF documentation will use the term object tree when referencing this general concept.</span></span>  
  
<a name="logical_tree"></a>   
## <a name="the-logical-tree"></a><span data-ttu-id="044ac-120">Logický Strom</span><span class="sxs-lookup"><span data-stu-id="044ac-120">The Logical Tree</span></span>  
 <span data-ttu-id="044ac-121">V [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]přidáte obsah do prvků uživatelského rozhraní nastavením vlastností objektů, které tyto prvky vrátí.</span><span class="sxs-lookup"><span data-stu-id="044ac-121">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], you add content to UI elements by setting properties of the objects that back those elements.</span></span> <span data-ttu-id="044ac-122">Například můžete přidat položky do ovládacího prvku <xref:System.Windows.Controls.ListBox> tím, že budete pracovat s jeho vlastností <xref:System.Windows.Controls.ItemsControl.Items%2A>.</span><span class="sxs-lookup"><span data-stu-id="044ac-122">For example, you add items to a <xref:System.Windows.Controls.ListBox> control by manipulating its <xref:System.Windows.Controls.ItemsControl.Items%2A> property.</span></span> <span data-ttu-id="044ac-123">Tímto způsobem umísťujete položky do <xref:System.Windows.Controls.ItemCollection>, který je hodnotou <xref:System.Windows.Controls.ItemsControl.Items%2A> vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="044ac-123">By doing this, you are placing items into the <xref:System.Windows.Controls.ItemCollection> that is the <xref:System.Windows.Controls.ItemsControl.Items%2A> property value.</span></span> <span data-ttu-id="044ac-124">Podobně pokud chcete přidat objekty do <xref:System.Windows.Controls.DockPanel>, budete pracovat s jeho hodnotou vlastnosti <xref:System.Windows.Controls.Panel.Children%2A>.</span><span class="sxs-lookup"><span data-stu-id="044ac-124">Similarly, to add objects to a <xref:System.Windows.Controls.DockPanel>, you manipulate its <xref:System.Windows.Controls.Panel.Children%2A> property value.</span></span> <span data-ttu-id="044ac-125">Sem přidáváte objekty do <xref:System.Windows.Controls.UIElementCollection>.</span><span class="sxs-lookup"><span data-stu-id="044ac-125">Here, you are adding objects to the <xref:System.Windows.Controls.UIElementCollection>.</span></span> <span data-ttu-id="044ac-126">Příklad kódu naleznete v tématu [How to: Add a Dynamic elementu](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms752374(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="044ac-126">For a code example, see [How to: Add an Element Dynamically](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms752374(v=vs.100)).</span></span>  
  
 <span data-ttu-id="044ac-127">Pokud v [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]umístíte položky seznamu do <xref:System.Windows.Controls.ListBox> nebo ovládací prvky nebo jiné prvky uživatelského rozhraní v <xref:System.Windows.Controls.DockPanel>, můžete také použít vlastnosti <xref:System.Windows.Controls.ItemsControl.Items%2A> a <xref:System.Windows.Controls.Panel.Children%2A>, a to buď explicitně, nebo implicitně, jako v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="044ac-127">In [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)], when you place list items in a <xref:System.Windows.Controls.ListBox> or controls or other UI elements in a <xref:System.Windows.Controls.DockPanel>, you also use the <xref:System.Windows.Controls.ItemsControl.Items%2A> and <xref:System.Windows.Controls.Panel.Children%2A> properties, either explicitly or implicitly, as in the following example.</span></span>  
  
 [!code-xaml[TreeOvwsSupport#AllCode](~/samples/snippets/csharp/VS_Snippets_Wpf/TreeOvwsSupport/CS/page1.xaml#allcode)]  
  
 <span data-ttu-id="044ac-128">Pokud byste chtěli tento XAML zpracovat jako XML v modelu objektu dokumentu a pokud jste zahrnuli značky jako implicitní (což by bylo právní), pak výsledný strom XML DOM by obsahoval prvky pro `<ListBox.Items>` a další implicitní položky.</span><span class="sxs-lookup"><span data-stu-id="044ac-128">If you were to process this XAML as XML under a document object model, and if you had included the tags commented out as implicit (which would have been legal), then the resulting XML DOM tree would have included elements for `<ListBox.Items>` and the other implicit items.</span></span> <span data-ttu-id="044ac-129">Jazyk XAML ale nezpracovává tento způsob při čtení značek a zápisu do objektů, což výsledný graf objektů nezahrnuje `ListBox.Items`.</span><span class="sxs-lookup"><span data-stu-id="044ac-129">But XAML does not process that way when you read the markup and write to objects, the resulting object graph does not literally include `ListBox.Items`.</span></span> <span data-ttu-id="044ac-130">Má však vlastnost <xref:System.Windows.Controls.ListBox> s názvem `Items`, která obsahuje <xref:System.Windows.Controls.ItemCollection>a že <xref:System.Windows.Controls.ItemCollection> je inicializována, ale prázdná při zpracování <xref:System.Windows.Controls.ListBox> XAML.</span><span class="sxs-lookup"><span data-stu-id="044ac-130">It does however have a <xref:System.Windows.Controls.ListBox> property named `Items` that contains a <xref:System.Windows.Controls.ItemCollection>, and that <xref:System.Windows.Controls.ItemCollection> is initialized but empty when the <xref:System.Windows.Controls.ListBox> XAML is processed.</span></span> <span data-ttu-id="044ac-131">Pak všechny podřízené prvky objektu, které existují jako obsah pro <xref:System.Windows.Controls.ListBox>, jsou přidány do <xref:System.Windows.Controls.ItemCollection> pomocí volání analyzátoru do `ItemCollection.Add`.</span><span class="sxs-lookup"><span data-stu-id="044ac-131">Then, each child object element that exists as content for the <xref:System.Windows.Controls.ListBox> is added to the <xref:System.Windows.Controls.ItemCollection> by parser calls to `ItemCollection.Add`.</span></span> <span data-ttu-id="044ac-132">Tento příklad zpracování XAML do stromové struktury objektů je zatím zdánlivě příklad, ve kterém je vytvořený strom objektů v podstatě logický strom.</span><span class="sxs-lookup"><span data-stu-id="044ac-132">This example of processing XAML into an object tree is so far seemingly an example where the created object tree is basically the logical tree.</span></span>  
  
 <span data-ttu-id="044ac-133">Nicméně logický strom není celý graf objektů, který existuje pro uživatelské rozhraní aplikace za běhu, a to i v případě, že jsou implicitní položky syntaxe XAML vypočítané. Hlavním důvodem pro toto jsou vizuály a šablony.</span><span class="sxs-lookup"><span data-stu-id="044ac-133">However, the logical tree is not the entire object graph that exists for your application UI at run time, even with the XAML implicit syntax items factored out. The main reason for this is visuals and templates.</span></span> <span data-ttu-id="044ac-134">Zvažte například <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="044ac-134">For example, consider the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="044ac-135">Logický Strom ohlásí objekt <xref:System.Windows.Controls.Button> a také jeho řetězcovou `Content`.</span><span class="sxs-lookup"><span data-stu-id="044ac-135">The logical tree reports the <xref:System.Windows.Controls.Button> object and also its string `Content`.</span></span> <span data-ttu-id="044ac-136">Ale k tomuto tlačítku je ve stromové struktuře objektů run-time k dispozici další.</span><span class="sxs-lookup"><span data-stu-id="044ac-136">But there is more to this button in the run-time object tree.</span></span> <span data-ttu-id="044ac-137">Konkrétně se tlačítko na obrazovce zobrazí jenom v případě, že se použila konkrétní šablona ovládacího prvku <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="044ac-137">In particular, the button only appears on screen the way it does because a specific <xref:System.Windows.Controls.Button> control template was applied.</span></span> <span data-ttu-id="044ac-138">Vizuály, které pocházejí z použité šablony (například <xref:System.Windows.Controls.Border> šablony s tmavou šedou barvou kolem vizuálního tlačítka), nejsou hlášeny v logickém stromu, a to ani v případě, že během běhu (například zpracování vstupní události ze viditelného uživatelského rozhraní a následně při čtení logického stromu) prohlížíte na logický strom.</span><span class="sxs-lookup"><span data-stu-id="044ac-138">The visuals that come from an applied template (such as the template-defined <xref:System.Windows.Controls.Border> of dark gray around the visual button) are not reported in the logical tree, even if you are looking at the logical tree during run time (such as handling an input event from the visible UI and then reading the logical tree).</span></span> <span data-ttu-id="044ac-139">Chcete-li najít vizuály šablony, místo toho je nutné prostudovat vizuální strom.</span><span class="sxs-lookup"><span data-stu-id="044ac-139">To find the template visuals, you would instead need to examine the visual tree.</span></span>  
  
 <span data-ttu-id="044ac-140">Další informace o tom, jak je [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] syntaxe mapována do grafu vytvořeného objektu a implicitní syntaxe v jazyce XAML, naleznete [v tématu detail syntaxe jazyka XAML nebo v](xaml-syntax-in-detail.md) [přehledu XAML (WPF)](xaml-overview-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="044ac-140">For more information about how [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] syntax maps to the created object graph, and implicit syntax in XAML, see [XAML Syntax In Detail](xaml-syntax-in-detail.md) or [XAML Overview (WPF)](xaml-overview-wpf.md).</span></span>  
  
<a name="tree_property_inheritance_event_routing"></a>   
### <a name="the-purpose-of-the-logical-tree"></a><span data-ttu-id="044ac-141">Účel logického stromu</span><span class="sxs-lookup"><span data-stu-id="044ac-141">The Purpose of the Logical Tree</span></span>  
 <span data-ttu-id="044ac-142">Logický Strom existuje, aby modely obsahu mohli snadno iterovat přes jejich možné podřízené objekty, a aby bylo možné modely obsahu rozšířit.</span><span class="sxs-lookup"><span data-stu-id="044ac-142">The logical tree exists so that content models can readily iterate over their possible child objects, and so that content models can be extensible.</span></span> <span data-ttu-id="044ac-143">Logický Strom také poskytuje rozhraní pro určitá oznámení, například když jsou načteny všechny objekty v logickém stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-143">Also, the logical tree provides a framework for certain notifications, such as when all objects in the logical tree are loaded.</span></span> <span data-ttu-id="044ac-144">V podstatě je logický strom aproximací grafu objektů běhového času na úrovni rozhraní, která nezahrnuje vizuály, ale je vhodný pro mnoho operací dotazování na vlastní kompozici aplikace doby běhu.</span><span class="sxs-lookup"><span data-stu-id="044ac-144">Basically, the logical tree is an approximation of a run time object graph at the framework level, which excludes visuals, but is adequate for many querying operations against your own run time application's composition.</span></span>  
  
 <span data-ttu-id="044ac-145">Statické i dynamické odkazy na prostředky jsou navíc vyřešeny prohledáním v logickém stromové struktuře pro <xref:System.Windows.FrameworkElement.Resources%2A> kolekcí na počátečním objektu pro vyžádání a následným pokračováním logického stromu a kontrolou každého <xref:System.Windows.FrameworkElement> (nebo <xref:System.Windows.FrameworkContentElement>) pro jinou `Resources` hodnotu, která obsahuje <xref:System.Windows.ResourceDictionary>pravděpodobně obsahující tento klíč.</span><span class="sxs-lookup"><span data-stu-id="044ac-145">In addition, both static and dynamic resource references are resolved by looking upwards through the logical tree for <xref:System.Windows.FrameworkElement.Resources%2A> collections on the initial requesting object, and then continuing up the logical tree and checking each <xref:System.Windows.FrameworkElement> (or <xref:System.Windows.FrameworkContentElement>) for another `Resources` value that contains a <xref:System.Windows.ResourceDictionary>, possibly containing that key.</span></span> <span data-ttu-id="044ac-146">Logický strom se používá pro vyhledávání prostředků, pokud jsou k dispozici jak logický strom, tak i vizuální strom.</span><span class="sxs-lookup"><span data-stu-id="044ac-146">The logical tree is used for resource lookup when both the logical tree and the visual tree are present.</span></span> <span data-ttu-id="044ac-147">Další informace o slovnících a vyhledáváních prostředků najdete v tématu věnovaném [prostředkům XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="044ac-147">For more information on resource dictionaries and lookup, see [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span></span>  
  
<a name="composition"></a>   
### <a name="composition-of-the-logical-tree"></a><span data-ttu-id="044ac-148">Složení logického stromu</span><span class="sxs-lookup"><span data-stu-id="044ac-148">Composition of the Logical Tree</span></span>  
 <span data-ttu-id="044ac-149">Logický Strom je definován na úrovni architektury WPF, což znamená, že základní prvek WPF, který je nejrelevantnější pro operace logického stromu, je buď <xref:System.Windows.FrameworkElement>, nebo <xref:System.Windows.FrameworkContentElement>.</span><span class="sxs-lookup"><span data-stu-id="044ac-149">The logical tree is defined at the WPF framework-level, which means that the WPF base element that is most relevant for logical tree operations is either <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="044ac-150">Nicméně jak vidíte, zda skutečně používáte rozhraní <xref:System.Windows.LogicalTreeHelper> API, logický strom někdy obsahuje uzly, které nejsou buď <xref:System.Windows.FrameworkElement> nebo <xref:System.Windows.FrameworkContentElement>.</span><span class="sxs-lookup"><span data-stu-id="044ac-150">However, as you can see if you actually use the <xref:System.Windows.LogicalTreeHelper> API, the logical tree sometimes contains nodes that are not either <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="044ac-151">Například Logická stromová struktura hlásí hodnotu <xref:System.Windows.Controls.TextBlock.Text%2A> <xref:System.Windows.Controls.TextBlock>, což je řetězec.</span><span class="sxs-lookup"><span data-stu-id="044ac-151">For instance, the logical tree reports the <xref:System.Windows.Controls.TextBlock.Text%2A> value of a <xref:System.Windows.Controls.TextBlock>, which is a string.</span></span>  
  
<a name="override_logical_tree"></a>   
### <a name="overriding-the-logical-tree"></a><span data-ttu-id="044ac-152">Přepsání logického stromu</span><span class="sxs-lookup"><span data-stu-id="044ac-152">Overriding the Logical Tree</span></span>  
 <span data-ttu-id="044ac-153">Pokročilí autoři ovládacích prvků mohou přepsat logický strom přepsáním několika rozhraní API, která definují, jak obecný objekt nebo obsahový model přidávají nebo odstraňují objekty v rámci logického stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-153">Advanced control authors can override the logical tree by overriding several APIs that define how a general object or content model adds or removes objects within the logical tree.</span></span> <span data-ttu-id="044ac-154">Příklad, jak přepsat logický strom, naleznete v tématu override The [Logical Tree](how-to-override-the-logical-tree.md).</span><span class="sxs-lookup"><span data-stu-id="044ac-154">For an example of how to override the logical tree, see [Override the Logical Tree](how-to-override-the-logical-tree.md).</span></span>  
  
<a name="pvi"></a>   
### <a name="property-value-inheritance"></a><span data-ttu-id="044ac-155">Dědičnost hodnoty vlastnosti</span><span class="sxs-lookup"><span data-stu-id="044ac-155">Property Value Inheritance</span></span>  
 <span data-ttu-id="044ac-156">Dědičnost hodnot vlastností funguje prostřednictvím hybridního stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-156">Property value inheritance operates through a hybrid tree.</span></span> <span data-ttu-id="044ac-157">Skutečná metadata, která obsahují vlastnost <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A>, která umožňuje dědění vlastností, je třída <xref:System.Windows.FrameworkPropertyMetadata> na úrovni rozhraní WPF.</span><span class="sxs-lookup"><span data-stu-id="044ac-157">The actual metadata that contains the <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> property that enables property inheritance is the WPF framework-level <xref:System.Windows.FrameworkPropertyMetadata> class.</span></span> <span data-ttu-id="044ac-158">Proto musí být nadřazený prvek, který obsahuje původní hodnotu a podřízený objekt, který dědí tuto hodnotu, <xref:System.Windows.FrameworkElement> nebo <xref:System.Windows.FrameworkContentElement>a musí obě být součástí některých logických stromových struktur.</span><span class="sxs-lookup"><span data-stu-id="044ac-158">Therefore, both the parent that holds the original value and the child object that inherits that value must both be <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>, and they must both be part of some logical tree.</span></span> <span data-ttu-id="044ac-159">Nicméně pro existující vlastnosti WPF, které podporují dědění vlastností, dědičnost hodnot vlastností může perpetuate prostřednictvím objektu, který není v logickém stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-159">However, for existing WPF properties that support property inheritance, property value inheritance is able to perpetuate through an intervening object that is not in the logical tree.</span></span> <span data-ttu-id="044ac-160">Hlavně to je relevantní pro to, aby prvky šablony používaly všechny zděděné hodnoty vlastností nastavené buď na instanci, která je šablonou, nebo ve stále vyšší úrovni složení na úrovni stránky, a proto vyšší v logickém stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-160">Mainly this is relevant for having template elements use any inherited property values set either on the instance that is templated, or at still higher levels of page-level composition and therefore higher in the logical tree.</span></span> <span data-ttu-id="044ac-161">Aby dědičnost hodnoty vlastností mohla v takové hranici konzistentně fungovat, musí být vlastnost dědění registrována jako připojená vlastnost a pokud chcete definovat vlastní vlastnost závislosti s vlastností, měli byste postupovat podle tohoto vzoru. chování dědičnosti.</span><span class="sxs-lookup"><span data-stu-id="044ac-161">In order for property value inheritance to work consistently across such a boundary, the inheriting property must be registered as an attached property, and you should follow this pattern if you intend to define a custom dependency property with property inheritance behavior.</span></span> <span data-ttu-id="044ac-162">Přesný strom použitý k dědění vlastností nemůže být zcela předpokládaný metodou pomocné třídy, a to i v době běhu.</span><span class="sxs-lookup"><span data-stu-id="044ac-162">The exact tree used for property inheritance cannot be entirely anticipated by a helper class utility method, even at run time.</span></span> <span data-ttu-id="044ac-163">Další informace najdete v tématu [Dědičnost hodnot vlastností](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="044ac-163">For more information, see [Property Value Inheritance](property-value-inheritance.md).</span></span>  
  
<a name="two_trees"></a>   
## <a name="the-visual-tree"></a><span data-ttu-id="044ac-164">Vizuální strom</span><span class="sxs-lookup"><span data-stu-id="044ac-164">The Visual Tree</span></span>  
 <span data-ttu-id="044ac-165">Kromě konceptu logického stromu je také koncept vizuálního stromu v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="044ac-165">In addition to the concept of the logical tree, there is also the concept of the visual tree in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="044ac-166">Vizuální strom popisuje strukturu vizuálních objektů, reprezentovanou <xref:System.Windows.Media.Visual> základní třídou.</span><span class="sxs-lookup"><span data-stu-id="044ac-166">The visual tree describes the structure of visual objects, as represented by the <xref:System.Windows.Media.Visual> base class.</span></span> <span data-ttu-id="044ac-167">Při psaní šablony pro ovládací prvek definujete nebo předefinujete vizuální strom, který se vztahuje na tento ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="044ac-167">When you write a template for a control, you are defining or redefining the visual tree that applies for that control.</span></span> <span data-ttu-id="044ac-168">Vizuální strom je také zajímavá vývojářům, kteří chtějí mít kontrolu na nižší úrovni nad vykreslováním kvůli výkonu a optimalizaci.</span><span class="sxs-lookup"><span data-stu-id="044ac-168">The visual tree is also of interest to developers who want lower-level control over drawing for performance and optimization reasons.</span></span> <span data-ttu-id="044ac-169">Jednou z expozicí vizuálního stromu v rámci konvenční [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] programování aplikací je, že trasy událostí pro směrovanou událost většinou cestují do vizuálního stromu, nikoli z logického stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-169">One exposure of the visual tree as part of conventional [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application programming is that event routes for a routed event mostly travel along the visual tree, not the logical tree.</span></span> <span data-ttu-id="044ac-170">Tato Subtlety chování směrované události nemusí být hned zřejmá, pokud jste autorem ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="044ac-170">This subtlety of routed event behavior might not be immediately apparent unless you are a control author.</span></span> <span data-ttu-id="044ac-171">Směrování událostí prostřednictvím vizuálního stromu umožňuje ovládací prvky, které implementují složení na úrovni vizuálu pro zpracování událostí nebo vytváření setter událostí.</span><span class="sxs-lookup"><span data-stu-id="044ac-171">Routing events through the visual tree enables controls that implement composition at the visual level to handle events or create event setters.</span></span>  
  
<a name="trees_content"></a>   
## <a name="trees-content-elements-and-content-hosts"></a><span data-ttu-id="044ac-172">Stromy, prvky obsahu a hostitelé obsahu</span><span class="sxs-lookup"><span data-stu-id="044ac-172">Trees, Content Elements, and Content Hosts</span></span>  
 <span data-ttu-id="044ac-173">Prvky obsahu (třídy, které jsou odvozeny od <xref:System.Windows.ContentElement>) nejsou součástí vizuálního stromu; nedědí z <xref:System.Windows.Media.Visual> a nemají vizuální znázornění.</span><span class="sxs-lookup"><span data-stu-id="044ac-173">Content elements (classes that derive from <xref:System.Windows.ContentElement>) are not part of the visual tree; they do not inherit from <xref:System.Windows.Media.Visual> and do not have a visual representation.</span></span> <span data-ttu-id="044ac-174">Aby se v uživatelském rozhraní zobrazovala, <xref:System.Windows.ContentElement> musí být hostována v hostiteli obsahu, který je současně <xref:System.Windows.Media.Visual> a účastníkem logického stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-174">In order to appear in a UI at all, a <xref:System.Windows.ContentElement> must be hosted in a content host that is both a <xref:System.Windows.Media.Visual> and a logical tree participant.</span></span> <span data-ttu-id="044ac-175">Takový objekt je obvykle <xref:System.Windows.FrameworkElement>.</span><span class="sxs-lookup"><span data-stu-id="044ac-175">Usually such an object is a <xref:System.Windows.FrameworkElement>.</span></span> <span data-ttu-id="044ac-176">Můžete conceptualize, že hostitel obsahu je trochu podobný jako "prohlížeč" pro obsah a zvolí, jak zobrazit daný obsah v oblasti obrazovky, kterou hostitel řídí.</span><span class="sxs-lookup"><span data-stu-id="044ac-176">You can conceptualize that the content host is somewhat like a "browser" for the content and chooses how to display that content within the screen region that the host controls.</span></span> <span data-ttu-id="044ac-177">Po hostování obsahu může být obsah vytvořen účastníkem v určitých stromových procesech, které jsou obvykle přidruženy ke vizuálnímu stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-177">When the content is hosted, the content can be made a participant in certain tree processes that are normally associated with the visual tree.</span></span> <span data-ttu-id="044ac-178">Obecně platí, že třída hostitel <xref:System.Windows.FrameworkElement> obsahuje implementační kód, který do trasy událostí prostřednictvím dílčích uzlů logického stromu obsahu přidává všechny hostované <xref:System.Windows.ContentElement>, a to i v případě, že hostovaný obsah není součástí skutečného vizuálního stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-178">Generally, the <xref:System.Windows.FrameworkElement> host class includes implementation code that adds any hosted <xref:System.Windows.ContentElement> to the event route through subnodes of the content logical tree, even though the hosted content is not part of the true visual tree.</span></span> <span data-ttu-id="044ac-179">To je nezbytné, aby <xref:System.Windows.ContentElement> mohl nasměrovat směrovanou událost, která směruje na libovolný element jiný než sám sebe.</span><span class="sxs-lookup"><span data-stu-id="044ac-179">This is necessary so that a <xref:System.Windows.ContentElement> can source a routed event that routes to any element other than itself.</span></span>  
  
<a name="tree_traversal"></a>   
## <a name="tree-traversal"></a><span data-ttu-id="044ac-180">Procházení stromem</span><span class="sxs-lookup"><span data-stu-id="044ac-180">Tree Traversal</span></span>  
 <span data-ttu-id="044ac-181">Třída <xref:System.Windows.LogicalTreeHelper> poskytuje metody <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>, <xref:System.Windows.LogicalTreeHelper.GetParent%2A>a <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> pro procházení logických stromových struktur.</span><span class="sxs-lookup"><span data-stu-id="044ac-181">The <xref:System.Windows.LogicalTreeHelper> class provides the <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>, <xref:System.Windows.LogicalTreeHelper.GetParent%2A>, and <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> methods for logical tree traversal.</span></span> <span data-ttu-id="044ac-182">Ve většině případů nemusíte procházet logický strom existujících ovládacích prvků, protože tyto ovládací prvky téměř vždy zveřejňují své logické podřízené prvky jako vyhrazenou vlastnost kolekce, která podporuje přístup kolekce, jako je například `Add`, indexer atd.</span><span class="sxs-lookup"><span data-stu-id="044ac-182">In most cases, you should not have to traverse the logical tree of existing controls, because these controls almost always expose their logical child elements as a dedicated collection property that supports collection access such as `Add`, an indexer, and so on.</span></span> <span data-ttu-id="044ac-183">Procházení stromové struktury je hlavně scénář, který se používá pro autory ovládacích prvků, které se rozhodnou neodvozovat od zamýšlených vzorů ovládacích prvků, jako jsou <xref:System.Windows.Controls.ItemsControl> nebo <xref:System.Windows.Controls.Panel>, kde jsou již definovány vlastnosti kolekce a kteří mají v úmyslu poskytnout vlastní podporu kolekce vlastností.</span><span class="sxs-lookup"><span data-stu-id="044ac-183">Tree traversal is mainly a scenario that is used by control authors who choose not to derive from intended control patterns such as <xref:System.Windows.Controls.ItemsControl> or <xref:System.Windows.Controls.Panel> where collection properties are already defined, and who intend to provide their own collection property support.</span></span>  
  
 <span data-ttu-id="044ac-184">Vizuální strom také podporuje pomocnou třídu pro procházení vizuálního stromu <xref:System.Windows.Media.VisualTreeHelper>.</span><span class="sxs-lookup"><span data-stu-id="044ac-184">The visual tree also supports a helper class for visual tree traversal, <xref:System.Windows.Media.VisualTreeHelper>.</span></span> <span data-ttu-id="044ac-185">Vizuální strom není přístupný jako pohodlný prostřednictvím vlastností specifických pro ovládací prvek, takže třída <xref:System.Windows.Media.VisualTreeHelper> je doporučeným způsobem pro procházení vizuálního stromu, pokud je to nezbytné pro váš scénář programování.</span><span class="sxs-lookup"><span data-stu-id="044ac-185">The visual tree is not exposed as conveniently through control-specific properties, so the <xref:System.Windows.Media.VisualTreeHelper> class is the recommended way to traverse the visual tree if that is necessary for your programming scenario.</span></span> <span data-ttu-id="044ac-186">Další informace naleznete v tématu [Přehled vykreslování grafiky WPF](../graphics-multimedia/wpf-graphics-rendering-overview.md).</span><span class="sxs-lookup"><span data-stu-id="044ac-186">For more information, see [WPF Graphics Rendering Overview](../graphics-multimedia/wpf-graphics-rendering-overview.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="044ac-187">V některých případech je nutné prostudovat vizuální strom použité šablony.</span><span class="sxs-lookup"><span data-stu-id="044ac-187">Sometimes it is necessary to examine the visual tree of an applied template.</span></span> <span data-ttu-id="044ac-188">Při použití tohoto postupu byste měli být opatrní.</span><span class="sxs-lookup"><span data-stu-id="044ac-188">You should be careful when using this technique.</span></span> <span data-ttu-id="044ac-189">I v případě, že přecházíte mezi vizuální stromovou strukturu pro ovládací prvek, kde definujete šablonu, mohou uživatelé vašeho ovládacího prvku vždy měnit šablonu nastavením vlastnosti <xref:System.Windows.Controls.Control.Template%2A> u instancí a dokonce i koncový uživatel může ovlivnit použitou šablonu změnou systémového motivu.</span><span class="sxs-lookup"><span data-stu-id="044ac-189">Even if you are traversing a visual tree for a control where you define the template, consumers of your control can always change the template by setting the <xref:System.Windows.Controls.Control.Template%2A> property on instances, and even the end user can influence the applied template by changing the system theme.</span></span>  
  
<a name="routes"></a>   
## <a name="routes-for-routed-events-as-a-tree"></a><span data-ttu-id="044ac-190">Trasy pro směrované události jako "strom"</span><span class="sxs-lookup"><span data-stu-id="044ac-190">Routes for Routed Events as a "Tree"</span></span>  
 <span data-ttu-id="044ac-191">Jak už bylo zmíněno dříve, trasa každé směrované události je přenášena podél jedné a předem určené cesty stromu, který je hybridem reprezentace vizuálu a logického stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-191">As mentioned before, the route of any given routed event travels along a single and predetermined path of a tree that is a hybrid of the visual and logical tree representations.</span></span> <span data-ttu-id="044ac-192">Směrování událostí může v závislosti na tom, zda se jedná o tunelové nebo probublávání směrované události, směrovat ve směru nahoru nebo dolů v rámci stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-192">The event route can travel either in the up or down directions within the tree depending on whether it is a tunneling or bubbling routed event.</span></span> <span data-ttu-id="044ac-193">Koncept trasy události nemá přímo podpůrnou pomocnou třídu, která by se dala použít k "procházení" Směrování událostí nezávisle na vyvolání události, která ve skutečnosti směruje.</span><span class="sxs-lookup"><span data-stu-id="044ac-193">The event route concept does not have a directly supporting helper class that could be used to "walk" the event route independently of raising an event that actually routes.</span></span> <span data-ttu-id="044ac-194">Existuje třída, která představuje trasu <xref:System.Windows.EventRoute>, ale metody této třídy jsou obecně pouze pro interní použití.</span><span class="sxs-lookup"><span data-stu-id="044ac-194">There is a class that represents the route, <xref:System.Windows.EventRoute>, but the methods of that class are generally for internal use only.</span></span>  
  
<a name="resourcesandtrees"></a>   
## <a name="resource-dictionaries-and-trees"></a><span data-ttu-id="044ac-195">Slovníky prostředků a stromy</span><span class="sxs-lookup"><span data-stu-id="044ac-195">Resource Dictionaries and Trees</span></span>  
 <span data-ttu-id="044ac-196">Vyhledávání slovníku prostředků pro všechny `Resources` definované na stránce projde v podstatě logický strom.</span><span class="sxs-lookup"><span data-stu-id="044ac-196">Resource dictionary lookup for all `Resources` defined in a page traverses basically the logical tree.</span></span> <span data-ttu-id="044ac-197">Objekty, které nejsou v logickém stromu, mohou odkazovat na prostředky s klíčem, ale pořadí vyhledávání prostředků začíná v místě, kde je objekt připojen k logickému stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-197">Objects that are not in the logical tree can reference keyed resources, but the resource lookup sequence begins at the point where that object is connected to the logical tree.</span></span> <span data-ttu-id="044ac-198">V jazyce WPF mohou mít `Resources` vlastnost, která obsahuje <xref:System.Windows.ResourceDictionary>, pouze logické uzly stromové struktury, takže není k dispozici žádný přínos při procházení vizuálního stromu při hledání prostředků s klíčem z <xref:System.Windows.ResourceDictionary>.</span><span class="sxs-lookup"><span data-stu-id="044ac-198">In WPF, only logical tree nodes can have a `Resources` property that contains a <xref:System.Windows.ResourceDictionary>, therefore there is no benefit in traversing the visual tree looking for keyed resources from a <xref:System.Windows.ResourceDictionary>.</span></span>  
  
 <span data-ttu-id="044ac-199">Vyhledávání prostředků ale může také překračovat rámec bezprostředního logického stromu.</span><span class="sxs-lookup"><span data-stu-id="044ac-199">However, resource lookup can also extend beyond the immediate logical tree.</span></span> <span data-ttu-id="044ac-200">Pro označení aplikace může vyhledávání prostředků dále pokračovat ve slovnících prostředků na úrovni aplikace a následně na podporu motivů a systémové hodnoty, na které se odkazuje jako na statické vlastnosti nebo klíče.</span><span class="sxs-lookup"><span data-stu-id="044ac-200">For application markup, the resource lookup can then continue onward to application-level resource dictionaries and then to theme support and system values that are referenced as static properties or keys.</span></span> <span data-ttu-id="044ac-201">Pokud jsou odkazy na prostředky dynamické, mohou vlastní motivy také odkazovat na systémové hodnoty mimo logický strom motivů.</span><span class="sxs-lookup"><span data-stu-id="044ac-201">Themes themselves can also reference system values outside of the theme logical tree if the resource references are dynamic.</span></span> <span data-ttu-id="044ac-202">Další informace o slovnících Resource a logikě vyhledávání najdete v tématu [prostředky XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="044ac-202">For more information on resource dictionaries and the lookup logic, see [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="044ac-203">Viz také:</span><span class="sxs-lookup"><span data-stu-id="044ac-203">See also</span></span>

- [<span data-ttu-id="044ac-204">Přehled vstupu</span><span class="sxs-lookup"><span data-stu-id="044ac-204">Input Overview</span></span>](input-overview.md)
- [<span data-ttu-id="044ac-205">Přehled vykreslování grafiky WPF</span><span class="sxs-lookup"><span data-stu-id="044ac-205">WPF Graphics Rendering Overview</span></span>](../graphics-multimedia/wpf-graphics-rendering-overview.md)
- [<span data-ttu-id="044ac-206">Přehled směrovaných událostí</span><span class="sxs-lookup"><span data-stu-id="044ac-206">Routed Events Overview</span></span>](routed-events-overview.md)
- [<span data-ttu-id="044ac-207">Inicializace elementů objektu, které nejsou ve stromu objektů</span><span class="sxs-lookup"><span data-stu-id="044ac-207">Initialization for Object Elements Not in an Object Tree</span></span>](initialization-for-object-elements-not-in-an-object-tree.md)
- [<span data-ttu-id="044ac-208">Architektura WPF</span><span class="sxs-lookup"><span data-stu-id="044ac-208">WPF Architecture</span></span>](wpf-architecture.md)
