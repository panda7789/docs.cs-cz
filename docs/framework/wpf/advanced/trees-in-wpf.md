---
title: Předmětů
ms.date: 03/30/2017
helpviewer_keywords:
- logical tree [WPF]
- element tree [WPF]
- visual tree [WPF]
ms.assetid: e83f25e5-d66b-4fc7-92d2-50130c9a6649
ms.openlocfilehash: d4b17c34fb33f73ca1c173bebc8f94ddac5b1942
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/24/2020
ms.locfileid: "76746577"
---
# <a name="trees-in-wpf"></a>Stromy v subsystému WPF
V mnoha technologiích jsou prvky a komponenty uspořádány ve stromové struktuře, kde vývojáři přímo manipulují s uzly objektů ve stromu, aby to ovlivnilo vykreslování nebo chování aplikace. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] také používá několik metaphors stromové struktury k definování vztahů mezi prvky programu. Pro většinu výrobců WPF mohou vývojáři vytvořit aplikaci v kódu nebo definovat části aplikace v jazyce XAML a současně se zamyslet na stromové struktuře objektů metafora, ale budou volat konkrétní rozhraní API nebo pomocí konkrétního kódu tak, aby místo obecných rozhraní API pro manipulaci se stromem objektů, například můžete použít v XML DOM. WPF zpřístupňuje dvě pomocné třídy, které poskytují stromové zobrazení metafora, <xref:System.Windows.LogicalTreeHelper> a <xref:System.Windows.Media.VisualTreeHelper>. Výrazy vizuální strom a logický strom jsou také používány v dokumentaci k platformě WPF, protože tyto stejné stromy jsou užitečné pro porozumění chování některých klíčových funkcí WPF. Toto téma definuje, co znázorňuje vizuální strom a logický strom, popisuje, jak se tyto stromy vztahují k celkovému konceptu stromu objektů, a zavádí <xref:System.Windows.LogicalTreeHelper> a <xref:System.Windows.Media.VisualTreeHelper>s.  

<a name="element_tree"></a>   
## <a name="trees-in-wpf"></a>Stromy v subsystému WPF  
 Nejvíce kompletní stromová struktura v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] je stromem objektů. Pokud definujete stránku aplikace v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] a potom načtete [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], vytvoří se stromová struktura na základě vztahů vnořování prvků v kódu. Definujete-li aplikaci nebo část aplikace v kódu, je vytvořena stromová struktura na základě toho, jak přiřazujete hodnoty vlastností pro vlastnosti, které implementují model obsahu pro daný objekt. V [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]existují dva způsoby, jak je koncepčně dokončen strom objektů a může být hlášen jeho veřejnému rozhraní API: jako logický strom a jako vizuální strom. Rozdíly mezi logickým stromem a vizuálním stromem nejsou vždy nutně důležité, ale mohou občas způsobit problémy s některými [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] subsystémy a ovlivnit volby, které provedete v kódu nebo kódu.  
  
 I když nebudete vždy pracovat buď s logickým stromem, nebo s vizuálním stromem přímo, porozumět konceptům, jak jsou stromy interakce, užitečné pro porozumění WPF jako technologii. Metafora WPF jako stromové struktury určitého druhu je také zásadní pro porozumění, jak dědičnost vlastností a funkce směrování událostí fungují v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].  
  
> [!NOTE]
> Vzhledem k tomu, že strom objektů je více konceptů než skutečné rozhraní API, je další způsob, jak si představit koncept, je jako graf objektů. V praxi jsou relace mezi objekty v době běhu, kde se metafora stromové struktury rozdělují. Nicméně, zejména s uživatelským rozhraním definovaným v jazyce XAML, je metafora ke stromu dostatečně důležité, aby většina dokumentace WPF při odkazování na tento obecný koncept používala pojem strom objektů.  
  
<a name="logical_tree"></a>   
## <a name="the-logical-tree"></a>Logický Strom  
 V [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]přidáte obsah do prvků uživatelského rozhraní nastavením vlastností objektů, které tyto prvky vrátí. Například můžete přidat položky do ovládacího prvku <xref:System.Windows.Controls.ListBox> tím, že budete pracovat s jeho vlastností <xref:System.Windows.Controls.ItemsControl.Items%2A>. Tímto způsobem umísťujete položky do <xref:System.Windows.Controls.ItemCollection>, který je hodnotou <xref:System.Windows.Controls.ItemsControl.Items%2A> vlastnosti. Podobně pokud chcete přidat objekty do <xref:System.Windows.Controls.DockPanel>, budete pracovat s jeho hodnotou vlastnosti <xref:System.Windows.Controls.Panel.Children%2A>. Sem přidáváte objekty do <xref:System.Windows.Controls.UIElementCollection>. Příklad kódu naleznete v tématu [How to: Add a Dynamic elementu](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms752374(v=vs.100)).  
  
 Pokud v [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]umístíte položky seznamu do <xref:System.Windows.Controls.ListBox> nebo ovládací prvky nebo jiné prvky uživatelského rozhraní v <xref:System.Windows.Controls.DockPanel>, můžete také použít vlastnosti <xref:System.Windows.Controls.ItemsControl.Items%2A> a <xref:System.Windows.Controls.Panel.Children%2A>, a to buď explicitně, nebo implicitně, jako v následujícím příkladu.  
  
 [!code-xaml[TreeOvwsSupport#AllCode](~/samples/snippets/csharp/VS_Snippets_Wpf/TreeOvwsSupport/CS/page1.xaml#allcode)]  
  
 Pokud byste chtěli tento XAML zpracovat jako XML v modelu objektu dokumentu a pokud jste zahrnuli značky jako implicitní (což by bylo právní), pak výsledný strom XML DOM by obsahoval prvky pro `<ListBox.Items>` a další implicitní položky. Jazyk XAML ale nezpracovává tento způsob při čtení značek a zápisu do objektů, což výsledný graf objektů nezahrnuje `ListBox.Items`. Má však vlastnost <xref:System.Windows.Controls.ListBox> s názvem `Items`, která obsahuje <xref:System.Windows.Controls.ItemCollection>a že <xref:System.Windows.Controls.ItemCollection> je inicializována, ale prázdná při zpracování <xref:System.Windows.Controls.ListBox> XAML. Pak všechny podřízené prvky objektu, které existují jako obsah pro <xref:System.Windows.Controls.ListBox>, jsou přidány do <xref:System.Windows.Controls.ItemCollection> pomocí volání analyzátoru do `ItemCollection.Add`. Tento příklad zpracování XAML do stromové struktury objektů je zatím zdánlivě příklad, ve kterém je vytvořený strom objektů v podstatě logický strom.  
  
 Nicméně logický strom není celý graf objektů, který existuje pro uživatelské rozhraní aplikace za běhu, a to i v případě, že jsou implicitní položky syntaxe XAML vypočítané. Hlavním důvodem pro toto jsou vizuály a šablony. Zvažte například <xref:System.Windows.Controls.Button>. Logický Strom ohlásí objekt <xref:System.Windows.Controls.Button> a také jeho řetězcovou `Content`. Ale k tomuto tlačítku je ve stromové struktuře objektů run-time k dispozici další. Konkrétně se tlačítko na obrazovce zobrazí jenom v případě, že se použila konkrétní šablona ovládacího prvku <xref:System.Windows.Controls.Button>. Vizuály, které pocházejí z použité šablony (například <xref:System.Windows.Controls.Border> šablony s tmavou šedou barvou kolem vizuálního tlačítka), nejsou hlášeny v logickém stromu, a to ani v případě, že během běhu (například zpracování vstupní události ze viditelného uživatelského rozhraní a následně při čtení logického stromu) prohlížíte na logický strom. Chcete-li najít vizuály šablony, místo toho je nutné prostudovat vizuální strom.  
  
 Další informace o tom, jak je [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] syntaxe mapována do grafu vytvořeného objektu a implicitní syntaxe v jazyce XAML, naleznete [v tématu detail syntaxe jazyka XAML nebo v](xaml-syntax-in-detail.md) [přehledu XAML (WPF)](xaml-overview-wpf.md).  
  
<a name="tree_property_inheritance_event_routing"></a>   
### <a name="the-purpose-of-the-logical-tree"></a>Účel logického stromu  
 Logický Strom existuje, aby modely obsahu mohli snadno iterovat přes jejich možné podřízené objekty, a aby bylo možné modely obsahu rozšířit. Logický Strom také poskytuje rozhraní pro určitá oznámení, například když jsou načteny všechny objekty v logickém stromu. V podstatě je logický strom aproximací grafu objektů běhového času na úrovni rozhraní, která nezahrnuje vizuály, ale je vhodný pro mnoho operací dotazování na vlastní kompozici aplikace doby běhu.  
  
 Statické i dynamické odkazy na prostředky jsou navíc vyřešeny prohledáním v logickém stromové struktuře pro <xref:System.Windows.FrameworkElement.Resources%2A> kolekcí na počátečním objektu pro vyžádání a následným pokračováním logického stromu a kontrolou každého <xref:System.Windows.FrameworkElement> (nebo <xref:System.Windows.FrameworkContentElement>) pro jinou `Resources` hodnotu, která obsahuje <xref:System.Windows.ResourceDictionary>pravděpodobně obsahující tento klíč. Logický strom se používá pro vyhledávání prostředků, pokud jsou k dispozici jak logický strom, tak i vizuální strom. Další informace o slovnících a vyhledáváních prostředků najdete v tématu věnovaném [prostředkům XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).  
  
<a name="composition"></a>   
### <a name="composition-of-the-logical-tree"></a>Složení logického stromu  
 Logický Strom je definován na úrovni architektury WPF, což znamená, že základní prvek WPF, který je nejrelevantnější pro operace logického stromu, je buď <xref:System.Windows.FrameworkElement>, nebo <xref:System.Windows.FrameworkContentElement>. Nicméně jak vidíte, zda skutečně používáte rozhraní <xref:System.Windows.LogicalTreeHelper> API, logický strom někdy obsahuje uzly, které nejsou buď <xref:System.Windows.FrameworkElement> nebo <xref:System.Windows.FrameworkContentElement>. Například Logická stromová struktura hlásí hodnotu <xref:System.Windows.Controls.TextBlock.Text%2A> <xref:System.Windows.Controls.TextBlock>, což je řetězec.  
  
<a name="override_logical_tree"></a>   
### <a name="overriding-the-logical-tree"></a>Přepsání logického stromu  
 Pokročilí autoři ovládacích prvků mohou přepsat logický strom přepsáním několika rozhraní API, která definují, jak obecný objekt nebo obsahový model přidávají nebo odstraňují objekty v rámci logického stromu. Příklad, jak přepsat logický strom, naleznete v tématu override The [Logical Tree](how-to-override-the-logical-tree.md).  
  
<a name="pvi"></a>   
### <a name="property-value-inheritance"></a>Dědičnost hodnoty vlastnosti  
 Dědičnost hodnot vlastností funguje prostřednictvím hybridního stromu. Skutečná metadata, která obsahují vlastnost <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A>, která umožňuje dědění vlastností, je třída <xref:System.Windows.FrameworkPropertyMetadata> na úrovni rozhraní WPF. Proto musí být nadřazený prvek, který obsahuje původní hodnotu a podřízený objekt, který dědí tuto hodnotu, <xref:System.Windows.FrameworkElement> nebo <xref:System.Windows.FrameworkContentElement>a musí obě být součástí některých logických stromových struktur. Nicméně pro existující vlastnosti WPF, které podporují dědění vlastností, dědičnost hodnot vlastností může perpetuate prostřednictvím objektu, který není v logickém stromu. Hlavně to je relevantní pro to, aby prvky šablony používaly všechny zděděné hodnoty vlastností nastavené buď na instanci, která je šablonou, nebo ve stále vyšší úrovni složení na úrovni stránky, a proto vyšší v logickém stromu. Aby dědičnost hodnoty vlastností mohla v takové hranici konzistentně fungovat, musí být vlastnost dědění registrována jako připojená vlastnost a pokud chcete definovat vlastní vlastnost závislosti s vlastností, měli byste postupovat podle tohoto vzoru. chování dědičnosti. Přesný strom použitý k dědění vlastností nemůže být zcela předpokládaný metodou pomocné třídy, a to i v době běhu. Další informace najdete v tématu [Dědičnost hodnot vlastností](property-value-inheritance.md).  
  
<a name="two_trees"></a>   
## <a name="the-visual-tree"></a>Vizuální strom  
 Kromě konceptu logického stromu je také koncept vizuálního stromu v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]. Vizuální strom popisuje strukturu vizuálních objektů, reprezentovanou <xref:System.Windows.Media.Visual> základní třídou. Při psaní šablony pro ovládací prvek definujete nebo předefinujete vizuální strom, který se vztahuje na tento ovládací prvek. Vizuální strom je také zajímavá vývojářům, kteří chtějí mít kontrolu na nižší úrovni nad vykreslováním kvůli výkonu a optimalizaci. Jednou z expozicí vizuálního stromu v rámci konvenční [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] programování aplikací je, že trasy událostí pro směrovanou událost většinou cestují do vizuálního stromu, nikoli z logického stromu. Tato Subtlety chování směrované události nemusí být hned zřejmá, pokud jste autorem ovládacího prvku. Směrování událostí prostřednictvím vizuálního stromu umožňuje ovládací prvky, které implementují složení na úrovni vizuálu pro zpracování událostí nebo vytváření setter událostí.  
  
<a name="trees_content"></a>   
## <a name="trees-content-elements-and-content-hosts"></a>Stromy, prvky obsahu a hostitelé obsahu  
 Prvky obsahu (třídy, které jsou odvozeny od <xref:System.Windows.ContentElement>) nejsou součástí vizuálního stromu; nedědí z <xref:System.Windows.Media.Visual> a nemají vizuální znázornění. Aby se v uživatelském rozhraní zobrazovala, <xref:System.Windows.ContentElement> musí být hostována v hostiteli obsahu, který je současně <xref:System.Windows.Media.Visual> a účastníkem logického stromu. Takový objekt je obvykle <xref:System.Windows.FrameworkElement>. Můžete conceptualize, že hostitel obsahu je trochu podobný jako "prohlížeč" pro obsah a zvolí, jak zobrazit daný obsah v oblasti obrazovky, kterou hostitel řídí. Po hostování obsahu může být obsah vytvořen účastníkem v určitých stromových procesech, které jsou obvykle přidruženy ke vizuálnímu stromu. Obecně platí, že třída hostitel <xref:System.Windows.FrameworkElement> obsahuje implementační kód, který do trasy událostí prostřednictvím dílčích uzlů logického stromu obsahu přidává všechny hostované <xref:System.Windows.ContentElement>, a to i v případě, že hostovaný obsah není součástí skutečného vizuálního stromu. To je nezbytné, aby <xref:System.Windows.ContentElement> mohl nasměrovat směrovanou událost, která směruje na libovolný element jiný než sám sebe.  
  
<a name="tree_traversal"></a>   
## <a name="tree-traversal"></a>Procházení stromem  
 Třída <xref:System.Windows.LogicalTreeHelper> poskytuje metody <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>, <xref:System.Windows.LogicalTreeHelper.GetParent%2A>a <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> pro procházení logických stromových struktur. Ve většině případů nemusíte procházet logický strom existujících ovládacích prvků, protože tyto ovládací prvky téměř vždy zveřejňují své logické podřízené prvky jako vyhrazenou vlastnost kolekce, která podporuje přístup kolekce, jako je například `Add`, indexer atd. Procházení stromové struktury je hlavně scénář, který se používá pro autory ovládacích prvků, které se rozhodnou neodvozovat od zamýšlených vzorů ovládacích prvků, jako jsou <xref:System.Windows.Controls.ItemsControl> nebo <xref:System.Windows.Controls.Panel>, kde jsou již definovány vlastnosti kolekce a kteří mají v úmyslu poskytnout vlastní podporu kolekce vlastností.  
  
 Vizuální strom také podporuje pomocnou třídu pro procházení vizuálního stromu <xref:System.Windows.Media.VisualTreeHelper>. Vizuální strom není přístupný jako pohodlný prostřednictvím vlastností specifických pro ovládací prvek, takže třída <xref:System.Windows.Media.VisualTreeHelper> je doporučeným způsobem pro procházení vizuálního stromu, pokud je to nezbytné pro váš scénář programování. Další informace naleznete v tématu [Přehled vykreslování grafiky WPF](../graphics-multimedia/wpf-graphics-rendering-overview.md).  
  
> [!NOTE]
> V některých případech je nutné prostudovat vizuální strom použité šablony. Při použití tohoto postupu byste měli být opatrní. I v případě, že přecházíte mezi vizuální stromovou strukturu pro ovládací prvek, kde definujete šablonu, mohou uživatelé vašeho ovládacího prvku vždy měnit šablonu nastavením vlastnosti <xref:System.Windows.Controls.Control.Template%2A> u instancí a dokonce i koncový uživatel může ovlivnit použitou šablonu změnou systémového motivu.  
  
<a name="routes"></a>   
## <a name="routes-for-routed-events-as-a-tree"></a>Trasy pro směrované události jako "strom"  
 Jak už bylo zmíněno dříve, trasa každé směrované události je přenášena podél jedné a předem určené cesty stromu, který je hybridem reprezentace vizuálu a logického stromu. Směrování událostí může v závislosti na tom, zda se jedná o tunelové nebo probublávání směrované události, směrovat ve směru nahoru nebo dolů v rámci stromu. Koncept trasy události nemá přímo podpůrnou pomocnou třídu, která by se dala použít k "procházení" Směrování událostí nezávisle na vyvolání události, která ve skutečnosti směruje. Existuje třída, která představuje trasu <xref:System.Windows.EventRoute>, ale metody této třídy jsou obecně pouze pro interní použití.  
  
<a name="resourcesandtrees"></a>   
## <a name="resource-dictionaries-and-trees"></a>Slovníky prostředků a stromy  
 Vyhledávání slovníku prostředků pro všechny `Resources` definované na stránce projde v podstatě logický strom. Objekty, které nejsou v logickém stromu, mohou odkazovat na prostředky s klíčem, ale pořadí vyhledávání prostředků začíná v místě, kde je objekt připojen k logickému stromu. V jazyce WPF mohou mít `Resources` vlastnost, která obsahuje <xref:System.Windows.ResourceDictionary>, pouze logické uzly stromové struktury, takže není k dispozici žádný přínos při procházení vizuálního stromu při hledání prostředků s klíčem z <xref:System.Windows.ResourceDictionary>.  
  
 Vyhledávání prostředků ale může také překračovat rámec bezprostředního logického stromu. Pro označení aplikace může vyhledávání prostředků dále pokračovat ve slovnících prostředků na úrovni aplikace a následně na podporu motivů a systémové hodnoty, na které se odkazuje jako na statické vlastnosti nebo klíče. Pokud jsou odkazy na prostředky dynamické, mohou vlastní motivy také odkazovat na systémové hodnoty mimo logický strom motivů. Další informace o slovnících Resource a logikě vyhledávání najdete v tématu [prostředky XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).  
  
## <a name="see-also"></a>Viz také

- [Přehled vstupu](input-overview.md)
- [Přehled vykreslování grafiky WPF](../graphics-multimedia/wpf-graphics-rendering-overview.md)
- [Přehled směrovaných událostí](routed-events-overview.md)
- [Inicializace elementů objektu, které nejsou ve stromu objektů](initialization-for-object-elements-not-in-an-object-tree.md)
- [Architektura WPF](wpf-architecture.md)
