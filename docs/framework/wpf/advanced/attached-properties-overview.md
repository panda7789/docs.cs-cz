---
title: Přehled připojených vlastností
description: Seznamte se s připojenými vlastnostmi v Windows Presentation Foundation, což jsou globální vlastnosti nastavitelované na libovolný objekt.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- attached properties [WPF Designer]
ms.assetid: 75928354-dc01-47e8-a018-8409aec1f32d
ms.openlocfilehash: 993f65024fcfc4f39a408c81af43b798360e6cf6
ms.sourcegitcommit: 87cfeb69226fef01acb17c56c86f978f4f4a13db
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/24/2020
ms.locfileid: "87168387"
---
# <a name="attached-properties-overview"></a><span data-ttu-id="7389f-103">Přehled připojených vlastností</span><span class="sxs-lookup"><span data-stu-id="7389f-103">Attached Properties Overview</span></span>

<span data-ttu-id="7389f-104">Připojená vlastnost je koncept definovaný v jazyce XAML.</span><span class="sxs-lookup"><span data-stu-id="7389f-104">An attached property is a concept defined by XAML.</span></span> <span data-ttu-id="7389f-105">Připojená vlastnost je určena pro použití jako typ globální vlastnosti, která je nastavena pro libovolný objekt.</span><span class="sxs-lookup"><span data-stu-id="7389f-105">An attached property is intended to be used as a type of global property that is settable on any object.</span></span> <span data-ttu-id="7389f-106">V jsou [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] přidružené vlastnosti obvykle definovány jako specializované formy vlastnosti závislosti, která nemá vlastnost "Obálka".</span><span class="sxs-lookup"><span data-stu-id="7389f-106">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], attached properties are typically defined as a specialized form of dependency property that does not have the conventional property "wrapper".</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7389f-107">Požadovaný<a name="prerequisites"></a></span><span class="sxs-lookup"><span data-stu-id="7389f-107">Prerequisites <a name="prerequisites"></a></span></span>

<span data-ttu-id="7389f-108">V tomto článku se předpokládá, že rozumíte vlastnostem závislosti z perspektivy uživatele existujících vlastností závislosti u [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] tříd a přečetli jste [Přehled vlastností závislosti](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="7389f-108">This article assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](dependency-properties-overview.md).</span></span> <span data-ttu-id="7389f-109">Chcete-li postupovat podle příkladů v tomto článku, měli byste také pochopit XAML a vědět, jak psát aplikace WPF.</span><span class="sxs-lookup"><span data-stu-id="7389f-109">To follow the examples in this article, you should also understand XAML and know how to write WPF applications.</span></span>

## <a name="why-use-attached-properties"></a><span data-ttu-id="7389f-110">Proč použít připojené vlastnosti<a name="attached_properties_usage"></a></span><span class="sxs-lookup"><span data-stu-id="7389f-110">Why Use Attached Properties <a name="attached_properties_usage"></a></span></span>

<span data-ttu-id="7389f-111">Jedním z účel připojených vlastností je povolení různých podřízených prvků pro zadání jedinečných hodnot pro vlastnost, která je definována v nadřazeném elementu.</span><span class="sxs-lookup"><span data-stu-id="7389f-111">One purpose of an attached property is to allow different child elements to specify unique values for a property that's defined in a parent element.</span></span> <span data-ttu-id="7389f-112">Konkrétní aplikace tohoto scénáře mají podřízené prvky, které informují nadřazený prvek, jak mají být prezentovány v [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7389f-112">A specific application of this scenario is having child elements inform the parent element of how they are to be presented in the [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span></span> <span data-ttu-id="7389f-113">Jedním z příkladů je <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7389f-113">One example is the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="7389f-114"><xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>Vlastnost je vytvořena jako připojená vlastnost, protože je určena k nastavení u elementů, které jsou obsaženy v rámci a <xref:System.Windows.Controls.DockPanel> nikoli <xref:System.Windows.Controls.DockPanel> samotné.</span><span class="sxs-lookup"><span data-stu-id="7389f-114">The <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> property is created as an attached property because it is designed to be set on elements that are contained within a <xref:System.Windows.Controls.DockPanel> rather than on <xref:System.Windows.Controls.DockPanel> itself.</span></span> <span data-ttu-id="7389f-115"><xref:System.Windows.Controls.DockPanel>Třída definuje statické <xref:System.Windows.DependencyProperty> pole s názvem <xref:System.Windows.Controls.DockPanel.DockProperty> a pak poskytuje <xref:System.Windows.Controls.DockPanel.GetDock%2A> <xref:System.Windows.Controls.DockPanel.SetDock%2A> metody a jako veřejné přístupové objekty pro připojenou vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7389f-115">The <xref:System.Windows.Controls.DockPanel> class defines the static <xref:System.Windows.DependencyProperty> field named <xref:System.Windows.Controls.DockPanel.DockProperty>, and then provides the <xref:System.Windows.Controls.DockPanel.GetDock%2A> and <xref:System.Windows.Controls.DockPanel.SetDock%2A> methods as public accessors for the attached property.</span></span>

## <a name="attached-properties-in-xaml"></a><span data-ttu-id="7389f-116">Připojené vlastnosti v jazyce XAML<a name="attached_properties_xaml"></a></span><span class="sxs-lookup"><span data-stu-id="7389f-116">Attached Properties in XAML <a name="attached_properties_xaml"></a></span></span>

<span data-ttu-id="7389f-117">V jazyce XAML jste nastavili připojené vlastnosti pomocí syntaxe *AttachedPropertyProvider*. Vlastnost *PropertyName*</span><span class="sxs-lookup"><span data-stu-id="7389f-117">In XAML, you set attached properties by using the syntax *AttachedPropertyProvider*.*PropertyName*</span></span>

<span data-ttu-id="7389f-118">Následuje příklad, jak lze nastavit <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> v jazyce XAML:</span><span class="sxs-lookup"><span data-stu-id="7389f-118">The following is an example of how you can set <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> in XAML:</span></span>

[!code-xaml[PropertiesOvwSupport#APBasicUsage](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml#apbasicusage)]

<span data-ttu-id="7389f-119">Použití je poněkud podobné statické vlastnosti; vždy odkazujete na typ <xref:System.Windows.Controls.DockPanel> , který vlastní a registruje připojenou vlastnost, a neodkazování na žádnou instanci určenou názvem.</span><span class="sxs-lookup"><span data-stu-id="7389f-119">The usage is somewhat similar to a static property; you always reference the type <xref:System.Windows.Controls.DockPanel> that owns and registers the attached property, rather than referring to any instance specified by name.</span></span>

<span data-ttu-id="7389f-120">Vzhledem k tomu, že připojená vlastnost v jazyce XAML je atributem, který jste nastavili v kódu, má jakákoli závažnost pouze operace set.</span><span class="sxs-lookup"><span data-stu-id="7389f-120">Also, because an attached property in XAML is an attribute that you set in markup, only the set operation has any relevance.</span></span> <span data-ttu-id="7389f-121">V jazyce XAML nelze přímo získat vlastnost, i když existují některé nepřímé mechanismy pro porovnávání hodnot, jako jsou například triggery v stylech (podrobnosti naleznete v tématu [stylování a šablonování](../../../desktop-wpf/fundamentals/styles-templates-overview.md)).</span><span class="sxs-lookup"><span data-stu-id="7389f-121">You cannot directly get a property in XAML, although there are some indirect mechanisms for comparing values, such as triggers in styles (for details, see [Styling and Templating](../../../desktop-wpf/fundamentals/styles-templates-overview.md)).</span></span>

### <a name="attached-property-implementation-in-wpf"></a><span data-ttu-id="7389f-122">Implementace připojené vlastnosti v subsystému WPF</span><span class="sxs-lookup"><span data-stu-id="7389f-122">Attached Property Implementation in WPF</span></span>

<span data-ttu-id="7389f-123">V nástroji [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] jsou většina přidružených vlastností souvisejících s uživatelským rozhraním pro typy WPF implementována jako vlastnosti závislosti.</span><span class="sxs-lookup"><span data-stu-id="7389f-123">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], most of the UI-related attached properties on WPF types are implemented as dependency properties.</span></span> <span data-ttu-id="7389f-124">Připojené vlastnosti jsou koncept XAML, zatímco vlastnosti závislosti jsou koncept WPF.</span><span class="sxs-lookup"><span data-stu-id="7389f-124">Attached properties are a XAML concept, whereas dependency properties are a WPF concept.</span></span> <span data-ttu-id="7389f-125">Vzhledem k tomu, že připojené vlastnosti WPF jsou vlastnosti závislosti, podporují koncepty vlastností závislosti, jako jsou metadata vlastností, a výchozí hodnoty z metadat těchto vlastností.</span><span class="sxs-lookup"><span data-stu-id="7389f-125">Because WPF attached properties are dependency properties, they support dependency property concepts such as property metadata, and default values from that property metadata.</span></span>

## <a name="how-attached-properties-are-used-by-the-owning-type"></a><span data-ttu-id="7389f-126">Jak se používají připojené vlastnosti pomocí vlastnícího typu<a name="howused"></a></span><span class="sxs-lookup"><span data-stu-id="7389f-126">How Attached Properties Are Used by the Owning Type <a name="howused"></a></span></span>

<span data-ttu-id="7389f-127">I když jsou připojené vlastnosti nastavované u libovolného objektu, který není automaticky znamenat, že nastavení vlastnosti vytvoří hmotný výsledek nebo že hodnota bude někdy použita jiným objektem.</span><span class="sxs-lookup"><span data-stu-id="7389f-127">Although attached properties are settable on any object, that does not automatically mean that setting the property will produce a tangible result, or that the value will ever be used by another object.</span></span> <span data-ttu-id="7389f-128">Obecně jsou určené vlastnosti určeny tak, aby objekty přicházející z široké škály možných hierarchií tříd nebo logických vztahů mohly každou sestavu tvořit společné informace o typu, který definuje připojenou vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7389f-128">Generally, attached properties are intended so that objects coming from a wide variety of possible class hierarchies or logical relationships can each report common information to the type that defines the attached property.</span></span> <span data-ttu-id="7389f-129">Typ definující připojenou vlastnost obvykle následuje jeden z těchto modelů:</span><span class="sxs-lookup"><span data-stu-id="7389f-129">The type that defines the attached property typically follows one of these models:</span></span>

- <span data-ttu-id="7389f-130">Typ, který definuje připojenou vlastnost, je navržen tak, aby mohl být nadřazeným prvkem prvků, které nastaví hodnoty pro připojenou vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7389f-130">The type that defines the attached property is designed so that it can be the parent element of the elements that will set values for the attached property.</span></span> <span data-ttu-id="7389f-131">Typ poté provede iteraci svých podřízených objektů prostřednictvím interní logiky proti některé struktuře stromové struktury objektů, získá hodnoty a bude nějakým způsobem pracovat na těchto hodnotách.</span><span class="sxs-lookup"><span data-stu-id="7389f-131">The type then iterates its child objects through internal logic against some object tree structure, obtains the values, and acts on those values in some manner.</span></span>

- <span data-ttu-id="7389f-132">Typ, který definuje připojenou vlastnost, bude použit jako podřízený prvek pro celou řadu možných nadřazených prvků a modelů obsahu.</span><span class="sxs-lookup"><span data-stu-id="7389f-132">The type that defines the attached property will be used as the child element for a variety of possible parent elements and content models.</span></span>

- <span data-ttu-id="7389f-133">Typ definující připojenou vlastnost představuje službu.</span><span class="sxs-lookup"><span data-stu-id="7389f-133">The type that defines the attached property represents a service.</span></span> <span data-ttu-id="7389f-134">Další typy nastavují hodnoty pro připojenou vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7389f-134">Other types set values for the attached property.</span></span> <span data-ttu-id="7389f-135">Poté, když je prvek, který nastavuje vlastnost, vyhodnocen v kontextu služby, jsou hodnoty připojených vlastností získány prostřednictvím interní logiky třídy služby.</span><span class="sxs-lookup"><span data-stu-id="7389f-135">Then, when the element that set the property is evaluated in the context of the service, the attached property values are obtained through internal logic of the service class.</span></span>

### <a name="an-example-of-a-parent-defined-attached-property"></a><span data-ttu-id="7389f-136">Příklad vlastnosti připojené k nadřazenému elementu</span><span class="sxs-lookup"><span data-stu-id="7389f-136">An Example of a Parent-Defined Attached Property</span></span>

<span data-ttu-id="7389f-137">Nejběžnějším scénářem, kde WPF definuje připojenou vlastnost, je, když nadřazený prvek podporuje kolekci podřízených elementů a také implementuje chování, kde jsou konkrétního chování hlášeny jednotlivě pro každý podřízený element.</span><span class="sxs-lookup"><span data-stu-id="7389f-137">The most typical scenario where WPF defines an attached property is when a parent element supports a child element collection, and also implements a behavior where the specifics of the behavior are reported individually for each child element.</span></span>

<span data-ttu-id="7389f-138"><xref:System.Windows.Controls.DockPanel>definuje <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> připojenou vlastnost a <xref:System.Windows.Controls.DockPanel> má kód na úrovni třídy jako součást logiky vykreslování (konkrétně <xref:System.Windows.Controls.DockPanel.MeasureOverride%2A> a <xref:System.Windows.Controls.DockPanel.ArrangeOverride%2A> ).</span><span class="sxs-lookup"><span data-stu-id="7389f-138"><xref:System.Windows.Controls.DockPanel> defines the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> attached property, and <xref:System.Windows.Controls.DockPanel> has class-level code as part of its rendering logic (specifically, <xref:System.Windows.Controls.DockPanel.MeasureOverride%2A> and <xref:System.Windows.Controls.DockPanel.ArrangeOverride%2A>).</span></span> <span data-ttu-id="7389f-139"><xref:System.Windows.Controls.DockPanel>Instance vždy zkontroluje, zda některý z jeho bezprostředních podřízených prvků nastavil hodnotu pro <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="7389f-139">A <xref:System.Windows.Controls.DockPanel> instance will always check to see whether any of its immediate child elements have set a value for <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="7389f-140">V takovém případě se tyto hodnoty stanou vstupem pro logiku vykreslování použitou pro tento konkrétní podřízený element.</span><span class="sxs-lookup"><span data-stu-id="7389f-140">If so, those values become input for the rendering logic applied to that particular child element.</span></span> <span data-ttu-id="7389f-141">Vnořené <xref:System.Windows.Controls.DockPanel> instance každý z nich zachází s vlastními přímými podřízenými kolekcemi prvků, ale toto chování je specifické pro <xref:System.Windows.Controls.DockPanel> zpracování <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> hodnot.</span><span class="sxs-lookup"><span data-stu-id="7389f-141">Nested <xref:System.Windows.Controls.DockPanel> instances each treat their own immediate child element collections, but that behavior is implementation-specific to how <xref:System.Windows.Controls.DockPanel> processes <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> values.</span></span> <span data-ttu-id="7389f-142">Je teoreticky možné mít připojené vlastnosti, které ovlivňují prvky přesahující bezprostřední nadřazený prvek.</span><span class="sxs-lookup"><span data-stu-id="7389f-142">It is theoretically possible to have attached properties that influence elements beyond the immediate parent.</span></span> <span data-ttu-id="7389f-143">Pokud <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> je připojená vlastnost nastavena u prvku, který nemá žádný <xref:System.Windows.Controls.DockPanel> nadřazený element, který by na něj pracoval, není vyvolána žádná chyba ani výjimka.</span><span class="sxs-lookup"><span data-stu-id="7389f-143">If the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> attached property is set on an element that has no <xref:System.Windows.Controls.DockPanel> parent element to act upon it, no error or exception is raised.</span></span> <span data-ttu-id="7389f-144">To jednoduše znamená, že byla nastavena globální hodnota vlastnosti, ale nemá žádnou aktuální <xref:System.Windows.Controls.DockPanel> nadřazenou položku, která by mohla tyto informace spotřebovat.</span><span class="sxs-lookup"><span data-stu-id="7389f-144">This simply means that a global property value was set, but it has no current <xref:System.Windows.Controls.DockPanel> parent that could consume the information.</span></span>

## <a name="attached-properties-in-code"></a><span data-ttu-id="7389f-145">Připojené vlastnosti v kódu<a name="attached_properties_code"></a></span><span class="sxs-lookup"><span data-stu-id="7389f-145">Attached Properties in Code <a name="attached_properties_code"></a></span></span>

<span data-ttu-id="7389f-146">Připojené vlastnosti v subsystému WPF nemají typické metody "obálky" CLR pro snadný přístup get/set.</span><span class="sxs-lookup"><span data-stu-id="7389f-146">Attached properties in WPF do not have the typical CLR "wrapper" methods for easy get/set access.</span></span> <span data-ttu-id="7389f-147">Je to proto, že připojená vlastnost není nutně součástí oboru názvů CLR pro instance, kde je nastavena vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7389f-147">This is because the attached property is not necessarily part of the CLR namespace for instances where the property is set.</span></span> <span data-ttu-id="7389f-148">Procesor XAML však musí být schopný nastavit tyto hodnoty při analýze XAML.</span><span class="sxs-lookup"><span data-stu-id="7389f-148">However, a XAML processor must be able to set those values when XAML is parsed.</span></span> <span data-ttu-id="7389f-149">Pro podporu efektivního použití připojené vlastnosti musí typ vlastníka připojené vlastnosti implementovat metody vyhrazeného přístupového objektu ve formuláři **Get_PropertyName_** a **Set_PropertyName_**.</span><span class="sxs-lookup"><span data-stu-id="7389f-149">To support an effective attached property usage, the owner type of the attached property must implement dedicated accessor methods in the form **Get_PropertyName_** and **Set_PropertyName_**.</span></span> <span data-ttu-id="7389f-150">Tyto vyhrazené přístupové metody jsou také užitečné k získání nebo nastavení připojené vlastnosti v kódu.</span><span class="sxs-lookup"><span data-stu-id="7389f-150">These dedicated accessor methods are also useful to get or set the attached property in code.</span></span> <span data-ttu-id="7389f-151">Z hlediska kódu je připojená vlastnost podobná zálohovacímu poli, které má přístupové objekty metod namísto přistupujících objektů vlastností, a toto pole pro zálohování může existovat na jakémkoli objektu, a nikoli proto, aby bylo nutné je konkrétně definovat.</span><span class="sxs-lookup"><span data-stu-id="7389f-151">From a code perspective, an attached property is similar to a backing field that has method accessors instead of property accessors, and that backing field can exist on any object rather than needing to be specifically defined.</span></span>

<span data-ttu-id="7389f-152">Následující příklad ukazuje, jak lze nastavit připojenou vlastnost v kódu.</span><span class="sxs-lookup"><span data-stu-id="7389f-152">The following example shows how you can set an attached property in code.</span></span> <span data-ttu-id="7389f-153">V tomto příkladu `myCheckBox` je instancí <xref:System.Windows.Controls.CheckBox> třídy.</span><span class="sxs-lookup"><span data-stu-id="7389f-153">In this example, `myCheckBox` is an instance of the <xref:System.Windows.Controls.CheckBox> class.</span></span>

[!code-csharp[PropertiesOvwSupport#APCode](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml.cs#apcode)]
[!code-vb[PropertiesOvwSupport#APCode](~/samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page4.xaml.vb#apcode)]

<span data-ttu-id="7389f-154">Podobně jako v případě jazyka XAML, pokud ještě `myCheckBox` nebyl přidán jako podřízený prvek `myDockPanel` čtvrtého řádku kódu, by pátý řádek kódu nevyvolávají výjimku, ale hodnota vlastnosti nebude pracovat s nadřazeným objektem, <xref:System.Windows.Controls.DockPanel> takže by nevedla žádné akce.</span><span class="sxs-lookup"><span data-stu-id="7389f-154">Similar to the XAML case, if `myCheckBox` had not already been added as a child element of `myDockPanel` by the fourth line of code, the fifth line of code would not raise an exception, but the property value would not interact with a <xref:System.Windows.Controls.DockPanel> parent and thus would do nothing.</span></span> <span data-ttu-id="7389f-155">Pouze <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> hodnota nastavená u podřízeného prvku v kombinaci s přítomností <xref:System.Windows.Controls.DockPanel> nadřazeného elementu způsobí efektivní chování ve vykreslené aplikaci.</span><span class="sxs-lookup"><span data-stu-id="7389f-155">Only a <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> value set on a child element combined with the presence of a <xref:System.Windows.Controls.DockPanel> parent element will cause an effective behavior in the rendered application.</span></span> <span data-ttu-id="7389f-156">(V tomto případě můžete nastavit připojenou vlastnost a pak se připojit ke stromu.</span><span class="sxs-lookup"><span data-stu-id="7389f-156">(In this case, you could set the attached property, then attach to the tree.</span></span> <span data-ttu-id="7389f-157">Nebo se můžete připojit ke stromu a potom nastavit připojenou vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7389f-157">Or you could attach to the tree then set the attached property.</span></span> <span data-ttu-id="7389f-158">Stejný výsledek poskytuje buď pořadí akcí.)</span><span class="sxs-lookup"><span data-stu-id="7389f-158">Either action order provides the same result.)</span></span>

## <a name="attached-property-metadata"></a><span data-ttu-id="7389f-159">Připojená metadata vlastnosti<a name="attached_properties_metadata"></a></span><span class="sxs-lookup"><span data-stu-id="7389f-159">Attached Property Metadata <a name="attached_properties_metadata"></a></span></span>

<span data-ttu-id="7389f-160">Při registraci vlastnosti <xref:System.Windows.FrameworkPropertyMetadata> je nastavena k určení vlastností vlastnosti, například zda vlastnost ovlivňuje vykreslování, měření a tak dále.</span><span class="sxs-lookup"><span data-stu-id="7389f-160">When registering the property, <xref:System.Windows.FrameworkPropertyMetadata> is set to specify characteristics of the property, such as whether the property affects rendering, measurement, and so on.</span></span> <span data-ttu-id="7389f-161">Metadata pro připojenou vlastnost se obecně neliší od vlastnosti závislosti.</span><span class="sxs-lookup"><span data-stu-id="7389f-161">Metadata for an attached property is generally no different than on a dependency property.</span></span> <span data-ttu-id="7389f-162">Pokud zadáte výchozí hodnotu v přepsání pro připojená metadata vlastnosti, tato hodnota se změní na výchozí hodnotu implicitní připojená vlastnost v instancích přepisované třídy.</span><span class="sxs-lookup"><span data-stu-id="7389f-162">If you specify a default value in an override to attached property metadata, that value becomes the default value of the implicit attached property on instances of the overriding class.</span></span> <span data-ttu-id="7389f-163">Konkrétně je výchozí hodnota hlášena, pokud se některé procesy dotazují na hodnotu připojené vlastnosti prostřednictvím `Get` přístupového objektu metody pro danou vlastnost, zadáním instance třídy, kde jste zadali metadata, a hodnota pro tuto připojenou vlastnost nebyla nastavena jinak.</span><span class="sxs-lookup"><span data-stu-id="7389f-163">Specifically, your default value is reported if some process queries for the value of an attached property through the `Get` method accessor for that property, specifying an instance of the class where you specified the metadata, and the value for that attached property was otherwise not set.</span></span>

<span data-ttu-id="7389f-164">Pokud chcete povolit dědění hodnoty vlastností u vlastnosti, měli byste použít připojené vlastnosti místo nepřipojených vlastností závislosti.</span><span class="sxs-lookup"><span data-stu-id="7389f-164">If you want to enable property value inheritance on a property, you should use attached properties rather than non-attached dependency properties.</span></span> <span data-ttu-id="7389f-165">Podrobnosti najdete v tématu [Dědičnost hodnot vlastností](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="7389f-165">For details, see [Property Value Inheritance](property-value-inheritance.md).</span></span>

## <a name="custom-attached-properties"></a><span data-ttu-id="7389f-166">Vlastní připojené vlastnosti<a name="custom"></a></span><span class="sxs-lookup"><span data-stu-id="7389f-166">Custom Attached Properties <a name="custom"></a></span></span>

### <a name="when-to-create-an-attached-property"></a><span data-ttu-id="7389f-167">Kdy vytvořit připojenou vlastnost<a name="create_attached_properties"></a></span><span class="sxs-lookup"><span data-stu-id="7389f-167">When to Create an Attached Property <a name="create_attached_properties"></a></span></span>

<span data-ttu-id="7389f-168">Můžete vytvořit připojenou vlastnost, pokud existuje důvod, že má být mechanismus nastavení vlastnosti dostupný pro jiné třídy než definující třídu.</span><span class="sxs-lookup"><span data-stu-id="7389f-168">You might create an attached property when there is a reason to have a property setting mechanism available for classes other than the defining class.</span></span> <span data-ttu-id="7389f-169">Nejběžnější scénář pro toto je rozložení.</span><span class="sxs-lookup"><span data-stu-id="7389f-169">The most common scenario for this is layout.</span></span> <span data-ttu-id="7389f-170">Příklady existujících vlastností rozložení jsou <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> , <xref:System.Windows.Controls.Panel.ZIndex%2A?displayProperty=nameWithType> a <xref:System.Windows.Controls.Canvas.Top%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="7389f-170">Examples of existing layout properties are <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>, <xref:System.Windows.Controls.Panel.ZIndex%2A?displayProperty=nameWithType>, and <xref:System.Windows.Controls.Canvas.Top%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="7389f-171">Scénář je zde povolený, protože prvky, které existují jako podřízené prvky pro prvky pro řízení rozložení, mohou vyjádřit požadavky na rozložení na své nadřazené prvky rozložení jednotlivě, přičemž každý nastaví hodnotu vlastnosti, kterou nadřazený objekt definoval jako připojenou vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7389f-171">The scenario enabled here is that elements that exist as child elements to layout-controlling elements are able to express layout requirements to their layout parent elements individually, each setting a property value that the parent defined as an attached property.</span></span>

<span data-ttu-id="7389f-172">Dalším scénářem použití připojené vlastnosti je, když třída reprezentuje službu a chcete, aby třídy byly schopné integrovat službu transparentně.</span><span class="sxs-lookup"><span data-stu-id="7389f-172">Another scenario for using an attached property is when your class represents a service, and you want classes to be able to integrate the service more transparently.</span></span>

<span data-ttu-id="7389f-173">Další možností je získat podporu návrháře WPF v aplikaci Visual Studio, jako je například úpravy okna **vlastností** .</span><span class="sxs-lookup"><span data-stu-id="7389f-173">Yet another scenario is to receive Visual Studio WPF Designer support, such as **Properties** window editing.</span></span> <span data-ttu-id="7389f-174">Další informace najdete v tématu [Přehled tvorby řízení](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="7389f-174">For more information, see [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>

<span data-ttu-id="7389f-175">Jak už bylo uvedeno dříve, měli byste se zaregistrovat jako připojenou vlastnost, pokud chcete použít dědičnost hodnot vlastností.</span><span class="sxs-lookup"><span data-stu-id="7389f-175">As mentioned before, you should register as an attached property if you want to use property value inheritance.</span></span>

### <a name="how-to-create-an-attached-property"></a><span data-ttu-id="7389f-176">Vytvoření připojené vlastnosti<a name="how_do_i_create_attached_properties"></a></span><span class="sxs-lookup"><span data-stu-id="7389f-176">How to Create an Attached Property <a name="how_do_i_create_attached_properties"></a></span></span>

<span data-ttu-id="7389f-177">Pokud vaše třída definuje připojenou vlastnost výhradně pro použití v jiných typech, pak třída nemusí odvozovat z <xref:System.Windows.DependencyObject> .</span><span class="sxs-lookup"><span data-stu-id="7389f-177">If your class is defining the attached property strictly for use on other types, then the class does not have to derive from <xref:System.Windows.DependencyObject>.</span></span> <span data-ttu-id="7389f-178">Ale musíte odvozovat z, <xref:System.Windows.DependencyObject> Pokud budete postupovat podle celkového modelu WPF, který má přiřazenou vlastnost, ale také vlastnost závislosti.</span><span class="sxs-lookup"><span data-stu-id="7389f-178">But you do need to derive from <xref:System.Windows.DependencyObject> if you follow the overall WPF model of having your attached property also be a dependency property.</span></span>

<span data-ttu-id="7389f-179">Definujte připojenou vlastnost jako vlastnost závislosti deklarováním `public static readonly` pole typu <xref:System.Windows.DependencyProperty> .</span><span class="sxs-lookup"><span data-stu-id="7389f-179">Define your attached property as a dependency property by declaring a `public static readonly` field of type <xref:System.Windows.DependencyProperty>.</span></span> <span data-ttu-id="7389f-180">Toto pole definujete pomocí návratové hodnoty <xref:System.Windows.DependencyProperty.RegisterAttached%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="7389f-180">You define this field by using the return value of the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method.</span></span> <span data-ttu-id="7389f-181">Název pole musí odpovídat názvu připojené vlastnosti připojenému k řetězci `Property` , aby bylo možné postupovat podle zavedeného vzoru WPF pojmenování identifikujících polí a vlastností, které představují.</span><span class="sxs-lookup"><span data-stu-id="7389f-181">The field name must match the attached property name, appended with the string `Property`, to follow the established WPF pattern of naming the identifying fields versus the properties that they represent.</span></span> <span data-ttu-id="7389f-182">Připojený zprostředkovatel vlastností musí také poskytovat statické **Get_PropertyName_** a **Set_PropertyName_** metody jako přístupové objekty pro připojenou vlastnost; Pokud se to nepovede, výsledkem je, že systém vlastností nemůže použít vaši připojenou vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7389f-182">The attached property provider must also provide static **Get_PropertyName_** and **Set_PropertyName_** methods as accessors for the attached property; failing to do this results in the property system being unable to use your attached property.</span></span>

> [!NOTE]
> <span data-ttu-id="7389f-183">Vynecháte-li přistupující objekt get připojené vlastnosti, datová vazba u vlastnosti nebude fungovat v nástrojích pro návrh, jako je například Visual Studio a Blend pro Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="7389f-183">If you omit the attached property's get accessor, data binding on the property will not work in design tools, such as Visual Studio and Blend for Visual Studio.</span></span>

#### <a name="the-get-accessor"></a><span data-ttu-id="7389f-184">Přístupový objekt get</span><span class="sxs-lookup"><span data-stu-id="7389f-184">The Get Accessor</span></span>

<span data-ttu-id="7389f-185">Podpis přístupového objektu **Get_PropertyName_** musí být:</span><span class="sxs-lookup"><span data-stu-id="7389f-185">The signature for the **Get_PropertyName_** accessor must be:</span></span>

`public static object GetPropertyName(object target)`

- <span data-ttu-id="7389f-186">`target`Objekt může být zadán jako konkrétnější typ v implementaci.</span><span class="sxs-lookup"><span data-stu-id="7389f-186">The `target` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="7389f-187">Například <xref:System.Windows.Controls.DockPanel.GetDock%2A?displayProperty=nameWithType> metoda typu parametru <xref:System.Windows.UIElement> , protože připojená vlastnost je určena pouze pro <xref:System.Windows.UIElement> instance.</span><span class="sxs-lookup"><span data-stu-id="7389f-187">For example, the <xref:System.Windows.Controls.DockPanel.GetDock%2A?displayProperty=nameWithType> method types the parameter as <xref:System.Windows.UIElement>, because the attached property is only intended to be set on <xref:System.Windows.UIElement> instances.</span></span>

- <span data-ttu-id="7389f-188">Návratová hodnota může být v implementaci zadána jako konkrétnější typ.</span><span class="sxs-lookup"><span data-stu-id="7389f-188">The return value can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="7389f-189">Například <xref:System.Windows.Controls.DockPanel.GetDock%2A> Metoda je typu <xref:System.Windows.Controls.Dock> , protože hodnota může být nastavena pouze na tento výčet.</span><span class="sxs-lookup"><span data-stu-id="7389f-189">For example, the <xref:System.Windows.Controls.DockPanel.GetDock%2A> method types it as <xref:System.Windows.Controls.Dock>, because the value can only be set to that enumeration.</span></span>

#### <a name="the-set-accessor"></a><span data-ttu-id="7389f-190">Přístupový objekt set</span><span class="sxs-lookup"><span data-stu-id="7389f-190">The Set Accessor</span></span>

<span data-ttu-id="7389f-191">Podpis přístupového objektu **Set_PropertyName_** musí být:</span><span class="sxs-lookup"><span data-stu-id="7389f-191">The signature for the **Set_PropertyName_** accessor must be:</span></span>

`public static void SetPropertyName(object target, object value)`

- <span data-ttu-id="7389f-192">`target`Objekt může být zadán jako konkrétnější typ v implementaci.</span><span class="sxs-lookup"><span data-stu-id="7389f-192">The `target` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="7389f-193">Například <xref:System.Windows.Controls.DockPanel.SetDock%2A> Metoda je typu <xref:System.Windows.UIElement> , protože připojená vlastnost je určena pouze pro <xref:System.Windows.UIElement> instance.</span><span class="sxs-lookup"><span data-stu-id="7389f-193">For example, the <xref:System.Windows.Controls.DockPanel.SetDock%2A> method types it as <xref:System.Windows.UIElement>, because the attached property is only intended to be set on <xref:System.Windows.UIElement> instances.</span></span>

- <span data-ttu-id="7389f-194">`value`Objekt může být zadán jako konkrétnější typ v implementaci.</span><span class="sxs-lookup"><span data-stu-id="7389f-194">The `value` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="7389f-195">Například <xref:System.Windows.Controls.DockPanel.SetDock%2A> Metoda je typu <xref:System.Windows.Controls.Dock> , protože hodnota může být nastavena pouze na tento výčet.</span><span class="sxs-lookup"><span data-stu-id="7389f-195">For example, the <xref:System.Windows.Controls.DockPanel.SetDock%2A> method types it as <xref:System.Windows.Controls.Dock>, because the value can only be set to that enumeration.</span></span> <span data-ttu-id="7389f-196">Pamatujte, že hodnota pro tuto metodu je vstup pocházející z zavaděče XAML, když narazí na připojenou vlastnost v použití přidružené vlastnosti v kódu.</span><span class="sxs-lookup"><span data-stu-id="7389f-196">Remember that the value for this method is the input coming from the XAML loader when it encounters your attached property in an attached property usage in markup.</span></span> <span data-ttu-id="7389f-197">Tento vstup je hodnota zadaná jako hodnota atributu XAML v kódu.</span><span class="sxs-lookup"><span data-stu-id="7389f-197">That input is the value specified as a XAML attribute value in markup.</span></span> <span data-ttu-id="7389f-198">Proto pro typ, který používáte, musí být podporován převod typu, serializátor hodnoty nebo rozšíření značek, aby příslušný typ mohl být vytvořen z hodnoty atributu (což je nakonec pouze řetězec).</span><span class="sxs-lookup"><span data-stu-id="7389f-198">Therefore there must be type conversion, value serializer, or markup extension support for the type you use, such that the appropriate type can be created from the attribute value (which is ultimately just a string).</span></span>

<span data-ttu-id="7389f-199">Následující příklad ukazuje registraci vlastnosti závislosti (pomocí <xref:System.Windows.DependencyProperty.RegisterAttached%2A> metody) a také **Get_PropertyName_** a přístupové objekty **Set_PropertyName_** .</span><span class="sxs-lookup"><span data-stu-id="7389f-199">The following example shows the dependency property registration (using the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method), as well as the **Get_PropertyName_** and **Set_PropertyName_** accessors.</span></span> <span data-ttu-id="7389f-200">V tomto příkladu je název připojené vlastnosti `IsBubbleSource` .</span><span class="sxs-lookup"><span data-stu-id="7389f-200">In the example, the attached property name is `IsBubbleSource`.</span></span> <span data-ttu-id="7389f-201">Proto musí být přistupující objekty pojmenovány `GetIsBubbleSource` a `SetIsBubbleSource` .</span><span class="sxs-lookup"><span data-stu-id="7389f-201">Therefore, the accessors must be named `GetIsBubbleSource` and `SetIsBubbleSource`.</span></span>

[!code-csharp[WPFAquariumSln#RegisterAttachedBubbler](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#registerattachedbubbler)]
[!code-vb[WPFAquariumSln#RegisterAttachedBubbler](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#registerattachedbubbler)]

#### <a name="attached-property-attributes"></a><span data-ttu-id="7389f-202">Atributy připojených vlastností</span><span class="sxs-lookup"><span data-stu-id="7389f-202">Attached Property Attributes</span></span>

<span data-ttu-id="7389f-203">WPF definuje několik atributů rozhraní .NET, které mají poskytovat informace o připojených vlastnostech k procesům reflexe a typickým uživatelům informací o reflexi a vlastnostech, jako jsou například návrháři.</span><span class="sxs-lookup"><span data-stu-id="7389f-203">WPF defines several .NET attributes that are intended to provide information about attached properties to reflection processes, and to typical users of reflection and property information such as designers.</span></span> <span data-ttu-id="7389f-204">Vzhledem k tomu, že připojené vlastnosti mají typ neomezeného rozsahu, návrháři potřebují způsob, jak vyhnout zahlcení uživatelů globálním seznamem všech připojených vlastností, které jsou definovány v konkrétní implementaci technologie využívající XAML.</span><span class="sxs-lookup"><span data-stu-id="7389f-204">Because attached properties have a type of unlimited scope, designers need a way to avoid overwhelming users with a global list of all the attached properties that are defined in a particular technology implementation that uses XAML.</span></span> <span data-ttu-id="7389f-205">Atributy rozhraní .NET, které WPF definuje pro připojené vlastnosti, lze použít k určení rozsahu situací, kdy se má daná připojená vlastnost zobrazit v okně Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="7389f-205">The .NET attributes that WPF defines for attached properties can be used to scope the situations where a given attached property should be shown in a properties window.</span></span> <span data-ttu-id="7389f-206">Můžete zvážit použití těchto atributů také pro vlastní připojené vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="7389f-206">You might consider applying these attributes for your own custom attached properties also.</span></span> <span data-ttu-id="7389f-207">Účel a syntax atributů rozhraní .NET jsou popsány na příslušných referenčních stránkách:</span><span class="sxs-lookup"><span data-stu-id="7389f-207">The purpose and syntax of the .NET attributes is described on the appropriate reference pages:</span></span>

- <xref:System.Windows.AttachedPropertyBrowsableAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableForChildrenAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableForTypeAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableWhenAttributePresentAttribute>

## <a name="learning-more-about-attached-properties"></a><span data-ttu-id="7389f-208">Další informace o připojených vlastnostech<a name="more"></a></span><span class="sxs-lookup"><span data-stu-id="7389f-208">Learning More About Attached Properties <a name="more"></a></span></span>

- <span data-ttu-id="7389f-209">Další informace o vytvoření připojené vlastnosti najdete v tématu [registrace připojené vlastnosti](how-to-register-an-attached-property.md).</span><span class="sxs-lookup"><span data-stu-id="7389f-209">For more information on creating an attached property, see [Register an Attached Property](how-to-register-an-attached-property.md).</span></span>

- <span data-ttu-id="7389f-210">Pokročilejší scénáře použití vlastností závislosti a připojených vlastností najdete v tématu [vlastnosti vlastních závislostí](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="7389f-210">For more advanced usage scenarios for dependency properties and attached properties, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>

- <span data-ttu-id="7389f-211">Vlastnost můžete také zaregistrovat jako připojenou vlastnost a jako vlastnost závislosti, ale pak pořád vystavovat implementace "obálku".</span><span class="sxs-lookup"><span data-stu-id="7389f-211">You can also register a property as an attached property, and as a dependency property, but then still expose "wrapper" implementations.</span></span> <span data-ttu-id="7389f-212">V tomto případě lze vlastnost nastavit buď na daném prvku, nebo na jakémkoli prvku prostřednictvím syntaxe připojené vlastnosti XAML.</span><span class="sxs-lookup"><span data-stu-id="7389f-212">In this case, the property can be set either on that element, or on any element through the XAML attached property syntax.</span></span> <span data-ttu-id="7389f-213">Příkladem vlastnosti s vhodným scénářem pro standardní i připojené použití je <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="7389f-213">An example of a property with an appropriate scenario for both standard and attached usages is <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType>.</span></span>

## <a name="see-also"></a><span data-ttu-id="7389f-214">Viz také</span><span class="sxs-lookup"><span data-stu-id="7389f-214">See also</span></span>

- <xref:System.Windows.DependencyProperty>
- [<span data-ttu-id="7389f-215">Přehled vlastností závislosti</span><span class="sxs-lookup"><span data-stu-id="7389f-215">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="7389f-216">Vlastní vlastnosti závislosti</span><span class="sxs-lookup"><span data-stu-id="7389f-216">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="7389f-217">Přehled XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="7389f-217">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="7389f-218">Registrace přidružené vlastnosti</span><span class="sxs-lookup"><span data-stu-id="7389f-218">Register an Attached Property</span></span>](how-to-register-an-attached-property.md)
