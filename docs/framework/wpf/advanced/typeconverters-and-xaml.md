---
title: TypeConverters a XAML
ms.date: 03/30/2017
helpviewer_keywords:
- XAML [WPF], TypeConverter class
ms.assetid: f6313e4d-e89d-497d-ac87-b43511a1ae4b
ms.openlocfilehash: 6b8b58228e94ed12557e97406e55cc4165753076
ms.sourcegitcommit: 011314e0c8eb4cf4a11d92078f58176c8c3efd2d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 02/09/2020
ms.locfileid: "77095083"
---
# <a name="typeconverters-and-xaml"></a><span data-ttu-id="c7f67-102">TypeConverters a XAML</span><span class="sxs-lookup"><span data-stu-id="c7f67-102">TypeConverters and XAML</span></span>
<span data-ttu-id="c7f67-103">Toto téma zavádí účel konverze typu z řetězce jako obecné funkce jazyka XAML.</span><span class="sxs-lookup"><span data-stu-id="c7f67-103">This topic introduces the purpose of type conversion from string as a general XAML language feature.</span></span> <span data-ttu-id="c7f67-104">V .NET Framework poskytuje <xref:System.ComponentModel.TypeConverter> třída konkrétní účel jako součást implementace spravované vlastní třídy, kterou lze použít jako hodnotu vlastnosti v použití atributu XAML.</span><span class="sxs-lookup"><span data-stu-id="c7f67-104">In the .NET Framework, the <xref:System.ComponentModel.TypeConverter> class serves a particular purpose as part of the implementation for a managed custom class that can be used as a property value in XAML attribute usage.</span></span> <span data-ttu-id="c7f67-105">Pokud píšete vlastní třídu a chcete, aby byly instance vaší třídy použitelné jako hodnoty nastavitelných atributů XAML, může být nutné použít <xref:System.ComponentModel.TypeConverterAttribute> pro třídu, zapsat vlastní třídu <xref:System.ComponentModel.TypeConverter> nebo obojí.</span><span class="sxs-lookup"><span data-stu-id="c7f67-105">If you write a custom class, and you want instances of your class to be usable as XAML settable attribute values, you might need to apply a <xref:System.ComponentModel.TypeConverterAttribute> to your class, write a custom <xref:System.ComponentModel.TypeConverter> class, or both.</span></span>  

## <a name="type-conversion-concepts"></a><span data-ttu-id="c7f67-106">Koncepce převodu typů</span><span class="sxs-lookup"><span data-stu-id="c7f67-106">Type Conversion Concepts</span></span>  
  
### <a name="xaml-and-string-values"></a><span data-ttu-id="c7f67-107">Hodnoty XAML a řetězce</span><span class="sxs-lookup"><span data-stu-id="c7f67-107">XAML and String Values</span></span>  
 <span data-ttu-id="c7f67-108">Když nastavíte hodnotu atributu v souboru XAML, počáteční typ této hodnoty je řetězec v čistě textu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-108">When you set an attribute value in a XAML file, the initial type of that value is a string in pure text.</span></span> <span data-ttu-id="c7f67-109">Dokonce i jiné primitivní typy, jako je <xref:System.Double>, jsou počáteční textové řetězce pro procesor XAML.</span><span class="sxs-lookup"><span data-stu-id="c7f67-109">Even other primitives such as <xref:System.Double> are initially text strings to a XAML processor.</span></span>  
  
 <span data-ttu-id="c7f67-110">Procesor XAML potřebuje dvě části informací, aby bylo možné zpracovat hodnotu atributu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-110">A XAML processor needs two pieces of information in order to process an attribute value.</span></span> <span data-ttu-id="c7f67-111">První část informací je typ hodnoty vlastnosti, kterou chcete nastavit.</span><span class="sxs-lookup"><span data-stu-id="c7f67-111">The first piece of information is the value type of the property that is being set.</span></span> <span data-ttu-id="c7f67-112">Libovolný řetězec, který definuje hodnotu atributu a který je zpracován v jazyce XAML, musí být nakonec převeden nebo přeložen na hodnotu tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-112">Any string that defines an attribute value and that is processed in XAML must ultimately be converted or resolved to a value of that type.</span></span> <span data-ttu-id="c7f67-113">Pokud je hodnota primitivní, kterou považuje analyzátor XAML (jako je číselná hodnota), je proveden přímý převod řetězce.</span><span class="sxs-lookup"><span data-stu-id="c7f67-113">If the value is a primitive that is understood by the XAML parser (such as a numeric value), a direct conversion of the string is attempted.</span></span> <span data-ttu-id="c7f67-114">Je-li hodnotou výčet, je použit řetězec pro kontrolu shody názvu s pojmenovanou konstantou v tomto výčtu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-114">If the value is an enumeration, the string is used to check for a name match to a named constant in that enumeration.</span></span> <span data-ttu-id="c7f67-115">Pokud hodnota není primitivní ani výčet srozumitelný pro analyzátor, pak musí být příslušný typ schopný poskytnout instanci typu nebo hodnotu na základě převedeného řetězce.</span><span class="sxs-lookup"><span data-stu-id="c7f67-115">If the value is neither a parser-understood primitive nor an enumeration, then the type in question must be able to provide an instance of the type, or a value, based on a converted string.</span></span> <span data-ttu-id="c7f67-116">To se provádí tak, že značí třídu konvertoru typu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-116">This is done by indicating a type converter class.</span></span> <span data-ttu-id="c7f67-117">Konvertor typu je efektivně pomocná třída pro poskytování hodnot jiné třídy, pro scénář XAML a také potenciálně pro volání kódu v kódu .NET.</span><span class="sxs-lookup"><span data-stu-id="c7f67-117">The type converter is effectively a helper class for providing values of another class, both for the XAML scenario and also potentially for code calls in .NET code.</span></span>  
  
### <a name="using-existing-type-conversion-behavior-in-xaml"></a><span data-ttu-id="c7f67-118">Použití existujícího chování převodu typu v jazyce XAML</span><span class="sxs-lookup"><span data-stu-id="c7f67-118">Using Existing Type Conversion Behavior in XAML</span></span>  
 <span data-ttu-id="c7f67-119">V závislosti na vaší znalosti se základními koncepty XAML můžete již v jazyce XAML pro základní aplikace použít chování převodu typů, aniž by bylo potřeba ho realizovat.</span><span class="sxs-lookup"><span data-stu-id="c7f67-119">Depending on your familiarity with the underlying XAML concepts, you may already be using type conversion behavior in basic application XAML without realizing it.</span></span> <span data-ttu-id="c7f67-120">Například WPF definuje doslova stovky vlastností, které přijímají hodnotu typu <xref:System.Windows.Point>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-120">For instance, WPF defines literally hundreds of properties that take a value of type <xref:System.Windows.Point>.</span></span> <span data-ttu-id="c7f67-121"><xref:System.Windows.Point> je hodnota, která popisuje souřadnici v dvojrozměrném prostoru souřadnic a ve skutečnosti má pouze dvě důležité vlastnosti: <xref:System.Windows.Point.X%2A> a <xref:System.Windows.Point.Y%2A>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-121">A <xref:System.Windows.Point> is a value that describes a coordinate in a two-dimensional coordinate space, and it really just has two important properties: <xref:System.Windows.Point.X%2A> and <xref:System.Windows.Point.Y%2A>.</span></span> <span data-ttu-id="c7f67-122">Pokud určíte bod v jazyce XAML, zadáte ho jako řetězec s oddělovačem (obvykle čárka) mezi <xref:System.Windows.Point.X%2A> a <xref:System.Windows.Point.Y%2A> hodnotami, které zadáte.</span><span class="sxs-lookup"><span data-stu-id="c7f67-122">When you specify a point in XAML, you specify it as a string with a delimiter (typically a comma) between the <xref:System.Windows.Point.X%2A> and <xref:System.Windows.Point.Y%2A> values you provide.</span></span> <span data-ttu-id="c7f67-123">Například: `<LinearGradientBrush StartPoint="0,0" EndPoint="1,1"/>`.</span><span class="sxs-lookup"><span data-stu-id="c7f67-123">For example: `<LinearGradientBrush StartPoint="0,0" EndPoint="1,1"/>`.</span></span>  
  
 <span data-ttu-id="c7f67-124">I tento jednoduchý typ <xref:System.Windows.Point> a jeho jednoduché použití v jazyce XAML zahrnuje konvertor typu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-124">Even this simple type of <xref:System.Windows.Point> and its simple usage in XAML involve a type converter.</span></span> <span data-ttu-id="c7f67-125">V tomto případě se jedná o třídu <xref:System.Windows.PointConverter>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-125">In this case that is the class <xref:System.Windows.PointConverter>.</span></span>  
  
 <span data-ttu-id="c7f67-126">Konvertor typu pro <xref:System.Windows.Point> definované na úrovni třídy zjednodušuje použití značek u všech vlastností, které přijímají <xref:System.Windows.Point>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-126">The type converter for <xref:System.Windows.Point> defined at the class level streamlines the markup usages of all properties that take <xref:System.Windows.Point>.</span></span> <span data-ttu-id="c7f67-127">Bez převaděče typu tady budete potřebovat následující mnohem přesnější značky pro stejný příklad, jak je uvedeno výše:</span><span class="sxs-lookup"><span data-stu-id="c7f67-127">Without a type converter here, you would need the following much more verbose markup for the same example shown previously:</span></span>  

```xaml
<LinearGradientBrush>
  <LinearGradientBrush.StartPoint>
    <Point X="0" Y="0"/>
  </LinearGradientBrush.StartPoint>
  <LinearGradientBrush.EndPoint>
    <Point X="1" Y="1"/>
  </LinearGradientBrush.EndPoint>
</LinearGradientBrush>
 ```
  
 <span data-ttu-id="c7f67-128">Bez ohledu na to, zda použít převodový řetězec typu nebo podrobnou syntaxi, je všeobecně Volba stylu kódování.</span><span class="sxs-lookup"><span data-stu-id="c7f67-128">Whether to use the type conversion string or a more verbose equivalent syntax is generally a coding style choice.</span></span> <span data-ttu-id="c7f67-129">Váš pracovní postup nástroje jazyka XAML může mít vliv také na to, jak jsou hodnoty nastaveny.</span><span class="sxs-lookup"><span data-stu-id="c7f67-129">Your XAML tooling workflow might also influence how values are set.</span></span> <span data-ttu-id="c7f67-130">Některé nástroje XAML obvykle generují nejpřesnější formu značky, protože je snazší se zpátečním zobrazením návrháře nebo jeho vlastním mechanizmem serializace.</span><span class="sxs-lookup"><span data-stu-id="c7f67-130">Some XAML tools tend to emit the most verbose form of the markup because it is easier to round-trip to designer views or its own serialization mechanism.</span></span>  
  
 <span data-ttu-id="c7f67-131">Existující převaděče typů mohou být obecně zjišťovány u typů WPF a .NET Framework kontrolou třídy (nebo vlastnosti) pro přítomnost použité <xref:System.ComponentModel.TypeConverterAttribute>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-131">Existing type converters can generally be discovered on WPF and .NET Framework types by checking a class (or property) for the presence of an applied <xref:System.ComponentModel.TypeConverterAttribute>.</span></span> <span data-ttu-id="c7f67-132">Tento atribut pojmenuje třídu, která je podpůrného konvertoru typu pro hodnoty daného typu, pro účely XAML a také potenciálně jiné účely.</span><span class="sxs-lookup"><span data-stu-id="c7f67-132">This attribute will name the class that is the supporting type converter for values of that type, for XAML purposes as well as potentially other purposes.</span></span>  
  
### <a name="type-converters-and-markup-extensions"></a><span data-ttu-id="c7f67-133">Převaděče typů a rozšíření značek</span><span class="sxs-lookup"><span data-stu-id="c7f67-133">Type Converters and Markup Extensions</span></span>  
 <span data-ttu-id="c7f67-134">Rozšíření značek a převaděče typů plní kolmé role v souvislosti s chováním procesoru XAML a scénáři, na které jsou aplikovány.</span><span class="sxs-lookup"><span data-stu-id="c7f67-134">Markup extensions and type converters fill orthogonal roles in terms of XAML processor behavior and the scenarios that they are applied to.</span></span> <span data-ttu-id="c7f67-135">Přestože je kontext k dispozici pro použití rozšíření značek, chování konverze typu vlastností, kde rozšíření značek poskytuje hodnotu obecně není zaškrtnuto v implementacích rozšíření značek.</span><span class="sxs-lookup"><span data-stu-id="c7f67-135">Although context is available for markup extension usages, type conversion behavior of properties where a markup extension provides a value is generally is not checked in the markup extension implementations.</span></span> <span data-ttu-id="c7f67-136">Jinými slovy, i když rozšíření značek vrátí textový řetězec jako svůj `ProvideValue` výstup, chování konverze typu na tomto řetězci, jak je použito na konkrétní vlastnost nebo typ hodnoty vlastnosti není vyvoláno, obecně, účelem rozšíření označení je zpracování řetězce a vrácení objektu bez účasti na konvertoru typu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-136">In other words, even if a markup extension returns a text string as its `ProvideValue` output, type conversion behavior on that string as applied to a specific property or property value type is not invoked, Generally, the purpose of a markup extension is to process a string and return an object without any type converter involved.</span></span>  
  
 <span data-ttu-id="c7f67-137">Jednou z běžných situací, kdy je rozšíření značek nezbytné místo konvertoru typu, je vytvořit odkaz na objekt, který již existuje.</span><span class="sxs-lookup"><span data-stu-id="c7f67-137">One common situation where a markup extension is necessary rather than a type converter is to make a reference to an object that already exists.</span></span> <span data-ttu-id="c7f67-138">V optimálním případě konvertor bezstavového typu by mohl vygenerovat pouze novou instanci, která nemusí být žádoucí.</span><span class="sxs-lookup"><span data-stu-id="c7f67-138">At best, a stateless type converter could only generate a new instance, which might not be desirable.</span></span> <span data-ttu-id="c7f67-139">Další informace o rozšíření značek naleznete v tématu [rozšíření značek a WPF XAML](markup-extensions-and-wpf-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="c7f67-139">For more information on markup extensions, see [Markup Extensions and WPF XAML](markup-extensions-and-wpf-xaml.md).</span></span>  
  
### <a name="native-type-converters"></a><span data-ttu-id="c7f67-140">Převaděče nativního typu</span><span class="sxs-lookup"><span data-stu-id="c7f67-140">Native Type Converters</span></span>  
 <span data-ttu-id="c7f67-141">V WPF a .NET Framework implementaci analyzátoru XAML existují určité typy, které mají zpracování převodu nativního typu, ale nejsou typy, které by mohly být považovány za primitivní.</span><span class="sxs-lookup"><span data-stu-id="c7f67-141">In the WPF and .NET Framework implementation of the XAML parser, there are certain types that have native type conversion handling, yet are not types that might conventionally be thought of as primitives.</span></span> <span data-ttu-id="c7f67-142">Příklad takového typu je <xref:System.DateTime>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-142">An example of such a type is <xref:System.DateTime>.</span></span> <span data-ttu-id="c7f67-143">Důvod je založen na tom, jak funguje architektura .NET Framework: typ <xref:System.DateTime> je definován v knihovně Mscorlib, nejvíce základní knihovna v rozhraní .NET.</span><span class="sxs-lookup"><span data-stu-id="c7f67-143">The reason for this is based on how the .NET Framework architecture works: the type <xref:System.DateTime> is defined in mscorlib, the most basic library in .NET.</span></span> <span data-ttu-id="c7f67-144">u <xref:System.DateTime> není povolen atribut s atributem, který pochází z jiného sestavení, které zavádí závislost (<xref:System.ComponentModel.TypeConverterAttribute> je ze systému), takže běžný mechanismus zjišťování konvertoru typů nelze podporovat.</span><span class="sxs-lookup"><span data-stu-id="c7f67-144"><xref:System.DateTime> is not permitted to be attributed with an attribute that comes from another assembly that introduces a dependency (<xref:System.ComponentModel.TypeConverterAttribute> is from System) so the usual type converter discovery mechanism by attributing cannot be supported.</span></span> <span data-ttu-id="c7f67-145">Místo toho má analyzátor XAML seznam typů, které vyžadují takové nativní zpracování a zpracovává je podobně jak jsou zpracovávány skutečné primitivy.</span><span class="sxs-lookup"><span data-stu-id="c7f67-145">Instead, the XAML parser has a list of types that need such native processing and processes these similarly to how the true primitives are processed.</span></span> <span data-ttu-id="c7f67-146">(V případě <xref:System.DateTime> to zahrnuje volání <xref:System.DateTime.Parse%2A>.)</span><span class="sxs-lookup"><span data-stu-id="c7f67-146">(In the case of <xref:System.DateTime> this involves a call to <xref:System.DateTime.Parse%2A>.)</span></span>  
  
<a name="Implementing_a_Type_Converter"></a>   
## <a name="implementing-a-type-converter"></a><span data-ttu-id="c7f67-147">Implementace konvertoru typu</span><span class="sxs-lookup"><span data-stu-id="c7f67-147">Implementing a Type Converter</span></span>  
  
### <a name="typeconverter"></a><span data-ttu-id="c7f67-148">TypeConverter</span><span class="sxs-lookup"><span data-stu-id="c7f67-148">TypeConverter</span></span>  
 <span data-ttu-id="c7f67-149">V předchozím příkladu <xref:System.Windows.Point> byla uvedena <xref:System.Windows.PointConverter> třídy.</span><span class="sxs-lookup"><span data-stu-id="c7f67-149">In the <xref:System.Windows.Point> example given previously, the class <xref:System.Windows.PointConverter> was mentioned.</span></span> <span data-ttu-id="c7f67-150">Pro implementaci rozhraní .NET jazyka XAML jsou všechny převaděče typu používané pro účely XAML třídy odvozené od základní třídy <xref:System.ComponentModel.TypeConverter>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-150">For .NET implementations of XAML, all type converters that are used for XAML purposes are classes that derive from the base class <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="c7f67-151"><xref:System.ComponentModel.TypeConverter> třída existovala ve verzích .NET Framework, které předcházejí existenci XAML; jedním z jeho původních použití bylo poskytnout převod řetězce pro dialogy vlastností v vizuálních návrhářích.</span><span class="sxs-lookup"><span data-stu-id="c7f67-151">The <xref:System.ComponentModel.TypeConverter> class existed in versions of .NET Framework that precede the existence of XAML; one of its original usages was to provide string conversion for property dialogs in visual designers.</span></span> <span data-ttu-id="c7f67-152">Pro XAML je role <xref:System.ComponentModel.TypeConverter> rozbalena tak, aby zahrnovala základní třídu pro převody řetězců a řetězce, které umožňují analýzu hodnoty řetězcového atributu a případně zpracování hodnoty za běhu konkrétní vlastnosti objektu zpět do řetězce pro serializaci jako atributu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-152">For XAML, the role of <xref:System.ComponentModel.TypeConverter> is expanded to include being the base class for to-string and from-string conversions that enable parsing a string attribute value, and possibly processing a run-time value of a particular object property back into a string for serialization as an attribute.</span></span>  
  
 <span data-ttu-id="c7f67-153"><xref:System.ComponentModel.TypeConverter> definuje čtyři členy, které jsou relevantní pro převod na a z řetězců pro účely zpracování XAML:</span><span class="sxs-lookup"><span data-stu-id="c7f67-153"><xref:System.ComponentModel.TypeConverter> defines four members that are relevant for converting to and from strings for XAML processing purposes:</span></span>  
  
- <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>  
  
- <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A>  
  
- <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>  
  
- <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>  
  
 <span data-ttu-id="c7f67-154">Nejdůležitější způsob je <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-154">Of these, the most important method is <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>.</span></span> <span data-ttu-id="c7f67-155">Tato metoda převede vstupní řetězec na požadovaný typ objektu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-155">This method converts the input string to the required object type.</span></span> <span data-ttu-id="c7f67-156">Výhradně řečeno, <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> metoda může být implementována pro převod mnohem širšího rozsahu typů do zamýšleného cílového typu konvertoru a slouží k tomu účelem, který rozšiřuje rámec XAML, jako je podpora převodů za běhu, ale pro účely XAML je pouze cesta kódu, která může zpracovat <xref:System.String> vstup, který se týká.</span><span class="sxs-lookup"><span data-stu-id="c7f67-156">Strictly speaking, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> method could be implemented to convert a much wider range of types into the converter's intended destination type, and thus serve purposes that extend beyond XAML such as supporting run-time conversions, but for XAML purposes it is only the code path that can process a <xref:System.String> input that matters.</span></span>  
  
 <span data-ttu-id="c7f67-157">Další nejdůležitější metodou je <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-157">The next most important method is <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span></span> <span data-ttu-id="c7f67-158">Pokud je aplikace převedena na reprezentace kódu (například pokud je uložena do souboru XAML jako soubor), <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> zodpovídá za vytváření reprezentace kódu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-158">If an application is converted to a markup representation (for instance, if it is saved to XAML as a file), <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> is responsible for producing a markup representation.</span></span> <span data-ttu-id="c7f67-159">V tomto případě je cesta kódu, která je v jazyce XAML, v případě, že předáváte `destinationType` <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-159">In this case, the code path that matters for XAML is when you pass a `destinationType` of <xref:System.String> .</span></span>  
  
 <span data-ttu-id="c7f67-160"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> a <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> jsou metody podpory, které se používají, když se služba dotazuje na možnosti implementace <xref:System.ComponentModel.TypeConverter>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-160"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> and <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> are support methods that are used when a service queries the capabilities of the <xref:System.ComponentModel.TypeConverter> implementation.</span></span> <span data-ttu-id="c7f67-161">Tyto metody je nutné implementovat pro návrat `true` pro případy specifické pro typ, které odpovídají metody převodu vašeho převaděče.</span><span class="sxs-lookup"><span data-stu-id="c7f67-161">You must implement these methods to return `true` for type-specific cases that the equivalent conversion methods of your converter support.</span></span> <span data-ttu-id="c7f67-162">Pro účely XAML to obecně znamená <xref:System.String> typ.</span><span class="sxs-lookup"><span data-stu-id="c7f67-162">For XAML purposes, this generally means the <xref:System.String> type.</span></span>  
  
### <a name="culture-information-and-type-converters-for-xaml"></a><span data-ttu-id="c7f67-163">Informace o jazykové verzi a převaděče typů pro jazyk XAML</span><span class="sxs-lookup"><span data-stu-id="c7f67-163">Culture Information and Type Converters for XAML</span></span>  

 <span data-ttu-id="c7f67-164">Každá implementace <xref:System.ComponentModel.TypeConverter> může mít vlastní výklad toho, co představuje platný řetězec pro převod, a může také použít nebo ignorovat popis typu předaný jako parametry.</span><span class="sxs-lookup"><span data-stu-id="c7f67-164">Each <xref:System.ComponentModel.TypeConverter> implementation can have its own interpretation of what constitutes a valid string for a conversion, and can also use or ignore the type description passed as parameters.</span></span> <span data-ttu-id="c7f67-165">Je důležité zvážit v souvislosti s převodem typu kultury a XAML.</span><span class="sxs-lookup"><span data-stu-id="c7f67-165">There is an important consideration with regard to culture and XAML type conversion.</span></span> <span data-ttu-id="c7f67-166">Použití lokalizovatelných řetězců jako hodnot atributů je v jazyce XAML zcela podporováno.</span><span class="sxs-lookup"><span data-stu-id="c7f67-166">Using localizable strings as attribute values is entirely supported by XAML.</span></span> <span data-ttu-id="c7f67-167">Ale použití tohoto lokalizovatelnýho řetězce jako vstupu konvertoru typu s konkrétními jazykovými požadavky není podporováno, protože převaděče typů pro hodnoty atributů XAML zahrnují chování při analýze pevného jazyka, a to pomocí `en-US` jazykové verze.</span><span class="sxs-lookup"><span data-stu-id="c7f67-167">But using that localizable string as type converter input with specific culture requirements is not supported, because type converters for XAML attribute values involve a necessarily fixed-language parsing behavior, using `en-US` culture.</span></span> <span data-ttu-id="c7f67-168">Další informace o návrhových příčinách tohoto omezení najdete v části specifikace jazyka XAML ([\[MS-XAML\]](https://download.microsoft.com/download/0/A/6/0A6F7755-9AF5-448B-907D-13985ACCF53E/[MS-XAML].pdf).</span><span class="sxs-lookup"><span data-stu-id="c7f67-168">For more information on the design reasons for this restriction, you should consult the XAML language specification ([\[MS-XAML\]](https://download.microsoft.com/download/0/A/6/0A6F7755-9AF5-448B-907D-13985ACCF53E/[MS-XAML].pdf).</span></span>  
  
 <span data-ttu-id="c7f67-169">Jako příklad, kde může být jazyková verze příčinou problému, některé jazykové verze používají čárku jako oddělovač desetinných míst pro čísla.</span><span class="sxs-lookup"><span data-stu-id="c7f67-169">As an example where culture can be an issue, some cultures use a comma as their decimal point delimiter for numbers.</span></span> <span data-ttu-id="c7f67-170">Dojde k kolizi s chováním, které mají mnoho převaděčů typu XAML jazyka WPF, což znamená použití čárky jako oddělovače (na základě historických předchůdců, jako jsou například Common X, Y nebo seznam oddělených čárkami).</span><span class="sxs-lookup"><span data-stu-id="c7f67-170">This will collide with the behavior that many of the WPF XAML type converters have, which is to use a comma as a delimiter (based on historical precedents such as the common X,Y form, or comma delimited lists).</span></span> <span data-ttu-id="c7f67-171">I v případě, že předá jazyková verze v okolním jazyce XAML (nastavení `Language` nebo `xml:lang` na jazykovou verzi `sl-SI`, příklad jazykové verze, která používá čárku pro desetinné místo), problém nevyřeší.</span><span class="sxs-lookup"><span data-stu-id="c7f67-171">Even passing a culture in the surrounding XAML (setting `Language` or `xml:lang` to the `sl-SI` culture, an example of a culture that uses a comma for decimal in this way) does not solve the issue.</span></span>  
  
### <a name="implementing-convertfrom"></a><span data-ttu-id="c7f67-172">Implementace ConvertFrom</span><span class="sxs-lookup"><span data-stu-id="c7f67-172">Implementing ConvertFrom</span></span>  
 <span data-ttu-id="c7f67-173">Aby bylo možné použít <xref:System.ComponentModel.TypeConverter> implementaci, která podporuje XAML, musí <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> metoda pro tento konvertor přijmout řetězec jako parametr `value`.</span><span class="sxs-lookup"><span data-stu-id="c7f67-173">To be usable as a <xref:System.ComponentModel.TypeConverter> implementation that supports XAML, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> method for that converter must accept a string as the `value` parameter.</span></span> <span data-ttu-id="c7f67-174">Pokud byl řetězec v platném formátu a lze jej převést pomocí <xref:System.ComponentModel.TypeConverter> implementace, pak vrácený objekt musí podporovat přetypování na typ očekávaný vlastností.</span><span class="sxs-lookup"><span data-stu-id="c7f67-174">If the string was in valid format, and can be converted by the <xref:System.ComponentModel.TypeConverter> implementation, then the returned object must support a cast to the type expected by the property.</span></span> <span data-ttu-id="c7f67-175">V opačném případě musí implementace <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> vracet `null`.</span><span class="sxs-lookup"><span data-stu-id="c7f67-175">Otherwise, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementation must return `null`.</span></span>  
  
 <span data-ttu-id="c7f67-176">Každá implementace <xref:System.ComponentModel.TypeConverter> může mít vlastní výklad toho, co představuje platný řetězec pro převod, a může také použít nebo ignorovat popis typu nebo kontexty jazykové verze předané jako parametry.</span><span class="sxs-lookup"><span data-stu-id="c7f67-176">Each <xref:System.ComponentModel.TypeConverter> implementation can have its own interpretation of what constitutes a valid string for a conversion, and can also use or ignore the type description or culture contexts passed as parameters.</span></span> <span data-ttu-id="c7f67-177">Zpracování XAML jazyka WPF však nemusí předat hodnoty do kontextu popisu typu ve všech případech a také nemusí předávat jazykové verzi na základě `xml:lang`.</span><span class="sxs-lookup"><span data-stu-id="c7f67-177">However, the WPF XAML processing might not pass values to the type description context in all cases, and also might not pass culture based on `xml:lang`.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c7f67-178">Nepoužívejte znaky složených závorek, zejména {, jako možný prvek formátu řetězce.</span><span class="sxs-lookup"><span data-stu-id="c7f67-178">Do not use the curly brace characters, particularly {, as a possible element of your string format.</span></span> <span data-ttu-id="c7f67-179">Tyto znaky jsou vyhrazené jako vstupní a výstupní sekvence pro rozšíření kódu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-179">These characters are reserved as the entry and exit for a markup extension sequence.</span></span>  
  
### <a name="implementing-convertto"></a><span data-ttu-id="c7f67-180">Implementace ConvertTo</span><span class="sxs-lookup"><span data-stu-id="c7f67-180">Implementing ConvertTo</span></span>  
 <span data-ttu-id="c7f67-181"><xref:System.ComponentModel.TypeConverter.ConvertTo%2A> se potenciálně používá pro podporu serializace.</span><span class="sxs-lookup"><span data-stu-id="c7f67-181"><xref:System.ComponentModel.TypeConverter.ConvertTo%2A> is potentially used for serialization support.</span></span> <span data-ttu-id="c7f67-182">Podpora serializace prostřednictvím <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> pro váš vlastní typ a konvertor typu není absolutní požadavek.</span><span class="sxs-lookup"><span data-stu-id="c7f67-182">Serialization support through <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> for your custom type and its type converter is not an absolute requirement.</span></span> <span data-ttu-id="c7f67-183">Nicméně pokud implementujete ovládací prvek nebo použijete serializaci jako součást funkcí nebo návrh vaší třídy, měli byste implementovat <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-183">However, if you are implementing a control, or using serialization of as part of the features or design of your class, you should implement <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span></span>  
  
 <span data-ttu-id="c7f67-184">Aby bylo možné použít <xref:System.ComponentModel.TypeConverter> implementaci podporující jazyk XAML, musí metoda <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> pro tento konvertor přijmout instanci typu (nebo hodnotu) podporovanou jako parametr `value`.</span><span class="sxs-lookup"><span data-stu-id="c7f67-184">To be usable as a <xref:System.ComponentModel.TypeConverter> implementation that supports XAML, the <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> method for that converter must accept an instance of the type (or a value) being supported as the `value` parameter.</span></span> <span data-ttu-id="c7f67-185">Pokud je parametr `destinationType` typu <xref:System.String>, vrácený objekt musí být schopný přetypovat jako <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-185">When the `destinationType` parameter is the type <xref:System.String>, then the returned object must be able to be cast as <xref:System.String>.</span></span> <span data-ttu-id="c7f67-186">Vrácený řetězec musí představovat serializovanou hodnotu `value`.</span><span class="sxs-lookup"><span data-stu-id="c7f67-186">The returned string must represent a serialized value of `value`.</span></span> <span data-ttu-id="c7f67-187">V ideálním případě by měl být zvolený formát serializace schopný generovat stejnou hodnotu, pokud byl tento řetězec předán do <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementace stejného převaděče bez významné ztráty informací.</span><span class="sxs-lookup"><span data-stu-id="c7f67-187">Ideally, the serialization format you choose should be capable of generating the same value if that string were passed to the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementation of the same converter, without significant loss of information.</span></span>  
  
 <span data-ttu-id="c7f67-188">Pokud hodnotu nelze serializovat nebo převaděč nepodporuje serializaci, <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> implementace musí vracet `null`a je povoleno vyvolat výjimku v tomto případě.</span><span class="sxs-lookup"><span data-stu-id="c7f67-188">If the value cannot be serialized, or the converter does not support serialization, the <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> implementation must return `null`, and is permitted to throw an exception in this case.</span></span> <span data-ttu-id="c7f67-189">Ale pokud vyvoláte výjimky, měli byste ohlásit neschopnost použít tento převod jako součást implementace <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> tak, aby se v souladu s osvědčenými postupy kontroly <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> nejprve zabránilo výjimkám.</span><span class="sxs-lookup"><span data-stu-id="c7f67-189">But if you do throw exceptions, you should report the inability to use that conversion as part of your <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementation so that the best practice of checking with <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> first to avoid exceptions is supported.</span></span>  
  
 <span data-ttu-id="c7f67-190">Pokud `destinationType` parametr není typu <xref:System.String>, můžete zvolit vlastní zpracování převaděče.</span><span class="sxs-lookup"><span data-stu-id="c7f67-190">If `destinationType` parameter is not of type <xref:System.String>, you can choose your own converter handling.</span></span> <span data-ttu-id="c7f67-191">Obvykle byste se měli vrátit ke zpracování základní implementace, které basemost <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> vyvolá konkrétní výjimku.</span><span class="sxs-lookup"><span data-stu-id="c7f67-191">Typically, you would revert to base implementation handling, which in the basemost <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> raises a specific exception.</span></span>  
  
### <a name="implementing-canconvertto"></a><span data-ttu-id="c7f67-192">Implementace CanConvertTo</span><span class="sxs-lookup"><span data-stu-id="c7f67-192">Implementing CanConvertTo</span></span>  
 <span data-ttu-id="c7f67-193">Vaše implementace <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> by měla vracet `true` pro `destinationType` typu <xref:System.String>a jinak podložit základní implementaci.</span><span class="sxs-lookup"><span data-stu-id="c7f67-193">Your <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementation should return `true` for `destinationType` of type <xref:System.String>, and otherwise defer to the base implementation.</span></span>  
  
### <a name="implementing-canconvertfrom"></a><span data-ttu-id="c7f67-194">Implementace CanConvertFrom</span><span class="sxs-lookup"><span data-stu-id="c7f67-194">Implementing CanConvertFrom</span></span>  
 <span data-ttu-id="c7f67-195">Vaše implementace <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> by měla vracet `true` pro `sourceType` typu <xref:System.String>a jinak podložit základní implementaci.</span><span class="sxs-lookup"><span data-stu-id="c7f67-195">Your <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> implementation should return `true` for `sourceType` of type <xref:System.String>, and otherwise defer to the base implementation.</span></span>  
  
<a name="Applying_the_TypeConverterAttribute"></a>   
## <a name="applying-the-typeconverterattribute"></a><span data-ttu-id="c7f67-196">Použití TypeConverterAttribute</span><span class="sxs-lookup"><span data-stu-id="c7f67-196">Applying the TypeConverterAttribute</span></span>  
 <span data-ttu-id="c7f67-197">Aby byl váš vlastní konvertor typu použit jako převaděč jako typ pro vlastní třídu procesorem XAML, je nutné použít <xref:System.ComponentModel.TypeConverterAttribute> pro definici vaší třídy.</span><span class="sxs-lookup"><span data-stu-id="c7f67-197">In order for your custom type converter to be used as the acting type converter for a custom class by a XAML processor, you must apply the <xref:System.ComponentModel.TypeConverterAttribute> to your class definition.</span></span> <span data-ttu-id="c7f67-198"><xref:System.ComponentModel.TypeConverterAttribute.ConverterTypeName%2A>, které zadáte prostřednictvím atributu, musí být název typu vašeho převaděče vlastního typu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-198">The <xref:System.ComponentModel.TypeConverterAttribute.ConverterTypeName%2A> that you specify through the attribute must be the type name of your custom type converter.</span></span> <span data-ttu-id="c7f67-199">Při použití tohoto atributu, když procesor XAML zpracovává hodnoty, kde typ vlastnosti používá vlastní typ třídy, může vstupní řetězce a vracet instance objektů.</span><span class="sxs-lookup"><span data-stu-id="c7f67-199">With this attribute applied, when a XAML processor handles values where the property type uses your custom class type, it can input strings and return object instances.</span></span>  
  
 <span data-ttu-id="c7f67-200">Můžete také zadat konvertor typu na základě jednotlivých vlastností.</span><span class="sxs-lookup"><span data-stu-id="c7f67-200">You can also provide a type converter on a per-property basis.</span></span> <span data-ttu-id="c7f67-201">Namísto použití <xref:System.ComponentModel.TypeConverterAttribute> pro definici třídy, použijte ji pro definici vlastnosti (hlavní definice, nikoli `get`/`set` implementacemi v rámci IT).</span><span class="sxs-lookup"><span data-stu-id="c7f67-201">Instead of applying a <xref:System.ComponentModel.TypeConverterAttribute> to the class definition, apply it to a property definition (the main definition, not the `get`/`set` implementations within it).</span></span> <span data-ttu-id="c7f67-202">Typ vlastnosti se musí shodovat s typem, který je zpracován vaším vlastním převaděčem typu.</span><span class="sxs-lookup"><span data-stu-id="c7f67-202">The type of the property must match the type that is processed by your custom type converter.</span></span> <span data-ttu-id="c7f67-203">Při použití tohoto atributu, pokud procesor XAML zpracovává hodnoty této vlastnosti, může zpracovat vstupní řetězce a vracet instance objektů.</span><span class="sxs-lookup"><span data-stu-id="c7f67-203">With this attribute applied, when a XAML processor handles values of that property, it can process input strings and return object instances.</span></span> <span data-ttu-id="c7f67-204">Technika konvertoru typu pro jednotlivé vlastnosti je obzvláště užitečná, pokud se rozhodnete použít typ vlastnosti z Microsoft .NET Framework nebo z jiné knihovny, kde nemůžete určit definici třídy a nelze použít <xref:System.ComponentModel.TypeConverterAttribute>.</span><span class="sxs-lookup"><span data-stu-id="c7f67-204">The per-property type converter technique is particularly useful if you choose to use a property type from Microsoft .NET Framework or from some other library where you cannot control the class definition and cannot apply a <xref:System.ComponentModel.TypeConverterAttribute> there.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c7f67-205">Viz také</span><span class="sxs-lookup"><span data-stu-id="c7f67-205">See also</span></span>

- <xref:System.ComponentModel.TypeConverter>
- [<span data-ttu-id="c7f67-206">Přehled XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="c7f67-206">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="c7f67-207">Rozšíření značek a WPF XAML</span><span class="sxs-lookup"><span data-stu-id="c7f67-207">Markup Extensions and WPF XAML</span></span>](markup-extensions-and-wpf-xaml.md)
- [<span data-ttu-id="c7f67-208">Podrobná syntaxe XAML</span><span class="sxs-lookup"><span data-stu-id="c7f67-208">XAML Syntax In Detail</span></span>](xaml-syntax-in-detail.md)
