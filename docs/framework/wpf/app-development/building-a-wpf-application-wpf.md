---
title: Kompilace aplikace
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WPF application [WPF], building
ms.assetid: a58696fd-bdad-4b55-9759-136dfdf8b91c
ms.openlocfilehash: 00c76dfcdcedc7ceaefaaae785368f8b343457a7
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/24/2020
ms.locfileid: "76744764"
---
# <a name="compile-a-wpf-application"></a><span data-ttu-id="07d49-102">Kompilace aplikace WPF</span><span class="sxs-lookup"><span data-stu-id="07d49-102">Compile a WPF Application</span></span>

<span data-ttu-id="07d49-103">Aplikace Windows Presentation Foundation (WPF) mohou být sestaveny jako .NET Framework spustitelné soubory (. exe), knihovny (. dll) nebo kombinace obou typů sestavení.</span><span class="sxs-lookup"><span data-stu-id="07d49-103">Windows Presentation Foundation (WPF) applications can be built as .NET Framework executables (.exe), libraries (.dll), or a combination of both types of assemblies.</span></span> <span data-ttu-id="07d49-104">Toto téma ukazuje, jak sestavit aplikace WPF a popisuje klíčové kroky v procesu sestavení.</span><span class="sxs-lookup"><span data-stu-id="07d49-104">This topic introduces how to build WPF applications and describes the key steps in the build process.</span></span>

<a name="Building_a_WPF_Application_using_Command_Line"></a>

## <a name="building-a-wpf-application"></a><span data-ttu-id="07d49-105">Sestavení aplikace WPF</span><span class="sxs-lookup"><span data-stu-id="07d49-105">Building a WPF Application</span></span>

<span data-ttu-id="07d49-106">Aplikace WPF může být zkompilována následujícími způsoby:</span><span class="sxs-lookup"><span data-stu-id="07d49-106">A WPF application can be compiled in the following ways:</span></span>

- <span data-ttu-id="07d49-107">Příkazový řádek.</span><span class="sxs-lookup"><span data-stu-id="07d49-107">Command-line.</span></span> <span data-ttu-id="07d49-108">Aplikace musí obsahovat pouze kód (žádný XAML) a definiční soubor aplikace.</span><span class="sxs-lookup"><span data-stu-id="07d49-108">The application must contain only code (no XAML) and an application definition file.</span></span> <span data-ttu-id="07d49-109">Další informace najdete v tématu [sestavování z příkazového řádku pomocí CSc. exe](../../../csharp/language-reference/compiler-options/command-line-building-with-csc-exe.md) nebo při [sestavování z příkazového řádku (Visual Basic)](../../../visual-basic/reference/command-line-compiler/building-from-the-command-line.md).</span><span class="sxs-lookup"><span data-stu-id="07d49-109">For more information, see [Command-line Building With csc.exe](../../../csharp/language-reference/compiler-options/command-line-building-with-csc-exe.md) or [Building from the Command Line (Visual Basic)](../../../visual-basic/reference/command-line-compiler/building-from-the-command-line.md).</span></span>

- <span data-ttu-id="07d49-110">Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="07d49-110">Microsoft Build Engine (MSBuild).</span></span> <span data-ttu-id="07d49-111">Kromě kódu a souborů XAML musí aplikace obsahovat soubor projektu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="07d49-111">In addition to the code and XAML files, the application must contain an MSBuild project file.</span></span> <span data-ttu-id="07d49-112">Další informace naleznete v tématu "MSBuild".</span><span class="sxs-lookup"><span data-stu-id="07d49-112">For more information, see "MSBuild".</span></span>

- <span data-ttu-id="07d49-113">Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="07d49-113">Visual Studio.</span></span> <span data-ttu-id="07d49-114">Visual Studio je integrované vývojové prostředí, které kompiluje aplikace WPF pomocí nástroje MSBuild a obsahuje vizuálního návrháře pro vytváření uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="07d49-114">Visual Studio is an integrated development environment that compiles WPF applications with MSBuild and includes a visual designer for creating UI.</span></span> <span data-ttu-id="07d49-115">Další informace najdete v tématu [zápis a Správa kódu pomocí sady Visual Studio](/visualstudio/ide/index-writing-code) a [Návrh XAML v aplikaci Visual Studio](/visualstudio/xaml-tools/designing-xaml-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="07d49-115">For more information, see [Write and manage code using Visual Studio](/visualstudio/ide/index-writing-code) and [Design XAML in Visual Studio](/visualstudio/xaml-tools/designing-xaml-in-visual-studio).</span></span>

<a name="The_Windows_Presentation_Foundation_Build_Pipeline"></a>

## <a name="wpf-build-pipeline"></a><span data-ttu-id="07d49-116">Kanál sestavení WPF</span><span class="sxs-lookup"><span data-stu-id="07d49-116">WPF Build Pipeline</span></span>

<span data-ttu-id="07d49-117">Při sestavení projektu WPF je vyvolána kombinace cílů specifických pro jazyk a WPF.</span><span class="sxs-lookup"><span data-stu-id="07d49-117">When a WPF project is built, the combination of language-specific and WPF-specific targets are invoked.</span></span> <span data-ttu-id="07d49-118">Proces provádění těchto cílů se nazývá kanál sestavení a klíčové kroky jsou znázorněny na následujícím obrázku.</span><span class="sxs-lookup"><span data-stu-id="07d49-118">The process of executing these targets is called the build pipeline, and the key steps are illustrated by the following figure.</span></span>

<span data-ttu-id="07d49-119">![Proces sestavení WPF](./media/wpfbuildsystem-figure1.png "WPFBuildSystem_Figure1")</span><span class="sxs-lookup"><span data-stu-id="07d49-119">![WPF build process](./media/wpfbuildsystem-figure1.png "WPFBuildSystem_Figure1")</span></span>

<a name="Pre_Build_Initializations"></a>

### <a name="pre-build-initializations"></a><span data-ttu-id="07d49-120">Inicializace před sestavením</span><span class="sxs-lookup"><span data-stu-id="07d49-120">Pre-Build Initializations</span></span>

<span data-ttu-id="07d49-121">Před sestavením nástroj MSBuild určí umístění důležitých nástrojů a knihoven, včetně následujících:</span><span class="sxs-lookup"><span data-stu-id="07d49-121">Before building, MSBuild determines the location of important tools and libraries, including the following:</span></span>

- <span data-ttu-id="07d49-122">.NET Framework.</span><span class="sxs-lookup"><span data-stu-id="07d49-122">The .NET Framework.</span></span>

- <span data-ttu-id="07d49-123">Adresáře Windows SDK.</span><span class="sxs-lookup"><span data-stu-id="07d49-123">The Windows SDK directories.</span></span>

- <span data-ttu-id="07d49-124">Umístění referenčních sestavení WPF.</span><span class="sxs-lookup"><span data-stu-id="07d49-124">The location of WPF reference assemblies.</span></span>

- <span data-ttu-id="07d49-125">Vlastnost pro cesty pro vyhledávání sestavení.</span><span class="sxs-lookup"><span data-stu-id="07d49-125">The property for the assembly search paths.</span></span>

<span data-ttu-id="07d49-126">První umístění, kde MSBuild vyhledává sestavení, je referenční adresář sestavení (%ProgramFiles%\Reference Assemblies\Microsoft\Framework\v3.0\\).</span><span class="sxs-lookup"><span data-stu-id="07d49-126">The first location where MSBuild searches for assemblies is the reference assembly directory (%ProgramFiles%\Reference Assemblies\Microsoft\Framework\v3.0\\).</span></span> <span data-ttu-id="07d49-127">Během tohoto kroku proces sestavení také inicializuje různé vlastnosti a skupiny položek a provede všechny potřebné čisticí operace.</span><span class="sxs-lookup"><span data-stu-id="07d49-127">During this step, the build process also initializes the various properties and item groups and performs any required cleanup work.</span></span>

<a name="Resolving_references"></a>

### <a name="resolving-references"></a><span data-ttu-id="07d49-128">Řešení odkazů</span><span class="sxs-lookup"><span data-stu-id="07d49-128">Resolving References</span></span>

<span data-ttu-id="07d49-129">Proces sestavení vyhledá a vytvoří vazby sestavení potřebných k sestavení projektu aplikace.</span><span class="sxs-lookup"><span data-stu-id="07d49-129">The build process locates and binds the assemblies required to build the application project.</span></span> <span data-ttu-id="07d49-130">Tato logika je obsažena v úloze `ResolveAssemblyReference`.</span><span class="sxs-lookup"><span data-stu-id="07d49-130">This logic is contained in the `ResolveAssemblyReference` task.</span></span> <span data-ttu-id="07d49-131">Všechna sestavení deklarovaná jako `Reference` v souboru projektu jsou k dispozici pro úlohu spolu s informacemi o cestách pro vyhledávání a metadatech na sestaveních, která jsou již v systému nainstalována.</span><span class="sxs-lookup"><span data-stu-id="07d49-131">All assemblies declared as `Reference` in the project file are provided to the task along with information on the search paths and metadata on assemblies already installed on the system.</span></span> <span data-ttu-id="07d49-132">Úkol vyhledá sestavení a používá metadata nainstalovaného sestavení k vyfiltrování těchto základních sestavení WPF, která se nemusí zobrazit ve výstupních manifestech.</span><span class="sxs-lookup"><span data-stu-id="07d49-132">The task looks up assemblies and uses the installed assembly's metadata to filter out those core WPF assemblies that need not show up in the output manifests.</span></span> <span data-ttu-id="07d49-133">To se provádí, aby se zabránilo redundantním informacím v manifestech ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="07d49-133">This is done to avoid redundant information in the ClickOnce manifests.</span></span> <span data-ttu-id="07d49-134">Například vzhledem k tomu, že PresentationFramework. dll lze považovat za zástupce aplikace založené na a pro WPF a vzhledem k tomu, že všechna sestavení WPF existují na stejném umístění na každém počítači, který má .NET Framework nainstalován, není nutné zahrnout vše informace o všech .NET Framework odkazujících na sestavení v manifestech.</span><span class="sxs-lookup"><span data-stu-id="07d49-134">For example, since PresentationFramework.dll can be considered representative of an application built on and for WPF, and since all WPF assemblies exist at the same location on every machine that has the .NET Framework installed, there's no need to include all information on all .NET Framework reference assemblies in the manifests.</span></span>

<a name="Markup_Compilation___Pass_1"></a>

### <a name="markup-compilationpass-1"></a><span data-ttu-id="07d49-135">Kompilace značek – Pass 1</span><span class="sxs-lookup"><span data-stu-id="07d49-135">Markup Compilation—Pass 1</span></span>

<span data-ttu-id="07d49-136">V tomto kroku [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] soubory analyzovány a kompilovány tak, aby modul runtime nestrávil čas analýzy XML a ověřování hodnot vlastností.</span><span class="sxs-lookup"><span data-stu-id="07d49-136">In this step, [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files are parsed and compiled so that the runtime does not spend time parsing XML and validating property values.</span></span> <span data-ttu-id="07d49-137">Kompilovaný [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] soubor je předem vydaný, takže při spuštění by měl být v době běhu mnohem rychlejší než načtení souboru [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="07d49-137">The compiled [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file is pre-tokenized so that, at run time, loading it should be much faster than loading a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file.</span></span>

<span data-ttu-id="07d49-138">Během tohoto kroku probíhají následující aktivity pro každý [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] soubor, který je `Page` položkou sestavení:</span><span class="sxs-lookup"><span data-stu-id="07d49-138">During this step, the following activities take place for every [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file that is a `Page` build item:</span></span>

1. <span data-ttu-id="07d49-139">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] soubor je analyzován kompilátorem značek.</span><span class="sxs-lookup"><span data-stu-id="07d49-139">The [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file is parsed by the markup compiler.</span></span>

2. <span data-ttu-id="07d49-140">Pro tento [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] je vytvořena kompilovaná reprezentace a zkopírována do složky obj\Release.</span><span class="sxs-lookup"><span data-stu-id="07d49-140">A compiled representation is created for that [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and copied to the obj\Release folder.</span></span>

3. <span data-ttu-id="07d49-141">Je vytvořena reprezentace CodeDOM nové částečné třídy a zkopírována do složky obj\Release.</span><span class="sxs-lookup"><span data-stu-id="07d49-141">A CodeDOM representation of a new partial class is created and copied to the obj\Release folder.</span></span>

<span data-ttu-id="07d49-142">Kromě toho je pro každý [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] soubor vygenerován soubor kódu specifický pro daný jazyk.</span><span class="sxs-lookup"><span data-stu-id="07d49-142">In addition, a language-specific code file is generated for every [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file.</span></span> <span data-ttu-id="07d49-143">Například pro stránku Page1. XAML v projektu Visual Basic je vygenerována Page1. g. vb; pro stránku Page1. XAML v C# projektu je vygenerována Page1.g.cs.</span><span class="sxs-lookup"><span data-stu-id="07d49-143">For example, for a Page1.xaml page in a Visual Basic project, a Page1.g.vb is generated; for a Page1.xaml page in a C# project, a Page1.g.cs is generated.</span></span> <span data-ttu-id="07d49-144">". G" v názvu souboru označuje soubor je generovaný kód, který má deklaraci částečné třídy pro element nejvyšší úrovně souboru označení (například `Page` nebo `Window`).</span><span class="sxs-lookup"><span data-stu-id="07d49-144">The ".g" in the file name indicates the file is generated code that has a partial class declaration for the top-level element of the markup file (such as `Page` or `Window`).</span></span> <span data-ttu-id="07d49-145">Třída je deklarována s modifikátorem `partial` v C# (`Extends` ve Visual Basic) k označení, že existuje jiná deklarace pro třídu jinde, obvykle v souboru kódu na pozadí Page1.XAML.cs.</span><span class="sxs-lookup"><span data-stu-id="07d49-145">The class is declared with the `partial` modifier in C# (`Extends` in Visual Basic) to indicate there is another declaration for the class elsewhere, usually in the code-behind file Page1.xaml.cs.</span></span>

<span data-ttu-id="07d49-146">Částečná třída sahá od příslušné základní třídy (například <xref:System.Windows.Controls.Page> pro stránku) a implementuje rozhraní <xref:System.Windows.Markup.IComponentConnector?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="07d49-146">The partial class extends from the appropriate base class (such as <xref:System.Windows.Controls.Page> for a page) and implements the <xref:System.Windows.Markup.IComponentConnector?displayProperty=nameWithType> interface.</span></span> <span data-ttu-id="07d49-147">Rozhraní <xref:System.Windows.Markup.IComponentConnector> obsahuje metody pro inicializaci komponenty a připojení názvů a událostí k prvkům v jejím obsahu.</span><span class="sxs-lookup"><span data-stu-id="07d49-147">The <xref:System.Windows.Markup.IComponentConnector> interface has methods to initialize a component and connect names and events on elements in its content.</span></span> <span data-ttu-id="07d49-148">V důsledku toho generovaný soubor kódu má implementaci metody jako následující:</span><span class="sxs-lookup"><span data-stu-id="07d49-148">Consequently, the generated code file has a method implementation like the following:</span></span>

```csharp
public void InitializeComponent() {
    if (_contentLoaded) {
        return;
    }
    _contentLoaded = true;
    System.Uri resourceLocater =
        new System.Uri(
            "window1.xaml",
            System.UriKind.RelativeOrAbsolute);
    System.Windows.Application.LoadComponent(this, resourceLocater);
}
```

```vb
Public Sub InitializeComponent() _

    If _contentLoaded Then
        Return
    End If

    _contentLoaded = True
    Dim resourceLocater As System.Uri = _
        New System.Uri("mainwindow.xaml", System.UriKind.Relative)

    System.Windows.Application.LoadComponent(Me, resourceLocater)

End Sub
```

<span data-ttu-id="07d49-149">Ve výchozím nastavení se kompilace kódu spouští ve stejném <xref:System.AppDomain> jako modul MSBuild.</span><span class="sxs-lookup"><span data-stu-id="07d49-149">By default, markup compilation runs in the same <xref:System.AppDomain> as the MSBuild engine.</span></span> <span data-ttu-id="07d49-150">Tím je zajištěno výrazné zvýšení výkonu.</span><span class="sxs-lookup"><span data-stu-id="07d49-150">This provides significant performance gains.</span></span> <span data-ttu-id="07d49-151">Toto chování lze přepnout pomocí vlastnosti `AlwaysCompileMarkupFilesInSeparateDomain`.</span><span class="sxs-lookup"><span data-stu-id="07d49-151">This behavior can be toggled with the `AlwaysCompileMarkupFilesInSeparateDomain` property.</span></span> <span data-ttu-id="07d49-152">To má výhodu odinstalování všech referenčních sestavení odinstalováním samostatného <xref:System.AppDomain>.</span><span class="sxs-lookup"><span data-stu-id="07d49-152">This has the advantage of unloading all reference assemblies by unloading the separate <xref:System.AppDomain>.</span></span>

<a name="Pass_2_of_Markup_Compilation"></a>

### <a name="markup-compilationpass-2"></a><span data-ttu-id="07d49-153">Kompilace značek – Pass 2</span><span class="sxs-lookup"><span data-stu-id="07d49-153">Markup Compilation—Pass 2</span></span>

<span data-ttu-id="07d49-154">Ne všechny stránky [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] jsou kompilovány během průchodu 1 kompilace kódu.</span><span class="sxs-lookup"><span data-stu-id="07d49-154">Not all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages are compiled at during pass 1 of markup compilation.</span></span> [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] <span data-ttu-id="07d49-155">soubory, které mají místně definované odkazy na typ (odkazy na typy definované v kódu jinde ve stejném projektu), jsou v tuto chvíli vyjmuty z kompilace.</span><span class="sxs-lookup"><span data-stu-id="07d49-155">files that have locally defined type references (references to types defined in code elsewhere in the same project) are exempt from compilation at this time.</span></span> <span data-ttu-id="07d49-156">Důvodem je, že tyto lokálně definované typy existují pouze ve zdroji a ještě nejsou kompilovány.</span><span class="sxs-lookup"><span data-stu-id="07d49-156">This is because those locally defined types exist only in source and have not yet been compiled.</span></span> <span data-ttu-id="07d49-157">Chcete-li určit, analyzátor používá heuristiky, které zahrnují hledání položek, jako je například `x:Name` v souboru označení.</span><span class="sxs-lookup"><span data-stu-id="07d49-157">In order to determine this, the parser uses heuristics that involve looking for items such as `x:Name` in the markup file.</span></span> <span data-ttu-id="07d49-158">Pokud je taková instance nalezena, je kompilace souboru označení odložena, dokud nebudou zkompilovány soubory kódu, potom druhá kompilace kódu zpracuje tyto soubory.</span><span class="sxs-lookup"><span data-stu-id="07d49-158">When such an instance is found, that markup file’s compilation is postponed until the code files have been compiled, after which, the second markup compilation pass processes these files.</span></span>

<a name="File_Classification"></a>

### <a name="file-classification"></a><span data-ttu-id="07d49-159">Klasifikace souborů</span><span class="sxs-lookup"><span data-stu-id="07d49-159">File Classification</span></span>

<span data-ttu-id="07d49-160">Proces sestavení vloží výstupní soubory do různých skupin prostředků na základě toho, do kterého sestavení aplikace budou umístěna.</span><span class="sxs-lookup"><span data-stu-id="07d49-160">The build process puts output files into different resource groups based on which application assembly they will be placed in.</span></span> <span data-ttu-id="07d49-161">V typické nemístní aplikaci jsou všechny datové soubory označené jako `Resource` umístěny do hlavního sestavení (spustitelný soubor nebo knihovna).</span><span class="sxs-lookup"><span data-stu-id="07d49-161">In a typical nonlocalized application, all data files marked as `Resource` are placed in the main assembly (executable or library).</span></span> <span data-ttu-id="07d49-162">Pokud je v projektu nastavena `UICulture`, všechny zkompilované soubory [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] a tyto prostředky konkrétně označené jako jazyk jsou umístěny v sestavení satelitních prostředků.</span><span class="sxs-lookup"><span data-stu-id="07d49-162">When `UICulture` is set in the project, all compiled [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files and those resources specifically marked as language-specific are placed in the satellite resource assembly.</span></span> <span data-ttu-id="07d49-163">Kromě toho všechny jazykové a neutrální prostředky jsou umístěny v hlavním sestavení.</span><span class="sxs-lookup"><span data-stu-id="07d49-163">Furthermore, all language-neutral resources are placed in the main assembly.</span></span> <span data-ttu-id="07d49-164">V tomto kroku procesu sestavení je toto určení provedeno.</span><span class="sxs-lookup"><span data-stu-id="07d49-164">In this step of the build process, that determination is made.</span></span>

<span data-ttu-id="07d49-165">Akce `ApplicationDefinition`, `Page`a `Resource` sestavení v souboru projektu lze rozšířit pomocí `Localizable` metadat (přípustné hodnoty jsou `true` a `false`), která určuje, zda je soubor specifický pro jazyk nebo jazykově neutrální.</span><span class="sxs-lookup"><span data-stu-id="07d49-165">The `ApplicationDefinition`, `Page`, and `Resource` build actions in the project file can be augmented with the `Localizable` metadata (acceptable values are `true` and `false`), which dictates whether the file is language-specific or language-neutral.</span></span>

<a name="Core_Compilation"></a>

### <a name="core-compilation"></a><span data-ttu-id="07d49-166">Základní kompilace</span><span class="sxs-lookup"><span data-stu-id="07d49-166">Core Compilation</span></span>

<span data-ttu-id="07d49-167">Základní krok kompilace zahrnuje kompilaci souborů kódu.</span><span class="sxs-lookup"><span data-stu-id="07d49-167">The core compile step involves compilation of code files.</span></span> <span data-ttu-id="07d49-168">Toto je orchestrace pomocí logiky v souborech cílů specifických pro jazyk Microsoft. CSharp. targets a Microsoft. VisualBasic. targets.</span><span class="sxs-lookup"><span data-stu-id="07d49-168">This is orchestrated by logic in the language-specific targets files Microsoft.CSharp.targets and Microsoft.VisualBasic.targets.</span></span> <span data-ttu-id="07d49-169">Pokud heuristické metody určily, že jeden průchod překladače kódu je dostatečný, pak je vygenerováno hlavní sestavení.</span><span class="sxs-lookup"><span data-stu-id="07d49-169">If heuristics have determined that a single pass of the markup compiler is sufficient, then the main assembly is generated.</span></span> <span data-ttu-id="07d49-170">Pokud však jeden nebo více [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] souborů v projektu obsahuje odkazy na lokálně definované typy, pak je vygenerován dočasný soubor DLL, aby konečné sestavení aplikace bylo možné vytvořit po dokončení druhé průchodu kompilace kódu.</span><span class="sxs-lookup"><span data-stu-id="07d49-170">However, if one or more [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files in the project have references to locally defined types, then a temporary .dll file is generated so the final application assemblies may be created after the second pass of markup compilation is complete.</span></span>

<a name="Manifest_generation"></a>

### <a name="manifest-generation"></a><span data-ttu-id="07d49-171">Generování manifestu</span><span class="sxs-lookup"><span data-stu-id="07d49-171">Manifest Generation</span></span>

<span data-ttu-id="07d49-172">Po dokončení procesu sestavení po přípravě všech sestavení aplikace a souborů obsahu jsou vytvořeny manifesty ClickOnce pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="07d49-172">At the end of the build process, after all the application assemblies and content files are ready, the ClickOnce manifests for the application are generated.</span></span>

<span data-ttu-id="07d49-173">Soubor manifestu nasazení popisuje model nasazení: aktuální verze, chování aktualizace a identitu vydavatele spolu s digitálním podpisem.</span><span class="sxs-lookup"><span data-stu-id="07d49-173">The deployment manifest file describes the deployment model: the current version, update behavior, and publisher identity along with digital signature.</span></span> <span data-ttu-id="07d49-174">Tento manifest je určený k vytváření správců, kteří zpracovávají nasazení.</span><span class="sxs-lookup"><span data-stu-id="07d49-174">This manifest is intended to be authored by administrators who handle deployment.</span></span> <span data-ttu-id="07d49-175">Přípona souboru je. XBAP (pro aplikace prohlížeče XAML (XBAP)) a aplikace pro nainstalované aplikace.</span><span class="sxs-lookup"><span data-stu-id="07d49-175">The file extension is .xbap (for XAML browser applications (XBAPs)) and .application for installed applications.</span></span> <span data-ttu-id="07d49-176">Předchozí je vypsána vlastností projektu `HostInBrowser` a v důsledku toho manifest identifikuje aplikaci jako hostovanou v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="07d49-176">The former is dictated by the `HostInBrowser` project property and as a result the manifest identifies the application as browser-hosted.</span></span>

<span data-ttu-id="07d49-177">Manifest aplikace (soubor. exe. manifest) popisuje sestavení aplikace a závislé knihovny a seznam oprávnění vyžadovaných aplikací.</span><span class="sxs-lookup"><span data-stu-id="07d49-177">The application manifest (an .exe.manifest file) describes the application assemblies and dependent libraries and lists permissions required by the application.</span></span> <span data-ttu-id="07d49-178">Tento soubor má být vytvořen vývojářem aplikace.</span><span class="sxs-lookup"><span data-stu-id="07d49-178">This file is intended to be authored by the application developer.</span></span> <span data-ttu-id="07d49-179">Aby bylo možné spustit aplikaci ClickOnce, uživatel otevře soubor manifestu nasazení aplikace.</span><span class="sxs-lookup"><span data-stu-id="07d49-179">In order to launch a ClickOnce application, a user opens the application's deployment manifest file.</span></span>

<span data-ttu-id="07d49-180">Tyto soubory manifestu jsou vždy vytvořeny pro XBAP.</span><span class="sxs-lookup"><span data-stu-id="07d49-180">These manifest files are always created for XBAPs.</span></span> <span data-ttu-id="07d49-181">U nainstalovaných aplikací nejsou vytvořeny, pokud není vlastnost `GenerateManifests` zadána v souboru projektu s hodnotou `true`.</span><span class="sxs-lookup"><span data-stu-id="07d49-181">For installed applications, they are not created unless the `GenerateManifests` property is specified in the project file with value `true`.</span></span>

<span data-ttu-id="07d49-182">Aplikace XBAP získají dvě další oprávnění nad rámec těchto oprávnění přiřazených k běžným aplikacím Internet Zone: <xref:System.Security.Permissions.WebBrowserPermission> a <xref:System.Security.Permissions.MediaPermission>.</span><span class="sxs-lookup"><span data-stu-id="07d49-182">XBAPs get two additional permissions over and above those permissions assigned to typical Internet zone applications: <xref:System.Security.Permissions.WebBrowserPermission> and <xref:System.Security.Permissions.MediaPermission>.</span></span> <span data-ttu-id="07d49-183">Systém sestavení WPF deklaruje tato oprávnění v manifestu aplikace.</span><span class="sxs-lookup"><span data-stu-id="07d49-183">The WPF build system declares those permissions in the application manifest.</span></span>

<a name="Incremental_Build_Support"></a>

## <a name="incremental-build-support"></a><span data-ttu-id="07d49-184">Podpora přírůstkového sestavení</span><span class="sxs-lookup"><span data-stu-id="07d49-184">Incremental Build Support</span></span>

<span data-ttu-id="07d49-185">Systém sestavení WPF poskytuje podporu pro přírůstková sestavení.</span><span class="sxs-lookup"><span data-stu-id="07d49-185">The WPF build system provides support for incremental builds.</span></span> <span data-ttu-id="07d49-186">Je poměrně inteligentní informace o detekci změn provedených v kódu nebo kódu a kompiluje pouze ty artefakty, které jsou ovlivněné změnou.</span><span class="sxs-lookup"><span data-stu-id="07d49-186">It is fairly intelligent about detecting changes made to markup or code, and it compiles only those artifacts affected by the change.</span></span> <span data-ttu-id="07d49-187">Mechanismus přírůstkového sestavení používá následující soubory:</span><span class="sxs-lookup"><span data-stu-id="07d49-187">The incremental build mechanism uses the following files:</span></span>

- <span data-ttu-id="07d49-188">Soubor $ (*AssemblyName*) _MarkupCompiler. cache pro zachování aktuálního stavu kompilátoru.</span><span class="sxs-lookup"><span data-stu-id="07d49-188">An $(*AssemblyName*)_MarkupCompiler.Cache file to maintain current compiler state.</span></span>

- <span data-ttu-id="07d49-189">Soubor $ (*AssemblyName*) _MarkupCompiler. lref pro ukládání [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] souborů do mezipaměti s odkazy na lokálně definované typy.</span><span class="sxs-lookup"><span data-stu-id="07d49-189">An $(*AssemblyName*)_MarkupCompiler.lref file to cache the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files with references to locally defined types.</span></span>

<span data-ttu-id="07d49-190">Následuje sada pravidel pro přírůstkové sestavení:</span><span class="sxs-lookup"><span data-stu-id="07d49-190">The following is a set of rules governing incremental build:</span></span>

- <span data-ttu-id="07d49-191">Soubor je nejmenší jednotka, na které systém sestavení detekuje změnu.</span><span class="sxs-lookup"><span data-stu-id="07d49-191">The file is the smallest unit at which the build system detects change.</span></span> <span data-ttu-id="07d49-192">Pro soubor kódu tedy systém sestavení nemůže zjistit, zda byl typ změněn nebo zda byl přidán kód.</span><span class="sxs-lookup"><span data-stu-id="07d49-192">So, for a code file, the build system cannot tell if a type was changed or if code was added.</span></span> <span data-ttu-id="07d49-193">Stejné uchovávají pro soubory projektu.</span><span class="sxs-lookup"><span data-stu-id="07d49-193">The same holds for project files.</span></span>

- <span data-ttu-id="07d49-194">Mechanismus přírůstkového sestavení musí být společnost Cognizant, že stránka [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] buď definuje třídu, nebo používá jiné třídy.</span><span class="sxs-lookup"><span data-stu-id="07d49-194">The incremental build mechanism must be cognizant that a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] page either defines a class or uses other classes.</span></span>

- <span data-ttu-id="07d49-195">Pokud se `Reference` položky změní, znovu zkompilujte všechny stránky.</span><span class="sxs-lookup"><span data-stu-id="07d49-195">If `Reference` entries change, then recompile all pages.</span></span>

- <span data-ttu-id="07d49-196">Pokud se změní soubor kódu, Rekompilujte všechny stránky s místně definovanými odkazy na typ.</span><span class="sxs-lookup"><span data-stu-id="07d49-196">If a code file changes, recompile all pages with locally defined type references.</span></span>

- <span data-ttu-id="07d49-197">Pokud se změní soubor [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="07d49-197">If a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file changes:</span></span>

  - <span data-ttu-id="07d49-198">Pokud je [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] deklarována jako `Page` v projektu: Pokud [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] neobsahuje lokálně definované odkazy na typ, znovu zkompilujte tuto [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] a všechny [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] stránky s místními odkazy; Pokud [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] obsahuje místní odkazy, zkompilujte všechny [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] stránky s místními odkazy.</span><span class="sxs-lookup"><span data-stu-id="07d49-198">If [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is declared as `Page` in the project: if the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] does not have locally defined type references, recompile that [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] plus all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages with local references; if the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] has local references, recompile all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages with local references.</span></span>

  - <span data-ttu-id="07d49-199">Pokud je [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] deklarována jako `ApplicationDefinition` v projektu: překompilujte všechny [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] stránky (důvod: každý [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] má odkaz na <xref:System.Windows.Application> typ, který se mohl změnit).</span><span class="sxs-lookup"><span data-stu-id="07d49-199">If [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is declared as `ApplicationDefinition` in the project: recompile all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages (reason: each [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] has reference to an <xref:System.Windows.Application> type that may have changed).</span></span>

- <span data-ttu-id="07d49-200">Pokud soubor projektu deklaruje soubor s kódem jako definici aplikace namísto souboru [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="07d49-200">If the project file declares a code file as application definition instead of a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file:</span></span>

  - <span data-ttu-id="07d49-201">Ověřte, zda se hodnota `ApplicationClassName` v souboru projektu změnila (existuje nový typ aplikace?).</span><span class="sxs-lookup"><span data-stu-id="07d49-201">Check if the `ApplicationClassName` value in the project file has changed (is there a new application type?).</span></span> <span data-ttu-id="07d49-202">V takovém případě znovu zkompilujte celou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="07d49-202">If so, recompile the entire application.</span></span>

  - <span data-ttu-id="07d49-203">V opačném případě znovu zkompilujte všechny [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] stránky s místními odkazy.</span><span class="sxs-lookup"><span data-stu-id="07d49-203">Otherwise, recompile all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages with local references.</span></span>

- <span data-ttu-id="07d49-204">Pokud se změní soubor projektu: použijte všechna předchozí pravidla a podívejte se, co je potřeba znovu zkompilovat.</span><span class="sxs-lookup"><span data-stu-id="07d49-204">If a project file changes: apply all preceding rules and see what needs to be recompiled.</span></span> <span data-ttu-id="07d49-205">Změny následujících vlastností aktivují kompletní překompilování: `AssemblyName`, `IntermediateOutputPath`, `RootNamespace`a `HostInBrowser`.</span><span class="sxs-lookup"><span data-stu-id="07d49-205">Changes to the following properties trigger a complete recompile: `AssemblyName`, `IntermediateOutputPath`, `RootNamespace`, and `HostInBrowser`.</span></span>

<span data-ttu-id="07d49-206">Je možné provést následující scénáře překompilování:</span><span class="sxs-lookup"><span data-stu-id="07d49-206">The following recompile scenarios are possible:</span></span>

- <span data-ttu-id="07d49-207">Celá aplikace je znovu zkompilována.</span><span class="sxs-lookup"><span data-stu-id="07d49-207">The entire application is recompiled.</span></span>

- <span data-ttu-id="07d49-208">Znovu se zkompiluje pouze ty [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] soubory, které mají místně definované odkazy na typ.</span><span class="sxs-lookup"><span data-stu-id="07d49-208">Only those [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files that have locally defined type references are recompiled.</span></span>

- <span data-ttu-id="07d49-209">Nic se nezkompiluje (Pokud se nic v projektu nezměnilo).</span><span class="sxs-lookup"><span data-stu-id="07d49-209">Nothing is recompiled (if nothing in the project has changed).</span></span>

## <a name="see-also"></a><span data-ttu-id="07d49-210">Viz také:</span><span class="sxs-lookup"><span data-stu-id="07d49-210">See also</span></span>

- [<span data-ttu-id="07d49-211">Nasazení aplikace WPF</span><span class="sxs-lookup"><span data-stu-id="07d49-211">Deploying a WPF Application</span></span>](deploying-a-wpf-application-wpf.md)
- [<span data-ttu-id="07d49-212">Referenční dokumentace WPF MSBuild</span><span class="sxs-lookup"><span data-stu-id="07d49-212">WPF MSBuild Reference</span></span>](/visualstudio/msbuild/wpf-msbuild-reference)
- [<span data-ttu-id="07d49-213">Sbalení URI v technologii WPF</span><span class="sxs-lookup"><span data-stu-id="07d49-213">Pack URIs in WPF</span></span>](pack-uris-in-wpf.md)
- [<span data-ttu-id="07d49-214">Prostředek, obsah a datové soubory aplikace WPF</span><span class="sxs-lookup"><span data-stu-id="07d49-214">WPF Application Resource, Content, and Data Files</span></span>](wpf-application-resource-content-and-data-files.md)
