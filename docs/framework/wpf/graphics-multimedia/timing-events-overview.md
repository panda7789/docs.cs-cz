---
title: Přehled událostí časování
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- timelines [WPF]
- timing events [WPF]
ms.assetid: 597e3280-0867-4359-a97b-5b2f4149e350
ms.openlocfilehash: ee45441e9ad09c60d8b61ecce4ef08b0027ce29e
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/12/2020
ms.locfileid: "79145407"
---
# <a name="timing-events-overview"></a><span data-ttu-id="272a3-102">Přehled událostí časování</span><span class="sxs-lookup"><span data-stu-id="272a3-102">Timing Events Overview</span></span>
<span data-ttu-id="272a3-103">Toto téma popisuje, jak používat pět <xref:System.Windows.Media.Animation.Timeline> <xref:System.Windows.Media.Animation.Clock> časování události, které jsou k dispozici na a objekty.</span><span class="sxs-lookup"><span data-stu-id="272a3-103">This topic describes how to use the five timing events available on <xref:System.Windows.Media.Animation.Timeline> and <xref:System.Windows.Media.Animation.Clock> objects.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="272a3-104">Požadavky</span><span class="sxs-lookup"><span data-stu-id="272a3-104">Prerequisites</span></span>  
 <span data-ttu-id="272a3-105">Chcete-li porozumět tomuto tématu, měli byste pochopit, jak vytvářet a používat animace.</span><span class="sxs-lookup"><span data-stu-id="272a3-105">To understand this topic, you should understand how to create and use animations.</span></span> <span data-ttu-id="272a3-106">Chcete-li začít s animací, podívejte se na [přehled animací](animation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="272a3-106">To get started with animation, see the [Animation Overview](animation-overview.md).</span></span>  
  
 <span data-ttu-id="272a3-107">Existuje několik způsobů, jak [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]animovat vlastnosti v aplikaci :</span><span class="sxs-lookup"><span data-stu-id="272a3-107">There are multiple ways to animate properties in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]:</span></span>  
  
- <span data-ttu-id="272a3-108">**Použití objektů scénáře** (značky a kód): Objekty můžete použít <xref:System.Windows.Media.Animation.Storyboard> k uspořádání a distribuci animací do jednoho nebo více objektů.</span><span class="sxs-lookup"><span data-stu-id="272a3-108">**Using storyboard objects** (markup and code): You can use <xref:System.Windows.Media.Animation.Storyboard> objects to arrange and distribute animations to one or more objects.</span></span> <span data-ttu-id="272a3-109">Příklad například viz [Animate vlastnost pomocí storyboard](how-to-animate-a-property-by-using-a-storyboard.md).</span><span class="sxs-lookup"><span data-stu-id="272a3-109">For an example, see [Animate a Property by Using a Storyboard](how-to-animate-a-property-by-using-a-storyboard.md).</span></span>  
  
- <span data-ttu-id="272a3-110">**Použití místních animací** (pouze <xref:System.Windows.Media.Animation.AnimationTimeline> kód): Objekty můžete aplikovat přímo na vlastnosti, které animují.</span><span class="sxs-lookup"><span data-stu-id="272a3-110">**Using local animations** (code only): You can apply <xref:System.Windows.Media.Animation.AnimationTimeline> objects directly to the properties they animate.</span></span> <span data-ttu-id="272a3-111">Například viz [Animate vlastnost bez použití storyboardu](how-to-animate-a-property-without-using-a-storyboard.md).</span><span class="sxs-lookup"><span data-stu-id="272a3-111">For an example, see [Animate a Property Without Using a Storyboard](how-to-animate-a-property-without-using-a-storyboard.md).</span></span>  
  
- <span data-ttu-id="272a3-112">**Použití hodin** (pouze kód): Můžete explicitně spravovat tvorbu hodin a distribuovat hodiny animace sami.</span><span class="sxs-lookup"><span data-stu-id="272a3-112">**Using clocks** (code only): You can explicitly manage clock creation and distribute the animation clocks yourself.</span></span>  <span data-ttu-id="272a3-113">Příklad naleznete v [tématu Animate vlastnost pomocí AnimationClock](how-to-animate-a-property-by-using-an-animationclock.md).</span><span class="sxs-lookup"><span data-stu-id="272a3-113">For an example, see [Animate a Property by Using an AnimationClock](how-to-animate-a-property-by-using-an-animationclock.md).</span></span>  
  
 <span data-ttu-id="272a3-114">Vzhledem k tomu, že je můžete použít ve <xref:System.Windows.Media.Animation.Storyboard> značkách a kódu, příklady v tomto přehledu používají objekty.</span><span class="sxs-lookup"><span data-stu-id="272a3-114">Because you can use them in markup and code, the examples in this overview use <xref:System.Windows.Media.Animation.Storyboard> objects.</span></span> <span data-ttu-id="272a3-115">Popsané koncepty však lze použít na jiné metody animace vlastností.</span><span class="sxs-lookup"><span data-stu-id="272a3-115">However, the concepts described can be applied to the other methods of animating properties.</span></span>  
  
### <a name="what-is-a-clock"></a><span data-ttu-id="272a3-116">Co jsou hodiny?</span><span class="sxs-lookup"><span data-stu-id="272a3-116">What is a clock?</span></span>  
 <span data-ttu-id="272a3-117">Časová osa sama o sobě ve skutečnosti nedělá nic jiného než popisuje segment času.</span><span class="sxs-lookup"><span data-stu-id="272a3-117">A timeline, by itself, doesn't actually do anything other than describe a segment of time.</span></span> <span data-ttu-id="272a3-118">Je to objekt časové <xref:System.Windows.Media.Animation.Clock> osy, který provádí skutečnou práci: udržuje časování související s časovým časem stavu časové osy.</span><span class="sxs-lookup"><span data-stu-id="272a3-118">It's the timeline's <xref:System.Windows.Media.Animation.Clock> object that does the real work: it maintains timing-related run-time state for the timeline.</span></span> <span data-ttu-id="272a3-119">Ve většině případů, například při použití scénářů, hodiny se vytvoří automaticky pro vaši časovou osu.</span><span class="sxs-lookup"><span data-stu-id="272a3-119">In most cases, such as when using storyboards, a clock is created automatically for your timeline.</span></span> <span data-ttu-id="272a3-120">Můžete také vytvořit <xref:System.Windows.Media.Animation.Clock> explicitně <xref:System.Windows.Media.Animation.Timeline.CreateClock%2A> pomocí metody.</span><span class="sxs-lookup"><span data-stu-id="272a3-120">You can also create a <xref:System.Windows.Media.Animation.Clock> explicitly by using the <xref:System.Windows.Media.Animation.Timeline.CreateClock%2A> method.</span></span> <span data-ttu-id="272a3-121">Další informace <xref:System.Windows.Media.Animation.Clock> o objektech naleznete v tématu [Přehled systému animace a časování](animation-and-timing-system-overview.md).</span><span class="sxs-lookup"><span data-stu-id="272a3-121">For more information about <xref:System.Windows.Media.Animation.Clock> objects, see the [Animation and Timing System Overview](animation-and-timing-system-overview.md).</span></span>  
  
## <a name="why-use-events"></a><span data-ttu-id="272a3-122">Proč používat události?</span><span class="sxs-lookup"><span data-stu-id="272a3-122">Why Use Events?</span></span>  
 <span data-ttu-id="272a3-123">S výjimkou jednoho (hledání zarovnány s poslední klíště), všechny interaktivní operace časování jsou asynchronní.</span><span class="sxs-lookup"><span data-stu-id="272a3-123">With the exception of one (seek aligned to last tick), all interactive timing operations are asynchronous.</span></span> <span data-ttu-id="272a3-124">Neexistuje žádný způsob, jak přesně vědět, kdy budou provedeny.</span><span class="sxs-lookup"><span data-stu-id="272a3-124">There is no way for you to know exactly when they will execute.</span></span> <span data-ttu-id="272a3-125">To může být problém, pokud máte jiný kód, který je závislý na operaci časování.</span><span class="sxs-lookup"><span data-stu-id="272a3-125">That can be a problem when you have other code that's dependent upon your timing operation.</span></span> <span data-ttu-id="272a3-126">Předpokládejme, že chcete zastavit časovou osu, která animovala obdélník.</span><span class="sxs-lookup"><span data-stu-id="272a3-126">Suppose that you wanted to stop a timeline that animated a rectangle.</span></span> <span data-ttu-id="272a3-127">Po zastavení časové osy změníte barvu obdélníku.</span><span class="sxs-lookup"><span data-stu-id="272a3-127">After the timeline stops, you change the color of the rectangle.</span></span>  
  
 [!code-csharp[events_procedural#NeedForEventsFragment](~/samples/snippets/csharp/VS_Snippets_Wpf/events_procedural/CSharp/EventExample.cs#needforeventsfragment)]
 [!code-vb[events_procedural#NeedForEventsFragment](~/samples/snippets/visualbasic/VS_Snippets_Wpf/events_procedural/VisualBasic/EventExample.vb#needforeventsfragment)]  
  
 <span data-ttu-id="272a3-128">V předchozím příkladu druhý řádek kódu může spustit před zastavením scénáře.</span><span class="sxs-lookup"><span data-stu-id="272a3-128">In the previous example, the second line of code might execute before the storyboard stops.</span></span> <span data-ttu-id="272a3-129">To proto, že zastavení je asynchronní operace.</span><span class="sxs-lookup"><span data-stu-id="272a3-129">That's because stopping is an asynchronous operation.</span></span> <span data-ttu-id="272a3-130">Sdělit časovou osu nebo hodiny zastavit vytvoří "stop požadavek" druhů, které nejsou zpracovány, dokud časování motoru další klíště.</span><span class="sxs-lookup"><span data-stu-id="272a3-130">Telling a timeline or clock to stop creates a "stop request" of sorts that isn't processed until the timing engine's next tick.</span></span>  
  
 <span data-ttu-id="272a3-131">Chcete-li po dokončení časové osy spustit příkazy, použijte události časování.</span><span class="sxs-lookup"><span data-stu-id="272a3-131">To execute commands after a timeline completes, use timing events.</span></span> <span data-ttu-id="272a3-132">V následujícím příkladu obslužná rutina události se používá ke změně barvy obdélníku po přehrání storyboard zastaví přehrávání.</span><span class="sxs-lookup"><span data-stu-id="272a3-132">In the following example, an event handler is used to change the color of a rectangle after the storyboard stops playing.</span></span>  
  
 [!code-csharp[events_procedural#RegisterForStoryboardCurrentStateInvalidatedEvent](~/samples/snippets/csharp/VS_Snippets_Wpf/events_procedural/CSharp/EventExample.cs#registerforstoryboardcurrentstateinvalidatedevent)]
 [!code-vb[events_procedural#RegisterForStoryboardCurrentStateInvalidatedEvent](~/samples/snippets/visualbasic/VS_Snippets_Wpf/events_procedural/VisualBasic/EventExample.vb#registerforstoryboardcurrentstateinvalidatedevent)]  
[!code-csharp[events_procedural#StoryboardCurrentStateInvalidatedEvent2](~/samples/snippets/csharp/VS_Snippets_Wpf/events_procedural/CSharp/EventExample.cs#storyboardcurrentstateinvalidatedevent2)]
[!code-vb[events_procedural#StoryboardCurrentStateInvalidatedEvent2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/events_procedural/VisualBasic/EventExample.vb#storyboardcurrentstateinvalidatedevent2)]  
  
 <span data-ttu-id="272a3-133">Podrobnější příklad najdete v tématu [Příjem oznámení při změny stavu hodiny](how-to-receive-notification-when-clock-state-changes.md).</span><span class="sxs-lookup"><span data-stu-id="272a3-133">For a more complete example, see [Receive Notification When a Clock's State Changes](how-to-receive-notification-when-clock-state-changes.md).</span></span>  
  
## <a name="public-events"></a><span data-ttu-id="272a3-134">Veřejné události</span><span class="sxs-lookup"><span data-stu-id="272a3-134">Public Events</span></span>  
 <span data-ttu-id="272a3-135">A <xref:System.Windows.Media.Animation.Timeline> <xref:System.Windows.Media.Animation.Clock> třídy poskytují pět časování události.</span><span class="sxs-lookup"><span data-stu-id="272a3-135">The <xref:System.Windows.Media.Animation.Timeline> and <xref:System.Windows.Media.Animation.Clock> classes both provide five timing events.</span></span> <span data-ttu-id="272a3-136">V následující tabulce jsou uvedeny tyto události a podmínky, které je aktivují.</span><span class="sxs-lookup"><span data-stu-id="272a3-136">The following table lists these events and the conditions that trigger them.</span></span>  
  
|<span data-ttu-id="272a3-137">Událost</span><span class="sxs-lookup"><span data-stu-id="272a3-137">Event</span></span>|<span data-ttu-id="272a3-138">Spuštění interaktivní operace</span><span class="sxs-lookup"><span data-stu-id="272a3-138">Triggering interactive operation</span></span>|<span data-ttu-id="272a3-139">Další aktivační události</span><span class="sxs-lookup"><span data-stu-id="272a3-139">Other triggers</span></span>|  
|-----------|--------------------------------------|--------------------|  
|<span data-ttu-id="272a3-140">**Dokončeno**</span><span class="sxs-lookup"><span data-stu-id="272a3-140">**Completed**</span></span>|<span data-ttu-id="272a3-141">Přeskočit k vyplnění</span><span class="sxs-lookup"><span data-stu-id="272a3-141">Skip to fill</span></span>|<span data-ttu-id="272a3-142">Hodiny se dokončují.</span><span class="sxs-lookup"><span data-stu-id="272a3-142">The clock completes.</span></span>|  
|<span data-ttu-id="272a3-143">**Currentglobalspeedinvalidated**</span><span class="sxs-lookup"><span data-stu-id="272a3-143">**CurrentGlobalSpeedInvalidated**</span></span>|<span data-ttu-id="272a3-144">Pauza, pokračovat, hledat, nastavit poměr rychlosti, přeskočit k vyplnění, zastavit</span><span class="sxs-lookup"><span data-stu-id="272a3-144">Pause, resume, seek, set speed ratio, skip to fill, stop</span></span>|<span data-ttu-id="272a3-145">Hodiny se obrátí, zrychlují, spouští nebo zastavují.</span><span class="sxs-lookup"><span data-stu-id="272a3-145">The clock reverses, accelerates, starts, or stops.</span></span>|  
|<span data-ttu-id="272a3-146">**Currentstateinvalidated**</span><span class="sxs-lookup"><span data-stu-id="272a3-146">**CurrentStateInvalidated**</span></span>|<span data-ttu-id="272a3-147">Začněte, přeskočte na vyplnění, zastavte</span><span class="sxs-lookup"><span data-stu-id="272a3-147">Begin, skip to fill, stop</span></span>|<span data-ttu-id="272a3-148">Hodiny se spustí, zastaví nebo vyplní.</span><span class="sxs-lookup"><span data-stu-id="272a3-148">The clock starts, stops, or fills.</span></span>|  
|<span data-ttu-id="272a3-149">**CurrentTimeInvalidated**</span><span class="sxs-lookup"><span data-stu-id="272a3-149">**CurrentTimeInvalidated**</span></span>|<span data-ttu-id="272a3-150">Začněte, hledejte, přeskočte vyplnit, zastavit</span><span class="sxs-lookup"><span data-stu-id="272a3-150">Begin, seek, skip to fill, stop</span></span>|<span data-ttu-id="272a3-151">Hodiny postupují.</span><span class="sxs-lookup"><span data-stu-id="272a3-151">The clock progresses.</span></span>|  
|<span data-ttu-id="272a3-152">**OdebratRequested**</span><span class="sxs-lookup"><span data-stu-id="272a3-152">**RemoveRequested**</span></span>|<span data-ttu-id="272a3-153">Odebrat</span><span class="sxs-lookup"><span data-stu-id="272a3-153">Remove</span></span>||  
  
## <a name="ticking-and-event-consolidation"></a><span data-ttu-id="272a3-154">Zaškrtnutí a konsolidace událostí</span><span class="sxs-lookup"><span data-stu-id="272a3-154">Ticking and Event Consolidation</span></span>  
 <span data-ttu-id="272a3-155">Při animaci [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]objektů v aplikaci je modul časování, který spravuje animace.</span><span class="sxs-lookup"><span data-stu-id="272a3-155">When you animate objects in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], it’s the timing engine that manages your animations.</span></span> <span data-ttu-id="272a3-156">Modul časování sleduje průběh času a vypočítá stav každé animace.</span><span class="sxs-lookup"><span data-stu-id="272a3-156">The timing engine tracks the progression of time and computes the state of each animation.</span></span> <span data-ttu-id="272a3-157">To dělá mnoho takových hodnocení projde v druhém.</span><span class="sxs-lookup"><span data-stu-id="272a3-157">It makes many such evaluation passes in a second.</span></span> <span data-ttu-id="272a3-158">Tyto průchody hodnocení jsou označovány jako "klíšťata".</span><span class="sxs-lookup"><span data-stu-id="272a3-158">These evaluation passes are known as "ticks."</span></span>  
  
 <span data-ttu-id="272a3-159">Zatímco klíšťata se vyskytují často, je možné, že se mezi klíšťaty stane spousta věcí.</span><span class="sxs-lookup"><span data-stu-id="272a3-159">While ticks occur frequently, it's possible for a lot of things to happen between ticks.</span></span> <span data-ttu-id="272a3-160">Například časová osa může být zastavena, spuštěna a zastavena znovu, v takovém případě se její aktuální stav třikrát změní.</span><span class="sxs-lookup"><span data-stu-id="272a3-160">For example, a timeline might be stopped, started, and stopped again, in which case its current state will have changed three times.</span></span> <span data-ttu-id="272a3-161">Teoreticky by událost mohla být vyvolána vícekrát v jednom tiku; však modul časování konsoliduje události, tak, aby každá událost může být vyvolána maximálně jednou za značku.</span><span class="sxs-lookup"><span data-stu-id="272a3-161">In theory, the event could be raised multiple times in a single tick; however, the timing engine consolidates events, so that each event can be raised at most once per tick.</span></span>  
  
## <a name="registering-for-events"></a><span data-ttu-id="272a3-162">Registrace na události</span><span class="sxs-lookup"><span data-stu-id="272a3-162">Registering for Events</span></span>  
 <span data-ttu-id="272a3-163">Existují dva způsoby, jak se zaregistrovat pro události časování: můžete se zaregistrovat na časové ose nebo s hodinami vytvořenými z časové osy.</span><span class="sxs-lookup"><span data-stu-id="272a3-163">There are two ways to register for timing events: you can register with the timeline or with the clock created from the timeline.</span></span> <span data-ttu-id="272a3-164">Registrace pro událost přímo s hodinami je poměrně jednoduché, i když to lze provést pouze z kódu.</span><span class="sxs-lookup"><span data-stu-id="272a3-164">Registering for an event directly with a clock is fairly straightforward, although it can only be done from code.</span></span> <span data-ttu-id="272a3-165">Můžete se zaregistrovat pro události s časovou osou z kódu nebo kódu.</span><span class="sxs-lookup"><span data-stu-id="272a3-165">You can register for events with a timeline from markup or code.</span></span> <span data-ttu-id="272a3-166">V další části je popsáno, jak se zaregistrovat pro události hodiny s časovou osou.</span><span class="sxs-lookup"><span data-stu-id="272a3-166">The next section describes how to register for clock events with a timeline.</span></span>  
  
<a name="registeringforclockeventswithatimeline"></a>
## <a name="registering-for-clock-events-with-a-timeline"></a><span data-ttu-id="272a3-167">Registrace pro události hodin s časovou osou</span><span class="sxs-lookup"><span data-stu-id="272a3-167">Registering for Clock Events with a Timeline</span></span>  
 <span data-ttu-id="272a3-168">Přestože se <xref:System.Windows.Media.Animation.Timeline.Completed>zdá, <xref:System.Windows.Media.Animation.Timeline.CurrentTimeInvalidated>že <xref:System.Windows.Media.Animation.Timeline.RemoveRequested> časová osa , <xref:System.Windows.Media.Animation.Clock> <xref:System.Windows.Media.Animation.Timeline.CurrentGlobalSpeedInvalidated> <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated>, a události časové osy jsou přidruženy k časové ose, registrace těchto událostí ve skutečnosti přidruží obslužnou rutinu události k vytvořené pro časovou osu.</span><span class="sxs-lookup"><span data-stu-id="272a3-168">Although a timeline's <xref:System.Windows.Media.Animation.Timeline.Completed>, <xref:System.Windows.Media.Animation.Timeline.CurrentGlobalSpeedInvalidated>, <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated>, <xref:System.Windows.Media.Animation.Timeline.CurrentTimeInvalidated>, and <xref:System.Windows.Media.Animation.Timeline.RemoveRequested> events appear to be associated with the timeline, registering for these events actually associates an event handler with the <xref:System.Windows.Media.Animation.Clock> created for the timeline.</span></span>  
  
 <span data-ttu-id="272a3-169">Když se například zaregistrujete pro <xref:System.Windows.Media.Animation.Timeline.Completed> událost na časové ose, ve <xref:System.Windows.Media.Animation.Clock.Completed> skutečnosti říkáte systému, aby se zaregistroval pro událost každé hodiny, která je vytvořena pro časovou osu.</span><span class="sxs-lookup"><span data-stu-id="272a3-169">When you register for the <xref:System.Windows.Media.Animation.Timeline.Completed> event on a timeline, for example, you're actually telling the system to register for the <xref:System.Windows.Media.Animation.Clock.Completed> event of each clock that is created for the timeline.</span></span> <span data-ttu-id="272a3-170">V kódu se musíte zaregistrovat <xref:System.Windows.Media.Animation.Clock> pro tuto událost před vytvořením pro tuto časovou osu; v opačném případě nebudete dostávat oznámení.</span><span class="sxs-lookup"><span data-stu-id="272a3-170">In code, you must register for this event before the <xref:System.Windows.Media.Animation.Clock> is created for this timeline; otherwise, you won't receive notification.</span></span> <span data-ttu-id="272a3-171">K tomu [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]dochází automaticky v ; analyzátor se automaticky zaregistruje pro <xref:System.Windows.Media.Animation.Clock> událost před vytvořením.</span><span class="sxs-lookup"><span data-stu-id="272a3-171">This happens automatically in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]; the parser automatically registers for the event before the <xref:System.Windows.Media.Animation.Clock> is created.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="272a3-172">Viz také</span><span class="sxs-lookup"><span data-stu-id="272a3-172">See also</span></span>

- [<span data-ttu-id="272a3-173">Animace a časování přehledu systému</span><span class="sxs-lookup"><span data-stu-id="272a3-173">Animation and Timing System Overview</span></span>](animation-and-timing-system-overview.md)
- [<span data-ttu-id="272a3-174">Přehled animace</span><span class="sxs-lookup"><span data-stu-id="272a3-174">Animation Overview</span></span>](animation-overview.md)
- [<span data-ttu-id="272a3-175">Přehled chování časování</span><span class="sxs-lookup"><span data-stu-id="272a3-175">Timing Behaviors Overview</span></span>](timing-behaviors-overview.md)
