---
title: Novinky ve Windows Workflow Foundation v rozhraní .NET 4.5
description: Programovací model Windows Workflow Foundation v .NET Framework 4,5 zavádí mnoho nových funkcí, jako jsou nové aktivity, možnosti návrháře a vývojové modely pracovního postupu.
ms.date: 03/30/2017
ms.assetid: 195c43a8-e0a8-43d9-aead-d65a9e6751ec
ms.openlocfilehash: 85555e48929885b6eef7fde6ac0c9017fa403d4d
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/15/2020
ms.locfileid: "83419457"
---
# <a name="whats-new-in-windows-workflow-foundation-in-net-45"></a><span data-ttu-id="1dd1d-103">Novinky ve Windows Workflow Foundation v rozhraní .NET 4.5</span><span class="sxs-lookup"><span data-stu-id="1dd1d-103">What's New in Windows Workflow Foundation in .NET 4.5</span></span>

<span data-ttu-id="1dd1d-104">Programovací model Windows Workflow Foundation (WF) v .NET Framework 4,5 zavádí mnoho nových funkcí, jako jsou nové aktivity, možnosti návrháře a vývojové modely pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-104">Windows Workflow Foundation (WF) in .NET Framework 4.5 introduces many new features, such as new activities, designer capabilities, and workflow development models.</span></span> <span data-ttu-id="1dd1d-105">Mnohé, ale ne všechny nové funkce pracovního postupu, které jsou představené v .NET Framework 4,5, jsou podporované v Návrháři opětovného hostovaného pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-105">Many, but not all, of the new workflow features introduced in .NET Framework 4.5 are supported in the re-hosted workflow designer.</span></span> <span data-ttu-id="1dd1d-106">Další informace o nových funkcích, které jsou podporovány, naleznete [v tématu Support for New Workflow Foundation 4,5 Features in the hosted Návrhář postupu provádění](wf-features-in-the-rehosted-workflow-designer.md).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-106">For more information about the new features that are supported, see [Support for New Workflow Foundation 4.5 Features in the Rehosted Workflow Designer](wf-features-in-the-rehosted-workflow-designer.md).</span></span> <span data-ttu-id="1dd1d-107">Další informace o migraci aplikací pro pracovní postup .NET 3,0 a .NET 3,5 na používání nejnovější verze najdete v tématu [pokyny k migraci](migration-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-107">For more information about migrating .NET 3.0 and .NET 3.5 workflow applications to use the latest version, see [Migration Guidance](migration-guidance.md).</span></span> <span data-ttu-id="1dd1d-108">V tomto tématu najdete přehled nových funkcí pracovního postupu, které jsou představené v .NET Framework 4,5.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-108">This topic provides an overview of the new workflow features introduced in .NET Framework 4.5.</span></span>

> [!WARNING]
> <span data-ttu-id="1dd1d-109">Nové funkce programovací model Windows Workflow Foundation představené v .NET Framework 4,5 nejsou k dispozici pro projekty, které cílí na předchozí verze rozhraní .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-109">The new Windows Workflow Foundation features introduced in .NET Framework 4.5 are not available for projects that target previous versions of the framework.</span></span> <span data-ttu-id="1dd1d-110">Pokud je projekt, který cílí na .NET Framework 4,5, znovu cílen na předchozí verzi rozhraní, může dojít k několika problémům.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-110">If a project that targets .NET Framework 4.5 is re-targeted to a previous version of the framework, several issues can occur.</span></span>
>
> - <span data-ttu-id="1dd1d-111">Výrazy jazyka C# budou v Návrháři nahrazeny **hodnotou zprávy nastavenou v jazyce XAML**.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-111">C# expressions will be replaced in the designer with the message **Value was set in XAML**.</span></span>
> - <span data-ttu-id="1dd1d-112">Dojde k mnoha chybám sestavení, včetně následující chyby.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-112">Many build errors will occur, including the following error.</span></span>
>
> <span data-ttu-id="1dd1d-113">**Formát souboru není kompatibilní s aktuálním cílovým rozhraním. Chcete-li převést formát souboru, soubor prosím explicitně uložte. Tato chybová zpráva zmizí po uložení souboru a opětovném otevření návrháře.**</span><span class="sxs-lookup"><span data-stu-id="1dd1d-113">**The file format is not compatible with current targeting framework. To convert the file format, please explicitly save the file. This error message will go away after you save the file and reopen the designer.**</span></span>

## <a name="workflow-versioning"></a><a name="BKMK_Versioning"></a><span data-ttu-id="1dd1d-114">Správa verzí pracovních postupů</span><span class="sxs-lookup"><span data-stu-id="1dd1d-114">Workflow Versioning</span></span>

<span data-ttu-id="1dd1d-115">.NET Framework 4,5 zavedlo několik nových funkcí správy verzí založených na nové <xref:System.Activities.WorkflowIdentity> třídě.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-115">.NET Framework 4.5 introduced several new versioning features based around the new <xref:System.Activities.WorkflowIdentity> class.</span></span> <span data-ttu-id="1dd1d-116"><xref:System.Activities.WorkflowIdentity>poskytuje autorům aplikace pracovního postupu mechanismus pro mapování trvalé instance pracovního postupu s její definicí.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-116"><xref:System.Activities.WorkflowIdentity> provides workflow application authors a mechanism for mapping a persisted workflow instance with its definition.</span></span>

- <span data-ttu-id="1dd1d-117">Vývojáři, kteří používají <xref:System.Activities.WorkflowApplication> hostování, můžou <xref:System.Activities.WorkflowIdentity> Povolit hostování více verzí pracovního postupu vedle sebe.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-117">Developers using <xref:System.Activities.WorkflowApplication> hosting can use <xref:System.Activities.WorkflowIdentity> to enable hosting multiple versions of a workflow side-by-side.</span></span> <span data-ttu-id="1dd1d-118">Trvalé instance pracovního postupu mohou být načteny pomocí nové <xref:System.Activities.WorkflowApplicationInstance> třídy a poté <xref:System.Activities.WorkflowApplicationInstance.DefinitionIdentity%2A> mohou být použity hostitelem k poskytnutí správné verze definice pracovního postupu při vytváření instance <xref:System.Activities.WorkflowApplication> .</span><span class="sxs-lookup"><span data-stu-id="1dd1d-118">Persisted workflow instances can be loaded using the new <xref:System.Activities.WorkflowApplicationInstance> class, and then the <xref:System.Activities.WorkflowApplicationInstance.DefinitionIdentity%2A> can be used by the host to provide the correct version of the workflow definition when instantiating the <xref:System.Activities.WorkflowApplication>.</span></span> <span data-ttu-id="1dd1d-119">Další informace najdete v tématu [použití identita WorkflowIdentity a správy verzí](using-workflowidentity-and-versioning.md) a [Postup: hostování více verzí pracovního postupu vedle](how-to-host-multiple-versions-of-a-workflow-side-by-side.md)sebe.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-119">For more information, see [Using WorkflowIdentity and Versioning](using-workflowidentity-and-versioning.md) and [How to: Host Multiple Versions of a Workflow Side-by-Side](how-to-host-multiple-versions-of-a-workflow-side-by-side.md).</span></span>

- <span data-ttu-id="1dd1d-120"><xref:System.ServiceModel.WorkflowServiceHost>je teď hostitel s více verzemi.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-120"><xref:System.ServiceModel.WorkflowServiceHost> is now a multi-version host.</span></span> <span data-ttu-id="1dd1d-121">Při nasazení nové verze služby pracovního postupu se nové instance vytvoří pomocí nové služby, ale existující instance se dokončí pomocí předchozí verze.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-121">When a new version of a workflow service is deployed, new instances are created using the new service, but existing instances complete using the previous version.</span></span> <span data-ttu-id="1dd1d-122">Další informace najdete v tématu [Správa verzí vedle sebe v hostiteli WorkflowServiceHost](../wcf/feature-details/side-by-side-versioning-in-workflowservicehost.md).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-122">For more information, see [Side by Side Versioning in WorkflowServiceHost](../wcf/feature-details/side-by-side-versioning-in-workflowservicehost.md).</span></span>

- <span data-ttu-id="1dd1d-123">Zavádí se dynamická aktualizace, která poskytuje mechanismus pro aktualizaci definice trvalé instance pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-123">Dynamic update is introduced which provides a mechanism for updating the definition of a persisted workflow instance.</span></span> <span data-ttu-id="1dd1d-124">Další informace najdete v tématu [Dynamická aktualizace](dynamic-update.md) a [Postupy: aktualizace definice spuštěné instance pracovního postupu](how-to-update-the-definition-of-a-running-workflow-instance.md).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-124">For more information, see [Dynamic Update](dynamic-update.md) and [How to: Update the Definition of a Running Workflow Instance](how-to-update-the-definition-of-a-running-workflow-instance.md).</span></span>

- <span data-ttu-id="1dd1d-125">K upgradu databáze trvalosti vytvořené pomocí databázových skriptů .NET Framework 4 se poskytuje skript databáze SqlWorkflowInstanceStoreSchemaUpgrade. SQL.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-125">A SqlWorkflowInstanceStoreSchemaUpgrade.sql database script is provided to upgrade persistence databases created using the .NET Framework 4 database scripts.</span></span> <span data-ttu-id="1dd1d-126">Tento skript aktualizuje .NET Framework 4 databáze trvalosti tak, aby podporovaly nové možnosti správy verzí, které byly zavedeny v .NET Framework 4,5.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-126">This script updates .NET Framework 4 persistence databases to support the new versioning capabilities introduced in .NET Framework 4.5.</span></span> <span data-ttu-id="1dd1d-127">Trvalé instance pracovního postupu v databázi mají nastavené výchozí hodnoty správy verzí a můžou se účastnit souběžného spouštění a dynamické aktualizace.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-127">The persisted workflow instances in the database are given default versioning values, and can participate in side-by-side execution and dynamic update.</span></span> <span data-ttu-id="1dd1d-128">Další informace najdete v tématu [upgrade databáze .NET Framework 4 Persistence pro podporu správy verzí pracovních postupů](using-workflowidentity-and-versioning.md#UpdatingWF4PersistenceDatabases).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-128">For more information, see [Upgrading .NET Framework 4 Persistence Databases to Support Workflow Versioning](using-workflowidentity-and-versioning.md#UpdatingWF4PersistenceDatabases).</span></span>

## <a name="activities"></a><a name="BKMK_NewActivities"></a><span data-ttu-id="1dd1d-129">Soutěž</span><span class="sxs-lookup"><span data-stu-id="1dd1d-129">Activities</span></span>

<span data-ttu-id="1dd1d-130">Integrovaná knihovna aktivit obsahuje nové aktivity a nové funkce pro existující aktivity.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-130">The built-in activity library contains new activities and new features for existing activities.</span></span>

### <a name="nopersist-scope"></a><a name="BKMK_NoPersistScope"></a><span data-ttu-id="1dd1d-131">Zachovat obor</span><span class="sxs-lookup"><span data-stu-id="1dd1d-131">NoPersist Scope</span></span>

<span data-ttu-id="1dd1d-132"><xref:System.Activities.Statements.NoPersistScope>je nová aktivita kontejneru, která brání trvalému uložení pracovního postupu při provádění podřízených aktivit oboru NoPersistScope.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-132"><xref:System.Activities.Statements.NoPersistScope> is a new container activity that prevents a workflow from being persisted when the NoPersistScope’s child activities are executing.</span></span> <span data-ttu-id="1dd1d-133">To je užitečné ve scénářích, kdy není vhodné pro pracovní postup, například když pracovní postup používá prostředky specifické pro počítač, jako jsou popisovače souborů nebo během transakcí databáze.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-133">This is useful in scenarios where it is not appropriate for the workflow to be persisted, such as when the workflow is using machine-specific resources such as file handles, or during database transactions.</span></span> <span data-ttu-id="1dd1d-134">Dříve, aby nedocházelo k trvalému výskytu během provádění aktivity, <xref:System.Activities.NativeActivity> <xref:System.Activities.NoPersistHandle> bylo nutné použít vlastní.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-134">Previously, to prevent persistence from occurring during an activity's execution, a custom <xref:System.Activities.NativeActivity> that used a <xref:System.Activities.NoPersistHandle> was required.</span></span>

### <a name="new-flowchart-capabilities"></a><a name="BKMK_NewFlowchartCapabilities"></a><span data-ttu-id="1dd1d-135">Nové možnosti vývojového diagramu</span><span class="sxs-lookup"><span data-stu-id="1dd1d-135">New Flowchart Capabilities</span></span>

<span data-ttu-id="1dd1d-136">Vývojové diagramy jsou aktualizované pro .NET Framework 4,5 a mají následující nové funkce:</span><span class="sxs-lookup"><span data-stu-id="1dd1d-136">Flowcharts are updated for .NET Framework 4.5 and have the following new capabilities:</span></span>

- <span data-ttu-id="1dd1d-137">`DisplayName`Vlastnost <xref:System.Activities.Statements.FlowSwitch%601> <xref:System.Activities.Statements.FlowDecision> aktivity nebo je upravitelná.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-137">The `DisplayName` property of a <xref:System.Activities.Statements.FlowSwitch%601> or <xref:System.Activities.Statements.FlowDecision> activity is editable.</span></span> <span data-ttu-id="1dd1d-138">To umožní návrháři aktivity Zobrazit další informace o účelu aktivity.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-138">This will let the activity designer show more information about the activity's purpose.</span></span>

- <span data-ttu-id="1dd1d-139">Vývojové diagramy mají novou vlastnost nazvanou <xref:System.Activities.Statements.Flowchart.ValidateUnconnectedNodes%2A> ; Výchozí hodnota pro tuto vlastnost je `False` .</span><span class="sxs-lookup"><span data-stu-id="1dd1d-139">Flowcharts have a new property called <xref:System.Activities.Statements.Flowchart.ValidateUnconnectedNodes%2A>; the default for this property is `False`.</span></span> <span data-ttu-id="1dd1d-140">Pokud je tato vlastnost nastavená na `True` , nepřipojené uzly vývojového diagramu vytvoří chyby ověřování.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-140">If this property is set to `True`, then unconnected flowchart nodes will produce validation errors.</span></span>

## <a name="support-for-partial-trust"></a><span data-ttu-id="1dd1d-141">Podpora částečné důvěryhodnosti</span><span class="sxs-lookup"><span data-stu-id="1dd1d-141">Support for Partial Trust</span></span>

<span data-ttu-id="1dd1d-142">Pracovní postupy v .NET Framework 4 vyžadovaly plně důvěryhodnou doménu aplikace.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-142">Workflows in .NET Framework 4 required a fully trusted application domain.</span></span> <span data-ttu-id="1dd1d-143">V .NET Framework 4,5 mohou pracovní postupy fungovat v prostředí s částečným vztahem důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-143">In .NET Framework 4.5, workflows can operate in a partial trust environment.</span></span> <span data-ttu-id="1dd1d-144">V prostředí s částečným vztahem důvěryhodnosti lze použít komponenty třetích stran bez udělení úplného přístupu k prostředkům hostitele.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-144">In a partial trust environment, third-party components can be used without granting them full access to the resources of the host.</span></span> <span data-ttu-id="1dd1d-145">Mezi obavy týkající se spouštění pracovních postupů v částečném vztahu důvěryhodnosti patří následující:</span><span class="sxs-lookup"><span data-stu-id="1dd1d-145">Some concerns about running workflows in partial trust are as follows:</span></span>

1. <span data-ttu-id="1dd1d-146">Použití starších komponent (včetně pravidel) obsažených v <xref:System.Activities.Statements.Interop> aktivitě není v případě částečné důvěryhodnosti podporováno.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-146">Using legacy components (including Rules) contained in the <xref:System.Activities.Statements.Interop> activity is not supported under partial trust.</span></span>

2. <span data-ttu-id="1dd1d-147">Spuštění pracovních postupů v částečném vztahu důvěryhodnosti v <xref:System.ServiceModel.WorkflowServiceHost> není podporováno.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-147">Running workflows in partial trust in <xref:System.ServiceModel.WorkflowServiceHost> is not supported.</span></span>

3. <span data-ttu-id="1dd1d-148">Zachování výjimek v případě částečné důvěryhodnosti je potenciální bezpečnostní hrozba.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-148">Persisting exceptions in a partial-trust scenario is a potential security threat.</span></span> <span data-ttu-id="1dd1d-149">Chcete-li zakázat zachování výjimek, je <xref:System.Activities.ExceptionPersistenceExtension> nutné do projektu přidat rozšíření typu, aby bylo možné odhlásit z trvalých výjimek.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-149">To disable persisting of exceptions, an extension of type <xref:System.Activities.ExceptionPersistenceExtension> must be added to the project in order to opt out of persisting exceptions.</span></span> <span data-ttu-id="1dd1d-150">Následující příklad kódu ukazuje, jak implementovat tento typ.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-150">The following code example demonstrates how to implement this type.</span></span>

    ```csharp
    public class ExceptionPersistenceExtension
    {
        public ExceptionPersistenceExtension()
        {
            this.PersistExceptions = false;
        }
        public bool PersistExceptions { get; set; }
    }
    ```

     <span data-ttu-id="1dd1d-151">Pokud výjimky nejsou serializován, zajistěte, aby byly výjimky použity v rámci <xref:System.Activities.Statements.NoPersistScope> .</span><span class="sxs-lookup"><span data-stu-id="1dd1d-151">If exceptions are not to be serialized, ensure that exceptions are used within a <xref:System.Activities.Statements.NoPersistScope>.</span></span>

4. <span data-ttu-id="1dd1d-152">Autoři aktivity by měli přepsat <xref:System.Activities.Activity.CacheMetadata%2A> , aby nedocházelo k automatickému spuštění reflexe modulu Workflow na typ.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-152">Activity authors should override <xref:System.Activities.Activity.CacheMetadata%2A> to avoid having the workflow runtime automatically execute reflection against the type.</span></span> <span data-ttu-id="1dd1d-153">Argumenty a podřízené aktivity nesmí být null a <xref:System.Activities.ActivityMetadata.Bind%2A> musí být explicitně volány.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-153">Arguments and child activities must be non-null, and <xref:System.Activities.ActivityMetadata.Bind%2A> must be called explicitly.</span></span> <span data-ttu-id="1dd1d-154">Další informace o přepsání najdete <xref:System.Activities.Activity.CacheMetadata%2A> v tématu [vystavení dat pomocí voláním funkce CacheMetadata](exposing-data-with-cachemetadata.md).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-154">For more information on overriding <xref:System.Activities.Activity.CacheMetadata%2A>, see [Exposing data with CacheMetadata](exposing-data-with-cachemetadata.md).</span></span> <span data-ttu-id="1dd1d-155">Instance argumentů, které jsou typu, které jsou `internal` nebo jsou **privátní** , musí být explicitně vytvořeny v, <xref:System.Activities.Activity.CacheMetadata%2A> aby nedocházelo k vytváření reflexe.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-155">Also, instances of arguments that are of a type that is `internal` or **private** must be explicitly created in  <xref:System.Activities.Activity.CacheMetadata%2A> to avoid being created by reflection.</span></span>

5. <span data-ttu-id="1dd1d-156">Typy nebudou použity <xref:System.Runtime.Serialization.ISerializable> ani <xref:System.SerializableAttribute> pro serializaci, typy, které mají být serializovány, musí podporovat <xref:System.Runtime.Serialization.DataContractSerializer> .</span><span class="sxs-lookup"><span data-stu-id="1dd1d-156">Types will not use <xref:System.Runtime.Serialization.ISerializable> or <xref:System.SerializableAttribute> for serialization; types that are to be serialized must support <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span>

6. <span data-ttu-id="1dd1d-157">Výrazy, které <xref:System.Activities.Expressions.LambdaValue%601> vyžadují <xref:System.Security.Permissions.ReflectionPermissionAttribute.RestrictedMemberAccess%2A> , a proto nebudou fungovat s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-157">Expressions that use <xref:System.Activities.Expressions.LambdaValue%601> require <xref:System.Security.Permissions.ReflectionPermissionAttribute.RestrictedMemberAccess%2A>, and thus will not work under partial trust.</span></span> <span data-ttu-id="1dd1d-158">Pracovní postupy, které používají, <xref:System.Activities.Expressions.LambdaValue%601> by měly nahradit tyto výrazy aktivitami, které jsou odvozeny z <xref:System.Activities.CodeActivity%601> .</span><span class="sxs-lookup"><span data-stu-id="1dd1d-158">Workflows that use <xref:System.Activities.Expressions.LambdaValue%601> should replace those expressions with activities that derive from <xref:System.Activities.CodeActivity%601>.</span></span> <span data-ttu-id="1dd1d-159">.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-159">.</span></span>

7. <span data-ttu-id="1dd1d-160">Výrazy nelze zkompilovat pomocí <xref:System.Activities.XamlIntegration.TextExpressionCompiler> nebo Visual Basic hostovaného kompilátoru v částečném vztahu důvěryhodnosti, ale je možné spustit dříve zkompilované výrazy.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-160">Expressions cannot be compiled using <xref:System.Activities.XamlIntegration.TextExpressionCompiler> or the Visual Basic hosted compiler in partial trust, but previously compiled expressions can be run.</span></span>

8. <span data-ttu-id="1dd1d-161">Jedno sestavení, které používá [transparentnost úrovně 2](https://aka.ms/Level2Transparency) , nelze použít v .NET Framework 4, [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] v úplném vztahu důvěryhodnosti a [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] v částečném vztahu důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-161">A single assembly that uses [Level 2 Transparency](https://aka.ms/Level2Transparency) cannot be used in .NET Framework 4, [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] in full trust, and [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] in partial trust.</span></span>

## <a name="new-designer-capabilities"></a><a name="BKMK_NewDesignerCapabilites"></a><span data-ttu-id="1dd1d-162">Nové možnosti návrháře</span><span class="sxs-lookup"><span data-stu-id="1dd1d-162">New Designer Capabilities</span></span>

### <a name="designer-search"></a><a name="BKMK_DesignerSearch"></a><span data-ttu-id="1dd1d-163">Hledání návrháře</span><span class="sxs-lookup"><span data-stu-id="1dd1d-163">Designer Search</span></span>

<span data-ttu-id="1dd1d-164">Chcete-li zvýšit možnosti správy většího pracovního postupu, mohou být pracovní postupy nyní prohledávány pomocí klíčového slova.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-164">To make larger workflows more manageable, workflows can now be searched by keyword.</span></span> <span data-ttu-id="1dd1d-165">Tato funkce je k dispozici pouze v aplikaci Visual Studio; Tato funkce není k dispozici v přehostujícím návrháři.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-165">This feature is only available in Visual Studio; this feature is not available in a rehosted designer.</span></span> <span data-ttu-id="1dd1d-166">K dispozici jsou dva druhy hledání:</span><span class="sxs-lookup"><span data-stu-id="1dd1d-166">There are two kinds of searches available:</span></span>

- <span data-ttu-id="1dd1d-167">Rychlé hledání iniciované pomocí **kombinace kláves CTRL + F** nebo **Úpravy**, **hledání a nahrazení**, **Rychlé hledání**.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-167">Quick Find, initiated with either **Ctrl+F** or **Edit**, **Find and Replace**, **Quick Find**.</span></span>

- <span data-ttu-id="1dd1d-168">Najít v souborech, které byly zahájeny pomocí **kombinace kláves CTRL + SHIFT + F** nebo **Upravit**, **Najít a nahradit**, **najdete v souborech**.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-168">Find in Files, initiated with either **Ctrl+Shift+F** or **Edit**, **Find and Replace**, **Find in Files**.</span></span>

<span data-ttu-id="1dd1d-169">Poznámka: nahrazení se nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-169">Note that Replace is not supported.</span></span>

#### <a name="quick-find"></a><a name="BKMK_QuickFind"></a><span data-ttu-id="1dd1d-170">Rychlé hledání</span><span class="sxs-lookup"><span data-stu-id="1dd1d-170">Quick Find</span></span>

<span data-ttu-id="1dd1d-171">Klíčová slova prohledaná v pracovních postupech budou odpovídat následujícím položkám návrháře:</span><span class="sxs-lookup"><span data-stu-id="1dd1d-171">Keywords searched in workflows will match the following designer items:</span></span>

- <span data-ttu-id="1dd1d-172">Vlastnosti <xref:System.Activities.Activity> objektů, <xref:System.Activities.Statements.FlowNode> objektů, <xref:System.Activities.Statements.State> objektů, <xref:System.Activities.Statements.Transition> objektů a dalších vlastních položek řízení toku.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-172">Properties of <xref:System.Activities.Activity> objects, <xref:System.Activities.Statements.FlowNode> objects, <xref:System.Activities.Statements.State> objects, <xref:System.Activities.Statements.Transition> objects, and other custom flow-control items.</span></span>

- <span data-ttu-id="1dd1d-173">Proměnné</span><span class="sxs-lookup"><span data-stu-id="1dd1d-173">Variables</span></span>

- <span data-ttu-id="1dd1d-174">Arguments</span><span class="sxs-lookup"><span data-stu-id="1dd1d-174">Arguments</span></span>

- <span data-ttu-id="1dd1d-175">Výrazy</span><span class="sxs-lookup"><span data-stu-id="1dd1d-175">Expressions</span></span>

<span data-ttu-id="1dd1d-176">Rychlé hledání se provádí ve <xref:System.Activities.Presentation.Model.ModelItem> stromové struktuře návrháře.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-176">Quick Find is performed on the designer's <xref:System.Activities.Presentation.Model.ModelItem> tree.</span></span> <span data-ttu-id="1dd1d-177">Při rychlém hledání se obory názvů importované do definice pracovního postupu nehledají.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-177">Quick Find will not locate namespaces imported in the workflow definition.</span></span>

#### <a name="find-in-files"></a><a name="BKMK_FindInFiles"></a><span data-ttu-id="1dd1d-178">Najít v souborech</span><span class="sxs-lookup"><span data-stu-id="1dd1d-178">Find in Files</span></span>

<span data-ttu-id="1dd1d-179">Klíčová slova prohledaná v pracovních postupech budou odpovídat skutečnému obsahu souborů pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-179">Keywords searched in workflows will match the actual content of the workflow files.</span></span> <span data-ttu-id="1dd1d-180">Výsledky hledání se zobrazí v podokně najít Výsledky sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-180">The search results will be shown in Visual Studio Find Results view pane.</span></span> <span data-ttu-id="1dd1d-181">Dvojím kliknutím na výslednou položku přejdete na aktivitu, která obsahuje shodu v Návrháři pracovních postupů.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-181">Double-clicking the result item will navigate to the activity which contains the match in workflow designer.</span></span>

### <a name="delete-context-menu-item-in-variable-and-argument-designer"></a><a name="BKMK_VariableDeleteContextMenu"></a><span data-ttu-id="1dd1d-182">Odstranit položku kontextové nabídky v Návrháři proměnných a argumentů</span><span class="sxs-lookup"><span data-stu-id="1dd1d-182">Delete context menu item in variable and argument designer</span></span>

<span data-ttu-id="1dd1d-183">V .NET Framework 4 lze proměnné a argumenty odstranit pouze v Návrháři pomocí klávesnice.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-183">In .NET Framework 4, variables and arguments could only be deleted in the designer using the keyboard.</span></span> <span data-ttu-id="1dd1d-184">Počínaje .NET Framework 4,5 lze proměnné a argumenty odstranit pomocí místní nabídky.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-184">Starting with .NET Framework 4.5, variables and arguments can be deleted using the context menu.</span></span>

<span data-ttu-id="1dd1d-185">Následující snímek obrazovky ukazuje kontextovou nabídku návrháře proměnných a argumentů.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-185">The following screenshot shows the variable and argument designer context menu.</span></span>

![Kontextová nabídka návrháře proměnných a argumentů](./media/whats-new-in-wf-in-dotnet/designer-context-menu.png)

### <a name="auto-surround-with-sequence"></a><a name="BKMK_AutoSurround"></a><span data-ttu-id="1dd1d-187">Automaticky uzavřít sekvencí</span><span class="sxs-lookup"><span data-stu-id="1dd1d-187">Auto-surround with Sequence</span></span>

<span data-ttu-id="1dd1d-188">Vzhledem k tomu, že pracovní postup nebo určité aktivity kontejneru (například <xref:System.Activities.Statements.NoPersistScope> ) může obsahovat pouze jednu aktivitu těla, přidání druhé aktivity, která vývojář vyžádala odstranit první aktivitu, přidat <xref:System.Activities.Statements.Sequence> aktivitu a pak přidat obě aktivity do aktivity sekvence.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-188">Since a workflow or certain container activities (such as <xref:System.Activities.Statements.NoPersistScope>) can only contain a single body activity, adding a second activity required the developer to delete the first activity, add a <xref:System.Activities.Statements.Sequence> activity, and then add both activities to the sequence activity.</span></span> <span data-ttu-id="1dd1d-189">Počínaje .NET Framework 4,5 se při přidávání druhé aktivity na plochu návrháře `Sequence` automaticky vytvoří aktivita, která zabalí obě aktivity.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-189">Starting with .NET Framework 4.5, when adding a second activity to the designer surface, a `Sequence` activity will be automatically created to wrap both activities.</span></span>

<span data-ttu-id="1dd1d-190">Následující snímek obrazovky ukazuje `WriteLine` aktivitu v rámci `Body` `NoPersistScope` .</span><span class="sxs-lookup"><span data-stu-id="1dd1d-190">The following screenshot shows a `WriteLine` activity in the `Body` of a `NoPersistScope`.</span></span>

![Aktivita WriteLine v těle aktivity oboru NoPersistScope](./media/whats-new-in-wf-in-dotnet/auto-surround-write-line-activity.png)

<span data-ttu-id="1dd1d-192">Na následujícím snímku obrazovky se zobrazuje automaticky vytvořená `Sequence` aktivita v `Body` okamžiku, kdy `WriteLine` je druhý vyřazen pod první.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-192">The following screenshot shows the automatically created `Sequence` activity in the `Body` when a second `WriteLine` is dropped below the first.</span></span>

![Automaticky vytvořená sekvence v těle oboru nopersistscopeu.](./media/whats-new-in-wf-in-dotnet/auto-surround-sequence-activity.png)

### <a name="pan-mode"></a><a name="BKMK_PanMode"></a><span data-ttu-id="1dd1d-194">Režim posouvání</span><span class="sxs-lookup"><span data-stu-id="1dd1d-194">Pan Mode</span></span>

<span data-ttu-id="1dd1d-195">Chcete-li snadněji procházet rozsáhlý pracovní postup v návrháři, můžete povolit režim posouvání, který vývojářům umožňuje kliknout a přetáhnout, aby přesunul viditelnou část pracovního postupu, místo aby bylo nutné používat posuvníky.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-195">To more easily navigate a large workflow in the designer, pan mode can be enabled, allowing the developer to click and drag to move the visible portion of the workflow, rather than needing to use the scroll bars.</span></span> <span data-ttu-id="1dd1d-196">Tlačítko pro aktivaci režimu posunu je v pravém dolním rohu návrháře.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-196">The button to activate pan mode is in the lower right corner of the designer.</span></span>

<span data-ttu-id="1dd1d-197">Na následujícím snímku obrazovky vidíte tlačítko posouvání, které se nachází v pravém dolním rohu návrháře pracovních postupů.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-197">The following screenshot shows the pan button which is located at the bottom right corner of the workflow designer.</span></span>

![Tlačítko posouvání zvýrazněné v Návrháři postupu.](./media/whats-new-in-wf-in-dotnet/pan-button-workflow-designer.png)

<span data-ttu-id="1dd1d-199">K posouvání návrháře pracovních postupů můžete použít také prostřední tlačítko myši nebo MEZERNÍK.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-199">The middle mouse button or space bar can also be used to pan the workflow designer.</span></span>

### <a name="multi-select"></a><a name="BKMK_MultiSelect"></a><span data-ttu-id="1dd1d-200">Vícenásobný výběr</span><span class="sxs-lookup"><span data-stu-id="1dd1d-200">Multi-select</span></span>

<span data-ttu-id="1dd1d-201">Najednou lze vybrat více aktivit, buď přetažením obdélníku kolem nich (když režim posouvání není povolen), nebo podržením klávesy CTRL a kliknutím na požadované aktivity jednu po druhé.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-201">Multiple activities can be selected at one time, either by dragging a rectangle around them (when pan mode is not enabled), or by holding down Ctrl and click the desired activities one by one.</span></span>

<span data-ttu-id="1dd1d-202">V Návrháři lze také přetáhnout a vyřadit více výběrů aktivit a lze je také interagovat pomocí místní nabídky.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-202">Multiple activity selections can also be dragged and dropped within the designer, and can also be interacted with using the context menu.</span></span>

### <a name="outline-view-of-workflow-items"></a><a name="BKMK_DocumentOutline"></a><span data-ttu-id="1dd1d-203">zobrazení Osnova položek pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="1dd1d-203">Outline view of workflow items</span></span>

<span data-ttu-id="1dd1d-204">Aby bylo možné hierarchické pracovní postupy snáze procházet, jsou komponenty pracovního postupu zobrazeny v zobrazení osnovy ve stylu stromu.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-204">In order to make hierarchical workflows easier to navigate, components of a workflow are shown in a tree-style outline view.</span></span> <span data-ttu-id="1dd1d-205">Zobrazení Osnova se zobrazí v zobrazení **Osnova dokumentu** .</span><span class="sxs-lookup"><span data-stu-id="1dd1d-205">The outline view is displayed in the **Document Outline** view.</span></span> <span data-ttu-id="1dd1d-206">Chcete-li otevřít toto zobrazení, vyberte v horní nabídce možnost **zobrazení**, **ostatní okna**, **Osnova dokumentu**nebo stiskněte klávesovou zkratku CTRL W, U.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-206">To open this view, from the top menu, select **View**, **Other Windows**, **Document Outline**, or press Ctrl W,U.</span></span> <span data-ttu-id="1dd1d-207">Kliknutím na uzel v zobrazení osnovy přejdete na odpovídající aktivitu v Návrháři pracovních postupů a zobrazení osnovy se aktualizuje tak, aby se zobrazily aktivity vybrané v návrháři.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-207">Clicking on a node in outline view will navigate to the corresponding activity in the workflow designer, and the outline view will be updated to show activities that are selected in the designer.</span></span>

<span data-ttu-id="1dd1d-208">Následující snímek obrazovky dokončeného pracovního postupu z [kurzu Začínáme](getting-started-tutorial.md) ukazuje zobrazení osnovy s sekvenčním pracovním postupem.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-208">The following screenshot of the completed workflow from the [Getting Started Tutorial](getting-started-tutorial.md) shows the outline view with a sequential workflow.</span></span>

![Snímek obrazovky se zobrazením osnovy a sekvenčním pracovním postupem v aplikaci Visual Studio.](./media/whats-new-in-wf-in-dotnet/outline-view-in-workflow-designer.jpg)

### <a name="c-expressions"></a><a name="BKMK_CSharpExpressions"></a><span data-ttu-id="1dd1d-210">Výrazy jazyka C#</span><span class="sxs-lookup"><span data-stu-id="1dd1d-210">C# Expressions</span></span>

<span data-ttu-id="1dd1d-211">Před .NET Framework 4,5 se všechny výrazy v pracovních postupech daly zapisovat jenom v Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-211">Prior to .NET Framework 4.5, all expressions in workflows could only be written in Visual Basic.</span></span> <span data-ttu-id="1dd1d-212">V .NET Framework 4,5 jsou výrazy Visual Basic používány pouze pro projekty vytvořené pomocí Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-212">In .NET Framework 4.5, Visual Basic expressions are only used for projects created using Visual Basic.</span></span> <span data-ttu-id="1dd1d-213">Projekty Visual C# nyní používají jazyk C# pro výrazy.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-213">Visual C# projects now use C# for expressions.</span></span> <span data-ttu-id="1dd1d-214">K dispozici je plně funkční editor výrazů jazyka C#, který nabízí funkce, jako je například zvýrazňování gramatiky a IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-214">A fully functional C# expression editor is provided which capabilities such as grammar highlighting and intellisense.</span></span> <span data-ttu-id="1dd1d-215">Projekty pracovního postupu C# vytvořené v předchozích verzích, které používají Visual Basic výrazy budou fungovat i nadále.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-215">C# workflow projects created in previous versions that use Visual Basic expressions will continue to work.</span></span>

<span data-ttu-id="1dd1d-216">Výrazy jazyka C# jsou ověřovány v době návrhu.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-216">C# expressions are validated at design-time.</span></span> <span data-ttu-id="1dd1d-217">Chyby ve výrazech jazyka C# budou označeny červeným podtržením.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-217">Errors in C# expressions will be marked with a red wavy underline.</span></span>

<span data-ttu-id="1dd1d-218">Další informace o výrazech jazyka C# naleznete v tématu [výrazy jazyka c#](csharp-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-218">For more information about C# expressions, see [C# Expressions](csharp-expressions.md).</span></span>

### <a name="more-control-of-visibility-of-shell-bar-and-header-items"></a><a name="BKMK_Visibility"></a><span data-ttu-id="1dd1d-219">Větší kontrola nad viditelností položek v panelu prostředí a v záhlaví</span><span class="sxs-lookup"><span data-stu-id="1dd1d-219">More control of visibility of shell bar and header items</span></span>

<span data-ttu-id="1dd1d-220">V přehostujícím Návrháři nemusí některé standardní ovládací prvky uživatelského rozhraní mít význam pro daný pracovní postup a mohou být vypnuty.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-220">In a rehosted designer, some of the standard UI controls may not have meaning for a given workflow, and may be turned off.</span></span> <span data-ttu-id="1dd1d-221">V .NET Framework 4 se toto přizpůsobení podporuje jenom na panelu prostředí v dolní části návrháře.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-221">In .NET Framework 4, this customization is only supported by the shell bar at the bottom of the designer.</span></span> <span data-ttu-id="1dd1d-222">V .NET Framework 4,5 lze upravit viditelnost položek hlaviček prostředí v horní části návrháře nastavením <xref:System.Activities.Presentation.View.DesignerView.WorkflowShellHeaderItemsVisibility%2A> příslušné <xref:System.Activities.Presentation.View.ShellHeaderItemsVisibility> hodnoty.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-222">In .NET Framework 4.5, the visibility of shell header items at the top of the designer can be adjusted by setting <xref:System.Activities.Presentation.View.DesignerView.WorkflowShellHeaderItemsVisibility%2A> with the appropriate <xref:System.Activities.Presentation.View.ShellHeaderItemsVisibility> value.</span></span>

### <a name="auto-connect-and-auto-insert-in-flowchart-and-state-machine-workflows"></a><a name="BKMK_AutoConnect"></a><span data-ttu-id="1dd1d-223">Automatické připojení a automatické vkládání v pracovních postupech vývojových diagramů a stavových počítačů</span><span class="sxs-lookup"><span data-stu-id="1dd1d-223">Auto-connect and auto-insert in Flowchart and State Machine workflows</span></span>

<span data-ttu-id="1dd1d-224">V .NET Framework 4 bylo nutné přidat připojení mezi uzly v pracovním postupu vývojového diagramu ručně.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-224">In .NET Framework 4, connections between nodes in a Flowchart workflow had to be added manually.</span></span> <span data-ttu-id="1dd1d-225">V uzlech .NET Framework 4,5 mají uzly vývojového a stavového počítače automaticky propojené body, které se zobrazí při přetažení aktivity z panelu nástrojů na plochu návrháře.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-225">In .NET Framework 4.5, Flowchart and State Machine nodes have auto-connect points that become visible when an activity is dragged from the toolbox onto the designer surface.</span></span> <span data-ttu-id="1dd1d-226">Vyřazení aktivity v jednom z těchto bodů automaticky přidá aktivitu spolu s potřebným připojením.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-226">Dropping an activity on one of these points automatically adds the activity along with the necessary connection.</span></span>

<span data-ttu-id="1dd1d-227">Následující snímek obrazovky ukazuje body připojení, které se zobrazí při přetažení aktivity ze sady nástrojů.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-227">The following screenshot shows the attachment points that become visible when an activity is dragged from the toolbox.</span></span>

![Počáteční uzel vývojového diagramu znázorňující body automatického připojení](./media/whats-new-in-wf-in-dotnet/auto-connect-points-start-node.png)

<span data-ttu-id="1dd1d-229">Aktivity lze také přetáhnout na propojení mezi uzly vývojového diagramu a stavy a automaticky tak vkládat uzel mezi dva ostatní uzly.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-229">Activities can also be dragged onto connections between flowchart nodes and states to auto-insert the node between two other nodes.</span></span> <span data-ttu-id="1dd1d-230">Na následujícím snímku obrazovky vidíte zvýrazněný spojovací řádek, kde je možné aktivity přetáhnout z panelu nástrojů a vyřadit.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-230">The following screenshot shows the highlighted connecting line where activities can be dragged from the toolbox and dropped.</span></span>

![Automatický vložení popisovače pro vyřazování aktivit](./media/whats-new-in-wf-in-dotnet/auto-insert-connecting-line.png)

### <a name="designer-annotations"></a><a name="BKMK_Annotations"></a><span data-ttu-id="1dd1d-232">Poznámky návrháře</span><span class="sxs-lookup"><span data-stu-id="1dd1d-232">Designer Annotations</span></span>

<span data-ttu-id="1dd1d-233">Aby bylo možné vyvíjet větší pracovní postupy, Návrhář nyní podporuje přidávání poznámek, které pomáhají sledovat proces návrhu.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-233">To facilitate developing larger workflows, the designer now supports adding annotations to help keep track of the design process.</span></span> <span data-ttu-id="1dd1d-234">Anotace lze přidat k aktivitám, stavům, uzlům vývojového diagramu, proměnným a argumentům.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-234">Annotation can be added to activities, states, flowchart nodes, variables and arguments.</span></span> <span data-ttu-id="1dd1d-235">Následující snímek obrazovky ukazuje místní nabídku, která se používá k přidání poznámek do návrháře.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-235">The following screenshot shows the context menu used to add annotations to the designer.</span></span>

![Snímek obrazovky znázorňující nabídku pro přidání poznámek](./media/whats-new-in-wf-in-dotnet/designer-annotations-context-menu.png)

### <a name="debugging-states"></a><span data-ttu-id="1dd1d-237">Stavy ladění</span><span class="sxs-lookup"><span data-stu-id="1dd1d-237">Debugging states</span></span>

<span data-ttu-id="1dd1d-238">V .NET Framework 4 neaktivity prvky nemohou podporovat ladicí zarážky, protože nebyly jednotkami provádění.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-238">In .NET Framework 4, non-activity elements could not support debug breakpoints since they were not units of execution.</span></span> <span data-ttu-id="1dd1d-239">Tato verze poskytuje mechanismus pro přidání zarážek do <xref:System.Activities.Statements.State> objektů.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-239">This release provides a mechanism for adding breakpoints to <xref:System.Activities.Statements.State> objects.</span></span> <span data-ttu-id="1dd1d-240">Je-li zarážka nastavena na <xref:System.Activities.Statements.State> , spuštění bude přerušeno, když je stav převeden na, před tím, než se naplánují jeho aktivity nebo události vstupu.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-240">When a breakpoint is set on a <xref:System.Activities.Statements.State>, execution will break when the state is transitioned to, before its entry activities or triggers are scheduled.</span></span>

### <a name="define-and-consume-activitydelegate-objects-in-the-designer"></a><a name="BKMK_ActivityDelegates"></a><span data-ttu-id="1dd1d-241">Definování a využívání objektů ActivityDelegate v Návrháři</span><span class="sxs-lookup"><span data-stu-id="1dd1d-241">Define and consume ActivityDelegate objects in the designer</span></span>

<span data-ttu-id="1dd1d-242">Aktivity v .NET Framework 4 používaly <xref:System.Activities.ActivityDelegate> objekty k vystavování bodů provádění, kde jiné části pracovního postupu mohou komunikovat s prováděním pracovního postupu, ale použití těchto bodů spuštění obvykle vyžaduje spravedlivé množství kódu.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-242">Activities in .NET Framework 4 used <xref:System.Activities.ActivityDelegate> objects to expose execution points where other parts of the workflow could interact with a workflow's execution, but using these execution points usually required a fair amount of code.</span></span> <span data-ttu-id="1dd1d-243">V této verzi můžou vývojáři definovat a využívat delegáty aktivity pomocí návrháře pracovních postupů.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-243">In this release, developers can define and consume activity delegates using the workflow designer.</span></span> <span data-ttu-id="1dd1d-244">Další informace naleznete v tématu [How to: Define and spotřebovávají Delegates Activity Delegates in the Návrhář postupu provádění](/visualstudio/workflow-designer/how-to-define-and-consume-activity-delegates-in-the-workflow-designer).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-244">For more information, see [How to: Define and consume activity delegates in the Workflow Designer](/visualstudio/workflow-designer/how-to-define-and-consume-activity-delegates-in-the-workflow-designer).</span></span>

### <a name="build-time-validation"></a><a name="BKMK_BuildTimeValidation"></a><span data-ttu-id="1dd1d-245">Ověřování při sestavení</span><span class="sxs-lookup"><span data-stu-id="1dd1d-245">Build-time validation</span></span>

<span data-ttu-id="1dd1d-246">V .NET Framework 4 se chyby ověření pracovního postupu nepočítají jako chyby sestavení během sestavování projektu pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-246">In .NET Framework 4, workflow validation errors weren’t counted as build errors during the build of a workflow project.</span></span> <span data-ttu-id="1dd1d-247">To znamenalo, že sestavení projektu pracovního postupu může být úspěšné i v případě, že došlo k chybám ověření pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-247">This meant that building a workflow project could succeed even when there were workflow validation errors.</span></span> <span data-ttu-id="1dd1d-248">V .NET Framework 4,5 způsobí chyby ověření pracovního postupu selhání sestavení.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-248">In .NET Framework 4.5, workflow validation errors cause the build to fail.</span></span>

### <a name="design-time-background-validation"></a><a name="BKMK_DesignTimeValidation"></a><span data-ttu-id="1dd1d-249">Ověřování na pozadí v době návrhu</span><span class="sxs-lookup"><span data-stu-id="1dd1d-249">Design-time background validation</span></span>

<span data-ttu-id="1dd1d-250">V .NET Framework 4 byly pracovní postupy ověřeny jako proces na popředí, což by mohlo potenciálně blokovat uživatelské rozhraní během složitých nebo časově náročných ověřovacích procesů.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-250">In .NET Framework 4, workflows were validated as a foreground process, which could potentially block the UI during complex or time-consuming validation processes.</span></span> <span data-ttu-id="1dd1d-251">Ověření pracovního postupu teď probíhá na vlákně na pozadí, takže uživatelské rozhraní není blokované.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-251">Workflow validation now takes place on a background thread, so that the UI is not blocked.</span></span>

### <a name="view-state-located-in-a-separate-location-in-xaml-files"></a><a name="BKMK_ViewState"></a><span data-ttu-id="1dd1d-252">Zobrazit stav umístěný v samostatném umístění v souborech XAML</span><span class="sxs-lookup"><span data-stu-id="1dd1d-252">View state located in a separate location in XAML files</span></span>

<span data-ttu-id="1dd1d-253">V .NET Framework 4 jsou informace o stavu pracovního postupu uloženy v rámci souboru XAML v mnoha různých umístěních.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-253">In .NET Framework 4, the view state information for a workflow is stored across the XAML file in many different locations.</span></span> <span data-ttu-id="1dd1d-254">To je nepraktické pro vývojáře, kteří chtějí přímo číst XAML, nebo psát kód pro odebrání informací o stavu zobrazení.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-254">This is inconvenient for developers who want to read XAML directly, or write code to remove the view state information.</span></span> <span data-ttu-id="1dd1d-255">V .NET Framework 4,5 jsou informace o stavu zobrazení v souboru XAML serializovány jako samostatný prvek v souboru XAML.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-255">In .NET Framework 4.5, the view state information in the XAML file is serialized as a separate element in the XAML file.</span></span> <span data-ttu-id="1dd1d-256">Vývojáři můžou snadno vyhledat a upravit informace o stavu aktivity nebo stav zobrazení úplně odebrat.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-256">Developers can easily locate and edit the view state information of an activity, or remove the view state altogether.</span></span>

### <a name="expression-extensibility"></a><a name="BKMK_ExpressionExtensibility"></a><span data-ttu-id="1dd1d-257">Rozšiřitelnost výrazu</span><span class="sxs-lookup"><span data-stu-id="1dd1d-257">Expression extensibility</span></span>

<span data-ttu-id="1dd1d-258">V .NET Framework 4,5 poskytujeme vývojářům možnost vytvářet vlastní výrazy a prostředí pro tvorbu výrazů, které je možné zapojit do návrháře pracovních postupů.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-258">In .NET Framework 4.5, we provide a way for developers to create their own expression and expression authoring experience that can be plugged into the workflow designer.</span></span>

### <a name="opt-in-for-workflow-45-features-in-rehosted-designer"></a><a name="BKMK_BackwardCompatRehostedDesigner"></a><span data-ttu-id="1dd1d-259">Výslovný souhlas s funkcemi pracovního postupu 4,5 v přehostovaném návrháři</span><span class="sxs-lookup"><span data-stu-id="1dd1d-259">Opt-in for Workflow 4.5 features in rehosted designer</span></span>

<span data-ttu-id="1dd1d-260">Aby se zachovala zpětná kompatibilita, některé nové funkce, které jsou součástí .NET Framework 4,5, nejsou ve výchozím nastavení v přehostujícím návrháři povolené.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-260">To preserve backward compatibility, some new features included in .NET Framework 4.5 are not enabled by default in the rehosted designer.</span></span> <span data-ttu-id="1dd1d-261">K tomu je potřeba zajistit, aby existující aplikace používající znovu hostujícího návrháře nebyly přerušeny aktualizací na nejnovější verzi.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-261">This is to ensure that existing applications that use the rehosted designer are not broken by updating to the latest version.</span></span> <span data-ttu-id="1dd1d-262">Chcete-li povolit nové funkce v novém hostovaném návrháři, buď nastavte <xref:System.Activities.Presentation.DesignerConfigurationService.TargetFrameworkName%2A> na ".NET Framework 4,5", nebo nastavte jednotlivé členy <xref:System.Activities.Presentation.DesignerConfigurationService> pro povolení jednotlivých funkcí.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-262">To enable new features in the rehosted designer, either set <xref:System.Activities.Presentation.DesignerConfigurationService.TargetFrameworkName%2A> to ".NET Framework 4.5", or set individual members of <xref:System.Activities.Presentation.DesignerConfigurationService> to enable individual features.</span></span>

## <a name="new-workflow-development-models"></a><a name="BKMK_NewWFModels"></a><span data-ttu-id="1dd1d-263">Nové modely vývoje pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="1dd1d-263">New Workflow Development Models</span></span>

<span data-ttu-id="1dd1d-264">Kromě vývojových a sekvenčních vývojových modelů pracovních postupů tato verze zahrnuje pracovní postupy stavového počítače a služby pracovního postupu pro první kontrakt.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-264">In addition to flowchart and sequential workflow development models, this release includes State Machine workflows, and contract-first workflow services.</span></span>

### <a name="state-machine-workflows"></a><a name="BKMK_StateMachine"></a><span data-ttu-id="1dd1d-265">Pracovní postupy stavového stroje</span><span class="sxs-lookup"><span data-stu-id="1dd1d-265">State machine workflows</span></span>

<span data-ttu-id="1dd1d-266">Pracovní postupy stavového počítače byly představeny jako součást .NET Framework 4, verze 4.0.1 v [Microsoft .NET Framework 4 Platform Update 1](https://docs.microsoft.com/archive/blogs/endpoint/microsoft-net-framework-4-platform-update-1).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-266">State machine workflows were introduced as part of the .NET Framework 4, version 4.0.1 in the [Microsoft .NET Framework 4 Platform Update 1](https://docs.microsoft.com/archive/blogs/endpoint/microsoft-net-framework-4-platform-update-1).</span></span> <span data-ttu-id="1dd1d-267">Tato aktualizace obsahuje několik nových tříd a aktivit, které vývojářům umožňují vytvářet pracovní postupy stavového počítače.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-267">This update included several new classes and activities which allowed developers to create state machine workflows.</span></span> <span data-ttu-id="1dd1d-268">Tyto třídy a aktivity byly aktualizovány pro .NET Framework 4,5.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-268">These classes and activities have been updated for .NET Framework 4.5.</span></span> <span data-ttu-id="1dd1d-269">Aktualizace zahrnují:</span><span class="sxs-lookup"><span data-stu-id="1dd1d-269">Updates include:</span></span>

1. <span data-ttu-id="1dd1d-270">Možnost nastavovat zarážky na stavech</span><span class="sxs-lookup"><span data-stu-id="1dd1d-270">The ability to set breakpoints on states</span></span>

2. <span data-ttu-id="1dd1d-271">Možnost Kopírovat a vkládat přechody v Návrháři pracovních postupů</span><span class="sxs-lookup"><span data-stu-id="1dd1d-271">The ability to copy and paste transitions in the workflow designer</span></span>

3. <span data-ttu-id="1dd1d-272">Podpora návrháře pro vytvoření přechodu na sdílené triggery</span><span class="sxs-lookup"><span data-stu-id="1dd1d-272">Designer support for shared trigger transition creation</span></span>

4. <span data-ttu-id="1dd1d-273">Aktivity, které slouží k vytváření pracovních postupů stavového počítače, včetně: <xref:System.Activities.Statements.StateMachine> , <xref:System.Activities.Statements.State> a<xref:System.Activities.Statements.Transition></span><span class="sxs-lookup"><span data-stu-id="1dd1d-273">Activities used to create State Machine workflows, including: <xref:System.Activities.Statements.StateMachine>, <xref:System.Activities.Statements.State>, and <xref:System.Activities.Statements.Transition></span></span>

<span data-ttu-id="1dd1d-274">Následující snímek obrazovky ukazuje pracovní postup dokončeného stavu počítače z kroku [Začínáme kurzu](getting-started-tutorial.md) [Postup: vytvoření pracovního postupu stavového stroje](how-to-create-a-state-machine-workflow.md).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-274">The following screenshot shows the completed state machine workflow from the [Getting Started Tutorial](getting-started-tutorial.md) step [How to: Create a State Machine Workflow](how-to-create-a-state-machine-workflow.md).</span></span>

![Obrázek zobrazující pracovní postup dokončeného stavového počítače.](./media/whats-new-in-wf-in-dotnet/complete-state-machine-workflow.jpg)

<span data-ttu-id="1dd1d-276">Další informace o vytváření pracovních postupů stavových počítačů najdete v tématu [pracovní postupy stavového stroje](state-machine-workflows.md).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-276">For more information on creating state machine workflows, see [State Machine Workflows](state-machine-workflows.md).</span></span>

### <a name="contract-first-workflow-development"></a><a name="BKMK_ContractFirst"></a><span data-ttu-id="1dd1d-277">Vývoj pracovního postupu prvního kontraktu</span><span class="sxs-lookup"><span data-stu-id="1dd1d-277">Contract-first workflow development</span></span>

<span data-ttu-id="1dd1d-278">Nástroj pro vývoj pracovního postupu první smlouvy umožňuje vývojářům nejprve navrhnout kontrakt v kódu a pak s několika kliknutími v sadě Visual Studio automaticky vygenerovat šablonu aktivity v sadě nástrojů reprezentující jednotlivé operace.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-278">The contract-first workflow development tool allows the developer to design a contract in code first, then, with a few clicks in Visual Studio, automatically generate an activity template in the toolbox representing each operation.</span></span> <span data-ttu-id="1dd1d-279">Tyto aktivity se pak použijí k vytvoření pracovního postupu, který implementuje operace definované smlouvou.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-279">These activities are then used to create a workflow that implements the operations defined by the contract.</span></span> <span data-ttu-id="1dd1d-280">Návrhář pracovního postupu ověří službu pracovního postupu, aby se zajistilo, že tyto operace budou implementované a že signatura pracovního postupu odpovídá signatuře smlouvy.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-280">The workflow designer will validate the workflow service to ensure that these operations are implemented and the signature of the workflow matches the contract signature.</span></span> <span data-ttu-id="1dd1d-281">Vývojář může také přidružit službu pracovního postupu ke kolekci implementovaných smluv.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-281">The developer can also associate a workflow service with a collection of implemented contracts.</span></span> <span data-ttu-id="1dd1d-282">Další informace o vývoji služeb pracovních postupů prvního kontraktu najdete v tématu [Postupy: vytvoření služby pracovního postupu, která využívá stávající kontrakt služby](how-to-create-a-workflow-service-that-consumes-an-existing-service-contract.md).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-282">For more information on contract-first workflow service development, see [How to: Create a workflow service that consumes an existing service contract](how-to-create-a-workflow-service-that-consumes-an-existing-service-contract.md).</span></span>
