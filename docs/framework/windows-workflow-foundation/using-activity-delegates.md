---
title: Používání delegátů aktivit
ms.date: 03/30/2017
ms.assetid: e33cf876-8979-440b-9b23-4a12d1139960
ms.openlocfilehash: cbcc8f8e498be4f79f8fed5af7cd3557d7c55981
ms.sourcegitcommit: a4f9b754059f0210e29ae0578363a27b9ba84b64
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/05/2019
ms.locfileid: "74837568"
---
# <a name="using-activity-delegates"></a><span data-ttu-id="ce01d-102">Používání delegátů aktivit</span><span class="sxs-lookup"><span data-stu-id="ce01d-102">Using Activity Delegates</span></span>
<span data-ttu-id="ce01d-103">Delegáti aktivity umožňují autorům aktivity vystavovat zpětná volání s konkrétními podpisy, pro které mohou uživatelé aktivity poskytovat obslužné rutiny založené na aktivitách.</span><span class="sxs-lookup"><span data-stu-id="ce01d-103">Activity delegates enable activity authors to expose callbacks with specific signatures, for which users of the activity can provide activity-based handlers.</span></span> <span data-ttu-id="ce01d-104">K dispozici jsou dva typy delegátů aktivit: <xref:System.Activities.ActivityAction%601> slouží k definování delegátů aktivity, které nemají návratovou hodnotu, a <xref:System.Activities.ActivityFunc%601> slouží k definování delegátů aktivity, které mají návratovou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ce01d-104">Two types of activity delegates are available: <xref:System.Activities.ActivityAction%601> is used to define activity delegates that do not have a return value, and <xref:System.Activities.ActivityFunc%601> is used to define activity delegates that do have a return value.</span></span>

<span data-ttu-id="ce01d-105">Delegáty aktivity jsou užitečné ve scénářích, kdy musí být podřízená aktivita omezená na určitý podpis.</span><span class="sxs-lookup"><span data-stu-id="ce01d-105">Activity delegates are useful in scenarios where a child activity must be constrained to having a certain signature.</span></span> <span data-ttu-id="ce01d-106">Například aktivita <xref:System.Activities.Statements.While> může obsahovat jakýkoli typ podřízené aktivity bez omezení, ale tělo aktivity <xref:System.Activities.Statements.ForEach%601> je <xref:System.Activities.ActivityAction%601>a podřízená aktivita, která je nakonec spouštěna <xref:System.Activities.Statements.ForEach%601>, musí mít <xref:System.Activities.InArgument%601>, který je stejný jako stejný typ členů kolekce, které <xref:System.Activities.Statements.ForEach%601> výčet.</span><span class="sxs-lookup"><span data-stu-id="ce01d-106">For example, a <xref:System.Activities.Statements.While> activity can contain any type of child activity with no constraints, but the body of a <xref:System.Activities.Statements.ForEach%601> activity is an <xref:System.Activities.ActivityAction%601>, and the child activity that is ultimately executed by <xref:System.Activities.Statements.ForEach%601> must have an <xref:System.Activities.InArgument%601> that is the same type of the members of the collection that the <xref:System.Activities.Statements.ForEach%601> enumerates.</span></span>

## <a name="using-activityaction"></a><span data-ttu-id="ce01d-107">Použití ActivityAction</span><span class="sxs-lookup"><span data-stu-id="ce01d-107">Using ActivityAction</span></span>

<span data-ttu-id="ce01d-108">Několik aktivit [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] používá akce aktivity, jako je aktivita <xref:System.Activities.Statements.Catch> a aktivita <xref:System.Activities.Statements.ForEach%601>.</span><span class="sxs-lookup"><span data-stu-id="ce01d-108">Several [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] activities use activity actions, such as the <xref:System.Activities.Statements.Catch> activity and the <xref:System.Activities.Statements.ForEach%601> activity.</span></span> <span data-ttu-id="ce01d-109">V každém případě akce aktivity představuje umístění, kde Autor pracovního postupu určuje aktivitu, která poskytne požadované chování při vytváření pracovního postupu pomocí jedné z těchto aktivit.</span><span class="sxs-lookup"><span data-stu-id="ce01d-109">In each case, the activity action represents a location where the workflow author specifies an activity to provide the desired behavior when composing a workflow using one of these activities.</span></span> <span data-ttu-id="ce01d-110">V následujícím příkladu se <xref:System.Activities.Statements.ForEach%601> aktivita používá k zobrazení textu v okně konzoly.</span><span class="sxs-lookup"><span data-stu-id="ce01d-110">In the following example, a <xref:System.Activities.Statements.ForEach%601> activity is used to display text to the console window.</span></span> <span data-ttu-id="ce01d-111">Tělo <xref:System.Activities.Statements.ForEach%601> je určeno pomocí <xref:System.Activities.ActivityAction%601>, která odpovídá typu <xref:System.Activities.Statements.ForEach%601> což je řetězec.</span><span class="sxs-lookup"><span data-stu-id="ce01d-111">The body of the <xref:System.Activities.Statements.ForEach%601> is specified by using an <xref:System.Activities.ActivityAction%601> that matches the type of the <xref:System.Activities.Statements.ForEach%601> which is string.</span></span> <span data-ttu-id="ce01d-112">U <xref:System.Activities.Statements.WriteLine> aktivity zadané v <xref:System.Activities.ActivityDelegate.Handler%2A> je jeho argument <xref:System.Activities.Statements.WriteLine.Text%2A> svázán s hodnotami řetězce v kolekci, kterou aktivita <xref:System.Activities.Statements.ForEach%601> prochází.</span><span class="sxs-lookup"><span data-stu-id="ce01d-112">The <xref:System.Activities.Statements.WriteLine> activity specified in the <xref:System.Activities.ActivityDelegate.Handler%2A> has its <xref:System.Activities.Statements.WriteLine.Text%2A> argument bound to the string values in the collection that the <xref:System.Activities.Statements.ForEach%601> activity iterates.</span></span>

[!code-csharp[CFX_ActivityExample#6](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#6)]

<span data-ttu-id="ce01d-113">ActionArgument se používá k flowování jednotlivých položek v kolekci do WriteLine.</span><span class="sxs-lookup"><span data-stu-id="ce01d-113">The actionArgument is used to flow the individual items in the collection to the WriteLine.</span></span> <span data-ttu-id="ce01d-114">Po vyvolání pracovního postupu se do konzoly zobrazí následující výstup.</span><span class="sxs-lookup"><span data-stu-id="ce01d-114">When the workflow is invoked, the following output is displayed to the console.</span></span>

```console
HelloWorld.
```

<span data-ttu-id="ce01d-115">Příklady v tomto tématu používají syntaxi inicializace objektu.</span><span class="sxs-lookup"><span data-stu-id="ce01d-115">The examples in this topic use object initialization syntax.</span></span> <span data-ttu-id="ce01d-116">Syntaxe inicializace objektu může být užitečný způsob, jak vytvořit definice pracovních postupů v kódu, protože poskytuje hierarchické zobrazení aktivit v pracovním postupu a znázorňuje vztah mezi aktivitami.</span><span class="sxs-lookup"><span data-stu-id="ce01d-116">Object initialization syntax can be a useful way to create workflow definitions in code because it provides a hierarchical view of the activities in the workflow and shows the relationship between the activities.</span></span> <span data-ttu-id="ce01d-117">Při vytváření pracovních postupů prostřednictvím kódu programu není nutné používat syntaxi inicializace objektu.</span><span class="sxs-lookup"><span data-stu-id="ce01d-117">There is no requirement to use object initialization syntax when you programmatically create workflows.</span></span> <span data-ttu-id="ce01d-118">Následující příklad je funkčně ekvivalentní k předchozímu příkladu.</span><span class="sxs-lookup"><span data-stu-id="ce01d-118">The following example is functionally equivalent to the previous example.</span></span>

[!code-csharp[CFX_ActivityExample#7](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#7)]

<span data-ttu-id="ce01d-119">Další informace o inicializátorech objektů naleznete v tématu [How to: Initialize Objects bez volání konstruktoru (C# Průvodce programováním)](../../csharp/programming-guide/classes-and-structs/how-to-initialize-objects-by-using-an-object-initializer.md) a [Postupy: deklarace objektu pomocí inicializátoru objektu (Visual Basic)](../../visual-basic/programming-guide/language-features/objects-and-classes/how-to-declare-an-object-by-using-an-object-initializer.md).</span><span class="sxs-lookup"><span data-stu-id="ce01d-119">For more information about object initializers, see [How to: Initialize Objects without Calling a Constructor (C# Programming Guide)](../../csharp/programming-guide/classes-and-structs/how-to-initialize-objects-by-using-an-object-initializer.md) and [How to: Declare an Object by Using an Object Initializer (Visual Basic)](../../visual-basic/programming-guide/language-features/objects-and-classes/how-to-declare-an-object-by-using-an-object-initializer.md).</span></span>

<span data-ttu-id="ce01d-120">V následujícím příkladu se v pracovním postupu používá <xref:System.Activities.Statements.TryCatch> aktivita.</span><span class="sxs-lookup"><span data-stu-id="ce01d-120">In the following example, a <xref:System.Activities.Statements.TryCatch> activity is used in a workflow.</span></span> <span data-ttu-id="ce01d-121">Pracovní postup vyvolal <xref:System.ApplicationException> a je zpracováván aktivitou <xref:System.Activities.Statements.Catch%601>.</span><span class="sxs-lookup"><span data-stu-id="ce01d-121">An <xref:System.ApplicationException> is thrown by the workflow, and is handled by a <xref:System.Activities.Statements.Catch%601> activity.</span></span> <span data-ttu-id="ce01d-122">Obslužná rutina akce aktivity <xref:System.Activities.Statements.Catch%601> aktivity je <xref:System.Activities.Statements.WriteLine> aktivita a podrobnosti o výjimce se do ní přesměrují pomocí `ex` <xref:System.Activities.DelegateInArgument%601>.</span><span class="sxs-lookup"><span data-stu-id="ce01d-122">The handler for the <xref:System.Activities.Statements.Catch%601> activity's activity action is a <xref:System.Activities.Statements.WriteLine> activity, and the exception detail is flowed through to it using the `ex` <xref:System.Activities.DelegateInArgument%601>.</span></span>

[!code-csharp[CFX_WorkflowApplicationExample#33](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#33)]

<span data-ttu-id="ce01d-123">Při vytváření vlastní aktivity definující <xref:System.Activities.ActivityAction%601>použijte k modelování vyvolání tohoto <xref:System.Activities.ActivityAction%601><xref:System.Activities.Statements.InvokeAction%601>.</span><span class="sxs-lookup"><span data-stu-id="ce01d-123">When creating a custom activity that defines an <xref:System.Activities.ActivityAction%601>, use an <xref:System.Activities.Statements.InvokeAction%601> to model the invocation of that <xref:System.Activities.ActivityAction%601>.</span></span> <span data-ttu-id="ce01d-124">V tomto příkladu je definována vlastní aktivita `WriteLineWithNotification`.</span><span class="sxs-lookup"><span data-stu-id="ce01d-124">In this example, a custom `WriteLineWithNotification` activity is defined.</span></span> <span data-ttu-id="ce01d-125">Tato aktivita se skládá z <xref:System.Activities.Statements.Sequence>, která obsahuje aktivitu <xref:System.Activities.Statements.WriteLine> následovanou <xref:System.Activities.Statements.InvokeAction%601>, která vyvolá <xref:System.Activities.ActivityAction%601>, který přijímá jeden řetězcový argument.</span><span class="sxs-lookup"><span data-stu-id="ce01d-125">This activity is composed of a <xref:System.Activities.Statements.Sequence> that contains a <xref:System.Activities.Statements.WriteLine> activity followed by an <xref:System.Activities.Statements.InvokeAction%601> that invokes an <xref:System.Activities.ActivityAction%601> that takes one string argument.</span></span>

[!code-csharp[CFX_ActivityExample#1](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#1)]

<span data-ttu-id="ce01d-126">Když je pracovní postup vytvořen pomocí aktivity `WriteLineWithNotification`, Autor pracovního postupu Určuje požadovanou vlastní logiku v <xref:System.Activities.ActivityDelegate.Handler%2A>akce aktivity.</span><span class="sxs-lookup"><span data-stu-id="ce01d-126">When a workflow is created by using the `WriteLineWithNotification` activity, the workflow author specifies the desired custom logic in the activity action’s <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span> <span data-ttu-id="ce01d-127">V tomto příkladu je vytvořen pracovní postup, který používá aktivitu `WriteLineWithNotification` a <xref:System.Activities.Statements.WriteLine> aktivita se používá jako <xref:System.Activities.ActivityDelegate.Handler%2A>.</span><span class="sxs-lookup"><span data-stu-id="ce01d-127">In this example, a workflow is created that use the `WriteLineWithNotification` activity, and a <xref:System.Activities.Statements.WriteLine> activity is used as the <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span>

[!code-csharp[CFX_ActivityExample#2](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#2)]

<span data-ttu-id="ce01d-128">Existuje několik obecných verzí <xref:System.Activities.Statements.InvokeAction%601> a <xref:System.Activities.ActivityAction%601> poskytuje pro předávání jednoho nebo více argumentů.</span><span class="sxs-lookup"><span data-stu-id="ce01d-128">There are multiple generic versions of <xref:System.Activities.Statements.InvokeAction%601> and <xref:System.Activities.ActivityAction%601> provided for passing one or more arguments.</span></span>

## <a name="using-activityfunc"></a><span data-ttu-id="ce01d-129">Použití ActivityFunc</span><span class="sxs-lookup"><span data-stu-id="ce01d-129">Using ActivityFunc</span></span>

<span data-ttu-id="ce01d-130"><xref:System.Activities.ActivityAction%601> je užitečné, pokud neexistují žádné hodnoty výsledku z aktivity a <xref:System.Activities.ActivityFunc%601> se používá při vrácení hodnoty výsledku.</span><span class="sxs-lookup"><span data-stu-id="ce01d-130"><xref:System.Activities.ActivityAction%601> is useful when there is no result value from the activity, and <xref:System.Activities.ActivityFunc%601> is used when a result value is returned.</span></span> <span data-ttu-id="ce01d-131">Při vytváření vlastní aktivity definující <xref:System.Activities.ActivityFunc%601>použijte k modelování vyvolání tohoto <xref:System.Activities.ActivityFunc%601><xref:System.Activities.Expressions.InvokeFunc%601>.</span><span class="sxs-lookup"><span data-stu-id="ce01d-131">When creating a custom activity that defines an <xref:System.Activities.ActivityFunc%601>, use an <xref:System.Activities.Expressions.InvokeFunc%601> to model the invocation of that <xref:System.Activities.ActivityFunc%601>.</span></span> <span data-ttu-id="ce01d-132">V následujícím příkladu je definována aktivita `WriteFillerText`.</span><span class="sxs-lookup"><span data-stu-id="ce01d-132">In the following example, a `WriteFillerText` activity is defined.</span></span> <span data-ttu-id="ce01d-133">Chcete-li zadat text výplně, je zadána <xref:System.Activities.Expressions.InvokeFunc%601>, která přebírá celočíselný argument a má výsledek řetězce.</span><span class="sxs-lookup"><span data-stu-id="ce01d-133">To supply the filler text, an <xref:System.Activities.Expressions.InvokeFunc%601> is specified that takes an integer argument and has a string result.</span></span> <span data-ttu-id="ce01d-134">Jakmile se načte text výplně, zobrazí se v konzole nástroje s použitím aktivity <xref:System.Activities.Statements.WriteLine>.</span><span class="sxs-lookup"><span data-stu-id="ce01d-134">Once the filler text is retrieved, it is displayed to the console using a <xref:System.Activities.Statements.WriteLine> activity.</span></span>

[!code-csharp[CFX_ActivityExample#3](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#3)]

<span data-ttu-id="ce01d-135">K zadávání textu je nutné použít aktivitu, která přijímá jeden `int` argument a má výsledek řetězce.</span><span class="sxs-lookup"><span data-stu-id="ce01d-135">To supply the text, an activity must be used that takes one `int` argument and has a string result.</span></span> <span data-ttu-id="ce01d-136">Tento příklad ukazuje aktivitu `TextGenerator`, která splňuje tyto požadavky.</span><span class="sxs-lookup"><span data-stu-id="ce01d-136">This example shows a `TextGenerator` activity that meets these requirements.</span></span>

[!code-csharp[CFX_ActivityExample#4](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#4)]

<span data-ttu-id="ce01d-137">Chcete-li použít aktivitu `TextGenerator` s aktivitou `WriteFillerText`, zadejte ji jako <xref:System.Activities.ActivityDelegate.Handler%2A>.</span><span class="sxs-lookup"><span data-stu-id="ce01d-137">To use the `TextGenerator` activity with the `WriteFillerText` activity, specify it as the <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span>

[!code-csharp[CFX_ActivityExample#5](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#5)]
