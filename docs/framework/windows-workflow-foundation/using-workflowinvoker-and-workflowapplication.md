---
title: Použití WorkflowInvoker a WorkflowApplication
ms.date: 03/30/2017
ms.assetid: cd0e583c-a3f9-4fa2-b247-c7b3368c48a7
ms.openlocfilehash: 5d09fc3c902b1993b32edf3e9f92393433281636
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/12/2020
ms.locfileid: "79182707"
---
# <a name="using-workflowinvoker-and-workflowapplication"></a><span data-ttu-id="e1e1b-102">Použití WorkflowInvoker a WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="e1e1b-102">Using WorkflowInvoker and WorkflowApplication</span></span>
<span data-ttu-id="e1e1b-103">Windows Workflow Foundation (WF) poskytuje několik metod hostování pracovních postupů.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-103">Windows Workflow Foundation (WF) provides several methods of hosting workflows.</span></span> <span data-ttu-id="e1e1b-104"><xref:System.Activities.WorkflowInvoker>poskytuje jednoduchý způsob, jak vyvolat pracovní postup, jako by se jednalo o volání metody a lze jej použít pouze pro pracovní postupy, které nepoužívají trvalost.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-104"><xref:System.Activities.WorkflowInvoker> provides a simple way for invoking a workflow as if it were a method call and can be used only for workflows that do not use persistence.</span></span> <span data-ttu-id="e1e1b-105"><xref:System.Activities.WorkflowApplication>poskytuje bohatší model pro provádění pracovních postupů, který zahrnuje oznámení událostí životního cyklu, řízení provádění, obnovení záložky a trvalost.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-105"><xref:System.Activities.WorkflowApplication> provides a richer model for executing workflows that includes notification of lifecycle events, execution control, bookmark resumption, and persistence.</span></span> <span data-ttu-id="e1e1b-106"><xref:System.ServiceModel.Activities.WorkflowServiceHost>poskytuje podporu pro zasílání zpráv a používá se především se službami pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-106"><xref:System.ServiceModel.Activities.WorkflowServiceHost> provides support for messaging activities and is primarily used with workflow services.</span></span> <span data-ttu-id="e1e1b-107">Toto téma vás seznámí <xref:System.Activities.WorkflowInvoker> <xref:System.Activities.WorkflowApplication>s hostováním pracovních postupů s a .</span><span class="sxs-lookup"><span data-stu-id="e1e1b-107">This topic introduces you to workflow hosting with <xref:System.Activities.WorkflowInvoker> and <xref:System.Activities.WorkflowApplication>.</span></span> <span data-ttu-id="e1e1b-108">Další informace o hostování <xref:System.ServiceModel.Activities.WorkflowServiceHost>pracovních postupů pomocí najdete [v tématu Pracovní postupy a](../wcf/feature-details/workflow-services.md) Přehled služeb hostování [pracovních postupů](../wcf/feature-details/hosting-workflow-services-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e1e1b-108">For more information about hosting workflows with <xref:System.ServiceModel.Activities.WorkflowServiceHost>, see [Workflow Services](../wcf/feature-details/workflow-services.md) and [Hosting Workflow Services Overview](../wcf/feature-details/hosting-workflow-services-overview.md).</span></span>  
  
## <a name="using-workflowinvoker"></a><span data-ttu-id="e1e1b-109">Použití workflowinvokeru</span><span class="sxs-lookup"><span data-stu-id="e1e1b-109">Using WorkflowInvoker</span></span>  
 <span data-ttu-id="e1e1b-110"><xref:System.Activities.WorkflowInvoker>poskytuje model pro provádění pracovního postupu, jako by se jednalo o volání metody.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-110"><xref:System.Activities.WorkflowInvoker> provides a model for executing a workflow as if it were a method call.</span></span> <span data-ttu-id="e1e1b-111">Chcete-li vyvolat <xref:System.Activities.WorkflowInvoker>pracovní <xref:System.Activities.WorkflowInvoker.Invoke%2A> postup pomocí , volání metody a předat v definici pracovního postupu pracovního postupu vyvolat.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-111">To invoke a workflow using <xref:System.Activities.WorkflowInvoker>, call the <xref:System.Activities.WorkflowInvoker.Invoke%2A> method and pass in the workflow definition of the workflow to invoke.</span></span> <span data-ttu-id="e1e1b-112">V tomto příkladu je aktivita <xref:System.Activities.Statements.WriteLine> vyvolána pomocí <xref:System.Activities.WorkflowInvoker>.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-112">In this example, a <xref:System.Activities.Statements.WriteLine> activity is invoked using <xref:System.Activities.WorkflowInvoker>.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#1](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#1)]  
  
 <span data-ttu-id="e1e1b-113">Pokud je pracovní postup <xref:System.Activities.WorkflowInvoker>vyvolán pomocí , pracovní postup <xref:System.Activities.WorkflowInvoker.Invoke%2A> se spustí v volajícím vlákně a metoda se zablokuje, dokud nebude pracovní postup dokončen, včetně doby nečinnosti.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-113">When a workflow is invoked using <xref:System.Activities.WorkflowInvoker>, the workflow executes on the calling thread and the <xref:System.Activities.WorkflowInvoker.Invoke%2A> method blocks until the workflow is complete, including any idle time.</span></span> <span data-ttu-id="e1e1b-114">Chcete-li nakonfigurovat časový interval, ve kterém musí <xref:System.Activities.WorkflowInvoker.Invoke%2A> být dokončen pracovní <xref:System.TimeSpan> postup, použijte jedno z přetížení, které přebírá parametr.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-114">To configure a time-out interval in which the workflow must complete, use one of the <xref:System.Activities.WorkflowInvoker.Invoke%2A> overloads that takes a <xref:System.TimeSpan> parameter.</span></span> <span data-ttu-id="e1e1b-115">V tomto příkladu je pracovní postup vyvolán dvakrát se dvěma různými časovými intervaly.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-115">In this example, a workflow is invoked twice with two different time-out intervals.</span></span> <span data-ttu-id="e1e1b-116">První pracovní postup se zkompletuje, ale druhý nikoli.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-116">The first workflow complets, but the second does not.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#50](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#50)]  
  
> [!NOTE]
> <span data-ttu-id="e1e1b-117">Je <xref:System.TimeoutException> vyvolána pouze v případě, že časový limit interval uplyne a pracovní postup se stane nečinný během provádění.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-117">The <xref:System.TimeoutException> is only thrown if the time-out interval elapses and the workflow becomes idle during execution.</span></span> <span data-ttu-id="e1e1b-118">Pracovní postup, jehož dokončení trvá déle než zadaný časový limit, bude úspěšně dokončen, pokud se pracovní postup neprojeví nečinnosti.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-118">A workflow that takes longer than the specified time-out interval to complete completes successfully if the workflow does not become idle.</span></span>  
  
 <span data-ttu-id="e1e1b-119"><xref:System.Activities.WorkflowInvoker>poskytuje také asynchronní verze metody invoke.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-119"><xref:System.Activities.WorkflowInvoker> also provides asynchronous versions of the invoke method.</span></span> <span data-ttu-id="e1e1b-120">Další informace naleznete v tématech <xref:System.Activities.WorkflowInvoker.InvokeAsync%2A> a <xref:System.Activities.WorkflowInvoker.BeginInvoke%2A>.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-120">For more information, see <xref:System.Activities.WorkflowInvoker.InvokeAsync%2A> and <xref:System.Activities.WorkflowInvoker.BeginInvoke%2A>.</span></span>  
  
### <a name="setting-input-arguments-of-a-workflow"></a><span data-ttu-id="e1e1b-121">Nastavení vstupních argumentů pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="e1e1b-121">Setting Input Arguments of a Workflow</span></span>  
 <span data-ttu-id="e1e1b-122">Data mohou být předána do pracovního postupu pomocí slovníku vstupních parametrů, který je zaklávesový podle názvu argumentu a který se mapuje na vstupní argumenty pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-122">Data can be passed into a workflow using a dictionary of input parameters, keyed by argument name, that map to the input arguments of the workflow.</span></span> <span data-ttu-id="e1e1b-123">V tomto příkladu je vyvolána <xref:System.Activities.Statements.WriteLine> a <xref:System.Activities.Statements.WriteLine.Text%2A> hodnota pro jeho argument je určena pomocí slovníku vstupních parametrů.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-123">In this example, a <xref:System.Activities.Statements.WriteLine> is invoked and the value for its <xref:System.Activities.Statements.WriteLine.Text%2A> argument is specified using the dictionary of input parameters.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#3](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#3)]  
  
### <a name="retrieving-output-arguments-of-a-workflow"></a><span data-ttu-id="e1e1b-124">Načítání výstupních argumentů pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="e1e1b-124">Retrieving Output Arguments of a Workflow</span></span>  
 <span data-ttu-id="e1e1b-125">Výstupní parametry pracovního postupu lze získat pomocí slovníku výstupů, <xref:System.Activities.WorkflowInvoker.Invoke%2A>který je vrácen z volání do .</span><span class="sxs-lookup"><span data-stu-id="e1e1b-125">The output parameters of a workflow can be obtained using the outputs dictionary that is returned from the call to <xref:System.Activities.WorkflowInvoker.Invoke%2A>.</span></span> <span data-ttu-id="e1e1b-126">Následující příklad vyvolá pracovní postup skládající `Divide` se z jedné aktivity, která má dva vstupní argumenty a dva výstupní argumenty.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-126">The following example invokes a workflow consisting of a single `Divide` activity that has two input arguments and two output arguments.</span></span> <span data-ttu-id="e1e1b-127">Při vyvolání pracovního `arguments` postupu je předán slovník, který obsahuje hodnoty pro každý vstupní argument, zadávaný názvem argumentu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-127">When the workflow is invoked, the `arguments` dictionary is passed which contains the values for each input argument, keyed by argument name.</span></span> <span data-ttu-id="e1e1b-128">Při volání `Invoke` vrátí, každý výstupní argument `outputs` je vrácena ve slovníku, také zadali podle názvu argumentu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-128">When the call to `Invoke` returns, each output argument is returned in the `outputs` dictionary, also keyed by argument name.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#120](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#120)]  
  
 [!code-csharp[CFX_WorkflowInvokerExample#20](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#20)]  
  
 <span data-ttu-id="e1e1b-129">Pokud pracovní postup <xref:System.Activities.ActivityWithResult>pochází z `CodeActivity<TResult>` `Activity<TResult>`, například nebo , a existují výstupní <xref:System.Activities.Activity%601.Result%2A> argumenty kromě dobře definovaný `Invoke` výstupní argument, musí být použita neobecné přetížení musí být použitk načíst další argumenty.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-129">If the workflow derives from <xref:System.Activities.ActivityWithResult>, such as `CodeActivity<TResult>` or `Activity<TResult>`, and there are output arguments in addition to the well-defined <xref:System.Activities.Activity%601.Result%2A> output argument, a non-generic overload of `Invoke` must be used in order to retrieve the additional arguments.</span></span> <span data-ttu-id="e1e1b-130">Chcete-li to provést, `Invoke` musí být <xref:System.Activities.Activity>předaná definice pracovního postupu typu .</span><span class="sxs-lookup"><span data-stu-id="e1e1b-130">To do this, the workflow definition passed into `Invoke` must be of type <xref:System.Activities.Activity>.</span></span> <span data-ttu-id="e1e1b-131">V tomto `Divide` příkladu je `CodeActivity<int>`aktivita odvozena z , ale je deklarována tak, <xref:System.Activities.Activity> aby se použilo neobecné přetížení, `Invoke` které vrací slovník argumentů namísto jedné vrácené hodnoty.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-131">In this example the `Divide` activity derives from `CodeActivity<int>`, but is declared as <xref:System.Activities.Activity> so that a non-generic overload of `Invoke` is used which returns a dictionary of arguments instead of a single return value.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#121](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#121)]  
  
 [!code-csharp[CFX_WorkflowInvokerExample#21](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#21)]  
  
## <a name="using-workflowapplication"></a><span data-ttu-id="e1e1b-132">Použití aplikace WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="e1e1b-132">Using WorkflowApplication</span></span>  
 <span data-ttu-id="e1e1b-133"><xref:System.Activities.WorkflowApplication>poskytuje bohatou sadu funkcí pro správu instancí pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-133"><xref:System.Activities.WorkflowApplication> provides a rich set of features for workflow instance management.</span></span> <span data-ttu-id="e1e1b-134"><xref:System.Activities.WorkflowApplication>funguje jako proxy pro bezpečné <xref:System.Activities.Hosting.WorkflowInstance>přístupy k vláknu ke skutečnému , který zapouzdřuje dobu runtime a poskytuje metody pro vytváření a načítání instancí pracovního postupu, pozastavení a obnovení, ukončení a oznámení událostí životního cyklu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-134"><xref:System.Activities.WorkflowApplication> acts as a thread safe proxy to the actual  <xref:System.Activities.Hosting.WorkflowInstance>, which encapsulates the runtime, and provides methods for creating and loading workflow instances, pausing and resuming, terminating, and notification of lifecycle events.</span></span> <span data-ttu-id="e1e1b-135">Chcete-li spustit <xref:System.Activities.WorkflowApplication> pracovní <xref:System.Activities.WorkflowApplication>postup pomocí vytvoření , přihlaste se k odběru všech požadovaných událostí životního cyklu, spusťte pracovní postup a počkejte na jeho dokončení.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-135">To run a workflow using <xref:System.Activities.WorkflowApplication> you create the <xref:System.Activities.WorkflowApplication>, subscribe to any desired lifecycle events, start the workflow, and then wait for it to finish.</span></span> <span data-ttu-id="e1e1b-136">V tomto příkladu je vytvořena definice <xref:System.Activities.Statements.WriteLine> pracovního postupu, která se skládá z aktivity, a <xref:System.Activities.WorkflowApplication> je vytvořena pomocí zadané definice pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-136">In this example, a workflow definition that consists of a <xref:System.Activities.Statements.WriteLine> activity is created and a <xref:System.Activities.WorkflowApplication> is created using the specified workflow definition.</span></span> <span data-ttu-id="e1e1b-137"><xref:System.Activities.WorkflowApplication.Completed%2A>je zpracována tak, aby byl hostitel upozorněn po dokončení pracovního <xref:System.Activities.WorkflowApplication.Run%2A>postupu, pracovní postup je spuštěn s voláním a hostitel čeká na dokončení pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-137"><xref:System.Activities.WorkflowApplication.Completed%2A> is handled so the host is notified when the workflow completes, the workflow is started with a call to <xref:System.Activities.WorkflowApplication.Run%2A>, and then the host waits for the workflow to complete.</span></span> <span data-ttu-id="e1e1b-138">Po dokončení pracovního <xref:System.Threading.AutoResetEvent> postupu je nastavena a hostitelská aplikace může pokračovat v provádění, jak je znázorněno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-138">When the workflow completes, the <xref:System.Threading.AutoResetEvent> is set and the host application can resume execution, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#31](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#31)]  
  
### <a name="workflowapplication-lifecycle-events"></a><span data-ttu-id="e1e1b-139">Události životního cyklu aplikace WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="e1e1b-139">WorkflowApplication Lifecycle Events</span></span>  
 <span data-ttu-id="e1e1b-140">Kromě <xref:System.Activities.WorkflowApplication.Completed%2A>aplikace mohou být autoři hostitele upozorněni, když<xref:System.Activities.WorkflowApplication.Unloaded%2A>je pracovní<xref:System.Activities.WorkflowApplication.Aborted%2A>postup uvolněn<xref:System.Activities.WorkflowApplication.Idle%2A> <xref:System.Activities.WorkflowApplication.PersistableIdle%2A>( ), přerušeno (<xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>), se stane nečinným ( a ) nebo dojde k neošetřené výjimce ( ).</span><span class="sxs-lookup"><span data-stu-id="e1e1b-140">In addition to <xref:System.Activities.WorkflowApplication.Completed%2A>, host authors can be notified when a workflow is unloaded (<xref:System.Activities.WorkflowApplication.Unloaded%2A>), aborted (<xref:System.Activities.WorkflowApplication.Aborted%2A>), becomes idle (<xref:System.Activities.WorkflowApplication.Idle%2A> and <xref:System.Activities.WorkflowApplication.PersistableIdle%2A>), or an unhandled exception occurs (<xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>).</span></span> <span data-ttu-id="e1e1b-141">Vývojáři aplikací pracovního postupu mohou zpracovávat tato oznámení a přijmout vhodná opatření, jak je znázorněno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-141">Workflow application developers can handle these notifications and take appropriate action, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#32](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#32)]  
  
### <a name="setting-input-arguments-of-a-workflow"></a><span data-ttu-id="e1e1b-142">Nastavení vstupních argumentů pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="e1e1b-142">Setting Input Arguments of a Workflow</span></span>  
 <span data-ttu-id="e1e1b-143">Data mohou být předána do pracovního postupu při spuštění pomocí slovníku parametrů, podobně <xref:System.Activities.WorkflowInvoker>jako jsou data při použití .</span><span class="sxs-lookup"><span data-stu-id="e1e1b-143">Data can be passed into a workflow as it is started using a dictionary of parameters, similar to the way data is passed in when using <xref:System.Activities.WorkflowInvoker>.</span></span> <span data-ttu-id="e1e1b-144">Každá položka ve slovníku se mapuje na vstupní argument zadaného pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-144">Each item in the dictionary maps to an input argument of the specified workflow.</span></span> <span data-ttu-id="e1e1b-145">V tomto příkladu je vyvolán <xref:System.Activities.Statements.WriteLine> pracovní postup, který <xref:System.Activities.Statements.WriteLine.Text%2A> se skládá z aktivity a jeho argument je určen pomocí slovníku vstupních parametrů.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-145">In this example, a workflow that consists of a <xref:System.Activities.Statements.WriteLine> activity is invoked and its <xref:System.Activities.Statements.WriteLine.Text%2A> argument is specified using the dictionary of input parameters.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#30](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#30)]  
  
### <a name="retrieving-output-arguments-of-a-workflow"></a><span data-ttu-id="e1e1b-146">Načítání výstupních argumentů pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="e1e1b-146">Retrieving Output Arguments of a Workflow</span></span>  
 <span data-ttu-id="e1e1b-147">Po dokončení pracovního postupu lze všechny výstupní argumenty načíst v <xref:System.Activities.WorkflowApplication.Completed%2A> obslužné rutině přístupem ke slovníku. <xref:System.Activities.WorkflowApplicationCompletedEventArgs.Outputs%2A?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="e1e1b-147">When a workflow completes, any output arguments can be retrieved in the <xref:System.Activities.WorkflowApplication.Completed%2A> handler by accessing the <xref:System.Activities.WorkflowApplicationCompletedEventArgs.Outputs%2A?displayProperty=nameWithType> dictionary.</span></span> <span data-ttu-id="e1e1b-148">Následující příklad hostuje <xref:System.Activities.WorkflowApplication>pracovní postup pomocí aplikace .</span><span class="sxs-lookup"><span data-stu-id="e1e1b-148">The following example hosts a workflow using <xref:System.Activities.WorkflowApplication>.</span></span> <span data-ttu-id="e1e1b-149">Instance <xref:System.Activities.WorkflowApplication> je vytvořena pomocí definice pracovního postupu, která se skládá z jedné `DiceRoll` aktivity.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-149">A <xref:System.Activities.WorkflowApplication> instance is constructed using a workflow definition consisting of a single `DiceRoll` activity.</span></span> <span data-ttu-id="e1e1b-150">Aktivita `DiceRoll` má dva výstupní argumenty, které představují výsledky operace kostky.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-150">The `DiceRoll` activity has two output arguments that represent the results of the dice roll operation.</span></span> <span data-ttu-id="e1e1b-151">Po dokončení pracovního postupu jsou výstupy <xref:System.Activities.WorkflowApplication.Completed%2A> načteny v obslužné rutině.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-151">When the workflow completes, the outputs are retrieved in the <xref:System.Activities.WorkflowApplication.Completed%2A> handler.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#130](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#130)]  
  
 [!code-csharp[CFX_WorkflowApplicationExample#21](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#21)]  
  
> [!NOTE]
> <span data-ttu-id="e1e1b-152"><xref:System.Activities.WorkflowApplication>a <xref:System.Activities.WorkflowInvoker> vzít slovník vstupní ch argumentů a `out` vrátit slovník argumentů.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-152"><xref:System.Activities.WorkflowApplication> and <xref:System.Activities.WorkflowInvoker> take a dictionary of input arguments and return a dictionary of `out` arguments.</span></span> <span data-ttu-id="e1e1b-153">Tyto parametry slovníku, vlastnosti a `IDictionary<string, object>`vrácené hodnoty jsou typu .</span><span class="sxs-lookup"><span data-stu-id="e1e1b-153">These dictionary parameters, properties, and return values are of type `IDictionary<string, object>`.</span></span> <span data-ttu-id="e1e1b-154">Skutečná instance třídy slovníku, která je předána v `IDictionary<string, object>`může být libovolná třída, která implementuje .</span><span class="sxs-lookup"><span data-stu-id="e1e1b-154">The actual instance of the dictionary class that is passed in can be any class that implements `IDictionary<string, object>`.</span></span> <span data-ttu-id="e1e1b-155">V těchto příkladech se `Dictionary<string, object>` používá.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-155">In these examples, `Dictionary<string, object>` is used.</span></span> <span data-ttu-id="e1e1b-156">Další informace o slovnících <xref:System.Collections.Generic.IDictionary%602> <xref:System.Collections.Generic.Dictionary%602>naleznete v tématech a .</span><span class="sxs-lookup"><span data-stu-id="e1e1b-156">For more information about dictionaries, see <xref:System.Collections.Generic.IDictionary%602> and <xref:System.Collections.Generic.Dictionary%602>.</span></span>  
  
### <a name="passing-data-into-a-running-workflow-using-bookmarks"></a><span data-ttu-id="e1e1b-157">Předávání dat do spuštěného pracovního postupu pomocí záložek</span><span class="sxs-lookup"><span data-stu-id="e1e1b-157">Passing Data into a Running Workflow Using Bookmarks</span></span>  
 <span data-ttu-id="e1e1b-158">Záložky jsou mechanismus, kterým aktivita může pasivně čekat na obnovení a jsou mechanismem pro předávání dat do spuštěné instance pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-158">Bookmarks are the mechanism by which an activity can passively wait to be resumed and are a mechanism for passing data into a running workflow instance.</span></span> <span data-ttu-id="e1e1b-159">Pokud aktivita čeká na data, <xref:System.Activities.Bookmark> může vytvořit a zaregistrovat metodu <xref:System.Activities.Bookmark> zpětného volání, která má být volána při obnovení, jak je znázorněno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-159">If an activity is waiting for data, it can create a <xref:System.Activities.Bookmark> and register a callback method to be called when the <xref:System.Activities.Bookmark> is resumed, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#15](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#15)]  
  
 <span data-ttu-id="e1e1b-160">Při spuštění aktivity `ReadLine` vytvoří <xref:System.Activities.Bookmark>, zaregistruje zpětné volání a potom <xref:System.Activities.Bookmark> čeká na obnovení.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-160">When executed, the `ReadLine` activity creates a <xref:System.Activities.Bookmark>, registers a callback, and then waits for the <xref:System.Activities.Bookmark> to be resumed.</span></span> <span data-ttu-id="e1e1b-161">Po obnovení aktivita `ReadLine` přiřadí data, která byla <xref:System.Activities.Bookmark> předána <xref:System.Activities.Activity%601.Result%2A> s jeho argument.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-161">When it is resumed, the `ReadLine` activity assigns the data that was passed with the <xref:System.Activities.Bookmark> to its <xref:System.Activities.Activity%601.Result%2A> argument.</span></span> <span data-ttu-id="e1e1b-162">V tomto příkladu je vytvořen `ReadLine` pracovní postup, který používá aktivitu ke shromáždění jména uživatele a jeho zobrazení v okně konzoly.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-162">In this example, a workflow is created that uses the `ReadLine` activity to gather the user’s name and display it to the console window.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#22](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#22)]  
  
 <span data-ttu-id="e1e1b-163">Když `ReadLine` je aktivita spuštěna, <xref:System.Activities.Bookmark> `UserName` vytvoří pojmenovaný a pak čeká na záložku, která má být obnovena.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-163">When the `ReadLine` activity is executed, it creates a <xref:System.Activities.Bookmark> named `UserName` and then waits for the bookmark to be resumed.</span></span> <span data-ttu-id="e1e1b-164">Hostitel shromažďuje požadovaná data a potom <xref:System.Activities.Bookmark>obnoví .</span><span class="sxs-lookup"><span data-stu-id="e1e1b-164">The host collects the desired data and then resumes the <xref:System.Activities.Bookmark>.</span></span> <span data-ttu-id="e1e1b-165">Pracovní postup se obnoví, zobrazí název a potom se dokončí.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-165">The workflow resumes, displays the name, and then completes.</span></span>  
  
 <span data-ttu-id="e1e1b-166">Hostitelská aplikace může zkontrolovat pracovní postup a zjistit, zda existují nějaké aktivní záložky.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-166">The host application can inspect the workflow to determine if there are any active bookmarks.</span></span> <span data-ttu-id="e1e1b-167">To lze provést <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> voláním metody <xref:System.Activities.WorkflowApplication> instance nebo kontrolou <xref:System.Activities.WorkflowApplicationIdleEventArgs> v <xref:System.Activities.WorkflowApplication.Idle%2A> obslužné rutině.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-167">It can do this by calling the <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> method of a <xref:System.Activities.WorkflowApplication> instance, or by inspecting the <xref:System.Activities.WorkflowApplicationIdleEventArgs> in the <xref:System.Activities.WorkflowApplication.Idle%2A> handler.</span></span>  
  
 <span data-ttu-id="e1e1b-168">Následující příklad kódu je jako v předchozím příkladu s tím rozdílem, že aktivní záložky jsou uvedeny před obnovením záložky.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-168">The following code example is like the previous example except that the active bookmarks are enumerated before the bookmark is resumed.</span></span> <span data-ttu-id="e1e1b-169">Pracovní postup je spuštěn <xref:System.Activities.Bookmark> a jakmile je vytvořen <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> a pracovní postup přejde nečinnosti, je volána.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-169">The workflow is started, and once the <xref:System.Activities.Bookmark> is created and the workflow goes idle, <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> is called.</span></span> <span data-ttu-id="e1e1b-170">Po dokončení pracovního postupu se do konzoly zobrazí následující výstup.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-170">When the workflow is completed, the following output is displayed to the console.</span></span>  
  
 <span data-ttu-id="e1e1b-171">**Jak se jmenuješ?**</span><span class="sxs-lookup"><span data-stu-id="e1e1b-171">**What is your name?**</span></span>  
<span data-ttu-id="e1e1b-172">**Název záložky: UserName - OwnerDisplayName: ReadLine**
**Steve**
**Hello, Steve**</span><span class="sxs-lookup"><span data-stu-id="e1e1b-172">**BookmarkName: UserName - OwnerDisplayName: ReadLine**
**Steve**
**Hello, Steve**</span></span>

[!code-csharp[CFX_WorkflowApplicationExample#14](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#14)]  
  
 <span data-ttu-id="e1e1b-173">Následující příklad kódu kontroluje <xref:System.Activities.WorkflowApplicationIdleEventArgs> předány <xref:System.Activities.WorkflowApplication.Idle%2A> do <xref:System.Activities.WorkflowApplication> obslužné rutiny instance.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-173">The following code example inspects the <xref:System.Activities.WorkflowApplicationIdleEventArgs> passed into the <xref:System.Activities.WorkflowApplication.Idle%2A> handler of a <xref:System.Activities.WorkflowApplication> instance.</span></span> <span data-ttu-id="e1e1b-174">V tomto příkladu má <xref:System.Activities.Bookmark> nečinný pracovní `EnterGuess`postup jeden s `ReadInt`názvem , vlastněný aktivitou s názvem .</span><span class="sxs-lookup"><span data-stu-id="e1e1b-174">In this example the workflow going idle has one <xref:System.Activities.Bookmark> with a name of `EnterGuess`, owned by an activity named `ReadInt`.</span></span> <span data-ttu-id="e1e1b-175">Tento příklad kódu je založen mimo [How to: Run a Workflow](how-to-run-a-workflow.md), který je součástí kurzu [Začínáme](getting-started-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="e1e1b-175">This code example is based off of [How to: Run a Workflow](how-to-run-a-workflow.md), which is part of the [Getting Started Tutorial](getting-started-tutorial.md).</span></span> <span data-ttu-id="e1e1b-176">Pokud <xref:System.Activities.WorkflowApplication.Idle%2A> obslužná rutina v tomto kroku je upravena tak, aby obsahovala kód z tohoto příkladu, zobrazí se následující výstup.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-176">If the <xref:System.Activities.WorkflowApplication.Idle%2A> handler in that step is modified to contain the code from this example, the following output is displayed.</span></span>  
  
 <span data-ttu-id="e1e1b-177">**Název záložky: EnterGuess - OwnerDisplayName: ReadInt**</span><span class="sxs-lookup"><span data-stu-id="e1e1b-177">**BookmarkName: EnterGuess - OwnerDisplayName: ReadInt**</span></span>

 [!code-csharp[CFX_WorkflowApplicationExample#2](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#2)]  
  
## <a name="summary"></a><span data-ttu-id="e1e1b-178">Souhrn</span><span class="sxs-lookup"><span data-stu-id="e1e1b-178">Summary</span></span>  
 <span data-ttu-id="e1e1b-179"><xref:System.Activities.WorkflowInvoker>poskytuje lehký způsob vyvolání pracovních postupů a přestože poskytuje metody pro předávání dat na začátku pracovního postupu a extrahování <xref:System.Activities.WorkflowApplication> dat z dokončeného pracovního postupu, neposkytuje složitější scénáře, které je místo, kde lze použít.</span><span class="sxs-lookup"><span data-stu-id="e1e1b-179"><xref:System.Activities.WorkflowInvoker> provides a lightweight way to invoke workflows, and although it provides methods for passing data in at the start of a workflow and extracting data from a completed workflow, it does not provide for more complex scenarios which is where <xref:System.Activities.WorkflowApplication> can be used.</span></span>
