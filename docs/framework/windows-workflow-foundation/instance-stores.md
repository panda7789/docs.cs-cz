---
title: Úložiště instancí
ms.date: 03/30/2017
ms.assetid: f2629668-0923-4987-b943-67477131c1e0
ms.openlocfilehash: 69b50942c36406bd29147d243e0501b8048d56dc
ms.sourcegitcommit: 32a575bf4adccc901f00e264f92b759ced633379
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/04/2019
ms.locfileid: "74802554"
---
# <a name="instance-stores"></a><span data-ttu-id="0d47f-102">Úložiště instancí</span><span class="sxs-lookup"><span data-stu-id="0d47f-102">Instance Stores</span></span>
<span data-ttu-id="0d47f-103">Úložiště instancí je logický kontejner instancí.</span><span class="sxs-lookup"><span data-stu-id="0d47f-103">An instance store is a logical container of instances.</span></span> <span data-ttu-id="0d47f-104">Je místo, kde jsou uložena data instance a metadata.</span><span class="sxs-lookup"><span data-stu-id="0d47f-104">It is the place where the instance data and metadata is stored.</span></span> <span data-ttu-id="0d47f-105">Úložiště instancí neznamená vyhrazené fyzické úložiště.</span><span class="sxs-lookup"><span data-stu-id="0d47f-105">An instance store does not imply dedicated physical storage.</span></span> <span data-ttu-id="0d47f-106">Úložiště instancí může obsahovat trvalé informace v databázi SQL Server nebo netrvalé informace o stavu v paměti.</span><span class="sxs-lookup"><span data-stu-id="0d47f-106">An instance store could contain durable information in a SQL Server database or non-durable state information in a memory.</span></span> <span data-ttu-id="0d47f-107">[!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] se dodává s úložištěm instance pracovního postupu SQL, což je konkrétní implementace úložiště instance, která umožňuje pracovním postupům zachovat data instance a metadata do databáze SQL Server 2005 nebo SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="0d47f-107">The [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ships with the SQL Workflow Instance Store, which is a concrete implementation of an instance store that allows workflows to persist instance data and metadata into a SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="0d47f-108">Kromě prostředků Windows Server App Fabric také poskytuje konkrétní implementaci úložiště instancí.</span><span class="sxs-lookup"><span data-stu-id="0d47f-108">In addition Windows Server App Fabric also provides a concrete implementation of an instance store.</span></span> <span data-ttu-id="0d47f-109">Další informace najdete v tématu [Zprostředkovatelé ukládání instancí, dotazování a řízení pro Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ff383417(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="0d47f-109">For more information, see [Windows Server App Fabric Instance Store, Query, and Control Providers](https://docs.microsoft.com/previous-versions/appfabric/ff383417(v=azure.10)).</span></span>  
  
 <span data-ttu-id="0d47f-110">Rozhraní API trvalosti je rozhraní mezi hostitelem a úložištěm instancí, které umožňuje hostiteli odeslat požadavky příkazu (například <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> a <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>) do úložiště instancí.</span><span class="sxs-lookup"><span data-stu-id="0d47f-110">The persistence API is the interface between a host and an instance store that allows the host to send command requests (for example, <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> and <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>) to the instance store.</span></span> <span data-ttu-id="0d47f-111">Konkrétní implementace tohoto rozhraní API se nazývá zprostředkovatel trvalosti.</span><span class="sxs-lookup"><span data-stu-id="0d47f-111">The concrete implementation of this API is called a persistence provider.</span></span> <span data-ttu-id="0d47f-112">Zprostředkovatel trvalosti přijímá žádosti od hostitele a upravuje úložiště instancí.</span><span class="sxs-lookup"><span data-stu-id="0d47f-112">The persistence provider receives requests from a host and modifies the instance store.</span></span>  
  
 <span data-ttu-id="0d47f-113">Hostitelé a úložiště instancí jsou připojitelné, aby bylo možné použít hostitele s mnoha úložišti instancí a úložiště instancí lze použít s mnoha hostiteli.</span><span class="sxs-lookup"><span data-stu-id="0d47f-113">Hosts and instance stores are pluggable so that a host can be used with many instance stores, and an instance store can be used with many hosts.</span></span> <span data-ttu-id="0d47f-114">Úložiště instancí je obvykle optimalizované pro vzorce používání konkrétního hostitele, i když se instance úložiště a hostitele můžou vyvíjet na nezávislých cyklech životního cyklu.</span><span class="sxs-lookup"><span data-stu-id="0d47f-114">An instance store is typically optimized for the usage patterns of a particular host, although the instance store and host may evolve on independent life cycles.</span></span> <span data-ttu-id="0d47f-115">Například **Třída WorkflowServiceHost** a **Třída SqlWorkflowInstanceStore** jsou navržené tak, aby dobře spolupracovaly.</span><span class="sxs-lookup"><span data-stu-id="0d47f-115">For example, the **WorkflowServiceHost** and the **SqlWorkflowInstanceStore** are designed to work well together.</span></span> <span data-ttu-id="0d47f-116">Můžete vytvořit vlastní úložiště instancí, abyste zachovali data a metadata instancí služby pracovních postupů a používali toto úložiště instancí s **hostitelskou**službou.</span><span class="sxs-lookup"><span data-stu-id="0d47f-116">You can create your own instance store to persist data and metadata of workflow service instances and use that instance store with the **WorkflowServiceHost**.</span></span> <span data-ttu-id="0d47f-117">Můžete například vytvořit OracleWorkflowInstanceStore, který umožňuje pracovním postupům uchovávat informace v databázi Oracle místo jejich uložení do databáze SQL Server.</span><span class="sxs-lookup"><span data-stu-id="0d47f-117">For example, you can create an OracleWorkflowInstanceStore that lets workflows persist information into an Oracle database instead of saving them into a SQL Server database.</span></span>  
  
 <span data-ttu-id="0d47f-118">Je běžné, že se hostitelé rozšířili o další funkce, které upravují trvalé objekty.</span><span class="sxs-lookup"><span data-stu-id="0d47f-118">It is common for hosts to be extended with additional functionality that modifies the persisted objects.</span></span> <span data-ttu-id="0d47f-119">Například systém trvalosti instance může mít hostitele pracovního postupu, rozšíření, které podporuje operaci pozastavit a úložiště instance SQL.</span><span class="sxs-lookup"><span data-stu-id="0d47f-119">For example, an instance persistence system may have a workflow host, an extension that supports the "Suspend" operation, and an SQL instance store.</span></span>  <span data-ttu-id="0d47f-120">Hostitel pracovního postupu může odeslat standardní příkaz, například Save nebo Load, a uložit nebo načíst pracovní postup z úložiště instancí nebo Uložit pracovní postup do úložiště instancí.</span><span class="sxs-lookup"><span data-stu-id="0d47f-120">The workflow host might send a standard command such as Save or Load to save or load a workflow from an instance store or to save a workflow into an instance store.</span></span> <span data-ttu-id="0d47f-121">Rozšíření pozastavení může přidat další sémantiku k příkazům pro ukládání a načítání instancí pracovního postupu, aby bylo možné načíst pozastavenou instanci pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="0d47f-121">The suspend extension might add additional semantics to the commands for saving and loading workflow instances so that a suspended workflow instance cannot be loaded.</span></span> <span data-ttu-id="0d47f-122">Zprostředkovatel trvalosti pro úložiště instance SQL rozumí příkazy pro ukládání a načítání instancí pracovního postupu a implementuje příkazy voláním příslušných uložených procedur, které mění tabulky trvalých objektů v databázi SQL Server.</span><span class="sxs-lookup"><span data-stu-id="0d47f-122">The persistence provider for the SQL instance store understands the commands for saving and loading workflow instances, and implements the commands by calling appropriate stored procedures that change the tables of persistent objects in an SQL Server database.</span></span>  
  
 <span data-ttu-id="0d47f-123">Hostitel funguje jako vlastník instance v rámci úložiště instancí.</span><span class="sxs-lookup"><span data-stu-id="0d47f-123">A host acts as an instance owner within an instance store.</span></span> <span data-ttu-id="0d47f-124">Hostitel může fungovat jako více než jeden vlastník instance s více než jedním úložištěm instancí současně.</span><span class="sxs-lookup"><span data-stu-id="0d47f-124">A host may act as more than one instance owner with more than one instance store at the same time.</span></span> <span data-ttu-id="0d47f-125">Hostitel poskytuje identifikátory GUID pro klíče instancí přidružené k instancím.</span><span class="sxs-lookup"><span data-stu-id="0d47f-125">The host provides GUIDs for instance keys associated with the instances.</span></span> <span data-ttu-id="0d47f-126">Klíč instance je jedinečný alias, který identifikuje instanci.</span><span class="sxs-lookup"><span data-stu-id="0d47f-126">An instance key is a unique alias that identifies an instance.</span></span> <span data-ttu-id="0d47f-127">Systém Persistence vytvoří, aktualizuje a odstraní informace o vlastníkovi instance při provádění příkazů požadovaných hostiteli.</span><span class="sxs-lookup"><span data-stu-id="0d47f-127">The persistence system creates, updates, and deletes instance owner information as it executes commands requested by hosts.</span></span>  
  
 <span data-ttu-id="0d47f-128">Následující seznam obsahuje důležité kroky týkající se interakce hostitele s úložištěm instancí:</span><span class="sxs-lookup"><span data-stu-id="0d47f-128">The following list contains the important steps involved in the host’s interaction with the instance store:</span></span>  
  
1. <span data-ttu-id="0d47f-129">Získejte objekt **InstanceStore** od poskytovatele trvalosti.</span><span class="sxs-lookup"><span data-stu-id="0d47f-129">Obtain an **InstanceStore** from a persistence provider.</span></span>  

2. <span data-ttu-id="0d47f-130">Získejte popisovač instance voláním metody <xref:System.Runtime.DurableInstancing.InstanceStore.CreateInstanceHandle%2A> v objektu **InstanceStore**.</span><span class="sxs-lookup"><span data-stu-id="0d47f-130">Obtain the handle to an instance by calling the <xref:System.Runtime.DurableInstancing.InstanceStore.CreateInstanceHandle%2A> method on the **InstanceStore**.</span></span>  
  
3. <span data-ttu-id="0d47f-131">Vyvolat příkazy proti popisovači instance voláním metody <xref:System.Runtime.DurableInstancing.InstanceStore.Execute%2A> v objektu **InstanceStore**.</span><span class="sxs-lookup"><span data-stu-id="0d47f-131">Invoke commands against the instance handle by calling the <xref:System.Runtime.DurableInstancing.InstanceStore.Execute%2A> method on the **InstanceStore**.</span></span>  
  
4. <span data-ttu-id="0d47f-132">Zkontrolujte <xref:System.Runtime.DurableInstancing.InstanceView> vrácených funkcí **InstanceStore. Execute** a určete výsledky příkazů.</span><span class="sxs-lookup"><span data-stu-id="0d47f-132">Examine the <xref:System.Runtime.DurableInstancing.InstanceView> returned by **InstanceStore.Execute** to determine the results of the commands.</span></span>
