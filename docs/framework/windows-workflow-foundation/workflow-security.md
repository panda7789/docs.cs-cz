---
title: Zabezpečení pracovních postupů
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], workflow security
ms.assetid: d712a566-f435-44c0-b8c0-49298e84b114
ms.openlocfilehash: 36d03a2fca8f143b98338050fc9da4490960bda9
ms.sourcegitcommit: a4f9b754059f0210e29ae0578363a27b9ba84b64
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/05/2019
ms.locfileid: "74837516"
---
# <a name="workflow-security"></a><span data-ttu-id="b2ee3-102">Zabezpečení pracovních postupů</span><span class="sxs-lookup"><span data-stu-id="b2ee3-102">Workflow Security</span></span>
<span data-ttu-id="b2ee3-103">Programovací model Windows Workflow Foundation (WF) je integrováno s několika různými technologiemi, jako je například Microsoft SQL Server a Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="b2ee3-103">Windows Workflow Foundation (WF) is integrated with several different technologies, such as Microsoft SQL Server and Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="b2ee3-104">Interakce s těmito technologiemi může v případě nesprávného dokončení způsobit problémy se zabezpečením do pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-104">Interacting with these technologies may introduce security issues into your workflow if done improperly.</span></span>

## <a name="persistence-security-concerns"></a><span data-ttu-id="b2ee3-105">Otázky zabezpečení trvalosti</span><span class="sxs-lookup"><span data-stu-id="b2ee3-105">Persistence Security Concerns</span></span>

1. <span data-ttu-id="b2ee3-106">Pracovní postupy, které používají <xref:System.Activities.Statements.Delay> aktivity a trvalosti, je nutné znovu aktivovat službou.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-106">Workflows that use a <xref:System.Activities.Statements.Delay> activity and persistence need to be reactivated by a service.</span></span> <span data-ttu-id="b2ee3-107">Technologie Windows AppFabric používá službu Řízení pracovního postupu (WMS) k opětovné aktivaci pracovních postupů s časovači s vypršenou platností.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-107">Windows AppFabric uses the Workflow Management Service (WMS) to reactivate workflows with expired timers.</span></span> <span data-ttu-id="b2ee3-108">WMS vytvoří <xref:System.ServiceModel.WorkflowServiceHost> pro hostování znovu aktivovaného pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-108">WMS creates a <xref:System.ServiceModel.WorkflowServiceHost> to host the reactivated workflow.</span></span> <span data-ttu-id="b2ee3-109">Pokud se služba WMS zastaví, trvalé pracovní postupy se po vypršení platnosti jejich časovače znovu neaktivují.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-109">If the WMS service is stopped, persisted workflows will not be reactivated when their timers expire.</span></span>

2. <span data-ttu-id="b2ee3-110">Přístup k trvalým vytvářením instancí by měl být chráněn proti škodlivým entitám mimo doménu aplikace.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-110">Access to durable instancing should be protected against malicious entities external to the application domain.</span></span> <span data-ttu-id="b2ee3-111">Kromě toho by vývojáři měli zajistit, aby škodlivý kód nemohl být spuštěn ve stejné doméně aplikace jako trvalý kód vytváření instancí.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-111">In addition, developers should ensure that malicious code can't be executed in the same application domain as the durable instancing code.</span></span>

3. <span data-ttu-id="b2ee3-112">Trvalé vytváření instancí by se nemělo spouštět se zvýšenými oprávněními (správce).</span><span class="sxs-lookup"><span data-stu-id="b2ee3-112">Durable instancing should not be run with elevated (Administrator) permissions.</span></span>

4. <span data-ttu-id="b2ee3-113">Data zpracovaná mimo doménu aplikace by měla být chráněna.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-113">Data being processed outside the application domain should be protected.</span></span>

5. <span data-ttu-id="b2ee3-114">Aplikace, které vyžadují izolaci zabezpečení, by neměly sdílet stejnou instanci abstrakce schématu.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-114">Applications that require security isolation should not share the same instance of the schema abstraction.</span></span> <span data-ttu-id="b2ee3-115">Takové aplikace by měly používat jiné poskytovatele úložiště nebo poskytovatele úložiště nakonfigurované na používání různých instancí úložiště.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-115">Such applications should use different store providers, or store providers configured to use different store instantiations.</span></span>

## <a name="sql-server-security-concerns"></a><span data-ttu-id="b2ee3-116">Problémy se zabezpečením SQL Server</span><span class="sxs-lookup"><span data-stu-id="b2ee3-116">SQL Server Security Concerns</span></span>

- <span data-ttu-id="b2ee3-117">Pokud se používá velký počet podřízených aktivit, umístění, záložek, rozšíření hostitelů nebo oborů, nebo když se používají záložky s velkými objemy dat, může být paměť vyčerpána nebo je možné během trvalosti přidělit neoprávněné množství místa v databázi.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-117">When large numbers of child activities, locations, bookmarks, host extensions, or scopes are used, or when bookmarks with very large payloads are used, memory can be exhausted, or undue amounts of database space can be allocated during persistence.</span></span> <span data-ttu-id="b2ee3-118">To lze zmírnit použitím zabezpečení na úrovni objektů a databáze.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-118">This can be mitigated by using object-level and database-level security.</span></span>

- <span data-ttu-id="b2ee3-119">Při použití <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>musí být úložiště instancí zabezpečené.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-119">When using <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, the instance store must be secured.</span></span>

- <span data-ttu-id="b2ee3-120">Citlivá data v úložišti instancí by měla být zašifrovaná.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-120">Sensitive data in the instance store should be encrypted.</span></span> <span data-ttu-id="b2ee3-121">Další informace najdete v tématu [šifrování SQL Server](/sql/relational-databases/security/encryption/sql-server-encryption).</span><span class="sxs-lookup"><span data-stu-id="b2ee3-121">For more information, see [SQL Server Encryption](/sql/relational-databases/security/encryption/sql-server-encryption).</span></span>

- <span data-ttu-id="b2ee3-122">Vzhledem k tomu, že připojovací řetězec databáze je často součástí konfiguračního souboru, měli byste použít zabezpečení na úrovni systému Windows, aby se zajistilo, že konfigurační soubor (Web. config je obvykle) je zabezpečený a že informace o přihlašovacích údajích a heslech nejsou zahrnuté v připojovací řetězec</span><span class="sxs-lookup"><span data-stu-id="b2ee3-122">Since the database connection string is often included in a configuration file, windows-level security (ACL) should be used to ensure that the configuration file (Web.Config usually) is secure, and that login and password information are not included in the connection string.</span></span> <span data-ttu-id="b2ee3-123">Místo toho by se mělo používat ověřování systému Windows mezi databází a webovým serverem.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-123">Windows authentication should be used between the database and the web server instead.</span></span>

## <a name="considerations-for-workflowservicehost"></a><span data-ttu-id="b2ee3-124">Předpoklady pro hostitelskou hostitele</span><span class="sxs-lookup"><span data-stu-id="b2ee3-124">Considerations for WorkflowServiceHost</span></span>

- <span data-ttu-id="b2ee3-125">Koncové body Windows Communication Foundation (WCF) použité v pracovních postupech by měly být zabezpečené.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-125">Windows Communication Foundation (WCF) endpoints used in workflows should be secured.</span></span> <span data-ttu-id="b2ee3-126">Další informace najdete v tématu [Přehled zabezpečení služby WCF](../wcf/feature-details/security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b2ee3-126">For more information, see [WCF Security Overview](../wcf/feature-details/security-overview.md).</span></span>

- <span data-ttu-id="b2ee3-127">Autorizaci na úrovni hostitele je možné implementovat pomocí <xref:System.ServiceModel.ServiceAuthorizationManager>.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-127">Host-level authorization can be implemented by using <xref:System.ServiceModel.ServiceAuthorizationManager>.</span></span> <span data-ttu-id="b2ee3-128">Podrobnosti najdete v tématu [Postup: Vytvoření vlastního Správce autorizací pro službu](../wcf/extending/how-to-create-a-custom-authorization-manager-for-a-service.md) .</span><span class="sxs-lookup"><span data-stu-id="b2ee3-128">See [How To: Create a Custom Authorization Manager for a Service](../wcf/extending/how-to-create-a-custom-authorization-manager-for-a-service.md) for details.</span></span>

- <span data-ttu-id="b2ee3-129">ServiceSecurityContext pro příchozí zprávy je také k dispozici v rámci pracovního postupu přístupem k OperationContext.</span><span class="sxs-lookup"><span data-stu-id="b2ee3-129">The ServiceSecurityContext for the incoming message is also available from within workflow by accessing OperationContext.</span></span>

## <a name="wf-security-pack-ctp"></a><span data-ttu-id="b2ee3-130">WF Security Pack CTP</span><span class="sxs-lookup"><span data-stu-id="b2ee3-130">WF Security Pack CTP</span></span>
 <span data-ttu-id="b2ee3-131">Microsoft WF Security Pack CTP 1 je první vydání sady aktivit (Community Technology Preview) a jejich implementace na základě [programovací model Windows Workflow Foundation](index.md) v [.NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF 4) a [Windows Identity Foundation (WIF)](../security/index.md).</span><span class="sxs-lookup"><span data-stu-id="b2ee3-131">The Microsoft WF Security Pack CTP 1 is the first community technology preview (CTP) release of a set of activities and their implementation based on [Windows Workflow Foundation](index.md) in [.NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF 4) and the [Windows Identity Foundation (WIF)](../security/index.md).</span></span>  <span data-ttu-id="b2ee3-132">Microsoft WF Security Pack CTP 1 obsahuje obě aktivity a jejich návrháře, které ukazují, jak snadno povolit různé scénáře související se zabezpečením pomocí pracovního postupu, včetně těchto:</span><span class="sxs-lookup"><span data-stu-id="b2ee3-132">The Microsoft WF Security Pack CTP 1 contains both activities and their designers which illustrate how to easily enable various security-related scenarios using workflow, including:</span></span>

1. <span data-ttu-id="b2ee3-133">Zosobnění identity klienta v pracovním postupu</span><span class="sxs-lookup"><span data-stu-id="b2ee3-133">Impersonating a client identity in the workflow</span></span>

2. <span data-ttu-id="b2ee3-134">Autorizace v rámci pracovního postupu, jako je například PrincipalPermission a ověřování deklarací identity</span><span class="sxs-lookup"><span data-stu-id="b2ee3-134">In-workflow authorization, such as PrincipalPermission and validation of Claims</span></span>

3. <span data-ttu-id="b2ee3-135">Ověřené zasílání zpráv pomocí ClientCredentials zadané v pracovním postupu, jako je uživatelské jméno/heslo nebo token načtený ze služby tokenů zabezpečení (STS)</span><span class="sxs-lookup"><span data-stu-id="b2ee3-135">Authenticated messaging using ClientCredentials specified in the workflow, such as username/password or a token retrieved from a Security Token Service (STS)</span></span>

4. <span data-ttu-id="b2ee3-136">Přenos tokenu zabezpečení klienta do back-endové služby (delegování založené na deklaracích) pomocí WS-Trust ActAs</span><span class="sxs-lookup"><span data-stu-id="b2ee3-136">Flowing a client security token to a back-end service (claims-based delegation) using WS-Trust ActAs</span></span>

<span data-ttu-id="b2ee3-137">Další informace a stažení balíčku zabezpečení WF Security Pack CTP najdete v tématu: [WF Security Pack CTP](https://archive.codeplex.com/?p=wf)</span><span class="sxs-lookup"><span data-stu-id="b2ee3-137">For more information and to download the WF Security Pack CTP, see: [WF Security Pack CTP](https://archive.codeplex.com/?p=wf)</span></span>
