---
title: Osvědčené postupy pro trvalost
ms.date: 03/30/2017
ms.assetid: 6974c5a4-1af8-4732-ab53-7d694608a3a0
ms.openlocfilehash: fdbf61e559efbd978df1c5a46fcbbbbc528ec98a
ms.sourcegitcommit: efff8f331fd9467f093f8ab8d23a203d6ecb5b60
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/01/2018
ms.locfileid: "43404687"
---
# <a name="persistence-best-practices"></a><span data-ttu-id="51770-102">Osvědčené postupy pro trvalost</span><span class="sxs-lookup"><span data-stu-id="51770-102">Persistence Best Practices</span></span>
<span data-ttu-id="51770-103">Tento dokument popisuje osvědčené postupy pro návrh pracovního postupu a konfigurace související s trvalost pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="51770-103">This document covers best practices for workflow design and configuration related to workflow persistence.</span></span>  
  
## <a name="design-and-implementation-of-durable-workflows"></a><span data-ttu-id="51770-104">Návrh a implementace odolné pracovní postupy</span><span class="sxs-lookup"><span data-stu-id="51770-104">Design and Implementation of Durable Workflows</span></span>  
 <span data-ttu-id="51770-105">Obecně platí pracovní postupy provedení práce v krátkém období, která je prokládaný s časem, během kterých je nečinný pracovního postupu, protože se čeká na událost.</span><span class="sxs-lookup"><span data-stu-id="51770-105">In general, workflows perform work in short periods that are interleaved with times during which the workflow is idle because it is waiting for an event.</span></span> <span data-ttu-id="51770-106">Tato událost může být například zpráva nebo zpráva u nichž vyprší platnost časovače.</span><span class="sxs-lookup"><span data-stu-id="51770-106">This event can be such things as a message or an expiring timer.</span></span> <span data-ttu-id="51770-107">Aby bylo možné uvolnit instance pracovního postupu, když se změní na nečinnosti, musí hostitel služby zachovat instance pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="51770-107">To be able to unload the workflow instance when it becomes idle, the service host must persist the workflow instance.</span></span> <span data-ttu-id="51770-108">Toto je možný jenom v případě, že instance pracovního postupu není v zóně no-persist (například čekání na dokončení transakce nebo čeká na asynchronní zpětné volání).</span><span class="sxs-lookup"><span data-stu-id="51770-108">This is possible only if the workflow instance is not in a no-persist zone (for example, waiting for a transaction to complete, or waiting for an asynchronous callback).</span></span> <span data-ttu-id="51770-109">Pokud chcete povolit instance nečinných pracovních postupů pro uvolnění, by měl Autor pracovního postupu použijte obory transakce a asynchronních aktivitách krátkodobou pouze pro akce.</span><span class="sxs-lookup"><span data-stu-id="51770-109">To allow an idle workflow instance to unload, the workflow author should use transaction scopes and asynchronous activities for short-lived actions only.</span></span> <span data-ttu-id="51770-110">Konkrétně se Autor zachovával zpoždění aktivity v rámci těchto no zachovat zóny co nejkratší.</span><span class="sxs-lookup"><span data-stu-id="51770-110">In particular, the author should keep delay activities within these no-persist zones as short as possible.</span></span>  
  
 <span data-ttu-id="51770-111">Pracovní postup mohl být trvalý, pouze pokud jsou všechny datové typy používané tímto pracovním postupem serializovatelný.</span><span class="sxs-lookup"><span data-stu-id="51770-111">A workflow can only be persisted if all of the data types used by the workflow are serializable.</span></span> <span data-ttu-id="51770-112">Kromě toho musí být serializovatelný s vlastní typy používané v pracovních postupech trvalý <xref:System.Runtime.Serialization.NetDataContractSerializer> aby bylo možné nastavit jako trvalý, podle <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>.</span><span class="sxs-lookup"><span data-stu-id="51770-112">In addition, custom types used in persisted workflows must be serializable with <xref:System.Runtime.Serialization.NetDataContractSerializer> in order to be persisted by <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>.</span></span>  
  
 <span data-ttu-id="51770-113">Instance pracovního postupu nelze obnovit v případě selhání hostitele nebo počítače, pokud ještě nebyla trvale uložena.</span><span class="sxs-lookup"><span data-stu-id="51770-113">A workflow instance cannot be recovered in case of a host or computer failure if it has not been persisted.</span></span> <span data-ttu-id="51770-114">Obecně doporučujeme zachovat instance pracovního postupu v rané fázi životního cyklu pro pracovní postupy.</span><span class="sxs-lookup"><span data-stu-id="51770-114">In general, we recommend that you persist a workflow instance early in the workflow’s life cycle.</span></span>  
  
 <span data-ttu-id="51770-115">Pokud váš pracovní postup je zaneprázdněn po dlouhou dobu, doporučujeme, zachovat instance pracovního postupu pravidelně v průběhu doby zaneprázdněn.</span><span class="sxs-lookup"><span data-stu-id="51770-115">If your workflow is busy for a long time, we recommend that you persist the workflow instance regularly throughout its busy period.</span></span> <span data-ttu-id="51770-116">Můžete to provést tak, že přidáte <xref:System.Activities.Statements.Persist> aktivity v rámci posloupnost aktivit, které udržují zaneprázdněný instance pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="51770-116">You can do this by adding <xref:System.Activities.Statements.Persist> activities throughout the sequence of activities that keep the workflow instance busy.</span></span> <span data-ttu-id="51770-117">Tímto způsobem, aplikační domény recyklaci, nezpůsobí selhání hostitele nebo selhání počítače systému se vrátit zpět na začátek zaneprázdněný období.</span><span class="sxs-lookup"><span data-stu-id="51770-117">In this manner, application domain recycling, host failures, or computer failures do not cause the system to be rolled back to the start of the busy period.</span></span> <span data-ttu-id="51770-118">Mějte na paměti, že přidání <xref:System.Activities.Statements.Persist> aktivity do pracovního postupu by mohla vést ke snížení výkonu.</span><span class="sxs-lookup"><span data-stu-id="51770-118">Be aware that adding <xref:System.Activities.Statements.Persist> activities to your workflow could lead to a degradation of performance.</span></span>  
  
 <span data-ttu-id="51770-119">Windows Server App Fabric výrazně zjednodušuje konfiguraci a použití trvalosti.</span><span class="sxs-lookup"><span data-stu-id="51770-119">Windows Server App Fabric greatly simplifies the configuration and use of persistence.</span></span> <span data-ttu-id="51770-120">Další informace najdete v tématu [systému Windows Server App Fabric trvalosti](https://go.microsoft.com/fwlink/?LinkID=201200&clcid=0x409)</span><span class="sxs-lookup"><span data-stu-id="51770-120">For more information, see [Windows Server App Fabric Persistence](https://go.microsoft.com/fwlink/?LinkID=201200&clcid=0x409)</span></span>  
  
## <a name="configuration-of-scalability-parameters"></a><span data-ttu-id="51770-121">Konfigurace parametrů škálovatelnost</span><span class="sxs-lookup"><span data-stu-id="51770-121">Configuration of Scalability Parameters</span></span>  
 <span data-ttu-id="51770-122">Požadavky na škálovatelnost a výkon určení nastavení z následujících parametrů:</span><span class="sxs-lookup"><span data-stu-id="51770-122">Scalability and performance requirements determine the settings of the following parameters:</span></span>  
  
-   <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A>  
  
-   <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A>  
  
-   <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior.InstanceLockedExceptionAction%2A>  
  
 <span data-ttu-id="51770-123">Tyto parametry, je třeba nastavit následujícím způsobem podle aktuální situaci.</span><span class="sxs-lookup"><span data-stu-id="51770-123">These parameters should be set as follows, according to the current scenario.</span></span>  
  
### <a name="scenario-a-small-number-of-workflow-instances-that-require-optimal-response-time"></a><span data-ttu-id="51770-124">Scénář: Malý počet instancí pracovních postupů, které vyžadují optimální odezvu</span><span class="sxs-lookup"><span data-stu-id="51770-124">Scenario: A Small Number of Workflow Instances That Require Optimal Response Time</span></span>  
 <span data-ttu-id="51770-125">V tomto scénáři by měla zůstat všechny instance pracovních postupů načtených, když jsou nečinné.</span><span class="sxs-lookup"><span data-stu-id="51770-125">In this scenario, all workflow instances should remain loaded when they become idle.</span></span> <span data-ttu-id="51770-126">Nastavte <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> velké hodnoty.</span><span class="sxs-lookup"><span data-stu-id="51770-126">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to a large value.</span></span> <span data-ttu-id="51770-127">Použití tohoto nastavení zabraňuje přesunu mezi počítači instance pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="51770-127">The use of this setting prevents a workflow instance from moving between computers.</span></span> <span data-ttu-id="51770-128">Toto nastavení použijte jenom v případě, že platí jedna nebo více z následujících akcí:</span><span class="sxs-lookup"><span data-stu-id="51770-128">Use this setting only if one or more of the following are true:</span></span>  
  
-   <span data-ttu-id="51770-129">Instance pracovního postupu obdrží do jedné zprávy v průběhu svého životního cyklu.</span><span class="sxs-lookup"><span data-stu-id="51770-129">A workflow instance receives a single message throughout its lifetime.</span></span>  
  
-   <span data-ttu-id="51770-130">Všechny instance pracovního postupu spuštěné v jednom počítači</span><span class="sxs-lookup"><span data-stu-id="51770-130">All workflow instances run on a single computer</span></span>  
  
-   <span data-ttu-id="51770-131">Všechny zprávy, které jsou přijímány instance pracovního postupu jsou přijímány do stejného počítače.</span><span class="sxs-lookup"><span data-stu-id="51770-131">All messages that are received by a workflow instance are received by the same computer.</span></span>  
  
 <span data-ttu-id="51770-132">Použití <xref:System.Activities.Statements.Persist> aktivity nebo sadu <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> na 0 pro povolení obnovení instance pracovního postupu po selhání služby hostitele nebo počítače.</span><span class="sxs-lookup"><span data-stu-id="51770-132">Use <xref:System.Activities.Statements.Persist> activities or set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> to 0 to enable recovery of your workflow instance after service host or computer failures.</span></span>  
  
### <a name="scenario-workflow-instances-are-idle-for-long-periods-of-time"></a><span data-ttu-id="51770-133">Scénář: Instancí pracovních postupů jsou pro dlouhou dobu nečinné.</span><span class="sxs-lookup"><span data-stu-id="51770-133">Scenario: Workflow Instances Are Idle for Long Periods of Time</span></span>  
 <span data-ttu-id="51770-134">V tomto scénáři, nastavte <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> na hodnotu 0 a co nejdříve uvolnit prostředky.</span><span class="sxs-lookup"><span data-stu-id="51770-134">In this scenario, set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to 0 to release resources as soon as possible.</span></span>  
  
### <a name="scenario-workflow-instances-receive-multiple-messages-in-a-short-period-of-time"></a><span data-ttu-id="51770-135">Scénář: Instance pracovního postupu přijmout více zpráv v krátké době</span><span class="sxs-lookup"><span data-stu-id="51770-135">Scenario: Workflow Instances Receive Multiple Messages in a Short Period of Time</span></span>  
 <span data-ttu-id="51770-136">V tomto scénáři, nastavte <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> na 60 sekund, pokud se tyto zprávy jsou přijímány do stejného počítače.</span><span class="sxs-lookup"><span data-stu-id="51770-136">In this scenario, set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to 60 seconds if these messages are received by the same computer.</span></span> <span data-ttu-id="51770-137">To zabraňuje rychlém sledu uvolnění a načítání instance pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="51770-137">This prevents a rapid sequence of unloading and loading of a workflow instance.</span></span> <span data-ttu-id="51770-138">To také neudržuje instance v paměti příliš dlouho.</span><span class="sxs-lookup"><span data-stu-id="51770-138">This also does not keep the instance in memory for too long.</span></span>  
  
 <span data-ttu-id="51770-139">Nastavte <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> 0 a sada <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior.InstanceLockedExceptionAction%2A> BasicRetry nebo AggressiveRetry, pokud se tyto zprávy můžou přijímat pomocí různých počítačů.</span><span class="sxs-lookup"><span data-stu-id="51770-139">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to 0, and set <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior.InstanceLockedExceptionAction%2A> to BasicRetry or AggressiveRetry if these messages may be received by different computers.</span></span> <span data-ttu-id="51770-140">To umožňuje instance pracovního postupu, které mají být načteny jiného počítače.</span><span class="sxs-lookup"><span data-stu-id="51770-140">This allows the workflow instance to be loaded by another computer.</span></span>  
  
### <a name="scenario-workflow-uses-delay-activities-with-short-durations"></a><span data-ttu-id="51770-141">Scénář: Pracovní postup používá zpoždění aktivity s krátkou dobou trvání</span><span class="sxs-lookup"><span data-stu-id="51770-141">Scenario: Workflow Uses Delay Activities with Short Durations</span></span>  
 <span data-ttu-id="51770-142">V tomto scénáři <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> pravidelně se dotazuje databáze trvalosti pro instancí, které by měl být načteny z důvodu vypršela <xref:System.Activities.Statements.Delay> aktivity.</span><span class="sxs-lookup"><span data-stu-id="51770-142">In this scenario, the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> regularly polls the persistence database for instances that should be loaded because of an expired <xref:System.Activities.Statements.Delay> activity.</span></span> <span data-ttu-id="51770-143">Pokud <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> najde časovač, který vyprší za na další interval dotazování, Store Instance pracovního postupu SQL zkrátí interval dotazování.</span><span class="sxs-lookup"><span data-stu-id="51770-143">If the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> finds a timer that will expire in the next polling interval, the SQL Workflow Instance Store shortens the polling interval.</span></span> <span data-ttu-id="51770-144">Další dotazování dojde poté bezprostředně potom, co má vypršela.</span><span class="sxs-lookup"><span data-stu-id="51770-144">The next poll will then occur right after the timer has expired.</span></span> <span data-ttu-id="51770-145">Tímto způsobem Store Instance pracovního postupu SQL dosahuje přesnější časovače, které trvají déle než interval dotazování, které nastavuje <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span><span class="sxs-lookup"><span data-stu-id="51770-145">This way, the SQL Workflow Instance Store achieves a high accuracy of timers that run longer than the polling interval, which is set by <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span></span> <span data-ttu-id="51770-146">Povolit včas zpracování kratší zpoždění, musí zůstat instance pracovního postupu v paměti pro alespoň jeden interval dotazování.</span><span class="sxs-lookup"><span data-stu-id="51770-146">To enable timely processing of shorter delays, the workflow instance must remain in memory for at least one polling interval.</span></span>  
  
 <span data-ttu-id="51770-147">Nastavte <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> na hodnotu 0 pro zápis do databáze trvalosti čas vypršení platnosti.</span><span class="sxs-lookup"><span data-stu-id="51770-147">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> to 0 to write the expiration time to the persistence database.</span></span>  
  
 <span data-ttu-id="51770-148">Nastavte <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> delší než nebo rovna hodnotě <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> pro instance v paměti pro alespoň jeden interval dotazování.</span><span class="sxs-lookup"><span data-stu-id="51770-148">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to longer than or equal to <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> to keep the instance in memory for at least one polling interval.</span></span>  
  
 <span data-ttu-id="51770-149">Nedoporučujeme snížení <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> protože důsledkem je zvýšená zátěž databáze trvalosti.</span><span class="sxs-lookup"><span data-stu-id="51770-149">We do not recommend reducing the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> because this leads to an increased load on the persistence database.</span></span> <span data-ttu-id="51770-150">Každý hostitel služby, který používá <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> dotazuje databázi jednou za období zjišťování.</span><span class="sxs-lookup"><span data-stu-id="51770-150">Each service host that uses the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> polls the database one time per detection period.</span></span> <span data-ttu-id="51770-151">Nastavení <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> příliš malý na čas interval může způsobit, že výkon vašeho systému, snížit, pokud je velký počet hostitelů služby.</span><span class="sxs-lookup"><span data-stu-id="51770-151">Setting <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> to too small a time interval may cause your system's performance to decrease if the number of service hosts is large.</span></span>  
  
## <a name="configuring-the-sql-workflow-instance-store"></a><span data-ttu-id="51770-152">Konfigurace Store Instance pracovních postupů SQL</span><span class="sxs-lookup"><span data-stu-id="51770-152">Configuring the SQL Workflow Instance Store</span></span>  
 <span data-ttu-id="51770-153">Store Instance pracovního postupu SQL má následující parametry konfigurace:</span><span class="sxs-lookup"><span data-stu-id="51770-153">The SQL Workflow Instance Store has the following configuration parameters:</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceEncodingOption%2A>  
 <span data-ttu-id="51770-154">Tento parametr nastaví <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> komprese stavu instance pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="51770-154">This parameter instructs the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> to compress the workflow instance state.</span></span> <span data-ttu-id="51770-155">Komprese snižuje množství dat, která je uložena v databázi trvalosti a snižuje síťový provoz v případě, že databáze stálost nachází na vyhrazený databázový server.</span><span class="sxs-lookup"><span data-stu-id="51770-155">Compression reduces the amount of data that is stored in the persistence database and reduces network traffic in case the persistence database resides on a dedicated database server.</span></span> <span data-ttu-id="51770-156">Pokud se používá komprese, vyžaduje výpočetní prostředky ke komprimaci a extrakci stav instance.</span><span class="sxs-lookup"><span data-stu-id="51770-156">If compression is used, it requires computational resources to compress and extract the instance state.</span></span> <span data-ttu-id="51770-157">Komprese ve většině případů poskytuje vyšší výkon.</span><span class="sxs-lookup"><span data-stu-id="51770-157">In most cases, compression yields increased performance.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceCompletionAction%2A>  
 <span data-ttu-id="51770-158">Tento parametr nastaví <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> zachovat nebo odstranit dokončené instance.</span><span class="sxs-lookup"><span data-stu-id="51770-158">This parameter instructs the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> to either keep or delete completed instances.</span></span> <span data-ttu-id="51770-159">Uchování dokončit instance zvyšuje požadavky na úložiště databáze trvalosti a vede k větší tabulky, který zlepšuje dobu vyhledávací tabulky.</span><span class="sxs-lookup"><span data-stu-id="51770-159">Keeping completed instances increases the persistence database storage requirements and leads to larger tables, which increases table lookup times.</span></span> <span data-ttu-id="51770-160">Pokud dokončené instance jsou požadovány pro ladění nebo auditování, je nejvhodnější dáte pokyn, aby <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> k instancím odstraňování se dokončilo.</span><span class="sxs-lookup"><span data-stu-id="51770-160">Unless completed instances are required for debugging or auditing, it is best to instruct the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> to delete completed instances.</span></span> <span data-ttu-id="51770-161">Odstraněné instancí se uchovávají pouze v případě, že uživatel vytvoří proces pro nakonec je odstranit.</span><span class="sxs-lookup"><span data-stu-id="51770-161">Deleted instances should be kept only if the user establishes a process for eventually removing them.</span></span> <span data-ttu-id="51770-162">Všimněte si, že srovnávací klíče nesmí znovu použít jako dokončený pracovní postup instance se nachází v úložišti instancí.</span><span class="sxs-lookup"><span data-stu-id="51770-162">Note that correlation keys cannot be reused as long as the completed workflow instance resides in the instance store.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>  
 <span data-ttu-id="51770-163">Tento parametr definuje maximální časový interval, pomocí kterého <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> se dotazuje databáze trvalosti pro instance, které by měly být načteny při <xref:System.Activities.Statements.Delay> aktivity vyprší platnost.</span><span class="sxs-lookup"><span data-stu-id="51770-163">This parameter defines the maximum interval with which the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> polls the persistence database for instances that should be loaded when a <xref:System.Activities.Statements.Delay> activity expires.</span></span> <span data-ttu-id="51770-164">Pokud <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> najde časovač, který vyprší za na další interval dotazování, zkrátí interval dotazování, takže hned po vypršení časovač bude docházet k další dotazování.</span><span class="sxs-lookup"><span data-stu-id="51770-164">If the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> finds a timer that will expire in the next polling interval, it shortens the polling interval so that the next poll will occur right after the timer has expired.</span></span> <span data-ttu-id="51770-165">Tímto způsobem Store Instance pracovního postupu SQL dosahuje vysoké přesnost časovače, které trvají déle než <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span><span class="sxs-lookup"><span data-stu-id="51770-165">This way, the SQL Workflow Instance Store achieves a high accuracy of timers that run longer than <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span></span>  
  
 <span data-ttu-id="51770-166">Nedoporučujeme snížení <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>, protože to vede k větší zatížení databáze trvalosti.</span><span class="sxs-lookup"><span data-stu-id="51770-166">We do not recommend reducing the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>, because this leads to an increased load on the persistence database.</span></span> <span data-ttu-id="51770-167">Každý hostitel služby, který používá <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> dotazuje databázi jednou za období zjišťování.</span><span class="sxs-lookup"><span data-stu-id="51770-167">Each service host that uses the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> polls the database one time per detection period.</span></span> <span data-ttu-id="51770-168">Nastavení <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> příliš malý interval může způsobit výkon vašeho systému, snížit, pokud je velký počet hostitelů služby.</span><span class="sxs-lookup"><span data-stu-id="51770-168">Setting <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> to too small an interval may cause your system's performance to decrease if the number of service hosts is large.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.HostLockRenewalPeriod%2A>  
 <span data-ttu-id="51770-169">Tento parametr definuje interval, pomocí kterého hostitele se tato možnost obnoví platnost zámku v databázi trvalosti.</span><span class="sxs-lookup"><span data-stu-id="51770-169">This parameter defines the interval with which the host renews its lock in the persistence database.</span></span> <span data-ttu-id="51770-170">Zkrácení tohoto intervalu vám umožní rychlejší obnovení instancí pracovních postupů v případě selhání hostitele nebo počítače.</span><span class="sxs-lookup"><span data-stu-id="51770-170">Shortening this interval will enable a quicker recovery of the workflow instances in case a host or computer fails.</span></span> <span data-ttu-id="51770-171">Interval obnovování krátký zámku na druhé straně zvyšuje zatížení databáze trvalosti.</span><span class="sxs-lookup"><span data-stu-id="51770-171">On the other hand, a short lock renewal period increases the load on the persistence database.</span></span> <span data-ttu-id="51770-172">Každý hostitel služby, který používá <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> se aktualizuje jednou za období obnovení jeho zámky v databázi.</span><span class="sxs-lookup"><span data-stu-id="51770-172">Each service host that uses the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> will update its locks in the database one time per renewal period.</span></span> <span data-ttu-id="51770-173">Pokud počítač používá mnoho hostitelů služby, ujistěte se, že zatížení způsobeno obnovení zámku ne snížit výkon systému.</span><span class="sxs-lookup"><span data-stu-id="51770-173">If a computer runs many service hosts, make sure that the load caused by lock renewal does not decrease your system's performance.</span></span> <span data-ttu-id="51770-174">Pokud ano, zvažte zvýšení <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.HostLockRenewalPeriod%2A>.</span><span class="sxs-lookup"><span data-stu-id="51770-174">If it does, consider increasing the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.HostLockRenewalPeriod%2A>.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A>  
 <span data-ttu-id="51770-175">Pokud je povoleno, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> opakovanými pokusy o načtení zamknuté instance pro další 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="51770-175">If enabled, the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> retries to load a locked instance for the next 30 seconds.</span></span> <span data-ttu-id="51770-176">Nastavte <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> BasicRetry nebo AggressiveRetry Pokud pracovní postup přijímá více zpráv v krátkém čase, a tyto zprávy jsou přijímány různých počítačích.</span><span class="sxs-lookup"><span data-stu-id="51770-176">Set <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> to BasicRetry or AggressiveRetry if the workflow receives multiple messages in a short time, and these messages are received by different computers.</span></span>  
  
 <span data-ttu-id="51770-177">Protože mechanismus opakování zatížení nezavádí jakékoli výkonu režie tak dlouho, dokud zkoušet zatížení opakování, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> měla být vždy povolena.</span><span class="sxs-lookup"><span data-stu-id="51770-177">Because the load retry mechanism does not introduce any performance overhead as long as load retries are not tried, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> should always be enabled.</span></span>
