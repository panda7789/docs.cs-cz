---
title: Základní koncepce Windows Workflow
description: Tento článek popisuje některé koncepty vývoje pracovního postupu v .NET Framework 4.6.1, které nemusí být pro některé vývojáře známé.
ms.date: 03/30/2017
ms.assetid: 0e930e80-5060-45d2-8a7a-95c0690105d4
ms.openlocfilehash: 07498241280191fb62a35a559a3391f7148c05b9
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/15/2020
ms.locfileid: "83419886"
---
# <a name="fundamental-windows-workflow-concepts"></a><span data-ttu-id="064b8-103">Základní koncepce Windows Workflow</span><span class="sxs-lookup"><span data-stu-id="064b8-103">Fundamental Windows Workflow Concepts</span></span>
<span data-ttu-id="064b8-104">Vývoj pracovních postupů v nástroji [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] používá koncepty, které mohou být pro některé vývojáře novinkou.</span><span class="sxs-lookup"><span data-stu-id="064b8-104">Workflow development in the [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] uses concepts that may be new to some developers.</span></span> <span data-ttu-id="064b8-105">Toto téma popisuje některé z konceptů a způsob jejich implementace.</span><span class="sxs-lookup"><span data-stu-id="064b8-105">This topic describes some of the concepts and how they are implemented.</span></span>  
  
## <a name="workflows-and-activities"></a><span data-ttu-id="064b8-106">Pracovní postupy a aktivity</span><span class="sxs-lookup"><span data-stu-id="064b8-106">Workflows and Activities</span></span>  
 <span data-ttu-id="064b8-107">Pracovní postup je strukturovaná kolekce akcí, které modelují proces.</span><span class="sxs-lookup"><span data-stu-id="064b8-107">A workflow is a structured collection of actions that models a process.</span></span> <span data-ttu-id="064b8-108">Každá akce v pracovním postupu je modelována jako aktivita.</span><span class="sxs-lookup"><span data-stu-id="064b8-108">Each action in the workflow is modeled as an activity.</span></span> <span data-ttu-id="064b8-109">Hostitel spolupracuje s pracovním postupem pomocí <xref:System.Activities.WorkflowInvoker> pro vyvolání pracovního postupu, jako by šlo o metodu, <xref:System.Activities.WorkflowApplication> pro explicitní kontrolu nad prováděním jedné instance pracovního postupu a <xref:System.ServiceModel.WorkflowServiceHost> pro interakce založené na zprávách ve scénářích s více instancemi.</span><span class="sxs-lookup"><span data-stu-id="064b8-109">A host interacts with a workflow by using <xref:System.Activities.WorkflowInvoker> for invoking a workflow as if it were a method,  <xref:System.Activities.WorkflowApplication> for explicit control over the execution of a single workflow instance, and <xref:System.ServiceModel.WorkflowServiceHost> for message-based interactions in multi-instance scenarios.</span></span> <span data-ttu-id="064b8-110">Vzhledem k tomu, že kroky pracovního postupu jsou definovány jako hierarchie aktivit, může být první aktivita v hierarchii určena k definování samotného pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="064b8-110">Because steps of the workflow are defined as a hierarchy of activities, the topmost activity in the hierarchy can be said to define the workflow itself.</span></span> <span data-ttu-id="064b8-111">Tento model hierarchie přebírá místo explicitního `SequentialWorkflow` a `StateMachineWorkflow` třídy z předchozích verzí.</span><span class="sxs-lookup"><span data-stu-id="064b8-111">This hierarchy model takes the place of the explicit `SequentialWorkflow` and `StateMachineWorkflow` classes from previous versions.</span></span> <span data-ttu-id="064b8-112">Aktivity samy jsou vyvíjeny jako kolekce jiných aktivit (za použití <xref:System.Activities.Activity> třídy jako základní, obvykle definované pomocí XAML) nebo jsou vlastní vytvořené pomocí <xref:System.Activities.CodeActivity> třídy, která může použít modul runtime pro přístup k datům nebo pomocí <xref:System.Activities.NativeActivity> třídy, která zpřístupňuje míru modulu runtime pracovního postupu pro autora aktivity.</span><span class="sxs-lookup"><span data-stu-id="064b8-112">Activities themselves are developed as collections of other activities (using the <xref:System.Activities.Activity> class as a base, usually defined by using XAML) or are custom created by using the <xref:System.Activities.CodeActivity> class, which can use the runtime for data access, or by using the <xref:System.Activities.NativeActivity> class, which exposes the breadth of the workflow runtime to the activity author.</span></span> <span data-ttu-id="064b8-113">Aktivity vyvinuté pomocí <xref:System.Activities.CodeActivity> a <xref:System.Activities.NativeActivity> jsou vytvářeny pomocí jazyků kompatibilních s modulem CLR, jako je C#.</span><span class="sxs-lookup"><span data-stu-id="064b8-113">Activities developed by using <xref:System.Activities.CodeActivity> and <xref:System.Activities.NativeActivity> are created by using CLR-compliant languages such as C#.</span></span>  
  
## <a name="activity-data-model"></a><span data-ttu-id="064b8-114">Datový model aktivity</span><span class="sxs-lookup"><span data-stu-id="064b8-114">Activity Data Model</span></span>  
 <span data-ttu-id="064b8-115">Aktivity ukládají a sdílejí data pomocí typů uvedených v následující tabulce.</span><span class="sxs-lookup"><span data-stu-id="064b8-115">Activities store and share data by using the types shown in the following table.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="064b8-116">Proměnná</span><span class="sxs-lookup"><span data-stu-id="064b8-116">Variable</span></span>|<span data-ttu-id="064b8-117">Ukládá data do aktivity.</span><span class="sxs-lookup"><span data-stu-id="064b8-117">Stores data in an activity.</span></span>|  
|<span data-ttu-id="064b8-118">Argument</span><span class="sxs-lookup"><span data-stu-id="064b8-118">Argument</span></span>|<span data-ttu-id="064b8-119">Přesune data do aktivity a ven z ní.</span><span class="sxs-lookup"><span data-stu-id="064b8-119">Moves data into and out of an activity.</span></span>|  
|<span data-ttu-id="064b8-120">Výraz</span><span class="sxs-lookup"><span data-stu-id="064b8-120">Expression</span></span>|<span data-ttu-id="064b8-121">Aktivita se zvýšenou návratovou hodnotou použitou v vazbách argumentů.</span><span class="sxs-lookup"><span data-stu-id="064b8-121">An activity with an elevated return value used in argument bindings.</span></span>|  
  
## <a name="workflow-runtime"></a><span data-ttu-id="064b8-122">Modul runtime pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="064b8-122">Workflow Runtime</span></span>  
 <span data-ttu-id="064b8-123">Modul runtime pracovního postupu je prostředí, ve kterém se pracovní postupy spouštějí.</span><span class="sxs-lookup"><span data-stu-id="064b8-123">The workflow runtime is the environment in which workflows execute.</span></span> <span data-ttu-id="064b8-124"><xref:System.Activities.WorkflowInvoker>je nejjednodušší způsob, jak spustit pracovní postup.</span><span class="sxs-lookup"><span data-stu-id="064b8-124"><xref:System.Activities.WorkflowInvoker> is the simplest way to execute a workflow.</span></span> <span data-ttu-id="064b8-125">Hostitel používá <xref:System.Activities.WorkflowInvoker> pro následující:</span><span class="sxs-lookup"><span data-stu-id="064b8-125">The host uses <xref:System.Activities.WorkflowInvoker> for the following:</span></span>  
  
- <span data-ttu-id="064b8-126">K synchronnímu vyvolání pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="064b8-126">To synchronously invoke a workflow.</span></span>  
  
- <span data-ttu-id="064b8-127">Zadání vstupu do nebo načtení výstupu z pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="064b8-127">To provide input to, or retrieve output from a workflow.</span></span>  
  
- <span data-ttu-id="064b8-128">Pro přidání rozšíření, která budou používána aktivitami.</span><span class="sxs-lookup"><span data-stu-id="064b8-128">To add extensions to be used by activities.</span></span>  
  
 <span data-ttu-id="064b8-129"><xref:System.Activities.ActivityInstance>je proxy server bezpečný pro přístup z více vláken, který můžou hostitelé použít k interakci s modulem runtime.</span><span class="sxs-lookup"><span data-stu-id="064b8-129"><xref:System.Activities.ActivityInstance> is the thread-safe proxy that hosts can use to interact with the runtime.</span></span> <span data-ttu-id="064b8-130">Hostitel používá <xref:System.Activities.ActivityInstance> pro následující:</span><span class="sxs-lookup"><span data-stu-id="064b8-130">The host uses <xref:System.Activities.ActivityInstance> for the following:</span></span>  
  
- <span data-ttu-id="064b8-131">Pro získání instance jejich vytvořením nebo načtením z úložiště instance.</span><span class="sxs-lookup"><span data-stu-id="064b8-131">To acquire an instance by creating it or loading it from an instance store.</span></span>  
  
- <span data-ttu-id="064b8-132">Oznámení o událostech životního cyklu instance.</span><span class="sxs-lookup"><span data-stu-id="064b8-132">To be notified of instance life-cycle events.</span></span>  
  
- <span data-ttu-id="064b8-133">Pro řízení provádění pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="064b8-133">To control workflow execution.</span></span>  
  
- <span data-ttu-id="064b8-134">Zadání vstupu do nebo načtení výstupu z pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="064b8-134">To provide input to, or retrieve output from a workflow.</span></span>  
  
- <span data-ttu-id="064b8-135">K signalizaci pokračování workflowu a předání hodnot do pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="064b8-135">To signal a workflow continuation and pass values into the workflow.</span></span>  
  
- <span data-ttu-id="064b8-136">Pro zachování dat pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="064b8-136">To persist workflow data.</span></span>  
  
- <span data-ttu-id="064b8-137">Pro přidání rozšíření, která budou používána aktivitami.</span><span class="sxs-lookup"><span data-stu-id="064b8-137">To add extensions to be used by activities.</span></span>  
  
 <span data-ttu-id="064b8-138">Aktivity získávají přístup k běhovému prostředí pracovního postupu pomocí příslušné <xref:System.Activities.ActivityContext> odvozené třídy, jako je například <xref:System.Activities.NativeActivityContext> nebo <xref:System.Activities.CodeActivityContext> .</span><span class="sxs-lookup"><span data-stu-id="064b8-138">Activities gain access to the workflow runtime environment by using the appropriate <xref:System.Activities.ActivityContext> derived class, such as <xref:System.Activities.NativeActivityContext> or <xref:System.Activities.CodeActivityContext>.</span></span> <span data-ttu-id="064b8-139">Používají se k překladu argumentů a proměnných, k plánování podřízených aktivit a k mnoha dalším účelům.</span><span class="sxs-lookup"><span data-stu-id="064b8-139">They use this for resolving arguments and variables, for scheduling child activities, and for many other purposes.</span></span>  
  
## <a name="services"></a><span data-ttu-id="064b8-140">Služby</span><span class="sxs-lookup"><span data-stu-id="064b8-140">Services</span></span>  
 <span data-ttu-id="064b8-141">Pracovní postupy představují přirozený způsob, jak implementovat a přistupovat k volně vázaným službám, a to pomocí aktivit zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="064b8-141">Workflows provide a natural way to implement and access loosely-coupled services, using messaging activities.</span></span> <span data-ttu-id="064b8-142">Aktivity zasílání zpráv jsou postaveny na WCF a jsou primárním mechanismem, který slouží k získávání dat do a z pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="064b8-142">Messaging activities are built on WCF and are the primary mechanism used to get data into and out of a workflow.</span></span> <span data-ttu-id="064b8-143">Můžete vytvářet aktivity zasílání zpráv dohromady a modelovat jakýkoli druh způsobu výměny zpráv, který chcete.</span><span class="sxs-lookup"><span data-stu-id="064b8-143">You can compose messaging activities together to model any kind of message exchange pattern you wish.</span></span> <span data-ttu-id="064b8-144">Další informace najdete v tématu [aktivity zasílání zpráv](../wcf/feature-details/messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="064b8-144">For more information, see [Messaging Activities](../wcf/feature-details/messaging-activities.md).</span></span> <span data-ttu-id="064b8-145">Služby pracovních postupů jsou hostovány pomocí <xref:System.ServiceModel.Activities.WorkflowServiceHost> třídy.</span><span class="sxs-lookup"><span data-stu-id="064b8-145">Workflow services are hosted using the <xref:System.ServiceModel.Activities.WorkflowServiceHost> class.</span></span> <span data-ttu-id="064b8-146">Další informace najdete v tématu věnovaném [hostování služby pracovního postupu](../wcf/feature-details/hosting-workflow-services-overview.md).</span><span class="sxs-lookup"><span data-stu-id="064b8-146">For more information, see [Hosting Workflow Services Overview](../wcf/feature-details/hosting-workflow-services-overview.md).</span></span> <span data-ttu-id="064b8-147">Další informace o službách pracovních postupů najdete v tématu [služby pracovních postupů](../wcf/feature-details/workflow-services.md) .</span><span class="sxs-lookup"><span data-stu-id="064b8-147">For more information about workflow services see [Workflow Services](../wcf/feature-details/workflow-services.md)</span></span>  
  
## <a name="persistence-unloading-and-long-running-workflows"></a><span data-ttu-id="064b8-148">Trvalá, uvolňování a dlouhotrvající pracovní postupy</span><span class="sxs-lookup"><span data-stu-id="064b8-148">Persistence, Unloading, and Long-Running Workflows</span></span>  
 <span data-ttu-id="064b8-149">Pracovní postup Windows zjednodušuje vytváření dlouhodobě spuštěných reaktivních programů tím, že poskytuje:</span><span class="sxs-lookup"><span data-stu-id="064b8-149">Windows Workflow simplifies the authoring of long-running reactive programs by providing:</span></span>  
  
- <span data-ttu-id="064b8-150">Aktivity, které přistupují k externímu vstupu.</span><span class="sxs-lookup"><span data-stu-id="064b8-150">Activities that access external input.</span></span>  
  
- <span data-ttu-id="064b8-151">Možnost vytvářet <xref:System.Activities.Bookmark> objekty, které mohou být obnoveny pomocí naslouchacího procesu hostitele.</span><span class="sxs-lookup"><span data-stu-id="064b8-151">The ability to create <xref:System.Activities.Bookmark> objects that can be resumed by a host listener.</span></span>  
  
- <span data-ttu-id="064b8-152">Možnost zachovat data pracovního postupu a uvolnit pracovní postup a pak znovu načíst a znovu aktivovat pracovní postup v reakci na obnovení <xref:System.Activities.Bookmark> objektů v konkrétním pracovním postupu.</span><span class="sxs-lookup"><span data-stu-id="064b8-152">The ability to persist a workflow’s data and unload the workflow, and then reload and reactivate the workflow in response to the resumption of <xref:System.Activities.Bookmark> objects in a particular workflow.</span></span>  
  
 <span data-ttu-id="064b8-153">Pracovní postup nepřetržitě spouští aktivity, dokud neexistují žádné další aktivity ke spuštění nebo dokud všechny aktuálně prováděné aktivity nečekají na vstup.</span><span class="sxs-lookup"><span data-stu-id="064b8-153">A workflow continuously executes activities until there are no more activities to execute or until all currently executing activities are waiting for input.</span></span> <span data-ttu-id="064b8-154">V tomto druhém stavu je pracovní postup nečinný.</span><span class="sxs-lookup"><span data-stu-id="064b8-154">In this latter state, the workflow is idle.</span></span> <span data-ttu-id="064b8-155">Je běžné, že hostitel odvolá pracovní postupy, které prošly nečinné, a znovu je načte, aby bylo možné pokračovat v provádění při doručení zprávy.</span><span class="sxs-lookup"><span data-stu-id="064b8-155">It is common for a host to unload workflows that have gone idle and to reload them to continue execution when a message arrives.</span></span> <span data-ttu-id="064b8-156"><xref:System.ServiceModel.Activities.WorkflowServiceHost>poskytuje funkce pro tuto funkci a poskytuje rozšiřitelnou zásadu uvolnění.</span><span class="sxs-lookup"><span data-stu-id="064b8-156"><xref:System.ServiceModel.Activities.WorkflowServiceHost> provides functionality for this feature and provides an extensible unload policy.</span></span> <span data-ttu-id="064b8-157">Pro bloky spuštění, které používají nestálý stavová data nebo jiná data, která nelze zachovat, může aktivita indikovat hostiteli, že by neměl být trvale uložen pomocí <xref:System.Activities.NoPersistHandle> .</span><span class="sxs-lookup"><span data-stu-id="064b8-157">For blocks of execution that use volatile state data or other data that cannot be persisted, an activity can indicate to a host that it should not be persisted by using the <xref:System.Activities.NoPersistHandle>.</span></span> <span data-ttu-id="064b8-158">Pracovní postup může také explicitně uchovávat data na trvalém paměťovém médiu pomocí <xref:System.Activities.Statements.Persist> aktivity.</span><span class="sxs-lookup"><span data-stu-id="064b8-158">A workflow can also explicitly persist its data to a durable storage medium by using the <xref:System.Activities.Statements.Persist> activity.</span></span>
