---
title: Trvalost pracovního postupu
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], persistence
ms.assetid: 39e69d1f-b771-4c16-9e18-696fa43b65b2
ms.openlocfilehash: c49e287c6132103d4bb85a8ae892a76f9b582274
ms.sourcegitcommit: a4f9b754059f0210e29ae0578363a27b9ba84b64
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/05/2019
ms.locfileid: "74837529"
---
# <a name="workflow-persistence"></a><span data-ttu-id="b24ba-102">Trvalost pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="b24ba-102">Workflow Persistence</span></span>
<span data-ttu-id="b24ba-103">Trvalost pracovního postupu je trvalé zachycení stavu instance pracovního postupu, nezávisle na informacích o procesu nebo počítači.</span><span class="sxs-lookup"><span data-stu-id="b24ba-103">Workflow persistence is the durable capture of a workflow instance's state, independent of process or computer information.</span></span> <span data-ttu-id="b24ba-104">K tomu je potřeba zajistit dobře známý bod obnovení instance pracovního postupu v případě selhání systému nebo zachovat paměť uvolněním instancí pracovních postupů, které aktivně nepracují, nebo přesunutím stavu instance pracovního postupu z jednoho uzlu do druhého. uzel v serverové farmě.</span><span class="sxs-lookup"><span data-stu-id="b24ba-104">This is done to provide a well-known point of recovery for the workflow instance in the event of system failure, or to preserve memory by unloading workflow instances that are not actively doing work, or to move the state of the workflow instance from one node to another node in a server farm.</span></span>  
  
 <span data-ttu-id="b24ba-105">Trvalost umožňuje zpracovat flexibilitu, škálovatelnost, obnovení při selhání a možnost efektivněji spravovat paměť.</span><span class="sxs-lookup"><span data-stu-id="b24ba-105">Persistence enables process agility, scalability, recovery in the face of failure, and the ability to manage memory more efficiently.</span></span> <span data-ttu-id="b24ba-106">Proces trvalosti zahrnuje identifikaci trvalého bodu, shromažďování dat, která mají být uložena, a nakonec delegace skutečného úložiště dat k poskytovateli trvalosti.</span><span class="sxs-lookup"><span data-stu-id="b24ba-106">The persistence process includes the identification of a persistence point, the gathering of the data to be saved, and finally the delegation of the actual storage of the data to a persistence provider.</span></span>  
  
 <span data-ttu-id="b24ba-107">Chcete-li povolit trvalost pro pracovní postup, je třeba přidružit úložiště instancí k aplikaci **WorkflowApplication** nebo **WorkflowServiceHost** , jak je uvedeno v tématu [Postupy: povolení trvalosti pro pracovní postupy a služby pracovních postupů](how-to-enable-persistence-for-workflows-and-workflow-services.md).</span><span class="sxs-lookup"><span data-stu-id="b24ba-107">To enable persistence for a workflow, you need to associate an instance store with the **WorkflowApplication** or **WorkflowServiceHost** as mentioned in [How to: Enable Persistence for Workflows and Workflow Services](how-to-enable-persistence-for-workflows-and-workflow-services.md).</span></span> <span data-ttu-id="b24ba-108">Aplikace **WorkflowApplication** a **WorkflowServiceHost** používají úložiště instancí, které jsou k nim přidružené, aby bylo možné replikovat instance pracovních postupů do úložiště trvalosti a načítat instance pracovního postupu do paměti na základě dat instance pracovního postupu, která jsou uložená v úložišti trvalosti.</span><span class="sxs-lookup"><span data-stu-id="b24ba-108">The **WorkflowApplication** and **WorkflowServiceHost** use the instance store associated with them to enable persisting workflow instances into a persistence store and loading workflow instances into memory based on the workflow instance data stored in the persistence store.</span></span>  
  
 <span data-ttu-id="b24ba-109">[!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] dodává se třídou **SqlWorkflowInstanceStore** , která umožňuje Trvalost dat a metadat o instancích pracovního postupu do databáze SQL Server 2005 nebo SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="b24ba-109">The [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ships with the **SqlWorkflowInstanceStore** class, which allows persistence of data and metadata about workflow instances into a SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="b24ba-110">Další podrobnosti najdete v tématu [úložiště instancí pracovních postupů SQL](sql-workflow-instance-store.md) .</span><span class="sxs-lookup"><span data-stu-id="b24ba-110">See [SQL Workflow Instance Store](sql-workflow-instance-store.md) for more details.</span></span>  
  
 <span data-ttu-id="b24ba-111">Chcete-li uložit a načíst data specifická pro aplikaci spolu s informacemi souvisejícími s instancí pracovního postupu, můžete vytvořit účastníky trvalého chování, které rozšiřuje třídu <xref:System.Activities.Persistence.PersistenceParticipant>.</span><span class="sxs-lookup"><span data-stu-id="b24ba-111">To store and load your application-specific data along with the workflow instance-related information, you can create persistence participants that extend the <xref:System.Activities.Persistence.PersistenceParticipant> class.</span></span> <span data-ttu-id="b24ba-112">Účastník trvalosti se účastní procesu trvalosti, aby ušetřil vlastní serializovatelný data do úložiště Persistence, načetla data z úložiště instance do paměti a prováděla další logiku v rámci transakce trvalosti.</span><span class="sxs-lookup"><span data-stu-id="b24ba-112">A persistence participant participates in the persistence process to save custom serializable data into the persistence store, to load the data from the instance store into memory, and to perform any additional logic under a persistence transaction.</span></span> <span data-ttu-id="b24ba-113">Další informace najdete v tématu [trvalé účastníky](persistence-participants.md).</span><span class="sxs-lookup"><span data-stu-id="b24ba-113">For more information, see [Persistence Participants](persistence-participants.md).</span></span>  
  
 <span data-ttu-id="b24ba-114">Windows Server App Fabric zjednodušuje proces konfigurace trvalosti.</span><span class="sxs-lookup"><span data-stu-id="b24ba-114">Windows Server App Fabric simplifies the process of configuring persistence.</span></span> <span data-ttu-id="b24ba-115">Další informace najdete v tématu [Koncepty trvalosti s Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677272(v=azure.10)) .</span><span class="sxs-lookup"><span data-stu-id="b24ba-115">For more information, see [Persistence Concepts with Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677272(v=azure.10))</span></span>  
  
## <a name="implicit-persistence-points"></a><span data-ttu-id="b24ba-116">Implicitní trvalé body trvalosti</span><span class="sxs-lookup"><span data-stu-id="b24ba-116">Implicit Persistence Points</span></span>  
 <span data-ttu-id="b24ba-117">Následující seznam obsahuje příklady podmínek, při kterých je pracovní postup trvale uložený v případě, že je k pracovnímu postupu přidruženo úložiště instancí.</span><span class="sxs-lookup"><span data-stu-id="b24ba-117">The following list contains examples of the conditions upon which a workflow is persisted when an instance store is associated with a workflow.</span></span>  
  
- <span data-ttu-id="b24ba-118">Po dokončení aktivity **TransactionScope** nebo dokončení aktivity **TransactedReceiveScope** .</span><span class="sxs-lookup"><span data-stu-id="b24ba-118">When a **TransactionScope** activity completes or a **TransactedReceiveScope** activity completes.</span></span>  
  
- <span data-ttu-id="b24ba-119">Když instance pracovního postupu vznikne nečinný a v hostiteli pracovního postupu je nastavená možnost **WorkflowIdleBehavior** .</span><span class="sxs-lookup"><span data-stu-id="b24ba-119">When a workflow instance becomes idle and the **WorkflowIdleBehavior** is set on workflow host.</span></span> <span data-ttu-id="b24ba-120">K tomu dochází například při použití aktivity zasílání zpráv nebo aktivity **zpoždění** .</span><span class="sxs-lookup"><span data-stu-id="b24ba-120">This occurs, for example, when you use messaging activities or a **Delay** activity.</span></span>  
  
- <span data-ttu-id="b24ba-121">Když je aplikace WorkflowApplication v nečinnosti a vlastnost **PersistableIdle** aplikace je nastavena na **PersistableIdleAction. trvalá**.</span><span class="sxs-lookup"><span data-stu-id="b24ba-121">When a WorkflowApplication becomes idle and the **PersistableIdle** property of the application is set to **PersistableIdleAction.Persist**.</span></span>  
  
- <span data-ttu-id="b24ba-122">Pokud je hostitelská aplikace pokyn k uchování nebo uvolnění instance pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="b24ba-122">When a host application is instructed to persist or unload a workflow instance.</span></span>  
  
- <span data-ttu-id="b24ba-123">Když se instance pracovního postupu ukončí nebo dokončí.</span><span class="sxs-lookup"><span data-stu-id="b24ba-123">When a workflow instance is terminated or finishes.</span></span>  
  
- <span data-ttu-id="b24ba-124">Když se spustí **trvalá** aktivita.</span><span class="sxs-lookup"><span data-stu-id="b24ba-124">When a **Persist** activity executes.</span></span>  
  
- <span data-ttu-id="b24ba-125">Když instance pracovního postupu vyvinutá v předchozí verzi programovací model Windows Workflow Foundation narazí na bod trvalosti během vzájemně ovladatelného provádění.</span><span class="sxs-lookup"><span data-stu-id="b24ba-125">When an instance of a workflow developed using a previous version of Windows Workflow Foundation encounters a persistence point during interoperable execution.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="b24ba-126">V tomto oddílu</span><span class="sxs-lookup"><span data-stu-id="b24ba-126">In This Section</span></span>  
  
- [<span data-ttu-id="b24ba-127">Úložiště instancí pracovních postupů SQL</span><span class="sxs-lookup"><span data-stu-id="b24ba-127">SQL Workflow Instance Store</span></span>](sql-workflow-instance-store.md)  
  
- [<span data-ttu-id="b24ba-128">Úložiště instancí</span><span class="sxs-lookup"><span data-stu-id="b24ba-128">Instance Stores</span></span>](instance-stores.md)  
  
- [<span data-ttu-id="b24ba-129">Účastníci trvalosti</span><span class="sxs-lookup"><span data-stu-id="b24ba-129">Persistence Participants</span></span>](persistence-participants.md)  
  
- [<span data-ttu-id="b24ba-130">Osvědčené postupy pro trvalost</span><span class="sxs-lookup"><span data-stu-id="b24ba-130">Persistence Best Practices</span></span>](persistence-best-practices.md)  
  
- [<span data-ttu-id="b24ba-131">Netrvalé instance pracovních postupů</span><span class="sxs-lookup"><span data-stu-id="b24ba-131">Non-Persisted Workflow Instances</span></span>](non-persisted-workflow-instances.md)  
  
- [<span data-ttu-id="b24ba-132">Pozastavení a obnovení pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="b24ba-132">Pausing and Resuming a Workflow</span></span>](pausing-and-resuming-a-workflow.md)
