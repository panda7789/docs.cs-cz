---
title: Kontrola stromu aktivit
ms.date: 03/30/2017
ms.assetid: 100d00e4-8c1d-4233-8fbb-dd443a01155d
ms.openlocfilehash: 692f36d993c3f9c27839122b388a24d0698a2b59
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/12/2020
ms.locfileid: "79183041"
---
# <a name="activity-tree-inspection"></a><span data-ttu-id="131ba-102">Kontrola stromu aktivit</span><span class="sxs-lookup"><span data-stu-id="131ba-102">Activity Tree Inspection</span></span>
<span data-ttu-id="131ba-103">Kontrola stromu aktivit je používána autory aplikací pracovního postupu ke kontrole pracovních postupů hostovaných aplikací.</span><span class="sxs-lookup"><span data-stu-id="131ba-103">Activity tree inspection is used by workflow application authors to inspect the workflows hosted by the application.</span></span> <span data-ttu-id="131ba-104">Pomocí <xref:System.Activities.WorkflowInspectionServices>, pracovní postupy lze vyhledávat pro konkrétní podřízené aktivity, jednotlivé aktivity a jejich vlastnosti mohou být výčtu a runtime metadata aktivit y mohou být uloženy do mezipaměti v určitém čase.</span><span class="sxs-lookup"><span data-stu-id="131ba-104">By using <xref:System.Activities.WorkflowInspectionServices>, workflows can be searched for specific child activities, individual activities and their properties can be enumerated, and runtime metadata of the activities can be cached at a specific time.</span></span> <span data-ttu-id="131ba-105">Toto téma obsahuje <xref:System.Activities.WorkflowInspectionServices> přehled a jak jej použít ke kontrole stromu aktivit.</span><span class="sxs-lookup"><span data-stu-id="131ba-105">This topic provides an overview of <xref:System.Activities.WorkflowInspectionServices> and how to use it to inspect an activity tree.</span></span>  
  
## <a name="using-workflowinspectionservices"></a><span data-ttu-id="131ba-106">Použití služby WorkflowInspectionServices</span><span class="sxs-lookup"><span data-stu-id="131ba-106">Using WorkflowInspectionServices</span></span>  
 <span data-ttu-id="131ba-107">Metoda <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> se používá k výčetu všech aktivit ve stromu zadané aktivity.</span><span class="sxs-lookup"><span data-stu-id="131ba-107">The <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> method is used to enumerate all of the activities in the specified activity tree.</span></span> <span data-ttu-id="131ba-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>vrátí výčtový počet, který se dotýká všech aktivit ve stromu, včetně podřízených rutin, obslužných rutin delegáta, výchozích proměnných a výrazů argumentů.</span><span class="sxs-lookup"><span data-stu-id="131ba-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> returns an enumerable that touches all activities within the tree including children, delegate handlers, variable defaults, and argument expressions.</span></span> <span data-ttu-id="131ba-109">V následujícím příkladu je definice pracovního <xref:System.Activities.Statements.Sequence> <xref:System.Activities.Statements.While>postupu <xref:System.Activities.Statements.ForEach%601> <xref:System.Activities.Statements.WriteLine>vytvořena pomocí výrazů , , , a výrazů.</span><span class="sxs-lookup"><span data-stu-id="131ba-109">In the following example, a workflow definition is created by using a <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.While>, <xref:System.Activities.Statements.ForEach%601>, <xref:System.Activities.Statements.WriteLine>, and expressions.</span></span> <span data-ttu-id="131ba-110">Po vytvoření definice pracovního postupu je vyvolána a `InspectActivity` pak je volána metoda.</span><span class="sxs-lookup"><span data-stu-id="131ba-110">After the workflow definition is created, it is invoked and then the `InspectActivity` method is called.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#45](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#45)]  
  
 <span data-ttu-id="131ba-111">Chcete-li výčet aktivity, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> je volána na kořenové aktivity a znovu rekurzivně na každou vrácenou aktivitu.</span><span class="sxs-lookup"><span data-stu-id="131ba-111">To enumerate the activities, the <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is called on the root activity, and again recursively on each returned activity.</span></span> <span data-ttu-id="131ba-112">V následujícím příkladu <xref:System.Activities.Activity.DisplayName%2A> je každá aktivita a výraz ve stromu aktivit zapsán do konzoly.</span><span class="sxs-lookup"><span data-stu-id="131ba-112">In the following example, the <xref:System.Activities.Activity.DisplayName%2A> of each activity and expression in the activity tree is written to the console.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#46](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#46)]  
  
 <span data-ttu-id="131ba-113">Tento ukázkový kód poskytuje následující výstup.</span><span class="sxs-lookup"><span data-stu-id="131ba-113">This sample code provides the following output.</span></span>  
  
 <span data-ttu-id="131ba-114">**Položka seznamu 1**</span><span class="sxs-lookup"><span data-stu-id="131ba-114">**List Item 1**</span></span>  
<span data-ttu-id="131ba-115">**Seznam položka 2**
**Seznam Položka 3**
**Seznam Položka 4**
**Seznam Položka 5**
**Položky přidány do sbírky.** 
 **Řetězec** **<\<vsečnatých<>>sekvence**</span><span class="sxs-lookup"><span data-stu-id="131ba-115">**List Item 2**
**List Item 3**
**List Item 4**
**List Item 5**
**Items added to collection.**
**Sequence** **Literal<List\<String>>**</span></span>  
 <span data-ttu-id="131ba-116">**Zatímco**</span><span class="sxs-lookup"><span data-stu-id="131ba-116">**While**</span></span>  
 <span data-ttu-id="131ba-117">**Řetězec AddToCollection\<>**</span><span class="sxs-lookup"><span data-stu-id="131ba-117">**AddToCollection\<String>**</span></span>  
 <span data-ttu-id="131ba-118">**>>řetězec VariableValue<ICollection\<**</span><span class="sxs-lookup"><span data-stu-id="131ba-118">**VariableValue<ICollection\<String>>**</span></span>  
 <span data-ttu-id="131ba-119">**Řetězec LambdaValue\<>**</span><span class="sxs-lookup"><span data-stu-id="131ba-119">**LambdaValue\<String>**</span></span>  
 <span data-ttu-id="131ba-120">**Řetězec<seznamu\<LocationReferenceValue>>**</span><span class="sxs-lookup"><span data-stu-id="131ba-120">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="131ba-121">**LambdaValue\<logická>**</span><span class="sxs-lookup"><span data-stu-id="131ba-121">**LambdaValue\<Boolean>**</span></span>  
 <span data-ttu-id="131ba-122">**Řetězec<seznamu\<LocationReferenceValue>>**</span><span class="sxs-lookup"><span data-stu-id="131ba-122">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="131ba-123">**Pro\<každý řetězec>**</span><span class="sxs-lookup"><span data-stu-id="131ba-123">**ForEach\<String>**</span></span>  
 <span data-ttu-id="131ba-124">**>>řetězce IEnumerable Řetězce proměnné<hodnoty ienumerable\<**</span><span class="sxs-lookup"><span data-stu-id="131ba-124">**VariableValue<IEnumerable\<String>>**</span></span>  
 <span data-ttu-id="131ba-125">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="131ba-125">**WriteLine**</span></span>  
 <span data-ttu-id="131ba-126">**>řetězec\<Delegačního argumentu**</span><span class="sxs-lookup"><span data-stu-id="131ba-126">**DelegateArgumentValue\<String>**</span></span>  
 <span data-ttu-id="131ba-127">**Sequence**</span><span class="sxs-lookup"><span data-stu-id="131ba-127">**Sequence**</span></span>  
 <span data-ttu-id="131ba-128">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="131ba-128">**WriteLine**</span></span>  
 <span data-ttu-id="131ba-129">**Literál\<Řetězec>** Chcete-li načíst konkrétní aktivitu namísto výčtu všech aktivit, <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> se používá.</span><span class="sxs-lookup"><span data-stu-id="131ba-129">**Literal\<String>**  To retrieve a specific activity instead of enumerating all of the activities, <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> is used.</span></span> <span data-ttu-id="131ba-130">Oba <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> a provádět ukládání metadat `WorkflowInspectionServices.CacheMetadata` do mezipaměti, pokud nebyla dříve volána.</span><span class="sxs-lookup"><span data-stu-id="131ba-130">Both <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> and <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> perform metadata caching if `WorkflowInspectionServices.CacheMetadata` has not been previously called.</span></span> <span data-ttu-id="131ba-131">Pokud <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> byla volána pak <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> je založena na existující metadata.</span><span class="sxs-lookup"><span data-stu-id="131ba-131">If <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> has been called then <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is based on the existing metadata.</span></span> <span data-ttu-id="131ba-132">Proto pokud byly provedeny změny stromu <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>od <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> posledního volání do , může poskytnout neočekávané výsledky.</span><span class="sxs-lookup"><span data-stu-id="131ba-132">Therefore, if tree changes have been made since the last call to <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> might give unexpected results.</span></span> <span data-ttu-id="131ba-133">Pokud byly provedeny změny v <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>pracovním postupu po volání , metadata <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> lze znovu ukládat do mezipaměti voláním metody.</span><span class="sxs-lookup"><span data-stu-id="131ba-133">If changes have been made to the workflow after calling <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>, metadata can be re-cached by calling the <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> method.</span></span> <span data-ttu-id="131ba-134">Ukládání metadat do mezipaměti je popsáno v další části.</span><span class="sxs-lookup"><span data-stu-id="131ba-134">Caching metadata is discussed in the next section.</span></span>  
  
### <a name="caching-metadata"></a><span data-ttu-id="131ba-135">Metadata ukládání do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="131ba-135">Caching Metadata</span></span>  
 <span data-ttu-id="131ba-136">Ukládání metadat do mezipaměti pro aktivitu vytvoří a ověří popis argumentů, proměnných, podřízených aktivit a delegátů aktivity.</span><span class="sxs-lookup"><span data-stu-id="131ba-136">Caching the metadata for an activity builds and validates a description of the activity’s arguments, variables, child activities, and activity delegates.</span></span> <span data-ttu-id="131ba-137">Metadata jsou ve výchozím nastavení ukládána do mezipaměti modulu runtime, když je aktivita připravena k provedení.</span><span class="sxs-lookup"><span data-stu-id="131ba-137">Metadata, by default, is cached by the runtime when an activity is prepared for execution.</span></span> <span data-ttu-id="131ba-138">Pokud autor hostitele pracovního postupu chce ukládat metadata pro aktivitu nebo strom aktivity před <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> tímto, například vzít všechny náklady předem, pak lze použít k ukládání metadat do mezipaměti v požadovaném čase.</span><span class="sxs-lookup"><span data-stu-id="131ba-138">If a workflow host author wants to cache the metadata for an activity or activity tree before this, for example to take all of the cost upfront, then <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> can be used to cache the metadata at the desired time.</span></span>
