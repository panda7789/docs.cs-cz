---
title: Aktivita stromu kontroly
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 100d00e4-8c1d-4233-8fbb-dd443a01155d
caps.latest.revision: "10"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: efb7f8f1603de67f21aee7e1746670e324d5e238
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="activity-tree-inspection"></a><span data-ttu-id="4163f-102">Aktivita stromu kontroly</span><span class="sxs-lookup"><span data-stu-id="4163f-102">Activity Tree Inspection</span></span>
<span data-ttu-id="4163f-103">Kontroly stromu aktivity se používá aplikace autory pracovního postupu ke kontrole pracovních hostovaných aplikací.</span><span class="sxs-lookup"><span data-stu-id="4163f-103">Activity tree inspection is used by workflow application authors to inspect the workflows hosted by the application.</span></span> <span data-ttu-id="4163f-104">Pomocí <xref:System.Activities.WorkflowInspectionServices>, pracovní postupy můžete vyhledávat konkrétní podřízené aktivity, jednotlivé aktivity a jejich vlastnosti můžete provést výčet a do mezipaměti metadat runtime aktivit v určitém čase.</span><span class="sxs-lookup"><span data-stu-id="4163f-104">By using <xref:System.Activities.WorkflowInspectionServices>, workflows can be searched for specific child activities, individual activities and their properties can be enumerated, and runtime metadata of the activities can be cached at a specific time.</span></span> <span data-ttu-id="4163f-105">Toto téma obsahuje přehled <xref:System.Activities.WorkflowInspectionServices> a způsobu jeho použití kontrola strom aktivity.</span><span class="sxs-lookup"><span data-stu-id="4163f-105">This topic provides an overview of <xref:System.Activities.WorkflowInspectionServices> and how to use it to inspect an activity tree.</span></span>  
  
## <a name="using-workflowinspectionservices"></a><span data-ttu-id="4163f-106">Pomocí WorkflowInspectionServices</span><span class="sxs-lookup"><span data-stu-id="4163f-106">Using WorkflowInspectionServices</span></span>  
 <span data-ttu-id="4163f-107"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> Metoda se používá k výčet všech aktivit ve stromové struktuře zadaný aktivity.</span><span class="sxs-lookup"><span data-stu-id="4163f-107">The <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> method is used to enumerate all of the activities in the specified activity tree.</span></span> <span data-ttu-id="4163f-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>Vrátí vyčíslitelnou dotýká všechny aktivity v rámci stromu včetně podřízených prvků, obslužné rutiny delegáta, proměnné výchozí hodnoty a argument výrazy.</span><span class="sxs-lookup"><span data-stu-id="4163f-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> returns an enumerable that touches all activities within the tree including children, delegate handlers, variable defaults, and argument expressions.</span></span> <span data-ttu-id="4163f-109">V následujícím příkladu se vytváří definice pracovního postupu pomocí <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.While>, <xref:System.Activities.Statements.ForEach%601>, <xref:System.Activities.Statements.WriteLine>a výrazy.</span><span class="sxs-lookup"><span data-stu-id="4163f-109">In the following example, a workflow definition is created by using a <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.While>, <xref:System.Activities.Statements.ForEach%601>, <xref:System.Activities.Statements.WriteLine>, and expressions.</span></span> <span data-ttu-id="4163f-110">Po vytvoření definice pracovního postupu je volána a potom `InspectActivity` metoda je volána.</span><span class="sxs-lookup"><span data-stu-id="4163f-110">After the workflow definition is created, it is invoked and then the `InspectActivity` method is called.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#45](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#45)]  
  
 <span data-ttu-id="4163f-111">Výčet aktivit, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> je volána v kořenové aktivity a znovu rekurzivně na každý vrácený aktivity.</span><span class="sxs-lookup"><span data-stu-id="4163f-111">To enumerate the activities, the <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is called on the root activity, and again recursively on each returned activity.</span></span> <span data-ttu-id="4163f-112">V následujícím příkladu <xref:System.Activities.Activity.DisplayName%2A> každou aktivitu a výrazu v rámci aktivity stromu je zapsán do konzoly.</span><span class="sxs-lookup"><span data-stu-id="4163f-112">In the following example, the <xref:System.Activities.Activity.DisplayName%2A> of each activity and expression in the activity tree is written to the console.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#46](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#46)]  
  
 <span data-ttu-id="4163f-113">Tento ukázkový kód poskytuje následující výstup.</span><span class="sxs-lookup"><span data-stu-id="4163f-113">This sample code provides the following output.</span></span>  
  
 <span data-ttu-id="4163f-114">**Položky seznamu 1**</span><span class="sxs-lookup"><span data-stu-id="4163f-114">**List Item 1**</span></span>  
<span data-ttu-id="4163f-115">**Položky seznamu 2** </span><span class="sxs-lookup"><span data-stu-id="4163f-115">**List Item 2** </span></span>  
<span data-ttu-id="4163f-116">**Položky seznamu 3** </span><span class="sxs-lookup"><span data-stu-id="4163f-116">**List Item 3** </span></span>  
<span data-ttu-id="4163f-117">**Položky seznamu 4** </span><span class="sxs-lookup"><span data-stu-id="4163f-117">**List Item 4** </span></span>  
<span data-ttu-id="4163f-118">**Položky seznamu 5** </span><span class="sxs-lookup"><span data-stu-id="4163f-118">**List Item 5** </span></span>  
<span data-ttu-id="4163f-119">**Přidat do kolekce položky.** </span><span class="sxs-lookup"><span data-stu-id="4163f-119">**Items added to collection.** </span></span>  
<span data-ttu-id="4163f-120">**Pořadí** </span><span class="sxs-lookup"><span data-stu-id="4163f-120">**Sequence** </span></span>  
 <span data-ttu-id="4163f-121">**Literál < seznamu\<řetězec >>**</span><span class="sxs-lookup"><span data-stu-id="4163f-121">**Literal<List\<String>>**</span></span>  
 <span data-ttu-id="4163f-122">**Chvíli**</span><span class="sxs-lookup"><span data-stu-id="4163f-122">**While**</span></span>  
 <span data-ttu-id="4163f-123">**AddToCollection\<řetězec >**</span><span class="sxs-lookup"><span data-stu-id="4163f-123">**AddToCollection\<String>**</span></span>  
 <span data-ttu-id="4163f-124">**VariableValue < ICollection\<řetězec >>**</span><span class="sxs-lookup"><span data-stu-id="4163f-124">**VariableValue<ICollection\<String>>**</span></span>  
 <span data-ttu-id="4163f-125">**LambdaValue\<řetězec >**</span><span class="sxs-lookup"><span data-stu-id="4163f-125">**LambdaValue\<String>**</span></span>  
 <span data-ttu-id="4163f-126">**LocationReferenceValue < seznamu\<řetězec >>**</span><span class="sxs-lookup"><span data-stu-id="4163f-126">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="4163f-127">**LambdaValue\<logická hodnota >**</span><span class="sxs-lookup"><span data-stu-id="4163f-127">**LambdaValue\<Boolean>**</span></span>  
 <span data-ttu-id="4163f-128">**LocationReferenceValue < seznamu\<řetězec >>**</span><span class="sxs-lookup"><span data-stu-id="4163f-128">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="4163f-129">**ForEach\<řetězec >**</span><span class="sxs-lookup"><span data-stu-id="4163f-129">**ForEach\<String>**</span></span>  
 <span data-ttu-id="4163f-130">**VariableValue < IEnumerable\<řetězec >>**</span><span class="sxs-lookup"><span data-stu-id="4163f-130">**VariableValue<IEnumerable\<String>>**</span></span>  
 <span data-ttu-id="4163f-131">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="4163f-131">**WriteLine**</span></span>  
 <span data-ttu-id="4163f-132">**DelegateArgumentValue\<řetězec >**</span><span class="sxs-lookup"><span data-stu-id="4163f-132">**DelegateArgumentValue\<String>**</span></span>  
 <span data-ttu-id="4163f-133">**Pořadí**</span><span class="sxs-lookup"><span data-stu-id="4163f-133">**Sequence**</span></span>  
 <span data-ttu-id="4163f-134">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="4163f-134">**WriteLine**</span></span>  
 <span data-ttu-id="4163f-135">**Literál\<řetězec >** načíst konkrétní aktivitu místo vytváření výčtů pro všechny aktivity, <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> se používá.</span><span class="sxs-lookup"><span data-stu-id="4163f-135">**Literal\<String>**  To retrieve a specific activity instead of enumerating all of the activities, <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> is used.</span></span> <span data-ttu-id="4163f-136">Obě <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> a <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> provést ukládání do mezipaměti metadat, pokud `WorkflowInspectionServices.CacheMetadata` nebyla volána dříve.</span><span class="sxs-lookup"><span data-stu-id="4163f-136">Both <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> and <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> perform metadata caching if `WorkflowInspectionServices.CacheMetadata` has not been previously called.</span></span> <span data-ttu-id="4163f-137">Pokud <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> byla volána poté <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> je založena na existující metadata.</span><span class="sxs-lookup"><span data-stu-id="4163f-137">If <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> has been called then <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is based on the existing metadata.</span></span> <span data-ttu-id="4163f-138">Proto pokud byly provedeny změny stromu od posledního volání <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> může vrátit neočekávané výsledky.</span><span class="sxs-lookup"><span data-stu-id="4163f-138">Therefore, if tree changes have been made since the last call to <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> might give unexpected results.</span></span> <span data-ttu-id="4163f-139">Pokud byly provedeny změny do pracovního postupu po volání <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>, metadata znovu do mezipaměti voláním <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="4163f-139">If changes have been made to the workflow after calling <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>, metadata can be re-cached by calling the <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> method.</span></span> <span data-ttu-id="4163f-140">Ukládání do mezipaměti metadat je popsané v další části.</span><span class="sxs-lookup"><span data-stu-id="4163f-140">Caching metadata is discussed in the next section.</span></span>  
  
### <a name="caching-metadata"></a><span data-ttu-id="4163f-141">Ukládání do mezipaměti metadat</span><span class="sxs-lookup"><span data-stu-id="4163f-141">Caching Metadata</span></span>  
 <span data-ttu-id="4163f-142">Ukládání do mezipaměti metadat pro aktivitu sestavení a ověří popis aktivity argumenty, proměnné, podřízené aktivity a delegáti aktivity.</span><span class="sxs-lookup"><span data-stu-id="4163f-142">Caching the metadata for an activity builds and validates a description of the activity’s arguments, variables, child activities, and activity delegates.</span></span> <span data-ttu-id="4163f-143">Metadata, ve výchozím nastavení, se uloží do mezipaměti modulem runtime při aktivitu je připravený pro provedení.</span><span class="sxs-lookup"><span data-stu-id="4163f-143">Metadata, by default, is cached by the runtime when an activity is prepared for execution.</span></span> <span data-ttu-id="4163f-144">Pokud chce, aby se autora hostitele pracovního postupu pro ukládání do mezipaměti metadat pro aktivitu nebo stromu aktivity před tím, např. Chcete-li provést všechny náklady na předem, pak <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> lze použít pro ukládání do mezipaměti metadat v požadované době.</span><span class="sxs-lookup"><span data-stu-id="4163f-144">If a workflow host author wants to cache the metadata for an activity or activity tree before this, for example to take all of the cost upfront, then <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> can be used to cache the metadata at the desired time.</span></span>
