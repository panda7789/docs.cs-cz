---
title: Principy problémů a výjimek WebRequest
ms.date: 03/30/2017
ms.assetid: 74a361a5-e912-42d3-8f2e-8e9a96880a2b
ms.openlocfilehash: 172ad7508bdcac94cc278faab65a2e265b3c6a65
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/24/2020
ms.locfileid: "76743900"
---
# <a name="understanding-webrequest-problems-and-exceptions"></a>Principy problémů a výjimek WebRequest
<xref:System.Net.WebRequest> a jeho odvozené třídy (<xref:System.Net.HttpWebRequest>, <xref:System.Net.FtpWebRequest>a <xref:System.Net.FileWebRequest>) vyvolávají výjimku k signalizaci neobvyklé podmínky. Někdy není řešení těchto problémů zřejmé.  
  
## <a name="solutions"></a>Řešení  
 Chcete-li zjistit problém, zkontrolujte vlastnost <xref:System.Net.WebException.Status%2A> <xref:System.Net.WebException>. Následující tabulka ukazuje několik hodnot stavu a některá možná řešení.  
  
|Status|Podrobnosti|Řešení|  
|------------|-------------|--------------|  
|<xref:System.Net.WebExceptionStatus.SendFailure><br /><br /> -nebo-<br /><br /> <xref:System.Net.WebExceptionStatus.ReceiveFailure>|Došlo k potížím s podkladovým soketem. Mohlo dojít k resetování připojení.|Znovu se připojte a odešlete požadavek znovu.<br /><br /> Ujistěte se, že je nainstalovaná nejnovější aktualizace Service Pack.<br /><br /> Zvyšte hodnotu vlastnosti <xref:System.Net.ServicePointManager.MaxServicePointIdleTime%2A?displayProperty=nameWithType>.<br /><br /> Nastavte <xref:System.Net.HttpWebRequest.KeepAlive%2A?displayProperty=nameWithType> na `false`.<br /><br /> Zvyšte počet povolených připojení s vlastností <xref:System.Net.ServicePointManager.DefaultConnectionLimit%2A>.<br /><br /> Ověřte konfiguraci proxy serveru.<br /><br /> Pokud používáte protokol SSL, ujistěte se, že proces serveru má oprávnění pro přístup k úložišti certifikátů.<br /><br /> Pokud posíláte velké množství dat, nastavte <xref:System.Net.HttpWebRequest.AllowWriteStreamBuffering%2A> na `false`.|  
|<xref:System.Net.WebExceptionStatus.TrustFailure>|Certifikát serveru nelze ověřit.|Pokuste se identifikátor URI otevřít pomocí aplikace Internet Explorer. Vyřešte všechny výstrahy zabezpečení zobrazené v IE. Pokud výstrahu zabezpečení nemůžete vyřešit, můžete vytvořit třídu zásad certifikátu implementující <xref:System.Net.ICertificatePolicy>, která vrací `true`a předávat ji do <xref:System.Net.ServicePointManager.CertificatePolicy%2A>.<br /><br /> Přečtěte si <https://support.microsoft.com/?id=823177>.<br /><br /> Ujistěte se, že certifikát certifikační autority, která podepsala certifikát serveru, je přidána do seznamu důvěryhodných certifikačních autorit v aplikaci Internet Explorer.<br /><br /> Ujistěte se, že název hostitele v adrese URL odpovídá běžnému názvu certifikátu serveru.|  
|<xref:System.Net.WebExceptionStatus.SecureChannelFailure>|V transakci SSL došlo k chybě, nebo došlo k potížím s certifikátem.|.NET Framework verze 1,1 podporuje pouze protokol SSL verze 3,0. Pokud server používá pouze protokol TLS verze 1,0 nebo SSL verze 2,0, je vyvolána výjimka. Upgradujte na verzi .NET Framework 2,0 a nastavte <xref:System.Net.ServicePointManager.SecurityProtocol%2A> tak, aby odpovídala serveru.<br /><br /> Certifikát klienta byl podepsán certifikační autoritou (CA), kterou server nedůvěřuje. Nainstalujte certifikát certifikační autority na server. Viz třída <https://support.microsoft.com/?id=332077>.<br /><br /> Ujistěte se, že máte nainstalovanou nejnovější aktualizaci Service Pack.|  
|<xref:System.Net.WebExceptionStatus.ConnectFailure>|Spojení bylo přerušeno.|Připojení je blokováno bránou firewall nebo proxy serverem. Upravte bránu firewall nebo proxy server, aby bylo připojení povoleno.<br /><br /> Explicitně určete <xref:System.Net.WebProxy> v klientské aplikaci voláním konstruktoru <xref:System.Net.WebProxy> (`WebServiceProxyClass.Proxy = new WebProxy("http://server:80", true)`).<br /><br /> Spusťte Filemon nebo Regmon, abyste zajistili, že má identita pracovního procesu potřebná oprávnění pro přístup k WSPWSP. dll, HKLM\System\CurrentControlSet\Services\DnsCache nebo HKLM\System\CurrentControlSet\Services\WinSock2.|  
|<xref:System.Net.WebExceptionStatus.NameResolutionFailure>|Služba názvů domén nemohla přeložit název hostitele.|Nakonfigurujte proxy server správně. Viz třída <https://support.microsoft.com/?id=318140>.<br /><br /> Zajistěte, aby se připojení neblokovalo nainstalovaným antivirovým softwarem nebo bránou firewall.|  
|<xref:System.Net.WebExceptionStatus.RequestCanceled>|byla volána <xref:System.Net.WebRequest.Abort%2A> nebo došlo k chybě.|Tento problém může být způsobený velkým zatížením klienta nebo serveru. Snižte zatížení.<br /><br /> Zvyšte nastavení <xref:System.Net.ServicePointManager.DefaultConnectionLimit%2A>.<br /><br /> Upravte nastavení výkonu webové služby v tématu <https://support.microsoft.com/?id=821268>.|  
|<xref:System.Net.WebExceptionStatus.ConnectionClosed>|Aplikace se pokusila o zápis do soketu, který již byl uzavřen.|Klient nebo server je přetížený. Snižte zatížení.<br /><br /> Zvyšte nastavení <xref:System.Net.ServicePointManager.DefaultConnectionLimit%2A>.<br /><br /> Upravte nastavení výkonu webové služby v tématu <https://support.microsoft.com/?id=821268>.|  
|<xref:System.Net.WebExceptionStatus.MessageLengthLimitExceeded>|Omezení nastavené na délku zprávy (<xref:System.Net.HttpWebRequest.MaximumResponseHeadersLength%2A>) bylo překročeno.|Zvyšte hodnotu vlastnosti <xref:System.Net.HttpWebRequest.MaximumResponseHeadersLength%2A>.|  
|<xref:System.Net.WebExceptionStatus.ProxyNameResolutionFailure>|Služba názvů domén nemohla přeložit název hostitele proxy serveru.|Nakonfigurujte proxy server správně. Viz třída <https://support.microsoft.com/?id=318140>.<br /><br /> Vynutit <xref:System.Net.HttpWebRequest> použití bez proxy nastavením vlastnosti <xref:System.Net.HttpWebRequest.Proxy%2A> na `null`.|  
|<xref:System.Net.WebExceptionStatus.ServerProtocolViolation>|Odpověď ze serveru není platnou odpovědí HTTP. K tomuto problému dochází, když .NET Framework zjistí, že odpověď serveru nedodržuje požadavky HTTP 1,1 RFC. K tomuto problému může dojít, když odpověď obsahuje nesprávná záhlaví nebo nesprávné oddělovače hlaviček. RFC 2616 definuje HTTP 1,1 a platný formát pro odpověď ze serveru. Další informace najdete v [dokumentu RFC 2616-Hypertext Transfer Protocol--HTTP/1.1](https://tools.ietf.org/html/rfc2616) na webu [Internet Engineering Task Force (IETF)](https://www.ietf.org/) .|Získejte síťové trasování transakce a prověřte hlavičky v odpovědi.<br /><br /> Pokud vaše aplikace vyžaduje odpověď serveru bez analýzy (může se jednat o problém se zabezpečením), nastavte `useUnsafeHeaderParsing` `true` v konfiguračním souboru. Viz [\<httpWebRequest > element (nastavení sítě)](../configure-apps/file-schema/network/httpwebrequest-element-network-settings.md).|  
  
## <a name="see-also"></a>Viz také

- <xref:System.Net.HttpWebRequest>
- <xref:System.Net.HttpWebResponse>
- <xref:System.Net.Dns>
