---
title: Osvědčené postupy TLS (Transport Layer Security) s .NET Framework
description: Popisuje osvědčené postupy pomocí protokolu TLS (Transport Layer Security) s .NET Framework.
ms.date: 10/22/2018
helpviewer_keywords:
- sending data, Internet security
- protocols, Internet security
- Network security
- network resources, Internet security
- receiving data, Internet security
- authentication [.NET Framework], Internet security
- Internet, security
- security [.NET Framework], Internet
- permissions [.NET Framework], Internet
ms.openlocfilehash: e2f8f1304de587e1bedd8cde60e665971d903183
ms.sourcegitcommit: 7e2128d4a4c45b4274bea3b8e5760d4694569ca1
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/14/2020
ms.locfileid: "75937686"
---
# <a name="transport-layer-security-tls-best-practices-with-the-net-framework"></a><span data-ttu-id="b2998-103">Osvědčené postupy TLS (Transport Layer Security) s .NET Framework</span><span class="sxs-lookup"><span data-stu-id="b2998-103">Transport Layer Security (TLS) best practices with the .NET Framework</span></span>

<span data-ttu-id="b2998-104">Protokol TLS (Transport Layer Security) je oborovým standardem, který pomáhá chránit soukromí informací přenášených přes Internet.</span><span class="sxs-lookup"><span data-stu-id="b2998-104">The Transport Layer Security (TLS) protocol is an industry standard designed to help protect the privacy of information communicated over the Internet.</span></span> <span data-ttu-id="b2998-105">[TLS 1,2](https://tools.ietf.org/html/rfc5246) je standard, který poskytuje vylepšení zabezpečení v předchozích verzích.</span><span class="sxs-lookup"><span data-stu-id="b2998-105">[TLS 1.2](https://tools.ietf.org/html/rfc5246) is a standard that provides security improvements over previous versions.</span></span> <span data-ttu-id="b2998-106">Protokol TLS 1,2 bude nakonec nahrazen nejnovějším vydaným standardem [tls 1,3](https://tools.ietf.org/html/rfc8446) , který je rychlejší a má vyšší zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="b2998-106">TLS 1.2 will eventually be replaced by the newest released standard [TLS 1.3](https://tools.ietf.org/html/rfc8446) which is faster and has improved security.</span></span> <span data-ttu-id="b2998-107">Tento článek obsahuje doporučení pro zabezpečení .NET Frameworkch aplikací, které používají protokol TLS.</span><span class="sxs-lookup"><span data-stu-id="b2998-107">This article presents recommendations to secure .NET Framework applications that use the TLS protocol.</span></span>

<span data-ttu-id="b2998-108">Aby se zajistilo, že .NET Framework aplikace zůstanou zabezpečené, **neměla by být** verze TLS pevně zakódované.</span><span class="sxs-lookup"><span data-stu-id="b2998-108">To ensure .NET Framework applications remain secure, the TLS version should **not** be hardcoded.</span></span> <span data-ttu-id="b2998-109">.NET Framework aplikace by měly používat verzi TLS, kterou operační systém (OS) podporuje.</span><span class="sxs-lookup"><span data-stu-id="b2998-109">.NET Framework applications should use the TLS version the operating system (OS) supports.</span></span>

<span data-ttu-id="b2998-110">Tento dokument cílí na vývojáře, kteří jsou:</span><span class="sxs-lookup"><span data-stu-id="b2998-110">This document targets developers who are:</span></span>

- <span data-ttu-id="b2998-111">Přímo pomocí <xref:System.Net> rozhraní API (například <xref:System.Net.Http.HttpClient?displayProperty=nameWithType> a <xref:System.Net.Security.SslStream?displayProperty=nameWithType>).</span><span class="sxs-lookup"><span data-stu-id="b2998-111">Directly using the <xref:System.Net> APIs (for example, <xref:System.Net.Http.HttpClient?displayProperty=nameWithType> and <xref:System.Net.Security.SslStream?displayProperty=nameWithType>).</span></span>
- <span data-ttu-id="b2998-112">Přímo pomocí služby a klientů WCF pomocí oboru názvů <xref:System.ServiceModel?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b2998-112">Directly using WCF clients and services using the <xref:System.ServiceModel?displayProperty=nameWithType> namespace.</span></span>
- <span data-ttu-id="b2998-113">Použití webových a pracovních rolí [Azure Cloud Services](https://azure.microsoft.com/services/cloud-services/) k hostování a spuštění vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="b2998-113">Using [Azure Cloud Services](https://azure.microsoft.com/services/cloud-services/) Web and Worker roles to host and run your application.</span></span> <span data-ttu-id="b2998-114">Podívejte se na část [Azure Cloud Services](#azure-cloud-services) .</span><span class="sxs-lookup"><span data-stu-id="b2998-114">See the [Azure Cloud Services](#azure-cloud-services) section.</span></span>

<span data-ttu-id="b2998-115">Doporučený postup:</span><span class="sxs-lookup"><span data-stu-id="b2998-115">We recommend that you:</span></span>

- <span data-ttu-id="b2998-116">Cílová verze .NET Framework 4,7 nebo novější ve vašich aplikacích.</span><span class="sxs-lookup"><span data-stu-id="b2998-116">Target .NET Framework 4.7 or later versions on your apps.</span></span> <span data-ttu-id="b2998-117">Cílová .NET Framework 4.7.1 nebo novější verze v aplikacích WCF.</span><span class="sxs-lookup"><span data-stu-id="b2998-117">Target .NET Framework 4.7.1 or later versions on your WCF apps.</span></span>
- <span data-ttu-id="b2998-118">Nezadávejte verzi TLS.</span><span class="sxs-lookup"><span data-stu-id="b2998-118">Do not specify the TLS version.</span></span> <span data-ttu-id="b2998-119">Nakonfigurujte kód tak, aby se operační systém mohl rozhodnout o verzi TLS.</span><span class="sxs-lookup"><span data-stu-id="b2998-119">Configure your code to let the OS decide on the TLS version.</span></span>
- <span data-ttu-id="b2998-120">Proveďte důkladné audit kódu, abyste ověřili, že neurčíte verzi TLS nebo SSL.</span><span class="sxs-lookup"><span data-stu-id="b2998-120">Perform a thorough code audit to verify you're not specifying a TLS or SSL version.</span></span>

<span data-ttu-id="b2998-121">Když aplikace umožňuje operačnímu systému zvolit verzi TLS:</span><span class="sxs-lookup"><span data-stu-id="b2998-121">When your app lets the OS choose the TLS version:</span></span>

- <span data-ttu-id="b2998-122">Automaticky využívá nové protokoly přidané v budoucnu, jako je třeba TLS 1,3.</span><span class="sxs-lookup"><span data-stu-id="b2998-122">It automatically takes advantage of new protocols added in the future, such as TLS 1.3.</span></span>
- <span data-ttu-id="b2998-123">Operační systém blokuje protokoly, které jsou zjištěny jako nezabezpečené.</span><span class="sxs-lookup"><span data-stu-id="b2998-123">The OS blocks protocols that are discovered not to be secure.</span></span>

<span data-ttu-id="b2998-124">Část [audit kódu a provádění změn kódu](#audit-your-code-and-make-code-changes) pokrývá auditování a aktualizaci kódu.</span><span class="sxs-lookup"><span data-stu-id="b2998-124">The section [Audit your code and make code changes](#audit-your-code-and-make-code-changes) covers auditing and updating your code.</span></span>

<span data-ttu-id="b2998-125">Tento článek vysvětluje, jak povolit nejsilnější zabezpečení, které je k dispozici pro verzi .NET Framework, na které vaše aplikace cílí a běží.</span><span class="sxs-lookup"><span data-stu-id="b2998-125">This article explains how to enable the strongest security available for the version of the .NET Framework that your app targets and runs on.</span></span> <span data-ttu-id="b2998-126">Když aplikace explicitně nastaví protokol a verzi zabezpečení, výslovný se z jakékoli jiné alternativy a výslovný z .NET Framework a výchozí chování operačního systému.</span><span class="sxs-lookup"><span data-stu-id="b2998-126">When an app explicitly sets a security protocol and version, it opts out of any other alternative, and opts out of .NET Framework and OS default behavior.</span></span> <span data-ttu-id="b2998-127">Pokud chcete, aby aplikace mohla vyjednávat připojení TLS 1,2, explicitní nastavení na nižší verzi TLS brání připojení TLS 1,2.</span><span class="sxs-lookup"><span data-stu-id="b2998-127">If you want your app to be able to negotiate a TLS 1.2 connection, explicitly setting to a lower TLS version prevents a TLS 1.2 connection.</span></span>

<span data-ttu-id="b2998-128">Pokud se nemůžete vyhnout zakódujeme verze protokolu, důrazně doporučujeme zadat TLS 1,2.</span><span class="sxs-lookup"><span data-stu-id="b2998-128">If you can't avoid hardcoding a protocol version, we strongly recommend that you specify TLS 1.2.</span></span> <span data-ttu-id="b2998-129">Pokyny k identifikaci a odebrání závislostí TLS 1,0 najdete v dokumentu White paper o [řešení potíží s protokolem tls 1,0](https://www.microsoft.com/download/details.aspx?id=55266) .</span><span class="sxs-lookup"><span data-stu-id="b2998-129">For guidance on identifying and removing TLS 1.0 dependencies, download the [Solving the TLS 1.0 Problem](https://www.microsoft.com/download/details.aspx?id=55266) white paper.</span></span>

<span data-ttu-id="b2998-130">WCF podporuje TLS 1.0, 1,1 a 1,2 jako výchozí v .NET Framework 4,7.</span><span class="sxs-lookup"><span data-stu-id="b2998-130">WCF Supports TLS1.0, 1.1 and 1.2 as the default in .NET Framework 4.7.</span></span> <span data-ttu-id="b2998-131">Počínaje .NET Framework 4.7.1 se standardně pro WCF používá nakonfigurovaná verze operačního systému.</span><span class="sxs-lookup"><span data-stu-id="b2998-131">Starting with .NET Framework 4.7.1, WCF defaults to the operating system configured version.</span></span> <span data-ttu-id="b2998-132">Pokud je aplikace explicitně nakonfigurovaná pomocí `SslProtocols.None`, WCF při použití přenosu v NetTcp použije výchozí nastavení operačního systému.</span><span class="sxs-lookup"><span data-stu-id="b2998-132">If an application is explicitly configured with `SslProtocols.None`, WCF uses the operating system default setting when using the NetTcp transport.</span></span>

<span data-ttu-id="b2998-133">Otázky k tomuto dokumentu můžete klást v [doporučených postupech pro zabezpečení TLS (Transport Layer Security)](https://github.com/dotnet/docs/issues/4675)na githubu .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="b2998-133">You can ask questions about this document in the GitHub issue [Transport Layer Security (TLS) best practices with the .NET Framework](https://github.com/dotnet/docs/issues/4675).</span></span>

## <a name="audit-your-code-and-make-code-changes"></a><span data-ttu-id="b2998-134">Audit kódu a provádění změn kódu</span><span class="sxs-lookup"><span data-stu-id="b2998-134">Audit your code and make code changes</span></span>

<span data-ttu-id="b2998-135">V případě aplikací ASP.NET zkontrolujte `<system.web><httpRuntime targetFramework>` element _Web. config_ a ověřte, že používáte zamýšlenou verzi .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="b2998-135">For ASP.NET applications, inspect the `<system.web><httpRuntime targetFramework>` element of _web.config_ to verify you're using the intended version of the .NET Framework.</span></span>

<span data-ttu-id="b2998-136">Informace o model Windows Forms a dalších aplikacích naleznete v tématu [How to: Target a version of .NET Framework](/visualstudio/ide/visual-studio-multi-targeting-overview).</span><span class="sxs-lookup"><span data-stu-id="b2998-136">For Windows Forms and other applications, see [How to: Target a Version of the .NET Framework](/visualstudio/ide/visual-studio-multi-targeting-overview).</span></span>

<span data-ttu-id="b2998-137">Pomocí následujících částí ověříte, že nepoužíváte konkrétní verzi TLS nebo SSL.</span><span class="sxs-lookup"><span data-stu-id="b2998-137">Use the following sections to verify you're not using a specific TLS or SSL version.</span></span>

## <a name="if-your-app-targets-net-framework-47-or-later-versions"></a><span data-ttu-id="b2998-138">Pokud vaše aplikace cílí na .NET Framework 4,7 nebo novějších verzí</span><span class="sxs-lookup"><span data-stu-id="b2998-138">If your app targets .NET Framework 4.7 or later versions</span></span>

<span data-ttu-id="b2998-139">V následujících částech se dozvíte, jak ověřit, že nepoužíváte konkrétní verzi TLS nebo SSL.</span><span class="sxs-lookup"><span data-stu-id="b2998-139">The following sections show how to verify you're not using a specific TLS or SSL version.</span></span>

### <a name="for-http-networking"></a><span data-ttu-id="b2998-140">Pro sítě HTTP</span><span class="sxs-lookup"><span data-stu-id="b2998-140">For HTTP networking</span></span>

<span data-ttu-id="b2998-141"><xref:System.Net.ServicePointManager>pomocí .NET Framework 4,7 a novějších verzí použije výchozí protokol zabezpečení nakonfigurovaný v operačním systému.</span><span class="sxs-lookup"><span data-stu-id="b2998-141"><xref:System.Net.ServicePointManager>, using .NET Framework 4.7 and later versions, will use the default security protocol configured in the OS.</span></span> <span data-ttu-id="b2998-142">Chcete-li nastavit výchozí operační systém, pokud je to možné, nenastavujte hodnotu vlastnosti <xref:System.Net.ServicePointManager.SecurityProtocol?displayProperty=nameWithType>, která má výchozí nastavení <xref:System.Net.SecurityProtocolType.SystemDefault?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b2998-142">To get the default OS choice, if possible, don't set a value for the <xref:System.Net.ServicePointManager.SecurityProtocol?displayProperty=nameWithType> property, which defaults to <xref:System.Net.SecurityProtocolType.SystemDefault?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="b2998-143">Vzhledem k tomu, že nastavení <xref:System.Net.SecurityProtocolType.SystemDefault?displayProperty=nameWithType> způsobí, že <xref:System.Net.ServicePointManager> použije výchozí protokol zabezpečení nakonfigurovaný operačním systémem, vaše aplikace může běžet odlišně v závislosti na operačním systému, na kterém je spuštěný.</span><span class="sxs-lookup"><span data-stu-id="b2998-143">Because the <xref:System.Net.SecurityProtocolType.SystemDefault?displayProperty=nameWithType> setting causes the <xref:System.Net.ServicePointManager> to use the default security protocol configured by the operating system, your application may run differently based on the OS it's run on.</span></span> <span data-ttu-id="b2998-144">Například Windows 7 SP1 používá TLS 1,0, zatímco Windows 8 a Windows 10 používají TLS 1,2.</span><span class="sxs-lookup"><span data-stu-id="b2998-144">For example, Windows 7 SP1 uses TLS 1.0 while Windows 8 and Windows 10 use TLS 1.2.</span></span>

<span data-ttu-id="b2998-145">Zbývající část tohoto článku není relevantní, pokud cílíte .NET Framework 4,7 nebo novějších verzí pro sítě HTTP.</span><span class="sxs-lookup"><span data-stu-id="b2998-145">The remainder of this article is not relevant when targeting .NET Framework 4.7 or later versions for HTTP networking.</span></span>

### <a name="for-tcp-sockets-networking"></a><span data-ttu-id="b2998-146">Pro sítě TCP Sockets</span><span class="sxs-lookup"><span data-stu-id="b2998-146">For TCP sockets networking</span></span>

<span data-ttu-id="b2998-147"><xref:System.Net.Security.SslStream>s využitím .NET Framework 4,7 a novějších verzí se ve výchozím nastavení používá operační systém, který vybírá nejlepší protokol zabezpečení a verzi.</span><span class="sxs-lookup"><span data-stu-id="b2998-147"><xref:System.Net.Security.SslStream>, using .NET Framework 4.7 and later versions, defaults to the OS choosing the best security protocol and version.</span></span> <span data-ttu-id="b2998-148">Chcete-li získat výchozí nejlepší možnost pro operační systém, pokud je to možné, nepoužívejte přetížení metod <xref:System.Net.Security.SslStream>, které přebírají explicitní <xref:System.Security.Authentication.SslProtocols> parametr.</span><span class="sxs-lookup"><span data-stu-id="b2998-148">To get the default OS best choice, if possible, don't use the method overloads of <xref:System.Net.Security.SslStream> that take an explicit <xref:System.Security.Authentication.SslProtocols> parameter.</span></span> <span data-ttu-id="b2998-149">V opačném případě předejte <xref:System.Security.Authentication.SslProtocols.None?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b2998-149">Otherwise, pass <xref:System.Security.Authentication.SslProtocols.None?displayProperty=nameWithType>.</span></span> <span data-ttu-id="b2998-150">Doporučujeme, abyste nepoužívali <xref:System.Security.Authentication.SslProtocols.Default>; nastavení `SslProtocols.Default` vynutí použití protokolu SSL 3,0/TLS 1,0 a zabraňuje TLS 1,2.</span><span class="sxs-lookup"><span data-stu-id="b2998-150">We recommend that you don't use <xref:System.Security.Authentication.SslProtocols.Default>; setting `SslProtocols.Default` forces the use of SSL 3.0 /TLS 1.0 and prevents TLS 1.2.</span></span>

<span data-ttu-id="b2998-151">Nenastavte hodnotu vlastnosti <xref:System.Net.ServicePointManager.SecurityProtocol> (pro sítě HTTP).</span><span class="sxs-lookup"><span data-stu-id="b2998-151">Don't set a value for the <xref:System.Net.ServicePointManager.SecurityProtocol> property (for HTTP networking).</span></span>

<span data-ttu-id="b2998-152">Nepoužívejte přetížení metod <xref:System.Net.Security.SslStream>, které přebírají explicitní parametr <xref:System.Security.Authentication.SslProtocols> (pro sítě TCP Sockets).</span><span class="sxs-lookup"><span data-stu-id="b2998-152">Don't use the method overloads of <xref:System.Net.Security.SslStream> that take an explicit <xref:System.Security.Authentication.SslProtocols> parameter (for TCP sockets networking).</span></span> <span data-ttu-id="b2998-153">Když změníte cíl aplikace na .NET Framework 4,7 nebo novější, budete postupovat podle doporučení k osvědčeným postupům.</span><span class="sxs-lookup"><span data-stu-id="b2998-153">When you retarget your app to .NET Framework 4.7 or later versions, you'll be following the best practices recommendation.</span></span>

<span data-ttu-id="b2998-154">Zbývající část tohoto tématu není relevantní, pokud cílíte .NET Framework 4,7 nebo novějších verzí pro sítě TCP Sockets.</span><span class="sxs-lookup"><span data-stu-id="b2998-154">The remainder of this topic is not relevant when targeting .NET Framework 4.7 or later versions for TCP sockets networking.</span></span>

<a name="wcf-tcp-cert"></a>

### <a name="for-wcf-tcp-transport-using-transport-security-with-certificate-credentials"></a><span data-ttu-id="b2998-155">Pro přenos WCF TCP pomocí zabezpečení přenosu s přihlašovacími údaji certifikátu</span><span class="sxs-lookup"><span data-stu-id="b2998-155">For WCF TCP transport using transport security with certificate credentials</span></span>

<span data-ttu-id="b2998-156">WCF používá stejný zásobník sítě jako zbytek .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="b2998-156">WCF uses the same networking stack as the rest of the .NET Framework.</span></span>

<span data-ttu-id="b2998-157">Pokud cílíte na 4.7.1, služba WCF je nakonfigurovaná tak, aby umožňovala operačnímu systému zvolit nejlepší protokol zabezpečení, pokud se explicitně nenakonfigurovala tato hodnota:</span><span class="sxs-lookup"><span data-stu-id="b2998-157">If you are targeting 4.7.1, WCF is configured to allow the OS to choose the best security protocol by default unless explicitly configured:</span></span>

- <span data-ttu-id="b2998-158">V konfiguračním souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="b2998-158">In your application configuration file.</span></span>
- <span data-ttu-id="b2998-159">**Nebo**v aplikaci ve zdrojovém kódu.</span><span class="sxs-lookup"><span data-stu-id="b2998-159">**Or**, in your application in the source code.</span></span>

<span data-ttu-id="b2998-160">Ve výchozím nastavení je .NET Framework 4,7 a novější verze nakonfigurovaná na používání protokolu TLS 1,2 a umožňuje připojení pomocí protokolu TLS 1,1 nebo TLS 1,0.</span><span class="sxs-lookup"><span data-stu-id="b2998-160">By default, .NET Framework 4.7 and later versions is configured to use TLS 1.2 and allows connections using TLS 1.1 or TLS 1.0.</span></span> <span data-ttu-id="b2998-161">Nakonfigurujte WCF tak, aby operační systém mohl zvolit nejlepší protokol zabezpečení nakonfigurováním vazby na použití <xref:System.Security.Authentication.SslProtocols.None?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b2998-161">Configure WCF to allow the OS to choose the best security protocol by configuring your binding to use <xref:System.Security.Authentication.SslProtocols.None?displayProperty=nameWithType>.</span></span> <span data-ttu-id="b2998-162">Dá se nastavit na <xref:System.ServiceModel.TcpTransportSecurity.SslProtocols>.</span><span class="sxs-lookup"><span data-stu-id="b2998-162">This can be set on <xref:System.ServiceModel.TcpTransportSecurity.SslProtocols>.</span></span> <span data-ttu-id="b2998-163">k `SslProtocols.None` lze přistupovat z <xref:System.ServiceModel.NetTcpSecurity.Transport>.</span><span class="sxs-lookup"><span data-stu-id="b2998-163">`SslProtocols.None` can be accessed from <xref:System.ServiceModel.NetTcpSecurity.Transport>.</span></span> <span data-ttu-id="b2998-164">k `NetTcpSecurity.Transport` lze přistupovat z <xref:System.ServiceModel.NetTcpBinding.Security>.</span><span class="sxs-lookup"><span data-stu-id="b2998-164">`NetTcpSecurity.Transport` can be accessed from <xref:System.ServiceModel.NetTcpBinding.Security>.</span></span>

<span data-ttu-id="b2998-165">Pokud používáte vlastní vazbu:</span><span class="sxs-lookup"><span data-stu-id="b2998-165">If you're using a custom binding:</span></span>

- <span data-ttu-id="b2998-166">Nakonfigurujte WCF tak, aby operační systém mohl zvolit nejlepší protokol zabezpečení nastavením <xref:System.ServiceModel.Channels.SslStreamSecurityBindingElement.SslProtocols> k použití <xref:System.Security.Authentication.SslProtocols.None?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b2998-166">Configure WCF to allow the OS to choose the best security protocol by setting <xref:System.ServiceModel.Channels.SslStreamSecurityBindingElement.SslProtocols> to use <xref:System.Security.Authentication.SslProtocols.None?displayProperty=nameWithType>.</span></span>
- <span data-ttu-id="b2998-167">**Nebo** nakonfigurujte protokol, který se používá pro konfigurační cestu `system.serviceModel/bindings/customBinding/binding/sslStreamSecurity:sslProtocols`.</span><span class="sxs-lookup"><span data-stu-id="b2998-167">**Or** configure the protocol used with the configuration path `system.serviceModel/bindings/customBinding/binding/sslStreamSecurity:sslProtocols`.</span></span>

<span data-ttu-id="b2998-168">Pokud nepoužíváte vlastní vazbu **a** nakonfigurujete vazbu **WCF pomocí konfigurace** , nastavte protokol použitý s cestou konfigurace `system.serviceModel/bindings/netTcpBinding/binding/security/transport:sslProtocols`.</span><span class="sxs-lookup"><span data-stu-id="b2998-168">If you're **not** using a custom binding **and** you're setting your WCF binding using configuration, set the protocol used with the configuration path `system.serviceModel/bindings/netTcpBinding/binding/security/transport:sslProtocols`.</span></span>

### <a name="for-wcf-message-security-with-certificate-credentials"></a><span data-ttu-id="b2998-169">Pro zabezpečení zpráv WCF s přihlašovacími údaji certifikátu</span><span class="sxs-lookup"><span data-stu-id="b2998-169">For WCF Message Security with certificate credentials</span></span>

<span data-ttu-id="b2998-170">Ve výchozím nastavení .NET Framework 4,7 a novější verze používá protokol určený ve vlastnosti <xref:System.Net.ServicePointManager.SecurityProtocol>.</span><span class="sxs-lookup"><span data-stu-id="b2998-170">.NET Framework 4.7 and later versions by default uses the protocol specified in the <xref:System.Net.ServicePointManager.SecurityProtocol> property.</span></span> <span data-ttu-id="b2998-171">Pokud je `Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols` [AppContextSwitch](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) nastavené na `true`, WCF zvolí nejlepší protokol až do TLS 1,0.</span><span class="sxs-lookup"><span data-stu-id="b2998-171">When the [AppContextSwitch](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) `Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols` is set to `true`, WCF chooses the best protocol, up to TLS 1.0.</span></span>

## <a name="if-your-app-targets-a-net-framework-version-earlier-than-47"></a><span data-ttu-id="b2998-172">Pokud se vaše aplikace zaměřuje na verzi .NET Framework starší než 4,7</span><span class="sxs-lookup"><span data-stu-id="b2998-172">If your app targets a .NET Framework version earlier than 4.7</span></span>

<span data-ttu-id="b2998-173">Auditujte kód, abyste ověřili, že nenastavujete konkrétní verzi TLS nebo SSL, a to pomocí následujících částí:</span><span class="sxs-lookup"><span data-stu-id="b2998-173">Audit your code to verify you're not setting a specific TLS or SSL version using the following sections:</span></span>

### <a name="for-net-framework-46---462-and-not-wcf"></a><span data-ttu-id="b2998-174">Pro .NET Framework 4,6-4.6.2 a ne WCF</span><span class="sxs-lookup"><span data-stu-id="b2998-174">For .NET Framework 4.6 - 4.6.2 and not WCF</span></span>

<span data-ttu-id="b2998-175">Nastavte `DontEnableSystemDefaultTlsVersions` `AppContext` přepínač na `false`.</span><span class="sxs-lookup"><span data-stu-id="b2998-175">Set the `DontEnableSystemDefaultTlsVersions` `AppContext` switch to `false`.</span></span> <span data-ttu-id="b2998-176">Viz [Konfigurace zabezpečení prostřednictvím přepínačů AppContext](#configuring-security-via-appcontext-switches).</span><span class="sxs-lookup"><span data-stu-id="b2998-176">See [Configuring security via AppContext switches](#configuring-security-via-appcontext-switches).</span></span>

### <a name="for-wcf-using-net-framework-46---462-using-tcp-transport-security-with-certificate-credentials"></a><span data-ttu-id="b2998-177">Pro WCF používající .NET Framework 4,6-4.6.2 pomocí zabezpečení přenosu protokolu TCP s přihlašovacími údaji certifikátu</span><span class="sxs-lookup"><span data-stu-id="b2998-177">For WCF using .NET Framework 4.6 - 4.6.2 using TCP transport security with Certificate Credentials</span></span>

<span data-ttu-id="b2998-178">Je nutné nainstalovat nejnovější opravy operačního systému.</span><span class="sxs-lookup"><span data-stu-id="b2998-178">You must install the latest OS patches.</span></span> <span data-ttu-id="b2998-179">Viz [aktualizace zabezpečení](#security-updates).</span><span class="sxs-lookup"><span data-stu-id="b2998-179">See [Security updates](#security-updates).</span></span>

<span data-ttu-id="b2998-180">Rozhraní WCF automaticky zvolí nejvyšší dostupný protokol až na TLS 1,2, pokud explicitně nenakonfigurujete verzi protokolu.</span><span class="sxs-lookup"><span data-stu-id="b2998-180">The WCF framework automatically chooses the highest protocol available up to TLS 1.2 unless you explicitly configure a protocol version.</span></span> <span data-ttu-id="b2998-181">Další informace najdete v předchozí části [pro přenos WCF TCP pomocí zabezpečení přenosu s přihlašovacími údaji certifikátu](#wcf-tcp-cert).</span><span class="sxs-lookup"><span data-stu-id="b2998-181">For more information, see the preceding section [For WCF TCP transport using transport security with certificate credentials](#wcf-tcp-cert).</span></span>

### <a name="for-net-framework-35---452-and-not-wcf"></a><span data-ttu-id="b2998-182">Pro .NET Framework 3,5 – 4.5.2 a nikoli WCF</span><span class="sxs-lookup"><span data-stu-id="b2998-182">For .NET Framework 3.5 - 4.5.2 and not WCF</span></span>

<span data-ttu-id="b2998-183">Doporučujeme, abyste aplikaci upgradovali na verzi .NET Framework 4,7 nebo novější.</span><span class="sxs-lookup"><span data-stu-id="b2998-183">We recommend you upgrade your app to .NET Framework 4.7 or later versions.</span></span> <span data-ttu-id="b2998-184">Pokud nemůžete upgradovat, proveďte následující kroky.</span><span class="sxs-lookup"><span data-stu-id="b2998-184">If you cannot upgrade, take the following steps.</span></span> <span data-ttu-id="b2998-185">V některých případech může aplikace selhat, dokud neprovedete upgrade na verzi .NET Framework 4,7 nebo novější.</span><span class="sxs-lookup"><span data-stu-id="b2998-185">At some point in the future, your application may fail until you upgrade to .NET Framework 4.7 or later versions.</span></span>

<span data-ttu-id="b2998-186">Nastavte klíče registru [do schusestrongcrypto](#schusestrongcrypto) a [SystemDefaultTlsVersions](#systemdefaulttlsversions) na hodnotu 1.</span><span class="sxs-lookup"><span data-stu-id="b2998-186">Set the [SchUseStrongCrypto](#schusestrongcrypto) and [SystemDefaultTlsVersions](#systemdefaulttlsversions) registry keys to 1.</span></span> <span data-ttu-id="b2998-187">Viz téma [Konfigurace zabezpečení pomocí registru systému Windows](#configuring-security-via-the-windows-registry).</span><span class="sxs-lookup"><span data-stu-id="b2998-187">See [Configuring security via the Windows Registry](#configuring-security-via-the-windows-registry).</span></span> <span data-ttu-id="b2998-188">.NET Framework verze 3,5 podporuje příznak `SchUseStrongCrypto` pouze v případě, že je předána explicitní hodnota TLS.</span><span class="sxs-lookup"><span data-stu-id="b2998-188">The .NET Framework version 3.5 supports the `SchUseStrongCrypto` flag only when an explicit TLS value is passed.</span></span>

<span data-ttu-id="b2998-189">Pokud používáte v .NET Framework 3,5, je nutné nainstalovat Hot patch, aby bylo možné určit protokol TLS 1,2 pro váš program:</span><span class="sxs-lookup"><span data-stu-id="b2998-189">If you are running on .NET Framework 3.5, you need to install a hot patch so that TLS 1.2 can be specified by your program:</span></span>

| [<span data-ttu-id="b2998-190">KB3154518</span><span class="sxs-lookup"><span data-stu-id="b2998-190">KB3154518</span></span>](https://support.microsoft.com/kb/3154518) | <span data-ttu-id="b2998-191">Kumulativní spolehlivost HR-1605-podpora systémových výchozích verzí TLS, které jsou součástí služby .NET Framework 3.5.1 v systému Windows 7 SP1 a Server 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="b2998-191">Reliability Rollup HR-1605 - Support for TLS System Default Versions included in the .NET Framework 3.5.1 on Windows 7 SP1 and Server 2008 R2 SP1</span></span> |
| --- | --- |
| [<span data-ttu-id="b2998-192">KB3154519</span><span class="sxs-lookup"><span data-stu-id="b2998-192">KB3154519</span></span>](https://support.microsoft.com/kb/3154519) | <span data-ttu-id="b2998-193">Kumulativní spolehlivost HR-1605-podpora systémových výchozích verzí TLS, které jsou součástí .NET Framework 3,5 na Windows Serveru 2012</span><span class="sxs-lookup"><span data-stu-id="b2998-193">Reliability Rollup HR-1605 - Support for TLS System Default Versions included in the .NET Framework 3.5 on Windows Server 2012</span></span> |
| [<span data-ttu-id="b2998-194">KB3154520</span><span class="sxs-lookup"><span data-stu-id="b2998-194">KB3154520</span></span>](https://support.microsoft.com/kb/3154520) | <span data-ttu-id="b2998-195">Kumulativní spolehlivost HR-1605-podpora systémových výchozích verzí TLS, které jsou součástí .NET Framework 3,5 v Windows 8.1 a Windows Serveru 2012 R2</span><span class="sxs-lookup"><span data-stu-id="b2998-195">Reliability Rollup HR-1605 -Support for TLS System Default Versions included in the .NET Framework 3.5 on Windows 8.1 and Windows Server 2012 R2</span></span> |
| [<span data-ttu-id="b2998-196">KB3156421</span><span class="sxs-lookup"><span data-stu-id="b2998-196">KB3156421</span></span>](https://support.microsoft.com/kb/3156421) | <span data-ttu-id="b2998-197">1605 kumulativní opravy hotfix 3154521 pro .NET Framework 4.5.2 a 4.5.1 ve Windows</span><span class="sxs-lookup"><span data-stu-id="b2998-197">1605 Hotfix rollup 3154521 for the .NET Framework 4.5.2 and 4.5.1 on Windows</span></span> |

### <a name="for-wcf-using-net-framework-35---452-using-tcp-transport-security-with-certificate-credentials"></a><span data-ttu-id="b2998-198">Pro WCF používající .NET Framework 3,5-4.5.2 pomocí protokolu TCP Transport Security s přihlašovacími údaji certifikátu</span><span class="sxs-lookup"><span data-stu-id="b2998-198">For WCF using .NET Framework 3.5 - 4.5.2 using TCP transport security with Certificate Credentials</span></span>

<span data-ttu-id="b2998-199">V těchto verzích rozhraní WCF se pevně zakódované použít hodnoty SSL 3,0 a TLS 1,0.</span><span class="sxs-lookup"><span data-stu-id="b2998-199">These versions of the WCF framework are hardcoded to use values SSL 3.0 and TLS 1.0.</span></span> <span data-ttu-id="b2998-200">Tyto hodnoty nelze změnit.</span><span class="sxs-lookup"><span data-stu-id="b2998-200">These values cannot be changed.</span></span> <span data-ttu-id="b2998-201">Aby bylo možné používat protokol TLS 1,1 a 1,2, je nutné aktualizovat a změnit cílení na verzi .NET Framework 4,6 nebo novější.</span><span class="sxs-lookup"><span data-stu-id="b2998-201">You must update and retarget to NET Framework 4.6 or later versions to use TLS 1.1 and 1.2.</span></span>

## <a name="if-your-app-targets-net-framework-35"></a><span data-ttu-id="b2998-202">Pokud se vaše aplikace zaměřuje .NET Framework 3,5</span><span class="sxs-lookup"><span data-stu-id="b2998-202">If your app targets .NET Framework 3.5</span></span>

<span data-ttu-id="b2998-203">Pokud je nutné explicitně nastavit protokol zabezpečení a neumožnit rozhraní .NET Framework nebo operační systém vybrat protokol zabezpečení, přidejte do kódu `SecurityProtocolTypeExtensions` a `SslProtocolsExtension` výčty.</span><span class="sxs-lookup"><span data-stu-id="b2998-203">If you must explicitly set a security protocol instead of letting the .NET framework or the OS pick the security protocol, add `SecurityProtocolTypeExtensions` and `SslProtocolsExtension` enumerations to your code.</span></span> <span data-ttu-id="b2998-204">`SecurityProtocolTypeExtensions` a `SslProtocolsExtension` zahrnují hodnoty pro `Tls12`, `Tls11`a `SystemDefault` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="b2998-204">`SecurityProtocolTypeExtensions` and `SslProtocolsExtension` include values for `Tls12`, `Tls11`, and the `SystemDefault` value.</span></span> <span data-ttu-id="b2998-205">Viz [Podpora systémových výchozích verzí TLS, které jsou součástí .NET Framework 3,5 v Windows 8.1 a Windows serveru 2012 R2](https://support.microsoft.com/help/3154520/support-for-tls-system-default-versions-included-in-the--net-framework).</span><span class="sxs-lookup"><span data-stu-id="b2998-205">See [Support for TLS System Default Versions included in .NET Framework 3.5 on Windows 8.1 and Windows Server 2012 R2](https://support.microsoft.com/help/3154520/support-for-tls-system-default-versions-included-in-the--net-framework).</span></span>

<a name="configuring-security-via-appcontext-switches"></a>

## <a name="configuring-security-via-appcontext-switches-for-net-framework-46-or-later-versions"></a><span data-ttu-id="b2998-206">Konfigurace zabezpečení prostřednictvím přepínačů AppContext (pro .NET Framework 4,6 nebo novější verze)</span><span class="sxs-lookup"><span data-stu-id="b2998-206">Configuring security via AppContext switches (for .NET Framework 4.6 or later versions)</span></span>

<span data-ttu-id="b2998-207">Přepínače [AppContext](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) popsané v této části jsou relevantní, pokud je vaše aplikace cílena nebo běží na .NET Framework 4,6 nebo novějších verzích.</span><span class="sxs-lookup"><span data-stu-id="b2998-207">The [AppContext](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) switches described in this section are relevant if your app targets, or runs on, .NET Framework 4.6 or later versions.</span></span> <span data-ttu-id="b2998-208">Bez ohledu na to, jestli je ve výchozím nastavení nastavené, nebo explicitně, by měly být přepínače `false`, pokud je to možné.</span><span class="sxs-lookup"><span data-stu-id="b2998-208">Whether by default, or by setting them explicitly, the switches should be `false` if possible.</span></span> <span data-ttu-id="b2998-209">Pokud chcete nakonfigurovat zabezpečení prostřednictvím jednoho nebo obou přepínačů, nezadávejte v kódu hodnotu protokolu zabezpečení. Tím by se přepsal přepínač (ES).</span><span class="sxs-lookup"><span data-stu-id="b2998-209">If you want to configure security via one or both switches, then don't specify a security protocol value in your code; doing so would override the switch(es).</span></span>

<span data-ttu-id="b2998-210">Přepínače mají stejný účinek, ať už provádíte sítě HTTP (<xref:System.Net.ServicePointManager>) nebo TCP Sockets (<xref:System.Net.Security.SslStream>).</span><span class="sxs-lookup"><span data-stu-id="b2998-210">The switches have the same effect whether you're doing HTTP networking (<xref:System.Net.ServicePointManager>) or TCP sockets networking (<xref:System.Net.Security.SslStream>).</span></span>

### <a name="switchsystemnetdontenableschusestrongcrypto"></a><span data-ttu-id="b2998-211">Switch.System.Net.DontEnableSchUseStrongCrypto</span><span class="sxs-lookup"><span data-stu-id="b2998-211">Switch.System.Net.DontEnableSchUseStrongCrypto</span></span>

<span data-ttu-id="b2998-212">Hodnota `false` pro `Switch.System.Net.DontEnableSchUseStrongCrypto` způsobí, že vaše aplikace bude používat silné šifrování.</span><span class="sxs-lookup"><span data-stu-id="b2998-212">A value of `false` for `Switch.System.Net.DontEnableSchUseStrongCrypto` causes your app to use strong cryptography.</span></span> <span data-ttu-id="b2998-213">Hodnota `false` pro `DontEnableSchUseStrongCrypto` používá bezpečnější síťové protokoly (TLS 1,2, TLS 1,1 a TLS 1,0) a blokuje protokoly, které nejsou zabezpečené.</span><span class="sxs-lookup"><span data-stu-id="b2998-213">A value of `false` for `DontEnableSchUseStrongCrypto` uses more secure network protocols (TLS 1.2, TLS 1.1, and TLS 1.0) and blocks protocols that are not secure.</span></span> <span data-ttu-id="b2998-214">Další informace najdete v [příznaku SCH_USE_STRONG_CRYPTO](#the-sch_use_strong_crypto-flag).</span><span class="sxs-lookup"><span data-stu-id="b2998-214">For more info, see [The SCH_USE_STRONG_CRYPTO flag](#the-sch_use_strong_crypto-flag).</span></span> <span data-ttu-id="b2998-215">Hodnota `true` zakáže silné šifrování vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="b2998-215">A value of `true` disables strong cryptography for your app.</span></span>

<span data-ttu-id="b2998-216">Pokud se vaše aplikace zaměřuje .NET Framework 4,6 nebo novější verze, přepne tento přepínač na výchozí hodnotu `false`.</span><span class="sxs-lookup"><span data-stu-id="b2998-216">If your app targets .NET Framework 4.6 or later versions, this switch defaults to `false`.</span></span> <span data-ttu-id="b2998-217">To je zabezpečené výchozí nastavení, které doporučujeme.</span><span class="sxs-lookup"><span data-stu-id="b2998-217">That's a secure default, which we recommend.</span></span> <span data-ttu-id="b2998-218">Pokud je vaše aplikace spuštěná na .NET Framework 4,6, ale cílí na starší verzi, přepne přepínač na výchozí hodnotu `true`.</span><span class="sxs-lookup"><span data-stu-id="b2998-218">If your app runs on .NET Framework 4.6, but targets an earlier version, the switch defaults to `true`.</span></span> <span data-ttu-id="b2998-219">V takovém případě byste ji měli explicitně nastavit na `false`.</span><span class="sxs-lookup"><span data-stu-id="b2998-219">In that case, you should explicitly set it to `false`.</span></span>

<span data-ttu-id="b2998-220">Pokud se potřebujete připojit ke starším službám, které nepodporují silné šifrování a nelze je upgradovat, `DontEnableSchUseStrongCrypto` by měla mít hodnotu `true`.</span><span class="sxs-lookup"><span data-stu-id="b2998-220">`DontEnableSchUseStrongCrypto` should only have a value of `true` if you need to connect to legacy services that don't support strong cryptography and can't be upgraded.</span></span>

### <a name="switchsystemnetdontenablesystemdefaulttlsversions"></a><span data-ttu-id="b2998-221">Switch.System.Net.DontEnableSystemDefaultTlsVersions</span><span class="sxs-lookup"><span data-stu-id="b2998-221">Switch.System.Net.DontEnableSystemDefaultTlsVersions</span></span>

<span data-ttu-id="b2998-222">Hodnota `false` pro `Switch.System.Net.DontEnableSystemDefaultTlsVersions` způsobí, že aplikace umožní operačnímu systému zvolit protokol.</span><span class="sxs-lookup"><span data-stu-id="b2998-222">A value of `false` for `Switch.System.Net.DontEnableSystemDefaultTlsVersions` causes your app to allow the operating system to choose the protocol.</span></span> <span data-ttu-id="b2998-223">Hodnota `true` způsobí, že vaše aplikace bude používat protokoly vydané .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="b2998-223">A value of `true` causes your app to use protocols picked by the .NET Framework.</span></span>

<span data-ttu-id="b2998-224">Pokud se vaše aplikace zaměřuje .NET Framework 4,7 nebo novější verze, přepne tento přepínač na výchozí hodnotu `false`.</span><span class="sxs-lookup"><span data-stu-id="b2998-224">If your app targets .NET Framework 4.7 or later versions, this switch defaults to `false`.</span></span> <span data-ttu-id="b2998-225">To je zabezpečené výchozí nastavení, které doporučujeme.</span><span class="sxs-lookup"><span data-stu-id="b2998-225">That's a secure default that we recommend.</span></span> <span data-ttu-id="b2998-226">Pokud je vaše aplikace spuštěná na .NET Framework 4,7 nebo novějších verzích, ale cílí na starší verzi, přepne přepínač na výchozí hodnotu `true`.</span><span class="sxs-lookup"><span data-stu-id="b2998-226">If your app runs on .NET Framework 4.7 or later versions, but targets an earlier version, the switch defaults to `true`.</span></span> <span data-ttu-id="b2998-227">V takovém případě byste ji měli explicitně nastavit na `false`.</span><span class="sxs-lookup"><span data-stu-id="b2998-227">In that case, you should explicitly set it to `false`.</span></span>

### <a name="switchsystemservicemodeldisableusingservicepointmanagersecurityprotocols"></a><span data-ttu-id="b2998-228">Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols</span><span class="sxs-lookup"><span data-stu-id="b2998-228">Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols</span></span>

<span data-ttu-id="b2998-229">Hodnota `false` pro `Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols` způsobí, že aplikace použije hodnotu definovanou v `ServicePointManager.SecurityProtocols` pro zabezpečení zprávy pomocí přihlašovacích údajů certifikátu.</span><span class="sxs-lookup"><span data-stu-id="b2998-229">A value of `false` for `Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols` causes your application to use the value defined in `ServicePointManager.SecurityProtocols` for message security using certificate credentials.</span></span> <span data-ttu-id="b2998-230">Hodnota `true` používá nejvyšší dostupný protokol, až do TLS 1.0.</span><span class="sxs-lookup"><span data-stu-id="b2998-230">A value of `true` uses the highest protocol available, up to TLS1.0</span></span>

<span data-ttu-id="b2998-231">Pro aplikace cílené na .NET Framework 4,7 a novějších verzích je tato hodnota standardně `false`.</span><span class="sxs-lookup"><span data-stu-id="b2998-231">For applications targeting .NET Framework 4.7 and later versions, this value defaults to `false`.</span></span> <span data-ttu-id="b2998-232">Pro aplikace cílené .NET Framework 4.6.2 a starší je tato hodnota standardně `true`.</span><span class="sxs-lookup"><span data-stu-id="b2998-232">For applications targeting .NET Framework 4.6.2 and earlier, this value defaults to `true`.</span></span>

### <a name="switchsystemservicemodeldontenablesystemdefaulttlsversions"></a><span data-ttu-id="b2998-233">Switch.System.ServiceModel.DontEnableSystemDefaultTlsVersions</span><span class="sxs-lookup"><span data-stu-id="b2998-233">Switch.System.ServiceModel.DontEnableSystemDefaultTlsVersions</span></span>

<span data-ttu-id="b2998-234">Hodnota `false` pro `Switch.System.ServiceModel.DontEnableSystemDefaultTlsVersions` nastaví výchozí nastavení tak, aby operační systém mohl zvolit protokol.</span><span class="sxs-lookup"><span data-stu-id="b2998-234">A value of `false` for `Switch.System.ServiceModel.DontEnableSystemDefaultTlsVersions` sets the default configuration to allow the operating system to choose the protocol.</span></span> <span data-ttu-id="b2998-235">Hodnota `true` nastaví výchozí pro nejvyšší dostupný protokol, až do TLS 1.2.</span><span class="sxs-lookup"><span data-stu-id="b2998-235">A value of `true` sets the default to the highest protocol available, up to TLS1.2.</span></span>

<span data-ttu-id="b2998-236">Pro aplikace cílené .NET Framework 4.7.1 a novějších verzí se tato hodnota standardně `false`.</span><span class="sxs-lookup"><span data-stu-id="b2998-236">For applications targeting .NET Framework 4.7.1 and later versions, this value defaults to `false`.</span></span> <span data-ttu-id="b2998-237">Pro aplikace cílené .NET Framework 4,7 a starší se tato hodnota standardně `true`.</span><span class="sxs-lookup"><span data-stu-id="b2998-237">For applications targeting .NET Framework 4.7 and earlier, this value defaults to `true`.</span></span>

<span data-ttu-id="b2998-238">Další informace o protokolech TLS najdete v tématu [zmírnění rizik: protokoly TLS](../migration-guide/mitigation-tls-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="b2998-238">For more information about TLS protocols, see [Mitigation: TLS Protocols](../migration-guide/mitigation-tls-protocols.md).</span></span> <span data-ttu-id="b2998-239">Další informace o přepínačích `AppContext` najdete v tématu [`<AppContextSwitchOverrides> Element`](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md).</span><span class="sxs-lookup"><span data-stu-id="b2998-239">For more information about `AppContext` switches, see [`<AppContextSwitchOverrides> Element`](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md).</span></span>

## <a name="configuring-security-via-the-windows-registry"></a><span data-ttu-id="b2998-240">Konfigurace zabezpečení prostřednictvím registru Windows</span><span class="sxs-lookup"><span data-stu-id="b2998-240">Configuring security via the Windows Registry</span></span>

> [!WARNING]
> <span data-ttu-id="b2998-241">Nastavení klíčů registru má vliv na všechny aplikace v systému.</span><span class="sxs-lookup"><span data-stu-id="b2998-241">Setting registry keys affects all applications on the system.</span></span> <span data-ttu-id="b2998-242">Tuto možnost použijte pouze v případě, že máte plnou kontrolu nad počítačem a můžete řídit změny v registru.</span><span class="sxs-lookup"><span data-stu-id="b2998-242">Use this option only if you are in full control of the machine and can control changes to the registry.</span></span>

<span data-ttu-id="b2998-243">Pokud je nastavení jednoho nebo obou `AppContext` přepínačů nemožností, můžete řídit protokoly zabezpečení, které vaše aplikace používá, s klíči registru Windows popsanými v této části.</span><span class="sxs-lookup"><span data-stu-id="b2998-243">If setting one or both `AppContext` switches isn't an option, you can control the security protocols that your app uses with the Windows Registry keys described in this section.</span></span> <span data-ttu-id="b2998-244">Pokud vaše aplikace běží .NET Framework 4.5.2 nebo staršími verzemi nebo pokud konfigurační soubor nemůžete upravovat, možná nebudete moct použít jeden nebo oba přepínače `AppContext`.</span><span class="sxs-lookup"><span data-stu-id="b2998-244">You might not be able to use one or both the `AppContext` switches if your app runs on .NET Framework 4.5.2 or earlier versions, or if you can't edit the configuration file.</span></span> <span data-ttu-id="b2998-245">Pokud chcete nakonfigurovat zabezpečení pomocí registru, nezadávejte v kódu hodnotu protokolu zabezpečení. Tím se přepíše nastavení registru.</span><span class="sxs-lookup"><span data-stu-id="b2998-245">If you want to configure security with the registry, don't specify a security protocol value in your code; doing so overrides the registry setting.</span></span>

<span data-ttu-id="b2998-246">Názvy klíčů registru se podobají názvům odpovídajících přepínačů `AppContext`, ale bez `DontEnable` s názvem.</span><span class="sxs-lookup"><span data-stu-id="b2998-246">The names of the registry keys are similar to the names of the corresponding `AppContext` switches but without a `DontEnable` prepended to the name.</span></span> <span data-ttu-id="b2998-247">Například přepínač `AppContext` `DontEnableSchUseStrongCrypto` je klíč registru s názvem [do schusestrongcrypto](#schusestrongcrypto).</span><span class="sxs-lookup"><span data-stu-id="b2998-247">For example, the `AppContext` switch `DontEnableSchUseStrongCrypto` is the registry key called [SchUseStrongCrypto](#schusestrongcrypto).</span></span>

<span data-ttu-id="b2998-248">Tyto klíče jsou k dispozici ve všech .NET Framework verzích, pro které je k dispozici nová oprava zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="b2998-248">These keys are available in all .NET Framework versions for which there's a recent security patch.</span></span> <span data-ttu-id="b2998-249">Viz [aktualizace zabezpečení](#security-updates).</span><span class="sxs-lookup"><span data-stu-id="b2998-249">See [Security updates](#security-updates).</span></span>

<span data-ttu-id="b2998-250">Všechny klíče registru popsané níže mají stejný účinek, ať už provádíte sítě HTTP (<xref:System.Net.ServicePointManager>) nebo TCP Sockets (<xref:System.Net.Security.SslStream>).</span><span class="sxs-lookup"><span data-stu-id="b2998-250">All of the registry keys described below have the same effect whether you're doing HTTP networking (<xref:System.Net.ServicePointManager>) or TCP sockets networking (<xref:System.Net.Security.SslStream>).</span></span>

### <a name="schusestrongcrypto"></a><span data-ttu-id="b2998-251">SchUseStrongCrypto</span><span class="sxs-lookup"><span data-stu-id="b2998-251">SchUseStrongCrypto</span></span>

<span data-ttu-id="b2998-252">Klíč registru `HKEY_LOCAL_MACHINE\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\<VERSION>: SchUseStrongCrypto` má hodnotu typu DWORD.</span><span class="sxs-lookup"><span data-stu-id="b2998-252">The `HKEY_LOCAL_MACHINE\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\<VERSION>: SchUseStrongCrypto` registry key has a value of type DWORD.</span></span> <span data-ttu-id="b2998-253">Hodnota 1 způsobí, že aplikace bude používat silné šifrování.</span><span class="sxs-lookup"><span data-stu-id="b2998-253">A value of 1 causes your app to use strong cryptography.</span></span> <span data-ttu-id="b2998-254">Silná kryptografie používá bezpečnější síťové protokoly (TLS 1,2, TLS 1,1 a TLS 1,0) a blokuje protokoly, které nejsou zabezpečené.</span><span class="sxs-lookup"><span data-stu-id="b2998-254">The strong cryptography uses more secure network protocols (TLS 1.2, TLS 1.1, and TLS 1.0) and blocks protocols that are not secure.</span></span> <span data-ttu-id="b2998-255">Hodnota 0 zakáže silnou kryptografii.</span><span class="sxs-lookup"><span data-stu-id="b2998-255">A value of 0 disables strong cryptography.</span></span> <span data-ttu-id="b2998-256">Další informace najdete v [příznaku SCH_USE_STRONG_CRYPTO](#the-sch_use_strong_crypto-flag).</span><span class="sxs-lookup"><span data-stu-id="b2998-256">For more information, see [The SCH_USE_STRONG_CRYPTO flag](#the-sch_use_strong_crypto-flag).</span></span>

<span data-ttu-id="b2998-257">Pokud se vaše aplikace zaměřuje .NET Framework 4,6 nebo novější verze, tento klíč se nastaví na hodnotu 1.</span><span class="sxs-lookup"><span data-stu-id="b2998-257">If your app targets .NET Framework 4.6 or later versions, this key defaults to a value of 1.</span></span> <span data-ttu-id="b2998-258">To je zabezpečené výchozí nastavení, které doporučujeme.</span><span class="sxs-lookup"><span data-stu-id="b2998-258">That's a secure default that we recommend.</span></span> <span data-ttu-id="b2998-259">Pokud je vaše aplikace spuštěná na .NET Framework 4,6, ale zaměřuje se na starší verzi, pak se výchozí klíč nastaví na 0.</span><span class="sxs-lookup"><span data-stu-id="b2998-259">If your app runs on .NET Framework 4.6, but targets an earlier version, then the key defaults to 0.</span></span> <span data-ttu-id="b2998-260">V takovém případě byste měli explicitně nastavit jeho hodnotu na 1.</span><span class="sxs-lookup"><span data-stu-id="b2998-260">In that case, you should explicitly set its value to 1.</span></span>

<span data-ttu-id="b2998-261">Tento klíč by měl mít hodnotu 0, pokud se potřebujete připojit ke starším službám, které nepodporují silné šifrování a nelze je upgradovat.</span><span class="sxs-lookup"><span data-stu-id="b2998-261">This key should only have a value of 0 if you need to connect to legacy services that don't support strong cryptography and can't be upgraded.</span></span>

### <a name="systemdefaulttlsversions"></a><span data-ttu-id="b2998-262">SystemDefaultTlsVersions</span><span class="sxs-lookup"><span data-stu-id="b2998-262">SystemDefaultTlsVersions</span></span>

<span data-ttu-id="b2998-263">Klíč registru `HKEY_LOCAL_MACHINE\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\<VERSION>: SystemDefaultTlsVersions` má hodnotu typu DWORD.</span><span class="sxs-lookup"><span data-stu-id="b2998-263">The `HKEY_LOCAL_MACHINE\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\<VERSION>: SystemDefaultTlsVersions` registry key has a value of type DWORD.</span></span> <span data-ttu-id="b2998-264">Hodnota 1 způsobí, že aplikace umožní operačnímu systému zvolit protokol.</span><span class="sxs-lookup"><span data-stu-id="b2998-264">A value of 1 causes your app to allow the operating system to choose the protocol.</span></span> <span data-ttu-id="b2998-265">Hodnota 0 způsobí, že vaše aplikace bude používat protokoly vydané .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="b2998-265">A value of 0 causes your app to use protocols picked by the .NET Framework.</span></span>

<span data-ttu-id="b2998-266">`<VERSION>` musí být v 4.0.30319 (pro .NET Framework 4 a vyšší) nebo v 2.0.50727 (pro .NET Framework 3,5).</span><span class="sxs-lookup"><span data-stu-id="b2998-266">`<VERSION>` must be v4.0.30319 (for .NET Framework 4 and above) or v2.0.50727 (for .NET Framework 3.5).</span></span>

<span data-ttu-id="b2998-267">Pokud se vaše aplikace zaměřuje .NET Framework 4,7 nebo novější verze, tento klíč se nastaví na hodnotu 1.</span><span class="sxs-lookup"><span data-stu-id="b2998-267">If your app targets .NET Framework 4.7 or later versions, this key defaults to a value of 1.</span></span> <span data-ttu-id="b2998-268">To je zabezpečené výchozí nastavení, které doporučujeme.</span><span class="sxs-lookup"><span data-stu-id="b2998-268">That's a secure default that we recommend.</span></span> <span data-ttu-id="b2998-269">Pokud vaše aplikace běží na .NET Framework 4,7 nebo novějších verzích, ale cílí na starší verzi, klíč se nastaví na hodnotu 0.</span><span class="sxs-lookup"><span data-stu-id="b2998-269">If your app runs on .NET Framework 4.7 or later versions, but targets an earlier version, the key defaults to 0.</span></span> <span data-ttu-id="b2998-270">V takovém případě byste měli explicitně nastavit jeho hodnotu na 1.</span><span class="sxs-lookup"><span data-stu-id="b2998-270">In that case, you should explicitly set its value to 1.</span></span>

<span data-ttu-id="b2998-271">Další informace najdete v tématu [kumulativní aktualizace pro Windows 10 verze 1511 a Windows Server 2016 Technical Preview 4:10. května 2016](https://support.microsoft.com/help/3156421/cumulative-update-for-windows-10-version-1511-and-windows-server-2016).</span><span class="sxs-lookup"><span data-stu-id="b2998-271">For more info, see [Cumulative Update for Windows 10 Version 1511 and Windows Server 2016 Technical Preview 4: May 10, 2016](https://support.microsoft.com/help/3156421/cumulative-update-for-windows-10-version-1511-and-windows-server-2016).</span></span>

<span data-ttu-id="b2998-272">Další informace o rozhraní .NET Framework 3.5.1 najdete v tématu [Podpora výchozích verzí systému TLS, které jsou součástí služby .NET Framework 3.5.1 v systému Windows 7 SP1 a Server 2008 R2 SP1](https://support.microsoft.com/help/3154518/support-for-tls-system-default-versions-included-in-the--net-framework).</span><span class="sxs-lookup"><span data-stu-id="b2998-272">For more information with .NET framework 3.5.1, see [Support for TLS System Default Versions included in .NET Framework 3.5.1 on Windows 7 SP1 and Server 2008 R2 SP1](https://support.microsoft.com/help/3154518/support-for-tls-system-default-versions-included-in-the--net-framework).</span></span>

<span data-ttu-id="b2998-273">Následující _. Soubor REG_ nastaví klíče registru a jejich varianty na jejich nejbezpečnější hodnoty:</span><span class="sxs-lookup"><span data-stu-id="b2998-273">The following _.REG_ file sets the registry keys and their variants to their most safe values:</span></span>

```text
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\.NETFramework\v2.0.50727]
"SystemDefaultTlsVersions"=dword:00000001
"SchUseStrongCrypto"=dword:00000001

[HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\.NETFramework\v4.0.30319]
"SystemDefaultTlsVersions"=dword:00000001
"SchUseStrongCrypto"=dword:00000001

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\v2.0.50727]
"SystemDefaultTlsVersions"=dword:00000001
"SchUseStrongCrypto"=dword:00000001

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\v4.0.30319]
"SystemDefaultTlsVersions"=dword:00000001
"SchUseStrongCrypto"=dword:00000001
```

## <a name="configuring-schannel-protocols-in-the-windows-registry"></a><span data-ttu-id="b2998-274">Konfigurace protokolů Schannel v registru Windows</span><span class="sxs-lookup"><span data-stu-id="b2998-274">Configuring Schannel protocols in the Windows Registry</span></span>

<span data-ttu-id="b2998-275">Registr můžete použít pro jemně odstupňovanou kontrolu nad protokoly, které klient nebo server aplikace vyjednává.</span><span class="sxs-lookup"><span data-stu-id="b2998-275">You can use the registry for fine-grained control over the protocols that your client and/or server app negotiates.</span></span> <span data-ttu-id="b2998-276">Sítě vaší aplikace přecházejí přes Schannel (což je jiný název [zabezpečeného kanálu](/windows/desktop/SecAuthN/secure-channel).</span><span class="sxs-lookup"><span data-stu-id="b2998-276">Your app's networking goes through Schannel (which is another name for [Secure Channel](/windows/desktop/SecAuthN/secure-channel).</span></span> <span data-ttu-id="b2998-277">Konfigurací `Schannel`můžete nakonfigurovat chování vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="b2998-277">By configuring `Schannel`, you can configure your app's behavior.</span></span>

<span data-ttu-id="b2998-278">Začněte klíčem registru `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols`.</span><span class="sxs-lookup"><span data-stu-id="b2998-278">Start with the `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols` registry key.</span></span> <span data-ttu-id="b2998-279">V tomto klíči můžete vytvořit všechny podklíče v sadě `SSL 2.0`, `SSL 3.0`, `TLS 1.0`, `TLS 1.1`a `TLS 1.2`.</span><span class="sxs-lookup"><span data-stu-id="b2998-279">Under that key you can create any subkeys in the set `SSL 2.0`, `SSL 3.0`, `TLS 1.0`, `TLS 1.1`, and `TLS 1.2`.</span></span> <span data-ttu-id="b2998-280">Pod každým z těchto podklíčů můžete vytvořit podklíče `Client` a/nebo `Server`.</span><span class="sxs-lookup"><span data-stu-id="b2998-280">Under each of those subkeys, you can create subkeys `Client` and/or `Server`.</span></span> <span data-ttu-id="b2998-281">V části `Client` a `Server`můžete vytvořit hodnoty DWORD `DisabledByDefault` (0 nebo 1) a `Enabled` (0 nebo 0xFFFFFFFF).</span><span class="sxs-lookup"><span data-stu-id="b2998-281">Under `Client` and `Server`, you can create DWORD values `DisabledByDefault` (0 or 1) and `Enabled` (0 or 0xFFFFFFFF).</span></span>

## <a name="the-sch_use_strong_crypto-flag"></a><span data-ttu-id="b2998-282">Příznak SCH_USE_STRONG_CRYPTO</span><span class="sxs-lookup"><span data-stu-id="b2998-282">The SCH_USE_STRONG_CRYPTO flag</span></span>

<span data-ttu-id="b2998-283">Pokud je povolená (ve výchozím nastavení je to `AppContext` přepínačem nebo v registru Windows), používá .NET Framework příznak `SCH_USE_STRONG_CRYPTO`, když vaše aplikace požaduje protokol zabezpečení TLS.</span><span class="sxs-lookup"><span data-stu-id="b2998-283">When it's enabled (by default, by an `AppContext` switch, or by the Windows Registry), the .NET Framework uses the `SCH_USE_STRONG_CRYPTO` flag when your app requests a TLS security protocol.</span></span> <span data-ttu-id="b2998-284">Příznak `SCH_USE_STRONG_CRYPTO` může být ve výchozím nastavení povolený s přepínačem `AppContext` nebo s registrem.</span><span class="sxs-lookup"><span data-stu-id="b2998-284">The `SCH_USE_STRONG_CRYPTO` flag can be enabled by default, with the `AppContext` switch, or with the Registry.</span></span> <span data-ttu-id="b2998-285">Operační systém přesměruje příznak, aby `Schannel`pokyn k zakázání známých slabých kryptografických algoritmů, šifrovacích sad a verzí protokolu TLS/SSL, které mohou být jinak povoleny pro lepší interoperabilitu.</span><span class="sxs-lookup"><span data-stu-id="b2998-285">The OS passes the flag to `Schannel`to instruct it to disable known weak cryptographic algorithms, cipher suites, and TLS/SSL protocol versions that may be otherwise enabled for better interoperability.</span></span> <span data-ttu-id="b2998-286">Další informace najdete v části .</span><span class="sxs-lookup"><span data-stu-id="b2998-286">For more information, see:</span></span>

- [<span data-ttu-id="b2998-287">Zabezpečený kanál</span><span class="sxs-lookup"><span data-stu-id="b2998-287">Secure Channel</span></span>](/windows/desktop/SecAuthN/secure-channel)
- [<span data-ttu-id="b2998-288">Struktura SCHANNEL_CRED</span><span class="sxs-lookup"><span data-stu-id="b2998-288">SCHANNEL_CRED structure</span></span>](/windows/win32/api/schannel/ns-schannel-schannel_cred)

<span data-ttu-id="b2998-289">Příznak `SCH_USE_STRONG_CRYPTO` je také předán do `Schannel`, pokud explicitně používáte `Tls` (TLS 1,0), `Tls11`nebo `Tls12` výčtové hodnoty <xref:System.Net.SecurityProtocolType> nebo <xref:System.Security.Authentication.SslProtocols>.</span><span class="sxs-lookup"><span data-stu-id="b2998-289">The `SCH_USE_STRONG_CRYPTO` flag is also passed to `Schannel` when you explicitly use the `Tls` (TLS 1.0), `Tls11`, or `Tls12` enumerated values of <xref:System.Net.SecurityProtocolType> or <xref:System.Security.Authentication.SslProtocols>.</span></span>

## <a name="security-updates"></a><span data-ttu-id="b2998-290">Aktualizace zabezpečení</span><span class="sxs-lookup"><span data-stu-id="b2998-290">Security updates</span></span>

<span data-ttu-id="b2998-291">Osvědčené postupy v tomto článku závisí na nedávno nainstalovaných aktualizacích zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="b2998-291">The best practices in this article depend on recent security updates being installed.</span></span> <span data-ttu-id="b2998-292">Tyto aktualizace zahrnují možnost používat pokročilé .NET Framework 4,7 a novější funkce.</span><span class="sxs-lookup"><span data-stu-id="b2998-292">These updates include the ability to use advanced .NET Framework 4.7 and later features.</span></span> <span data-ttu-id="b2998-293">Nedávné aktualizace zabezpečení jsou důležité, pokud je vaše aplikace spuštěná na .NET Framework 4,7 a novějších verzích (i když cílí na starší verzi).</span><span class="sxs-lookup"><span data-stu-id="b2998-293">Recent security updates are important if your app runs on .NET Framework 4.7 and later versions (even if it targets an earlier version).</span></span>

<span data-ttu-id="b2998-294">Chcete-li aktualizovat .NET Framework, aby operační systém mohl zvolit nejlepší verzi protokolu TLS, která se má použít, je nutné nainstalovat alespoň:</span><span class="sxs-lookup"><span data-stu-id="b2998-294">To update the .NET Framework to allow the operating system to choose the best version of TLS to use, you must install at least:</span></span>

- <span data-ttu-id="b2998-295">[.NET Framework srpna 2017 Preview k kumulativní kvalitě](https://devblogs.microsoft.com/dotnet/net-framework-august-2017-preview-of-quality-rollup/).</span><span class="sxs-lookup"><span data-stu-id="b2998-295">The [.NET Framework August 2017 Preview of Quality Rollup](https://devblogs.microsoft.com/dotnet/net-framework-august-2017-preview-of-quality-rollup/).</span></span>
- <span data-ttu-id="b2998-296">**Nebo** [.NET Framework zabezpečení a kumulativní kvality od září 2017](https://devblogs.microsoft.com/dotnet/net-framework-september-2017-security-and-quality-rollup/).</span><span class="sxs-lookup"><span data-stu-id="b2998-296">**Or** the [.NET Framework September 2017 Security and Quality Rollup](https://devblogs.microsoft.com/dotnet/net-framework-september-2017-security-and-quality-rollup/).</span></span>

<span data-ttu-id="b2998-297">Viz také:</span><span class="sxs-lookup"><span data-stu-id="b2998-297">See also:</span></span>

- [<span data-ttu-id="b2998-298">Verze a závislosti rozhraní .NET Framework</span><span class="sxs-lookup"><span data-stu-id="b2998-298">.NET Framework Versions and Dependencies</span></span>](../migration-guide/versions-and-dependencies.md)
- <span data-ttu-id="b2998-299">[Postupy: určení, které verze .NET Framework jsou nainstalovány](../migration-guide/how-to-determine-which-versions-are-installed.md).</span><span class="sxs-lookup"><span data-stu-id="b2998-299">[How to: Determine Which .NET Framework Versions Are Installed](../migration-guide/how-to-determine-which-versions-are-installed.md).</span></span>

## <a name="support-for-tls-12"></a><span data-ttu-id="b2998-300">Podpora protokolu TLS 1.2</span><span class="sxs-lookup"><span data-stu-id="b2998-300">Support for TLS 1.2</span></span>

<span data-ttu-id="b2998-301">Aby mohla aplikace vyjednávat TLS 1,2, musí operační systém a .NET Framework verze podporovat protokol TLS 1,2.</span><span class="sxs-lookup"><span data-stu-id="b2998-301">For your app to negotiate TLS 1.2, the OS and the .NET Framework version both need to support TLS 1.2.</span></span>

<span data-ttu-id="b2998-302">**Požadavky na operační systém pro podporu TLS 1,2**</span><span class="sxs-lookup"><span data-stu-id="b2998-302">**Operating system requirements to support TLS 1.2**</span></span>

<span data-ttu-id="b2998-303">Pokud chcete povolit nebo znovu povolit TLS 1,2 nebo TLS 1,1 v systému, který je podporuje, přečtěte si téma [nastavení registru TLS (Transport Layer Security)](/windows-server/security/tls/tls-registry-settings).</span><span class="sxs-lookup"><span data-stu-id="b2998-303">To enable or re-enable TLS 1.2 and/or TLS 1.1 on a system that supports them, see [Transport Layer Security (TLS) registry settings](/windows-server/security/tls/tls-registry-settings).</span></span>

| <span data-ttu-id="b2998-304">**OS**</span><span class="sxs-lookup"><span data-stu-id="b2998-304">**OS**</span></span> | <span data-ttu-id="b2998-305">**Podpora TLS 1,2**</span><span class="sxs-lookup"><span data-stu-id="b2998-305">**TLS 1.2 support**</span></span> |
| --- | --- |
| <span data-ttu-id="b2998-306">Windows 10</span><span class="sxs-lookup"><span data-stu-id="b2998-306">Windows 10</span></span><br><span data-ttu-id="b2998-307">Windows Server 2016</span><span class="sxs-lookup"><span data-stu-id="b2998-307">Windows Server 2016</span></span> | <span data-ttu-id="b2998-308">Podporované a ve výchozím nastavení povolená.</span><span class="sxs-lookup"><span data-stu-id="b2998-308">Supported, and enabled by default.</span></span> |
| <span data-ttu-id="b2998-309">Windows 8.1</span><span class="sxs-lookup"><span data-stu-id="b2998-309">Windows 8.1</span></span><br><span data-ttu-id="b2998-310">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="b2998-310">Windows Server 2012 R2</span></span> | <span data-ttu-id="b2998-311">Podporované a ve výchozím nastavení povolená.</span><span class="sxs-lookup"><span data-stu-id="b2998-311">Supported, and enabled by default.</span></span> |
| <span data-ttu-id="b2998-312">Windows 8.0</span><span class="sxs-lookup"><span data-stu-id="b2998-312">Windows 8.0</span></span><br><span data-ttu-id="b2998-313">Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="b2998-313">Windows Server 2012</span></span> | <span data-ttu-id="b2998-314">Podporované a ve výchozím nastavení povolená.</span><span class="sxs-lookup"><span data-stu-id="b2998-314">Supported, and enabled by default.</span></span> |
| <span data-ttu-id="b2998-315">Windows 7 SP1</span><span class="sxs-lookup"><span data-stu-id="b2998-315">Windows 7 SP1</span></span><br><span data-ttu-id="b2998-316">Windows Server 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="b2998-316">Windows Server 2008 R2 SP1</span></span> | <span data-ttu-id="b2998-317">Podporované, ale není ve výchozím nastavení povolená.</span><span class="sxs-lookup"><span data-stu-id="b2998-317">Supported, but not enabled by default.</span></span> <span data-ttu-id="b2998-318">Podrobnosti o tom, jak povolit protokol TLS 1,2, najdete na webové stránce [nastavení registru TLS (Transport Layer Security)](/windows-server/security/tls/tls-registry-settings) .</span><span class="sxs-lookup"><span data-stu-id="b2998-318">See the [Transport Layer Security (TLS) registry settings](/windows-server/security/tls/tls-registry-settings) web page for details on how to enable TLS 1.2.</span></span> |
| <span data-ttu-id="b2998-319">Windows Server 2008</span><span class="sxs-lookup"><span data-stu-id="b2998-319">Windows Server 2008</span></span> | <span data-ttu-id="b2998-320">Podpora TLS 1,2 a TLS 1,1 vyžaduje aktualizaci.</span><span class="sxs-lookup"><span data-stu-id="b2998-320">Support for TLS 1.2 and TLS 1.1 requires an update.</span></span> <span data-ttu-id="b2998-321">[V článku aktualizace můžete přidat podporu pro tls 1,1 a tls 1,2 ve Windows serveru 2008 SP2](https://support.microsoft.com/help/4019276/update-to-add-support-for-tls-1-1-and-tls-1-2-in-windows-server-2008-s).</span><span class="sxs-lookup"><span data-stu-id="b2998-321">See [Update to add support for TLS 1.1 and TLS 1.2 in Windows Server 2008 SP2](https://support.microsoft.com/help/4019276/update-to-add-support-for-tls-1-1-and-tls-1-2-in-windows-server-2008-s).</span></span> |
| <span data-ttu-id="b2998-322">Windows Vista</span><span class="sxs-lookup"><span data-stu-id="b2998-322">Windows Vista</span></span> | <span data-ttu-id="b2998-323">Není podporováno.</span><span class="sxs-lookup"><span data-stu-id="b2998-323">Not supported.</span></span> |

<span data-ttu-id="b2998-324">Informace o tom, které protokoly TLS/SSL jsou ve výchozím nastavení povolené v každé verzi Windows, najdete v tématu [protokoly TLS/SSL (Schannel SSP)](/windows/desktop/SecAuthN/protocols-in-tls-ssl--schannel-ssp-).</span><span class="sxs-lookup"><span data-stu-id="b2998-324">For information about which TLS/SSL protocols are enabled by default on each version of Windows, see [Protocols in TLS/SSL (Schannel SSP)](/windows/desktop/SecAuthN/protocols-in-tls-ssl--schannel-ssp-).</span></span>

<span data-ttu-id="b2998-325">**Požadavky na podporu TLS 1,2 s .NET Framework 3,5**</span><span class="sxs-lookup"><span data-stu-id="b2998-325">**Requirements to support TLS 1.2 with .NET Framework 3.5**</span></span>

<span data-ttu-id="b2998-326">V této tabulce je uvedena aktualizace operačního systému, kterou budete potřebovat pro podporu TLS 1,2 s .NET Framework 3,5.</span><span class="sxs-lookup"><span data-stu-id="b2998-326">This table shows the OS update you'll need to support TLS 1.2 with .NET Framework 3.5.</span></span> <span data-ttu-id="b2998-327">Doporučujeme použít všechny aktualizace operačního systému.</span><span class="sxs-lookup"><span data-stu-id="b2998-327">We recommend you apply all OS updates.</span></span>

| <span data-ttu-id="b2998-328">**OS**</span><span class="sxs-lookup"><span data-stu-id="b2998-328">**OS**</span></span> | <span data-ttu-id="b2998-329">**Minimální aktualizace nutná pro podporu TLS 1,2 s .NET Framework 3,5**</span><span class="sxs-lookup"><span data-stu-id="b2998-329">**Minimum update needed to support TLS 1.2 with .NET Framework 3.5**</span></span> |
| --- | --- |
| <span data-ttu-id="b2998-330">Windows 10</span><span class="sxs-lookup"><span data-stu-id="b2998-330">Windows 10</span></span><br><span data-ttu-id="b2998-331">Windows Server 2016</span><span class="sxs-lookup"><span data-stu-id="b2998-331">Windows Server 2016</span></span> | [<span data-ttu-id="b2998-332">Kumulativní aktualizace pro Windows 10 verze 1511 a Windows Server 2016 Technical Preview 4:10. května 2016</span><span class="sxs-lookup"><span data-stu-id="b2998-332">Cumulative Update for Windows 10 Version 1511 and Windows Server 2016 Technical Preview 4: May 10, 2016</span></span>](https://support.microsoft.com/help/3156421/cumulative-update-for-windows-10-version-1511-and-windows-server-2016) |
| <span data-ttu-id="b2998-333">Windows 8.1</span><span class="sxs-lookup"><span data-stu-id="b2998-333">Windows 8.1</span></span><br><span data-ttu-id="b2998-334">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="b2998-334">Windows Server 2012 R2</span></span> | [<span data-ttu-id="b2998-335">Podpora výchozích verzí systému TLS obsažených v .NET Framework 3,5 v Windows 8.1 a Windows Serveru 2012 R2</span><span class="sxs-lookup"><span data-stu-id="b2998-335">Support for TLS System Default Versions included in the .NET Framework 3.5 on Windows 8.1 and Windows Server 2012 R2</span></span>](https://support.microsoft.com/help/3154520/support-for-tls-system-default-versions-included-in-the--net-framework) |
| <span data-ttu-id="b2998-336">Windows 8.0</span><span class="sxs-lookup"><span data-stu-id="b2998-336">Windows 8.0</span></span><br><span data-ttu-id="b2998-337">Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="b2998-337">Windows Server 2012</span></span> | [<span data-ttu-id="b2998-338">Podpora výchozích verzí systému TLS obsažených v .NET Framework 3,5 ve Windows Serveru 2012</span><span class="sxs-lookup"><span data-stu-id="b2998-338">Support for TLS System Default Versions included in the .NET Framework 3.5 on Windows Server 2012</span></span>](https://support.microsoft.com/help/3154519/support-for-tls-system-default-versions-included-in-the--net-framework) |
| <span data-ttu-id="b2998-339">Windows 7 SP1</span><span class="sxs-lookup"><span data-stu-id="b2998-339">Windows 7 SP1</span></span><br><span data-ttu-id="b2998-340">Windows Server 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="b2998-340">Windows Server 2008 R2 SP1</span></span> | [<span data-ttu-id="b2998-341">Podpora výchozích verzí systému TLS obsažených ve službě .NET Framework 3.5.1 v systému Windows 7 SP1 a Server 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="b2998-341">Support for TLS System Default Versions included in the .NET Framework 3.5.1 on Windows 7 SP1 and Server 2008 R2 SP1</span></span>](https://support.microsoft.com/help/3154518/support-for-tls-system-default-versions-included-in-the--net-framework) |
| <span data-ttu-id="b2998-342">Windows Server 2008</span><span class="sxs-lookup"><span data-stu-id="b2998-342">Windows Server 2008</span></span> | [<span data-ttu-id="b2998-343">Podpora výchozích verzí systému TLS obsažených v .NET Framework 2,0 SP2 v systému Windows Vista SP2 a Server 2008 SP2</span><span class="sxs-lookup"><span data-stu-id="b2998-343">Support for TLS System Default Versions included in the .NET Framework 2.0 SP2 on Windows Vista SP2 and Server 2008 SP2</span></span>](https://support.microsoft.com/help/3154517/support-for-tls-system-default-versions-included-in-the--net-framework) |
| <span data-ttu-id="b2998-344">Windows Vista</span><span class="sxs-lookup"><span data-stu-id="b2998-344">Windows Vista</span></span> | <span data-ttu-id="b2998-345">Není podporováno</span><span class="sxs-lookup"><span data-stu-id="b2998-345">Not supported</span></span> |

## <a name="azure-cloud-services"></a><span data-ttu-id="b2998-346">Azure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="b2998-346">Azure Cloud Services</span></span>

<span data-ttu-id="b2998-347">Pokud používáte webové a pracovní role [Azure Cloud Services](https://azure.microsoft.com/services/cloud-services/) k hostování a spuštění vaší aplikace, existuje několik důležitých informací, které je potřeba vzít v úvahu při podpoře TLS 1,2.</span><span class="sxs-lookup"><span data-stu-id="b2998-347">If you are using [Azure Cloud Services](https://azure.microsoft.com/services/cloud-services/) Web and Worker roles to host and run your application, there are some considerations that you need to take into account to support TLS 1.2.</span></span>

### <a name="net-framework-47-is-not-installed-on-azure-guest-os-by-default"></a><span data-ttu-id="b2998-348">Ve výchozím nastavení není v hostovaném operačním systému Azure nainstalovaná .NET Framework 4,7.</span><span class="sxs-lookup"><span data-stu-id="b2998-348">.NET Framework 4.7 is not installed on Azure Guest OS by default</span></span>

<span data-ttu-id="b2998-349">Nejnovější verze nainstalovaná v nejnovější verzi služby hostovaného operačního systému Azure v řadě 5 (Windows Server 2016) je 4.6.2.</span><span class="sxs-lookup"><span data-stu-id="b2998-349">The latest version installed in the latest Azure Guest OS Family 5 release (Windows Server 2016) is 4.6.2.</span></span> <span data-ttu-id="b2998-350">Pokud chcete zjistit, které verze .NET Framework jsou nainstalované na každém hostovaném operačním systému Azure, přečtěte si část vydaných verzí [hostovaného operačního systému Azure a kompatibility SDK](https://docs.microsoft.com/azure/cloud-services/cloud-services-guestos-update-matrix).</span><span class="sxs-lookup"><span data-stu-id="b2998-350">To see which versions of .NET Framework are installed on each Azure Guest OS, see the [Azure Guest OS releases and SDK compatibility matrix](https://docs.microsoft.com/azure/cloud-services/cloud-services-guestos-update-matrix).</span></span>

<span data-ttu-id="b2998-351">Pokud se vaše aplikace zaměřuje na verzi .NET Framework, která není dostupná na verzi hostovaného operačního systému Azure, je potřeba ji nainstalovat sami.</span><span class="sxs-lookup"><span data-stu-id="b2998-351">If your app targets a .NET Framework version that is not available on the Azure Guest OS version, then you need to install it yourself.</span></span> <span data-ttu-id="b2998-352">Viz [instalace rozhraní .NET do rolí cloudové služby Azure](https://docs.microsoft.com/azure/cloud-services/cloud-services-dotnet-install-dotnet).</span><span class="sxs-lookup"><span data-stu-id="b2998-352">See [Install .NET on Azure Cloud Service Roles](https://docs.microsoft.com/azure/cloud-services/cloud-services-dotnet-install-dotnet).</span></span> <span data-ttu-id="b2998-353">Pokud instalace rozhraní vyžaduje restart, role služby se můžou taky restartovat před vstupem do stavu připraveno.</span><span class="sxs-lookup"><span data-stu-id="b2998-353">If the framework installation requires a restart, the service roles might also restart before entering the Ready state.</span></span>

### <a name="azure-guest-os-registry-settings"></a><span data-ttu-id="b2998-354">Nastavení registru hostovaného operačního systému Azure</span><span class="sxs-lookup"><span data-stu-id="b2998-354">Azure Guest OS registry settings</span></span>

<span data-ttu-id="b2998-355">Bitová kopie řady operačních systémů Azure hosta 5 pro [azure Cloud Services](https://azure.microsoft.com/services/cloud-services/) již má klíč registru `SchUseStrongCrypto` nastaven na hodnotu 1.</span><span class="sxs-lookup"><span data-stu-id="b2998-355">The Azure Guest OS Family 5 image for [Azure Cloud Services](https://azure.microsoft.com/services/cloud-services/) already has the `SchUseStrongCrypto` registry key set to a value of 1.</span></span> <span data-ttu-id="b2998-356">Další informace najdete v tématu [do schusestrongcrypto](#schusestrongcrypto).</span><span class="sxs-lookup"><span data-stu-id="b2998-356">For more information, see [SchUseStrongCrypto](#schusestrongcrypto).</span></span>

<span data-ttu-id="b2998-357">Nastavte klíč registru [SystemDefaultTlsVersions](#systemdefaulttlsversions) na hodnotu 1.</span><span class="sxs-lookup"><span data-stu-id="b2998-357">Set the [SystemDefaultTlsVersions](#systemdefaulttlsversions) registry key to 1.</span></span> <span data-ttu-id="b2998-358">Viz téma [Konfigurace zabezpečení pomocí registru systému Windows](#configuring-security-via-the-windows-registry).</span><span class="sxs-lookup"><span data-stu-id="b2998-358">See [Configuring security via the Windows Registry](#configuring-security-via-the-windows-registry).</span></span>
