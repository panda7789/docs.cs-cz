---
title: Zabezpečení zpráv pomocí zabezpečení přenosu
ms.date: 03/30/2017
ms.assetid: 9029771a-097e-448a-a13a-55d2878330b8
ms.openlocfilehash: 7d160f6f0d1d29e34ca3365501b86d1a736de67b
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/09/2020
ms.locfileid: "84589939"
---
# <a name="securing-messages-using-transport-security"></a><span data-ttu-id="44bb1-102">Zabezpečení zpráv pomocí zabezpečení přenosu</span><span class="sxs-lookup"><span data-stu-id="44bb1-102">Securing Messages Using Transport Security</span></span>
<span data-ttu-id="44bb1-103">Tato část popisuje zabezpečení přenosu služby Řízení front zpráv (MSMQ), které můžete použít k zabezpečení zpráv odesílaných do fronty.</span><span class="sxs-lookup"><span data-stu-id="44bb1-103">This section discusses Message Queuing (MSMQ) transport security that you can use to secure messages sent to a queue.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="44bb1-104">Než si přečtete toto téma, doporučujeme, abyste si přečetli [koncepty zabezpečení](security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="44bb1-104">Before reading through this topic, it is recommended that you read [Security Concepts](security-concepts.md).</span></span>  
  
 <span data-ttu-id="44bb1-105">Následující ilustrace poskytuje koncepční model komunikace ve frontě pomocí Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="44bb1-105">The following illustration provides a conceptual model of queued communication using Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="44bb1-106">Tato ilustrace a terminologie slouží k vysvětlení konceptů zabezpečení přenosu.</span><span class="sxs-lookup"><span data-stu-id="44bb1-106">This illustration and terminology is used to explain transport security concepts.</span></span>  
  
 <span data-ttu-id="44bb1-107">![Diagram aplikace ve frontě](media/distributed-queue-figure.jpg "Distribuované – fronta – obrázek")</span><span class="sxs-lookup"><span data-stu-id="44bb1-107">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="44bb1-108">Při posílání zpráv ve frontě pomocí WCF s <xref:System.ServiceModel.NetMsmqBinding> , je zpráva WCF připojená jako tělo zprávy služby MSMQ.</span><span class="sxs-lookup"><span data-stu-id="44bb1-108">When sending queued messages using WCF with <xref:System.ServiceModel.NetMsmqBinding>, the WCF message is attached as a body of the MSMQ message.</span></span> <span data-ttu-id="44bb1-109">Zabezpečení přenosu zabezpečuje celou zprávu služby MSMQ (záhlaví zpráv služby MSMQ nebo vlastnosti a tělo zprávy).</span><span class="sxs-lookup"><span data-stu-id="44bb1-109">Transport security secures the entire MSMQ message (MSMQ message headers or properties and the message body).</span></span> <span data-ttu-id="44bb1-110">Vzhledem k tomu, že se jedná o tělo zprávy služby MSMQ, používá zabezpečení přenosu také zprávu WCF.</span><span class="sxs-lookup"><span data-stu-id="44bb1-110">Because it is the body of the MSMQ message, using transport security also secures the WCF message.</span></span>  
  
 <span data-ttu-id="44bb1-111">Klíčovým konceptem zabezpečení přenosu je, že klient musí splňovat požadavky na zabezpečení a získat tak zprávu do cílové fronty.</span><span class="sxs-lookup"><span data-stu-id="44bb1-111">The key concept behind transport security is that the client has to meet security requirements to get the message to the target queue.</span></span> <span data-ttu-id="44bb1-112">To je na rozdíl od zabezpečení zpráv, kde je zpráva zabezpečená pro aplikaci, která zprávu přijímá.</span><span class="sxs-lookup"><span data-stu-id="44bb1-112">This is unlike Message security, where the message is secured for the application that receives the message.</span></span>  
  
 <span data-ttu-id="44bb1-113">Zabezpečení přenosu pomocí <xref:System.ServiceModel.NetMsmqBinding> a <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> ovlivňuje způsob, jakým jsou zprávy MSMQ zabezpečeny během přenosu mezi frontou přenosů a cílovou frontou, kde zabezpečení implikuje:</span><span class="sxs-lookup"><span data-stu-id="44bb1-113">Transport security using <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> impacts how MSMQ messages are secured in-transit between the transmission queue and the target queue where secured implies:</span></span>  
  
- <span data-ttu-id="44bb1-114">Podpis zprávy, aby se zajistilo, že není úmyslně poškozen.</span><span class="sxs-lookup"><span data-stu-id="44bb1-114">Signing the message to ensure it is not tampered with.</span></span>  
  
- <span data-ttu-id="44bb1-115">Šifrování zprávy, aby se zajistilo, že se nedá zobrazit ani úmyslně neoprávněně.</span><span class="sxs-lookup"><span data-stu-id="44bb1-115">Encrypting the message to ensure that it cannot be seen or tampered with.</span></span> <span data-ttu-id="44bb1-116">Toto doporučení je doporučené, ale nepovinné.</span><span class="sxs-lookup"><span data-stu-id="44bb1-116">This is recommended but optional.</span></span>  
  
- <span data-ttu-id="44bb1-117">Cílový správce fronty, který identifikuje odesílatele zprávy pro Neodmítnutí.</span><span class="sxs-lookup"><span data-stu-id="44bb1-117">The target queue manager that identifies the sender of the message for non-repudiation.</span></span>  
  
 <span data-ttu-id="44bb1-118">V případě služby MSMQ, která nezávisí na ověřování, má cílová fronta seznam řízení přístupu (ACL), který kontroluje, zda má klient oprávnění Odeslat zprávu do cílové fronty.</span><span class="sxs-lookup"><span data-stu-id="44bb1-118">In MSMQ, independent of authentication, the target queue has an access control list (ACL) to check whether the client has permission to send the message to the target queue.</span></span> <span data-ttu-id="44bb1-119">U přijímající aplikace je také zaškrtnuto oprávnění k přijetí zprávy z cílové fronty.</span><span class="sxs-lookup"><span data-stu-id="44bb1-119">The receiving application is also checked for permission to receive the message from the target queue.</span></span>  
  
## <a name="wcf-msmq-transport-security-properties"></a><span data-ttu-id="44bb1-120">WCF – vlastnosti zabezpečení přenosu MSMQ</span><span class="sxs-lookup"><span data-stu-id="44bb1-120">WCF MSMQ Transport Security Properties</span></span>  
 <span data-ttu-id="44bb1-121">Služba MSMQ používá pro ověřování zabezpečení systému Windows.</span><span class="sxs-lookup"><span data-stu-id="44bb1-121">MSMQ uses Windows security for authentication.</span></span> <span data-ttu-id="44bb1-122">Pomocí identifikátoru zabezpečení systému Windows (SID) identifikuje klienta a při ověřování klienta používá adresářovou službu Active Directory jako certifikační autoritu.</span><span class="sxs-lookup"><span data-stu-id="44bb1-122">It uses the Windows security identifier (SID) to identify the client and uses Active Directory directory service as the certificate authority when authenticating the client.</span></span> <span data-ttu-id="44bb1-123">K tomu je potřeba nainstalovat službu MSMQ s integrací služby Active Directory.</span><span class="sxs-lookup"><span data-stu-id="44bb1-123">This requires MSMQ to be installed with Active Directory integration.</span></span> <span data-ttu-id="44bb1-124">Vzhledem k tomu, že se k identifikaci klienta používá identifikátor SID domény Windows, je tato možnost zabezpečení smysluplná jenom v případě, že je klient i služba součástí stejné domény systému Windows.</span><span class="sxs-lookup"><span data-stu-id="44bb1-124">Because the Windows domain SID is used to identify the client, this security option is only meaningful when both the client and service are part of the same Windows domain.</span></span>  
  
 <span data-ttu-id="44bb1-125">Služba MSMQ taky umožňuje připojit certifikát se zprávou, která není zaregistrovaná ve službě Active Directory.</span><span class="sxs-lookup"><span data-stu-id="44bb1-125">MSMQ also provides the ability to attach a certificate with the message that is not registered with Active Directory.</span></span> <span data-ttu-id="44bb1-126">V takovém případě zajišťuje, aby byla zpráva podepsána pomocí připojeného certifikátu.</span><span class="sxs-lookup"><span data-stu-id="44bb1-126">In this case, it ensures that the message was signed using the attached certificate.</span></span>  
  
 <span data-ttu-id="44bb1-127">Služba WCF poskytuje obě tyto možnosti jako součást zabezpečení přenosu ve službě MSMQ a jsou klíčem pro zabezpečení přenosu.</span><span class="sxs-lookup"><span data-stu-id="44bb1-127">WCF provides both these options as part of MSMQ transport security and they are the key pivot for transport security.</span></span>  
  
 <span data-ttu-id="44bb1-128">Ve výchozím nastavení je zabezpečení přenosu zapnuté.</span><span class="sxs-lookup"><span data-stu-id="44bb1-128">By default, transport security is turned on.</span></span>  
  
 <span data-ttu-id="44bb1-129">Následující části obsahují podrobné informace o vlastnostech transportního zabezpečení, které jsou součástí sady <xref:System.ServiceModel.NetMsmqBinding> a <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> .</span><span class="sxs-lookup"><span data-stu-id="44bb1-129">Given these basics, the following sections detail transport security properties bundled with <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span>  
  
#### <a name="msmq-authentication-mode"></a><span data-ttu-id="44bb1-130">Režim ověřování MSMQ</span><span class="sxs-lookup"><span data-stu-id="44bb1-130">MSMQ Authentication Mode</span></span>  
 <span data-ttu-id="44bb1-131"><xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A>Určí, zda se má zabezpečit zpráva pomocí zabezpečení domény systému Windows nebo externího zabezpečení založeného na certifikátech.</span><span class="sxs-lookup"><span data-stu-id="44bb1-131">The <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> dictates whether to use the Windows domain security or an external certificate-based security to secure the message.</span></span> <span data-ttu-id="44bb1-132">V obou režimech ověřování používá transportní kanál zařazený do fronty WCF `CertificateValidationMode` zadaný v konfiguraci služby.</span><span class="sxs-lookup"><span data-stu-id="44bb1-132">In both authentication modes, the WCF queued transport channel uses the `CertificateValidationMode` specified in the service configuration.</span></span> <span data-ttu-id="44bb1-133">Režim ověřování certifikátu určuje mechanismus, který slouží ke kontrole platnosti certifikátu.</span><span class="sxs-lookup"><span data-stu-id="44bb1-133">The certificate validation mode specifies the mechanism used to check the validity of the certificate.</span></span>  
  
 <span data-ttu-id="44bb1-134">Když je zapnuté zabezpečení přenosu, výchozí nastavení je <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> .</span><span class="sxs-lookup"><span data-stu-id="44bb1-134">When transport security is turned on, the default setting is <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="windows-domain-authentication-mode"></a><span data-ttu-id="44bb1-135">Režim ověřování domény systému Windows</span><span class="sxs-lookup"><span data-stu-id="44bb1-135">Windows Domain Authentication Mode</span></span>  
 <span data-ttu-id="44bb1-136">Možnost použití zabezpečení systému Windows vyžaduje integraci služby Active Directory.</span><span class="sxs-lookup"><span data-stu-id="44bb1-136">The choice of using Windows security requires Active Directory integration.</span></span> <span data-ttu-id="44bb1-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>je výchozím režimem zabezpečení přenosu.</span><span class="sxs-lookup"><span data-stu-id="44bb1-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> is the default transport security mode.</span></span> <span data-ttu-id="44bb1-138">Pokud je tato nastavení nastavena, kanál WCF připojí ke zprávě služby MSMQ identifikátor Windows SID a použije svůj vnitřní certifikát získaný ze služby Active Directory.</span><span class="sxs-lookup"><span data-stu-id="44bb1-138">When this is set, the WCF channel attaches the Windows SID to the MSMQ message and uses its internal certificate obtained from Active Directory.</span></span> <span data-ttu-id="44bb1-139">Služba MSMQ používá tento interní certifikát k zabezpečení zprávy.</span><span class="sxs-lookup"><span data-stu-id="44bb1-139">MSMQ uses this internal certificate to secure the message.</span></span> <span data-ttu-id="44bb1-140">Příjmový správce fronty používá službu Active Directory k vyhledávání a hledání odpovídajícího certifikátu pro ověření klienta a kontroluje, zda identifikátor SID odpovídá také tomuto klientovi.</span><span class="sxs-lookup"><span data-stu-id="44bb1-140">The receiving queue manager uses Active Directory to search and find a matching certificate to authenticate the client and checks that the SID also matches that of the client.</span></span> <span data-ttu-id="44bb1-141">Tento krok ověřování se spustí, pokud je certifikát, který je buď interně generovaný v případě `WindowsDomain` režimu ověřování nebo externě generovaný v případě `Certificate` režimu ověřování, připojen ke zprávě, i když cílová fronta není označena jako vyžadování ověřování.</span><span class="sxs-lookup"><span data-stu-id="44bb1-141">This authentication step is executed if a certificate, either internally generated in the case of `WindowsDomain` authentication mode or externally generated in the case of `Certificate` authentication mode, is attached to the message even if the target queue is not marked as requiring authentication.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="44bb1-142">Při vytváření fronty můžete označit frontu jako ověřenou frontu a označit tak, že fronta vyžaduje ověření klienta odesílajícího zprávy do fronty.</span><span class="sxs-lookup"><span data-stu-id="44bb1-142">When creating a queue, you can mark the queue as an authenticated queue to indicate that the queue requires authentication of the client sending messages to the queue.</span></span> <span data-ttu-id="44bb1-143">Tím se zajistí, že ve frontě nebudou přijaty žádné neověřené zprávy.</span><span class="sxs-lookup"><span data-stu-id="44bb1-143">This ensures that no unauthenticated messages are accepted in the queue.</span></span>  
  
 <span data-ttu-id="44bb1-144">Identifikátor SID připojený ke zprávě se také používá ke kontrole seznamu ACL cílové fronty, aby bylo zajištěno, že klient bude mít oprávnění odesílat zprávy do fronty.</span><span class="sxs-lookup"><span data-stu-id="44bb1-144">The SID attached with the message is also used to check against the target queue's ACL to ensure that the client has the authority to send messages to the queue.</span></span>  
  
#### <a name="certificate-authentication-mode"></a><span data-ttu-id="44bb1-145">Režim ověřování certifikátu</span><span class="sxs-lookup"><span data-stu-id="44bb1-145">Certificate Authentication Mode</span></span>  
 <span data-ttu-id="44bb1-146">Volba použití režimu ověřování certifikátů nevyžaduje integraci služby Active Directory.</span><span class="sxs-lookup"><span data-stu-id="44bb1-146">The choice of using certificate authentication mode does not require Active Directory integration.</span></span> <span data-ttu-id="44bb1-147">V některých případech, například když je služba MSMQ nainstalována v režimu pracovní skupiny (bez integrace služby Active Directory) nebo při odesílání zpráv do fronty pomocí protokolu přenosu protokolu SOAP Reliable Messaging Protocol (SRMP), <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> funguje pouze funkce.</span><span class="sxs-lookup"><span data-stu-id="44bb1-147">In fact, in some cases, such as when MSMQ is installed in workgroup mode (without Active Directory integration) or when using the SOAP Reliable Messaging Protocol (SRMP) transfer protocol to send messages to the queue, only <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> works.</span></span>  
  
 <span data-ttu-id="44bb1-148">Při odesílání zprávy WCF pomocí <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> kanálu WCF nepřipojí ke zprávě služby MSMQ identifikátor zabezpečení systému Windows.</span><span class="sxs-lookup"><span data-stu-id="44bb1-148">When sending a WCF message with <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, the WCF channel does not attach a Windows SID to the MSMQ message.</span></span> <span data-ttu-id="44bb1-149">V takovém případě musí seznam ACL cílové fronty umožňovat `Anonymous` uživateli přístup k odeslání do fronty.</span><span class="sxs-lookup"><span data-stu-id="44bb1-149">As such, the target queue ACL must allow for `Anonymous` user access to send to the queue.</span></span> <span data-ttu-id="44bb1-150">Správce přijímací fronty ověří, zda byla zpráva služby MSMQ podepsána certifikátem, ale neprovede žádné ověření.</span><span class="sxs-lookup"><span data-stu-id="44bb1-150">The receiving queue manager checks whether the MSMQ message was signed with the certificate but does not perform any authentication.</span></span>  
  
 <span data-ttu-id="44bb1-151">Certifikát s jeho deklaracemi a informacemi o identitě vyplní <xref:System.ServiceModel.ServiceSecurityContext> Transportní kanál WCF ve frontě.</span><span class="sxs-lookup"><span data-stu-id="44bb1-151">The certificate with its claims and identity information is populated in the <xref:System.ServiceModel.ServiceSecurityContext> by the WCF queued transport channel.</span></span> <span data-ttu-id="44bb1-152">Služba může tyto informace použít k provedení vlastního ověření odesílatele.</span><span class="sxs-lookup"><span data-stu-id="44bb1-152">The service can use this information to perform its own authentication of the sender.</span></span>  
  
### <a name="msmq-protection-level"></a><span data-ttu-id="44bb1-153">Úroveň ochrany MSMQ</span><span class="sxs-lookup"><span data-stu-id="44bb1-153">MSMQ Protection Level</span></span>  
 <span data-ttu-id="44bb1-154">Úroveň ochrany určuje, jak chránit zprávu služby MSMQ, aby se zajistilo, že není úmyslně poškozena.</span><span class="sxs-lookup"><span data-stu-id="44bb1-154">The protection level dictates how to protect the MSMQ message to ensure that it is not tampered with.</span></span> <span data-ttu-id="44bb1-155">Je určena ve <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="44bb1-155">It is specified in the <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> property.</span></span> <span data-ttu-id="44bb1-156">Výchozí hodnota je <xref:System.Net.Security.ProtectionLevel.Sign>.</span><span class="sxs-lookup"><span data-stu-id="44bb1-156">The default value is <xref:System.Net.Security.ProtectionLevel.Sign>.</span></span>  
  
#### <a name="sign-protection-level"></a><span data-ttu-id="44bb1-157">Úroveň ochrany při podepisování</span><span class="sxs-lookup"><span data-stu-id="44bb1-157">Sign Protection Level</span></span>  
 <span data-ttu-id="44bb1-158">Zpráva služby MSMQ je podepsána pomocí vnitřně generovaného certifikátu při použití `WindowsDomain` režimu ověřování nebo externě vygenerovaného certifikátu při použití `Certificate` režimu ověřování.</span><span class="sxs-lookup"><span data-stu-id="44bb1-158">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or an externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
#### <a name="sign-and-encrypt-protection-level"></a><span data-ttu-id="44bb1-159">Úroveň ochrany podepsat a šifrovat</span><span class="sxs-lookup"><span data-stu-id="44bb1-159">Sign and Encrypt Protection Level</span></span>  
 <span data-ttu-id="44bb1-160">Zpráva služby MSMQ je podepsána pomocí vnitřně generovaného certifikátu při použití režimu `WindowsDomain` ověřování nebo externě vygenerovaného certifikátu při použití `Certificate` režimu ověřování.</span><span class="sxs-lookup"><span data-stu-id="44bb1-160">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
 <span data-ttu-id="44bb1-161">Kromě podepisování zprávy je zpráva služby MSMQ zašifrovaná pomocí veřejného klíče certifikátu získaného ze služby Active Directory, která patří k přijímacímu Správci front, který hostuje cílovou frontu.</span><span class="sxs-lookup"><span data-stu-id="44bb1-161">In addition to signing the message, the MSMQ message is encrypted using the public key of the certificate obtained from Active Directory that belongs to the receiving queue manager that hosts the target queue.</span></span> <span data-ttu-id="44bb1-162">Správce odesílající fronty zajišťuje, aby zpráva MSMQ byla při přenosu zašifrovaná.</span><span class="sxs-lookup"><span data-stu-id="44bb1-162">The sending queue manager ensures that the MSMQ message is encrypted in transit.</span></span> <span data-ttu-id="44bb1-163">Správce fronty příjmu dešifruje zprávu služby MSMQ pomocí privátního klíče jeho interního certifikátu a uloží zprávu do fronty (Pokud je to ověřeno a autorizováno) ve formě prostého textu.</span><span class="sxs-lookup"><span data-stu-id="44bb1-163">The receiving queue manager decrypts the MSMQ message using the private key of its internal certificate and stores the message in the queue (if authenticated and authorized) in clear text.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="44bb1-164">Chcete-li zašifrovat zprávu, je požadován přístup ke službě Active Directory ( `UseActiveDirectory` vlastnost <xref:System.ServiceModel.NetMsmqBinding> musí být nastavena na hodnotu `true` ) a lze ji použít s oběma <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> i <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> .</span><span class="sxs-lookup"><span data-stu-id="44bb1-164">To encrypt the message, Active Directory access is required (`UseActiveDirectory` property of <xref:System.ServiceModel.NetMsmqBinding> must be set to `true`) and can be used with both <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="none-protection-level"></a><span data-ttu-id="44bb1-165">Žádná úroveň ochrany</span><span class="sxs-lookup"><span data-stu-id="44bb1-165">None Protection Level</span></span>  
 <span data-ttu-id="44bb1-166">To je implicitní, pokud <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> je nastavena na <xref:System.Net.Security.ProtectionLevel.None> .</span><span class="sxs-lookup"><span data-stu-id="44bb1-166">This is implied when <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.None>.</span></span> <span data-ttu-id="44bb1-167">Nejedná se o platnou hodnotu pro žádné jiné režimy ověřování.</span><span class="sxs-lookup"><span data-stu-id="44bb1-167">This cannot be a valid value for any other authentication modes.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="44bb1-168">Pokud je zpráva služby MSMQ podepsaná, služba MSMQ ověří, zda je zpráva podepsána připojeným certifikátem (interní nebo externí) nezávisle na stavu fronty, tj. v ověřované frontě.</span><span class="sxs-lookup"><span data-stu-id="44bb1-168">If the MSMQ message is signed, MSMQ checks whether the message is signed with the attached certificate (internal or external) independent of the state of the queue, that is, authenticated queue or not.</span></span>  
  
### <a name="msmq-encryption-algorithm"></a><span data-ttu-id="44bb1-169">Šifrovací algoritmus služby MSMQ</span><span class="sxs-lookup"><span data-stu-id="44bb1-169">MSMQ Encryption Algorithm</span></span>  
 <span data-ttu-id="44bb1-170">Šifrovací algoritmus Určuje algoritmus, který se použije k šifrování zprávy služby MSMQ na lince.</span><span class="sxs-lookup"><span data-stu-id="44bb1-170">The encryption algorithm specifies the algorithm to use to encrypt the MSMQ message on the wire.</span></span> <span data-ttu-id="44bb1-171">Tato vlastnost se používá pouze v případě <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> , že je nastavena na <xref:System.Net.Security.ProtectionLevel.EncryptAndSign> .</span><span class="sxs-lookup"><span data-stu-id="44bb1-171">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="44bb1-172">Podporované algoritmy jsou `RC4Stream` a `AES` a výchozí hodnota je `RC4Stream` .</span><span class="sxs-lookup"><span data-stu-id="44bb1-172">The supported algorithms are `RC4Stream` and `AES` and the default is `RC4Stream`.</span></span>  
  
 <span data-ttu-id="44bb1-173">Algoritmus lze použít `AES` pouze v případě, že je v počítači nainstalováno rozhraní MSMQ 4,0.</span><span class="sxs-lookup"><span data-stu-id="44bb1-173">You can use the `AES` algorithm only if the sender has MSMQ 4.0 installed.</span></span> <span data-ttu-id="44bb1-174">Kromě toho musí být cílová fronta taky hostovaná ve službě MSMQ 4,0.</span><span class="sxs-lookup"><span data-stu-id="44bb1-174">In addition, the target queue must also be hosted on MSMQ 4.0.</span></span>  
  
### <a name="msmq-hash-algorithm"></a><span data-ttu-id="44bb1-175">Algoritmus hash služby MSMQ</span><span class="sxs-lookup"><span data-stu-id="44bb1-175">MSMQ Hash Algorithm</span></span>  
 <span data-ttu-id="44bb1-176">Algoritmus hash určuje algoritmus použitý k vytvoření digitálního podpisu zprávy služby MSMQ.</span><span class="sxs-lookup"><span data-stu-id="44bb1-176">The hash algorithm specifies the algorithm used to create a digital signature of the MSMQ message.</span></span> <span data-ttu-id="44bb1-177">Správce fronty příjmu používá stejný algoritmus k ověření zprávy služby MSMQ.</span><span class="sxs-lookup"><span data-stu-id="44bb1-177">The receiving queue manager uses this same algorithm to authenticate the MSMQ message.</span></span> <span data-ttu-id="44bb1-178">Tato vlastnost se používá pouze v případě, že <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> je nastavena na <xref:System.Net.Security.ProtectionLevel.Sign> nebo <xref:System.Net.Security.ProtectionLevel.EncryptAndSign> .</span><span class="sxs-lookup"><span data-stu-id="44bb1-178">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.Sign> or <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="44bb1-179">Podporované algoritmy jsou `MD5` , `SHA1` , `SHA256` a `SHA512` .</span><span class="sxs-lookup"><span data-stu-id="44bb1-179">The supported algorithms are `MD5`, `SHA1`, `SHA256`, and `SHA512`.</span></span> <span data-ttu-id="44bb1-180">Výchozí formát je `SHA1`.</span><span class="sxs-lookup"><span data-stu-id="44bb1-180">The default is `SHA1`.</span></span>

 <span data-ttu-id="44bb1-181">Microsoft doporučuje SHA256 nebo lepší vzhledem k problémům s kolize MD5/SHA1.</span><span class="sxs-lookup"><span data-stu-id="44bb1-181">Due to collision problems with MD5/SHA1, Microsoft recommends SHA256 or better.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="44bb1-182">Viz také</span><span class="sxs-lookup"><span data-stu-id="44bb1-182">See also</span></span>

- [<span data-ttu-id="44bb1-183">Přehled front</span><span class="sxs-lookup"><span data-stu-id="44bb1-183">Queues Overview</span></span>](queues-overview.md)
- [<span data-ttu-id="44bb1-184">Koncepce zabezpečení</span><span class="sxs-lookup"><span data-stu-id="44bb1-184">Security Concepts</span></span>](security-concepts.md)
- [<span data-ttu-id="44bb1-185">Zabezpečení služeb a klientů</span><span class="sxs-lookup"><span data-stu-id="44bb1-185">Securing Services and Clients</span></span>](securing-services-and-clients.md)
