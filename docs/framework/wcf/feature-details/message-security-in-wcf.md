---
title: Zabezpečení zpráv ve WCF
ms.date: 03/30/2017
ms.assetid: a80efb59-591a-4a37-bb3c-8fffa6ca0b7d
ms.openlocfilehash: 32f6659f6ac744ab7af07c23e7e26ea1124d020c
ms.sourcegitcommit: 09b4090b78f52fd09b0e430cd4b26576f1fdf96e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/17/2020
ms.locfileid: "76212074"
---
# <a name="message-security-in-wcf"></a><span data-ttu-id="c7b6d-102">Zabezpečení zpráv ve WCF</span><span class="sxs-lookup"><span data-stu-id="c7b6d-102">Message Security in WCF</span></span>

<span data-ttu-id="c7b6d-103">Windows Communication Foundation (WCF) má dva hlavní režimy pro poskytování zabezpečení (`Transport` a `Message`) a třetí režim (`TransportWithMessageCredential`), který kombinuje tyto dvě.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-103">Windows Communication Foundation (WCF) has two major modes for providing security (`Transport` and `Message`) and a third mode (`TransportWithMessageCredential`) that combines the two.</span></span> <span data-ttu-id="c7b6d-104">Toto téma popisuje zabezpečení zpráv a důvody jejich použití.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-104">This topic discusses message security and the reasons to use it.</span></span>

## <a name="what-is-message-security"></a><span data-ttu-id="c7b6d-105">Co je zabezpečení zpráv?</span><span class="sxs-lookup"><span data-stu-id="c7b6d-105">What Is Message Security?</span></span>

<span data-ttu-id="c7b6d-106">Zabezpečení zpráv používá ke zabezpečování zpráv specifikaci WS-Security.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-106">Message security uses the WS-Security specification to secure messages.</span></span> <span data-ttu-id="c7b6d-107">Specifikace WS-Security popisuje vylepšení zasílání zpráv SOAP, aby se zajistila důvěrnost, integrita a ověřování na úrovni zprávy protokolu SOAP (místo úrovně Transport).</span><span class="sxs-lookup"><span data-stu-id="c7b6d-107">The WS-Security specification describes enhancements to SOAP messaging to ensure confidentiality, integrity, and authentication at the SOAP message level (instead of the transport level).</span></span>

<span data-ttu-id="c7b6d-108">V krátkém případě se zabezpečení zpráv liší od zabezpečení přenosu tím, že zapouzdřuje zabezpečovací přihlašovací údaje a deklarace identity se všemi zprávami, a to prostřednictvím jakékoli ochrany zpráv (podepisování nebo šifrování).</span><span class="sxs-lookup"><span data-stu-id="c7b6d-108">In brief, message security differs from transport security by encapsulating the security credentials and claims with every message along with any message protection (signing or encryption).</span></span> <span data-ttu-id="c7b6d-109">Použití zabezpečení přímo na zprávu změnou jejího obsahu umožňuje, aby zabezpečená zpráva obsahovala vlastní obsah v souvislosti s aspekty zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-109">Applying the security directly to the message by modifying its content allows the secured message to be self-containing with respect to the security aspects.</span></span> <span data-ttu-id="c7b6d-110">To umožňuje některé scénáře, které nejsou možné při použití zabezpečení přenosu.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-110">This enables some scenarios that are not possible when transport security is used.</span></span>

## <a name="reasons-to-use-message-security"></a><span data-ttu-id="c7b6d-111">Důvody pro použití zabezpečení zpráv</span><span class="sxs-lookup"><span data-stu-id="c7b6d-111">Reasons to Use Message Security</span></span>

<span data-ttu-id="c7b6d-112">V zabezpečení na úrovni zprávy jsou všechny informace o zabezpečení zapouzdřeny ve zprávě.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-112">In message-level security, all of the security information is encapsulated in the message.</span></span> <span data-ttu-id="c7b6d-113">Zabezpečení zprávy se zabezpečením na úrovni zpráv místo zabezpečení na úrovni přenosu má následující výhody:</span><span class="sxs-lookup"><span data-stu-id="c7b6d-113">Securing the message with message-level security instead of transport-level security has the following advantages:</span></span>

- <span data-ttu-id="c7b6d-114">Komplexní zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-114">End-to-end security.</span></span> <span data-ttu-id="c7b6d-115">Zabezpečení přenosu, jako je například SSL (Secure Sockets Layer) (SSL), zabezpečuje pouze zprávy v případě, že komunikace je typu Point-to-Point.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-115">Transport security, such as Secure Sockets Layer (SSL) only secures messages when the communication is point-to-point.</span></span> <span data-ttu-id="c7b6d-116">Pokud je zpráva směrována do jednoho nebo více zprostředkovatelů protokolu SOAP (například směrovače) předtím, než se dostane k konečnému přijímači, samotná zpráva není chráněna, jakmile ji zprostředkovatel přečte z tohoto propojení.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-116">If the message is routed to one or more SOAP intermediaries (for example a router) before reaching the ultimate receiver, the message itself is not protected once an intermediary reads it from the wire.</span></span> <span data-ttu-id="c7b6d-117">Kromě toho jsou informace o ověřování klientů k dispozici pouze prvnímu zprostředkovateli a musí být v případě potřeby znovu přeneseny na konečného příjemce v nedostatku pásma.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-117">Additionally, the client authentication information is available only to the first intermediary and must be re-transmitted to the ultimate receiver in out-of-band fashion, if necessary.</span></span> <span data-ttu-id="c7b6d-118">Platí to i v případě, že celá trasa používá zabezpečení SSL mezi jednotlivými segmenty směrování.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-118">This applies even if the entire route uses SSL security between individual hops.</span></span> <span data-ttu-id="c7b6d-119">Vzhledem k tomu, že zabezpečení zprávy funguje přímo se zprávou a zabezpečuje XML v něm, zabezpečení zůstává u zprávy bez ohledu na to, kolik zprostředkovatelů je zapojeno, než dosáhne konečného přijímače.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-119">Because message security works directly with the message and secures the XML in it, the security stays with the message regardless of how many intermediaries are involved before it reaches the ultimate receiver.</span></span> <span data-ttu-id="c7b6d-120">To umožňuje skutečný scénář zabezpečení na konci.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-120">This enables a true end-to-end security scenario.</span></span>

- <span data-ttu-id="c7b6d-121">Vyšší flexibilita.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-121">Increased flexibility.</span></span> <span data-ttu-id="c7b6d-122">Části zprávy místo celé zprávy mohou být podepsány nebo zašifrovány.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-122">Parts of the message, instead of the entire message, can be signed or encrypted.</span></span> <span data-ttu-id="c7b6d-123">To znamená, že prostředníci můžou zobrazit části zprávy, které jsou pro ně určené.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-123">This means that intermediaries can view the parts of the message that are intended for them.</span></span> <span data-ttu-id="c7b6d-124">Pokud odesílatel potřebuje, aby se informace ve zprávě viditelně zobrazovaly pro zprostředkovatele, ale chce se ujistit, že není manipulováno, může ho pouze podepsat, ale nechat ho nezašifrovaný.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-124">If the sender needs to make part of the information in the message visible to the intermediaries but wants to ensure that it is not tampered with, it can just sign it but leave it unencrypted.</span></span> <span data-ttu-id="c7b6d-125">Vzhledem k tomu, že signatura je součástí zprávy, může konečný přijímač ověřit, zda informace ve zprávě byly přijaty beze změny.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-125">Since the signature is part of the message, the ultimate receiver can verify that the information in the message was received intact.</span></span> <span data-ttu-id="c7b6d-126">Jeden scénář může mít zprostředkující službu SOAP, která směruje zprávu podle hodnoty hlavičky Action.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-126">One scenario might have a SOAP intermediary service that routes message according the Action header value.</span></span> <span data-ttu-id="c7b6d-127">Ve výchozím nastavení služba WCF nešifruje hodnotu akce, ale podepíše ji, pokud se používá zabezpečení zprávy.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-127">By default, WCF does not encrypt the Action value but signs it if message security is used.</span></span> <span data-ttu-id="c7b6d-128">Tyto informace jsou proto k dispozici všem zprostředkovatelům, ale nikdo je nemůže změnit.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-128">Therefore, this information is available to all intermediaries, but no one can change it.</span></span>

- <span data-ttu-id="c7b6d-129">Podpora pro více přenosů.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-129">Support for multiple transports.</span></span> <span data-ttu-id="c7b6d-130">Můžete odesílat zabezpečené zprávy přes mnoho různých přenosů, jako jsou pojmenované kanály a TCP, aniž byste se museli spoléhat na zabezpečení protokolu.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-130">You can send secured messages over many different transports, such as named pipes and TCP, without having to rely on the protocol for security.</span></span> <span data-ttu-id="c7b6d-131">U zabezpečení na úrovni přenosu jsou všechny informace o zabezpečení vymezeny na jedno konkrétní přenosové připojení a nejsou dostupné přímo z samotného obsahu zprávy.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-131">With transport-level security, all the security information is scoped to a single particular transport connection and is not available from the message content itself.</span></span> <span data-ttu-id="c7b6d-132">Zabezpečení zpráv zajišťuje zabezpečenou zprávu bez ohledu na to, jaký přenos použijete k přenosu zprávy, a kontext zabezpečení je přímo vložen do zprávy.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-132">Message security makes the message secure regardless of what transport you use to transmit the message, and the security context is directly embedded inside the message.</span></span>

- <span data-ttu-id="c7b6d-133">Podpora pro rozsáhlou sadu přihlašovacích údajů a deklarací identity.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-133">Support for a wide set of credentials and claims.</span></span> <span data-ttu-id="c7b6d-134">Zabezpečení zpráv je založeno na specifikaci WS-Security, která poskytuje rozšiřitelnou architekturu, která dokáže přenášet jakýkoli typ deklarace identity uvnitř zprávy protokolu SOAP.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-134">The message security is based on the WS-Security specification, which provides an extensible framework capable of transmitting any type of claim inside the SOAP message.</span></span> <span data-ttu-id="c7b6d-135">Na rozdíl od zabezpečení přenosu není sada mechanismů ověřování nebo deklarací identity, které můžete použít, omezené funkcemi přenosu.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-135">Unlike transport security, the set of authentication mechanisms, or claims, that you can use is not limited by the transport capabilities.</span></span> <span data-ttu-id="c7b6d-136">Zabezpečení zpráv WCF zahrnuje několik typů ověřování a přenos nároků a v případě potřeby je můžete rozšířit na podporu dalších typů.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-136">WCF message security includes multiple types of authentication and claim transmission and can be extended to support additional types as necessary.</span></span> <span data-ttu-id="c7b6d-137">Z těchto důvodů je například možné, že se nejedná o scénář federovaných přihlašovacích údajů bez zabezpečení zpráv.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-137">For those reasons, for example, a federated credentials scenario is not possible without message security.</span></span> <span data-ttu-id="c7b6d-138">Další informace o federačních scénářích, které podporuje WCF, najdete v tématu [federace a vystavené tokeny](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="c7b6d-138">For more information about federation scenarios WCF supports, see [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span>

## <a name="how-message-and-transport-security-compare"></a><span data-ttu-id="c7b6d-139">Jak se porovnávají zabezpečení zpráv a přenosů</span><span class="sxs-lookup"><span data-stu-id="c7b6d-139">How Message and Transport Security Compare</span></span>

### <a name="pros-and-cons-of-transport-level-security"></a><span data-ttu-id="c7b6d-140">Specialisté a nevýhody zabezpečení na úrovni přenosu</span><span class="sxs-lookup"><span data-stu-id="c7b6d-140">Pros and Cons of Transport-Level Security</span></span>

<span data-ttu-id="c7b6d-141">Zabezpečení přenosu má následující výhody:</span><span class="sxs-lookup"><span data-stu-id="c7b6d-141">Transport security has the following advantages:</span></span>

- <span data-ttu-id="c7b6d-142">Nevyžaduje, aby komunikující strany rozuměly koncepcím zabezpečení na úrovni XML.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-142">Does not require that the communicating parties understand XML-level security concepts.</span></span> <span data-ttu-id="c7b6d-143">To může zlepšit interoperabilitu, například při použití protokolu HTTPS k zabezpečení komunikace.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-143">This can improve the interoperability, for example, when HTTPS is used to secure the communication.</span></span>

- <span data-ttu-id="c7b6d-144">Obecně Vylepšený výkon.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-144">Generally improved performance.</span></span>

- <span data-ttu-id="c7b6d-145">Jsou k dispozici hardwarové akcelerátory.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-145">Hardware accelerators are available.</span></span>

- <span data-ttu-id="c7b6d-146">Streamování je možné.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-146">Streaming is possible.</span></span>

 <span data-ttu-id="c7b6d-147">Zabezpečení přenosu má následující nevýhody:</span><span class="sxs-lookup"><span data-stu-id="c7b6d-147">Transport security has the following disadvantages:</span></span>

- <span data-ttu-id="c7b6d-148">Pouze segment směrování na směrování.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-148">Hop-to-hop only.</span></span>

- <span data-ttu-id="c7b6d-149">Omezená a nerozšiřitelná sada přihlašovacích údajů.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-149">Limited and inextensible set of credentials.</span></span>

- <span data-ttu-id="c7b6d-150">Závislý na přenosu.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-150">Transport-dependent.</span></span>

### <a name="disadvantages-of-message-level-security"></a><span data-ttu-id="c7b6d-151">Nevýhody zabezpečení na úrovni zpráv</span><span class="sxs-lookup"><span data-stu-id="c7b6d-151">Disadvantages of Message-Level Security</span></span>

<span data-ttu-id="c7b6d-152">Zabezpečení zpráv má následující nevýhody:</span><span class="sxs-lookup"><span data-stu-id="c7b6d-152">Message security has the following disadvantages:</span></span>

- <span data-ttu-id="c7b6d-153">Výkon</span><span class="sxs-lookup"><span data-stu-id="c7b6d-153">Performance</span></span>

- <span data-ttu-id="c7b6d-154">Nelze použít streamování zpráv.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-154">Cannot use message streaming.</span></span>

- <span data-ttu-id="c7b6d-155">Vyžaduje implementaci mechanismů zabezpečení na úrovni XML a podporu specifikace WS-Security.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-155">Requires implementation of XML-level security mechanisms and support for WS-Security specification.</span></span> <span data-ttu-id="c7b6d-156">To může mít vliv na interoperabilitu.</span><span class="sxs-lookup"><span data-stu-id="c7b6d-156">This might affect the interoperability.</span></span>

## <a name="see-also"></a><span data-ttu-id="c7b6d-157">Viz také:</span><span class="sxs-lookup"><span data-stu-id="c7b6d-157">See also</span></span>

- [<span data-ttu-id="c7b6d-158">Zabezpečení služeb a klientů</span><span class="sxs-lookup"><span data-stu-id="c7b6d-158">Securing Services and Clients</span></span>](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)
- [<span data-ttu-id="c7b6d-159">Zabezpečení přenosu</span><span class="sxs-lookup"><span data-stu-id="c7b6d-159">Transport Security</span></span>](../../../../docs/framework/wcf/feature-details/transport-security.md)
- [<span data-ttu-id="c7b6d-160">Postupy: Použití přihlašovacích údajů k zabezpečení přenosů a zpráv</span><span class="sxs-lookup"><span data-stu-id="c7b6d-160">How to: Use Transport Security and Message Credentials</span></span>](../../../../docs/framework/wcf/feature-details/how-to-use-transport-security-and-message-credentials.md)
- <span data-ttu-id="c7b6d-161">[Vzory a postupy Microsoft, kapitola 3: implementace přenosu a zabezpečení vrstvy zpráv](https://docs.microsoft.com/previous-versions/msp-n-p/ff647370(v=pandp.10))</span><span class="sxs-lookup"><span data-stu-id="c7b6d-161">[Microsoft Patterns and Practices, Chapter 3: Implementing Transport and Message Layer Security](https://docs.microsoft.com/previous-versions/msp-n-p/ff647370(v=pandp.10))</span></span>
