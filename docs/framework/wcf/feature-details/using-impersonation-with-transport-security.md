---
title: Použití zosobnění se zabezpečením přenosu
ms.date: 03/30/2017
ms.assetid: 426df8cb-6337-4262-b2c0-b96c2edf21a9
ms.openlocfilehash: 1d33bfbbb74266aefa538166b4e1aca7d7e315ef
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/09/2020
ms.locfileid: "84594969"
---
# <a name="using-impersonation-with-transport-security"></a><span data-ttu-id="2454e-102">Použití zosobnění se zabezpečením přenosu</span><span class="sxs-lookup"><span data-stu-id="2454e-102">Using Impersonation with Transport Security</span></span>
<span data-ttu-id="2454e-103">*Zosobnění* je schopnost serverové aplikace převzít identitu klienta.</span><span class="sxs-lookup"><span data-stu-id="2454e-103">*Impersonation* is the ability of a server application to take on the identity of the client.</span></span> <span data-ttu-id="2454e-104">Pro služby, které se používají při ověřování přístupu k prostředkům, je běžné použití zosobnění.</span><span class="sxs-lookup"><span data-stu-id="2454e-104">It is common for services to use impersonation when validating access to resources.</span></span> <span data-ttu-id="2454e-105">Serverová aplikace se spouští pomocí účtu služby, ale když server akceptuje připojení klienta, zosobní klienta, aby se kontroly přístupu prováděly pomocí přihlašovacích údajů klienta.</span><span class="sxs-lookup"><span data-stu-id="2454e-105">The server application runs using a service account, but when the server accepts a client connection, it impersonates the client so that access checks are performed using the client's credentials.</span></span> <span data-ttu-id="2454e-106">Zabezpečení přenosu je mechanismus pro předávání přihlašovacích údajů a zabezpečení komunikace pomocí těchto přihlašovacích údajů.</span><span class="sxs-lookup"><span data-stu-id="2454e-106">Transport security is a mechanism both for passing credentials and securing communication using those credentials.</span></span> <span data-ttu-id="2454e-107">Toto téma popisuje použití zabezpečení přenosu v Windows Communication Foundation (WCF) s funkcí zosobnění.</span><span class="sxs-lookup"><span data-stu-id="2454e-107">This topic describes using transport security in Windows Communication Foundation (WCF) with the impersonation feature.</span></span> <span data-ttu-id="2454e-108">Další informace o zosobnění pomocí zabezpečení zpráv najdete v tématu [delegování a zosobnění](delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="2454e-108">For more information about impersonation using message security, see [Delegation and Impersonation](delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="five-impersonation-levels"></a><span data-ttu-id="2454e-109">Pět úrovní zosobnění</span><span class="sxs-lookup"><span data-stu-id="2454e-109">Five Impersonation Levels</span></span>  
 <span data-ttu-id="2454e-110">Zabezpečení přenosu využívá pět úrovní zosobnění, jak je popsáno v následující tabulce.</span><span class="sxs-lookup"><span data-stu-id="2454e-110">Transport security makes use of five levels of impersonation, as described in the following table.</span></span>  
  
|<span data-ttu-id="2454e-111">Úroveň zosobnění</span><span class="sxs-lookup"><span data-stu-id="2454e-111">Impersonation level</span></span>|<span data-ttu-id="2454e-112">Popis</span><span class="sxs-lookup"><span data-stu-id="2454e-112">Description</span></span>|  
|-------------------------|-----------------|  
|<span data-ttu-id="2454e-113">Žádné</span><span class="sxs-lookup"><span data-stu-id="2454e-113">None</span></span>|<span data-ttu-id="2454e-114">Serverová aplikace se nepokouší zosobnit klienta.</span><span class="sxs-lookup"><span data-stu-id="2454e-114">The server application does not attempt to impersonate the client.</span></span>|  
|<span data-ttu-id="2454e-115">Anonymní</span><span class="sxs-lookup"><span data-stu-id="2454e-115">Anonymous</span></span>|<span data-ttu-id="2454e-116">Serverová aplikace může provádět kontroly přístupu proti přihlašovacím údajům klienta, ale neobdrží žádné informace o identitě klienta.</span><span class="sxs-lookup"><span data-stu-id="2454e-116">The server application can perform access checks against the client's credentials, but does not receive any information about the client's identity.</span></span> <span data-ttu-id="2454e-117">Úroveň zosobnění je smysluplná jenom pro komunikaci v počítači, jako jsou pojmenované kanály.</span><span class="sxs-lookup"><span data-stu-id="2454e-117">This impersonation level is meaningful only for on-machine communication, such as named pipes.</span></span> <span data-ttu-id="2454e-118">Použití `Anonymous` se vzdáleným připojením zvyšuje úroveň zosobnění k identifikaci.</span><span class="sxs-lookup"><span data-stu-id="2454e-118">Using `Anonymous` with a remote connection promotes the impersonation level to Identify.</span></span>|  
|<span data-ttu-id="2454e-119">Identifikace</span><span class="sxs-lookup"><span data-stu-id="2454e-119">Identify</span></span>|<span data-ttu-id="2454e-120">Serverová aplikace zná identitu klienta a může provádět ověřování přístupu proti přihlašovacím údajům klienta, ale nemůže zosobnit klienta.</span><span class="sxs-lookup"><span data-stu-id="2454e-120">The server application knows the client's identity and can perform access validation against the client's credentials, but cannot impersonate the client.</span></span> <span data-ttu-id="2454e-121">Identifikace je výchozí úroveň zosobnění, která se používá pro přihlašovací údaje SSPI v WCF, pokud poskytovatel tokenů neposkytuje jinou úroveň zosobnění.</span><span class="sxs-lookup"><span data-stu-id="2454e-121">Identify is the default impersonation level used with SSPI credentials in WCF unless the token provider provides a different impersonation level.</span></span>|  
|<span data-ttu-id="2454e-122">Impersonate</span><span class="sxs-lookup"><span data-stu-id="2454e-122">Impersonate</span></span>|<span data-ttu-id="2454e-123">Serverová aplikace má kromě provádění kontrol přístupu taky přístup k prostředkům na serverovém počítači jako klient.</span><span class="sxs-lookup"><span data-stu-id="2454e-123">The server application can access resources on the server machine as the client in addition to performing access checks.</span></span> <span data-ttu-id="2454e-124">Serverová aplikace nemůže získat přístup k prostředkům na vzdálených počítačích pomocí identity klienta, protože zosobněný token nemá síťové přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="2454e-124">The server application cannot access resources on remote machines using the client's identity because the impersonated token does not have network credentials</span></span>|  
|<span data-ttu-id="2454e-125">Delegát</span><span class="sxs-lookup"><span data-stu-id="2454e-125">Delegate</span></span>|<span data-ttu-id="2454e-126">Kromě toho, že mají stejné možnosti jako `Impersonate` , úroveň zosobnění delegáta taky umožňuje serverové aplikaci přístup k prostředkům na vzdálených počítačích pomocí identity klienta a předání identity jiným aplikacím.</span><span class="sxs-lookup"><span data-stu-id="2454e-126">In addition to having the same capabilities as `Impersonate`, the Delegate impersonation level also enables the server application to access resources on remote machines using the client's identity and to pass the identity to other applications.</span></span><br /><br /> <span data-ttu-id="2454e-127">**Důležité** informace Aby bylo možné používat tyto další funkce, musí být účet domény serveru označen jako důvěryhodný pro delegování na řadiči domény.</span><span class="sxs-lookup"><span data-stu-id="2454e-127">**Important** The server domain account must be marked as trusted for delegation on the domain controller to use these additional features.</span></span> <span data-ttu-id="2454e-128">Tuto úroveň zosobnění nelze použít s účty domény klienta označenými jako citlivé.</span><span class="sxs-lookup"><span data-stu-id="2454e-128">This level of impersonation cannot be used with client domain accounts marked as sensitive.</span></span>|  
  
 <span data-ttu-id="2454e-129">Úrovně nejčastěji používané při zabezpečení přenosu jsou `Identify` a `Impersonate` .</span><span class="sxs-lookup"><span data-stu-id="2454e-129">The levels most commonly used with transport security are `Identify` and `Impersonate`.</span></span> <span data-ttu-id="2454e-130">Tyto úrovně `None` se `Anonymous` nedoporučují pro typické použití a mnoho přenosů nepodporuje používání těchto úrovní s ověřováním.</span><span class="sxs-lookup"><span data-stu-id="2454e-130">The levels `None` and `Anonymous` are not recommended for typical use, and many transports do not support using those levels with authentication.</span></span> <span data-ttu-id="2454e-131">`Delegate`Úroveň je výkonná funkce, která by se měla používat s péčí.</span><span class="sxs-lookup"><span data-stu-id="2454e-131">The `Delegate` level is a powerful feature that should be used with care.</span></span> <span data-ttu-id="2454e-132">Oprávnění delegovat přihlašovací údaje by měly být udělena pouze důvěryhodné serverové aplikace.</span><span class="sxs-lookup"><span data-stu-id="2454e-132">Only trusted server applications should be given the permission to delegate credentials.</span></span>  
  
 <span data-ttu-id="2454e-133">Použití zosobnění na úrovni `Impersonate` nebo vyžaduje, aby `Delegate` Serverová aplikace měla `SeImpersonatePrivilege` oprávnění.</span><span class="sxs-lookup"><span data-stu-id="2454e-133">Using impersonation at the `Impersonate` or `Delegate` levels requires the server application to have the `SeImpersonatePrivilege` privilege.</span></span> <span data-ttu-id="2454e-134">Aplikace má toto oprávnění ve výchozím nastavení, pokud je spuštěna na účtu ve skupině Administrators nebo v účtu s identifikátorem SID služby (síťová služba, místní služba nebo místní systém).</span><span class="sxs-lookup"><span data-stu-id="2454e-134">An application has this privilege by default if it is running on an account in the Administrators group or on an account with a Service SID (Network Service, Local Service, or Local System).</span></span> <span data-ttu-id="2454e-135">Zosobnění nevyžaduje vzájemné ověřování klienta a serveru.</span><span class="sxs-lookup"><span data-stu-id="2454e-135">Impersonation does not require mutual authentication of the client and server.</span></span> <span data-ttu-id="2454e-136">Některá schémata ověřování, která podporují zosobnění, jako je například NTLM, nelze použít se vzájemným ověřováním.</span><span class="sxs-lookup"><span data-stu-id="2454e-136">Some authentication schemes that support impersonation, such as NTLM, cannot be used with mutual authentication.</span></span>  
  
## <a name="transport-specific-issues-with-impersonation"></a><span data-ttu-id="2454e-137">Problémy týkající se přenosu s zosobněním</span><span class="sxs-lookup"><span data-stu-id="2454e-137">Transport-Specific Issues with Impersonation</span></span>  
 <span data-ttu-id="2454e-138">Volba přenosu v WCF ovlivňuje možné volby pro zosobnění.</span><span class="sxs-lookup"><span data-stu-id="2454e-138">The choice of a transport in WCF affects the possible choices for impersonation.</span></span> <span data-ttu-id="2454e-139">Tato část popisuje problémy ovlivňující standardní přenosy HTTP a pojmenovaného kanálu ve službě WCF.</span><span class="sxs-lookup"><span data-stu-id="2454e-139">This section describes issues affecting the standard HTTP and named pipe transports in WCF.</span></span> <span data-ttu-id="2454e-140">Vlastní přenosy mají svá vlastní omezení podpory zosobnění.</span><span class="sxs-lookup"><span data-stu-id="2454e-140">Custom transports have their own restrictions on support for impersonation.</span></span>  
  
### <a name="named-pipe-transport"></a><span data-ttu-id="2454e-141">Přenos pojmenovaného kanálu</span><span class="sxs-lookup"><span data-stu-id="2454e-141">Named Pipe Transport</span></span>  
 <span data-ttu-id="2454e-142">S přenosem pojmenovaného kanálu se používají tyto položky:</span><span class="sxs-lookup"><span data-stu-id="2454e-142">The following items are used with the named pipe transport:</span></span>  
  
- <span data-ttu-id="2454e-143">Přenos pojmenovaného kanálu je určený jenom pro použití na místním počítači.</span><span class="sxs-lookup"><span data-stu-id="2454e-143">The named pipe transport is intended for use only on the local machine.</span></span> <span data-ttu-id="2454e-144">Přenos pojmenovaného kanálu ve službě WCF explicitně nepovoluje připojení mezi počítači.</span><span class="sxs-lookup"><span data-stu-id="2454e-144">The named pipe transport in WCF explicitly disallows cross-machine connections.</span></span>  
  
- <span data-ttu-id="2454e-145">Pojmenované kanály nelze použít s `Impersonate` `Delegate` úrovní nebo zosobnění.</span><span class="sxs-lookup"><span data-stu-id="2454e-145">Named pipes cannot be used with the `Impersonate` or `Delegate` impersonation level.</span></span> <span data-ttu-id="2454e-146">Pojmenovaný kanál nemůže na těchto úrovních zosobnění vymáhat záruku na počítač.</span><span class="sxs-lookup"><span data-stu-id="2454e-146">The named pipe cannot enforce the on-machine guarantee at these impersonation levels.</span></span>  
  
 <span data-ttu-id="2454e-147">Další informace o pojmenovaných kanálech najdete v tématu [Volba přenosu](choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="2454e-147">For more information about named pipes, see [Choosing a Transport](choosing-a-transport.md).</span></span>  
  
### <a name="http-transport"></a><span data-ttu-id="2454e-148">Přenos HTTP</span><span class="sxs-lookup"><span data-stu-id="2454e-148">HTTP Transport</span></span>  
 <span data-ttu-id="2454e-149">Vazby, které používají přenos přes protokol HTTP ( <xref:System.ServiceModel.WSHttpBinding> a <xref:System.ServiceModel.BasicHttpBinding> ) podporují několik schémat ověřování, jak je vysvětleno v tématu [Principy ověřování protokolem HTTP](understanding-http-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="2454e-149">The bindings that use the HTTP transport (<xref:System.ServiceModel.WSHttpBinding> and <xref:System.ServiceModel.BasicHttpBinding>) support several authentication schemes, as explained in [Understanding HTTP Authentication](understanding-http-authentication.md).</span></span> <span data-ttu-id="2454e-150">Podporovaná úroveň zosobnění závisí na schématu ověřování.</span><span class="sxs-lookup"><span data-stu-id="2454e-150">The impersonation level supported depends on the authentication scheme.</span></span> <span data-ttu-id="2454e-151">S přenosem HTTP se používají tyto položky:</span><span class="sxs-lookup"><span data-stu-id="2454e-151">The following items are used with the HTTP transport:</span></span>  
  
- <span data-ttu-id="2454e-152">`Anonymous`Schéma ověřování ignoruje zosobnění.</span><span class="sxs-lookup"><span data-stu-id="2454e-152">The `Anonymous` authentication scheme ignores impersonation.</span></span>  
  
- <span data-ttu-id="2454e-153">`Basic`Schéma ověřování podporuje pouze `Delegate` úroveň.</span><span class="sxs-lookup"><span data-stu-id="2454e-153">The `Basic` authentication scheme supports only the `Delegate` level.</span></span> <span data-ttu-id="2454e-154">Všechny nižší úrovně zosobnění jsou upgradovány.</span><span class="sxs-lookup"><span data-stu-id="2454e-154">All lower impersonation levels are upgraded.</span></span>  
  
- <span data-ttu-id="2454e-155">`Digest`Schéma ověřování podporuje pouze `Impersonate` `Delegate` úrovně a.</span><span class="sxs-lookup"><span data-stu-id="2454e-155">The `Digest` authentication scheme supports only the `Impersonate` and `Delegate` levels.</span></span>  
  
- <span data-ttu-id="2454e-156">`NTLM`Schéma ověřování, které lze vybrat buď přímo, nebo prostřednictvím vyjednávání, podporuje pouze `Delegate` úroveň v místním počítači.</span><span class="sxs-lookup"><span data-stu-id="2454e-156">The `NTLM` authentication scheme, selectable either directly or through negotiation, supports only the `Delegate` level on the local machine.</span></span>  
  
- <span data-ttu-id="2454e-157">Schéma ověřování protokolu Kerberos, které lze vybrat pouze prostřednictvím vyjednávání, lze použít s libovolnou podporovanou úrovní zosobnění.</span><span class="sxs-lookup"><span data-stu-id="2454e-157">The Kerberos authentication scheme, which can only be selected through negotiation, can be used with any supported impersonation level.</span></span>  
  
 <span data-ttu-id="2454e-158">Další informace o přenosu HTTP najdete v tématu [Volba přenosu](choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="2454e-158">For more information about the HTTP transport, see [Choosing a Transport](choosing-a-transport.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2454e-159">Viz také</span><span class="sxs-lookup"><span data-stu-id="2454e-159">See also</span></span>

- [<span data-ttu-id="2454e-160">Delegace a zosobnění</span><span class="sxs-lookup"><span data-stu-id="2454e-160">Delegation and Impersonation</span></span>](delegation-and-impersonation-with-wcf.md)
- [<span data-ttu-id="2454e-161">Autorizace</span><span class="sxs-lookup"><span data-stu-id="2454e-161">Authorization</span></span>](authorization-in-wcf.md)
- [<span data-ttu-id="2454e-162">Postupy: Zosobnění klienta ve službě</span><span class="sxs-lookup"><span data-stu-id="2454e-162">How to: Impersonate a Client on a Service</span></span>](../how-to-impersonate-a-client-on-a-service.md)
- [<span data-ttu-id="2454e-163">Princip ověřování HTTP</span><span class="sxs-lookup"><span data-stu-id="2454e-163">Understanding HTTP Authentication</span></span>](understanding-http-authentication.md)
