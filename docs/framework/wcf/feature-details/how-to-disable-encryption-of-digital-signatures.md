---
title: 'Postupy: Zákaz šifrování digitálních podpisů'
ms.date: 03/30/2017
ms.assetid: fd174313-ad81-4dca-898a-016ccaff8187
ms.openlocfilehash: 461c5af2c7fbb98486a8decbe4aa998d8d21070d
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/22/2019
ms.locfileid: "69911181"
---
# <a name="how-to-disable-encryption-of-digital-signatures"></a><span data-ttu-id="eabb9-102">Postupy: Zákaz šifrování digitálních podpisů</span><span class="sxs-lookup"><span data-stu-id="eabb9-102">How to: Disable Encryption of Digital Signatures</span></span>
<span data-ttu-id="eabb9-103">Ve výchozím nastavení je zpráva podepsaná a podpis je digitálně zašifrovaný.</span><span class="sxs-lookup"><span data-stu-id="eabb9-103">By default, a message is signed and the signature is digitally encrypted.</span></span> <span data-ttu-id="eabb9-104">To je řízeno vytvořením vlastní vazby s instancí <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> nebo a nastavením `MessageProtectionOrder` vlastnosti obou tříd na <xref:System.ServiceModel.Security.MessageProtectionOrder> hodnotu výčtu.</span><span class="sxs-lookup"><span data-stu-id="eabb9-104">This is controlled by creating a custom binding with an instance of the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> and setting the `MessageProtectionOrder` property of either class to a <xref:System.ServiceModel.Security.MessageProtectionOrder> enumeration value.</span></span> <span data-ttu-id="eabb9-105">Výchozí hodnota je <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span><span class="sxs-lookup"><span data-stu-id="eabb9-105">The default is <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span></span> <span data-ttu-id="eabb9-106">Tento proces spotřebovává až 30 procent více času, než jednoduše přihlašujete a šifrujete na základě celkové velikosti zprávy (zmenšením zprávy, větší dopad na výkon).</span><span class="sxs-lookup"><span data-stu-id="eabb9-106">This process consumes up to 30 percent more time than simply signing and encrypting based on the overall message size (the smaller the message, the greater the performance impact).</span></span> <span data-ttu-id="eabb9-107">Zakázání šifrování podpisu ale může útočníkovi umožnit odhadnout obsah zprávy.</span><span class="sxs-lookup"><span data-stu-id="eabb9-107">Disabling encryption of the signature, however, might allow an attacker to guess the content of the message.</span></span> <span data-ttu-id="eabb9-108">To je možné, protože element signatura obsahuje hodnotu hash prostého textu každé podepsané části ve zprávě.</span><span class="sxs-lookup"><span data-stu-id="eabb9-108">This is possible because the signature element contains the hash code of the plain text of every signed part in the message.</span></span> <span data-ttu-id="eabb9-109">I když je text zprávy ve výchozím nastavení zašifrovaný, nešifrovaný podpis obsahuje před šifrováním kód hash těla zprávy.</span><span class="sxs-lookup"><span data-stu-id="eabb9-109">For example, although the message body is encrypted by default, the unencrypted signature contains the hash code of the message body before the encryption.</span></span> <span data-ttu-id="eabb9-110">Pokud je sada možných hodnot pro odstraněnou a šifrovanou část malá, útočník může obsah odvodit, protože si vyhledá hodnotu hash.</span><span class="sxs-lookup"><span data-stu-id="eabb9-110">If the set of possible values for the signed and encrypted part is small, an attacker might be able to deduce the contents by looking at the hash value.</span></span> <span data-ttu-id="eabb9-111">Šifrování signatury zmírnit tento vektor útoku.</span><span class="sxs-lookup"><span data-stu-id="eabb9-111">Encrypting the signature mitigates this attack vector.</span></span>  
  
 <span data-ttu-id="eabb9-112">Proto zakažte šifrování signatury pouze v případě, že je hodnota obsahu nízká nebo když je množina možných hodnot obsahu velká a nedeterministické a zisk výkonu je důležitější než zmírnění výše popsaného útoku.</span><span class="sxs-lookup"><span data-stu-id="eabb9-112">Therefore, disable encryption of the signature only when the value of the content is low or the set of possible content values is large and nondeterministic, and the performance gain is more important than mitigating the attack described above.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="eabb9-113">Pokud není v zašifrované zprávě žádná zpráva, element signatura není zašifrovaný, i když <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> je vlastnost nebo <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> nastavená na <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span><span class="sxs-lookup"><span data-stu-id="eabb9-113">If there is nothing in the message that is encrypted, the signature element is not encrypted, even when the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property is set to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span></span> <span data-ttu-id="eabb9-114">K tomuto chování dochází i u vazeb poskytovaných systémem. všechny vazby poskytnuté systémem mají pořadí ochrany zpráv nastavené na `SignBeforeEncryptAndEncryptSignature`.</span><span class="sxs-lookup"><span data-stu-id="eabb9-114">This behavior occurs even with system-provided bindings; all system-provided bindings have the message protection order set to `SignBeforeEncryptAndEncryptSignature`.</span></span> <span data-ttu-id="eabb9-115">Technologie WCF vygeneruje Web Services Description Language (WSDL), ale bude stále obsahovat `<sp:EncryptSignature>` kontrolní výraz.</span><span class="sxs-lookup"><span data-stu-id="eabb9-115">However, the Web Services Description Language (WSDL) WCF generates will still contain the `<sp:EncryptSignature>` assertion.</span></span>  
  
### <a name="to-disable-digital-signing"></a><span data-ttu-id="eabb9-116">Zakázání digitálního podepisování</span><span class="sxs-lookup"><span data-stu-id="eabb9-116">To disable digital signing</span></span>  
  
1. <span data-ttu-id="eabb9-117">Vytvoření <xref:System.ServiceModel.Channels.CustomBinding>.</span><span class="sxs-lookup"><span data-stu-id="eabb9-117">Create a <xref:System.ServiceModel.Channels.CustomBinding>.</span></span> <span data-ttu-id="eabb9-118">Další informace najdete v tématu [jak: Vytvořte vlastní vazbu pomocí SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span><span class="sxs-lookup"><span data-stu-id="eabb9-118">For more information, see [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span></span>  
  
2. <span data-ttu-id="eabb9-119">Přidejte <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> do kolekce <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> vazeb buď nebo, a.</span><span class="sxs-lookup"><span data-stu-id="eabb9-119">Add either an <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> to the binding collection.</span></span>  
  
3. <span data-ttu-id="eabb9-120">Nastavte vlastnost na <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>nebo nastavte <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> vlastnost na <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>. <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="eabb9-120">Set the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>, or set the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="eabb9-121">Viz také:</span><span class="sxs-lookup"><span data-stu-id="eabb9-121">See also</span></span>

- [<span data-ttu-id="eabb9-122">Možnosti zabezpečení u vlastních vazeb</span><span class="sxs-lookup"><span data-stu-id="eabb9-122">Security Capabilities with Custom Bindings</span></span>](../../../../docs/framework/wcf/feature-details/security-capabilities-with-custom-bindings.md)
