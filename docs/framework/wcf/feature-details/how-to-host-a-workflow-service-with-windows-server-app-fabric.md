---
title: 'Postupy: Hostování služby pracovního procesu pomocí Windows Server App Fabric'
ms.date: 03/30/2017
ms.assetid: 83b62cce-5fc2-4c6d-b27c-5742ba3bac73
ms.openlocfilehash: 519c76e3e46e01b5e8c696234e39fefbb9f8ad06
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/09/2020
ms.locfileid: "84593305"
---
# <a name="how-to-host-a-workflow-service-with-windows-server-app-fabric"></a><span data-ttu-id="3aa91-102">Postupy: Hostování služby pracovního procesu pomocí Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="3aa91-102">How to: Host a Workflow Service with Windows Server App Fabric</span></span>

<span data-ttu-id="3aa91-103">Hostování služeb pracovních postupů v App Fabric se podobá hostování v rámci služby IIS/.</span><span class="sxs-lookup"><span data-stu-id="3aa91-103">Hosting workflow services in App Fabric is similar to hosting under IIS/WAS.</span></span> <span data-ttu-id="3aa91-104">Jediným rozdílem je, že prostředky aplikace App Fabric poskytují nasazení, monitorování a správu služeb pracovních postupů.</span><span class="sxs-lookup"><span data-stu-id="3aa91-104">The only difference is the tools App Fabric provides for deploying, monitoring, and managing workflow services.</span></span> <span data-ttu-id="3aa91-105">V tomto tématu se používá služba pracovního postupu vytvořená v [tématu Vytvoření dlouhotrvající služby pracovního postupu](creating-a-long-running-workflow-service.md).</span><span class="sxs-lookup"><span data-stu-id="3aa91-105">This topic uses the workflow service created in the [Creating a Long-running Workflow Service](creating-a-long-running-workflow-service.md).</span></span> <span data-ttu-id="3aa91-106">Toto téma vás provede vytvořením služby pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="3aa91-106">That topic will walk you through creating a workflow service.</span></span> <span data-ttu-id="3aa91-107">V tomto tématu se dozvíte, jak hostovat službu pracovního postupu pomocí App Fabric.</span><span class="sxs-lookup"><span data-stu-id="3aa91-107">This topic will explain how to host the workflow service using App Fabric.</span></span> <span data-ttu-id="3aa91-108">Další informace o Windows Server App Fabric najdete v [dokumentaci k Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="3aa91-108">For more information about Windows Server App Fabric, see [Windows Server App Fabric Documentation](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10)).</span></span> <span data-ttu-id="3aa91-109">Před dokončením následujících kroků se ujistěte, že máte nainstalované Windows Server App Fabric.</span><span class="sxs-lookup"><span data-stu-id="3aa91-109">Before completing the steps below make sure you have Windows Server App Fabric installed.</span></span>  <span data-ttu-id="3aa91-110">Tuto možnost otevřete Internetová informační služba (inetmgr. exe) tak, že kliknete na název vašeho serveru v zobrazení **připojení** , kliknete na weby a kliknete na **výchozí web**.</span><span class="sxs-lookup"><span data-stu-id="3aa91-110">To do this open up Internet Information Services (inetmgr.exe), click your server name in the **Connections** view, click Sites, and click **Default Web Site**.</span></span> <span data-ttu-id="3aa91-111">Na pravé straně obrazovky by se měla zobrazit část s názvem **App Fabric**.</span><span class="sxs-lookup"><span data-stu-id="3aa91-111">In the right-hand side of the screen you should see a section called **App Fabric**.</span></span> <span data-ttu-id="3aa91-112">Pokud tuto část nevidíte (bude v horní části pravého podokna), nemáte nainstalovanou aplikaci Fabric.</span><span class="sxs-lookup"><span data-stu-id="3aa91-112">If you don’t see this section (it will be on the top of the right-hand pane) you do not have App Fabric installed.</span></span> <span data-ttu-id="3aa91-113">Další informace o instalaci Windows serveru App Fabric najdete v tématu [instalace Windows serveru App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee790960(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="3aa91-113">For more information about installing Windows Server App Fabric see [Installing Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee790960(v=azure.10)).</span></span>  
  
### <a name="creating-a-simple-workflow-service"></a><span data-ttu-id="3aa91-114">Vytvoření jednoduché služby pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="3aa91-114">Creating a Simple Workflow Service</span></span>  
  
1. <span data-ttu-id="3aa91-115">Otevřete Visual Studio 2012 a načtěte řešení OrderProcessing, které jste vytvořili v tématu [Vytvoření dlouhodobě spuštěné služby pracovního postupu](creating-a-long-running-workflow-service.md) .</span><span class="sxs-lookup"><span data-stu-id="3aa91-115">Open Visual Studio 2012 and load the OrderProcessing solution you created in the [Creating a Long-running Workflow Service](creating-a-long-running-workflow-service.md) topic.</span></span>  
  
2. <span data-ttu-id="3aa91-116">Klikněte pravým tlačítkem na projekt **OrderService** a vyberte **vlastnosti** a vyberte kartu **Web** .</span><span class="sxs-lookup"><span data-stu-id="3aa91-116">Right click the **OrderService** project and select **Properties** and select the **Web** tab.</span></span>  
  
3. <span data-ttu-id="3aa91-117">V části **spouštěcí akce** stránky vlastností vyberte **konkrétní stránku** a do pole pro úpravy zadejte Service1. xamlx.</span><span class="sxs-lookup"><span data-stu-id="3aa91-117">In the **Start Action** section of the property page select **Specific Page** and type Service1.xamlx in the edit box.</span></span>  
  
4. <span data-ttu-id="3aa91-118">V části **servery** na stránce vlastností vyberte **použít místní webový server služby IIS** a zadejte následující adresu URL: `http://localhost/OrderService` .</span><span class="sxs-lookup"><span data-stu-id="3aa91-118">In the **Servers** section of the property page select **Use Local IIS Web Server** and type in the following URL: `http://localhost/OrderService`.</span></span>  
  
5. <span data-ttu-id="3aa91-119">Klikněte na tlačítko **vytvořit virtuální adresář** .</span><span class="sxs-lookup"><span data-stu-id="3aa91-119">Click the **Create Virtual Directory** button.</span></span> <span data-ttu-id="3aa91-120">Tím se vytvoří nový virtuální adresář a nastaví se projekt ke zkopírování potřebných souborů do virtuálního adresáře při sestavení projektu.</span><span class="sxs-lookup"><span data-stu-id="3aa91-120">This will create a new virtual directory and set up the project to copy the needed files to the virtual directory when the project is built.</span></span>  <span data-ttu-id="3aa91-121">Případně můžete ručně zkopírovat soubor. xamlx, Web. config a všechny potřebné knihovny DLL do virtuálního adresáře.</span><span class="sxs-lookup"><span data-stu-id="3aa91-121">Alternatively you could manually copy the .xamlx, the web.config, and any needed DLLs to the virtual directory.</span></span>  
  
### <a name="configuring-a-workflow-service-hosted-in-windows-server-app-fabric"></a><span data-ttu-id="3aa91-122">Konfigurace služby pracovního postupu hostovaného v systému Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="3aa91-122">Configuring a Workflow Service Hosted in Windows Server App Fabric</span></span>  
  
1. <span data-ttu-id="3aa91-123">Otevřete Internetová informační služba Manager (inetmgr. exe).</span><span class="sxs-lookup"><span data-stu-id="3aa91-123">Open Internet Information Services Manager (inetmgr.exe).</span></span>  
  
2. <span data-ttu-id="3aa91-124">V podokně **připojení** přejděte do virtuálního adresáře OrderService.</span><span class="sxs-lookup"><span data-stu-id="3aa91-124">Navigate to the OrderService virtual directory in the **Connections** pane.</span></span>  
  
3. <span data-ttu-id="3aa91-125">Klikněte pravým tlačítkem na OrderService a vyberte **Spravovat WCF a služby WF**, **Konfigurovat...**.</span><span class="sxs-lookup"><span data-stu-id="3aa91-125">Right click OrderService and select **Manage WCF and WF Services**, **Configure…**.</span></span> <span data-ttu-id="3aa91-126">Zobrazí se dialogové okno **konfigurovat WCF a WF pro aplikaci** .</span><span class="sxs-lookup"><span data-stu-id="3aa91-126">The **Configure WCF and WF for Application** dialog box is displayed.</span></span>  
  
4. <span data-ttu-id="3aa91-127">Vyberte kartu **Obecné** a zobrazte Obecné informace o aplikaci, jak je znázorněno na následujícím snímku obrazovky.</span><span class="sxs-lookup"><span data-stu-id="3aa91-127">Select the **General** tab to display general information about the application as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="3aa91-128">![Karta Obecné v dialogovém okně Konfigurace prostředků infrastruktury aplikace](media/appfabricconfiguration-general.gif "AppFabricConfiguration – obecné")</span><span class="sxs-lookup"><span data-stu-id="3aa91-128">![General tab of the App Fabric Configuration dialog](media/appfabricconfiguration-general.gif "AppFabricConfiguration-General")</span></span>  
  
5. <span data-ttu-id="3aa91-129">Vyberte kartu **monitorování** . Tato možnost zobrazuje různá nastavení monitorování, jak je znázorněno na následujícím snímku obrazovky.</span><span class="sxs-lookup"><span data-stu-id="3aa91-129">Select the **Monitoring** tab. This shows various monitoring settings as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="3aa91-130">![Karta monitorování konfigurace prostředků infrastruktury aplikace](media/appfabricconfiguration-monitoring.gif "AppFabricConfiguration – monitorování")</span><span class="sxs-lookup"><span data-stu-id="3aa91-130">![App Fabric Configuration Monitoring tab](media/appfabricconfiguration-monitoring.gif "AppFabricConfiguration-Monitoring")</span></span>  
  
     <span data-ttu-id="3aa91-131">Další informace o konfiguraci monitorování služby pracovního postupu v App Fabric najdete v tématu [Konfigurace monitorování pomocí prostředků infrastruktury aplikace](https://docs.microsoft.com/previous-versions/appfabric/ee677384(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="3aa91-131">For more information about configuring workflow service monitoring in App Fabric see [Configuring monitoring with App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677384(v=azure.10)).</span></span>  
  
6. <span data-ttu-id="3aa91-132">Vyberte kartu **trvalosti pracovního postupu** . To vám umožní nakonfigurovat aplikaci tak, aby používala výchozího zprostředkovatele trvalosti aplikace App Fabric, jak je znázorněno na následujícím snímku obrazovky.</span><span class="sxs-lookup"><span data-stu-id="3aa91-132">Select the **Workflow Persistence** tab. This allows you to configure your application to use App Fabric’s default persistence provider as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="3aa91-133">![Trvalá konfigurace aplikace Fabric &#45;](media/appfabricconfiguration-persistence.gif "AppFabricConfiguration – trvalost")</span><span class="sxs-lookup"><span data-stu-id="3aa91-133">![App Fabric Configuration &#45; Persistence](media/appfabricconfiguration-persistence.gif "AppFabricConfiguration-Persistence")</span></span>  
  
     <span data-ttu-id="3aa91-134">Další informace o konfiguraci trvalosti pracovního postupu ve Windows serveru App Fabric najdete v tématu [Konfigurace trvalosti pracovního postupu v App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677353(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="3aa91-134">For more information about configuring workflow persistence in Windows Server App Fabric see [Configuring Workflow Persistence in App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677353(v=azure.10)).</span></span>  
  
7. <span data-ttu-id="3aa91-135">Vyberte kartu **Správa hostitele pracovního postupu** . To vám umožní určit, kdy se mají instance služby nečinných pracovních postupů uvolnit a zachovat, jak je znázorněno na následujícím snímku obrazovky.</span><span class="sxs-lookup"><span data-stu-id="3aa91-135">Select the **Workflow Host Management** tab. This allows you to specify when idle workflow service instances should be unloaded and persisted as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="3aa91-136">![Správa hostitele pracovního postupu pro konfiguraci prostředků infrastruktury aplikace](media/appfabricconfiguration-management.gif "AppFabricConfiguration – Správa")</span><span class="sxs-lookup"><span data-stu-id="3aa91-136">![App Fabric Configuration  Workflow Host Management](media/appfabricconfiguration-management.gif "AppFabricConfiguration-Management")</span></span>  
  
     <span data-ttu-id="3aa91-137">Další informace o konfiguraci správy hostitele pracovního postupu najdete [v tématu Konfigurace správy hostitele pracovního postupu v App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ff383424(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="3aa91-137">For more information about workflow host management configuration see [Configuring Workflow Host Management in App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ff383424(v=azure.10)).</span></span>  
  
8. <span data-ttu-id="3aa91-138">Vyberte kartu **automatické spuštění** . To umožňuje zadat nastavení automatického spuštění pro služby pracovního postupu v aplikaci, jak je znázorněno na následujícím snímku obrazovky.</span><span class="sxs-lookup"><span data-stu-id="3aa91-138">Select the **Auto-Start** tab. This allows you to specify auto-start settings for the workflow services in the application as shown in the following screenshot.</span></span>  
  
     ![Snímek obrazovky, který ukazuje automatickou&#45;spuštění konfigurace prostředků infrastruktury aplikace](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-auto-start-configuration.gif)  
  
     <span data-ttu-id="3aa91-140">Další informace o konfiguraci automatického spuštění najdete v tématu [Konfigurace automatického startu pomocí App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677261(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="3aa91-140">For more information about configuring Auto-Start see [Configuring Auto-Start with App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677261(v=azure.10)).</span></span>  
  
9. <span data-ttu-id="3aa91-141">Vyberte kartu **omezování** . To vám umožní nakonfigurovat nastavení omezování pro službu pracovního postupu, jak je znázorněno na následujícím snímku obrazovky.</span><span class="sxs-lookup"><span data-stu-id="3aa91-141">Select the **Throttling** tab. This allows you to configure throttling settings for the workflow service as shown in the following screenshot.</span></span>  
  
     ![Snímek obrazovky, který ukazuje konfiguraci omezení aplikace App Fabric.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-throttling-configuration.gif)  
  
     <span data-ttu-id="3aa91-143">Další informace o konfiguraci omezení najdete v tématu [Konfigurace omezování pomocí App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677261(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="3aa91-143">For more information about configuring throttling see [Configuring Throttling with App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677261(v=azure.10)).</span></span>  
  
10. <span data-ttu-id="3aa91-144">Vyberte kartu **zabezpečení** . To vám umožní nakonfigurovat nastavení zabezpečení pro aplikaci, jak je znázorněno na následujícím snímku obrazovky.</span><span class="sxs-lookup"><span data-stu-id="3aa91-144">Select the **Security** tab. This allows you to configure security settings for the application as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="3aa91-145">![Konfigurace zabezpečení prostředků infrastruktury aplikace](media/appfabricconfiguration-security.gif "AppFabricConfiguration – zabezpečení")</span><span class="sxs-lookup"><span data-stu-id="3aa91-145">![App Fabric Security Configuration](media/appfabricconfiguration-security.gif "AppFabricConfiguration-Security")</span></span>  
  
     <span data-ttu-id="3aa91-146">Další informace o konfiguraci zabezpečení pomocí Windows Server App Fabric najdete v tématu [Konfigurace zabezpečení pomocí prostředků infrastruktury aplikace](https://docs.microsoft.com/previous-versions/appfabric/ee677278(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="3aa91-146">For more information about configuring security with Windows Server App Fabric see [Configuring Security with App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677278(v=azure.10)).</span></span>  
  
### <a name="using-windows-server-app-fabric"></a><span data-ttu-id="3aa91-147">Pomocí Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="3aa91-147">Using Windows Server App Fabric</span></span>  
  
1. <span data-ttu-id="3aa91-148">Sestavte řešení a zkopírujte potřebné soubory do virtuálního adresáře.</span><span class="sxs-lookup"><span data-stu-id="3aa91-148">Build the solution to copy the necessary files to the virtual directory.</span></span>  
  
2. <span data-ttu-id="3aa91-149">Klikněte pravým tlačítkem na projekt OrderClient a vyberte **ladit**, **spustit novou instanci** a spusťte klientskou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="3aa91-149">Right click the OrderClient project and select **Debug**, **Start New Instance** to launch the client application.</span></span>  
  
3. <span data-ttu-id="3aa91-150">Klient se spustí a Visual Studio zobrazí dialogové okno **připojit upozornění zabezpečení** , klikněte na tlačítko **Nepřipojeno** .</span><span class="sxs-lookup"><span data-stu-id="3aa91-150">The client will run and Visual Studio will display an **Attach Security Warning** dialog box, click the **Don’t Attach** button.</span></span> <span data-ttu-id="3aa91-151">To oznamuje, že se Visual Studio nepřipojí k procesu služby IIS pro ladění.</span><span class="sxs-lookup"><span data-stu-id="3aa91-151">This tells Visual Studio to not attach to the IIS process for debugging.</span></span>  
  
4. <span data-ttu-id="3aa91-152">Klientská aplikace okamžitě zavolá službu pracovního postupu a potom počká.</span><span class="sxs-lookup"><span data-stu-id="3aa91-152">The client application will immediately call the Workflow service and then wait.</span></span> <span data-ttu-id="3aa91-153">Služba pracovního postupu přejde do stavu nečinnosti a bude trvalá.</span><span class="sxs-lookup"><span data-stu-id="3aa91-153">The workflow service will go idle and be persisted.</span></span> <span data-ttu-id="3aa91-154">Můžete to ověřit tak, že spustíte Internetová informační služba (inetmgr. exe), přejdete do OrderService v podokně připojení a vyberete ho.</span><span class="sxs-lookup"><span data-stu-id="3aa91-154">You can verify this by starting Internet Information Services (inetmgr.exe), navigating to the OrderService in the Connections pane and selecting it.</span></span> <span data-ttu-id="3aa91-155">Potom v pravém podokně klikněte na ikonu řídicí panel prostředků App Fabric.</span><span class="sxs-lookup"><span data-stu-id="3aa91-155">Next, click the App Fabric Dashboard icon in the right-hand pane.</span></span> <span data-ttu-id="3aa91-156">V části trvalé instance WF se zobrazí jedna trvalá instance služby pracovního postupu, jak je znázorněno na následujícím snímku obrazovky.</span><span class="sxs-lookup"><span data-stu-id="3aa91-156">Under Persisted WF Instances you will see there is one persisted workflow service instance as shown in the following screenshot.</span></span>  
  
     ![Snímek obrazovky zobrazující řídicí panel prostředků App Fabric](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-dashboard.gif)  
  
     <span data-ttu-id="3aa91-158">V **historii instance WF** se zobrazí informace o službě pracovního postupu, jako je počet aktivací služby pracovního postupu, počet dokončení instance služby pracovního postupu a počet instancí pracovních postupů s chybami.</span><span class="sxs-lookup"><span data-stu-id="3aa91-158">The **WF Instance History** lists information about the workflow service such as the number of workflow service activations, the number of workflow service instance completions, and the number of workflow instances with failures.</span></span> <span data-ttu-id="3aa91-159">V části aktivní nebo nečinné instance se zobrazí odkaz na odkaz Zobrazit další informace o instancích nečinných pracovních postupů, jak je znázorněno na následujícím snímku obrazovky.</span><span class="sxs-lookup"><span data-stu-id="3aa91-159">Under Active or Idle instances a link will be displayed, clicking on the link will display more information about the idle workflow instances as shown in the following screenshot.</span></span>  
  
     ![Snímek obrazovky, který ukazuje podrobnosti trvalé instance pracovního postupu.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/persisted-workflow-instance-detail.gif)  
  
     <span data-ttu-id="3aa91-161">Další informace o funkcích Windows Server App Fabric a o tom, jak je používat, najdete v tématu [funkce hostování Windows serveru App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10)) .</span><span class="sxs-lookup"><span data-stu-id="3aa91-161">For more information about Windows Server App Fabric features and how to use them see [Windows Server App Fabric Hosting Features](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3aa91-162">Viz také</span><span class="sxs-lookup"><span data-stu-id="3aa91-162">See also</span></span>

- [<span data-ttu-id="3aa91-163">Vytvoření dlouhodobé služby pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="3aa91-163">Creating a Long-running Workflow Service</span></span>](creating-a-long-running-workflow-service.md)
- <span data-ttu-id="3aa91-164">[Funkce hostování technologie Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="3aa91-164">[Windows Server App Fabric Hosting Features](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span></span>
- <span data-ttu-id="3aa91-165">[Instalace Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee790960(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="3aa91-165">[Installing Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee790960(v=azure.10))</span></span>
- <span data-ttu-id="3aa91-166">[Dokumentace k Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="3aa91-166">[Windows Server App Fabric Documentation](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10))</span></span>
