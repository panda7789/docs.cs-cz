---
title: Hostování v aplikaci služby pro Windows
ms.date: 03/30/2017
ms.assetid: f4199998-27f3-4dd9-aee4-0a4addfa9f24
ms.openlocfilehash: ba49d123508ceb8da677d1e9c67721e4f86aa7c3
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/09/2020
ms.locfileid: "84597329"
---
# <a name="hosting-in-a-windows-service-application"></a><span data-ttu-id="0f26f-102">Hostování v aplikaci služby pro Windows</span><span class="sxs-lookup"><span data-stu-id="0f26f-102">Hosting in a Windows Service Application</span></span>
<span data-ttu-id="0f26f-103">Služby systému Windows (dříve označované jako služby systému Windows NT) poskytují model procesu, zvláště vhodný pro aplikace, které musí být spuštěny v dlouhodobém spustitelném souboru a nezobrazují žádnou formu uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="0f26f-103">Windows services (formerly known as Windows NT services) provide a process model particularly suited to applications that must live in a long-running executable and do not display any form of user interface.</span></span> <span data-ttu-id="0f26f-104">Doba platnosti procesu aplikace služby systému Windows je spravována správcem řízení služeb (SCM), který umožňuje spustit, zastavit a pozastavit aplikace služby systému Windows.</span><span class="sxs-lookup"><span data-stu-id="0f26f-104">The process lifetime of a Windows service application is managed by the service control manager (SCM), which allows you to start, stop, and pause Windows service applications.</span></span> <span data-ttu-id="0f26f-105">Proces služby systému Windows můžete nakonfigurovat tak, aby se spouštěl automaticky při spuštění počítače a aby byl vhodný hostující prostředí pro aplikace "Always On".</span><span class="sxs-lookup"><span data-stu-id="0f26f-105">You can configure a Windows service process to start automatically when the computer starts, making it a suitable hosting environment for "always on" applications.</span></span> <span data-ttu-id="0f26f-106">Další informace o aplikacích služby systému Windows najdete v tématu [aplikace služby systému Windows](https://go.microsoft.com/fwlink/?LinkId=89450).</span><span class="sxs-lookup"><span data-stu-id="0f26f-106">For more information about Windows service applications, see [Windows Service Applications](https://go.microsoft.com/fwlink/?LinkId=89450).</span></span>  
  
 <span data-ttu-id="0f26f-107">Aplikace, které hostují dlouhodobě běžící služby Windows Communication Foundation (WCF), sdílejí mnoho vlastností se službami systému Windows.</span><span class="sxs-lookup"><span data-stu-id="0f26f-107">Applications that host long-running Windows Communication Foundation (WCF) services share many characteristics with Windows services.</span></span> <span data-ttu-id="0f26f-108">Konkrétně služby WCF jsou dlouhodobě běžící spustitelné soubory, které nekomunikují přímo s uživatelem, a proto neimplementují žádné formy uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="0f26f-108">In particular, WCF services are long-running server executables that do not interact directly with the user and therefore do not implement any form of user interface.</span></span> <span data-ttu-id="0f26f-109">V takovém případě hostující služby WCF uvnitř aplikace služby systému Windows je jednou z možností pro vytváření robustních a dlouhotrvajících aplikací WCF.</span><span class="sxs-lookup"><span data-stu-id="0f26f-109">As such, hosting WCF services inside of a Windows service application is one option for building robust, long-running, WCF applications.</span></span>  
  
 <span data-ttu-id="0f26f-110">Vývojáři WCF se často musí rozhodnout, jestli mají hostovat svoji aplikaci WCF v rámci aplikace služby systému Windows nebo uvnitř hostitelského prostředí služby Internetová informační služba (IIS) nebo aktivační služba procesů systému Windows (WAS).</span><span class="sxs-lookup"><span data-stu-id="0f26f-110">Often, WCF developers must decide whether to host their WCF application inside of a Windows service application or inside of the Internet Information Services (IIS) or Windows Process Activation Service (WAS) hosting environment.</span></span> <span data-ttu-id="0f26f-111">Je vhodné zvážit použití aplikací služby systému Windows za následujících podmínek:</span><span class="sxs-lookup"><span data-stu-id="0f26f-111">You should consider using Windows service applications under the following conditions:</span></span>  
  
- <span data-ttu-id="0f26f-112">Vaše aplikace vyžaduje explicitní aktivaci.</span><span class="sxs-lookup"><span data-stu-id="0f26f-112">Your application requires explicit activation.</span></span> <span data-ttu-id="0f26f-113">Například byste měli použít služby systému Windows, pokud se vaše aplikace musí spustit automaticky při spuštění serveru namísto dynamického spuštění v reakci na první příchozí zprávu.</span><span class="sxs-lookup"><span data-stu-id="0f26f-113">For example, you should use Windows services when your application must start automatically when the server starts instead of being dynamically started in response to the first incoming message.</span></span>  
  
- <span data-ttu-id="0f26f-114">Proces, který hostuje vaši aplikaci, musí po spuštění zůstat spuštěný.</span><span class="sxs-lookup"><span data-stu-id="0f26f-114">The process that hosts your application must remain running once started.</span></span> <span data-ttu-id="0f26f-115">Po spuštění zůstane proces služby systému Windows spuštěný, pokud explicitně nevypne správce serveru pomocí Správce řízení služeb.</span><span class="sxs-lookup"><span data-stu-id="0f26f-115">Once started, a Windows service process remains running unless explicitly shut down by a server administrator using the service control manager.</span></span> <span data-ttu-id="0f26f-116">Aplikace hostované ve službě IIS nebo byly spouštěny a dynamicky zastaveny, aby bylo možné využívat systémové prostředky k optimálnímu využití.</span><span class="sxs-lookup"><span data-stu-id="0f26f-116">Applications hosted in IIS or WAS may be started and stopped dynamically to make optimal use of system resources.</span></span> <span data-ttu-id="0f26f-117">Aplikace, které vyžadují explicitní kontrolu nad životností hostitelského procesu, by měly používat služby systému Windows namísto služby IIS nebo WAS.</span><span class="sxs-lookup"><span data-stu-id="0f26f-117">Applications that require explicit control over the lifetime of their hosting process should use Windows services instead of IIS or WAS.</span></span>  
  
- <span data-ttu-id="0f26f-118">Vaše služba WCF musí běžet na Windows serveru 2003 a používat jiné přenosy než HTTP.</span><span class="sxs-lookup"><span data-stu-id="0f26f-118">Your WCF service must run on Windows Server 2003 and use transports other than HTTP.</span></span> <span data-ttu-id="0f26f-119">Ve Windows serveru 2003 je hostitelské prostředí IIS 6,0 omezené jenom na komunikaci HTTP.</span><span class="sxs-lookup"><span data-stu-id="0f26f-119">On Windows Server 2003, the IIS 6.0 hosting environment is restricted to HTTP communication only.</span></span> <span data-ttu-id="0f26f-120">Aplikacím služeb systému Windows se nevztahují toto omezení a mohou používat přenos přes WCF podporované, včetně NET. TCP, NET. pipe a NET. MSMQ.</span><span class="sxs-lookup"><span data-stu-id="0f26f-120">Windows service applications are not subject to this restriction and can use any transport WCF supports, including net.tcp, net.pipe, and net.msmq.</span></span>  
  
### <a name="to-host-wcf-inside-of-a-windows-service-application"></a><span data-ttu-id="0f26f-121">Hostování technologie WCF v rámci aplikace služby systému Windows</span><span class="sxs-lookup"><span data-stu-id="0f26f-121">To host WCF inside of a Windows service application</span></span>  
  
1. <span data-ttu-id="0f26f-122">Vytvořte aplikaci služby systému Windows.</span><span class="sxs-lookup"><span data-stu-id="0f26f-122">Create a Windows service application.</span></span> <span data-ttu-id="0f26f-123">Můžete psát aplikace služby systému Windows ve spravovaném kódu pomocí tříd v <xref:System.ServiceProcess> oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="0f26f-123">You can write Windows service applications in managed code using the classes in the <xref:System.ServiceProcess> namespace.</span></span> <span data-ttu-id="0f26f-124">Tato aplikace musí zahrnovat jednu třídu, která dědí z <xref:System.ServiceProcess.ServiceBase> .</span><span class="sxs-lookup"><span data-stu-id="0f26f-124">This application must include one class that inherits from <xref:System.ServiceProcess.ServiceBase>.</span></span>  
  
2. <span data-ttu-id="0f26f-125">Propojte životnost služeb WCF s životností aplikace služby systému Windows.</span><span class="sxs-lookup"><span data-stu-id="0f26f-125">Link the lifetime of the WCF services to the lifetime of the Windows service application.</span></span> <span data-ttu-id="0f26f-126">Obvykle chcete, aby služby WCF hostované v aplikaci služby systému Windows byly aktivní při spuštění hostující služby, zastavily naslouchání zpráv při zastavení hostitelské služby a vypnutí hostitelského procesu, když služba WCF narazí na chybu.</span><span class="sxs-lookup"><span data-stu-id="0f26f-126">Typically, you want WCF services hosted in a Windows service application to become active when the hosting service starts, stop listening for messages when the hosting service is stopped, and shut down the hosting process when the WCF service encounters an error.</span></span> <span data-ttu-id="0f26f-127">To lze provést následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="0f26f-127">This can be accomplished as follows:</span></span>  
  
    - <span data-ttu-id="0f26f-128">Přepsáním <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> otevřete jednu nebo více instancí <xref:System.ServiceModel.ServiceHost> .</span><span class="sxs-lookup"><span data-stu-id="0f26f-128">Override <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> to open one or more instances of <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="0f26f-129">Jedna aplikace služby systému Windows může hostovat několik služeb WCF, které se spouštějí a zastavují jako skupina.</span><span class="sxs-lookup"><span data-stu-id="0f26f-129">A single Windows service application can host multiple WCF services that start and stop as a group.</span></span>  
  
    - <span data-ttu-id="0f26f-130">Přepište <xref:System.ServiceProcess.ServiceBase.OnStop%2A> pro volání <xref:System.ServiceModel.Channels.CommunicationObject.Closed> na <xref:System.ServiceModel.ServiceHost> všechny spuštěné služby WCF, které byly spuštěny během <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> .</span><span class="sxs-lookup"><span data-stu-id="0f26f-130">Override <xref:System.ServiceProcess.ServiceBase.OnStop%2A> to call <xref:System.ServiceModel.Channels.CommunicationObject.Closed> on the <xref:System.ServiceModel.ServiceHost> any running WCF services that were started during <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span></span>  
  
    - <span data-ttu-id="0f26f-131">Přihlaste se k odběru <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> události <xref:System.ServiceModel.ServiceHost> a použijte <xref:System.ServiceProcess.ServiceController> třídu k ukončení aplikace služby systému Windows v případě chyby.</span><span class="sxs-lookup"><span data-stu-id="0f26f-131">Subscribe to the <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> event of <xref:System.ServiceModel.ServiceHost> and use the <xref:System.ServiceProcess.ServiceController> class to shut down the Windows service application in case of error.</span></span>  
  
     <span data-ttu-id="0f26f-132">Aplikace služby systému Windows, které hostují služby WCF, se nasazují a spravují stejným způsobem jako aplikace služby systému Windows, které nevyužívají WCF.</span><span class="sxs-lookup"><span data-stu-id="0f26f-132">Windows service applications that host WCF services are deployed and managed in the same way as Windows service applications that do not make use of WCF.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0f26f-133">Viz také</span><span class="sxs-lookup"><span data-stu-id="0f26f-133">See also</span></span>

- <xref:System.ServiceProcess>
- [<span data-ttu-id="0f26f-134">Návod: Vytvoření aplikace služby systému Windows v návrháři součástí</span><span class="sxs-lookup"><span data-stu-id="0f26f-134">Walkthrough: Creating a Windows Service Application in the Component Designer</span></span>](https://go.microsoft.com/fwlink/?LinkId=94875)
- [<span data-ttu-id="0f26f-135">Postupy: Hostování služby WCF ve spravované službě Windows</span><span class="sxs-lookup"><span data-stu-id="0f26f-135">How to: Host a WCF Service in a Managed Windows Service</span></span>](how-to-host-a-wcf-service-in-a-managed-windows-service.md)
- [<span data-ttu-id="0f26f-136">Hostitel služby Windows</span><span class="sxs-lookup"><span data-stu-id="0f26f-136">Windows Service Host</span></span>](../samples/windows-service-host.md)
- [<span data-ttu-id="0f26f-137">Architektura programování aplikace služby</span><span class="sxs-lookup"><span data-stu-id="0f26f-137">Service Application Programming Architecture</span></span>](https://go.microsoft.com/fwlink/?LinkId=94876)
- <span data-ttu-id="0f26f-138">[Funkce hostování technologie Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="0f26f-138">[Windows Server App Fabric Hosting Features](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span></span>
