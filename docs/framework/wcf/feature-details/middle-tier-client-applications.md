---
title: Klientské aplikace střední vrstvy
ms.date: 03/30/2017
ms.assetid: f9714a64-d0ae-4a98-bca0-5d370fdbd631
ms.openlocfilehash: c50223a55765f211dae710f96bffa7716ce36b32
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/09/2020
ms.locfileid: "84598811"
---
# <a name="middle-tier-client-applications"></a><span data-ttu-id="0aeb6-102">Klientské aplikace střední vrstvy</span><span class="sxs-lookup"><span data-stu-id="0aeb6-102">Middle-Tier Client Applications</span></span>
<span data-ttu-id="0aeb6-103">Toto téma popisuje různé problémy, které jsou specifické pro klientské aplikace střední vrstvy, které používají Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="0aeb6-103">This topic discusses various issues specific to middle-tier client applications that use Windows Communication Foundation (WCF).</span></span>  
  
## <a name="increasing-middle-tier-client-performance"></a><span data-ttu-id="0aeb6-104">Zvýšení výkonu klientů střední vrstvy</span><span class="sxs-lookup"><span data-stu-id="0aeb6-104">Increasing Middle-Tier Client Performance</span></span>  
 <span data-ttu-id="0aeb6-105">V porovnání s předchozími komunikačními technologiemi, jako jsou webové služby využívající ASP.NET, vytvoření instance klienta služby WCF může být složitější, protože sada funkcí WCF s bohatou funkcí je složitá.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-105">Compared to previous communications technologies, such as Web services using ASP.NET, the creation of a WCF client instance can be more complex due to the rich feature set of WCF.</span></span> <span data-ttu-id="0aeb6-106">Například když <xref:System.ServiceModel.ChannelFactory%601> je objekt otevřen, může vytvořit zabezpečenou relaci se službou, což je postup, který zvyšuje čas spuštění instance klienta.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-106">For example, when a <xref:System.ServiceModel.ChannelFactory%601> object is opened it can establish a secure session with the service, a procedure that increases the startup time for the client instance.</span></span> <span data-ttu-id="0aeb6-107">Tyto dodatečné funkce obvykle neovlivňují klientské aplikace významně, protože klient WCF provede několik volání a pak se ukončí.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-107">Typically, these additional feature capabilities do not affect client applications greatly since the WCF client makes several calls, and then closes.</span></span>  
  
 <span data-ttu-id="0aeb6-108">Klientské aplikace střední vrstvy ale můžou rychle vytvořit mnoho objektů klienta WCF a v důsledku toho se zvýší požadavky na inicializaci.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-108">Middle-tier client applications, however, can create many WCF client objects quickly and, as a result, experience increased initialization requirements.</span></span> <span data-ttu-id="0aeb6-109">Existují dva hlavní přístupy ke zvýšení výkonu aplikací střední vrstvy při volání služeb:</span><span class="sxs-lookup"><span data-stu-id="0aeb6-109">There are two main approaches to increasing the performance of middle-tier applications when calling services:</span></span>  
  
- <span data-ttu-id="0aeb6-110">Umožňuje uložit objekt klienta WCF do mezipaměti a znovu ho použít pro následné volání.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-110">Cache the WCF client object and reuse it for subsequent calls where possible.</span></span>  
  
- <span data-ttu-id="0aeb6-111">Vytvořte <xref:System.ServiceModel.ChannelFactory%601> objekt a poté pomocí tohoto objektu vytvořte nové objekty kanálu klienta WCF pro každé volání.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-111">Create a <xref:System.ServiceModel.ChannelFactory%601> object and then use that object to create new WCF client channel objects for each call.</span></span>  
  
 <span data-ttu-id="0aeb6-112">Mezi problémy, které je potřeba zvážit při použití těchto přístupů, patří:</span><span class="sxs-lookup"><span data-stu-id="0aeb6-112">Issues to consider when using these approaches include:</span></span>  
  
- <span data-ttu-id="0aeb6-113">Pokud služba udržuje stav specifický pro konkrétního klienta pomocí relace, nemůžete znovu použít klienta WCF prostřední vrstvy s požadavky na vrstvu na více klientů, protože stav služby je svázán s klientem střední vrstvy.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-113">If the service is maintaining a client-specific state by using a session, then you cannot reuse the middle-tier WCF client with multiple-client tier requests because the service's state is tied to that of the middle-tier client.</span></span>  
  
- <span data-ttu-id="0aeb6-114">Pokud je nutné, aby služba prováděla ověřování pro každého klienta, je nutné vytvořit nového klienta pro každý příchozí požadavek na střední úrovni místo opětovného použití klienta WCF střední vrstvy (nebo objektu kanálu klienta WCF), protože po vytvoření klienta služby WCF (nebo) nelze změnit pověření klienta <xref:System.ServiceModel.ChannelFactory%601> .</span><span class="sxs-lookup"><span data-stu-id="0aeb6-114">If the service must perform authentication on a per-client basis, you must create a new client for each incoming request on the middle tier instead of reusing the middle-tier WCF client (or WCF client channel object) because the client credentials of the middle tier cannot be modified after the WCF client (or <xref:System.ServiceModel.ChannelFactory%601>) has been created.</span></span>  
  
- <span data-ttu-id="0aeb6-115">I když kanály a klienti vytvořené kanály jsou bezpečné pro přístup z více vláken, nemusí podporovat současně zápis více než jedné zprávy na daný přenos.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-115">While channels and clients created by the channels are thread-safe, they might not support writing more than one message to the wire concurrently.</span></span> <span data-ttu-id="0aeb6-116">Pokud posíláte velké zprávy, zejména pokud streamování, může operace odeslání blokovat čekání na dokončení jiného odeslání.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-116">If you are sending large messages, particularly if streaming, the send operation might block waiting for another send to complete.</span></span> <span data-ttu-id="0aeb6-117">To způsobuje dvě druhy problémů: nedostatek souběžnosti a možnost zablokování, pokud se tok ovládacího prvku vrátí ke službě, který kanál znovu používá (to znamená, že sdílený klient volá službu, jejíž cesta kódu má za následek zpětné volání do sdíleného klienta).</span><span class="sxs-lookup"><span data-stu-id="0aeb6-117">This causes two sorts of problems: a lack of concurrency and the possibility of deadlock if the flow of control returns to the service reusing the channel (that is, the shared client calls a service whose code path results in a callback to the shared client).</span></span> <span data-ttu-id="0aeb6-118">To platí bez ohledu na typ klienta služby WCF, který znovu použijete.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-118">This is true regardless of the type of WCF client you reuse.</span></span>  
  
- <span data-ttu-id="0aeb6-119">Je potřeba zpracovat chybové kanály bez ohledu na to, jestli kanál sdílíte.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-119">You must handle faulted channels regardless of whether you share the channel.</span></span> <span data-ttu-id="0aeb6-120">Když se kanály znovu použijí, může kanál chyb zabrat víc než jednu nevyřízenou žádost nebo odeslat.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-120">When channels are reused, however, a faulting channel can take down more than one pending request or send.</span></span>  
  
 <span data-ttu-id="0aeb6-121">Příklad, který ukazuje osvědčené postupy pro opakované použití klienta pro více požadavků, najdete v tématu [datové vazby v klientovi ASP.NET](../samples/data-binding-in-an-aspnet-client.md).</span><span class="sxs-lookup"><span data-stu-id="0aeb6-121">For an example that demonstrates best practices for reusing a client for multiple requests, see [Data Binding in an ASP.NET Client](../samples/data-binding-in-an-aspnet-client.md).</span></span>  
  
 <span data-ttu-id="0aeb6-122">Kromě toho můžete zvýšit výkon při spuštění pro tyto klienty, kteří používají datové typy, které jsou serializovatelný pomocí <xref:System.Xml.Serialization.XmlSerializer> generování a kompilování serializace kódu pro tyto datové typy za běhu, což může vést k pomalému spuštění výkonu.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-122">In addition, you can increase the startup performance for those clients that use data types that are serializable using the <xref:System.Xml.Serialization.XmlSerializer> generate and compile serialization code for those data types at runtime, which can result in slow start-up performance.</span></span> <span data-ttu-id="0aeb6-123">Nástroj pro měření [metadat třídy (Svcutil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) může zlepšit výkon spuštění těchto aplikací vygenerováním potřebného kódu serializace z kompilovaných sestavení pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="0aeb6-123">The [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) can improve start-up performance for these applications by generating the necessary serialization code from the compiled assemblies for the application.</span></span> <span data-ttu-id="0aeb6-124">Další informace naleznete v tématu [How to: vylepšení doby spouštění klientských aplikací WCF pomocí objektu XmlSerializer](startup-time-of-wcf-client-applications-using-the-xmlserializer.md).</span><span class="sxs-lookup"><span data-stu-id="0aeb6-124">For more information, see [How to: Improve the Startup Time of WCF Client Applications using the XmlSerializer](startup-time-of-wcf-client-applications-using-the-xmlserializer.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0aeb6-125">Viz také</span><span class="sxs-lookup"><span data-stu-id="0aeb6-125">See also</span></span>

- [<span data-ttu-id="0aeb6-126">Přístup ke službám pomocí klienta WCF</span><span class="sxs-lookup"><span data-stu-id="0aeb6-126">Accessing Services Using a WCF Client</span></span>](accessing-services-using-a-client.md)
