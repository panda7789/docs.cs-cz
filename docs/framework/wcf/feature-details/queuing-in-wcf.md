---
title: Fronty ve WCF
ms.date: 03/30/2017
ms.assetid: e98d76ba-1acf-42cd-b137-0f8214661112
ms.openlocfilehash: 710ddedeb211ae6b874e2957943dbe60425b7476
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/09/2020
ms.locfileid: "84601111"
---
# <a name="queuing-in-wcf"></a><span data-ttu-id="232ac-102">Fronty ve WCF</span><span class="sxs-lookup"><span data-stu-id="232ac-102">Queuing in WCF</span></span>
<span data-ttu-id="232ac-103">Tato část popisuje, jak používat komunikaci ve frontě v Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="232ac-103">This section describes how to use queued communication in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="queues-as-a-wcf-transport-binding"></a><span data-ttu-id="232ac-104">Fronty jako transportní vazba WCF</span><span class="sxs-lookup"><span data-stu-id="232ac-104">Queues as a WCF transport binding</span></span>  
 <span data-ttu-id="232ac-105">Ve službě WCF smlouvy určují, co se má vyměňovat.</span><span class="sxs-lookup"><span data-stu-id="232ac-105">In WCF, the contracts specify what is being exchanged.</span></span> <span data-ttu-id="232ac-106">Kontrakty jsou v závislosti na podnikovém nebo specifickém výměnou zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-106">Contracts are business-dependent or application-specific message exchanges.</span></span> <span data-ttu-id="232ac-107">Mechanismus použitý k výměně zpráv (nebo "How") je zadán ve vazbách.</span><span class="sxs-lookup"><span data-stu-id="232ac-107">The mechanism used to exchange messages (or the "how") is specified in the bindings.</span></span> <span data-ttu-id="232ac-108">Vazby v WCF zapouzdřují podrobnosti výměny zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-108">Bindings in WCF encapsulate details of the message exchange.</span></span> <span data-ttu-id="232ac-109">Zpřístupňují konfigurační ovladače pro uživatele k řízení různých aspektů přenosu nebo protokolu, který vazby představují.</span><span class="sxs-lookup"><span data-stu-id="232ac-109">They expose configuration knobs for the user to control various aspects of the transport or the protocol that the bindings represent.</span></span> <span data-ttu-id="232ac-110">Zařazení do fronty ve službě WCF se považuje za jakoukoliv jinou přenosovou vazbu, což je velkou výhodou pro mnoho aplikací služby Řízení front.</span><span class="sxs-lookup"><span data-stu-id="232ac-110">Queuing in WCF is treated like any other transport binding, which is a big advantage for many queuing applications.</span></span> <span data-ttu-id="232ac-111">V současné době se mnoho aplikací služby Řízení front zapisuje odlišně od jiných distribuovaných aplikací ve stylu vzdáleného volání procedur (RPC), což usnadňuje sledování a údržbu.</span><span class="sxs-lookup"><span data-stu-id="232ac-111">Today, many queuing applications are written differently from other remote procedure call (RPC)-style distributed applications, making it harder to follow and maintain.</span></span> <span data-ttu-id="232ac-112">Pomocí služby WCF je styl psaní distribuované aplikace mnohem stejný, což usnadňuje sledování a údržbu.</span><span class="sxs-lookup"><span data-stu-id="232ac-112">With WCF, the style of writing a distributed application is much the same, making it easier to follow and maintain.</span></span> <span data-ttu-id="232ac-113">Kromě toho tím, že se mechanizmus výměny nezávisle na obchodní logice nakonfiguruje, je snazší nakonfigurovat přenos nebo provádět změny, aniž by to ovlivnilo kód specifický pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="232ac-113">Moreover, by factoring out the mechanism of exchange separately from the business logic, it is easier to configure the transport or make changes to it without affecting application specific code.</span></span> <span data-ttu-id="232ac-114">Následující obrázek znázorňuje strukturu služby WCF a klienta pomocí služby MSMQ jako přenosu.</span><span class="sxs-lookup"><span data-stu-id="232ac-114">The following figure illustrates the structure of a WCF service and client using MSMQ as a transport.</span></span>  
  
 <span data-ttu-id="232ac-115">![Diagram aplikace ve frontě](media/distributed-queue-figure.jpg "Distribuované – fronta – obrázek")</span><span class="sxs-lookup"><span data-stu-id="232ac-115">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="232ac-116">Jak vidíte předchozí obrázek, klient a služba musí definovat pouze sémantiku aplikace, to znamená kontrakt a implementaci.</span><span class="sxs-lookup"><span data-stu-id="232ac-116">As you can see from the preceding figure, the client and service must define only the application semantics, that is, the contract and implementation.</span></span> <span data-ttu-id="232ac-117">Služba konfiguruje vazbu ve frontě s preferovaným nastavením.</span><span class="sxs-lookup"><span data-stu-id="232ac-117">The service configures a queued binding with preferred settings.</span></span> <span data-ttu-id="232ac-118">Klient nástroje používá nástroj pro dokládání [metadat (Svcutil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) ke generování klienta WCF pro službu a k vygenerování konfiguračního souboru, který popisuje vazby, které se mají použít k posílání zpráv do služby.</span><span class="sxs-lookup"><span data-stu-id="232ac-118">The client uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a WCF client to the service and to generate a configuration file that describes the bindings to use to send messages to the service.</span></span> <span data-ttu-id="232ac-119">Proto klient pro odeslání zprávy ve frontě vytvoří instanci klienta WCF a vyvolá na něm operaci.</span><span class="sxs-lookup"><span data-stu-id="232ac-119">Thus, to send a queued message, the client instantiates a WCF client and invokes an operation on it.</span></span> <span data-ttu-id="232ac-120">Tím dojde k odeslání zprávy do fronty přenosů a přenos do cílové fronty.</span><span class="sxs-lookup"><span data-stu-id="232ac-120">This causes the message to be sent to the transmission queue and transferred to the target queue.</span></span> <span data-ttu-id="232ac-121">Všechny složitosti komunikace ve frontě jsou skryté od aplikace, která odesílá a přijímá zprávy.</span><span class="sxs-lookup"><span data-stu-id="232ac-121">All the complexities of queued communication are hidden from the application that is sending and receiving messages.</span></span>  
  
 <span data-ttu-id="232ac-122">Mezi upozornění týkající se vazby ve frontě ve službě WCF patří:</span><span class="sxs-lookup"><span data-stu-id="232ac-122">Caveats about queued binding in WCF include:</span></span>  
  
- <span data-ttu-id="232ac-123">Všechny operace služby musí být jednosměrné, protože výchozí vazba zařazená do fronty ve službě WCF nepodporuje duplexní komunikaci pomocí front.</span><span class="sxs-lookup"><span data-stu-id="232ac-123">All service operations must be one-way because the default queued binding in WCF does not support duplex communication using queues.</span></span> <span data-ttu-id="232ac-124">Obousměrný způsob komunikace ([Obousměrná komunikace](../samples/two-way-communication.md)) ukazuje, jak používat 2 1 kontrakty k implementaci duplexní komunikace pomocí front.</span><span class="sxs-lookup"><span data-stu-id="232ac-124">A two-way communication sample ([Two-Way Communication](../samples/two-way-communication.md)) illustrates how to use two one-way contracts to implement duplex communication using queues.</span></span>  
  
- <span data-ttu-id="232ac-125">Generování klienta WCF pomocí výměny metadat vyžaduje pro službu další koncový bod HTTP, aby se mohla dotazovat přímo za účelem generování klienta WCF a získání informací o vazbě ke správné konfiguraci komunikace zařazené do fronty.</span><span class="sxs-lookup"><span data-stu-id="232ac-125">To generate a WCF client using metadata exchange requires an additional HTTP endpoint on the service so that it can be queried directly to generate the WCF client and obtain binding information to appropriately configure queued communication.</span></span>  
  
- <span data-ttu-id="232ac-126">V závislosti na vazbě zařazené do fronty je vyžadována další konfigurace mimo WCF.</span><span class="sxs-lookup"><span data-stu-id="232ac-126">Based on the queued binding, extra configuration outside of WCF is required.</span></span> <span data-ttu-id="232ac-127">Například <xref:System.ServiceModel.NetMsmqBinding> třída, která je dodávána s rozhraním WCF, vyžaduje, abyste nakonfigurovali vazby a nakonfigurovali také minimální konfiguraci služby Řízení front zpráv (MSMQ).</span><span class="sxs-lookup"><span data-stu-id="232ac-127">For example, the <xref:System.ServiceModel.NetMsmqBinding> class that is shipped with WCF requires you to configure the bindings as well as minimally configure Message Queuing (MSMQ).</span></span>  
  
 <span data-ttu-id="232ac-128">Následující části popisují konkrétní vazby zařazené do fronty dodávané se službou WCF založené na službě MSMQ.</span><span class="sxs-lookup"><span data-stu-id="232ac-128">The following sections describe the specific queued bindings shipped with WCF, which are based on MSMQ.</span></span>  
  
### <a name="msmq"></a><span data-ttu-id="232ac-129">MSMQ</span><span class="sxs-lookup"><span data-stu-id="232ac-129">MSMQ</span></span>  
 <span data-ttu-id="232ac-130">Přenos ve frontě ve službě WCF používá ke své komunikaci ve frontě službu MSMQ.</span><span class="sxs-lookup"><span data-stu-id="232ac-130">The queued transport in WCF uses MSMQ for its queued communication.</span></span>  
  
 <span data-ttu-id="232ac-131">Služba MSMQ je dodávána jako volitelná součást se systémem Windows a spouští se jako služba NT.</span><span class="sxs-lookup"><span data-stu-id="232ac-131">MSMQ ships as an optional component with Windows and runs as an NT service.</span></span> <span data-ttu-id="232ac-132">Zachycuje zprávy pro přenos ve frontě přenosu a pro doručení do cílové fronty.</span><span class="sxs-lookup"><span data-stu-id="232ac-132">It captures messages for transmission in a transmission queue and for delivery in a target queue.</span></span> <span data-ttu-id="232ac-133">Správci fronty MSMQ implementují spolehlivý protokol pro přenos zpráv, aby se zprávy během přenosu neztratily.</span><span class="sxs-lookup"><span data-stu-id="232ac-133">The MSMQ queue managers implement a reliable message-transfer protocol so that messages are not lost in transmission.</span></span> <span data-ttu-id="232ac-134">Protokol může být buď nativní, nebo založený na protokolu SOAP, jako je protokol SRMP (SOAP Reliable Message Protocol).</span><span class="sxs-lookup"><span data-stu-id="232ac-134">The protocol can be either native or SOAP-based, such as the SOAP Reliable Message Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="232ac-135">Ve službě MSMQ můžou být fronty transakční nebo netransakční.</span><span class="sxs-lookup"><span data-stu-id="232ac-135">In MSMQ, queues can be transactional or non-transactional.</span></span> <span data-ttu-id="232ac-136">Transakční fronta umožňuje zaznamenávat a doručovat zprávy v transakci a následně ukládat trvale ve frontě.</span><span class="sxs-lookup"><span data-stu-id="232ac-136">A transactional queue allows messages to be captured and delivered in a transaction and then stored durably in the queue.</span></span> <span data-ttu-id="232ac-137">Zprávy odeslané do transakční fronty jsou přenášeny právě jednou v daném pořadí.</span><span class="sxs-lookup"><span data-stu-id="232ac-137">Messages sent to a transactional queue are transferred exactly once in order.</span></span> <span data-ttu-id="232ac-138">K posílání stálých i trvalých zpráv můžete použít netransakční frontu.</span><span class="sxs-lookup"><span data-stu-id="232ac-138">You can use a non-transactional queue to send both volatile and durable messages.</span></span> <span data-ttu-id="232ac-139">Zpráva odeslaná do netransakční fronty neprovádí žádné spolehlivé záruky přenosu. zprávy proto mohou být ztraceny.</span><span class="sxs-lookup"><span data-stu-id="232ac-139">A message sent to a non-transactional queue does not carry any reliable transfer assurances; thus, messages can be lost.</span></span>  
  
 <span data-ttu-id="232ac-140">Fronty MSMQ je taky možné zabezpečit pomocí identity Windows registrované v adresářové službě Active Directory.</span><span class="sxs-lookup"><span data-stu-id="232ac-140">MSMQ queues can also be secured using a Windows identity registered with the Active Directory directory service.</span></span> <span data-ttu-id="232ac-141">Při instalaci služby MSMQ můžete nainstalovat integraci služby Active Directory, která vyžaduje, aby počítač byl součástí doménové sítě systému Windows.</span><span class="sxs-lookup"><span data-stu-id="232ac-141">When installing MSMQ, you can install Active Directory integration, which requires the computer to be part of a Windows domain network.</span></span>  
  
 <span data-ttu-id="232ac-142">Další informace o službě MSMQ najdete v tématu [instalace služby Řízení front zpráv (MSMQ)](../samples/installing-message-queuing-msmq.md).</span><span class="sxs-lookup"><span data-stu-id="232ac-142">For more information about MSMQ, see [Installing Message Queuing (MSMQ)](../samples/installing-message-queuing-msmq.md).</span></span>  
  
### <a name="netmsmqbinding"></a><span data-ttu-id="232ac-143">NetMsmqBinding</span><span class="sxs-lookup"><span data-stu-id="232ac-143">NetMsmqBinding</span></span>  
 <span data-ttu-id="232ac-144">[\<netMsmqBinding>](../../configure-apps/file-schema/wcf/netmsmqbinding.md)Je vazba WCF ve frontě poskytuje dvěma koncovým bodům WCF ke komunikaci pomocí služby MSMQ.</span><span class="sxs-lookup"><span data-stu-id="232ac-144">The [\<netMsmqBinding>](../../configure-apps/file-schema/wcf/netmsmqbinding.md) is the queued binding WCF provides for two WCF endpoints to communicate using MSMQ.</span></span> <span data-ttu-id="232ac-145">Vazba proto zpřístupňuje vlastnosti, které jsou specifické pro službu MSMQ.</span><span class="sxs-lookup"><span data-stu-id="232ac-145">The binding, therefore, exposes properties that are specific to MSMQ.</span></span> <span data-ttu-id="232ac-146">Ne všechny funkce a vlastnosti služby MSMQ nejsou ale k dispozici v `NetMsmqBinding` .</span><span class="sxs-lookup"><span data-stu-id="232ac-146">However, not all MSMQ features and properties are exposed in the `NetMsmqBinding`.</span></span> <span data-ttu-id="232ac-147">Kompaktní `NetMsmqBinding` je navržený s optimální sadou funkcí, které by většina zákazníků měla najít dostatečná.</span><span class="sxs-lookup"><span data-stu-id="232ac-147">The compact `NetMsmqBinding` is designed with an optimal set of features that most customers should find sufficient.</span></span>  
  
 <span data-ttu-id="232ac-148">`NetMsmqBinding`Manifesty základních konceptů zařazených do fronty, které jsou zde popsané, ve formě vlastností vazeb.</span><span class="sxs-lookup"><span data-stu-id="232ac-148">The `NetMsmqBinding` manifests the core queuing concepts discussed thus far in the form of properties on the bindings.</span></span> <span data-ttu-id="232ac-149">Tyto vlastnosti zase komunikují se službou MSMQ při přenosu a doručování zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-149">These properties, in turn, communicate to MSMQ how to transfer and deliver the messages.</span></span> <span data-ttu-id="232ac-150">Diskuze o kategoriích vlastností je v následujících oddílech.</span><span class="sxs-lookup"><span data-stu-id="232ac-150">A discussion of the property categories is in the following sections.</span></span> <span data-ttu-id="232ac-151">Další informace najdete v koncepčních tématech s úplným popisem specifických vlastností.</span><span class="sxs-lookup"><span data-stu-id="232ac-151">For more information, see the conceptual topics that describe specific properties more completely.</span></span>  
  
#### <a name="exactlyonce-and-durable-properties"></a><span data-ttu-id="232ac-152">ExactlyOnce a trvalé vlastnosti</span><span class="sxs-lookup"><span data-stu-id="232ac-152">ExactlyOnce and Durable Properties</span></span>  
 <span data-ttu-id="232ac-153">`ExactlyOnce`Vlastnosti a `Durable` ovlivňují přenos zpráv mezi frontami:</span><span class="sxs-lookup"><span data-stu-id="232ac-153">The `ExactlyOnce` and `Durable` properties affect how messages are transferred between queues:</span></span>  
  
- <span data-ttu-id="232ac-154">`ExactlyOnce`: Když se nastaví na `true` (výchozí), kanál zařazený do fronty zajistí, že se zpráva, pokud je dodána, nebude duplikována.</span><span class="sxs-lookup"><span data-stu-id="232ac-154">`ExactlyOnce`: When set to `true` (the default), the queued channel ensures that the message, if delivered, is not duplicated.</span></span> <span data-ttu-id="232ac-155">Také zajišťuje, že nedojde ke ztrátě zprávy.</span><span class="sxs-lookup"><span data-stu-id="232ac-155">It also ensures that the message is not lost.</span></span> <span data-ttu-id="232ac-156">Pokud zprávu nelze doručit nebo pokud doba platnosti zprávy vypršela před doručením zprávy, chybová zpráva spolu s důvodem selhání doručení je zaznamenána ve frontě nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-156">If the message cannot be delivered, or the message Time-To Live expires before the message can be delivered, the failed message along with the delivery failure reason is recorded in a dead-letter queue.</span></span> <span data-ttu-id="232ac-157">Při nastavení na `false` se kanál ve frontě snaží přenést zprávu.</span><span class="sxs-lookup"><span data-stu-id="232ac-157">When set to `false`, the queued channel makes an effort to transfer the message.</span></span> <span data-ttu-id="232ac-158">V takovém případě můžete volitelně zvolit frontu nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-158">In this case, you can optionally choose a dead-letter queue.</span></span>  
  
- <span data-ttu-id="232ac-159">`Durable:`Když se nastaví na `true` (výchozí nastavení), kanál zařazený do fronty zajistí, že služba MSMQ ukládá zprávu trvale na disk.</span><span class="sxs-lookup"><span data-stu-id="232ac-159">`Durable:` When set to `true` (the default), the queued channel ensures that MSMQ stores the message durably on disk.</span></span> <span data-ttu-id="232ac-160">Pokud se tedy služba MSMQ zastavila a restartuje, zprávy na disku se přenesou do cílové fronty nebo se doručí službě.</span><span class="sxs-lookup"><span data-stu-id="232ac-160">Thus, if the MSMQ service were to stop and restart, the messages on disk is transferred to the target queue or delivered to the service.</span></span> <span data-ttu-id="232ac-161">Při nastavení na `false` se zprávy ukládají do stálého úložiště a při zastavení a restartování služby MSMQ se ztratí.</span><span class="sxs-lookup"><span data-stu-id="232ac-161">When set to `false`, the messages are stored in volatile store and are lost on stopping and restarting the MSMQ service.</span></span>  
  
 <span data-ttu-id="232ac-162">V případě `ExactlyOnce` spolehlivého přenosu vyžaduje MSMQ transakční frontu.</span><span class="sxs-lookup"><span data-stu-id="232ac-162">For `ExactlyOnce` reliable transfer, MSMQ requires the queue to be transactional.</span></span> <span data-ttu-id="232ac-163">Služba MSMQ také vyžaduje transakci pro čtení z transakční fronty.</span><span class="sxs-lookup"><span data-stu-id="232ac-163">Also, MSMQ requires a transaction to read from a transactional queue.</span></span> <span data-ttu-id="232ac-164">V takovém případě, když použijete `NetMsmqBinding` , si zapamatujte, že transakce je vyžadována k odesílání nebo přijímání zpráv, když `ExactlyOnce` je nastavena na `true` .</span><span class="sxs-lookup"><span data-stu-id="232ac-164">As such, when you use the `NetMsmqBinding`, remember that a transaction is required to send or receive messages when `ExactlyOnce` is set to `true`.</span></span> <span data-ttu-id="232ac-165">Podobně služba MSMQ vyžaduje, aby fronta byla netransakční pro zajištění co nejlepšího úsilí, například když `ExactlyOnce` je `false` a pro nestálé zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-165">Similarly, MSMQ requires the queue to be non-transactional for best-effort assurances, such as when `ExactlyOnce` is `false` and for volatile messaging.</span></span> <span data-ttu-id="232ac-166">Proto když nastavíte `ExactlyOnce` `false` nebo netrvalo `false` , nelze odeslat ani přijmout pomocí transakce.</span><span class="sxs-lookup"><span data-stu-id="232ac-166">Thus, when setting `ExactlyOnce` to `false` or durable to `false`, you cannot send or receive using a transaction.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="232ac-167">Zajistěte, aby byla na základě nastavení v vazbách vytvořena správná fronta (transakční nebo netransakční).</span><span class="sxs-lookup"><span data-stu-id="232ac-167">Ensure that the correct queue (transactional or non-transactional) is created based on settings in the bindings.</span></span> <span data-ttu-id="232ac-168">Pokud `ExactlyOnce` je `true` , použijte transakční frontu. v opačném případě použijte netransakční frontu.</span><span class="sxs-lookup"><span data-stu-id="232ac-168">If `ExactlyOnce` is `true`, use a transactional queue; otherwise, use a non-transactional queue.</span></span>  
  
#### <a name="dead-letter-queue-properties"></a><span data-ttu-id="232ac-169">Vlastnosti fronty nedoručených zpráv</span><span class="sxs-lookup"><span data-stu-id="232ac-169">Dead-Letter Queue Properties</span></span>  
 <span data-ttu-id="232ac-170">Fronta nedoručených zpráv se používá k ukládání zpráv, které nedoručení doplní.</span><span class="sxs-lookup"><span data-stu-id="232ac-170">The dead-letter queue is used to store messages that fail delivery.</span></span> <span data-ttu-id="232ac-171">Uživatel může napsat kompenzační logiku, která čte zprávy z fronty nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-171">The user can write compensating logic that reads messages out of the dead-letter queue.</span></span>  
  
 <span data-ttu-id="232ac-172">Řada systémů řízení front poskytuje pro frontu nedoručených zpráv pro celé systémy.</span><span class="sxs-lookup"><span data-stu-id="232ac-172">Many queuing systems provide for a system-wide dead-letter queue.</span></span> <span data-ttu-id="232ac-173">Služba MSMQ poskytuje frontu netransakčních netransakčních zpráv pro zprávy, které selžou doručení do netransakčních front a frontu nedoručených transakčních zpráv v rámci systému pro zprávy, které selžou doručení do transakčních front.</span><span class="sxs-lookup"><span data-stu-id="232ac-173">MSMQ provides a system-wide non-transactional dead-letter queue for messages that fail delivery to non-transactional queues and a system-wide transactional dead-letter queue for messages that fail delivery to transactional queues.</span></span>  
  
 <span data-ttu-id="232ac-174">Pokud více klientů odesílajících zprávy do různých cílových front sdílí službu MSMQ, všechny zprávy odesílané klienty přejdou do stejné fronty nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-174">If multiple clients sending messages to different target queues share the MSMQ service, all messages sent by the clients go to the same dead-letter queue.</span></span> <span data-ttu-id="232ac-175">To není vždy vhodnější.</span><span class="sxs-lookup"><span data-stu-id="232ac-175">This is not always preferable.</span></span> <span data-ttu-id="232ac-176">Pro lepší izolaci WCF a MSMQ v systému Windows Vista poskytují vlastní frontu nedoručených zpráv (nebo frontu nedoručených zpráv specifickou pro aplikaci), kterou může uživatel zadat pro ukládání zpráv, u kterých dojde k selhání doručení.</span><span class="sxs-lookup"><span data-stu-id="232ac-176">For better isolation, WCF and MSMQ in Windows Vista provide a custom dead-letter queue (or application-specific dead-letter queue) that the user can specify to store messages that fail delivery.</span></span> <span data-ttu-id="232ac-177">Proto Různí klienti nesdílejí stejnou frontu nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-177">Therefore, different clients do not share the same dead-letter queue.</span></span>  
  
 <span data-ttu-id="232ac-178">Vazba má dvě vlastnosti zájmu:</span><span class="sxs-lookup"><span data-stu-id="232ac-178">The binding has two properties of interest:</span></span>  
  
- <span data-ttu-id="232ac-179">`DeadLetterQueue`: Tato vlastnost je výčet, který označuje, zda je požadována fronta nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-179">`DeadLetterQueue`: This property is an enumeration that indicates whether a dead-letter queue is requested.</span></span> <span data-ttu-id="232ac-180">Výčet také obsahuje druh fronty nedoručených zpráv, pokud je požadován.</span><span class="sxs-lookup"><span data-stu-id="232ac-180">The enumeration also contains the kind of dead-letter queue, if one is requested.</span></span> <span data-ttu-id="232ac-181">Hodnoty jsou `None` , `System` a `Custom` .</span><span class="sxs-lookup"><span data-stu-id="232ac-181">The values are `None`, `System`, and `Custom`.</span></span> <span data-ttu-id="232ac-182">Další informace o interpretaci těchto vlastností najdete v tématu [použití front nedoručených zpráv pro zpracování selhání přenosu zpráv](using-dead-letter-queues-to-handle-message-transfer-failures.md) .</span><span class="sxs-lookup"><span data-stu-id="232ac-182">For more information about the interpretation of these properties, see [Using Dead-Letter Queues to Handle Message Transfer Failures](using-dead-letter-queues-to-handle-message-transfer-failures.md)</span></span>  
  
- <span data-ttu-id="232ac-183">`CustomDeadLetterQueue`: Tato vlastnost je adresa identifikátoru URI (Uniform Resource Identifier) fronty nedoručených zpráv pro konkrétní aplikaci.</span><span class="sxs-lookup"><span data-stu-id="232ac-183">`CustomDeadLetterQueue`: This property is the Uniform Resource Identifier (URI) address of the application-specific dead-letter queue.</span></span> <span data-ttu-id="232ac-184">To je nutné v případě `DeadLetterQueue` , že.`Custom`</span><span class="sxs-lookup"><span data-stu-id="232ac-184">This is required if `DeadLetterQueue`.`Custom`</span></span> <span data-ttu-id="232ac-185">je zvolena.</span><span class="sxs-lookup"><span data-stu-id="232ac-185">is chosen.</span></span>  
  
#### <a name="poison-message-handling-properties"></a><span data-ttu-id="232ac-186">Vlastnosti zpracování nezpracovatelných zpráv</span><span class="sxs-lookup"><span data-stu-id="232ac-186">Poison Message Handling properties</span></span>  
 <span data-ttu-id="232ac-187">Když služba přečte zprávy z cílové fronty v transakci, služba se nemusí podařit zpracovat zprávu z různých důvodů.</span><span class="sxs-lookup"><span data-stu-id="232ac-187">When the service reads messages from the target queue under a transaction, the service may fail to process the message for various reasons.</span></span> <span data-ttu-id="232ac-188">Zpráva se pak vrátí zpátky do fronty pro opětovné čtení.</span><span class="sxs-lookup"><span data-stu-id="232ac-188">The message is then put back into the queue to be read again.</span></span> <span data-ttu-id="232ac-189">Chcete-li se zabývat se zprávami, které se opakují opakovaně, lze ve vazbě nakonfigurovat sadu vlastností zpracování nefunkčních zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-189">To deal with messages that fail repeatedly, a set of poison-message handling properties can be configured in the binding.</span></span> <span data-ttu-id="232ac-190">Existují čtyři vlastnosti: `ReceiveRetryCount` , `MaxRetryCycles` , `RetryCycleDelay` a `ReceiveErrorHandling` .</span><span class="sxs-lookup"><span data-stu-id="232ac-190">There are four properties: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay`, and `ReceiveErrorHandling`.</span></span> <span data-ttu-id="232ac-191">Další informace o těchto vlastnostech naleznete v tématu [manipulace s Nezpracovatelovou zprávou](poison-message-handling.md).</span><span class="sxs-lookup"><span data-stu-id="232ac-191">For more information about these properties, see [Poison Message Handling](poison-message-handling.md).</span></span>  
  
#### <a name="security-properties"></a><span data-ttu-id="232ac-192">Vlastnosti zabezpečení</span><span class="sxs-lookup"><span data-stu-id="232ac-192">Security Properties</span></span>  
 <span data-ttu-id="232ac-193">Služba MSMQ zpřístupňuje svůj vlastní model zabezpečení, například seznamy řízení přístupu (ACL) ve frontě nebo odesílání ověřených zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-193">MSMQ exposes its own security model, such as access control lists (ACLs) on a queue or sending authenticated messages.</span></span> <span data-ttu-id="232ac-194">`NetMsmqBinding`Zpřístupňuje tyto vlastnosti zabezpečení jako součást nastavení zabezpečení přenosu.</span><span class="sxs-lookup"><span data-stu-id="232ac-194">The `NetMsmqBinding` exposes these security properties as part of its transport security settings.</span></span> <span data-ttu-id="232ac-195">Existují dvě vlastnosti ve vazbě pro zabezpečení přenosu: `MsmqAuthenticationMode` a `MsmqProtectionLevel` .</span><span class="sxs-lookup"><span data-stu-id="232ac-195">There are two properties in the binding for transport security: `MsmqAuthenticationMode` and `MsmqProtectionLevel`.</span></span> <span data-ttu-id="232ac-196">Nastavení v těchto vlastnostech závisí na konfiguraci služby MSMQ.</span><span class="sxs-lookup"><span data-stu-id="232ac-196">Settings in these properties depend on how MSMQ is configured.</span></span> <span data-ttu-id="232ac-197">Další informace najdete v tématu [zabezpečení zpráv pomocí zabezpečení přenosu](securing-messages-using-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="232ac-197">For more information, see [Securing Messages Using Transport Security](securing-messages-using-transport-security.md).</span></span>  
  
 <span data-ttu-id="232ac-198">Kromě zabezpečení přenosu je možné samotnou vlastní zprávu SOAP zabezpečit pomocí zabezpečení zpráv.</span><span class="sxs-lookup"><span data-stu-id="232ac-198">In addition to transport security, the actual SOAP message itself can be secured using message security.</span></span> <span data-ttu-id="232ac-199">Další informace najdete v tématu [zabezpečení zpráv pomocí zabezpečení zpráv](securing-messages-using-message-security.md).</span><span class="sxs-lookup"><span data-stu-id="232ac-199">For more information, see [Securing Messages Using Message Security](securing-messages-using-message-security.md).</span></span>  
  
 <span data-ttu-id="232ac-200">`MsmqTransportSecurity`také zpřístupňuje dvě vlastnosti `MsmqEncryptionAlgorithm` a `MsmqHashAlgorithm` .</span><span class="sxs-lookup"><span data-stu-id="232ac-200">`MsmqTransportSecurity` also exposes two properties, `MsmqEncryptionAlgorithm` and `MsmqHashAlgorithm`.</span></span> <span data-ttu-id="232ac-201">Jedná se o výčty různých algoritmů pro výběr přenosu zpráv z fronty do fronty a jejich hashování u podpisů.</span><span class="sxs-lookup"><span data-stu-id="232ac-201">These are enumerations of different algorithms to choose for queue-to-queue transfer encryption of messages and hashing of the signatures.</span></span>  
  
#### <a name="other-properties"></a><span data-ttu-id="232ac-202">Další vlastnosti</span><span class="sxs-lookup"><span data-stu-id="232ac-202">Other Properties</span></span>  
 <span data-ttu-id="232ac-203">Kromě předchozích vlastností jsou k dispozici i další vlastnosti specifické pro službu MSMQ uvedené ve vazbě:</span><span class="sxs-lookup"><span data-stu-id="232ac-203">In addition to the preceding properties, other MSMQ-specific properties exposed in the binding include:</span></span>  
  
- <span data-ttu-id="232ac-204">`UseSourceJournal`: Vlastnost, která označuje, že je zapnuto ukládání zdrojů do deníku.</span><span class="sxs-lookup"><span data-stu-id="232ac-204">`UseSourceJournal`: A property to indicate that source journaling is turned on.</span></span> <span data-ttu-id="232ac-205">Deníkování zdrojů je funkce služby MSMQ, která sleduje zprávy, které byly úspěšně přeneseny z fronty přenosu.</span><span class="sxs-lookup"><span data-stu-id="232ac-205">Source journaling is an MSMQ feature that keeps track of messages that have been successfully transmitted from the transmission queue.</span></span>  
  
- <span data-ttu-id="232ac-206">`UseMsmqTracing`: Vlastnost, která označuje, že trasování služby MSMQ je zapnuté.</span><span class="sxs-lookup"><span data-stu-id="232ac-206">`UseMsmqTracing`: A property to indicate that MSMQ tracing is turned on.</span></span> <span data-ttu-id="232ac-207">Trasování služby MSMQ odesílá zprávy sestavy do fronty sestav pokaždé, když se zpráva opustí nebo dorazí na počítač, který je hostitelem správce fronty MSMQ.</span><span class="sxs-lookup"><span data-stu-id="232ac-207">MSMQ tracing sends report messages to a report queue each time a message leaves or arrives at a machine hosting an MSMQ queue manager.</span></span>  
  
- <span data-ttu-id="232ac-208">`QueueTransferProtocol`: Výčet protokolu, který se má použít pro přenosy zpráv z fronty do fronty.</span><span class="sxs-lookup"><span data-stu-id="232ac-208">`QueueTransferProtocol`: An enumeration of the protocol to use for queue-to-queue message transfers.</span></span> <span data-ttu-id="232ac-209">Služba MSMQ implementuje nativní přenosovou protokol front-Queue a protokol SOAP nazvaný protokolu SOAP Reliable Messaging Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="232ac-209">MSMQ implements a native queue-to-queue transfer protocol and a SOAP-based protocol called SOAP Reliable Messaging Protocol (SRMP).</span></span> <span data-ttu-id="232ac-210">Protokol SRMP se používá při přenosu protokolu HTTP pro přenosy front-Queue.</span><span class="sxs-lookup"><span data-stu-id="232ac-210">SRMP is used when using HTTP transport for queue-to-queue transfers.</span></span> <span data-ttu-id="232ac-211">Protokol SRMP se používá při použití protokolu HTTPS k přenosům front-Queue.</span><span class="sxs-lookup"><span data-stu-id="232ac-211">SRMP secure is used when using HTTPS for queue-to-queue transfers.</span></span>  
  
- <span data-ttu-id="232ac-212">`UseActiveDirectory`: Logická hodnota určující, zda se má služba Active Directory používat k překladu adres fronty.</span><span class="sxs-lookup"><span data-stu-id="232ac-212">`UseActiveDirectory`: A Boolean value to indicate whether the Active Directory must be used for queue address resolution.</span></span> <span data-ttu-id="232ac-213">Ve výchozím nastavení je to vypnuté.</span><span class="sxs-lookup"><span data-stu-id="232ac-213">By default, this is off.</span></span> <span data-ttu-id="232ac-214">Další informace najdete v tématu [koncové body služby a adresování front](service-endpoints-and-queue-addressing.md).</span><span class="sxs-lookup"><span data-stu-id="232ac-214">For more information, see [Service Endpoints and Queue Addressing](service-endpoints-and-queue-addressing.md).</span></span>  
  
### <a name="msmqintegrationbinding"></a><span data-ttu-id="232ac-215">MsmqIntegrationBinding</span><span class="sxs-lookup"><span data-stu-id="232ac-215">MsmqIntegrationBinding</span></span>  
 <span data-ttu-id="232ac-216">Používá se, `MsmqIntegrationBinding` Pokud chcete, aby koncový bod WCF komunikoval s existující aplikací služby MSMQ napsanou v rozhraních API jazyka C, C++, com nebo System. Messaging.</span><span class="sxs-lookup"><span data-stu-id="232ac-216">The `MsmqIntegrationBinding` is used when you want a WCF endpoint to communicate with an existing MSMQ application written in C, C++, COM, or System.Messaging APIs.</span></span>  
  
 <span data-ttu-id="232ac-217">Vlastnosti vazby jsou stejné jako pro `NetMsmqBinding` .</span><span class="sxs-lookup"><span data-stu-id="232ac-217">The binding properties are the same as for `NetMsmqBinding`.</span></span> <span data-ttu-id="232ac-218">Platí ale následující rozdíly:</span><span class="sxs-lookup"><span data-stu-id="232ac-218">However, the following differences apply:</span></span>  
  
- <span data-ttu-id="232ac-219">Kontrakt operace pro `MsmqIntegrationBinding` je omezen, aby převzal jeden parametr typu, <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> kde parametr typu je typ těla.</span><span class="sxs-lookup"><span data-stu-id="232ac-219">The operation contract for `MsmqIntegrationBinding` is restricted to taking a single parameter of type <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> where the type parameter is the body type.</span></span>  
  
- <span data-ttu-id="232ac-220">Většina vlastností nativní zprávy služby MSMQ se zveřejňuje v <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> pro použití.</span><span class="sxs-lookup"><span data-stu-id="232ac-220">Much of MSMQ native message properties are exposed in the <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> for use.</span></span>  
  
- <span data-ttu-id="232ac-221">Pro usnadnění serializace a deserializace těla zprávy je k dispozici serializátory, jako je XML a ActiveX.</span><span class="sxs-lookup"><span data-stu-id="232ac-221">To help with serialization and deserialization of the message body, serializers such as XML and ActiveX are provided.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="232ac-222">Příklad kódu</span><span class="sxs-lookup"><span data-stu-id="232ac-222">Sample Code</span></span>  
 <span data-ttu-id="232ac-223">Podrobné pokyny k psaní služeb WCF, které používají službu MSMQ, najdete v následujících tématech:</span><span class="sxs-lookup"><span data-stu-id="232ac-223">For step by step instructions on how to write WCF services that use MSMQ see the following topics:</span></span>  
  
- [<span data-ttu-id="232ac-224">Postupy: Výměna zpráv s koncovými body WCF a aplikací pro řazení zpráv do front</span><span class="sxs-lookup"><span data-stu-id="232ac-224">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
  
- [<span data-ttu-id="232ac-225">Postupy: Výměna zpráv zařazených do fronty s koncovými body WCF</span><span class="sxs-lookup"><span data-stu-id="232ac-225">How to: Exchange Queued Messages with WCF Endpoints</span></span>](how-to-exchange-queued-messages-with-wcf-endpoints.md)  
  
 <span data-ttu-id="232ac-226">Kompletní vzorek kódu, který ilustruje použití služby MSMQ ve službě WCF, najdete v následujících tématech:</span><span class="sxs-lookup"><span data-stu-id="232ac-226">For a completed code sample illustrating the use of MSMQ in WCF see the following topics:</span></span>  
  
- [<span data-ttu-id="232ac-227">Zpracované vazby služby MSMQ</span><span class="sxs-lookup"><span data-stu-id="232ac-227">Transacted MSMQ Binding</span></span>](../samples/transacted-msmq-binding.md)  
  
- [<span data-ttu-id="232ac-228">Nestálá komunikace ve frontě</span><span class="sxs-lookup"><span data-stu-id="232ac-228">Volatile Queued Communication</span></span>](../samples/volatile-queued-communication.md)  
  
- [<span data-ttu-id="232ac-229">Fronty nedoručených zpráv</span><span class="sxs-lookup"><span data-stu-id="232ac-229">Dead Letter Queues</span></span>](../samples/dead-letter-queues.md)  
  
- [<span data-ttu-id="232ac-230">Relace a fronty</span><span class="sxs-lookup"><span data-stu-id="232ac-230">Sessions and Queues</span></span>](../samples/sessions-and-queues.md)  
  
- [<span data-ttu-id="232ac-231">Obousměrná komunikace</span><span class="sxs-lookup"><span data-stu-id="232ac-231">Two-Way Communication</span></span>](../samples/two-way-communication.md)
  
- [<span data-ttu-id="232ac-232">SRMP</span><span class="sxs-lookup"><span data-stu-id="232ac-232">SRMP</span></span>](../samples/srmp.md)  
  
- [<span data-ttu-id="232ac-233">Zabezpečení zprávy pomocí služby Řízení front zpráv</span><span class="sxs-lookup"><span data-stu-id="232ac-233">Message Security over Message Queuing</span></span>](../samples/message-security-over-message-queuing.md)  
  
## <a name="see-also"></a><span data-ttu-id="232ac-234">Viz také</span><span class="sxs-lookup"><span data-stu-id="232ac-234">See also</span></span>

- [<span data-ttu-id="232ac-235">Koncové body služby a adresování front</span><span class="sxs-lookup"><span data-stu-id="232ac-235">Service Endpoints and Queue Addressing</span></span>](service-endpoints-and-queue-addressing.md)
- [<span data-ttu-id="232ac-236">Webhosting frontové aplikace</span><span class="sxs-lookup"><span data-stu-id="232ac-236">Web Hosting a Queued Application</span></span>](web-hosting-a-queued-application.md)
