---
title: Fronty ve WCF
ms.date: 03/30/2017
ms.assetid: e98d76ba-1acf-42cd-b137-0f8214661112
ms.openlocfilehash: e6608a3d556b546660be904eb8c853243e833d2e
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/12/2020
ms.locfileid: "79184566"
---
# <a name="queuing-in-wcf"></a><span data-ttu-id="77b7b-102">Fronty ve WCF</span><span class="sxs-lookup"><span data-stu-id="77b7b-102">Queuing in WCF</span></span>
<span data-ttu-id="77b7b-103">Tato část popisuje použití komunikace ve frontě v systému Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="77b7b-103">This section describes how to use queued communication in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="queues-as-a-wcf-transport-binding"></a><span data-ttu-id="77b7b-104">Fronty jako vazby přenosu WCF</span><span class="sxs-lookup"><span data-stu-id="77b7b-104">Queues as a WCF transport binding</span></span>  
 <span data-ttu-id="77b7b-105">V WCF smlouvy určují, co se vyměňuje.</span><span class="sxs-lookup"><span data-stu-id="77b7b-105">In WCF, the contracts specify what is being exchanged.</span></span> <span data-ttu-id="77b7b-106">Smlouvy jsou obchodní nebo aplikace specifické výměny zpráv.</span><span class="sxs-lookup"><span data-stu-id="77b7b-106">Contracts are business-dependent or application-specific message exchanges.</span></span> <span data-ttu-id="77b7b-107">Mechanismus používaný k výměně zpráv (nebo "jak") je určen ve vazbách.</span><span class="sxs-lookup"><span data-stu-id="77b7b-107">The mechanism used to exchange messages (or the "how") is specified in the bindings.</span></span> <span data-ttu-id="77b7b-108">Vazby v WCF zapouzdřit podrobnosti výměny zpráv.</span><span class="sxs-lookup"><span data-stu-id="77b7b-108">Bindings in WCF encapsulate details of the message exchange.</span></span> <span data-ttu-id="77b7b-109">Zveřejňují konfigurační knoflíky pro uživatele k ovládání různých aspektů přenosu nebo protokolu, který představují vazby.</span><span class="sxs-lookup"><span data-stu-id="77b7b-109">They expose configuration knobs for the user to control various aspects of the transport or the protocol that the bindings represent.</span></span> <span data-ttu-id="77b7b-110">Řazení do fronty v wcf je zacházeno jako všechny ostatní transportní vazby, což je velká výhoda pro mnoho aplikací řazení do fronty.</span><span class="sxs-lookup"><span data-stu-id="77b7b-110">Queuing in WCF is treated like any other transport binding, which is a big advantage for many queuing applications.</span></span> <span data-ttu-id="77b7b-111">V současné době mnoho aplikací ve frontách jsou zapsány odlišně od jiných vzdálených procedur volání (RPC) styl distribuovaných aplikací, takže je těžší sledovat a udržovat.</span><span class="sxs-lookup"><span data-stu-id="77b7b-111">Today, many queuing applications are written differently from other remote procedure call (RPC)-style distributed applications, making it harder to follow and maintain.</span></span> <span data-ttu-id="77b7b-112">S WCF styl psaní distribuované aplikace je téměř stejný, což usnadňuje sledování a údržbu.</span><span class="sxs-lookup"><span data-stu-id="77b7b-112">With WCF, the style of writing a distributed application is much the same, making it easier to follow and maintain.</span></span> <span data-ttu-id="77b7b-113">Navíc tím, že faktoring z mechanismu směny odděleně od obchodní logiky, je snazší konfigurovat přenos nebo provádět změny, aniž by to ovlivnilo kód specifický pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="77b7b-113">Moreover, by factoring out the mechanism of exchange separately from the business logic, it is easier to configure the transport or make changes to it without affecting application specific code.</span></span> <span data-ttu-id="77b7b-114">Následující obrázek znázorňuje strukturu služby WCF a klienta pomocí služby MSMQ jako přenos.</span><span class="sxs-lookup"><span data-stu-id="77b7b-114">The following figure illustrates the structure of a WCF service and client using MSMQ as a transport.</span></span>  
  
 <span data-ttu-id="77b7b-115">![Diagram aplikace ve frontě](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Obrázek distribuované fronty")</span><span class="sxs-lookup"><span data-stu-id="77b7b-115">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="77b7b-116">Jak můžete vidět z předchozího obrázku, klient a služba musí definovat pouze sémantiku aplikace, to znamená smlouvu a implementaci.</span><span class="sxs-lookup"><span data-stu-id="77b7b-116">As you can see from the preceding figure, the client and service must define only the application semantics, that is, the contract and implementation.</span></span> <span data-ttu-id="77b7b-117">Služba konfiguruje vazbu ve frontě s upřednostňovaným nastavením.</span><span class="sxs-lookup"><span data-stu-id="77b7b-117">The service configures a queued binding with preferred settings.</span></span> <span data-ttu-id="77b7b-118">Klient používá [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) ke generování WCF klienta ke službě a ke generování konfiguračního souboru, který popisuje vazby použít k odesílání zpráv do služby.</span><span class="sxs-lookup"><span data-stu-id="77b7b-118">The client uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a WCF client to the service and to generate a configuration file that describes the bindings to use to send messages to the service.</span></span> <span data-ttu-id="77b7b-119">Proto chcete-li odeslat zprávu ve frontě, klient instancije wcf klienta a vyvolá operaci na něm.</span><span class="sxs-lookup"><span data-stu-id="77b7b-119">Thus, to send a queued message, the client instantiates a WCF client and invokes an operation on it.</span></span> <span data-ttu-id="77b7b-120">To způsobí, že zpráva má být odeslána do fronty přenosu a převedeny do cílové fronty.</span><span class="sxs-lookup"><span data-stu-id="77b7b-120">This causes the message to be sent to the transmission queue and transferred to the target queue.</span></span> <span data-ttu-id="77b7b-121">Všechny složitosti komunikace ve frontě jsou skryty z aplikace, která odesílá a přijímá zprávy.</span><span class="sxs-lookup"><span data-stu-id="77b7b-121">All the complexities of queued communication are hidden from the application that is sending and receiving messages.</span></span>  
  
 <span data-ttu-id="77b7b-122">Upozornění týkající se vazby ve frontě v WCF zahrnují:</span><span class="sxs-lookup"><span data-stu-id="77b7b-122">Caveats about queued binding in WCF include:</span></span>  
  
- <span data-ttu-id="77b7b-123">Všechny operace služby musí být jednosměrné, protože výchozí vazby ve frontě v WCF nepodporuje duplexní komunikaci pomocí front.</span><span class="sxs-lookup"><span data-stu-id="77b7b-123">All service operations must be one-way because the default queued binding in WCF does not support duplex communication using queues.</span></span> <span data-ttu-id="77b7b-124">Ukázka obousměrné komunikace[(Obousměrná komunikace](../../../../docs/framework/wcf/samples/two-way-communication.md)) ukazuje, jak používat dvě jednosměrné smlouvy k implementaci duplexní komunikace pomocí front.</span><span class="sxs-lookup"><span data-stu-id="77b7b-124">A two-way communication sample ([Two-Way Communication](../../../../docs/framework/wcf/samples/two-way-communication.md)) illustrates how to use two one-way contracts to implement duplex communication using queues.</span></span>  
  
- <span data-ttu-id="77b7b-125">Chcete-li generovat wcf klienta pomocí výměny metadat vyžaduje další koncový bod HTTP ve službě tak, aby jej lze dotazovat přímo generovat wcf klienta a získat informace o vazbě vhodně konfigurovat komunikaci ve frontě.</span><span class="sxs-lookup"><span data-stu-id="77b7b-125">To generate a WCF client using metadata exchange requires an additional HTTP endpoint on the service so that it can be queried directly to generate the WCF client and obtain binding information to appropriately configure queued communication.</span></span>  
  
- <span data-ttu-id="77b7b-126">Na základě ve frontě vazby je vyžadována další konfigurace mimo WCF.</span><span class="sxs-lookup"><span data-stu-id="77b7b-126">Based on the queued binding, extra configuration outside of WCF is required.</span></span> <span data-ttu-id="77b7b-127">Například <xref:System.ServiceModel.NetMsmqBinding> třída, která je dodávána s WCF vyžaduje konfiguraci vazby, jakož i minimálně konfigurovat službu Řízení front zpráv (MSMQ).</span><span class="sxs-lookup"><span data-stu-id="77b7b-127">For example, the <xref:System.ServiceModel.NetMsmqBinding> class that is shipped with WCF requires you to configure the bindings as well as minimally configure Message Queuing (MSMQ).</span></span>  
  
 <span data-ttu-id="77b7b-128">Následující části popisují konkrétní vazby ve frontě dodávané s WCF, které jsou založeny na službě MSMQ.</span><span class="sxs-lookup"><span data-stu-id="77b7b-128">The following sections describe the specific queued bindings shipped with WCF, which are based on MSMQ.</span></span>  
  
### <a name="msmq"></a><span data-ttu-id="77b7b-129">MSMQ</span><span class="sxs-lookup"><span data-stu-id="77b7b-129">MSMQ</span></span>  
 <span data-ttu-id="77b7b-130">Přenos ve frontě v wcf používá službu MSMQ pro komunikaci ve frontě.</span><span class="sxs-lookup"><span data-stu-id="77b7b-130">The queued transport in WCF uses MSMQ for its queued communication.</span></span>  
  
 <span data-ttu-id="77b7b-131">Služba MSMQ je dodávána jako volitelná součást systému Windows a spuštěna jako služba NT.</span><span class="sxs-lookup"><span data-stu-id="77b7b-131">MSMQ ships as an optional component with Windows and runs as an NT service.</span></span> <span data-ttu-id="77b7b-132">Zachycuje zprávy pro přenos v přenosové frontě a pro doručení v cílové frontě.</span><span class="sxs-lookup"><span data-stu-id="77b7b-132">It captures messages for transmission in a transmission queue and for delivery in a target queue.</span></span> <span data-ttu-id="77b7b-133">Správci front služby MSMQ implementují spolehlivý protokol přenosu zpráv, aby nedošlo ke ztrátě zpráv při přenosu.</span><span class="sxs-lookup"><span data-stu-id="77b7b-133">The MSMQ queue managers implement a reliable message-transfer protocol so that messages are not lost in transmission.</span></span> <span data-ttu-id="77b7b-134">Protokol může být nativní nebo na základě SOAP, například SOAP Reliable Message Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="77b7b-134">The protocol can be either native or SOAP-based, such as the SOAP Reliable Message Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="77b7b-135">V msmq fronty mohou být transakční nebo netransakční.</span><span class="sxs-lookup"><span data-stu-id="77b7b-135">In MSMQ, queues can be transactional or non-transactional.</span></span> <span data-ttu-id="77b7b-136">Transakční fronta umožňuje zprávy, které mají být zachyceny a doručeny v transakci a pak trvale uloženy ve frontě.</span><span class="sxs-lookup"><span data-stu-id="77b7b-136">A transactional queue allows messages to be captured and delivered in a transaction and then stored durably in the queue.</span></span> <span data-ttu-id="77b7b-137">Zprávy odeslané do transakční fronty jsou přenášeny přesně jednou v pořadí.</span><span class="sxs-lookup"><span data-stu-id="77b7b-137">Messages sent to a transactional queue are transferred exactly once in order.</span></span> <span data-ttu-id="77b7b-138">Netransakční frontu můžete použít k odesílání nestálých a trvalých zpráv.</span><span class="sxs-lookup"><span data-stu-id="77b7b-138">You can use a non-transactional queue to send both volatile and durable messages.</span></span> <span data-ttu-id="77b7b-139">Zpráva odeslaná do netransakční fronty neobsahuje žádné spolehlivé záruky převodu. zprávy tedy mohou být ztraceny.</span><span class="sxs-lookup"><span data-stu-id="77b7b-139">A message sent to a non-transactional queue does not carry any reliable transfer assurances; thus, messages can be lost.</span></span>  
  
 <span data-ttu-id="77b7b-140">Fronty služby MSMQ lze také zabezpečit pomocí identity systému Windows registrované v adresářové službě Active Directory.</span><span class="sxs-lookup"><span data-stu-id="77b7b-140">MSMQ queues can also be secured using a Windows identity registered with the Active Directory directory service.</span></span> <span data-ttu-id="77b7b-141">Při instalaci služby MSMQ můžete nainstalovat integraci služby Active Directory, která vyžaduje, aby byl počítač součástí domény systému Windows.</span><span class="sxs-lookup"><span data-stu-id="77b7b-141">When installing MSMQ, you can install Active Directory integration, which requires the computer to be part of a Windows domain network.</span></span>  
  
 <span data-ttu-id="77b7b-142">Další informace o službě MSMQ naleznete [v tématu Instalace služby Řízení front zpráv (MSMQ).](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md)</span><span class="sxs-lookup"><span data-stu-id="77b7b-142">For more information about MSMQ, see [Installing Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md).</span></span>  
  
### <a name="netmsmqbinding"></a><span data-ttu-id="77b7b-143">Netmsmqbinding</span><span class="sxs-lookup"><span data-stu-id="77b7b-143">NetMsmqBinding</span></span>  
 <span data-ttu-id="77b7b-144">[ \<NetMsmqBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md) je ve frontě vazba WCF poskytuje pro dva koncové body WCF pro komunikaci pomocí služby MSMQ.</span><span class="sxs-lookup"><span data-stu-id="77b7b-144">The [\<netMsmqBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md) is the queued binding WCF provides for two WCF endpoints to communicate using MSMQ.</span></span> <span data-ttu-id="77b7b-145">Vazba proto zpřístupňuje vlastnosti, které jsou specifické pro službu MSMQ.</span><span class="sxs-lookup"><span data-stu-id="77b7b-145">The binding, therefore, exposes properties that are specific to MSMQ.</span></span> <span data-ttu-id="77b7b-146">Ne všechny funkce a vlastnosti služby MSMQ jsou však vystaveny v rozhraní `NetMsmqBinding`.</span><span class="sxs-lookup"><span data-stu-id="77b7b-146">However, not all MSMQ features and properties are exposed in the `NetMsmqBinding`.</span></span> <span data-ttu-id="77b7b-147">Kompaktní `NetMsmqBinding` je navržen s optimální sadou funkcí, které by většina zákazníků měla najít dostatečné.</span><span class="sxs-lookup"><span data-stu-id="77b7b-147">The compact `NetMsmqBinding` is designed with an optimal set of features that most customers should find sufficient.</span></span>  
  
 <span data-ttu-id="77b7b-148">Manifesty `NetMsmqBinding` základní fronty pojmy diskutovány tak daleko ve formě vlastností na vazby.</span><span class="sxs-lookup"><span data-stu-id="77b7b-148">The `NetMsmqBinding` manifests the core queuing concepts discussed thus far in the form of properties on the bindings.</span></span> <span data-ttu-id="77b7b-149">Tyto vlastnosti zase komunikovat službu MSMQ, jak přenášet a doručovat zprávy.</span><span class="sxs-lookup"><span data-stu-id="77b7b-149">These properties, in turn, communicate to MSMQ how to transfer and deliver the messages.</span></span> <span data-ttu-id="77b7b-150">Diskuse o kategoriích vlastností je v následujících částech.</span><span class="sxs-lookup"><span data-stu-id="77b7b-150">A discussion of the property categories is in the following sections.</span></span> <span data-ttu-id="77b7b-151">Další informace naleznete v koncepčních tématech, která popisují konkrétní vlastnosti úplněji.</span><span class="sxs-lookup"><span data-stu-id="77b7b-151">For more information, see the conceptual topics that describe specific properties more completely.</span></span>  
  
#### <a name="exactlyonce-and-durable-properties"></a><span data-ttu-id="77b7b-152">ExactlyOnce a trvalé vlastnosti</span><span class="sxs-lookup"><span data-stu-id="77b7b-152">ExactlyOnce and Durable Properties</span></span>  
 <span data-ttu-id="77b7b-153">`ExactlyOnce` Vlastnosti `Durable` a ovlivňují způsob přenosu zpráv mezi frontami:</span><span class="sxs-lookup"><span data-stu-id="77b7b-153">The `ExactlyOnce` and `Durable` properties affect how messages are transferred between queues:</span></span>  
  
- <span data-ttu-id="77b7b-154">`ExactlyOnce`: Pokud `true` je nastavena na (výchozí), kanál ve frontě zajistí, že zpráva, pokud je doručena, není duplikována.</span><span class="sxs-lookup"><span data-stu-id="77b7b-154">`ExactlyOnce`: When set to `true` (the default), the queued channel ensures that the message, if delivered, is not duplicated.</span></span> <span data-ttu-id="77b7b-155">Také zajišťuje, že zpráva není ztracena.</span><span class="sxs-lookup"><span data-stu-id="77b7b-155">It also ensures that the message is not lost.</span></span> <span data-ttu-id="77b7b-156">Pokud zprávu nelze doručit nebo vyprší platnost zprávy Time-To Live před doručením zprávy, je zpráva, která selhala, spolu s důvodem selhání doručení zaznamenána do fronty nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="77b7b-156">If the message cannot be delivered, or the message Time-To Live expires before the message can be delivered, the failed message along with the delivery failure reason is recorded in a dead-letter queue.</span></span> <span data-ttu-id="77b7b-157">Pokud je `false`nastavena na , kanál ve frontě se snaží zprávu přenést.</span><span class="sxs-lookup"><span data-stu-id="77b7b-157">When set to `false`, the queued channel makes an effort to transfer the message.</span></span> <span data-ttu-id="77b7b-158">V takovém případě můžete volitelně zvolit frontu nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="77b7b-158">In this case, you can optionally choose a dead-letter queue.</span></span>  
  
- <span data-ttu-id="77b7b-159">`Durable:`Pokud je `true` nastavena na (výchozí), kanál zařazený do fronty zajišťuje, že služba MSMQ trvale ukládá zprávu na disk.</span><span class="sxs-lookup"><span data-stu-id="77b7b-159">`Durable:` When set to `true` (the default), the queued channel ensures that MSMQ stores the message durably on disk.</span></span> <span data-ttu-id="77b7b-160">Pokud by tedy služba MSMQ byla zastavit a restartovat, zprávy na disku je převedena do cílové fronty nebo doručena do služby.</span><span class="sxs-lookup"><span data-stu-id="77b7b-160">Thus, if the MSMQ service were to stop and restart, the messages on disk is transferred to the target queue or delivered to the service.</span></span> <span data-ttu-id="77b7b-161">Pokud je `false`nastavena na , zprávy jsou uloženy v nestálém úložišti a jsou ztraceny při zastavení a restartování služby MSMQ.</span><span class="sxs-lookup"><span data-stu-id="77b7b-161">When set to `false`, the messages are stored in volatile store and are lost on stopping and restarting the MSMQ service.</span></span>  
  
 <span data-ttu-id="77b7b-162">Pro `ExactlyOnce` spolehlivý přenos vyžaduje služba MSMQ, aby byla fronta transakční.</span><span class="sxs-lookup"><span data-stu-id="77b7b-162">For `ExactlyOnce` reliable transfer, MSMQ requires the queue to be transactional.</span></span> <span data-ttu-id="77b7b-163">Služba MSMQ také vyžaduje transakci ke čtení z transakční fronty.</span><span class="sxs-lookup"><span data-stu-id="77b7b-163">Also, MSMQ requires a transaction to read from a transactional queue.</span></span> <span data-ttu-id="77b7b-164">V důsledku toho při `NetMsmqBinding`použití , nezapomeňte, že transakce je `ExactlyOnce` nutné `true`odesílat nebo přijímat zprávy, pokud je nastavena na .</span><span class="sxs-lookup"><span data-stu-id="77b7b-164">As such, when you use the `NetMsmqBinding`, remember that a transaction is required to send or receive messages when `ExactlyOnce` is set to `true`.</span></span> <span data-ttu-id="77b7b-165">Podobně služba MSMQ vyžaduje, aby fronta byla netransakční pro zajištění `ExactlyOnce` nejlepšíintenzity, například kdy je `false` a pro nestálé zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="77b7b-165">Similarly, MSMQ requires the queue to be non-transactional for best-effort assurances, such as when `ExactlyOnce` is `false` and for volatile messaging.</span></span> <span data-ttu-id="77b7b-166">Proto při `ExactlyOnce` nastavení `false` nebo `false`trvanlivé na , nelze odesílat nebo přijímat pomocí transakce.</span><span class="sxs-lookup"><span data-stu-id="77b7b-166">Thus, when setting `ExactlyOnce` to `false` or durable to `false`, you cannot send or receive using a transaction.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="77b7b-167">Ujistěte se, že je vytvořena správná fronta (transakční nebo netransakční) na základě nastavení ve vazbách.</span><span class="sxs-lookup"><span data-stu-id="77b7b-167">Ensure that the correct queue (transactional or non-transactional) is created based on settings in the bindings.</span></span> <span data-ttu-id="77b7b-168">Pokud `ExactlyOnce` `true`je , použijte transakční fronty; v opačném případě použijte netransakční frontu.</span><span class="sxs-lookup"><span data-stu-id="77b7b-168">If `ExactlyOnce` is `true`, use a transactional queue; otherwise, use a non-transactional queue.</span></span>  
  
#### <a name="dead-letter-queue-properties"></a><span data-ttu-id="77b7b-169">Vlastnosti fronty nedoručených zpráv</span><span class="sxs-lookup"><span data-stu-id="77b7b-169">Dead-Letter Queue Properties</span></span>  
 <span data-ttu-id="77b7b-170">Fronta nedoručených zpráv se používá k ukládání zpráv, které se nezdaří doručení.</span><span class="sxs-lookup"><span data-stu-id="77b7b-170">The dead-letter queue is used to store messages that fail delivery.</span></span> <span data-ttu-id="77b7b-171">Uživatel může napsat kompenzační logiku, která čte zprávy z fronty nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="77b7b-171">The user can write compensating logic that reads messages out of the dead-letter queue.</span></span>  
  
 <span data-ttu-id="77b7b-172">Mnoho systémů řazení do fronty zajišťuje frontu nedoručených zpráv v celém systému.</span><span class="sxs-lookup"><span data-stu-id="77b7b-172">Many queuing systems provide for a system-wide dead-letter queue.</span></span> <span data-ttu-id="77b7b-173">Služba MSMQ poskytuje celosystémovou netransakční frontu nedoručených zpráv pro zprávy, které nedoručení neposkytují netransakční mši, a celosystémovou transakční frontu nedoručených zpráv pro zprávy, které se nezdaří doručení transakčním frontám.</span><span class="sxs-lookup"><span data-stu-id="77b7b-173">MSMQ provides a system-wide non-transactional dead-letter queue for messages that fail delivery to non-transactional queues and a system-wide transactional dead-letter queue for messages that fail delivery to transactional queues.</span></span>  
  
 <span data-ttu-id="77b7b-174">Pokud službu MSMQ sdílí více klientů odesílajících zprávy do různých cílových front, všechny zprávy odeslané klienty přejdou do stejné fronty nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="77b7b-174">If multiple clients sending messages to different target queues share the MSMQ service, all messages sent by the clients go to the same dead-letter queue.</span></span> <span data-ttu-id="77b7b-175">To není vždy lepší.</span><span class="sxs-lookup"><span data-stu-id="77b7b-175">This is not always preferable.</span></span> <span data-ttu-id="77b7b-176">Pro lepší izolaci WCF a MSMQ v systému Windows Vista poskytují vlastní fronty nedoručených zpráv (nebo fronty nedoručených zpráv specifické pro aplikaci), které může uživatel zadat pro ukládání zpráv, které se nezdaří doručení.</span><span class="sxs-lookup"><span data-stu-id="77b7b-176">For better isolation, WCF and MSMQ in Windows Vista provide a custom dead-letter queue (or application-specific dead-letter queue) that the user can specify to store messages that fail delivery.</span></span> <span data-ttu-id="77b7b-177">Proto různí klienti nesdílejí stejnou frontu nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="77b7b-177">Therefore, different clients do not share the same dead-letter queue.</span></span>  
  
 <span data-ttu-id="77b7b-178">Vazba má dvě vlastnosti zájmu:</span><span class="sxs-lookup"><span data-stu-id="77b7b-178">The binding has two properties of interest:</span></span>  
  
- <span data-ttu-id="77b7b-179">`DeadLetterQueue`: Tato vlastnost je výčet, který označuje, zda je požadována fronta nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="77b7b-179">`DeadLetterQueue`: This property is an enumeration that indicates whether a dead-letter queue is requested.</span></span> <span data-ttu-id="77b7b-180">Výčet také obsahuje druh fronty nedoručených zpráv, pokud je požadována.</span><span class="sxs-lookup"><span data-stu-id="77b7b-180">The enumeration also contains the kind of dead-letter queue, if one is requested.</span></span> <span data-ttu-id="77b7b-181">Hodnoty jsou `None` `System`, `Custom`a .</span><span class="sxs-lookup"><span data-stu-id="77b7b-181">The values are `None`, `System`, and `Custom`.</span></span> <span data-ttu-id="77b7b-182">Další informace o interpretaci těchto vlastností naleznete [v tématu Použití front nedoručených zpráv ke zpracování chyb přenosu zpráv](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)</span><span class="sxs-lookup"><span data-stu-id="77b7b-182">For more information about the interpretation of these properties, see [Using Dead-Letter Queues to Handle Message Transfer Failures](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)</span></span>  
  
- <span data-ttu-id="77b7b-183">`CustomDeadLetterQueue`: Tato vlastnost je adresa URI identifikátoru jednotného prostředku (URI) fronty nedoručených zpráv specifických pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="77b7b-183">`CustomDeadLetterQueue`: This property is the Uniform Resource Identifier (URI) address of the application-specific dead-letter queue.</span></span> <span data-ttu-id="77b7b-184">To je `DeadLetterQueue`nutné, pokud .`Custom`</span><span class="sxs-lookup"><span data-stu-id="77b7b-184">This is required if `DeadLetterQueue`.`Custom`</span></span> <span data-ttu-id="77b7b-185">je zvolena.</span><span class="sxs-lookup"><span data-stu-id="77b7b-185">is chosen.</span></span>  
  
#### <a name="poison-message-handling-properties"></a><span data-ttu-id="77b7b-186">Vlastnosti zpracování poškozená zpráva</span><span class="sxs-lookup"><span data-stu-id="77b7b-186">Poison Message Handling properties</span></span>  
 <span data-ttu-id="77b7b-187">Když služba čte zprávy z cílové fronty v rámci transakce, služba může selhat ke zpracování zprávy z různých důvodů.</span><span class="sxs-lookup"><span data-stu-id="77b7b-187">When the service reads messages from the target queue under a transaction, the service may fail to process the message for various reasons.</span></span> <span data-ttu-id="77b7b-188">Zpráva je pak vrátit zpět do fronty číst znovu.</span><span class="sxs-lookup"><span data-stu-id="77b7b-188">The message is then put back into the queue to be read again.</span></span> <span data-ttu-id="77b7b-189">Chcete-li řešit zprávy, které opakovaně selhávají, lze ve vazbě nakonfigurovat sadu vlastností zpracování poškozenou zprávou.</span><span class="sxs-lookup"><span data-stu-id="77b7b-189">To deal with messages that fail repeatedly, a set of poison-message handling properties can be configured in the binding.</span></span> <span data-ttu-id="77b7b-190">Existují čtyři `ReceiveRetryCount`vlastnosti: , `MaxRetryCycles`, `RetryCycleDelay`a `ReceiveErrorHandling`.</span><span class="sxs-lookup"><span data-stu-id="77b7b-190">There are four properties: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay`, and `ReceiveErrorHandling`.</span></span> <span data-ttu-id="77b7b-191">Další informace o těchto vlastnostech naleznete v [tématu Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span><span class="sxs-lookup"><span data-stu-id="77b7b-191">For more information about these properties, see [Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span></span>  
  
#### <a name="security-properties"></a><span data-ttu-id="77b7b-192">Vlastnosti zabezpečení</span><span class="sxs-lookup"><span data-stu-id="77b7b-192">Security Properties</span></span>  
 <span data-ttu-id="77b7b-193">Služba MSMQ zveřejňuje vlastní model zabezpečení, například seznamy řízení přístupu (ACL) ve frontě nebo odesílání ověřených zpráv.</span><span class="sxs-lookup"><span data-stu-id="77b7b-193">MSMQ exposes its own security model, such as access control lists (ACLs) on a queue or sending authenticated messages.</span></span> <span data-ttu-id="77b7b-194">Zpřístupňuje `NetMsmqBinding` tyto vlastnosti zabezpečení jako součást nastavení zabezpečení přenosu.</span><span class="sxs-lookup"><span data-stu-id="77b7b-194">The `NetMsmqBinding` exposes these security properties as part of its transport security settings.</span></span> <span data-ttu-id="77b7b-195">Ve vazbě jsou dvě vlastnosti `MsmqAuthenticationMode` `MsmqProtectionLevel`pro zabezpečení přenosu: a .</span><span class="sxs-lookup"><span data-stu-id="77b7b-195">There are two properties in the binding for transport security: `MsmqAuthenticationMode` and `MsmqProtectionLevel`.</span></span> <span data-ttu-id="77b7b-196">Nastavení v těchto vlastnostech závisí na konfiguraci služby MSMQ.</span><span class="sxs-lookup"><span data-stu-id="77b7b-196">Settings in these properties depend on how MSMQ is configured.</span></span> <span data-ttu-id="77b7b-197">Další informace naleznete [v tématu Zabezpečení zpráv pomocí zabezpečení přenosu](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="77b7b-197">For more information, see [Securing Messages Using Transport Security](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md).</span></span>  
  
 <span data-ttu-id="77b7b-198">Kromě zabezpečení přenosu může být skutečná zpráva SOAP sama zabezpečena pomocí zabezpečení zpráv.</span><span class="sxs-lookup"><span data-stu-id="77b7b-198">In addition to transport security, the actual SOAP message itself can be secured using message security.</span></span> <span data-ttu-id="77b7b-199">Další informace naleznete [v tématu Zabezpečení zpráv pomocí zabezpečení zpráv](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md).</span><span class="sxs-lookup"><span data-stu-id="77b7b-199">For more information, see [Securing Messages Using Message Security](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md).</span></span>  
  
 <span data-ttu-id="77b7b-200">`MsmqTransportSecurity`také zpřístupňuje `MsmqEncryptionAlgorithm` dvě `MsmqHashAlgorithm`vlastnosti a .</span><span class="sxs-lookup"><span data-stu-id="77b7b-200">`MsmqTransportSecurity` also exposes two properties, `MsmqEncryptionAlgorithm` and `MsmqHashAlgorithm`.</span></span> <span data-ttu-id="77b7b-201">Jedná se o výčty různých algoritmů, které chcete zvolit pro šifrování zpráv a hašování podpisů ve frontě.</span><span class="sxs-lookup"><span data-stu-id="77b7b-201">These are enumerations of different algorithms to choose for queue-to-queue transfer encryption of messages and hashing of the signatures.</span></span>  
  
#### <a name="other-properties"></a><span data-ttu-id="77b7b-202">Další vlastnosti</span><span class="sxs-lookup"><span data-stu-id="77b7b-202">Other Properties</span></span>  
 <span data-ttu-id="77b7b-203">Kromě předchozích vlastností zahrnují další vlastnosti specifické pro službu MSMQ, které jsou ve vazbě vystaveny:</span><span class="sxs-lookup"><span data-stu-id="77b7b-203">In addition to the preceding properties, other MSMQ-specific properties exposed in the binding include:</span></span>  
  
- <span data-ttu-id="77b7b-204">`UseSourceJournal`: Vlastnost označující, že je zapnuto ukládání zdroje do deníku.</span><span class="sxs-lookup"><span data-stu-id="77b7b-204">`UseSourceJournal`: A property to indicate that source journaling is turned on.</span></span> <span data-ttu-id="77b7b-205">Ukládání zdrojů do deníku je funkce msmq, která sleduje zprávy, které byly úspěšně přeneseny z fronty přenosu.</span><span class="sxs-lookup"><span data-stu-id="77b7b-205">Source journaling is an MSMQ feature that keeps track of messages that have been successfully transmitted from the transmission queue.</span></span>  
  
- <span data-ttu-id="77b7b-206">`UseMsmqTracing`: Vlastnost označující, že je zapnuto trasování msmq.</span><span class="sxs-lookup"><span data-stu-id="77b7b-206">`UseMsmqTracing`: A property to indicate that MSMQ tracing is turned on.</span></span> <span data-ttu-id="77b7b-207">Trasování služby MSMQ odesílá zprávy sestav do fronty sestav pokaždé, když zpráva opustí nebo dorazí do počítače hostujícího správce front služby MSMQ.</span><span class="sxs-lookup"><span data-stu-id="77b7b-207">MSMQ tracing sends report messages to a report queue each time a message leaves or arrives at a machine hosting an MSMQ queue manager.</span></span>  
  
- <span data-ttu-id="77b7b-208">`QueueTransferProtocol`: Výčet protokolu, který se má použít pro přenosy zpráv frontami do fronty.</span><span class="sxs-lookup"><span data-stu-id="77b7b-208">`QueueTransferProtocol`: An enumeration of the protocol to use for queue-to-queue message transfers.</span></span> <span data-ttu-id="77b7b-209">Služba MSMQ implementuje nativní protokol přenosu fronty do fronty a protokol založený na protokolu SOAP s názvem SOAP Reliable Messaging Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="77b7b-209">MSMQ implements a native queue-to-queue transfer protocol and a SOAP-based protocol called SOAP Reliable Messaging Protocol (SRMP).</span></span> <span data-ttu-id="77b7b-210">SRMP se používá při použití přenosu HTTP pro přenosy front-front.</span><span class="sxs-lookup"><span data-stu-id="77b7b-210">SRMP is used when using HTTP transport for queue-to-queue transfers.</span></span> <span data-ttu-id="77b7b-211">SRMP secure se používá při použití protokolu HTTPS pro přenosy do fronty.</span><span class="sxs-lookup"><span data-stu-id="77b7b-211">SRMP secure is used when using HTTPS for queue-to-queue transfers.</span></span>  
  
- <span data-ttu-id="77b7b-212">`UseActiveDirectory`: Logická hodnota označující, zda je nutné použít službu Active Directory pro rozlišení adresy fronty.</span><span class="sxs-lookup"><span data-stu-id="77b7b-212">`UseActiveDirectory`: A Boolean value to indicate whether the Active Directory must be used for queue address resolution.</span></span> <span data-ttu-id="77b7b-213">Ve výchozím nastavení je to to vypnout.</span><span class="sxs-lookup"><span data-stu-id="77b7b-213">By default, this is off.</span></span> <span data-ttu-id="77b7b-214">Další informace naleznete v [tématu Koncové body služby a Adresování front](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md).</span><span class="sxs-lookup"><span data-stu-id="77b7b-214">For more information, see [Service Endpoints and Queue Addressing](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md).</span></span>  
  
### <a name="msmqintegrationbinding"></a><span data-ttu-id="77b7b-215">Msmqintegrationbinding</span><span class="sxs-lookup"><span data-stu-id="77b7b-215">MsmqIntegrationBinding</span></span>  
 <span data-ttu-id="77b7b-216">Používá `MsmqIntegrationBinding` se, když chcete, aby koncový bod WCF komunikoval s existující aplikací msmq napsanou v jazycích C, C++, COM nebo System.Messaging.</span><span class="sxs-lookup"><span data-stu-id="77b7b-216">The `MsmqIntegrationBinding` is used when you want a WCF endpoint to communicate with an existing MSMQ application written in C, C++, COM, or System.Messaging APIs.</span></span>  
  
 <span data-ttu-id="77b7b-217">Vlastnosti vazby jsou `NetMsmqBinding`stejné jako pro .</span><span class="sxs-lookup"><span data-stu-id="77b7b-217">The binding properties are the same as for `NetMsmqBinding`.</span></span> <span data-ttu-id="77b7b-218">Platí však následující rozdíly:</span><span class="sxs-lookup"><span data-stu-id="77b7b-218">However, the following differences apply:</span></span>  
  
- <span data-ttu-id="77b7b-219">Provozní smlouva `MsmqIntegrationBinding` pro je omezena na převzetí <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> jednoho parametru typu, kde parametr typu je typ typu typ.</span><span class="sxs-lookup"><span data-stu-id="77b7b-219">The operation contract for `MsmqIntegrationBinding` is restricted to taking a single parameter of type <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> where the type parameter is the body type.</span></span>  
  
- <span data-ttu-id="77b7b-220">Většina vlastností nativní zprávy služby <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> MSMQ je vystavena pro použití.</span><span class="sxs-lookup"><span data-stu-id="77b7b-220">Much of MSMQ native message properties are exposed in the <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> for use.</span></span>  
  
- <span data-ttu-id="77b7b-221">Chcete-li pomoci s serializací a rekonstrukcí textu zprávy, jsou k dispozici serializátory jako XML a ActiveX.</span><span class="sxs-lookup"><span data-stu-id="77b7b-221">To help with serialization and deserialization of the message body, serializers such as XML and ActiveX are provided.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="77b7b-222">Příklad kódu</span><span class="sxs-lookup"><span data-stu-id="77b7b-222">Sample Code</span></span>  
 <span data-ttu-id="77b7b-223">Podrobné pokyny k zápisu služeb WCF, které používají službu MSMQ, naleznete v následujících tématech:</span><span class="sxs-lookup"><span data-stu-id="77b7b-223">For step by step instructions on how to write WCF services that use MSMQ see the following topics:</span></span>  
  
- [<span data-ttu-id="77b7b-224">Postupy: Výměna zpráv s koncovými body WCF a aplikací pro řazení zpráv do front</span><span class="sxs-lookup"><span data-stu-id="77b7b-224">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
  
- [<span data-ttu-id="77b7b-225">Postupy: Výměna zpráv zařazených do fronty s koncovými body WCF</span><span class="sxs-lookup"><span data-stu-id="77b7b-225">How to: Exchange Queued Messages with WCF Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)  
  
 <span data-ttu-id="77b7b-226">Ukázka dokončeného kódu ilustrující použití technologie MSMQ v wcf naleznete v následujících tématech:</span><span class="sxs-lookup"><span data-stu-id="77b7b-226">For a completed code sample illustrating the use of MSMQ in WCF see the following topics:</span></span>  
  
- [<span data-ttu-id="77b7b-227">Zpracované vazby služby MSMQ</span><span class="sxs-lookup"><span data-stu-id="77b7b-227">Transacted MSMQ Binding</span></span>](../../../../docs/framework/wcf/samples/transacted-msmq-binding.md)  
  
- [<span data-ttu-id="77b7b-228">Nestálá komunikace ve frontě</span><span class="sxs-lookup"><span data-stu-id="77b7b-228">Volatile Queued Communication</span></span>](../../../../docs/framework/wcf/samples/volatile-queued-communication.md)  
  
- [<span data-ttu-id="77b7b-229">Fronty nedoručených zpráv</span><span class="sxs-lookup"><span data-stu-id="77b7b-229">Dead Letter Queues</span></span>](../../../../docs/framework/wcf/samples/dead-letter-queues.md)  
  
- [<span data-ttu-id="77b7b-230">Relace a fronty</span><span class="sxs-lookup"><span data-stu-id="77b7b-230">Sessions and Queues</span></span>](../../../../docs/framework/wcf/samples/sessions-and-queues.md)  
  
- [<span data-ttu-id="77b7b-231">Obousměrná komunikace</span><span class="sxs-lookup"><span data-stu-id="77b7b-231">Two-Way Communication</span></span>](../../../../docs/framework/wcf/samples/two-way-communication.md)
  
- [<span data-ttu-id="77b7b-232">SRMP</span><span class="sxs-lookup"><span data-stu-id="77b7b-232">SRMP</span></span>](../../../../docs/framework/wcf/samples/srmp.md)  
  
- [<span data-ttu-id="77b7b-233">Zabezpečení zprávy pomocí služby Řízení front zpráv</span><span class="sxs-lookup"><span data-stu-id="77b7b-233">Message Security over Message Queuing</span></span>](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)  
  
## <a name="see-also"></a><span data-ttu-id="77b7b-234">Viz také</span><span class="sxs-lookup"><span data-stu-id="77b7b-234">See also</span></span>

- [<span data-ttu-id="77b7b-235">Koncové body služby a adresování front</span><span class="sxs-lookup"><span data-stu-id="77b7b-235">Service Endpoints and Queue Addressing</span></span>](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md)
- [<span data-ttu-id="77b7b-236">Webhosting frontové aplikace</span><span class="sxs-lookup"><span data-stu-id="77b7b-236">Web Hosting a Queued Application</span></span>](../../../../docs/framework/wcf/feature-details/web-hosting-a-queued-application.md)
