---
title: Webhosting frontové aplikace
ms.date: 03/30/2017
ms.assetid: c7a539fa-e442-4c08-a7f1-17b7f5a03e88
ms.openlocfilehash: 17c3d2167d3f98017c5f366ab0d700d9fb889f82
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/09/2020
ms.locfileid: "84600137"
---
# <a name="web-hosting-a-queued-application"></a><span data-ttu-id="b972c-102">Webhosting frontové aplikace</span><span class="sxs-lookup"><span data-stu-id="b972c-102">Web Hosting a Queued Application</span></span>
<span data-ttu-id="b972c-103">Aktivační služba procesů systému Windows (WAS) spravuje aktivaci a životnost pracovních procesů, které obsahují aplikace, které hostují služby Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="b972c-103">The Windows Process Activation Service (WAS) manages the activation and lifetime of the worker processes that contain applications that host Windows Communication Foundation (WCF) services.</span></span> <span data-ttu-id="b972c-104">Model procesu WAS generalizuje model procesu IIS 6,0 pro server HTTP tím, že odebere závislost na HTTP.</span><span class="sxs-lookup"><span data-stu-id="b972c-104">The WAS process model generalizes the IIS 6.0 process model for the HTTP server by removing the dependency on HTTP.</span></span> <span data-ttu-id="b972c-105">To umožňuje službám WCF používat protokoly HTTP i non-HTTP, jako je NET. MSMQ a MSMQ. FormatName, v hostitelském prostředí, které podporuje aktivaci založené na zprávách, a nabízí možnost hostovat v daném počítači velký počet aplikací.</span><span class="sxs-lookup"><span data-stu-id="b972c-105">This allows WCF services to use both HTTP and non-HTTP protocols, such as net.msmq and msmq.formatname, in a hosting environment that supports message-based activation and offers the ability to host a large number of applications on a given computer.</span></span>  
  
 <span data-ttu-id="b972c-106">Služba WAS obsahuje aktivační službu Řízení front zpráv (MSMQ), která aktivuje aplikaci ve frontě, pokud je jedna nebo více zpráv umístěných v jedné z front používaných aplikací.</span><span class="sxs-lookup"><span data-stu-id="b972c-106">WAS includes a Message Queuing (MSMQ) activation service that activates a queued application when one or more messages are placed in one of the queues used by the application.</span></span> <span data-ttu-id="b972c-107">Aktivační služba MSMQ je služba NT, která se ve výchozím nastavení automaticky spustí.</span><span class="sxs-lookup"><span data-stu-id="b972c-107">The MSMQ activation service is an NT service that is automatically started by default.</span></span>  
  
 <span data-ttu-id="b972c-108">Další informace o a jeho výhodách najdete v tématu [hostování v aktivační službě procesů systému Windows](hosting-in-windows-process-activation-service.md).</span><span class="sxs-lookup"><span data-stu-id="b972c-108">For more information about WAS and its benefits, see [Hosting in Windows Process Activation Service](hosting-in-windows-process-activation-service.md).</span></span> <span data-ttu-id="b972c-109">Další informace o službě MSMQ najdete v tématu [Queue Overview](queues-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b972c-109">For more information about MSMQ, see [Queues Overview](queues-overview.md).</span></span>
  
## <a name="queue-addressing-in-was"></a><span data-ttu-id="b972c-110">Zařazení do fronty v nástroji bylo</span><span class="sxs-lookup"><span data-stu-id="b972c-110">Queue Addressing in WAS</span></span>  
 <span data-ttu-id="b972c-111">Měly by aplikace adresy identifikátoru URI (Uniform Resource Identifier).</span><span class="sxs-lookup"><span data-stu-id="b972c-111">WAS applications have Uniform Resource Identifier (URI) addresses.</span></span> <span data-ttu-id="b972c-112">Adresy aplikací mají dvě části: základní předponu identifikátoru URI a relativní adresu (cestu) specifickou pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="b972c-112">Application addresses have two parts: a base URI prefix and an application-specific, relative address (path).</span></span> <span data-ttu-id="b972c-113">Tyto dvě části poskytují externí adresu aplikace, když se spojí dohromady.</span><span class="sxs-lookup"><span data-stu-id="b972c-113">These two parts provide the external address for an application when joined together.</span></span> <span data-ttu-id="b972c-114">Základní předpona identifikátoru URI je vytvořená z vazby webu a používá se pro všechny aplikace v lokalitě, například "NET. MSMQ://localhost", "MSMQ. FormatName://localhost" nebo "NET. TCP://localhost".</span><span class="sxs-lookup"><span data-stu-id="b972c-114">The base URI prefix is constructed from the site binding and is used for all the applications under the site, for example, "net.msmq://localhost", "msmq.formatname://localhost", or "net.tcp://localhost".</span></span> <span data-ttu-id="b972c-115">Adresy aplikací se pak vytvoří pomocí fragmentů cesty specifické pro aplikaci (například "/applicationOne") a jejich připojením k základní předponě identifikátoru URI, aby bylo možné dorazit na úplný identifikátor URI aplikace, například "NET. MSMQ://localhost/applicationOne".</span><span class="sxs-lookup"><span data-stu-id="b972c-115">Application addresses are then constructed by taking application-specific path fragments (such as "/applicationOne") and appending them to the base URI prefix to arrive at the full application URI, for example, "net.msmq://localhost/applicationOne".</span></span>  
  
 <span data-ttu-id="b972c-116">Aktivační služba MSMQ používá identifikátor URI aplikace, aby odpovídala frontě, kterou musí služba Aktivace služby MSMQ monitorovat pro zprávy.</span><span class="sxs-lookup"><span data-stu-id="b972c-116">The MSMQ activation service uses the application URI to match the queue that the MSMQ activation service must monitor for messages.</span></span> <span data-ttu-id="b972c-117">Jakmile se služba Aktivace služby MSMQ spustí, vytvoří výčet všech veřejných a privátních front v počítači, na kterých je nakonfigurovaný příjem, a monitoruje je pro zprávy.</span><span class="sxs-lookup"><span data-stu-id="b972c-117">When the MSMQ activation service starts, it enumerates all public and private queues on the computer it is configured to receive from and monitors them for messages.</span></span> <span data-ttu-id="b972c-118">Aktivační služba MSMQ každých 10 minut aktualizuje seznam front, které se mají monitorovat.</span><span class="sxs-lookup"><span data-stu-id="b972c-118">Every 10 minutes, the MSMQ activation service refreshes the list of queues to monitor.</span></span> <span data-ttu-id="b972c-119">Když se ve frontě najde zpráva, aktivační služba se shoduje s názvem fronty a výsledkem je nejdelší odpovídající identifikátor URI aplikace pro vazbu NET. MSMQ a aplikaci aktivuje.</span><span class="sxs-lookup"><span data-stu-id="b972c-119">When a message is found in a queue, the activation service matches the queue name to the longest matching application URI for the net.msmq binding and activates the application.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="b972c-120">Aplikace, která se aktivuje, se musí shodovat s předponou názvu fronty (nejdelší shoda).</span><span class="sxs-lookup"><span data-stu-id="b972c-120">The application being activated must match (longest match) the prefix of the queue name.</span></span>  
  
 <span data-ttu-id="b972c-121">Název fronty je například: msmqWebHost/orderProcessing/service. svc.</span><span class="sxs-lookup"><span data-stu-id="b972c-121">For example, a queue name is: msmqWebHost/orderProcessing/service.svc.</span></span> <span data-ttu-id="b972c-122">Pokud má aplikace 1 virtuální adresář/msmqWebHost/orderProcessing se službou. svc pod ní a aplikace 2 má virtuální adresář/msmqWebHost s orderProcessing. svc, je aktivována aplikace 1.</span><span class="sxs-lookup"><span data-stu-id="b972c-122">If Application 1 has a virtual directory /msmqWebHost/orderProcessing with a service.svc under it, and Application 2 has a virtual directory /msmqWebHost with an orderProcessing.svc under it, Application 1 is activated.</span></span> <span data-ttu-id="b972c-123">Pokud je aplikace 1 odstraněna, je aktivována aplikace 2.</span><span class="sxs-lookup"><span data-stu-id="b972c-123">If Application 1 is deleted, Application 2 is activated.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="b972c-124">Když se vytvoří fronta, všechny zprávy, které do ní odešlou, neaktivují aplikaci, dokud aktivační služba MSMQ neaktualizuje seznam front, což je většinou 10 minut od okamžiku, kdy se fronta vytvořila.</span><span class="sxs-lookup"><span data-stu-id="b972c-124">When a queue is created, any messages sent to it do not activate an application until the MSMQ activation service refreshes the queue list, which is, at most, 10 minutes from the time the queue was created.</span></span> <span data-ttu-id="b972c-125">Restartování aktivační služby aktualizuje i seznam front.</span><span class="sxs-lookup"><span data-stu-id="b972c-125">Restarting the activation service refreshes the queue list as well.</span></span>  
  
### <a name="the-effect-of-private-and-public-queues-on-addressing"></a><span data-ttu-id="b972c-126">Vliv privátních a veřejných front na adresování</span><span class="sxs-lookup"><span data-stu-id="b972c-126">The Effect of Private and Public Queues on Addressing</span></span>  
 <span data-ttu-id="b972c-127">Aktivační služba MSMQ nerozlišuje mezi monitorováním privátních a veřejných front.</span><span class="sxs-lookup"><span data-stu-id="b972c-127">The MSMQ activation service does not distinguish between private and public queue monitoring.</span></span> <span data-ttu-id="b972c-128">V takovém případě nemůžete mít veřejné a soukromé fronty se stejným názvem.</span><span class="sxs-lookup"><span data-stu-id="b972c-128">As such, you cannot have public and private queues with the same name.</span></span> <span data-ttu-id="b972c-129">V případě, že aplikace hostovaná na webu, může dojít k aktivaci čtení z obou front.</span><span class="sxs-lookup"><span data-stu-id="b972c-129">If you do, a Web-hosted application may get activated reading from either of the queues.</span></span>  
  
### <a name="queue-configuration-for-activation"></a><span data-ttu-id="b972c-130">Konfigurace fronty pro aktivaci</span><span class="sxs-lookup"><span data-stu-id="b972c-130">Queue Configuration for Activation</span></span>  
 <span data-ttu-id="b972c-131">Aktivační služba MSMQ je spuštěna jako síťová služba.</span><span class="sxs-lookup"><span data-stu-id="b972c-131">The MSMQ activation service runs as NETWORK SERVICE.</span></span> <span data-ttu-id="b972c-132">Jedná se o službu, která monitoruje fronty pro aktivaci aplikací.</span><span class="sxs-lookup"><span data-stu-id="b972c-132">It is the service that monitors queues to activate applications.</span></span> <span data-ttu-id="b972c-133">Aby mohla fronta aktivovat aplikace z fronty, musí pro přístup k síti v seznamu řízení přístupu (ACL) pro síťovou službu použít přístup.</span><span class="sxs-lookup"><span data-stu-id="b972c-133">For it to activate applications from the queue, the queue must provide for NETWORK SERVICE access to peek for messages in its access control list (ACL).</span></span>  
  
### <a name="poison-messaging"></a><span data-ttu-id="b972c-134">Nezpracovatelná zpráva</span><span class="sxs-lookup"><span data-stu-id="b972c-134">Poison Messaging</span></span>  
 <span data-ttu-id="b972c-135">Zpracování škodlivých zpráv v technologii WCF je zpracováváno kanálem, který nejen detekuje, že zpráva je poškozena, ale vybírá dispozice na základě konfigurace uživatele.</span><span class="sxs-lookup"><span data-stu-id="b972c-135">Poison message handling in WCF is handled by the channel, which not only detects that a message is poisoned but selects a disposition based on user configuration.</span></span> <span data-ttu-id="b972c-136">V důsledku toho je ve frontě jediná zpráva.</span><span class="sxs-lookup"><span data-stu-id="b972c-136">As a result, there is a single message in the queue.</span></span> <span data-ttu-id="b972c-137">Aplikace, která je hostována v rámci webu, se postupně přerušuje a zpráva se přesune do fronty opakovaných pokusů.</span><span class="sxs-lookup"><span data-stu-id="b972c-137">The Web-hosted application aborts successive times and the message is moved to a retry queue.</span></span> <span data-ttu-id="b972c-138">V bodě vydaném zpožděním při opakování cyklu se zpráva přesune z fronty opakování do hlavní fronty a zkusí to znovu.</span><span class="sxs-lookup"><span data-stu-id="b972c-138">At a point dictated by the retry cycle delay, the message is moved from the retry queue to the main queue to try again.</span></span> <span data-ttu-id="b972c-139">To ale vyžaduje, aby byl kanál zařazený do fronty aktivní.</span><span class="sxs-lookup"><span data-stu-id="b972c-139">But this requires the queued channel to be active.</span></span> <span data-ttu-id="b972c-140">Pokud byla aplikace recyklována nástrojem WAS, zpráva zůstane ve frontě opakování, dokud do hlavní fronty nepřijde jiná zpráva k aktivaci aplikace zařazené do fronty.</span><span class="sxs-lookup"><span data-stu-id="b972c-140">If the application is recycled by WAS, then the message remains in the retry queue until another message arrives in the main queue to activate the queued application.</span></span> <span data-ttu-id="b972c-141">Alternativním řešením v tomto případě je přesunout zprávu ručně z fronty opakování zpět do hlavní fronty a znovu aktivovat aplikaci.</span><span class="sxs-lookup"><span data-stu-id="b972c-141">The workaround in this case is to move the message manually from the retry queue back to the main queue to reactivate the application.</span></span>  
  
### <a name="subqueue-and-system-queue-caveat"></a><span data-ttu-id="b972c-142">Omezení podfronty a fronty systému</span><span class="sxs-lookup"><span data-stu-id="b972c-142">Subqueue and System Queue Caveat</span></span>  
 <span data-ttu-id="b972c-143">Hostovaná aplikace se nedá aktivovat na základě zpráv ve frontě systému, jako je například fronta nedoručených zpráv v rámci systému, nebo podfronty, jako je například otravové podfronty.</span><span class="sxs-lookup"><span data-stu-id="b972c-143">A WAS-hosted application cannot be activated based on messages in a system queue, such as the system-wide dead-letter queue, or sub-queues, such as poison sub-queues.</span></span> <span data-ttu-id="b972c-144">Toto je omezení pro tuto verzi produktu.</span><span class="sxs-lookup"><span data-stu-id="b972c-144">This is a limitation for this version of the product.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b972c-145">Viz také</span><span class="sxs-lookup"><span data-stu-id="b972c-145">See also</span></span>

- [<span data-ttu-id="b972c-146">Zpracování škodlivých zpráv</span><span class="sxs-lookup"><span data-stu-id="b972c-146">Poison Message Handling</span></span>](poison-message-handling.md)
- [<span data-ttu-id="b972c-147">Koncové body služby a adresování front</span><span class="sxs-lookup"><span data-stu-id="b972c-147">Service Endpoints and Queue Addressing</span></span>](service-endpoints-and-queue-addressing.md)
