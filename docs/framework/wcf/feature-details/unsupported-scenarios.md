---
title: Nepodporované scénáře
ms.date: 03/30/2017
ms.assetid: 72027d0f-146d-40c5-9d72-e94392c8bb40
ms.openlocfilehash: 6c0ee061f754e85244bffdc06cbe23aee68d2222
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/04/2018
ms.locfileid: "43561989"
---
# <a name="unsupported-scenarios"></a><span data-ttu-id="e2d4b-102">Nepodporované scénáře</span><span class="sxs-lookup"><span data-stu-id="e2d4b-102">Unsupported Scenarios</span></span>
<span data-ttu-id="e2d4b-103">Z různých důvodů Windows Communication Foundation (WCF) nepodporuje některé konkrétní bezpečnostní scénáře.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-103">For various reasons, Windows Communication Foundation (WCF) does not support some specific security scenarios.</span></span> <span data-ttu-id="e2d4b-104">Například [!INCLUDE[wxp](../../../../includes/wxp-md.md)] Home Edition neimplementuje ověřovací protokoly SSPI nebo protokolu Kerberos, a proto WCF nepodporuje spouštění služby s ověřováním Windows na této platformě.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-104">For example, [!INCLUDE[wxp](../../../../includes/wxp-md.md)] Home Edition does not implement the SSPI or Kerberos authentication protocols, and therefore WCF does not support running a service with Windows authentication on that platform.</span></span> <span data-ttu-id="e2d4b-105">Jiné ověřovací mechanismy, jako je například uživatelské jméno a heslo a integrované ověřování protokolu HTTP/HTTPS se nepodporuje při spuštění WCF v části Windows XP Home Edition.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-105">Other authentication mechanisms, such as username/password and HTTP/HTTPS integrated authentication are supported when running WCF under Windows XP Home Edition.</span></span>  
  
## <a name="impersonation-scenarios"></a><span data-ttu-id="e2d4b-106">Zosobnění scénáře</span><span class="sxs-lookup"><span data-stu-id="e2d4b-106">Impersonation Scenarios</span></span>  
  
### <a name="impersonated-identity-might-not-flow-when-clients-make-asynchronous-calls"></a><span data-ttu-id="e2d4b-107">Zosobněnou identitou může není tok, když klienti provádět asynchronní volání</span><span class="sxs-lookup"><span data-stu-id="e2d4b-107">Impersonated Identity Might Not Flow When Clients Make Asynchronous Calls</span></span>  
 <span data-ttu-id="e2d4b-108">Když klient WCF umožňuje asynchronní volání služeb WCF pomocí ověřování Windows v zosobnění, může dojít k ověření, s identitou procesu klienta místo zosobněnou identitou.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-108">When a WCF client makes asynchronous calls to a WCF service using Windows authentication under impersonation, authentication might occur with the identity of the client process instead of the impersonated identity.</span></span>  
  
### <a name="windows-xp-and-secure-context-token-cookie-enabled"></a><span data-ttu-id="e2d4b-109">Windows XP a zabezpečené kontextu Token souboru Cookie povolené</span><span class="sxs-lookup"><span data-stu-id="e2d4b-109">Windows XP and Secure Context Token Cookie Enabled</span></span>  
 <span data-ttu-id="e2d4b-110">WCF nepodporuje zosobnění a <xref:System.InvalidOperationException> je vyvolána při dodržení následujících podmínek:</span><span class="sxs-lookup"><span data-stu-id="e2d4b-110">WCF does not support impersonation and an <xref:System.InvalidOperationException> is thrown when the following conditions exist:</span></span>  
  
-   <span data-ttu-id="e2d4b-111">Operační systém je [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e2d4b-111">The operating system is [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
-   <span data-ttu-id="e2d4b-112">Režim ověřování výsledkem identita Windows.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-112">The authentication mode results in a Windows identity.</span></span>  
  
-   <span data-ttu-id="e2d4b-113"><xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> Vlastnost <xref:System.ServiceModel.OperationBehaviorAttribute> je nastavena na <xref:System.ServiceModel.ImpersonationOption.Required>.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-113">The <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> property of the <xref:System.ServiceModel.OperationBehaviorAttribute> is set to <xref:System.ServiceModel.ImpersonationOption.Required>.</span></span>  
  
-   <span data-ttu-id="e2d4b-114">Vytvoří token kontextu zabezpečení na základě stavu (SCT) (ve výchozím nastavení, je zakázáno vytváření).</span><span class="sxs-lookup"><span data-stu-id="e2d4b-114">A state-based security context token (SCT) is created (by default, creation is disabled).</span></span>  
  
 <span data-ttu-id="e2d4b-115">Základě stavu SCT lze vytvořit pouze použití vlastní vazby.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-115">The state-based SCT can only be created using a custom binding.</span></span> <span data-ttu-id="e2d4b-116">Další informace najdete v tématu [postupy: vytvoření Token kontextu zabezpečení pro zabezpečenou relaci](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).) V kódu, je tak, že vytvoříte element vazby zabezpečení povoleno token (buď <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> nebo <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>) pomocí <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%28System.Boolean%29?displayProperty=nameWithType> nebo <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%28System.ServiceModel.Channels.SecurityBindingElement%2CSystem.Boolean%29?displayProperty=nameWithType> metoda a nastavení `requireCancellation` parametr `false`.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-116">For more information, see [How to: Create a Security Context Token for a Secure Session](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).) In code, the token is enabled by creating a security binding element (either <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> or <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>) using the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%28System.Boolean%29?displayProperty=nameWithType> or the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%28System.ServiceModel.Channels.SecurityBindingElement%2CSystem.Boolean%29?displayProperty=nameWithType> method and setting the `requireCancellation` parameter to `false`.</span></span> <span data-ttu-id="e2d4b-117">Parametr odkazuje na ukládání do mezipaměti SCT.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-117">The parameter refers to the caching of the SCT.</span></span> <span data-ttu-id="e2d4b-118">Nastavením této hodnoty na `false` povolí tuto funkci SCT na základě stavu.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-118">Setting the value to `false` enables the state-based SCT feature.</span></span>  
  
 <span data-ttu-id="e2d4b-119">V konfiguraci, případně token je povoleno tak, že vytvoříte <`customBinding`>, následným přidáním <`security`> element a nastavení `authenticationMode` atribut SecureConversation a `requireSecurityContextCancellation` atribut `true`.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-119">Alternatively, in configuration, the token is enabled by creating a <`customBinding`>, then adding a <`security`> element, and setting the `authenticationMode` attribute to SecureConversation and the `requireSecurityContextCancellation` attribute to `true`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e2d4b-120">Předchozí požadavky jsou specifické.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-120">The preceding requirements are specific.</span></span> <span data-ttu-id="e2d4b-121">Například <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> vytvoří element vazby, která má za následek Windows identity, ale nevytváří SCT.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-121">For example, the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> creates a binding element that results in a Windows identity, but does not establish an SCT.</span></span> <span data-ttu-id="e2d4b-122">Proto ji můžete použít `Required` možnost [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e2d4b-122">Therefore, you can use it with the `Required` option on [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
### <a name="possible-aspnet-conflict"></a><span data-ttu-id="e2d4b-123">Konfliktům technologie ASP.NET</span><span class="sxs-lookup"><span data-stu-id="e2d4b-123">Possible ASP.NET Conflict</span></span>  
 <span data-ttu-id="e2d4b-124">WCF a [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] můžete jak povolit nebo zakázat zosobnění.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-124">WCF and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] can both enable or disable impersonation.</span></span> <span data-ttu-id="e2d4b-125">Když [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] aplikace WCF je hostitelem ke konfliktu může existovat mezi WCF a [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] nastavení konfigurace.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-125">When [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] hosts an WCF application, a conflict may exist between the WCF and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] configuration settings.</span></span> <span data-ttu-id="e2d4b-126">V případě konfliktu, nastavení WCF má přednost, pokud <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> je nastavena na <xref:System.ServiceModel.ImpersonationOption.NotAllowed>v takovém případě [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] přednost má nastavení zosobnění.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-126">In case of conflict, the WCF setting takes precedence, unless the <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> property is set to <xref:System.ServiceModel.ImpersonationOption.NotAllowed>, in which case the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] impersonation setting takes precedence.</span></span>  
  
### <a name="assembly-loads-may-fail-under-impersonation"></a><span data-ttu-id="e2d4b-127">Načítání sestavení může selhat v zosobnění</span><span class="sxs-lookup"><span data-stu-id="e2d4b-127">Assembly Loads May Fail Under Impersonation</span></span>  
 <span data-ttu-id="e2d4b-128">Pokud zosobněného kontextu nemá přístupová práva k načtení sestavení a pokud je první common language runtime (CLR) se pokouší načíst sestavení pro tuto doménu AppDomain, <xref:System.AppDomain> ukládá do mezipaměti selhání.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-128">If the impersonated context does not have access rights to load an assembly and if it is the first time the common language runtime (CLR) is attempting to load the assembly for that AppDomain, the <xref:System.AppDomain> caches the failure.</span></span> <span data-ttu-id="e2d4b-129">Následné pokusy o načtení tohoto sestavení (nebo sestavení) nezdaří, i po vrácení zosobnění a i když vrácený kontext má přístupová práva k načtení sestavení.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-129">Subsequent attempts to load that assembly (or assemblies) fail, even after reverting the impersonation, and even if the reverted context has access rights to load the assembly.</span></span> <span data-ttu-id="e2d4b-130">Je to proto, že modul CLR nebude znovu pokoušet zatížení po změně kontextu uživatele.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-130">This is because the CLR does not re-attempt the load after the user context is changed.</span></span> <span data-ttu-id="e2d4b-131">Je nutné restartovat aplikační domény na obnovení po chybě.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-131">You must restart the application domain to recover from the failure.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e2d4b-132">Výchozí hodnota <xref:System.ServiceModel.Security.WindowsClientCredential.AllowedImpersonationLevel%2A> vlastnost <xref:System.ServiceModel.Security.WindowsClientCredential> třída je <xref:System.Security.Principal.TokenImpersonationLevel.Identification>.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-132">The default value for the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowedImpersonationLevel%2A> property of the <xref:System.ServiceModel.Security.WindowsClientCredential> class is <xref:System.Security.Principal.TokenImpersonationLevel.Identification>.</span></span> <span data-ttu-id="e2d4b-133">Ve většině případů objekt context identifikace úroveň zosobnění nemá žádná práva k načtení žádné další sestavení.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-133">In most cases, an identification-level impersonation context has no rights to load any additional assemblies.</span></span> <span data-ttu-id="e2d4b-134">Toto je výchozí hodnota, tohle je velmi běžné podmínku je potřeba vědět.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-134">This is the default value, so this is a very common condition to be aware of.</span></span> <span data-ttu-id="e2d4b-135">Identifikace úroveň zosobnění také nastane, pokud proces zosobnění nemá `SeImpersonate` oprávnění.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-135">Identification-level impersonation also occurs when the impersonating process does not have the `SeImpersonate` privilege.</span></span> <span data-ttu-id="e2d4b-136">Další informace najdete v tématu [delegace a zosobnění](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="e2d4b-136">For more information, see [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
### <a name="delegation-requires-credential-negotiation"></a><span data-ttu-id="e2d4b-137">Delegování vyžaduje vyjednávání přihlašovacích údajů</span><span class="sxs-lookup"><span data-stu-id="e2d4b-137">Delegation Requires Credential Negotiation</span></span>  
 <span data-ttu-id="e2d4b-138">Delegování používat ověřování protokolu Kerberos, musí implementovat protokol Kerberos s vyjednávání přihlašovacích údajů (říká se jim více větev nebo vícekrokové protokolu Kerberos).</span><span class="sxs-lookup"><span data-stu-id="e2d4b-138">To use the Kerberos authentication protocol with delegation, you must implement the Kerberos protocol with credential negotiation (sometimes called multi-leg or multi-step Kerberos).</span></span> <span data-ttu-id="e2d4b-139">Pokud se rozhodnete implementovat ověřování protokolem Kerberos bez vyjednávání přihlašovacích údajů (říká se jim konečný nebo jedné fáze Kerberos), je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-139">If you implement Kerberos authentication without credential negotiation (sometimes called one-shot or single-leg Kerberos), an exception is thrown.</span></span> <span data-ttu-id="e2d4b-140">Další informace o tom, jak implementovat vyjednávání přihlašovacích údajů najdete v tématu [ladění chyby s ověřováním Windows](../../../../docs/framework/wcf/feature-details/debugging-windows-authentication-errors.md).</span><span class="sxs-lookup"><span data-stu-id="e2d4b-140">For more information about how to implement credential negotiation, see [Debugging Windows Authentication Errors](../../../../docs/framework/wcf/feature-details/debugging-windows-authentication-errors.md).</span></span>  
  
## <a name="cryptography"></a><span data-ttu-id="e2d4b-141">Kryptografie</span><span class="sxs-lookup"><span data-stu-id="e2d4b-141">Cryptography</span></span>  
  
### <a name="sha-256-supported-only-for-symmetric-key-usages"></a><span data-ttu-id="e2d4b-142">SHA-256 se podporuje jenom pro použití symetrického klíče</span><span class="sxs-lookup"><span data-stu-id="e2d4b-142">SHA-256 Supported Only for Symmetric Key Usages</span></span>  
 <span data-ttu-id="e2d4b-143">WCF podporuje širokou škálu šifrování a podpis digest vytváření algoritmy, které můžete zadat pomocí sadu algoritmů v vazeb poskytovaných systémem.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-143">WCF supports a variety of encryption and signature digest creation algorithms that you can specify using the algorithm suite in the system-provided bindings.</span></span> <span data-ttu-id="e2d4b-144">Pro důkladnější zabezpečení WCF podporuje algoritmy zabezpečení hashovací algoritmus (SHA) 2, konkrétně SHA-256, pro vytvoření hodnoty hash podpisu digest.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-144">For improved security, WCF supports Secure Hash Algorithm (SHA) 2 algorithms, specifically SHA-256, for creating signature digest hashes.</span></span> <span data-ttu-id="e2d4b-145">Tato verze podporuje SHA-256 pouze pro použití symetrického klíče, jako jsou klíče protokolu Kerberos, a pokud se certifikát X.509, který nepoužívá k podepisování zpráv.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-145">This release supports SHA-256 only for symmetric key usages, such as Kerberos keys, and where an X.509 certificate is not used to sign the message.</span></span> <span data-ttu-id="e2d4b-146">WCF nepodporuje podpisy RSA (používá se v certifikátech X.509) při použití hodnoty hash SHA-256 kvůli aktuální chybějící podpora pro RSA-SHA256 [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e2d4b-146">WCF does not support RSA signatures (used in X.509 certificates) using SHA-256 hash due to the current lack of support for RSA-SHA256 in the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].</span></span>  
  
### <a name="fips-compliant-sha-256-hashes-not-supported"></a><span data-ttu-id="e2d4b-147">Kompatibilní se standardem FIPS hodnoty hash SHA-256 není podporován</span><span class="sxs-lookup"><span data-stu-id="e2d4b-147">FIPS-Compliant SHA-256 Hashes not Supported</span></span>  
 <span data-ttu-id="e2d4b-148">WCF nepodporuje hodnoty hash SHA-256 kompatibilní se standardem FIPS, takže algoritmus sad, které používají algoritmus SHA-256 nepodporují službou WCF na systémech, kde je nutné používat algoritmy splňující standard FIPS.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-148">WCF does not support SHA-256 FIPS-compliant hashes, so algorithm suites that use SHA-256 are not supported by WCF on systems where use of FIPS compliant algorithms is required.</span></span>  
  
### <a name="fips-compliant-algorithms-may-fail-if-registry-is-edited"></a><span data-ttu-id="e2d4b-149">Při úpravě registru může dojít k selhání algoritmy odpovídající standardu FIPS</span><span class="sxs-lookup"><span data-stu-id="e2d4b-149">FIPS-Compliant Algorithms May Fail if Registry Is Edited</span></span>  
 <span data-ttu-id="e2d4b-150">Můžete povolit nebo zakázat informace o zpracování normy FIPS (Federal) - algoritmy odpovídající s použitím místní zabezpečení nastavení Microsoft Management Console (MMC) snap - v.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-150">You can enable and disable Federal Information Processing Standards (FIPS)-compliant algorithms by using the Local Security Settings Microsoft Management Console (MMC) snap-in.</span></span> <span data-ttu-id="e2d4b-151">Můžete také přístup k nastavení v registru.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-151">You can also access the setting in the registry.</span></span> <span data-ttu-id="e2d4b-152">Upozorňujeme však, že WCF nepodporuje použití obnovte nastavení registru.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-152">Note, however, that WCF does not support using the registry to reset the setting.</span></span> <span data-ttu-id="e2d4b-153">Pokud je hodnota nastavena na jinou hodnotu než 1 nebo 0, nekonzistentní výsledky mohla probíhat CLR a operačního systému.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-153">If the value is set to anything other than 1 or 0, inconsistent results can occur between the CLR and the operating system.</span></span>  
  
### <a name="fips-compliant-aes-encryption-limitation"></a><span data-ttu-id="e2d4b-154">Omezení šifrování AES kompatibilní se standardem FIPS</span><span class="sxs-lookup"><span data-stu-id="e2d4b-154">FIPS-Compliant AES Encryption Limitation</span></span>  
 <span data-ttu-id="e2d4b-155">Šifrování AES kompatibilní s FIPS v duplexní zpětná volání v úrovni zosobnění identifikace nefunguje.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-155">FIPS compliant AES encryption does not work in duplex callbacks under identification level impersonation.</span></span>  
  
### <a name="cngksp-certificates"></a><span data-ttu-id="e2d4b-156">Certifikátů CNG/KSP</span><span class="sxs-lookup"><span data-stu-id="e2d4b-156">CNG/KSP Certificates</span></span>  
 <span data-ttu-id="e2d4b-157">*Cryptography API: Next Generation (CNG)* dlouhodobé nahrazuje rozhraní CryptoAPI.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-157">*Cryptography API: Next Generation (CNG)* is the long-term replacement for the CryptoAPI.</span></span> <span data-ttu-id="e2d4b-158">Toto rozhraní API je k dispozici v nespravovaném kódu na [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[lserver](../../../../includes/lserver-md.md)] a novějších verzích Windows.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-158">This API is available in unmanaged code on [!INCLUDE[wv](../../../../includes/wv-md.md)],  [!INCLUDE[lserver](../../../../includes/lserver-md.md)] and later Windows versions.</span></span>  
  
 <span data-ttu-id="e2d4b-159">Rozhraní .NET framework 4.6.1 a starší verze nepodporují tyto certifikáty, protože používají starší verzi rozhraní CryptoAPI pro zpracování certifikátů CNG/KSP.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-159">.NET Framework 4.6.1 and earlier versions do not support these certificates because they use the legacy CryptoAPI to handle CNG/KSP certificates.</span></span> <span data-ttu-id="e2d4b-160">Použití těchto certifikátů pomocí rozhraní .NET Framework 4.6.1 a dřívějších verzích způsobí výjimku.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-160">The use of these certificates with   .NET Framework 4.6.1 and earlier versions will cause an exception.</span></span>  
  
 <span data-ttu-id="e2d4b-161">Existují dva možné způsoby, jak zjistit, pokud certifikát využívá KSP:</span><span class="sxs-lookup"><span data-stu-id="e2d4b-161">There are two possible ways to tell if a certificate uses KSP:</span></span>  
  
-   <span data-ttu-id="e2d4b-162">Proveďte `p/invoke` z `CertGetCertificateContextProperty`a zkontrolujte `dwProvType` na vrácený `CertGetCertificateContextProperty`.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-162">Do a `p/invoke` of `CertGetCertificateContextProperty`, and inspect `dwProvType` on the returned `CertGetCertificateContextProperty`.</span></span>  
  
-   <span data-ttu-id="e2d4b-163">Použití `certutil` příkazu z příkazového řádku pro dotazování na certifikáty.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-163">Use the  `certutil` command from the command line for querying certificates.</span></span> <span data-ttu-id="e2d4b-164">Další informace najdete v tématu [úkoly programu Certutil pro řešení problémů s certifikáty](https://go.microsoft.com/fwlink/?LinkId=120056).</span><span class="sxs-lookup"><span data-stu-id="e2d4b-164">For more information, see [Certutil tasks for troubleshooting certificates](https://go.microsoft.com/fwlink/?LinkId=120056).</span></span>  
  
## <a name="message-security-fails-if-using-aspnet-impersonation-and-aspnet-compatibility-is-required"></a><span data-ttu-id="e2d4b-165">Zpráva zabezpečení nezdaří, pokud pomocí zosobnění technologie ASP.NET a režim kompatibility ASP.NET je vyžadován</span><span class="sxs-lookup"><span data-stu-id="e2d4b-165">Message Security Fails if Using ASP.NET Impersonation and ASP.NET Compatibility Is Required</span></span>  
 <span data-ttu-id="e2d4b-166">WCF nepodporuje následující kombinaci nastavení, protože nebrání ověření klienta před:</span><span class="sxs-lookup"><span data-stu-id="e2d4b-166">WCF does not support the following combination of settings because they can prevent client authentication from occurring:</span></span>  
  
-   [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]<span data-ttu-id="e2d4b-167"> Je povoleno zosobnění.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-167"> Impersonation is enabled.</span></span> <span data-ttu-id="e2d4b-168">To se provádí v souboru Web.config tak, že nastavíte `impersonate` atribut <`identity`> element `true`.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-168">This is done in the Web.config file by setting the `impersonate` attribute of the <`identity`> element to `true`.</span></span>  
  
-   [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]<span data-ttu-id="e2d4b-169"> režim kompatibility se povoluje nastavením `aspNetCompatibilityEnabled` atribut [ \<serviceHostingEnvironment >](../../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) k `true`.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-169"> compatibility mode is enabled by setting the `aspNetCompatibilityEnabled` attribute of the [\<serviceHostingEnvironment>](../../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) to `true`.</span></span>  
  
-   <span data-ttu-id="e2d4b-170">Režim zabezpečení zprávy se používá.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-170">Message mode security is used.</span></span>  
  
 <span data-ttu-id="e2d4b-171">Vyřešit se vypnout [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] režim kompatibility.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-171">The work-around is to turn off the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] compatibility mode.</span></span> <span data-ttu-id="e2d4b-172">Nebo, pokud [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] se vyžaduje režim kompatibility, zakažte [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] zosobnění běží na procesorech a místo toho použijte zosobnění poskytované WCF.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-172">Or, if the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] compatibility mode is required, disable the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] impersonation feature and use WCF-provided impersonation instead.</span></span> <span data-ttu-id="e2d4b-173">Další informace najdete v tématu [delegace a zosobnění](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="e2d4b-173">For more information, see [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="ipv6-literal-address-failure"></a><span data-ttu-id="e2d4b-174">Selhání literálu adresu IPv6</span><span class="sxs-lookup"><span data-stu-id="e2d4b-174">IPv6 Literal Address Failure</span></span>  
 <span data-ttu-id="e2d4b-175">Požadavky na zabezpečení nezdaří, pokud klient a služba se ve stejném počítači, a literál adresy IPv6 se používají pro službu.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-175">Security requests fail when the client and service are on the same machine, and IPv6 literal addresses are used for the service.</span></span>  
  
 <span data-ttu-id="e2d4b-176">Literál IPv6 adresy práce, pokud klienta a služby jsou na různých strojích.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-176">Literal IPv6 addresses work if the service and client are on different machines.</span></span>  
  
## <a name="wsdl-retrieval-failures-with-federated-trust"></a><span data-ttu-id="e2d4b-177">Selhání načtení WSDL pomocí federovaného vztahu důvěryhodnosti</span><span class="sxs-lookup"><span data-stu-id="e2d4b-177">WSDL Retrieval Failures with Federated Trust</span></span>  
 <span data-ttu-id="e2d4b-178">WCF vyžaduje právě jeden dokument WSDL pro každý uzel v řetězci federovaný vztah důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-178">WCF requires exactly one WSDL document for each node in the federated trust chain.</span></span> <span data-ttu-id="e2d4b-179">Dejte pozor, abyste nastavili smyčku při určení koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-179">Be careful not to set up a loop when specifying endpoints.</span></span> <span data-ttu-id="e2d4b-180">Jedním ze způsobů, ve kterém mohou vyplývat smyčky je stažení WSDL řetězců federovaný vztah důvěryhodnosti pomocí dvou nebo více odkazů v jednom dokumentu WSDL.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-180">One way in which loops can arise is using a WSDL download of federated trust chains with two or more links in the same WSDL document.</span></span> <span data-ttu-id="e2d4b-181">Běžný scénář, které mohou způsobit potíže je federované služby, kde jsou obsaženy Server Token zabezpečení a službě uvnitř stejného hostitele ServiceHost.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-181">A common scenario that can produce this problem is a federated service where the Security Token Server and the service are contained inside the same ServiceHost.</span></span>  
  
 <span data-ttu-id="e2d4b-182">Příklad této situace je služba s následující tři adresy koncových bodů:</span><span class="sxs-lookup"><span data-stu-id="e2d4b-182">An example of this situation is a service with the following three endpoint addresses:</span></span>  
  
-   <span data-ttu-id="e2d4b-183">http://localhost/CalculatorService/service (služba)</span><span class="sxs-lookup"><span data-stu-id="e2d4b-183">http://localhost/CalculatorService/service (the service)</span></span>  
  
-   <span data-ttu-id="e2d4b-184">http://localhost/CalculatorService/issue_ticket (STS)</span><span class="sxs-lookup"><span data-stu-id="e2d4b-184">http://localhost/CalculatorService/issue_ticket (the STS)</span></span>  
  
-   <span data-ttu-id="e2d4b-185">http://localhost/CalculatorService/mex (koncový bod metadat)</span><span class="sxs-lookup"><span data-stu-id="e2d4b-185">http://localhost/CalculatorService/mex (the metadata endpoint)</span></span>  
  
 <span data-ttu-id="e2d4b-186">Tím dojde k výjimce.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-186">This throws an exception.</span></span>  
  
 <span data-ttu-id="e2d4b-187">Provedete tento scénář fungovat tak, že vložíte `issue_ticket` koncový bod jinde.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-187">You can make this scenario work by putting the `issue_ticket` endpoint elsewhere.</span></span>  
  
## <a name="wsdl-import-attributes-can-be-lost"></a><span data-ttu-id="e2d4b-188">Atributy pro Import WSDL může být ztraceno</span><span class="sxs-lookup"><span data-stu-id="e2d4b-188">WSDL Import Attributes can be Lost</span></span>  
 <span data-ttu-id="e2d4b-189">WCF ztratí sledování atributů na `<wst:Claims>` prvek `RST` šablony při importu WSDL.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-189">WCF loses track of the attributes on a `<wst:Claims>` element in an `RST` template when doing a WSDL import.</span></span> <span data-ttu-id="e2d4b-190">To se stane při importu WSDL, když zadáte `<Claims>` přímo v `WSFederationHttpBinding.Security.Message.TokenRequestParameters` nebo `IssuedSecurityTokenRequestParameters.AdditionalRequestParameters` přímo namísto kolekce typů deklarací identity.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-190">This happens during a WSDL import if you specify `<Claims>` directly in `WSFederationHttpBinding.Security.Message.TokenRequestParameters` or `IssuedSecurityTokenRequestParameters.AdditionalRequestParameters` instead of using the claim type collections directly.</span></span>  <span data-ttu-id="e2d4b-191">Protože importu ztratí atributy, vazba není odezvy správně prostřednictvím WSDL a je nesprávné na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-191">Since the import loses the attributes, the binding does not round trip properly through WSDL and hence is incorrect on the client side.</span></span>  
  
 <span data-ttu-id="e2d4b-192">Oprava je upravte vazbu přímo v klientovi po provedení importu.</span><span class="sxs-lookup"><span data-stu-id="e2d4b-192">The fix is to modify the binding directly on the client after doing the import.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e2d4b-193">Viz také</span><span class="sxs-lookup"><span data-stu-id="e2d4b-193">See Also</span></span>  
 [<span data-ttu-id="e2d4b-194">Důležité informace o zabezpečení</span><span class="sxs-lookup"><span data-stu-id="e2d4b-194">Security Considerations</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)  
 [<span data-ttu-id="e2d4b-195">Zpřístupnění informací</span><span class="sxs-lookup"><span data-stu-id="e2d4b-195">Information Disclosure</span></span>](../../../../docs/framework/wcf/feature-details/information-disclosure.md)  
 [<span data-ttu-id="e2d4b-196">Zvýšení oprávnění</span><span class="sxs-lookup"><span data-stu-id="e2d4b-196">Elevation of Privilege</span></span>](../../../../docs/framework/wcf/feature-details/elevation-of-privilege.md)  
 [<span data-ttu-id="e2d4b-197">Útok DoS</span><span class="sxs-lookup"><span data-stu-id="e2d4b-197">Denial of Service</span></span>](../../../../docs/framework/wcf/feature-details/denial-of-service.md)  
 [<span data-ttu-id="e2d4b-198">Falšování</span><span class="sxs-lookup"><span data-stu-id="e2d4b-198">Tampering</span></span>](../../../../docs/framework/wcf/feature-details/tampering.md)  
 [<span data-ttu-id="e2d4b-199">Útoky opakováním</span><span class="sxs-lookup"><span data-stu-id="e2d4b-199">Replay Attacks</span></span>](../../../../docs/framework/wcf/feature-details/replay-attacks.md)
