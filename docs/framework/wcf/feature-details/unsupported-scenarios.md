---
title: Nepodporované scénáře
ms.date: 03/30/2017
ms.assetid: 72027d0f-146d-40c5-9d72-e94392c8bb40
ms.openlocfilehash: b643e6df8a877860ce36fc6ee34c4e4ca08ec748
ms.sourcegitcommit: cdf5084648bf5e77970cbfeaa23f1cab3e6e234e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 02/01/2020
ms.locfileid: "76921162"
---
# <a name="unsupported-scenarios"></a><span data-ttu-id="1d50a-102">Nepodporované scénáře</span><span class="sxs-lookup"><span data-stu-id="1d50a-102">Unsupported scenarios</span></span>

<span data-ttu-id="1d50a-103">Z různých důvodů nepodporuje Windows Communication Foundation (WCF) některé konkrétní scénáře zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="1d50a-103">For various reasons, Windows Communication Foundation (WCF) does not support some specific security scenarios.</span></span> <span data-ttu-id="1d50a-104">Například Windows XP Home Edition neimplementuje ověřovací protokoly SSPI nebo Kerberos, a proto WCF nepodporuje spouštění služby s ověřováním systému Windows na této platformě.</span><span class="sxs-lookup"><span data-stu-id="1d50a-104">For example, Windows XP Home Edition does not implement the SSPI or Kerberos authentication protocols, and therefore WCF does not support running a service with Windows authentication on that platform.</span></span> <span data-ttu-id="1d50a-105">Další mechanismy ověřování, jako je uživatelské jméno/heslo a integrované ověřování HTTP/HTTPS, se podporují při použití WCF v systému Windows XP Home Edition.</span><span class="sxs-lookup"><span data-stu-id="1d50a-105">Other authentication mechanisms, such as username/password and HTTP/HTTPS integrated authentication are supported when running WCF under Windows XP Home Edition.</span></span>

## <a name="impersonation-scenarios"></a><span data-ttu-id="1d50a-106">Scénáře zosobnění</span><span class="sxs-lookup"><span data-stu-id="1d50a-106">Impersonation scenarios</span></span>

### <a name="impersonated-identity-might-not-flow-when-clients-make-asynchronous-calls"></a><span data-ttu-id="1d50a-107">Zosobněná identita možná není při provádění asynchronních volání vydávána klientem.</span><span class="sxs-lookup"><span data-stu-id="1d50a-107">Impersonated identity might not flow when clients make asynchronous calls</span></span>
 <span data-ttu-id="1d50a-108">Když klient služby WCF provede asynchronní volání služby WCF pomocí ověřování systému Windows v zosobnění, může dojít k ověřování pomocí identity klientského procesu namísto zosobněné identity.</span><span class="sxs-lookup"><span data-stu-id="1d50a-108">When a WCF client makes asynchronous calls to a WCF service using Windows authentication under impersonation, authentication might occur with the identity of the client process instead of the impersonated identity.</span></span>

### <a name="windows-xp-and-secure-context-token-cookie-enabled"></a><span data-ttu-id="1d50a-109">Systém Windows XP a soubor cookie zabezpečeného tokenu kontextu povoleny</span><span class="sxs-lookup"><span data-stu-id="1d50a-109">Windows XP and secure context token cookie enabled</span></span>

<span data-ttu-id="1d50a-110">WCF nepodporuje zosobnění a <xref:System.InvalidOperationException> je vyvolána, pokud existují následující podmínky:</span><span class="sxs-lookup"><span data-stu-id="1d50a-110">WCF does not support impersonation and an <xref:System.InvalidOperationException> is thrown when the following conditions exist:</span></span>

- <span data-ttu-id="1d50a-111">Operační systém je Windows XP.</span><span class="sxs-lookup"><span data-stu-id="1d50a-111">The operating system is Windows XP.</span></span>

- <span data-ttu-id="1d50a-112">Režim ověřování má za následek identitu Windows.</span><span class="sxs-lookup"><span data-stu-id="1d50a-112">The authentication mode results in a Windows identity.</span></span>

- <span data-ttu-id="1d50a-113">Vlastnost <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> <xref:System.ServiceModel.OperationBehaviorAttribute> je nastavena na hodnotu <xref:System.ServiceModel.ImpersonationOption.Required>.</span><span class="sxs-lookup"><span data-stu-id="1d50a-113">The <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> property of the <xref:System.ServiceModel.OperationBehaviorAttribute> is set to <xref:System.ServiceModel.ImpersonationOption.Required>.</span></span>

- <span data-ttu-id="1d50a-114">Vytvoří se token kontextu zabezpečení založený na stavu (SCT) (ve výchozím nastavení je vytváření zakázané).</span><span class="sxs-lookup"><span data-stu-id="1d50a-114">A state-based security context token (SCT) is created (by default, creation is disabled).</span></span>

 <span data-ttu-id="1d50a-115">SCT založenou na stavu lze vytvořit pouze pomocí vlastní vazby.</span><span class="sxs-lookup"><span data-stu-id="1d50a-115">The state-based SCT can only be created using a custom binding.</span></span> <span data-ttu-id="1d50a-116">Další informace najdete v tématu [Postup: vytvoření tokenu kontextu zabezpečení pro zabezpečenou relaci](how-to-create-a-security-context-token-for-a-secure-session.md).) V kódu je token povolen vytvořením elementu vazby zabezpečení (buď <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> nebo <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>) pomocí <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%28System.Boolean%29?displayProperty=nameWithType> nebo <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%28System.ServiceModel.Channels.SecurityBindingElement%2CSystem.Boolean%29?displayProperty=nameWithType> metody a nastavením parametru `requireCancellation` na `false`.</span><span class="sxs-lookup"><span data-stu-id="1d50a-116">For more information, see [How to: Create a Security Context Token for a Secure Session](how-to-create-a-security-context-token-for-a-secure-session.md).) In code, the token is enabled by creating a security binding element (either <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> or <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>) using the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%28System.Boolean%29?displayProperty=nameWithType> or the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%28System.ServiceModel.Channels.SecurityBindingElement%2CSystem.Boolean%29?displayProperty=nameWithType> method and setting the `requireCancellation` parameter to `false`.</span></span> <span data-ttu-id="1d50a-117">Parametr odkazuje na ukládání do mezipaměti pro SCT.</span><span class="sxs-lookup"><span data-stu-id="1d50a-117">The parameter refers to the caching of the SCT.</span></span> <span data-ttu-id="1d50a-118">Nastavením hodnoty na `false` povolíte funkci SCT založenou na stavu.</span><span class="sxs-lookup"><span data-stu-id="1d50a-118">Setting the value to `false` enables the state-based SCT feature.</span></span>

 <span data-ttu-id="1d50a-119">Alternativně je v konfiguraci povolen token vytvořením <`customBinding`> a poté přidáním <`security`> elementu a nastavením atributu `authenticationMode` na hodnotu SecureConversation a `requireSecurityContextCancellation` atribut `true`.</span><span class="sxs-lookup"><span data-stu-id="1d50a-119">Alternatively, in configuration, the token is enabled by creating a <`customBinding`>, then adding a <`security`> element, and setting the `authenticationMode` attribute to SecureConversation and the `requireSecurityContextCancellation` attribute to `true`.</span></span>

> [!NOTE]
> <span data-ttu-id="1d50a-120">Předchozí požadavky jsou specifické.</span><span class="sxs-lookup"><span data-stu-id="1d50a-120">The preceding requirements are specific.</span></span> <span data-ttu-id="1d50a-121">Například <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> vytvoří prvek vazby, který má za následek identitu Windows, ale nevytvoří SCT.</span><span class="sxs-lookup"><span data-stu-id="1d50a-121">For example, the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> creates a binding element that results in a Windows identity, but does not establish an SCT.</span></span> <span data-ttu-id="1d50a-122">Proto ji můžete použít s možností `Required` v systému Windows XP.</span><span class="sxs-lookup"><span data-stu-id="1d50a-122">Therefore, you can use it with the `Required` option on Windows XP.</span></span>

### <a name="possible-aspnet-conflict"></a><span data-ttu-id="1d50a-123">Možný konflikt ASP.NET</span><span class="sxs-lookup"><span data-stu-id="1d50a-123">Possible ASP.NET conflict</span></span>

<span data-ttu-id="1d50a-124">WCF a ASP.NET můžou povolit nebo zakázat zosobnění.</span><span class="sxs-lookup"><span data-stu-id="1d50a-124">WCF and ASP.NET can both enable or disable impersonation.</span></span> <span data-ttu-id="1d50a-125">Když je ASP.NET hostitelem aplikace WCF, může mezi konfiguračními nastaveními WCF a ASP.NET existovat konflikt.</span><span class="sxs-lookup"><span data-stu-id="1d50a-125">When ASP.NET hosts a WCF application, a conflict may exist between the WCF and ASP.NET configuration settings.</span></span> <span data-ttu-id="1d50a-126">V případě konfliktu má nastavení WCF přednost, pokud vlastnost <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> nastavena na hodnotu <xref:System.ServiceModel.ImpersonationOption.NotAllowed>. v takovém případě má přednost nastavení ASP.NET zosobnění.</span><span class="sxs-lookup"><span data-stu-id="1d50a-126">In case of conflict, the WCF setting takes precedence, unless the <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> property is set to <xref:System.ServiceModel.ImpersonationOption.NotAllowed>, in which case the ASP.NET impersonation setting takes precedence.</span></span>

### <a name="assembly-loads-may-fail-under-impersonation"></a><span data-ttu-id="1d50a-127">Načtení sestavení může v zosobnění selhat.</span><span class="sxs-lookup"><span data-stu-id="1d50a-127">Assembly loads may fail under impersonation</span></span>

<span data-ttu-id="1d50a-128">Pokud zosobněný kontext nemá přístupová práva k načtení sestavení a je-li prvním modulem CLR (Common Language Runtime), který se pokouší načíst sestavení pro tuto doménu AppDomain, <xref:System.AppDomain> ukládá chybu do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="1d50a-128">If the impersonated context does not have access rights to load an assembly and if it is the first time the common language runtime (CLR) is attempting to load the assembly for that AppDomain, the <xref:System.AppDomain> caches the failure.</span></span> <span data-ttu-id="1d50a-129">Následné pokusy o načtení tohoto sestavení (nebo sestavení) selžou, dokonce i po vrácení zosobnění a i v případě, že má kontext vrácená přístupová práva k načtení sestavení.</span><span class="sxs-lookup"><span data-stu-id="1d50a-129">Subsequent attempts to load that assembly (or assemblies) fail, even after reverting the impersonation, and even if the reverted context has access rights to load the assembly.</span></span> <span data-ttu-id="1d50a-130">Důvodem je to, že modul CLR se znovu nepokusí o načtení po změně kontextu uživatele.</span><span class="sxs-lookup"><span data-stu-id="1d50a-130">This is because the CLR does not reattempt the load after the user context is changed.</span></span> <span data-ttu-id="1d50a-131">Je nutné restartovat doménu aplikace pro zotavení po selhání.</span><span class="sxs-lookup"><span data-stu-id="1d50a-131">You must restart the application domain to recover from the failure.</span></span>

> [!NOTE]
> <span data-ttu-id="1d50a-132">Výchozí hodnota vlastnosti <xref:System.ServiceModel.Security.WindowsClientCredential.AllowedImpersonationLevel%2A> třídy <xref:System.ServiceModel.Security.WindowsClientCredential> je <xref:System.Security.Principal.TokenImpersonationLevel.Identification>.</span><span class="sxs-lookup"><span data-stu-id="1d50a-132">The default value for the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowedImpersonationLevel%2A> property of the <xref:System.ServiceModel.Security.WindowsClientCredential> class is <xref:System.Security.Principal.TokenImpersonationLevel.Identification>.</span></span> <span data-ttu-id="1d50a-133">Ve většině případů kontext zosobnění na úrovni identifikace nemá žádná práva k načtení dalších sestavení.</span><span class="sxs-lookup"><span data-stu-id="1d50a-133">In most cases, an identification-level impersonation context has no rights to load any additional assemblies.</span></span> <span data-ttu-id="1d50a-134">Toto je výchozí hodnota, takže se jedná o velmi běžnou podmínku, kterou je třeba znát.</span><span class="sxs-lookup"><span data-stu-id="1d50a-134">This is the default value, so this is a very common condition to be aware of.</span></span> <span data-ttu-id="1d50a-135">K zosobnění na úrovni identifikace dojde také v případě, že proces zosobnění nemá oprávnění `SeImpersonate`.</span><span class="sxs-lookup"><span data-stu-id="1d50a-135">Identification-level impersonation also occurs when the impersonating process does not have the `SeImpersonate` privilege.</span></span> <span data-ttu-id="1d50a-136">Další informace najdete v tématu [delegování a zosobnění](delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="1d50a-136">For more information, see [Delegation and Impersonation](delegation-and-impersonation-with-wcf.md).</span></span>

### <a name="delegation-requires-credential-negotiation"></a><span data-ttu-id="1d50a-137">Delegování vyžaduje vyjednávání přihlašovacích údajů</span><span class="sxs-lookup"><span data-stu-id="1d50a-137">Delegation requires credential negotiation</span></span>

<span data-ttu-id="1d50a-138">Chcete-li použít ověřovací protokol Kerberos s delegováním, je nutné implementovat protokol Kerberos s vyjednáváním přihlašovacích údajů (někdy označovaným jako multi-nohy nebo multi-step Kerberos).</span><span class="sxs-lookup"><span data-stu-id="1d50a-138">To use the Kerberos authentication protocol with delegation, you must implement the Kerberos protocol with credential negotiation (sometimes called multi-leg or multi-step Kerberos).</span></span> <span data-ttu-id="1d50a-139">Pokud implementujete ověřování protokolu Kerberos bez vyjednávání přihlašovacích údajů (někdy nazývaného jednorázové rozhraní Kerberos), vyvolá se výjimka.</span><span class="sxs-lookup"><span data-stu-id="1d50a-139">If you implement Kerberos authentication without credential negotiation (sometimes called one-shot or single-leg Kerberos), an exception is thrown.</span></span> <span data-ttu-id="1d50a-140">Další informace o tom, jak implementovat vyjednávání pověření, najdete v tématu [ladění chyb ověřování systému Windows](debugging-windows-authentication-errors.md).</span><span class="sxs-lookup"><span data-stu-id="1d50a-140">For more information about how to implement credential negotiation, see [Debugging Windows Authentication Errors](debugging-windows-authentication-errors.md).</span></span>

## <a name="cryptography"></a><span data-ttu-id="1d50a-141">Kryptografie</span><span class="sxs-lookup"><span data-stu-id="1d50a-141">Cryptography</span></span>

### <a name="sha-256-supported-only-for-symmetric-key-usages"></a><span data-ttu-id="1d50a-142">SHA-256 se podporuje jenom pro použití symetrického klíče.</span><span class="sxs-lookup"><span data-stu-id="1d50a-142">SHA-256 supported only for symmetric key usages</span></span>

<span data-ttu-id="1d50a-143">WCF podporuje nejrůznější algoritmy pro vytváření algoritmů šifrování a otisků podpisů, které můžete zadat pomocí sady algoritmů v rámci vazeb poskytovaných systémem.</span><span class="sxs-lookup"><span data-stu-id="1d50a-143">WCF supports a variety of encryption and signature digest creation algorithms that you can specify using the algorithm suite in the system-provided bindings.</span></span> <span data-ttu-id="1d50a-144">Pro lepší zabezpečení podporuje WCF algoritmy SHA (Secure Hash Algorithm) 2, konkrétně SHA-256, pro vytváření hodnot hash MD5 signatur.</span><span class="sxs-lookup"><span data-stu-id="1d50a-144">For improved security, WCF supports Secure Hash Algorithm (SHA) 2 algorithms, specifically SHA-256, for creating signature digest hashes.</span></span> <span data-ttu-id="1d50a-145">Tato verze podporuje SHA-256 jenom pro použití symetrického klíče, jako jsou klíče Kerberos, a kde se k podpisu zprávy nepoužívá certifikát X. 509.</span><span class="sxs-lookup"><span data-stu-id="1d50a-145">This release supports SHA-256 only for symmetric key usages, such as Kerberos keys, and where an X.509 certificate is not used to sign the message.</span></span> <span data-ttu-id="1d50a-146">WCF nepodporuje signatury RSA (používané v certifikátech X. 509) pomocí algoritmu SHA-256 hash kvůli současnému nedostatku podpory RSA-SHA256 v WinFX.</span><span class="sxs-lookup"><span data-stu-id="1d50a-146">WCF does not support RSA signatures (used in X.509 certificates) using SHA-256 hash due to the current lack of support for RSA-SHA256 in the WinFX.</span></span>

### <a name="fips-compliant-sha-256-hashes-not-supported"></a><span data-ttu-id="1d50a-147">Hodnoty hash SHA-256 kompatibilní se standardem FIPS nejsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="1d50a-147">FIPS-compliant SHA-256 hashes not supported</span></span>

<span data-ttu-id="1d50a-148">Služba WCF nepodporuje hodnoty hash kompatibilní se standardem FIPS-256, takže sady algoritmů, které používají algoritmus SHA-256, nejsou podporovány službou WCF v systémech, kde je vyžadováno použití algoritmů kompatibilních se standardem FIPS.</span><span class="sxs-lookup"><span data-stu-id="1d50a-148">WCF does not support SHA-256 FIPS-compliant hashes, so algorithm suites that use SHA-256 are not supported by WCF on systems where use of FIPS-compliant algorithms is required.</span></span>

### <a name="fips-compliant-algorithms-may-fail-if-registry-is-edited"></a><span data-ttu-id="1d50a-149">Pokud upravíte registr, může dojít k selhání algoritmů kompatibilních se standardem FIPS.</span><span class="sxs-lookup"><span data-stu-id="1d50a-149">FIPS-compliant algorithms may fail if registry is edited</span></span>

<span data-ttu-id="1d50a-150">Algoritmy kompatibilní se standardem FIPS (Federal Information Processing Standards) můžete povolit a zakázat pomocí modulu snap-in Místní nastavení zabezpečení konzoly Microsoft Management Console (MMC).</span><span class="sxs-lookup"><span data-stu-id="1d50a-150">You can enable and disable Federal Information Processing Standards (FIPS)-compliant algorithms by using the Local Security Settings Microsoft Management Console (MMC) snap-in.</span></span> <span data-ttu-id="1d50a-151">Můžete také použít nastavení v registru.</span><span class="sxs-lookup"><span data-stu-id="1d50a-151">You can also access the setting in the registry.</span></span> <span data-ttu-id="1d50a-152">Všimněte si ale, že WCF nepodporuje použití registru k resetování nastavení.</span><span class="sxs-lookup"><span data-stu-id="1d50a-152">Note, however, that WCF does not support using the registry to reset the setting.</span></span> <span data-ttu-id="1d50a-153">Pokud je hodnota nastavena na jinou hodnotu než 1 nebo 0, může dojít k nekonzistentním výsledkům mezi CLR a operačním systémem.</span><span class="sxs-lookup"><span data-stu-id="1d50a-153">If the value is set to anything other than 1 or 0, inconsistent results can occur between the CLR and the operating system.</span></span>

### <a name="fips-compliant-aes-encryption-limitation"></a><span data-ttu-id="1d50a-154">Omezení šifrování AES kompatibilní se standardem FIPS</span><span class="sxs-lookup"><span data-stu-id="1d50a-154">FIPS-compliant AES encryption limitation</span></span>

<span data-ttu-id="1d50a-155">Šifrování AES kompatibilní se standardem FIPS nefunguje v duplexních zpětných voláních v rámci zosobnění na úrovni identifikace.</span><span class="sxs-lookup"><span data-stu-id="1d50a-155">FIPS-compliant AES encryption does not work in duplex callbacks under identification level impersonation.</span></span>

### <a name="cngksp-certificates"></a><span data-ttu-id="1d50a-156">CNG/KSP – certifikáty</span><span class="sxs-lookup"><span data-stu-id="1d50a-156">CNG/KSP certificates</span></span>

<span data-ttu-id="1d50a-157">*Kryptografické rozhraní API: nové generace (CNG)* je dlouhodobá náhrada za rozhraní CryptoAPI.</span><span class="sxs-lookup"><span data-stu-id="1d50a-157">*Cryptography API: Next Generation (CNG)* is the long-term replacement for the CryptoAPI.</span></span> <span data-ttu-id="1d50a-158">Toto rozhraní API je k dispozici v nespravovaném kódu v systémech Windows Vista, Windows Server 2008 a novějších verzích Windows.</span><span class="sxs-lookup"><span data-stu-id="1d50a-158">This API is available in unmanaged code on Windows Vista, Windows Server 2008, and later Windows versions.</span></span>

 <span data-ttu-id="1d50a-159">.NET Framework 4.6.1 a starší verze tyto certifikáty nepodporují, protože využívají starší rozhraní CryptoAPI ke zpracování certifikátů CNG/KSP.</span><span class="sxs-lookup"><span data-stu-id="1d50a-159">.NET Framework 4.6.1 and earlier versions do not support these certificates because they use the legacy CryptoAPI to handle CNG/KSP certificates.</span></span> <span data-ttu-id="1d50a-160">Použití těchto certifikátů s .NET Framework 4.6.1 a staršími verzemi způsobí výjimku.</span><span class="sxs-lookup"><span data-stu-id="1d50a-160">The use of these certificates with   .NET Framework 4.6.1 and earlier versions will cause an exception.</span></span>

 <span data-ttu-id="1d50a-161">Existují dva možné způsoby, jak zjistit, jestli certifikát používá KSP:</span><span class="sxs-lookup"><span data-stu-id="1d50a-161">There are two possible ways to tell if a certificate uses KSP:</span></span>

- <span data-ttu-id="1d50a-162">Proveďte `p/invoke` `CertGetCertificateContextProperty`a zkontrolujte `dwProvType` na vráceném `CertGetCertificateContextProperty`.</span><span class="sxs-lookup"><span data-stu-id="1d50a-162">Do a `p/invoke` of `CertGetCertificateContextProperty`, and inspect `dwProvType` on the returned `CertGetCertificateContextProperty`.</span></span>

- <span data-ttu-id="1d50a-163">Použijte příkaz `certutil` z příkazového řádku pro dotazování certifikátů.</span><span class="sxs-lookup"><span data-stu-id="1d50a-163">Use the  `certutil` command from the command line for querying certificates.</span></span> <span data-ttu-id="1d50a-164">Další informace najdete v tématu [úlohy certutil při řešení potíží s certifikáty](https://docs.microsoft.com/previous-versions/orphan-topics/ws.10/cc772619(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="1d50a-164">For more information, see [Certutil tasks for troubleshooting certificates](https://docs.microsoft.com/previous-versions/orphan-topics/ws.10/cc772619(v=ws.10)).</span></span>

## <a name="message-security-fails-if-using-aspnet-impersonation-and-aspnet-compatibility-is-required"></a><span data-ttu-id="1d50a-165">Pokud se vyžaduje použití zosobnění ASP.NET a je vyžadována kompatibilita ASP.NET, zabezpečení zprávy se nezdařila.</span><span class="sxs-lookup"><span data-stu-id="1d50a-165">Message security fails if using ASP.NET impersonation and ASP.NET compatibility is required</span></span>

<span data-ttu-id="1d50a-166">Služba WCF nepodporuje následující kombinaci nastavení, protože může zabránit tomu, aby se ověřování klienta objevilo:</span><span class="sxs-lookup"><span data-stu-id="1d50a-166">WCF does not support the following combination of settings because they can prevent client authentication from occurring:</span></span>

- <span data-ttu-id="1d50a-167">Zosobnění ASP.NET je povoleno.</span><span class="sxs-lookup"><span data-stu-id="1d50a-167">ASP.NET Impersonation is enabled.</span></span> <span data-ttu-id="1d50a-168">To se provádí v souboru Web. config nastavením atributu `impersonate` <`identity`elementu > na `true`.</span><span class="sxs-lookup"><span data-stu-id="1d50a-168">This is done in the Web.config file by setting the `impersonate` attribute of the <`identity`> element to `true`.</span></span>

- <span data-ttu-id="1d50a-169">Režim kompatibility ASP.NET je povolen nastavením atributu `aspNetCompatibilityEnabled` [\<serviceHostingEnvironment >](../../configure-apps/file-schema/wcf/servicehostingenvironment.md) na `true`.</span><span class="sxs-lookup"><span data-stu-id="1d50a-169">ASP.NET compatibility mode is enabled by setting the `aspNetCompatibilityEnabled` attribute of the [\<serviceHostingEnvironment>](../../configure-apps/file-schema/wcf/servicehostingenvironment.md) to `true`.</span></span>

- <span data-ttu-id="1d50a-170">Používá se zabezpečení režimu zpráv.</span><span class="sxs-lookup"><span data-stu-id="1d50a-170">Message mode security is used.</span></span>

<span data-ttu-id="1d50a-171">Rozhlasem je vypnutí režimu kompatibility ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1d50a-171">The work-around is to turn off the ASP.NET compatibility mode.</span></span> <span data-ttu-id="1d50a-172">Nebo, pokud je vyžadován režim kompatibility ASP.NET, zakažte funkci zosobnění ASP.NET a místo ní použijte zosobnění poskytované WCF.</span><span class="sxs-lookup"><span data-stu-id="1d50a-172">Or, if the ASP.NET compatibility mode is required, disable the ASP.NET impersonation feature and use WCF-provided impersonation instead.</span></span> <span data-ttu-id="1d50a-173">Další informace najdete v tématu [delegování a zosobnění](delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="1d50a-173">For more information, see [Delegation and Impersonation](delegation-and-impersonation-with-wcf.md).</span></span>

## <a name="ipv6-literal-address-failure"></a><span data-ttu-id="1d50a-174">Chyba adresy literálu IPv6</span><span class="sxs-lookup"><span data-stu-id="1d50a-174">IPv6 literal address failure</span></span>

<span data-ttu-id="1d50a-175">Požadavky na zabezpečení selžou, pokud se klient a služba nacházejí ve stejném počítači a pro službu se používají adresy literálu IPv6.</span><span class="sxs-lookup"><span data-stu-id="1d50a-175">Security requests fail when the client and service are on the same machine, and IPv6 literal addresses are used for the service.</span></span>

 <span data-ttu-id="1d50a-176">Pokud je služba a klient v různých počítačích, je adresa IPv6 literálů funkční.</span><span class="sxs-lookup"><span data-stu-id="1d50a-176">Literal IPv6 addresses work if the service and client are on different machines.</span></span>

## <a name="wsdl-retrieval-failures-with-federated-trust"></a><span data-ttu-id="1d50a-177">Selhání načítání WSDL s federovaným vztahem důvěryhodnosti</span><span class="sxs-lookup"><span data-stu-id="1d50a-177">WSDL retrieval failures with federated trust</span></span>

<span data-ttu-id="1d50a-178">WCF vyžaduje přesně jeden dokument WSDL pro každý uzel ve federovaném řetězu důvěryhodných certifikátů.</span><span class="sxs-lookup"><span data-stu-id="1d50a-178">WCF requires exactly one WSDL document for each node in the federated trust chain.</span></span> <span data-ttu-id="1d50a-179">Při zadávání koncových bodů buďte opatrní, abyste nevytvořili smyčku.</span><span class="sxs-lookup"><span data-stu-id="1d50a-179">Be careful not to set up a loop when specifying endpoints.</span></span> <span data-ttu-id="1d50a-180">Jedním ze způsobů, jak mohou nastat smyčky, je použití stažení WSDL řetězců federovaného vztahu důvěryhodnosti se dvěma nebo více odkazy ve stejném dokumentu WSDL.</span><span class="sxs-lookup"><span data-stu-id="1d50a-180">One way in which loops can arise is using a WSDL download of federated trust chains with two or more links in the same WSDL document.</span></span> <span data-ttu-id="1d50a-181">Běžným scénářem, který může způsobovat tento problém, je federované služba, ve které se server tokenu zabezpečení a služba nachází uvnitř stejné třídy ServiceHost.</span><span class="sxs-lookup"><span data-stu-id="1d50a-181">A common scenario that can produce this problem is a federated service where the Security Token Server and the service are contained inside the same ServiceHost.</span></span>

 <span data-ttu-id="1d50a-182">Příkladem této situace je služba s následujícími třemi adresami koncových bodů:</span><span class="sxs-lookup"><span data-stu-id="1d50a-182">An example of this situation is a service with the following three endpoint addresses:</span></span>

- <span data-ttu-id="1d50a-183">`http://localhost/CalculatorService/service` (služba)</span><span class="sxs-lookup"><span data-stu-id="1d50a-183">`http://localhost/CalculatorService/service` (the service)</span></span>

- <span data-ttu-id="1d50a-184">`http://localhost/CalculatorService/issue_ticket` (STS)</span><span class="sxs-lookup"><span data-stu-id="1d50a-184">`http://localhost/CalculatorService/issue_ticket` (the STS)</span></span>

- <span data-ttu-id="1d50a-185">`http://localhost/CalculatorService/mex` (koncový bod metadat)</span><span class="sxs-lookup"><span data-stu-id="1d50a-185">`http://localhost/CalculatorService/mex` (the metadata endpoint)</span></span>

 <span data-ttu-id="1d50a-186">Vyvolá výjimku.</span><span class="sxs-lookup"><span data-stu-id="1d50a-186">This throws an exception.</span></span>

 <span data-ttu-id="1d50a-187">Tuto situaci můžete udělat tak, že umístíte koncový bod `issue_ticket` jinam.</span><span class="sxs-lookup"><span data-stu-id="1d50a-187">You can make this scenario work by putting the `issue_ticket` endpoint elsewhere.</span></span>

## <a name="wsdl-import-attributes-can-be-lost"></a><span data-ttu-id="1d50a-188">Atributy importu WSDL se můžou ztratit.</span><span class="sxs-lookup"><span data-stu-id="1d50a-188">WSDL import attributes can be lost</span></span>

<span data-ttu-id="1d50a-189">Technologie WCF ztratí při importu WSDL sledování atributů prvku `<wst:Claims>` v šabloně `RST`.</span><span class="sxs-lookup"><span data-stu-id="1d50a-189">WCF loses track of the attributes on a `<wst:Claims>` element in an `RST` template when doing a WSDL import.</span></span> <span data-ttu-id="1d50a-190">K tomu dojde během importu WSDL, pokud zadáte `<Claims>` přímo v `WSFederationHttpBinding.Security.Message.TokenRequestParameters` nebo `IssuedSecurityTokenRequestParameters.AdditionalRequestParameters` namísto použití kolekcí typu deklarace přímo.</span><span class="sxs-lookup"><span data-stu-id="1d50a-190">This happens during a WSDL import if you specify `<Claims>` directly in `WSFederationHttpBinding.Security.Message.TokenRequestParameters` or `IssuedSecurityTokenRequestParameters.AdditionalRequestParameters` instead of using the claim type collections directly.</span></span>  <span data-ttu-id="1d50a-191">Vzhledem k tomu, že import ztratí atributy, vazba nezaokrouhlí cestu správně prostřednictvím WSDL, a proto není na straně klienta správná.</span><span class="sxs-lookup"><span data-stu-id="1d50a-191">Since the import loses the attributes, the binding does not round trip properly through WSDL and hence is incorrect on the client side.</span></span>

 <span data-ttu-id="1d50a-192">Opravou je změna vazby přímo na klientovi po provedení importu.</span><span class="sxs-lookup"><span data-stu-id="1d50a-192">The fix is to modify the binding directly on the client after doing the import.</span></span>

## <a name="see-also"></a><span data-ttu-id="1d50a-193">Viz také:</span><span class="sxs-lookup"><span data-stu-id="1d50a-193">See also</span></span>

- [<span data-ttu-id="1d50a-194">Důležité informace o zabezpečení</span><span class="sxs-lookup"><span data-stu-id="1d50a-194">Security Considerations</span></span>](security-considerations-in-wcf.md)
- [<span data-ttu-id="1d50a-195">Zpřístupnění informací</span><span class="sxs-lookup"><span data-stu-id="1d50a-195">Information Disclosure</span></span>](information-disclosure.md)
- [<span data-ttu-id="1d50a-196">Zvýšení oprávnění</span><span class="sxs-lookup"><span data-stu-id="1d50a-196">Elevation of Privilege</span></span>](elevation-of-privilege.md)
- [<span data-ttu-id="1d50a-197">Útok DoS</span><span class="sxs-lookup"><span data-stu-id="1d50a-197">Denial of Service</span></span>](denial-of-service.md)
- [<span data-ttu-id="1d50a-198">Falšování</span><span class="sxs-lookup"><span data-stu-id="1d50a-198">Tampering</span></span>](tampering.md)
- [<span data-ttu-id="1d50a-199">Útoky opakováním</span><span class="sxs-lookup"><span data-stu-id="1d50a-199">Replay Attacks</span></span>](replay-attacks.md)
