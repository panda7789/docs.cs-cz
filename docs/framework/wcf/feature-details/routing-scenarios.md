---
title: Scénáře směrování
ms.date: 03/30/2017
helpviewer_keywords:
- routing [WCF], scenarios
ms.assetid: ec22f308-665a-413e-9f94-7267cb665dab
ms.openlocfilehash: 334e9fe7ca6931f87c75023f3322638b36001b6a
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/22/2019
ms.locfileid: "69923057"
---
# <a name="routing-scenarios"></a><span data-ttu-id="9a743-102">Scénáře směrování</span><span class="sxs-lookup"><span data-stu-id="9a743-102">Routing Scenarios</span></span>
<span data-ttu-id="9a743-103">I když je služba Směrování vysoce přizpůsobitelná, může být při vytváření nové konfigurace od začátku výzvou pro návrh efektivní logiky směrování.</span><span class="sxs-lookup"><span data-stu-id="9a743-103">While the Routing Service is highly customizable, it can be a challenge to design efficient routing logic when creating a new configuration from scratch.</span></span>  <span data-ttu-id="9a743-104">Existuje však několik běžných scénářů, které následují konfigurace služby směrování.</span><span class="sxs-lookup"><span data-stu-id="9a743-104">However, there are several common scenarios that most Routing Service configurations follow.</span></span> <span data-ttu-id="9a743-105">I když se tyto scénáře nemusí vztahovat přímo na konkrétní konfiguraci, porozumět tomu, jak se dá služba Směrování nakonfigurovat pro zpracování těchto scénářů, která vám pomůže pochopit směrovací službu.</span><span class="sxs-lookup"><span data-stu-id="9a743-105">While these scenarios may not apply directly to your specific configuration, understanding how the Routing Service can be configured to handle these scenarios will aid you in understanding the Routing Service.</span></span>  
  
## <a name="common-scenarios"></a><span data-ttu-id="9a743-106">Běžné scénáře</span><span class="sxs-lookup"><span data-stu-id="9a743-106">Common Scenarios</span></span>  
 <span data-ttu-id="9a743-107">Nejzákladnější použití směrovací služby je agregované několik cílových koncových bodů, aby se snížil počet koncových bodů vystavených klientským aplikacím, a pak pomocí filtrů zpráv směrují jednotlivé zprávy do správného cíle.</span><span class="sxs-lookup"><span data-stu-id="9a743-107">The most basic use of the Routing Service is to aggregate multiple destination endpoints to reduce the number of endpoints exposed to the client applications, and then use message filters to route each message to the correct destination.</span></span> <span data-ttu-id="9a743-108">Zprávy mohou být směrovány na základě logických nebo fyzických požadavků na zpracování, jako je například typ zprávy, který musí být zpracován konkrétní službou, nebo založený na libovolných obchodních potřebách, jako je například poskytování prioritních zpracování zpráv z konkrétního zdroje.</span><span class="sxs-lookup"><span data-stu-id="9a743-108">Messages may be routed based on logical or physical processing requirements, such as a message type that must be processed by a specific service, or based on arbitrary business needs such as providing priority processing of messages from a specific source.</span></span> <span data-ttu-id="9a743-109">V následující tabulce jsou uvedeny některé běžné scénáře a jejich zjištění:</span><span class="sxs-lookup"><span data-stu-id="9a743-109">The following table lists some of the common scenarios and when they are encountered:</span></span>  
  
|<span data-ttu-id="9a743-110">Scénář</span><span class="sxs-lookup"><span data-stu-id="9a743-110">Scenario</span></span>|<span data-ttu-id="9a743-111">Použít, když</span><span class="sxs-lookup"><span data-stu-id="9a743-111">Use when</span></span>|  
|--------------|--------------|  
|<span data-ttu-id="9a743-112">Správa verzí služeb</span><span class="sxs-lookup"><span data-stu-id="9a743-112">Service versioning</span></span>|<span data-ttu-id="9a743-113">Je potřeba, abyste podporovali víc verzí služby nebo v budoucnu mohli nasadit aktualizovanou službu.</span><span class="sxs-lookup"><span data-stu-id="9a743-113">You need to support multiple versions of a service or may deploy an updated service in the future</span></span>|  
|<span data-ttu-id="9a743-114">Vytváření oddílů dat služby</span><span class="sxs-lookup"><span data-stu-id="9a743-114">Service data partitioning</span></span>|<span data-ttu-id="9a743-115">Je nutné rozdělit službu mezi několik hostitelů.</span><span class="sxs-lookup"><span data-stu-id="9a743-115">You must partition a service across multiple hosts</span></span>|  
|<span data-ttu-id="9a743-116">Dynamická aktualizace</span><span class="sxs-lookup"><span data-stu-id="9a743-116">Dynamic update</span></span>|<span data-ttu-id="9a743-117">Pro zpracování změn nasazení služby je potřeba dynamicky znovu nakonfigurovat logiku směrování za běhu.</span><span class="sxs-lookup"><span data-stu-id="9a743-117">You must dynamically reconfigure routing logic at runtime to handle changing service deployments</span></span>|  
|<span data-ttu-id="9a743-118">Odesílání</span><span class="sxs-lookup"><span data-stu-id="9a743-118">Multicast</span></span>|<span data-ttu-id="9a743-119">Je nutné odeslat jednu zprávu do více koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="9a743-119">You must send one message to multiple endpoints</span></span>|  
|<span data-ttu-id="9a743-120">Přemostění protokolů</span><span class="sxs-lookup"><span data-stu-id="9a743-120">Protocol bridging</span></span>|<span data-ttu-id="9a743-121">Přijímáte zprávy přes jeden transportní protokol a cílový koncový bod používá jiný protokol.</span><span class="sxs-lookup"><span data-stu-id="9a743-121">You receive messages over one transport protocol, and the destination endpoint uses a different protocol</span></span>|  
|<span data-ttu-id="9a743-122">Zpracování chyb</span><span class="sxs-lookup"><span data-stu-id="9a743-122">Error Handling</span></span>|<span data-ttu-id="9a743-123">Je potřeba zajistit odolnost proti výpadkům sítě a selháním komunikace.</span><span class="sxs-lookup"><span data-stu-id="9a743-123">You need to provide resilience to network outages and communication failures</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="9a743-124">I když je mnoho z uvedených scénářů specifické pro konkrétní obchodní potřeby nebo požadavky na zpracování, plánování podpory dynamických aktualizací a využití zpracování chyb se často považuje za osvědčené postupy, protože umožňují upravit logiku směrování za běhu. a obnovení z přechodného selhání sítě a komunikace.</span><span class="sxs-lookup"><span data-stu-id="9a743-124">While many of the scenarios presented are specific to certain business needs or processing requirements, planning to support dynamic updates and utilizing error handling can often be considered as best practices as they allow you to modify routing logic at runtime and recover from transient network and communication failures.</span></span>  
  
### <a name="service-versioning"></a><span data-ttu-id="9a743-125">Verze služby</span><span class="sxs-lookup"><span data-stu-id="9a743-125">Service Versioning</span></span>  
 <span data-ttu-id="9a743-126">Když zavádíte novou verzi služby, musíte často zachovat předchozí verzi, dokud všichni klienti nepřešli do nové služby.</span><span class="sxs-lookup"><span data-stu-id="9a743-126">When introducing a new version of a service, you must often maintain the previous version until all clients have transitioned to the new service.</span></span> <span data-ttu-id="9a743-127">To je obzvláště důležité, pokud je služba dlouhodobě spuštěným procesem, který vybírá dny, týdny nebo dokonce měsíce.</span><span class="sxs-lookup"><span data-stu-id="9a743-127">This is especially critical if the service is a long-running process that takes days, weeks, or even months to complete.</span></span> <span data-ttu-id="9a743-128">Obvykle vyžaduje implementaci nové adresy koncového bodu pro novou službu při zachování původního koncového bodu pro předchozí verzi.</span><span class="sxs-lookup"><span data-stu-id="9a743-128">Usually this requires implementing a new endpoint address for the new service while maintaining the original endpoint for the previous version.</span></span>  
  
 <span data-ttu-id="9a743-129">Pomocí směrovací služby můžete vystavit jeden koncový bod pro příjem zpráv z klientských aplikací a potom každou zprávu směrovat na správnou verzi služby na základě obsahu zprávy.</span><span class="sxs-lookup"><span data-stu-id="9a743-129">By using the Routing Service, you can expose one endpoint to receive messages from client applications and then route each message to the correct service version based on the message content.</span></span> <span data-ttu-id="9a743-130">Nejzákladnější implementace zahrnuje přidání vlastní hlavičky do zprávy, která označuje verzi služby, pomocí které se má zpráva zpracovat.</span><span class="sxs-lookup"><span data-stu-id="9a743-130">The most basic implementation involves adding a custom header to the message that indicates the version of the service that the message is to be processed by.</span></span> <span data-ttu-id="9a743-131">Směrovací služba může použít XPathMessageFilter ke kontrole každé zprávy pro přítomnost vlastní hlavičky a ke směrování zprávy do příslušného cílového koncového bodu.</span><span class="sxs-lookup"><span data-stu-id="9a743-131">The Routing Service can use the XPathMessageFilter to inspect each message for the presence of the custom header and route the message to the appropriate destination endpoint.</span></span>  
  
 <span data-ttu-id="9a743-132">Postup pro vytvoření konfigurace správy verzí služby najdete v tématu [How to: Verze](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md)služby.</span><span class="sxs-lookup"><span data-stu-id="9a743-132">For the steps used to create a service versioning configuration, see [How To: Service Versioning](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md).</span></span>
  
### <a name="service-data-partitioning"></a><span data-ttu-id="9a743-133">Vytvoření oddílů dat služby</span><span class="sxs-lookup"><span data-stu-id="9a743-133">Service Data Partitioning</span></span>  
 <span data-ttu-id="9a743-134">Při návrhu distribuovaného prostředí je často žádoucí rozprostřít zátěžové zatížení mezi více počítači, aby se zajistila vysoká dostupnost, aby se snížilo zatížení jednotlivých počítačů nebo aby poskytovalo vyhrazené prostředky pro určitou podmnožinu. zpráv.</span><span class="sxs-lookup"><span data-stu-id="9a743-134">When designing a distributed environment, it is often desirable to spread processing load across multiple computers in order to provide high availability, decrease processing load on individual computers, or to provide dedicated resources for a specific subset of messages.</span></span> <span data-ttu-id="9a743-135">I když směrovací služba nenahrazuje vyhrazené řešení vyrovnávání zatížení, je možné použít směrování na základě obsahu ke směrování jiných podobných zpráv do konkrétních míst.</span><span class="sxs-lookup"><span data-stu-id="9a743-135">While the Routing Service does not replace a dedicated load balancing solution, its ability to perform content based routing can be used to route otherwise similar messages to specific destinations.</span></span> <span data-ttu-id="9a743-136">Například můžete mít požadavek na zpracování zpráv z konkrétního klienta odděleně od zpráv přijatých z jiných klientů.</span><span class="sxs-lookup"><span data-stu-id="9a743-136">For example, you may have a requirement to process messages from a specific client separately from messages received from other clients.</span></span>  
  
 <span data-ttu-id="9a743-137">Postup pro vytvoření konfigurace oddílů dat služby najdete v tématu [How to: Vytváření oddílů](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md)dat služby.</span><span class="sxs-lookup"><span data-stu-id="9a743-137">For the steps used to create a service data partitioning configuration, see [How To: Service Data Partitioning](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md).</span></span>  
  
### <a name="dynamic-routing"></a><span data-ttu-id="9a743-138">Dynamické směrování</span><span class="sxs-lookup"><span data-stu-id="9a743-138">Dynamic Routing</span></span>  
 <span data-ttu-id="9a743-139">Často je žádoucí změnit konfiguraci směrování tak, aby vyhovovala měnícím se potřebám podniku, jako je například přidání trasy k novější verzi služby, změna kritérií směrování nebo změna cílového koncového bodu na konkrétní zprávu, na kterou filtr odkazuje.</span><span class="sxs-lookup"><span data-stu-id="9a743-139">Often it is desirable to modify the routing configuration to satisfy changing business needs, such as adding a route to a newer version of a service, changing routing criteria, or changing the destination endpoint a specific message that the filter routes to.</span></span> <span data-ttu-id="9a743-140">Směrovací služba vám umožní provést to prostřednictvím <xref:System.ServiceModel.Routing.RoutingExtension>, což vám umožní během běhu poskytnout nové konfigurace RoutingConfiguration.</span><span class="sxs-lookup"><span data-stu-id="9a743-140">The Routing Service allows you to do this through the <xref:System.ServiceModel.Routing.RoutingExtension>, which allows you to provide a new RoutingConfiguration during run time.</span></span> <span data-ttu-id="9a743-141">Nová konfigurace se projeví okamžitě, ale má vliv jenom na nové relace zpracovávané směrovací službou.</span><span class="sxs-lookup"><span data-stu-id="9a743-141">The new configuration takes effect immediately, but only affects any new sessions processed by the Routing Service.</span></span>  
  
 <span data-ttu-id="9a743-142">Postup pro implementaci dynamického směrování najdete v tématu [How to: Dynamická aktualizace](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md).</span><span class="sxs-lookup"><span data-stu-id="9a743-142">For the steps used to implement dynamic routing, see [How To: Dynamic Update](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md).</span></span>
  
### <a name="multicast"></a><span data-ttu-id="9a743-143">Odesílání</span><span class="sxs-lookup"><span data-stu-id="9a743-143">Multicast</span></span>  
 <span data-ttu-id="9a743-144">Při směrování zpráv obvykle směrujete jednotlivé zprávy do jednoho konkrétního cílového koncového bodu.</span><span class="sxs-lookup"><span data-stu-id="9a743-144">When routing messages, usually you routing each message to one specific destination endpoint.</span></span>  <span data-ttu-id="9a743-145">Občas ale budete muset směrovat kopii zprávy na více cílových koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="9a743-145">However, you may occasionally need to route a copy of the message to multiple destination endpoints.</span></span> <span data-ttu-id="9a743-146">Chcete-li provést směrování vícesměrového vysílání, musí být splněny následující podmínky:</span><span class="sxs-lookup"><span data-stu-id="9a743-146">To perform multicast routing, the following conditions must be true:</span></span>  
  
- <span data-ttu-id="9a743-147">Obrazec kanálu nesmí být požadavkem na odpověď (i když může být jednosměrný nebo duplexní), protože klientská aplikace může v reakci na požadavek přijmout jenom jednu odpověď.</span><span class="sxs-lookup"><span data-stu-id="9a743-147">The channel shape must not be request-reply (though it may be one-way or duplex,) because request-reply mandates that only one reply can be received by the client application in response to the request.</span></span>  
  
- <span data-ttu-id="9a743-148">Při vyhodnocování zprávy musí být vráceno více filtrů na **hodnotu true** .</span><span class="sxs-lookup"><span data-stu-id="9a743-148">Multiple filters must return **true** when evaluating the message.</span></span>  
  
 <span data-ttu-id="9a743-149">Pokud jsou tyto podmínky splněny, obdrží každý cílový koncový bod přidružený k filtru, který vrací hodnotu true, kopii zprávy.</span><span class="sxs-lookup"><span data-stu-id="9a743-149">If these conditions are met, each destination endpoint that is associated with a filter that returns true will receive a copy of the message.</span></span>  
  
### <a name="protocol-bridging"></a><span data-ttu-id="9a743-150">Přemostění protokolů</span><span class="sxs-lookup"><span data-stu-id="9a743-150">Protocol Bridging</span></span>  
 <span data-ttu-id="9a743-151">Při směrování zpráv mezi odlišnými protokoly SOAP služba Směrování používá rozhraní API WCF k převedení zprávy z jednoho protokolu na druhý.</span><span class="sxs-lookup"><span data-stu-id="9a743-151">When routing messages between dissimilar SOAP protocols, the Routing Service uses WCF APIs to convert the message from one protocol to the other.</span></span> <span data-ttu-id="9a743-152">K tomu dochází automaticky v případě, že koncový bod služby vystavený směrovací službou používá jiný protokol než koncový bod klienta, na který jsou zprávy směrovány.</span><span class="sxs-lookup"><span data-stu-id="9a743-152">This occurs automatically when the service endpoint(s) exposed by the Routing Service use a different protocol than the client endpoint(s) that messages are routed to.</span></span> <span data-ttu-id="9a743-153">Toto chování je možné zakázat, pokud používané protokoly nejsou standardní. je však nutné zadat vlastní kód přemostění.</span><span class="sxs-lookup"><span data-stu-id="9a743-153">It is possible to disable this behavior if the protocols in use are not standard; however, you must then provide your own bridging code.</span></span>
  
### <a name="error-handling"></a><span data-ttu-id="9a743-154">Zpracování chyb</span><span class="sxs-lookup"><span data-stu-id="9a743-154">Error Handling</span></span>  
 <span data-ttu-id="9a743-155">V distribuovaném prostředí není běžné, že dojde k přechodným chybám sítě nebo komunikace.</span><span class="sxs-lookup"><span data-stu-id="9a743-155">In a distributed environment, it is not uncommon to encounter transient network or communication failures.</span></span> <span data-ttu-id="9a743-156">Bez zprostředkující služby, jako je směrovací služba, by režie zpracování takových selhání mohla spadat do klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="9a743-156">Without an intermediary service such as the Routing Service, the burden of handling such failures falls on the client application.</span></span> <span data-ttu-id="9a743-157">Pokud klientská aplikace neobsahuje konkrétní logiku pro opakování v případě výpadku sítě nebo selhání komunikace a znalostí alternativních umístění, může se stát, že se uživateli v případě, že je nutné zprávu před tím, než bude úspěšně odešle, objeví několik scénářů. zpracováno cílovou službou.</span><span class="sxs-lookup"><span data-stu-id="9a743-157">If the client application does not include specific logic to retry in the event of network or communication failures and knowledge of alternate locations, the user may encounter scenarios where a message must be submitted multiple times before it is successfully processed by the destination service.</span></span> <span data-ttu-id="9a743-158">To může vést k nespokojenosti zákazníků s aplikací, jak je možné ho vnímat jako nespolehlivější.</span><span class="sxs-lookup"><span data-stu-id="9a743-158">This can lead to customer dissatisfaction with the application, as it may be perceived as unreliable.</span></span>  
  
 <span data-ttu-id="9a743-159">Směrovací služba se pokusí tento scénář napravit tím, že poskytuje robustní funkce zpracování chyb pro zprávy, které nastanou při selhání souvisejícím se sítí nebo komunikací.</span><span class="sxs-lookup"><span data-stu-id="9a743-159">The Routing Service attempts to remedy this scenario by providing robust error handling capabilities for messages that encounter network or communication-related failures.</span></span> <span data-ttu-id="9a743-160">Vytvořením seznamu možných cílových koncových bodů a přidružením tohoto seznamu ke každému filtru zpráv odeberete jediný bod selhání, který by měl mít jenom jeden možný cíl.</span><span class="sxs-lookup"><span data-stu-id="9a743-160">By creating a list of possible destination endpoints and associating this list with each message filter, you remove the single point of failure incurred by having only one possible destination.</span></span> <span data-ttu-id="9a743-161">V případě selhání se směrovací služba pokusí doručit zprávu do dalšího koncového bodu v seznamu, dokud se nevydá zpráva, dojde k selhání nekomunikace nebo byly vyčerpány všechny koncové body.</span><span class="sxs-lookup"><span data-stu-id="9a743-161">In the event of a failure, the Routing Service will attempt to deliver the message to the next endpoint in the list until the message has been delivered, a non-communication failure occurs, or all endpoints have been exhausted.</span></span>  
  
 <span data-ttu-id="9a743-162">Postup pro konfiguraci zpracování chyb naleznete v tématu [How to: Zpracování](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md)chyb.</span><span class="sxs-lookup"><span data-stu-id="9a743-162">For the steps used to configure error handling, see [How To: Error Handling](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md).</span></span>
  
### <a name="in-this-section"></a><span data-ttu-id="9a743-163">V tomto oddílu</span><span class="sxs-lookup"><span data-stu-id="9a743-163">In This Section</span></span>  
 [<span data-ttu-id="9a743-164">Postupy: Správa verzí služeb</span><span class="sxs-lookup"><span data-stu-id="9a743-164">How To: Service Versioning</span></span>](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md)  
  
 [<span data-ttu-id="9a743-165">Postupy: Vytváření oddílů dat služby</span><span class="sxs-lookup"><span data-stu-id="9a743-165">How To: Service Data Partitioning</span></span>](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md)  
  
 [<span data-ttu-id="9a743-166">Postupy: Dynamická aktualizace</span><span class="sxs-lookup"><span data-stu-id="9a743-166">How To: Dynamic Update</span></span>](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md)  
  
 [<span data-ttu-id="9a743-167">Postupy: Zpracování chyb</span><span class="sxs-lookup"><span data-stu-id="9a743-167">How To: Error Handling</span></span>](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md)  
  
## <a name="see-also"></a><span data-ttu-id="9a743-168">Viz také:</span><span class="sxs-lookup"><span data-stu-id="9a743-168">See also</span></span>

- [<span data-ttu-id="9a743-169">Úvod do směrování</span><span class="sxs-lookup"><span data-stu-id="9a743-169">Routing Introduction</span></span>](../../../../docs/framework/wcf/feature-details/routing-introduction.md)
