---
title: Výčtové typy v kontraktech dat
description: Přečtěte si, jak model kontraktu dat vyjadřuje výčty jako součást programovacího modelu WFC.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- data contracts [WCF], enumeration types
ms.assetid: b5d694da-68cb-4b74-a5fb-75108a68ec3b
ms.openlocfilehash: ff3184a285e88d47d4545a38a6c74b2f209827fb
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/23/2020
ms.locfileid: "85247296"
---
# <a name="enumeration-types-in-data-contracts"></a><span data-ttu-id="fe082-103">Výčtové typy v kontraktech dat</span><span class="sxs-lookup"><span data-stu-id="fe082-103">Enumeration Types in Data Contracts</span></span>
<span data-ttu-id="fe082-104">Výčty lze vyjádřit v modelu kontraktu dat.</span><span class="sxs-lookup"><span data-stu-id="fe082-104">Enumerations can be expressed in the data contract model.</span></span> <span data-ttu-id="fe082-105">Toto téma vás provede několika příklady, které vysvětlují programovací model.</span><span class="sxs-lookup"><span data-stu-id="fe082-105">This topic walks through several examples that explain the programming model.</span></span>  
  
## <a name="enumeration-basics"></a><span data-ttu-id="fe082-106">Základy výčtu</span><span class="sxs-lookup"><span data-stu-id="fe082-106">Enumeration Basics</span></span>  
 <span data-ttu-id="fe082-107">Jedním ze způsobů, jak používat výčtové typy v modelu kontraktu dat, je použít <xref:System.Runtime.Serialization.DataContractAttribute> atribut na typ.</span><span class="sxs-lookup"><span data-stu-id="fe082-107">One way to use enumeration types in the data contract model is to apply the <xref:System.Runtime.Serialization.DataContractAttribute> attribute to the type.</span></span> <span data-ttu-id="fe082-108">Pak je nutné použít <xref:System.Runtime.Serialization.EnumMemberAttribute> atribut pro každého člena, který musí být zahrnut v kontraktu dat.</span><span class="sxs-lookup"><span data-stu-id="fe082-108">You must then apply the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute to each member that must be included in the data contract.</span></span>  
  
 <span data-ttu-id="fe082-109">Následující příklad ukazuje dvě třídy.</span><span class="sxs-lookup"><span data-stu-id="fe082-109">The following example shows two classes.</span></span> <span data-ttu-id="fe082-110">První používá výčet a druhý definuje výčet.</span><span class="sxs-lookup"><span data-stu-id="fe082-110">The first uses the enumeration and the second defines the enumeration.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#1)]
 [!code-vb[c_DataContractEnumerations#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#1)]  
  
 <span data-ttu-id="fe082-111">Instanci `Car` třídy lze odeslat nebo přijmout pouze v případě `condition` , že je pole nastaveno na jednu z hodnot `New` , `Used` nebo `Rental` .</span><span class="sxs-lookup"><span data-stu-id="fe082-111">An instance of the `Car` class can be sent or received only if the `condition` field is set to one of the values `New`, `Used`, or `Rental`.</span></span> <span data-ttu-id="fe082-112">Pokud `condition` je `Broken` nebo `Stolen` , a <xref:System.Runtime.Serialization.SerializationException> je vyvolána.</span><span class="sxs-lookup"><span data-stu-id="fe082-112">If the `condition` is `Broken` or `Stolen`, a <xref:System.Runtime.Serialization.SerializationException> is thrown.</span></span>  
  
 <span data-ttu-id="fe082-113"><xref:System.Runtime.Serialization.DataContractAttribute> <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> <xref:System.Runtime.Serialization.DataContractAttribute.Namespace%2A> Pro kontrakty dat výčtu můžete použít vlastnosti (a) obvyklým způsobem.</span><span class="sxs-lookup"><span data-stu-id="fe082-113">You can use the <xref:System.Runtime.Serialization.DataContractAttribute> properties (<xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> and <xref:System.Runtime.Serialization.DataContractAttribute.Namespace%2A>) as usual for enumeration data contracts.</span></span>  
  
### <a name="enumeration-member-values"></a><span data-ttu-id="fe082-114">Hodnoty členů výčtu</span><span class="sxs-lookup"><span data-stu-id="fe082-114">Enumeration Member Values</span></span>  
 <span data-ttu-id="fe082-115">Obecně platí, že kontrakt dat zahrnuje názvy členů výčtu, nikoli číselné hodnoty.</span><span class="sxs-lookup"><span data-stu-id="fe082-115">Generally the data contract includes enumeration member names, not numerical values.</span></span> <span data-ttu-id="fe082-116">Při použití modelu kontraktu dat je však v případě, že je přijímající strana klientem služby WCF, vyexportované schéma zachovává číselné hodnoty.</span><span class="sxs-lookup"><span data-stu-id="fe082-116">However, when using the data contract model, if the receiving side is a WCF client, the exported schema preserves the numerical values.</span></span> <span data-ttu-id="fe082-117">Všimněte si, že se nejedná o případ použití [třídy XmlSerializer](using-the-xmlserializer-class.md).</span><span class="sxs-lookup"><span data-stu-id="fe082-117">Note that this is not the case when using the [Using the XmlSerializer Class](using-the-xmlserializer-class.md).</span></span>  
  
 <span data-ttu-id="fe082-118">Pokud je v předchozím příkladu `condition` nastaveno na `Used` a data jsou serializována do formátu XML, výsledný kód XML je `<condition>Used</condition>` a nikoli `<condition>1</condition>` .</span><span class="sxs-lookup"><span data-stu-id="fe082-118">In the preceding example, if `condition` is set to `Used` and the data is serialized to XML, the resulting XML is `<condition>Used</condition>` and not `<condition>1</condition>`.</span></span> <span data-ttu-id="fe082-119">Následující kontrakt dat je proto rovnocenný kontraktu dat `CarConditionEnum` .</span><span class="sxs-lookup"><span data-stu-id="fe082-119">Therefore, the following data contract is equivalent to the data contract of `CarConditionEnum`.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#2)]
 [!code-vb[c_DataContractEnumerations#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#2)]  
  
 <span data-ttu-id="fe082-120">Můžete například použít `CarConditionEnum` na straně odeslání a `CarConditionWithNumbers` na straně příjmu.</span><span class="sxs-lookup"><span data-stu-id="fe082-120">For example, you can use `CarConditionEnum` on the sending side and `CarConditionWithNumbers` on the receiving side.</span></span> <span data-ttu-id="fe082-121">I když odesílající strana používá hodnotu "1" pro `Used` a na straně příjmu se používá hodnota "20", reprezentace XML je určena `<condition>Used</condition>` pro obě strany.</span><span class="sxs-lookup"><span data-stu-id="fe082-121">Although the sending side uses the value "1" for `Used` and the receiving side uses the value "20," the XML representation is `<condition>Used</condition>` for both sides.</span></span>  
  
 <span data-ttu-id="fe082-122">Aby bylo možné zahrnout do kontraktu dat, je nutné použít <xref:System.Runtime.Serialization.EnumMemberAttribute> atribut.</span><span class="sxs-lookup"><span data-stu-id="fe082-122">To be included in the data contract, you must apply the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute.</span></span> <span data-ttu-id="fe082-123">V .NET Framework můžete vždy použít speciální hodnotu 0 (nula) na výčet, což je také výchozí hodnota pro jakýkoliv výčet.</span><span class="sxs-lookup"><span data-stu-id="fe082-123">In the .NET Framework, you can always apply the special value 0 (zero) to an enumeration, which is also the default value for any enumeration.</span></span> <span data-ttu-id="fe082-124">Nicméně i tato speciální nulová hodnota nemůže být serializována, pokud není označena <xref:System.Runtime.Serialization.EnumMemberAttribute> atributem.</span><span class="sxs-lookup"><span data-stu-id="fe082-124">However, even this special zero value cannot be serialized unless it is marked with the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute.</span></span>  
  
 <span data-ttu-id="fe082-125">Existují dvě výjimky:</span><span class="sxs-lookup"><span data-stu-id="fe082-125">There are two exceptions to this:</span></span>  
  
- <span data-ttu-id="fe082-126">Výčty příznaků (popsány dále v tomto tématu).</span><span class="sxs-lookup"><span data-stu-id="fe082-126">Flag enumerations (discussed later in this topic).</span></span>  
  
- <span data-ttu-id="fe082-127">Vyčíslení datových členů s <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> vlastností nastavenou na `false` (v takovém případě je výčet s hodnotou nula vynechán ze serializovaných dat).</span><span class="sxs-lookup"><span data-stu-id="fe082-127">Enumeration data members with the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> property set to `false` (in which case, the enumeration with the value zero is omitted from the serialized data).</span></span>  
  
### <a name="customizing-enumeration-member-values"></a><span data-ttu-id="fe082-128">Přizpůsobení hodnot členů výčtu</span><span class="sxs-lookup"><span data-stu-id="fe082-128">Customizing Enumeration Member Values</span></span>  
 <span data-ttu-id="fe082-129">Můžete přizpůsobit hodnotu člena výčtu, která tvoří součást kontraktu dat pomocí <xref:System.Runtime.Serialization.EnumMemberAttribute.Value%2A> vlastnosti <xref:System.Runtime.Serialization.EnumMemberAttribute> atributu.</span><span class="sxs-lookup"><span data-stu-id="fe082-129">You can customize the enumeration member value that forms a part of the data contract by using the <xref:System.Runtime.Serialization.EnumMemberAttribute.Value%2A> property of the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute.</span></span>  
  
 <span data-ttu-id="fe082-130">Například následující kontrakt dat je také ekvivalentní kontraktu dat v `CarConditionEnum` .</span><span class="sxs-lookup"><span data-stu-id="fe082-130">For example, the following data contract is also equivalent to the data contract of the `CarConditionEnum`.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#3)]
 [!code-vb[c_DataContractEnumerations#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#3)]  
  
 <span data-ttu-id="fe082-131">Při serializaci hodnota `PreviouslyOwned` má reprezentaci XML `<condition>Used</condition>` .</span><span class="sxs-lookup"><span data-stu-id="fe082-131">When serialized, the value of `PreviouslyOwned` has the XML representation `<condition>Used</condition>`.</span></span>  
  
## <a name="simple-enumerations"></a><span data-ttu-id="fe082-132">Jednoduché výčty</span><span class="sxs-lookup"><span data-stu-id="fe082-132">Simple Enumerations</span></span>  
 <span data-ttu-id="fe082-133">Můžete také serializovat výčtové typy, na které nebyl <xref:System.Runtime.Serialization.DataContractAttribute> atribut použit.</span><span class="sxs-lookup"><span data-stu-id="fe082-133">You can also serialize enumeration types to which the <xref:System.Runtime.Serialization.DataContractAttribute> attribute has not been applied.</span></span> <span data-ttu-id="fe082-134">Tyto typy výčtu jsou ošetřeny přesně tak, jak je popsáno, s tím rozdílem, že každý člen (který nemá <xref:System.NonSerializedAttribute> použit atribut) je považován za, pokud byl <xref:System.Runtime.Serialization.EnumMemberAttribute> atribut použit.</span><span class="sxs-lookup"><span data-stu-id="fe082-134">Such enumeration types are treated exactly as previously described, except that every member (that does not have the <xref:System.NonSerializedAttribute> attribute applied) is treated as if the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute has been applied.</span></span> <span data-ttu-id="fe082-135">Například následující výčet má implicitně stejný kontrakt dat jako v předchozím `CarConditionEnum` příkladu.</span><span class="sxs-lookup"><span data-stu-id="fe082-135">For example, the following enumeration implicitly has a data contract equivalent to the preceding `CarConditionEnum` example.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#6)]
 [!code-vb[c_DataContractEnumerations#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#6)]  
  
 <span data-ttu-id="fe082-136">Jednoduché výčty můžete použít, pokud nepotřebujete přizpůsobit název kontraktu dat výčtu a obor názvů a hodnoty členů výčtu.</span><span class="sxs-lookup"><span data-stu-id="fe082-136">You can use simple enumerations when you do not need to customize the enumeration's data contract name and namespace and the enumeration member values.</span></span>  
  
#### <a name="notes-on-simple-enumerations"></a><span data-ttu-id="fe082-137">Poznámky k jednoduchým Výčtům</span><span class="sxs-lookup"><span data-stu-id="fe082-137">Notes on Simple Enumerations</span></span>  
 <span data-ttu-id="fe082-138">Použití <xref:System.Runtime.Serialization.EnumMemberAttribute> atributu na jednoduché výčty nemá žádný vliv.</span><span class="sxs-lookup"><span data-stu-id="fe082-138">Applying the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute to simple enumerations has no effect.</span></span>  
  
 <span data-ttu-id="fe082-139">Neposkytuje žádný rozdíl bez ohledu na to, zda <xref:System.SerializableAttribute> je atribut použit pro výčet.</span><span class="sxs-lookup"><span data-stu-id="fe082-139">It makes no difference whether or not the <xref:System.SerializableAttribute> attribute is applied to the enumeration.</span></span>  
  
 <span data-ttu-id="fe082-140">Fakt, že <xref:System.Runtime.Serialization.DataContractSerializer> Třída respektuje <xref:System.NonSerializedAttribute> atribut používaný pro členy výčtu, se liší od chování <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> a <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> .</span><span class="sxs-lookup"><span data-stu-id="fe082-140">The fact that the <xref:System.Runtime.Serialization.DataContractSerializer> class honors the <xref:System.NonSerializedAttribute> attribute applied to enumeration members is different from the behavior of the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> and the <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>.</span></span> <span data-ttu-id="fe082-141">Oba tyto serializátory ignorují <xref:System.NonSerializedAttribute> atribut.</span><span class="sxs-lookup"><span data-stu-id="fe082-141">Both of those serializers ignore the <xref:System.NonSerializedAttribute> attribute.</span></span>  
  
## <a name="flag-enumerations"></a><span data-ttu-id="fe082-142">Označit výčty</span><span class="sxs-lookup"><span data-stu-id="fe082-142">Flag Enumerations</span></span>  
 <span data-ttu-id="fe082-143">Atribut lze použít <xref:System.FlagsAttribute> pro výčty.</span><span class="sxs-lookup"><span data-stu-id="fe082-143">You can apply the <xref:System.FlagsAttribute> attribute to enumerations.</span></span> <span data-ttu-id="fe082-144">V takovém případě je možné současně odeslat nebo přijmout seznam nulových nebo více hodnot výčtu.</span><span class="sxs-lookup"><span data-stu-id="fe082-144">In that case, a list of zero or more enumeration values can be sent or received simultaneously.</span></span>  
  
 <span data-ttu-id="fe082-145">Uděláte to tak, že použijete <xref:System.Runtime.Serialization.DataContractAttribute> atribut na výčet příznaků a pak označíte všechny členy, kteří jsou mocninami dvou s <xref:System.Runtime.Serialization.EnumMemberAttribute> atributem.</span><span class="sxs-lookup"><span data-stu-id="fe082-145">To do so, apply the <xref:System.Runtime.Serialization.DataContractAttribute> attribute to the flag enumeration and then mark all the members that are powers of two with the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute.</span></span> <span data-ttu-id="fe082-146">Všimněte si, že pokud chcete použít výčet příznaků, průběh musí být nepřerušovaná sekvence mocnin 2 (například 1, 2, 4, 8, 16, 32, 64).</span><span class="sxs-lookup"><span data-stu-id="fe082-146">Note that to use a flag enumeration, the progression must be an uninterrupted sequence of powers of 2 (for example, 1, 2, 4, 8, 16, 32, 64).</span></span>  
  
 <span data-ttu-id="fe082-147">Následující postup platí pro odeslání hodnoty výčtu příznakem:</span><span class="sxs-lookup"><span data-stu-id="fe082-147">The following steps apply to sending a flag's enumeration value:</span></span>  
  
1. <span data-ttu-id="fe082-148">Došlo k pokusu o nalezení člena výčtu (s <xref:System.Runtime.Serialization.EnumMemberAttribute> použitým atributem), který je namapován na číselnou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="fe082-148">Attempt to find an enumeration member (with the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute applied) that maps to the numeric value.</span></span> <span data-ttu-id="fe082-149">Když se najde, pošle seznam, který obsahuje jenom tohoto člena.</span><span class="sxs-lookup"><span data-stu-id="fe082-149">If found, send a list that contains just that member.</span></span>  
  
2. <span data-ttu-id="fe082-150">Pokusí se rozdělit číselnou hodnotu na součet tak, aby existovaly členy výčtu (každý s <xref:System.Runtime.Serialization.EnumMemberAttribute> atributem použit), které jsou mapovány na každou část součtu.</span><span class="sxs-lookup"><span data-stu-id="fe082-150">Attempt to break the numeric value into a sum such that there are enumeration members (each with the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute applied) that map to each part of the sum.</span></span> <span data-ttu-id="fe082-151">Odešle seznam všech těchto členů.</span><span class="sxs-lookup"><span data-stu-id="fe082-151">Send the list of all these members.</span></span> <span data-ttu-id="fe082-152">Všimněte si, že *algoritmus hladce* se používá k vyhledání takového součtu, a proto není nijak zaručeno, že se tato suma najde, i když je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="fe082-152">Note that the *greedy algorithm* is used to find such a sum, and thus there is no guarantee that such a sum is found even if it is present.</span></span> <span data-ttu-id="fe082-153">Chcete-li se tomuto problému vyhnout, ujistěte se, že číselné hodnoty členů výčtu mají dvě mocniny.</span><span class="sxs-lookup"><span data-stu-id="fe082-153">To avoid this problem, make sure that the numeric values of the enumeration members are powers of two.</span></span>  
  
3. <span data-ttu-id="fe082-154">Pokud předchozí dva kroky selžou a číselná hodnota je nenulová, vyvolejte a <xref:System.Runtime.Serialization.SerializationException> .</span><span class="sxs-lookup"><span data-stu-id="fe082-154">If the preceding two steps fail, and the numeric value is nonzero, throw a <xref:System.Runtime.Serialization.SerializationException>.</span></span> <span data-ttu-id="fe082-155">Pokud je číselná hodnota nula, odešlete prázdný seznam.</span><span class="sxs-lookup"><span data-stu-id="fe082-155">If the numeric value is zero, send the empty list.</span></span>  
  
### <a name="example"></a><span data-ttu-id="fe082-156">Příklad</span><span class="sxs-lookup"><span data-stu-id="fe082-156">Example</span></span>  
 <span data-ttu-id="fe082-157">Následující příklad výčtu lze použít v operaci Flag.</span><span class="sxs-lookup"><span data-stu-id="fe082-157">The following enumeration example can be used in a flag operation.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#4)]
 [!code-vb[c_DataContractEnumerations#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#4)]  
  
 <span data-ttu-id="fe082-158">Následující příklady hodnot jsou serializovány, jak je uvedeno.</span><span class="sxs-lookup"><span data-stu-id="fe082-158">The following example values are serialized as indicated.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#5)]
 [!code-vb[c_DataContractEnumerations#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#5)]  
  
## <a name="see-also"></a><span data-ttu-id="fe082-159">Viz také</span><span class="sxs-lookup"><span data-stu-id="fe082-159">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractSerializer>
- [<span data-ttu-id="fe082-160">Použití kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="fe082-160">Using Data Contracts</span></span>](using-data-contracts.md)
- [<span data-ttu-id="fe082-161">Určování přenosu dat v kontraktech služby</span><span class="sxs-lookup"><span data-stu-id="fe082-161">Specifying Data Transfer in Service Contracts</span></span>](specifying-data-transfer-in-service-contracts.md)
