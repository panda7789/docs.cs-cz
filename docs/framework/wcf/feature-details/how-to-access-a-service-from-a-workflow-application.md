---
title: 'Postupy: Přístup ke službě z aplikace pracovního postupu'
ms.date: 03/30/2017
ms.assetid: 925ef8ea-5550-4c9d-bb7b-209e20c280ad
ms.openlocfilehash: 2ce79b726b623c2a25bf14065682e685455ca575
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/09/2020
ms.locfileid: "84597238"
---
# <a name="how-to-access-a-service-from-a-workflow-application"></a><span data-ttu-id="38859-102">Postupy: Přístup ke službě z aplikace pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="38859-102">How To: Access a Service From a Workflow Application</span></span>
<span data-ttu-id="38859-103">Toto téma popisuje, jak volat službu pracovního postupu z konzolové aplikace pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="38859-103">This topic describes how to call a workflow service from a workflow console application.</span></span> <span data-ttu-id="38859-104">Závisí na dokončení postupu [: vytvoření služby pracovního postupu pomocí aktivity zasílání zpráv](how-to-create-a-workflow-service-with-messaging-activities.md) .</span><span class="sxs-lookup"><span data-stu-id="38859-104">It depends on completion of the [How to: Create a Workflow Service with Messaging Activities](how-to-create-a-workflow-service-with-messaging-activities.md) topic.</span></span> <span data-ttu-id="38859-105">I když toto téma popisuje, jak volat službu pracovního postupu z aplikace pracovního postupu, stejné metody lze použít k volání libovolné služby Windows Communication Foundation (WCF) z aplikace pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="38859-105">Although this topic describes how to call a workflow service from a workflow application, the same methods can be used to call any Windows Communication Foundation (WCF) service from a workflow application.</span></span>

### <a name="create-a-workflow-console-application-project"></a><span data-ttu-id="38859-106">Vytvoření projektu konzolové aplikace pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="38859-106">Create a Workflow Console Application Project</span></span>

1. <span data-ttu-id="38859-107">Spusťte Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="38859-107">Start Visual Studio 2012.</span></span>

2. <span data-ttu-id="38859-108">Načtěte projekt MyWFService, který jste vytvořili v tématu [Postupy: vytvoření služby pracovního postupu pomocí aktivity zasílání zpráv](how-to-create-a-workflow-service-with-messaging-activities.md) .</span><span class="sxs-lookup"><span data-stu-id="38859-108">Load the MyWFService project you created in the [How to: Create a Workflow Service with Messaging Activities](how-to-create-a-workflow-service-with-messaging-activities.md) topic.</span></span>

3. <span data-ttu-id="38859-109">V **Průzkumník řešení** klikněte pravým tlačítkem na řešení **MyWFService** a vyberte **Přidat**, **Nový projekt**.</span><span class="sxs-lookup"><span data-stu-id="38859-109">Right click the **MyWFService** solution in the **Solution Explorer** and select **Add**, **New Project**.</span></span> <span data-ttu-id="38859-110">V seznamu typů projektů vyberte **pracovní postup** v části **Nainstalované šablony** a **Konzolová aplikace pracovního postupu** .</span><span class="sxs-lookup"><span data-stu-id="38859-110">Select **Workflow** in the **Installed Templates** and **Workflow Console Application** from the list of project types.</span></span> <span data-ttu-id="38859-111">Pojmenujte projekt MyWFClient a použijte výchozí umístění, jak je znázorněno na následujícím obrázku.</span><span class="sxs-lookup"><span data-stu-id="38859-111">Name the project MyWFClient and use the default location as shown in the following illustration.</span></span>

     ![Dialogové okno Přidat nový projekt](./media/how-to-access-a-service-from-a-workflow-application/add-new-project-dialog.jpg)

     <span data-ttu-id="38859-113">Kliknutím na tlačítko **OK** zavřete **dialogové okno Přidat nový projekt**.</span><span class="sxs-lookup"><span data-stu-id="38859-113">Click the **OK** button to dismiss the **Add New Project Dialog**.</span></span>

4. <span data-ttu-id="38859-114">Po vytvoření projektu se soubor Workflow1. XAML otevře v návrháři.</span><span class="sxs-lookup"><span data-stu-id="38859-114">After the project is created, the Workflow1.xaml file is opened in the designer.</span></span> <span data-ttu-id="38859-115">Kliknutím na kartu **panelu nástrojů** otevřete panel nástrojů, pokud ještě není otevřený, a kliknutím na připínáček zachováte okno sady nástrojů otevřené.</span><span class="sxs-lookup"><span data-stu-id="38859-115">Click the **Toolbox** tab to open the toolbox if it is not already open and click the pushpin to keep the toolbox window open.</span></span>

5. <span data-ttu-id="38859-116">Stisknutím klávesy **CTRL** + **F5** Sestavte a spusťte službu.</span><span class="sxs-lookup"><span data-stu-id="38859-116">Press **Ctrl**+**F5** to build and launch the service.</span></span> <span data-ttu-id="38859-117">Stejně jako dřív se spustí vývojový server ASP.NET a Internet Explorer zobrazí stránku s usnadněním pro WCF.</span><span class="sxs-lookup"><span data-stu-id="38859-117">As before, the ASP.NET Development Server is launched and Internet Explorer displays the WCF Help Page.</span></span> <span data-ttu-id="38859-118">Všimněte si identifikátoru URI této stránky, protože je nutné ji použít v dalším kroku.</span><span class="sxs-lookup"><span data-stu-id="38859-118">Notice the URI for this page as you must use it in the next step.</span></span>

     ![IE zobrazení stránky a identifikátoru URI v nápovědě WCF](./media/how-to-access-a-service-from-a-workflow-application/ie-wcf-help-page-uri.jpg)

6. <span data-ttu-id="38859-120">V **Průzkumník řešení** klikněte pravým tlačítkem na projekt **MyWFClient** a vyberte **Přidat**  >  **odkaz na službu**.</span><span class="sxs-lookup"><span data-stu-id="38859-120">Right click the **MyWFClient** project in the **Solution Explorer** and select **Add** > **Service Reference**.</span></span> <span data-ttu-id="38859-121">Kliknutím na tlačítko **Vyhledat** můžete vyhledat aktuální řešení pro všechny služby.</span><span class="sxs-lookup"><span data-stu-id="38859-121">Click the **Discover** button to search the current solution for any services.</span></span> <span data-ttu-id="38859-122">V seznamu služeb klikněte na trojúhelník vedle Service1. xamlx.</span><span class="sxs-lookup"><span data-stu-id="38859-122">Click the triangle next to Service1.xamlx in the Services list.</span></span> <span data-ttu-id="38859-123">Kliknutím na trojúhelník vedle Service1 zobrazíte seznam kontraktů implementovaných službou Service1.</span><span class="sxs-lookup"><span data-stu-id="38859-123">Click the triangle next to Service1 to list the contracts implemented by the Service1 service.</span></span> <span data-ttu-id="38859-124">Rozbalte uzel **Service1** v seznamu **služby** .</span><span class="sxs-lookup"><span data-stu-id="38859-124">Expand the **Service1** node in the **Services** list.</span></span> <span data-ttu-id="38859-125">Operace ECHO se zobrazí v seznamu **operací** , jak je znázorněno na následujícím obrázku.</span><span class="sxs-lookup"><span data-stu-id="38859-125">The Echo operation is displayed in the **Operations** list as shown in the following illustration.</span></span>

     ![Dialog Přidat odkaz na službu](./media/how-to-access-a-service-from-a-workflow-application/add-service-reference.jpg)

     <span data-ttu-id="38859-127">Ponechte výchozí obor názvů a kliknutím na tlačítko **OK** zavřete dialogové okno **Přidat odkaz na službu** .</span><span class="sxs-lookup"><span data-stu-id="38859-127">Keep the default namespace and click **OK** to dismiss the **Add Service Reference** dialog.</span></span> <span data-ttu-id="38859-128">Zobrazí se následující dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="38859-128">The following dialog is displayed.</span></span>

     ![Dialog oznámení Přidat odkaz na službu](./media/how-to-access-a-service-from-a-workflow-application/add-service-reference-dialog.jpg)

     <span data-ttu-id="38859-130">Kliknutím na tlačítko **OK** zavřete dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="38859-130">Click **OK** to dismiss the dialog.</span></span> <span data-ttu-id="38859-131">Potom stisknutím kombinace kláves CTRL + SHIFT + B Sestavte řešení.</span><span class="sxs-lookup"><span data-stu-id="38859-131">Next, press CTRL+SHIFT+B to build the solution.</span></span> <span data-ttu-id="38859-132">Všimněte si, že v sadě nástrojů byla přidána nová část s názvem **MyWFClient. ServiceReference1. Activities**.</span><span class="sxs-lookup"><span data-stu-id="38859-132">Notice in the toolbox a new section has been added called **MyWFClient.ServiceReference1.Activities**.</span></span> <span data-ttu-id="38859-133">Rozbalte tuto část a Všimněte si aktivity ozvěny, která byla přidána, jak je znázorněno na následujícím obrázku.</span><span class="sxs-lookup"><span data-stu-id="38859-133">Expand this section and notice the Echo activity that has been added as shown in the following illustration.</span></span>

     ![Aktivita echo v sadě nástrojů](./media/how-to-access-a-service-from-a-workflow-application/echo-activity-toolbox.jpg)

7. <span data-ttu-id="38859-135">Přetáhněte <xref:System.Activities.Statements.Sequence> aktivitu na plochu návrháře.</span><span class="sxs-lookup"><span data-stu-id="38859-135">Drag and drop a <xref:System.Activities.Statements.Sequence> activity onto the designer surface.</span></span> <span data-ttu-id="38859-136">Je pod částí **tok řízení** v sadě nástrojů.</span><span class="sxs-lookup"><span data-stu-id="38859-136">It is under the **Control Flow** section of the toolbox.</span></span>

8. <span data-ttu-id="38859-137">U <xref:System.Activities.Statements.Sequence> aktivity, která je zaostření, klikněte na odkaz **proměnné** a přidejte řetězcovou proměnnou s názvem `inString` .</span><span class="sxs-lookup"><span data-stu-id="38859-137">With the <xref:System.Activities.Statements.Sequence> activity in focus, click the **Variables** link and add a string variable named `inString`.</span></span> <span data-ttu-id="38859-138">Poskytněte proměnné výchozí hodnotu `"Hello, world"` a také řetězcovou proměnnou s názvem `outString` , jak je znázorněno v následujícím diagramu.</span><span class="sxs-lookup"><span data-stu-id="38859-138">Give the variable a default value of `"Hello, world"` as well as a string variable named `outString` as shown in the following diagram.</span></span>

     ![Přidání proměnné inString](./media/how-to-access-a-service-from-a-workflow-application/add-instring-variable.jpg)

9. <span data-ttu-id="38859-140">Přetáhněte aktivitu **echo** do umístění <xref:System.Activities.Statements.Sequence> .</span><span class="sxs-lookup"><span data-stu-id="38859-140">Drag and drop an **Echo** activity into the <xref:System.Activities.Statements.Sequence>.</span></span> <span data-ttu-id="38859-141">V okně Vlastnosti svažte `inMsg` argument `inString` proměnné a `outMsg` argument `outString` proměnné, jak je znázorněno na následujícím obrázku.</span><span class="sxs-lookup"><span data-stu-id="38859-141">In the properties window bind the `inMsg` argument to the `inString` variable and the `outMsg` argument to the `outString` variable as shown in the following illustration.</span></span> <span data-ttu-id="38859-142">Tato operace projde hodnotou `inString` proměnné pro operaci a poté převezme návratovou hodnotu a umístí ji do `outString` proměnné.</span><span class="sxs-lookup"><span data-stu-id="38859-142">This passes in the value of the `inString` variable to the operation and then takes the return value and places it in the `outString` variable.</span></span>

     ![Vazba argumentů na proměnné](./media/how-to-access-a-service-from-a-workflow-application/bind-arguments-variables.jpg)

10. <span data-ttu-id="38859-144">Přetáhněte aktivitu **WriteLine** pod aktivitu **echo** a zobrazte tak řetězec vrácený voláním služby.</span><span class="sxs-lookup"><span data-stu-id="38859-144">Drag and drop a **WriteLine** activity below the **Echo** activity to display the string returned by the service call.</span></span> <span data-ttu-id="38859-145">Aktivita **WriteLine** se nachází v uzlu **primitivních elementů** v sadě nástrojů.</span><span class="sxs-lookup"><span data-stu-id="38859-145">The **WriteLine** activity is located in the **Primitives** node in the toolbox.</span></span> <span data-ttu-id="38859-146">Navažte **textový** argument aktivity **WriteLine** na `outString` proměnnou tak, že zadáte `outString` do textového pole v aktivitě **WriteLine** .</span><span class="sxs-lookup"><span data-stu-id="38859-146">Bind the **Text** argument of the **WriteLine** activity to the `outString` variable by typing `outString` into the text box on the **WriteLine** activity.</span></span> <span data-ttu-id="38859-147">Pracovní postup by teď měl vypadat jako na následujícím obrázku.</span><span class="sxs-lookup"><span data-stu-id="38859-147">The workflow should now look like the following illustration.</span></span>

     ![Kompletní pracovní postup klienta](./media/how-to-access-a-service-from-a-workflow-application/complete-client-workflow.jpg)

11. <span data-ttu-id="38859-149">Klikněte pravým tlačítkem na řešení MyWFService a vyberte **nastavit projekty po spuštění...**. Vyberte přepínač **více projektů po spuštění** a vyberte **Spustit** pro každý projekt ve sloupci **Akce** , jak je znázorněno na následujícím obrázku.</span><span class="sxs-lookup"><span data-stu-id="38859-149">Right-click the MyWFService solution and select **Set Startup Projects ...**. Select the **Multiple startup projects** radio button and select **Start** for each project in the **Action** column as shown in the following illustration.</span></span>

     ![Možnosti projektů po spuštění](./media/how-to-access-a-service-from-a-workflow-application/startup-project-options.jpg)

12. <span data-ttu-id="38859-151">Stisknutím kombinace kláves CTRL + F5 spusťte službu i klienta.</span><span class="sxs-lookup"><span data-stu-id="38859-151">Press Ctrl + F5 to launch both the service and the client.</span></span> <span data-ttu-id="38859-152">ASP.NET Development Server hostuje službu, Internet Explorer zobrazí stránku s technickou pomocí WCF a aplikace pracovního postupu klienta se spustí v okně konzoly a zobrazí řetězec vrácený službou ("Hello, World").</span><span class="sxs-lookup"><span data-stu-id="38859-152">The ASP.NET Development Server hosts the service, Internet Explorer displays the WCF help page, and the client workflow application is launched in a console window and displays the string returned from the service ("Hello, world").</span></span>

## <a name="see-also"></a><span data-ttu-id="38859-153">Viz také</span><span class="sxs-lookup"><span data-stu-id="38859-153">See also</span></span>

- [<span data-ttu-id="38859-154">Služby pracovních postupů</span><span class="sxs-lookup"><span data-stu-id="38859-154">Workflow Services</span></span>](workflow-services.md)
- [<span data-ttu-id="38859-155">Postupy: Vytvoření služby pracovního postupu pomocí aktivit zasílání zpráv</span><span class="sxs-lookup"><span data-stu-id="38859-155">How to: Create a Workflow Service with Messaging Activities</span></span>](how-to-create-a-workflow-service-with-messaging-activities.md)
- [<span data-ttu-id="38859-156">Využívání služby WCF z pracovního postupu ve webovém projektu</span><span class="sxs-lookup"><span data-stu-id="38859-156">Consuming a WCF Service from a Workflow in a Web Project</span></span>](https://docs.microsoft.com/archive/blogs/endpoint/how-to-consume-a-wcf-service-from-a-wf4-workflow)
