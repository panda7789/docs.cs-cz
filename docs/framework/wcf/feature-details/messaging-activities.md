---
title: Aktivity zasílání zpráv
ms.date: 03/30/2017
ms.assetid: 8498f215-1823-4aba-a6e1-391407f8c273
ms.openlocfilehash: 69a0e9a415b10d9c58d04eac27e48b1ed6a78064
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/09/2020
ms.locfileid: "84576392"
---
# <a name="messaging-activities"></a><span data-ttu-id="d1337-102">Aktivity zasílání zpráv</span><span class="sxs-lookup"><span data-stu-id="d1337-102">Messaging activities</span></span>

<span data-ttu-id="d1337-103">Aktivity zasílání zpráv umožňují pracovním postupům odesílat a přijímat zprávy WCF.</span><span class="sxs-lookup"><span data-stu-id="d1337-103">Messaging activities allow workflows to send and receive WCF messages.</span></span> <span data-ttu-id="d1337-104">Přidáním aktivit zasílání zpráv do pracovního postupu můžete modelovat libovolně složité vzory výměny zpráv (MEP).</span><span class="sxs-lookup"><span data-stu-id="d1337-104">By adding messaging activities to a workflow you can model any arbitrarily complex message exchange patterns (MEP).</span></span>

## <a name="message-exchange-patterns"></a><span data-ttu-id="d1337-105">Vzorce výměny zpráv</span><span class="sxs-lookup"><span data-stu-id="d1337-105">Message exchange patterns</span></span>

<span data-ttu-id="d1337-106">Existují tři základní vzorce výměny zpráv:</span><span class="sxs-lookup"><span data-stu-id="d1337-106">There are three basic message exchange patterns:</span></span>

- <span data-ttu-id="d1337-107">**Datagram** – při použití datagramu MEP odešle klient zprávu službě, ale služba nereaguje.</span><span class="sxs-lookup"><span data-stu-id="d1337-107">**Datagram** - When using the datagram MEP the client sends a message to the service, but the service does not respond.</span></span> <span data-ttu-id="d1337-108">Tato situace se někdy označuje jako "oheň" a "zapomenout".</span><span class="sxs-lookup"><span data-stu-id="d1337-108">This is sometimes called "fire and forget".</span></span> <span data-ttu-id="d1337-109">Výměna požáru a zapomenutí je taková, která vyžaduje vzdálené potvrzení úspěšného doručení.</span><span class="sxs-lookup"><span data-stu-id="d1337-109">A fire and forget exchange is one that requires out-of-band confirmation of successful delivery.</span></span> <span data-ttu-id="d1337-110">Zpráva může být ztracena při přenosu a nikdy se nespojit se službou.</span><span class="sxs-lookup"><span data-stu-id="d1337-110">The message might be lost in transit and never reach the service.</span></span> <span data-ttu-id="d1337-111">Pokud klient úspěšně pošle zprávu, nezaručuje, že služba obdržela zprávu.</span><span class="sxs-lookup"><span data-stu-id="d1337-111">If the client successfully sends a message, it does not guarantee that the service has received the message.</span></span> <span data-ttu-id="d1337-112">Datagram je základní stavební blok pro zasílání zpráv, protože můžete vytvořit vlastní MEPs nad ním.</span><span class="sxs-lookup"><span data-stu-id="d1337-112">The datagram is a fundamental building block for messaging, as you can build your own MEPs on top of it.</span></span>

- <span data-ttu-id="d1337-113">**Požadavek-odpověď** – při použití požadavku-Response MEP klient pošle zprávu službě, služba provede požadované zpracování a pak pošle odpověď zpátky klientovi.</span><span class="sxs-lookup"><span data-stu-id="d1337-113">**Request-Response** - When using the request-response MEP the client sends a message to the service, the service does the required processing, and then sends a response back to the client.</span></span> <span data-ttu-id="d1337-114">Vzor se skládá z párů požadavků a odpovědí.</span><span class="sxs-lookup"><span data-stu-id="d1337-114">The pattern consists of request-response pairs.</span></span> <span data-ttu-id="d1337-115">Příklady volání požadavků na odezvu jsou vzdálená volání procedur (RPC) a požadavky GET prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="d1337-115">Examples of request-response calls are remote procedure calls (RPC) and browser GET requests.</span></span> <span data-ttu-id="d1337-116">Tento model se také označuje jako poloduplexní.</span><span class="sxs-lookup"><span data-stu-id="d1337-116">This pattern is also known as half-duplex.</span></span>

- <span data-ttu-id="d1337-117">**Duplexní** – při použití duplexního MEP může klient a služba posílat zprávy v libovolném pořadí.</span><span class="sxs-lookup"><span data-stu-id="d1337-117">**Duplex** - When using the duplex MEP the client and service can send messages to each other in any order.</span></span> <span data-ttu-id="d1337-118">Duplexní MEP je jako telefonická konverzace, kde každé mluvené slovo je zpráva.</span><span class="sxs-lookup"><span data-stu-id="d1337-118">The duplex MEP is like a phone conversation, where each word being spoken is a message.</span></span>

<span data-ttu-id="d1337-119">Aktivity zasílání zpráv umožňují implementovat některé z těchto základních MEPs a také libovolně komplexní MEP.</span><span class="sxs-lookup"><span data-stu-id="d1337-119">The messaging activities allow you to implement any of these basic MEPs as well as any arbitrarily complex MEP.</span></span>

## <a name="messaging-activities"></a><span data-ttu-id="d1337-120">Aktivity zasílání zpráv</span><span class="sxs-lookup"><span data-stu-id="d1337-120">Messaging activities</span></span>

<span data-ttu-id="d1337-121">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)]Definuje následující aktivity zasílání zpráv:</span><span class="sxs-lookup"><span data-stu-id="d1337-121">The [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] defines the following messaging activities:</span></span>

- <span data-ttu-id="d1337-122"><xref:System.ServiceModel.Activities.Send>– <xref:System.ServiceModel.Activities.Send> K odeslání zprávy použijte aktivitu.</span><span class="sxs-lookup"><span data-stu-id="d1337-122"><xref:System.ServiceModel.Activities.Send>- Use the <xref:System.ServiceModel.Activities.Send> activity to send a message.</span></span>

- <span data-ttu-id="d1337-123"><xref:System.ServiceModel.Activities.SendReply>– <xref:System.ServiceModel.Activities.SendReply> K odeslání odpovědi na přijatou zprávu použijte aktivitu.</span><span class="sxs-lookup"><span data-stu-id="d1337-123"><xref:System.ServiceModel.Activities.SendReply> - Use the <xref:System.ServiceModel.Activities.SendReply> activity to send a response to a received message.</span></span> <span data-ttu-id="d1337-124">Tuto aktivitu používají služby pracovních postupů při implementaci MEP požadavků a odpovědí.</span><span class="sxs-lookup"><span data-stu-id="d1337-124">This activity is used by workflow services when implementing a request/reply MEP.</span></span>

- <span data-ttu-id="d1337-125"><xref:System.ServiceModel.Activities.Receive>– <xref:System.ServiceModel.Activities.Receive> K přijetí zprávy použijte aktivitu.</span><span class="sxs-lookup"><span data-stu-id="d1337-125"><xref:System.ServiceModel.Activities.Receive>- Use the <xref:System.ServiceModel.Activities.Receive> activity to receive a message.</span></span>

- <span data-ttu-id="d1337-126"><xref:System.ServiceModel.Activities.ReceiveReply>– Použijte <xref:System.ServiceModel.Activities.ReceiveReply> aktivitu pro příjem zprávy s odpovědí.</span><span class="sxs-lookup"><span data-stu-id="d1337-126"><xref:System.ServiceModel.Activities.ReceiveReply> - Use the <xref:System.ServiceModel.Activities.ReceiveReply> activity to receive a reply message.</span></span> <span data-ttu-id="d1337-127">Tuto aktivitu používají klienti služby pracovního postupu při implementaci MEP požadavků a odpovědí.</span><span class="sxs-lookup"><span data-stu-id="d1337-127">This activity is used by workflow service clients when implementing a request/reply MEP.</span></span>

## <a name="messaging-activities-and-message-exchange-patterns"></a><span data-ttu-id="d1337-128">Aktivity zasílání zpráv a vzory výměny zpráv</span><span class="sxs-lookup"><span data-stu-id="d1337-128">Messaging activities and message exchange patterns</span></span>

<span data-ttu-id="d1337-129">Datagram MEP zahrnuje klienta odesílajícího zprávu a službu přijímající zprávu.</span><span class="sxs-lookup"><span data-stu-id="d1337-129">A datagram MEP involves a client sending a message and a service receiving the message.</span></span> <span data-ttu-id="d1337-130">Pokud je klient pracovní postup, použijte <xref:System.ServiceModel.Activities.Send> aktivitu k odeslání zprávy.</span><span class="sxs-lookup"><span data-stu-id="d1337-130">If the client is a workflow use a <xref:System.ServiceModel.Activities.Send> activity to send the message.</span></span> <span data-ttu-id="d1337-131">Pokud chcete tuto zprávu přijmout v pracovním postupu, použijte <xref:System.ServiceModel.Activities.Receive> aktivitu.</span><span class="sxs-lookup"><span data-stu-id="d1337-131">To receive that message in a workflow, use a <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="d1337-132"><xref:System.ServiceModel.Activities.Send>Aktivity a <xref:System.ServiceModel.Activities.Receive> obsahují vlastnost s názvem `Content` .</span><span class="sxs-lookup"><span data-stu-id="d1337-132">The <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> activities each have a property named `Content`.</span></span> <span data-ttu-id="d1337-133">Tato vlastnost obsahuje data odesílaná nebo přijímaná.</span><span class="sxs-lookup"><span data-stu-id="d1337-133">This property contains the data being sent or received.</span></span> <span data-ttu-id="d1337-134">Když implementujete požadavek-Response MEP, klient i služba používají páry aktivit.</span><span class="sxs-lookup"><span data-stu-id="d1337-134">When implementing the request-response MEP both the client and the service use pairs of activities.</span></span> <span data-ttu-id="d1337-135">Klient používá <xref:System.ServiceModel.Activities.Send> aktivitu k odeslání zprávy a <xref:System.ServiceModel.Activities.ReceiveReply> aktivity k přijetí odpovědi ze služby.</span><span class="sxs-lookup"><span data-stu-id="d1337-135">The client uses a <xref:System.ServiceModel.Activities.Send> activity to send the message and a <xref:System.ServiceModel.Activities.ReceiveReply> activity to receive the response from the service.</span></span> <span data-ttu-id="d1337-136">Tyto dvě aktivity jsou vzájemně spojeny <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> vlastností.</span><span class="sxs-lookup"><span data-stu-id="d1337-136">These two activities are associated with each other by the <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> property.</span></span> <span data-ttu-id="d1337-137">Tato vlastnost je nastavena na <xref:System.ServiceModel.Activities.Send> aktivitu, která odeslala původní zprávu.</span><span class="sxs-lookup"><span data-stu-id="d1337-137">This property is set to the <xref:System.ServiceModel.Activities.Send> activity that sent the original message.</span></span> <span data-ttu-id="d1337-138">Služba používá také dvojici přidružených aktivit: <xref:System.ServiceModel.Activities.Receive> a <xref:System.ServiceModel.Activities.SendReply> .</span><span class="sxs-lookup"><span data-stu-id="d1337-138">The service also uses a pair of associated activities: <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="d1337-139">Tyto dvě aktivity jsou přidruženy <xref:System.ServiceModel.Activities.SendReply.Request%2A> vlastností.</span><span class="sxs-lookup"><span data-stu-id="d1337-139">These two activities are associated by the <xref:System.ServiceModel.Activities.SendReply.Request%2A> property.</span></span> <span data-ttu-id="d1337-140">Tato vlastnost je nastavena na <xref:System.ServiceModel.Activities.Receive> aktivitu, která přijala původní zprávu.</span><span class="sxs-lookup"><span data-stu-id="d1337-140">This property is set to the <xref:System.ServiceModel.Activities.Receive> activity that received the original message.</span></span> <span data-ttu-id="d1337-141"><xref:System.ServiceModel.Activities.ReceiveReply>Aktivity a <xref:System.ServiceModel.Activities.SendReply> , jako <xref:System.ServiceModel.Activities.Send> a <xref:System.ServiceModel.Activities.Receive> umožňují odeslat <xref:System.ServiceModel.Channels.Message> instanci nebo typ kontraktu zprávy.</span><span class="sxs-lookup"><span data-stu-id="d1337-141">The <xref:System.ServiceModel.Activities.ReceiveReply> and <xref:System.ServiceModel.Activities.SendReply> activities, like <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> allow you to send a <xref:System.ServiceModel.Channels.Message> instance or a message contract type.</span></span>

<span data-ttu-id="d1337-142">Z důvodu dlouhotrvajícího chodu pracovních postupů je důležité, aby duplexní vzor komunikace podporoval i dlouhotrvající konverzace.</span><span class="sxs-lookup"><span data-stu-id="d1337-142">Because of the long-running nature of workflows, it is important for the duplex pattern of communication to also support long-running conversations.</span></span> <span data-ttu-id="d1337-143">Aby bylo možné podporovat dlouhotrvající konverzace, klienti, kteří iniciují konverzaci, musí poskytovat službu s příležitostí k pozdějšímu volání, když budou data k dispozici.</span><span class="sxs-lookup"><span data-stu-id="d1337-143">To support long-running conversations, clients who initiate the conversation must provide the service with an opportunity to call it back at a later time when the data becomes available.</span></span> <span data-ttu-id="d1337-144">Například žádost o nákupní objednávku je odeslána ke schválení vedoucího, ale nemusí být zpracována za den, týden nebo dokonce rok; pracovní postup, který spravuje schválení nákupních objednávek, musí znát, aby se obnovil i po tom, co bylo schválení uděleno.</span><span class="sxs-lookup"><span data-stu-id="d1337-144">For example, a purchase order request is submitted for manager approval, but it might not be processed for a day, a week, or even a year; the workflow that manages the purchase order approval must know to resume after the approval is given.</span></span> <span data-ttu-id="d1337-145">Tento vzor duplexních komunikací je podporován v pracovních postupech pomocí korelace.</span><span class="sxs-lookup"><span data-stu-id="d1337-145">This pattern of duplex communication is supported in workflows using correlation.</span></span> <span data-ttu-id="d1337-146">K implementaci duplexního vzoru, použijte <xref:System.ServiceModel.Activities.Send> <xref:System.ServiceModel.Activities.Receive> aktivity a.</span><span class="sxs-lookup"><span data-stu-id="d1337-146">To implement a duplex pattern, use <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> activities.</span></span> <span data-ttu-id="d1337-147">V <xref:System.ServiceModel.Activities.Receive> aktivitě inicializujte korelační pomocí <xref:System.ServiceModel.Activities.CorrelationHandle> .</span><span class="sxs-lookup"><span data-stu-id="d1337-147">On the <xref:System.ServiceModel.Activities.Receive> activity, initialize a correlation using <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span> <span data-ttu-id="d1337-148">V <xref:System.ServiceModel.Activities.Send> sadě aktivit, kterou korelační zpracuje jako <xref:System.ServiceModel.Activities.Send.CorrelatesWith%2A> hodnotu vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="d1337-148">On the <xref:System.ServiceModel.Activities.Send> activity set that correlation handle as the <xref:System.ServiceModel.Activities.Send.CorrelatesWith%2A> property value.</span></span> <span data-ttu-id="d1337-149">Další informace najdete v tématu [trvalé duplexní přenos](durable-duplex-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="d1337-149">For more information, see [Durable Duplex](durable-duplex-correlation.md).</span></span>

> [!NOTE]
> <span data-ttu-id="d1337-150">Implementace oboustranného pracovního postupu pomocí korelace zpětného volání ("trvanlivé duplexní") je určená pro dlouhotrvající konverzace.</span><span class="sxs-lookup"><span data-stu-id="d1337-150">Workflow’s implementation of duplex using a callback correlation ("Durable Duplex") is intended for long-running conversations.</span></span> <span data-ttu-id="d1337-151">Nejedná se o stejný jako duplexní přenos WCF se kontrakty zpětného volání, kde je konverzace krátká (životnost kanálu).</span><span class="sxs-lookup"><span data-stu-id="d1337-151">This is not the same as WCF duplex with callback contracts where the conversation is short-running (the lifetime of the channel).</span></span>

## <a name="message-formatting-and-messaging-activities"></a><span data-ttu-id="d1337-152">Formátování zpráv a aktivity zasílání zpráv</span><span class="sxs-lookup"><span data-stu-id="d1337-152">Message formatting and messaging activities</span></span>

<span data-ttu-id="d1337-153"><xref:System.ServiceModel.Activities.Receive>Aktivity a <xref:System.ServiceModel.Activities.ReceiveReply> obsahují vlastnost s názvem `Content` .</span><span class="sxs-lookup"><span data-stu-id="d1337-153">The <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.ReceiveReply> activities have a property named `Content`.</span></span> <span data-ttu-id="d1337-154">Tato vlastnost je typu <xref:System.ServiceModel.Activities.ReceiveContent> a představuje data, která <xref:System.ServiceModel.Activities.Receive> <xref:System.ServiceModel.Activities.ReceiveReply> přijímá aktivita nebo aktivita.</span><span class="sxs-lookup"><span data-stu-id="d1337-154">This property is of type <xref:System.ServiceModel.Activities.ReceiveContent> and represents data the <xref:System.ServiceModel.Activities.Receive> or <xref:System.ServiceModel.Activities.ReceiveReply> activity receives.</span></span> <span data-ttu-id="d1337-155">.NET Framework definuje dvě související třídy s názvem <xref:System.ServiceModel.Activities.ReceiveMessageContent> a <xref:System.ServiceModel.Activities.ReceiveParametersContent> obě, které jsou odvozeny z <xref:System.ServiceModel.Activities.ReceiveContent> .</span><span class="sxs-lookup"><span data-stu-id="d1337-155">The .NET Framework defines two related classes called <xref:System.ServiceModel.Activities.ReceiveMessageContent> and <xref:System.ServiceModel.Activities.ReceiveParametersContent> both of which are derived from <xref:System.ServiceModel.Activities.ReceiveContent>.</span></span> <span data-ttu-id="d1337-156">Nastavte <xref:System.ServiceModel.Activities.Receive> <xref:System.ServiceModel.Activities.ReceiveReply> vlastnost aktivity nebo na `Content` instanci jednoho z těchto typů pro příjem dat do služby pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="d1337-156">Set the <xref:System.ServiceModel.Activities.Receive> or <xref:System.ServiceModel.Activities.ReceiveReply> activity’s `Content` property to an instance of one of these types to receive data into a workflow service.</span></span> <span data-ttu-id="d1337-157">Typ, který se má použít, závisí na typu dat, které aktivita přijímá.</span><span class="sxs-lookup"><span data-stu-id="d1337-157">The type to use depends upon the type of data the activity receives.</span></span> <span data-ttu-id="d1337-158">Pokud aktivita obdrží `Message` objekt nebo typ kontraktu zprávy, použijte <xref:System.ServiceModel.Activities.ReceiveMessageContent> .</span><span class="sxs-lookup"><span data-stu-id="d1337-158">If the activity receives a `Message` object or a message contract type, use <xref:System.ServiceModel.Activities.ReceiveMessageContent>.</span></span> <span data-ttu-id="d1337-159">Pokud aktivita obdrží sadu kontraktů dat nebo typů XML, které mohou být serializovány, použijte <xref:System.ServiceModel.Activities.ReceiveParametersContent> .</span><span class="sxs-lookup"><span data-stu-id="d1337-159">If the activity receives a set of data contract or XML types that can be serialized, use <xref:System.ServiceModel.Activities.ReceiveParametersContent>.</span></span> <span data-ttu-id="d1337-160"><xref:System.ServiceModel.Activities.ReceiveParametersContent>umožňuje odeslat více parametrů, zatímco <xref:System.ServiceModel.Activities.ReceiveMessageContent> umožňuje pouze odeslání jednoho objektu, zprávy (nebo typu kontraktu zprávy).</span><span class="sxs-lookup"><span data-stu-id="d1337-160"><xref:System.ServiceModel.Activities.ReceiveParametersContent> allows you to send multiple parameters, whereas <xref:System.ServiceModel.Activities.ReceiveMessageContent> only allows you to send one object, the message (or message contract type).</span></span>

> [!NOTE]
> <span data-ttu-id="d1337-161"><xref:System.ServiceModel.Activities.ReceiveMessageContent>lze také použít s jedním kontraktem dat nebo typem XML, který lze serializovat.</span><span class="sxs-lookup"><span data-stu-id="d1337-161"><xref:System.ServiceModel.Activities.ReceiveMessageContent> can also be used with a single data contract or XML type that can be serialized.</span></span> <span data-ttu-id="d1337-162">Rozdíl mezi použitím <xref:System.ServiceModel.Activities.ReceiveParametersContent> s jediným parametrem a objektem předaným přímo do <xref:System.ServiceModel.Activities.ReceiveMessageContent> je formát drátového formátu.</span><span class="sxs-lookup"><span data-stu-id="d1337-162">The difference between using <xref:System.ServiceModel.Activities.ReceiveParametersContent> with a single parameter and the object passed directly to <xref:System.ServiceModel.Activities.ReceiveMessageContent> is the wire-format.</span></span> <span data-ttu-id="d1337-163">Obsah parametru je zabalen v elementu XML, který odpovídá názvu operace a serializovaný objekt je zabalen v elementu XML pomocí názvu parametru (například `<Echo><msg>Hello, World</msg></Echo>` ).</span><span class="sxs-lookup"><span data-stu-id="d1337-163">The parameter’s content is wrapped in an XML element that corresponds to the operation name and the serialized object is wrapped in an XML element using the parameter name (for example, `<Echo><msg>Hello, World</msg></Echo>`).</span></span> <span data-ttu-id="d1337-164">Obsah zprávy není zabalen názvem operace.</span><span class="sxs-lookup"><span data-stu-id="d1337-164">The message content is not wrapped by the operation name.</span></span> <span data-ttu-id="d1337-165">Místo toho je serializovaný objekt umístěn v rámci elementu XML pomocí názvu typu kvalifikovaného pro XML (například `<string>Hello, World</string>` ).</span><span class="sxs-lookup"><span data-stu-id="d1337-165">Instead, the serialized object is placed within an XML element using the XML-qualified type name (for example, `<string>Hello, World</string>`).</span></span>

<span data-ttu-id="d1337-166"><xref:System.ServiceModel.Activities.Send>Aktivity a <xref:System.ServiceModel.Activities.SendReply> obsahují také vlastnost s názvem `Content` .</span><span class="sxs-lookup"><span data-stu-id="d1337-166">The <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.SendReply> activities also have a property named `Content`.</span></span> <span data-ttu-id="d1337-167">Tato vlastnost je typu <xref:System.ServiceModel.Activities.SendContent> a představuje data, která <xref:System.ServiceModel.Activities.Send> <xref:System.ServiceModel.Activities.SendReply> odesílá nebo aktivita.</span><span class="sxs-lookup"><span data-stu-id="d1337-167">This property is of type <xref:System.ServiceModel.Activities.SendContent> and represents data the <xref:System.ServiceModel.Activities.Send> or <xref:System.ServiceModel.Activities.SendReply> activity sends.</span></span> <span data-ttu-id="d1337-168">.NET Framework definuje dva související typy s názvem <xref:System.ServiceModel.Activities.SendMessageContent> a <xref:System.ServiceModel.Activities.SendParametersContent> obě odvozené z <xref:System.ServiceModel.Activities.SendContent> .</span><span class="sxs-lookup"><span data-stu-id="d1337-168">The .NET Framework defines two related types called <xref:System.ServiceModel.Activities.SendMessageContent> and <xref:System.ServiceModel.Activities.SendParametersContent> both of which are derived from <xref:System.ServiceModel.Activities.SendContent>.</span></span> <span data-ttu-id="d1337-169">Nastavte <xref:System.ServiceModel.Activities.Send> <xref:System.ServiceModel.Activities.SendReply> vlastnost aktivity nebo na `Content` instanci jednoho z těchto typů pro odesílání dat ze služby pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="d1337-169">Set the <xref:System.ServiceModel.Activities.Send> or <xref:System.ServiceModel.Activities.SendReply> activity’s `Content` property to an instance of one of these types to send data from a workflow service.</span></span> <span data-ttu-id="d1337-170">Typ, který se má použít, závisí na typu dat, které aktivita odesílá.</span><span class="sxs-lookup"><span data-stu-id="d1337-170">The type to use depends upon the type of data the activity sends.</span></span> <span data-ttu-id="d1337-171">Pokud aktivita odešle `Message` objekt nebo typ kontraktu zprávy, použijte <xref:System.ServiceModel.Activities.SendMessageContent> .</span><span class="sxs-lookup"><span data-stu-id="d1337-171">If the activity sends a `Message` object or a message contract type, use <xref:System.ServiceModel.Activities.SendMessageContent>.</span></span> <span data-ttu-id="d1337-172">Pokud aktivita odešle typ kontraktu dat, použijte <xref:System.ServiceModel.Activities.SendParametersContent> .</span><span class="sxs-lookup"><span data-stu-id="d1337-172">If the activity sends a data contract type use <xref:System.ServiceModel.Activities.SendParametersContent>.</span></span> <span data-ttu-id="d1337-173"><xref:System.ServiceModel.Activities.SendParametersContent>umožňuje odeslat více parametrů, zatímco <xref:System.ServiceModel.Activities.SendMessageContent> umožňuje pouze odeslat jeden objekt, zprávu (nebo typ kontraktu zprávy).</span><span class="sxs-lookup"><span data-stu-id="d1337-173"><xref:System.ServiceModel.Activities.SendParametersContent> allows you to send multiple parameters, whereas <xref:System.ServiceModel.Activities.SendMessageContent> only allows you to send one object, the message (or the message contract type).</span></span>

<span data-ttu-id="d1337-174">V případě imperativního programování pomocí aktivit zasílání zpráv, použijte obecné <xref:System.Activities.InArgument%601> a <xref:System.Activities.OutArgument%601> k zabalení objektů, které přiřadíte ke zprávě nebo parametrům <xref:System.ServiceModel.Activities.Send> pro <xref:System.ServiceModel.Activities.SendReply> aktivity,, <xref:System.ServiceModel.Activities.Receive> a <xref:System.ServiceModel.Activities.ReceiveReply> .</span><span class="sxs-lookup"><span data-stu-id="d1337-174">When programming imperatively with the messaging activities, you use the generic <xref:System.Activities.InArgument%601> and <xref:System.Activities.OutArgument%601> to wrap the objects you assign to the message or parameters properties of the <xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.Receive>, and <xref:System.ServiceModel.Activities.ReceiveReply> activities.</span></span> <span data-ttu-id="d1337-175">Použijte <xref:System.Activities.InArgument%601> pro <xref:System.ServiceModel.Activities.Send> aktivity a a <xref:System.ServiceModel.Activities.SendReply> <xref:System.Activities.OutArgument%601> pro aktivity a <xref:System.ServiceModel.Activities.Receive> <xref:System.ServiceModel.Activities.ReceiveReply> .</span><span class="sxs-lookup"><span data-stu-id="d1337-175">Use <xref:System.Activities.InArgument%601> for the <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.SendReply> activities and <xref:System.Activities.OutArgument%601> for <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.ReceiveReply> activities.</span></span> <span data-ttu-id="d1337-176">`In`argumenty se používají u aktivit odeslání, protože data se předávají do aktivit.</span><span class="sxs-lookup"><span data-stu-id="d1337-176">`In` arguments are used with the send activities because the data is being passed into the activities.</span></span> <span data-ttu-id="d1337-177">`Out`argumenty se používají s aktivitami Receive, protože data se předávají mimo aktivity, jak je znázorněno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="d1337-177">`Out` arguments are used with the receive activities because data is being passed out of the activities, as shown in the following example.</span></span>

```csharp
Receive reserveSeat = new Receive
{
    ...
    Content = new ReceiveParametersContent
    {
        Parameters =
        {
            { "ReservationInfo", new OutArgument<ReservationRequest>(reservationInfo) }
        }
    }
};
SendReply reserveSeat = new SendReply
{
    ...
    Request = reserveSeat,
    Content = new SendParametersContent
    {
        Parameters =
        {
            { "ReservationId", new InArgument<string>(reservationId) }
        }
    },
};
```

<span data-ttu-id="d1337-178">Při implementaci služby pracovního postupu, která definuje operaci požadavku a odpovědi, která vrací typ void, je nutné vytvořit instanci <xref:System.ServiceModel.Activities.SendReply> aktivity a nastavit <xref:System.ServiceModel.Activities.SendReply.Content%2A> vlastnost na prázdnou instanci jednoho z typů obsahu ( <xref:System.ServiceModel.Activities.SendMessageContent> nebo <xref:System.ServiceModel.Activities.SendParametersContent> ), jak je znázorněno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="d1337-178">When implementing a workflow service that defines a request/response operation that returns void, you must instantiate a <xref:System.ServiceModel.Activities.SendReply> activity and set the <xref:System.ServiceModel.Activities.SendReply.Content%2A> property to an empty instance of one of the content types (<xref:System.ServiceModel.Activities.SendMessageContent> or <xref:System.ServiceModel.Activities.SendParametersContent>) as shown in the following example.</span></span>

```csharp
Receive rcv = new Receive()
{
ServiceContractName = "IService",
OperationName = "NullReturningContract",
Content = new ReceiveParametersContent( new Dictionary<string, OutArgument>() { { "message", new OutArgument<string>() } } )
};
SendReply sr = new SendReply()
{
Request = rcv
   Content = new SendParametersContent();
};
```

## <a name="add-service-reference"></a><span data-ttu-id="d1337-179">Přidat odkaz na službu</span><span class="sxs-lookup"><span data-stu-id="d1337-179">Add service reference</span></span>

<span data-ttu-id="d1337-180">Při volání služby pracovního postupu z aplikace pracovního postupu aplikace Visual Studio 2012 generuje vlastní aktivity zasílání zpráv, které zapouzdřují obvyklé <xref:System.ServiceModel.Activities.Send> a <xref:System.ServiceModel.Activities.ReceiveReply> aktivity používané v MEP požadavků a odpovědí.</span><span class="sxs-lookup"><span data-stu-id="d1337-180">When calling a workflow service from a workflow application, Visual Studio 2012 generates custom messaging activities that encapsulate the usual <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.ReceiveReply> activities used in a request/reply MEP.</span></span> <span data-ttu-id="d1337-181">Chcete-li použít tuto funkci, klikněte pravým tlačítkem myši na projekt klienta v aplikaci Visual Studio a vyberte možnost **Přidat**  >  **odkaz na službu**.</span><span class="sxs-lookup"><span data-stu-id="d1337-181">To use this feature, right-click the client project in Visual Studio and select **Add** > **Service Reference**.</span></span> <span data-ttu-id="d1337-182">Do pole Adresa zadejte základní adresu služby a klikněte na Přejít.</span><span class="sxs-lookup"><span data-stu-id="d1337-182">Type the base address of the service in the address box and click Go.</span></span> <span data-ttu-id="d1337-183">Dostupné služby se zobrazí v poli **služby:** .</span><span class="sxs-lookup"><span data-stu-id="d1337-183">The available services are displayed in the **Services:** box.</span></span> <span data-ttu-id="d1337-184">Rozbalte uzel Služba, aby se zobrazily podporované smlouvy.</span><span class="sxs-lookup"><span data-stu-id="d1337-184">Expand the service node to display the contracts supported.</span></span> <span data-ttu-id="d1337-185">Vyberte kontrakt, který chcete volat, a v poli **operace** se zobrazí seznam dostupných operací.</span><span class="sxs-lookup"><span data-stu-id="d1337-185">Select the contract you want to call and the list of available operations is displayed in the **Operations** box.</span></span> <span data-ttu-id="d1337-186">Pak můžete zadat obor názvů pro generovanou aktivitu a kliknout na tlačítko **OK**.</span><span class="sxs-lookup"><span data-stu-id="d1337-186">You can then specify the namespace for the generated activity and click **OK**.</span></span> <span data-ttu-id="d1337-187">Pak se zobrazí dialogové okno s oznámením, že operace byla úspěšně dokončena a že generované vlastní aktivity jsou v sadě nástrojů po opětovném sestavení projektu.</span><span class="sxs-lookup"><span data-stu-id="d1337-187">You then see a dialog that says the operation completed successfully and that the generated custom activities are in the toolbox after you have rebuilt the project.</span></span> <span data-ttu-id="d1337-188">Pro každou operaci definovanou v kontraktu služby existuje jedna aktivita.</span><span class="sxs-lookup"><span data-stu-id="d1337-188">There is one activity for each operation defined on the service contract.</span></span> <span data-ttu-id="d1337-189">Po sestavení projektu můžete přetáhnout vlastní aktivity do pracovního postupu a nastavit všechny požadované vlastnosti v okně Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="d1337-189">After rebuilding the project you can drag and drop the custom activities onto your workflow and set any required properties in the properties window.</span></span>

## <a name="messaging-activity-templates"></a><span data-ttu-id="d1337-190">Šablony aktivity zasílání zpráv</span><span class="sxs-lookup"><span data-stu-id="d1337-190">Messaging activity templates</span></span>

<span data-ttu-id="d1337-191">Aby bylo možné nastavit MEP požadavků a odpovědí na snazšího klienta a službu, Visual Studio 2012 poskytuje dvě šablony aktivity zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="d1337-191">To make setting up a request/response MEP on the client and service easier, Visual Studio 2012 provides two messaging activity templates.</span></span> <span data-ttu-id="d1337-192">`System.ServiceModel.Activities.Design.ReceiveAndSendReply`se používá ve službě a `System.ServiceModel.Activities.Design.SendAndReceiveReply` používá se na klientovi.</span><span class="sxs-lookup"><span data-stu-id="d1337-192">`System.ServiceModel.Activities.Design.ReceiveAndSendReply` is used on the service and `System.ServiceModel.Activities.Design.SendAndReceiveReply` is used on the client.</span></span> <span data-ttu-id="d1337-193">V obou případech šablony přidávají příslušné aktivity zasílání zpráv do pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="d1337-193">In both cases the templates add the appropriate messaging activities to your workflow.</span></span> <span data-ttu-id="d1337-194">Ve službě `System.ServiceModel.Activities.Design.ReceiveAndSendReply` přidá <xref:System.ServiceModel.Activities.Receive> aktivitu následovanou <xref:System.ServiceModel.Activities.SendReply> aktivitou.</span><span class="sxs-lookup"><span data-stu-id="d1337-194">On the service, the `System.ServiceModel.Activities.Design.ReceiveAndSendReply` adds a <xref:System.ServiceModel.Activities.Receive> activity followed by a <xref:System.ServiceModel.Activities.SendReply> activity.</span></span> <span data-ttu-id="d1337-195"><xref:System.ServiceModel.Activities.SendReply.Request>Vlastnost je automaticky nastavena na <xref:System.ServiceModel.Activities.Receive> aktivitu.</span><span class="sxs-lookup"><span data-stu-id="d1337-195">The <xref:System.ServiceModel.Activities.SendReply.Request> property is automatically set to the <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="d1337-196">Na straně klienta `System.ServiceModel.Activities.Design.SendAndReceiveReply` přidá <xref:System.ServiceModel.Activities.Send> aktivitu, za kterou následuje <xref:System.ServiceModel.Activities.ReceiveReply> .</span><span class="sxs-lookup"><span data-stu-id="d1337-196">On the client, the `System.ServiceModel.Activities.Design.SendAndReceiveReply` adds a <xref:System.ServiceModel.Activities.Send> activity followed by a <xref:System.ServiceModel.Activities.ReceiveReply>.</span></span> <span data-ttu-id="d1337-197"><xref:System.ServiceModel.Activities.ReceiveReply.Request%2A>Vlastnost je automaticky nastavena na <xref:System.ServiceModel.Activities.Send> aktivitu.</span><span class="sxs-lookup"><span data-stu-id="d1337-197">The <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> property is automatically set to the <xref:System.ServiceModel.Activities.Send> activity.</span></span> <span data-ttu-id="d1337-198">Chcete-li použít tyto šablony, stačí přetáhnout příslušnou šablonu do pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="d1337-198">To use these templates, just drag and drop the appropriate template onto your workflow.</span></span>

## <a name="messaging-activities-and-transactions"></a><span data-ttu-id="d1337-199">Aktivity zasílání zpráv a transakce</span><span class="sxs-lookup"><span data-stu-id="d1337-199">Messaging activities and transactions</span></span>

<span data-ttu-id="d1337-200">Když se ve službě pracovního postupu provede volání služby, může být vhodné přesměrovat transakci na operaci služby.</span><span class="sxs-lookup"><span data-stu-id="d1337-200">When a call is made to a workflow service you may want to flow a transaction to the service operation.</span></span> <span data-ttu-id="d1337-201">Pokud to chcete udělat, umístěte <xref:System.ServiceModel.Activities.Receive> aktivitu v rámci <xref:System.ServiceModel.Activities.TransactedReceiveScope> aktivity.</span><span class="sxs-lookup"><span data-stu-id="d1337-201">To do this place the <xref:System.ServiceModel.Activities.Receive> activity within a <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity.</span></span> <span data-ttu-id="d1337-202"><xref:System.ServiceModel.Activities.TransactedReceiveScope>Aktivita obsahuje `Receive` aktivitu a tělo.</span><span class="sxs-lookup"><span data-stu-id="d1337-202">The <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity contains a `Receive` activity and a body.</span></span> <span data-ttu-id="d1337-203">Transakce, která se do služby Flowe, zůstává v průběhu provádění těla <xref:System.ServiceModel.Activities.TransactedReceiveScope> .</span><span class="sxs-lookup"><span data-stu-id="d1337-203">The transaction flowed to the service remains ambient throughout the execution of the body of the <xref:System.ServiceModel.Activities.TransactedReceiveScope>.</span></span> <span data-ttu-id="d1337-204">Transakce je dokončena, jakmile bude dokončeno vykonání těla.</span><span class="sxs-lookup"><span data-stu-id="d1337-204">The transaction is completed when the body finishes executing.</span></span> <span data-ttu-id="d1337-205">Další informace o pracovních postupech a transakcích najdete v tématu [transakce pracovního postupu](../../windows-workflow-foundation/workflow-transactions.md).</span><span class="sxs-lookup"><span data-stu-id="d1337-205">For more information about workflows and transactions see [Workflow Transactions](../../windows-workflow-foundation/workflow-transactions.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="d1337-206">Viz také</span><span class="sxs-lookup"><span data-stu-id="d1337-206">See also</span></span>

- [<span data-ttu-id="d1337-207">Jak odesílat a přijímat chyby ve službách pracovních postupů</span><span class="sxs-lookup"><span data-stu-id="d1337-207">How to Send and Receive Faults in Workflow Services</span></span>](https://go.microsoft.com/fwlink/?LinkId=189151)
- [<span data-ttu-id="d1337-208">Vytvoření dlouhodobé služby pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="d1337-208">Creating a Long-running Workflow Service</span></span>](creating-a-long-running-workflow-service.md)
