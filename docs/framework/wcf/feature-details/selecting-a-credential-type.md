---
title: Výběr typu pověření
description: Přečtěte si o přihlašovacích údajích, způsobu jejich použití ve službě WCF a o tom, jak vybrat správné přihlašovací údaje pro vaši aplikaci, aby bylo možné navázat deklaraci identity nebo schopností.
ms.date: 03/30/2017
ms.assetid: bf707063-3f30-4304-ab53-0e63413728a8
ms.openlocfilehash: 7a8a6880e5fc3982bb7f470c34a77c771c26effd
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/23/2020
ms.locfileid: "85244917"
---
# <a name="selecting-a-credential-type"></a><span data-ttu-id="3d317-103">Výběr typu pověření</span><span class="sxs-lookup"><span data-stu-id="3d317-103">Selecting a Credential Type</span></span>
<span data-ttu-id="3d317-104">*Přihlašovací údaje* jsou pomocí služby data Windows Communication Foundation (WCF) navázány buď požadované identity, nebo schopnosti.</span><span class="sxs-lookup"><span data-stu-id="3d317-104">*Credentials* are the data Windows Communication Foundation (WCF) uses to establish either a claimed identity or capabilities.</span></span> <span data-ttu-id="3d317-105">Například Passport je přihlašovací údaje, které jsou státními záležitostmi k prokázání občanství v zemi nebo oblasti.</span><span class="sxs-lookup"><span data-stu-id="3d317-105">For example, a passport is a credential a government issues to prove citizenship in a country or region.</span></span> <span data-ttu-id="3d317-106">V rámci WCF můžou přihlašovací údaje trvat mnoho forem, jako jsou tokeny uživatelských jmen a certifikáty X. 509.</span><span class="sxs-lookup"><span data-stu-id="3d317-106">In WCF, credentials can take many forms, such as user name tokens and X.509 certificates.</span></span> <span data-ttu-id="3d317-107">Toto téma popisuje přihlašovací údaje, jak se používají ve službě WCF a jak vybrat správné přihlašovací údaje pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="3d317-107">This topic discusses credentials, how they are used in WCF, and how to select the right credential for your application.</span></span>  
  
 <span data-ttu-id="3d317-108">V mnoha zemích a oblastech je licence ovladače příkladem přihlašovacích údajů.</span><span class="sxs-lookup"><span data-stu-id="3d317-108">In many countries and regions, a driver’s license is an example of a credential.</span></span> <span data-ttu-id="3d317-109">Licence obsahuje data, která představují identitu a možnosti osoby.</span><span class="sxs-lookup"><span data-stu-id="3d317-109">A license contains data that represents a person's identity and capabilities.</span></span> <span data-ttu-id="3d317-110">Obsahuje důkaz o vlastnictví ve formě obrázku svého držitele.</span><span class="sxs-lookup"><span data-stu-id="3d317-110">It contains proof of possession in the form of the possessor's picture.</span></span> <span data-ttu-id="3d317-111">Licence je vydaná důvěryhodnou autoritou, obvykle státním oddělením licencí.</span><span class="sxs-lookup"><span data-stu-id="3d317-111">The license is issued by a trusted authority, usually a governmental department of licensing.</span></span> <span data-ttu-id="3d317-112">Licence je zapečetěná a může obsahovat hologram, který ukazuje, že není úmyslně poškozen nebo padělaný.</span><span class="sxs-lookup"><span data-stu-id="3d317-112">The license is sealed, and can contain a hologram, showing that it has not been tampered with or counterfeited.</span></span>  
  
 <span data-ttu-id="3d317-113">Předložení přihlašovacích údajů zahrnuje prezentaci dat i kontrolu jejich držení.</span><span class="sxs-lookup"><span data-stu-id="3d317-113">Presenting a credential involves presenting both the data and proof of possession of the data.</span></span> <span data-ttu-id="3d317-114">WCF podporuje různé typy přihlašovacích údajů na úrovni zabezpečení Transport i zpráva.</span><span class="sxs-lookup"><span data-stu-id="3d317-114">WCF supports a variety of credential types at both the transport and message security levels.</span></span> <span data-ttu-id="3d317-115">Zvažte například dva typy přihlašovacích údajů, které podporuje WCF: uživatelské jméno a (X. 509) přihlašovací údaje certifikátu.</span><span class="sxs-lookup"><span data-stu-id="3d317-115">For example, consider two types of credentials supported in WCF: user name and (X.509) certificate credentials.</span></span>  
  
 <span data-ttu-id="3d317-116">Pro přihlašovací údaje uživatelského jména představuje uživatelské jméno deklaraci identity a heslo poskytne důkaz o vlastnictví.</span><span class="sxs-lookup"><span data-stu-id="3d317-116">For the user name credential, the user name represents the claimed identity and the password provides proof of possession.</span></span> <span data-ttu-id="3d317-117">Důvěryhodná autorita v tomto případě je systém, který ověřuje uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="3d317-117">The trusted authority in this case is the system that validates the user name and password.</span></span>  
  
 <span data-ttu-id="3d317-118">Pomocí přihlašovacích údajů certifikátu X. 509 se dá název subjektu, alternativní název subjektu nebo konkrétní pole v rámci certifikátu použít jako deklarace identity, zatímco jiná pole, například `Valid From` `Valid To` pole a, určují platnost certifikátu.</span><span class="sxs-lookup"><span data-stu-id="3d317-118">With an X.509 certificate credential, the subject name, subject alternative name or specific fields within the certificate can be used as claims of identity, while other fields, such as the `Valid From` and `Valid To` fields, specify the validity of the certificate.</span></span>  
  
## <a name="transport-credential-types"></a><span data-ttu-id="3d317-119">Typy přenosových údajů</span><span class="sxs-lookup"><span data-stu-id="3d317-119">Transport Credential Types</span></span>  
 <span data-ttu-id="3d317-120">V následující tabulce jsou uvedeny možné typy přihlašovacích údajů klienta, které mohou být použity v rámci vazby v režimu zabezpečení přenosu.</span><span class="sxs-lookup"><span data-stu-id="3d317-120">The following table shows the possible types of client credentials that can be used by a binding in transport security mode.</span></span> <span data-ttu-id="3d317-121">Při vytváření služby nastavte `ClientCredentialType` vlastnost na jednu z těchto hodnot, abyste určili typ přihlašovacích údajů, které musí klient zadat ke komunikaci s vaší službou.</span><span class="sxs-lookup"><span data-stu-id="3d317-121">When creating a service, set the `ClientCredentialType` property to one of these values to specify the type of credential that the client must supply to communicate with your service.</span></span> <span data-ttu-id="3d317-122">Můžete nastavit typy buď v kódu, nebo v konfiguračních souborech.</span><span class="sxs-lookup"><span data-stu-id="3d317-122">You can set the types in either code or configuration files.</span></span>  
  
|<span data-ttu-id="3d317-123">Nastavení</span><span class="sxs-lookup"><span data-stu-id="3d317-123">Setting</span></span>|<span data-ttu-id="3d317-124">Description</span><span class="sxs-lookup"><span data-stu-id="3d317-124">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="3d317-125">Žádné</span><span class="sxs-lookup"><span data-stu-id="3d317-125">None</span></span>|<span data-ttu-id="3d317-126">Určuje, že klient nemusí prezentovat žádné přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="3d317-126">Specifies that the client does not need to present any credential.</span></span> <span data-ttu-id="3d317-127">To se týká anonymního klienta.</span><span class="sxs-lookup"><span data-stu-id="3d317-127">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="3d317-128">Basic</span><span class="sxs-lookup"><span data-stu-id="3d317-128">Basic</span></span>|<span data-ttu-id="3d317-129">Určuje základní ověřování pro klienta.</span><span class="sxs-lookup"><span data-stu-id="3d317-129">Specifies basic authentication for the client.</span></span> <span data-ttu-id="3d317-130">Další informace najdete v tématu RFC2617 –[ověřování protokolu http: základní a ověřování algoritmem Digest](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span><span class="sxs-lookup"><span data-stu-id="3d317-130">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span></span>|  
|<span data-ttu-id="3d317-131">Otisk</span><span class="sxs-lookup"><span data-stu-id="3d317-131">Digest</span></span>|<span data-ttu-id="3d317-132">Určuje ověřování algoritmem Digest pro klienta.</span><span class="sxs-lookup"><span data-stu-id="3d317-132">Specifies digest authentication for the client.</span></span> <span data-ttu-id="3d317-133">Další informace najdete v tématu RFC2617 –[ověřování protokolu http: základní a ověřování algoritmem Digest](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span><span class="sxs-lookup"><span data-stu-id="3d317-133">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span></span>|  
|<span data-ttu-id="3d317-134">NTLM</span><span class="sxs-lookup"><span data-stu-id="3d317-134">Ntlm</span></span>|<span data-ttu-id="3d317-135">Určuje ověřování v systému NT LAN Manager (NTLM).</span><span class="sxs-lookup"><span data-stu-id="3d317-135">Specifies NT LAN Manager (NTLM) authentication.</span></span> <span data-ttu-id="3d317-136">Tato část se používá, pokud z nějakého důvodu nemůžete použít ověřování pomocí protokolu Kerberos.</span><span class="sxs-lookup"><span data-stu-id="3d317-136">This is used when you cannot use Kerberos authentication for some reason.</span></span> <span data-ttu-id="3d317-137">Můžete také zakázat použití jako Fallback nastavením <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> vlastnosti na `false` , což způsobí, že služba WCF vygeneruje výjimku, pokud se používá protokol NTLM.</span><span class="sxs-lookup"><span data-stu-id="3d317-137">You can also disable its use as a fallback by setting the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false`, which causes WCF to make a best-effort to throw an exception if NTLM is used.</span></span> <span data-ttu-id="3d317-138">Všimněte si, že nastavení této vlastnosti na `false` nemusí bránit v posílání přihlašovacích údajů NTLM přes tento kabel.</span><span class="sxs-lookup"><span data-stu-id="3d317-138">Note that setting this property to `false` may not prevent NTLM credentials from being sent over the wire.</span></span>|  
|<span data-ttu-id="3d317-139">Windows</span><span class="sxs-lookup"><span data-stu-id="3d317-139">Windows</span></span>|<span data-ttu-id="3d317-140">Určuje ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="3d317-140">Specifies Windows authentication.</span></span> <span data-ttu-id="3d317-141">Chcete-li zadat pouze protokol Kerberos v doméně systému Windows, nastavte <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> vlastnost na hodnotu `false` (výchozí nastavení je `true` ).</span><span class="sxs-lookup"><span data-stu-id="3d317-141">To specify only the Kerberos protocol on a Windows domain, set the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false` (the default is `true`).</span></span>|  
|<span data-ttu-id="3d317-142">Certifikát</span><span class="sxs-lookup"><span data-stu-id="3d317-142">Certificate</span></span>|<span data-ttu-id="3d317-143">Provádí ověřování klientů pomocí certifikátu X. 509.</span><span class="sxs-lookup"><span data-stu-id="3d317-143">Performs client authentication using an X.509 certificate.</span></span>|  
|<span data-ttu-id="3d317-144">Heslo</span><span class="sxs-lookup"><span data-stu-id="3d317-144">Password</span></span>|<span data-ttu-id="3d317-145">Uživatel musí zadávat uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="3d317-145">User must supply a user name and password.</span></span> <span data-ttu-id="3d317-146">Ověřte dvojici uživatelského jména a hesla pomocí ověřování systému Windows nebo jiného vlastního řešení.</span><span class="sxs-lookup"><span data-stu-id="3d317-146">Validate the user name/password pair using Windows authentication or another custom solution.</span></span>|  
  
### <a name="message-client-credential-types"></a><span data-ttu-id="3d317-147">Typy přihlašovacích údajů klienta zprávy</span><span class="sxs-lookup"><span data-stu-id="3d317-147">Message Client Credential Types</span></span>  
 <span data-ttu-id="3d317-148">Následující tabulka uvádí možné typy přihlašovacích údajů, které můžete použít při vytváření aplikace, která používá zabezpečení zpráv.</span><span class="sxs-lookup"><span data-stu-id="3d317-148">The following table shows the possible credential types that you can use when creating an application that uses message security.</span></span> <span data-ttu-id="3d317-149">Tyto hodnoty můžete použít buď v kódu, nebo v konfiguračních souborech.</span><span class="sxs-lookup"><span data-stu-id="3d317-149">You can use these values in either code or configuration files.</span></span>  
  
|<span data-ttu-id="3d317-150">Nastavení</span><span class="sxs-lookup"><span data-stu-id="3d317-150">Setting</span></span>|<span data-ttu-id="3d317-151">Description</span><span class="sxs-lookup"><span data-stu-id="3d317-151">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="3d317-152">Žádné</span><span class="sxs-lookup"><span data-stu-id="3d317-152">None</span></span>|<span data-ttu-id="3d317-153">Určuje, že klient nemusí prezentovat přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="3d317-153">Specifies that the client does not need to present a credential.</span></span> <span data-ttu-id="3d317-154">To se týká anonymního klienta.</span><span class="sxs-lookup"><span data-stu-id="3d317-154">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="3d317-155">Windows</span><span class="sxs-lookup"><span data-stu-id="3d317-155">Windows</span></span>|<span data-ttu-id="3d317-156">Umožňuje výměnu zpráv SOAP v rámci kontextu zabezpečení vytvořeného pomocí pověření systému Windows.</span><span class="sxs-lookup"><span data-stu-id="3d317-156">Allows SOAP message exchanges to occur under the security context established with a Windows credential.</span></span>|  
|<span data-ttu-id="3d317-157">Uživatelské jméno</span><span class="sxs-lookup"><span data-stu-id="3d317-157">Username</span></span>|<span data-ttu-id="3d317-158">Umožňuje službě, aby vyžadovala ověření klienta pomocí přihlašovacích údajů uživatelského jména.</span><span class="sxs-lookup"><span data-stu-id="3d317-158">Allows the service to require that the client be authenticated with a user name credential.</span></span> <span data-ttu-id="3d317-159">Všimněte si, že WCF nepovoluje žádné kryptografické operace s uživatelskými jmény, jako je například generování podpisu nebo šifrování dat.</span><span class="sxs-lookup"><span data-stu-id="3d317-159">Note that WCF does not allow any cryptographic operations with user names, such as generating a signature or encrypting data.</span></span> <span data-ttu-id="3d317-160">WCF zajišťuje zabezpečený přenos při použití přihlašovacích údajů uživatelského jména.</span><span class="sxs-lookup"><span data-stu-id="3d317-160">WCF ensures that the transport is secured when using user name credentials.</span></span>|  
|<span data-ttu-id="3d317-161">Certifikát</span><span class="sxs-lookup"><span data-stu-id="3d317-161">Certificate</span></span>|<span data-ttu-id="3d317-162">Umožňuje službě, aby vyžadovala ověření klienta pomocí certifikátu X. 509.</span><span class="sxs-lookup"><span data-stu-id="3d317-162">Allows the service to require that the client be authenticated using an X.509 certificate.</span></span>|  
|<span data-ttu-id="3d317-163">Vydaný token</span><span class="sxs-lookup"><span data-stu-id="3d317-163">Issued Token</span></span>|<span data-ttu-id="3d317-164">Vlastní typ tokenu konfigurovaný podle zásad zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="3d317-164">A custom token type configured according to a security policy.</span></span> <span data-ttu-id="3d317-165">Výchozí typ tokenu je SAML (Security Assert Markup Language).</span><span class="sxs-lookup"><span data-stu-id="3d317-165">The default token type is Security Assertions Markup Language (SAML).</span></span> <span data-ttu-id="3d317-166">Token je vydaný službou tokenů zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="3d317-166">The token is issued by a secure token service.</span></span> <span data-ttu-id="3d317-167">Další informace najdete v tématu [federace a vystavené tokeny](federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="3d317-167">For more information, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>|  
  
### <a name="negotiation-model-of-service-credentials"></a><span data-ttu-id="3d317-168">Model vyjednávání pověření služby</span><span class="sxs-lookup"><span data-stu-id="3d317-168">Negotiation Model of Service Credentials</span></span>  
 <span data-ttu-id="3d317-169">*Vyjednávání* je proces navázání vztahu důvěryhodnosti mezi klientem a službou výměnou přihlašovacích údajů.</span><span class="sxs-lookup"><span data-stu-id="3d317-169">*Negotiation* is the process of establishing trust between a client and a service by exchanging credentials.</span></span> <span data-ttu-id="3d317-170">Proces se provádí iterativním způsobem mezi klientem a službou, aby bylo možné zveřejnit pouze informace potřebné k dalšímu kroku procesu vyjednávání.</span><span class="sxs-lookup"><span data-stu-id="3d317-170">The process is performed iteratively between the client and the service, so as to disclose only the information necessary for the next step in the negotiation process.</span></span> <span data-ttu-id="3d317-171">V praxi je konečným výsledkem doručení přihlašovacích údajů služby klientovi, který se má použít v dalších operacích.</span><span class="sxs-lookup"><span data-stu-id="3d317-171">In practice, the end result is the delivery of a service's credential to the client to be used in subsequent operations.</span></span>  
  
 <span data-ttu-id="3d317-172">S jednou výjimkou jsou ve výchozím nastavení vazby poskytované systémem ve službě WCF vyjednávat pověření služby automaticky při použití zabezpečení na úrovni zprávy.</span><span class="sxs-lookup"><span data-stu-id="3d317-172">With one exception, by default the system-provided bindings in WCF negotiate the service credential automatically when using message-level security.</span></span> <span data-ttu-id="3d317-173">(Výjimka je <xref:System.ServiceModel.BasicHttpBinding> , která ve výchozím nastavení nepovoluje zabezpečení.) Pokud chcete toto chování zakázat, přečtěte si téma <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> a – <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="3d317-173">(The exception is the <xref:System.ServiceModel.BasicHttpBinding>, which does not enable security by default.) To disable this behavior, see the <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> and <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> properties.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="3d317-174">Když se zabezpečení SSL používá s .NET Framework 3,5 a novějším, používá klient služby WCF jak zprostředkující certifikáty v úložišti certifikátů, tak zprostředkující certifikáty přijaté během vyjednávání SSL k provedení ověření řetězu certifikátů v certifikátu služby.</span><span class="sxs-lookup"><span data-stu-id="3d317-174">When SSL security is used with .NET Framework 3.5 and later, a WCF client uses both the intermediate certificates in its certificate store and the intermediate certificates received during SSL negotiation to perform certificate chain validation on the service's certificate.</span></span> <span data-ttu-id="3d317-175">.NET Framework 3,0 používá pouze zprostředkující certifikáty nainstalované v místním úložišti certifikátů.</span><span class="sxs-lookup"><span data-stu-id="3d317-175">.NET Framework 3.0 only uses the intermediate certificates installed in the local certificate store.</span></span>  
  
#### <a name="out-of-band-negotiation"></a><span data-ttu-id="3d317-176">Vzdálené vyjednávání</span><span class="sxs-lookup"><span data-stu-id="3d317-176">Out-of-Band Negotiation</span></span>  
 <span data-ttu-id="3d317-177">Pokud je automatické vyjednávání zakázané, musí se přihlašovací údaje služby zřídit v klientovi předtím, než se odešlou zprávy do služby.</span><span class="sxs-lookup"><span data-stu-id="3d317-177">If automatic negotiation is disabled, the service credential must be provisioned at the client prior to sending any messages to the service.</span></span> <span data-ttu-id="3d317-178">Tato možnost se označuje také jako *vzdálené* zřizování.</span><span class="sxs-lookup"><span data-stu-id="3d317-178">This is also known as an *out-of-band* provisioning.</span></span> <span data-ttu-id="3d317-179">Pokud je například zadaný typ přihlašovacích údajů certifikát a automatické vyjednávání je zakázané, musí se klient obrátit na vlastníka služby a přijmout a nainstalovat certifikát na počítači, na kterém je spuštěná klientská aplikace.</span><span class="sxs-lookup"><span data-stu-id="3d317-179">For example, if the specified credential type is a certificate, and automatic negotiation is disabled, the client must contact the service owner to receive and install the certificate on the computer running the client application.</span></span> <span data-ttu-id="3d317-180">To se dá udělat například v případě, že chcete přesně určit, kteří klienti budou mít přístup ke službě ve scénáři Business-to-Business.</span><span class="sxs-lookup"><span data-stu-id="3d317-180">This can be done, for example, when you want to strictly control which clients can access a service in a business-to-business scenario.</span></span> <span data-ttu-id="3d317-181">Toto vzdálené vyjednávání se dá provést v e-mailu a certifikát X. 509 je uložený v úložišti certifikátů Windows pomocí nástroje, jako je modul snap-in Certifikáty konzoly MMC (Microsoft Management Console).</span><span class="sxs-lookup"><span data-stu-id="3d317-181">This out-of-band-negotiation can be done in email, and the X.509 certificate is stored in Windows certificate store, using a tool such as the Microsoft Management Console (MMC) Certificates snap-in.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="3d317-182">Tato <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> vlastnost slouží k poskytování služby s certifikátem, který byl dosažen prostřednictvím vzdáleného vyjednávání.</span><span class="sxs-lookup"><span data-stu-id="3d317-182">The <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property is used to provide the service with a certificate that was attained through out-of-band negotiation.</span></span> <span data-ttu-id="3d317-183">To je nezbytné při použití <xref:System.ServiceModel.BasicHttpBinding> třídy, protože vazba nepovoluje automatizované vyjednávání.</span><span class="sxs-lookup"><span data-stu-id="3d317-183">This is necessary when using the <xref:System.ServiceModel.BasicHttpBinding> class because the binding does not allow automated negotiation.</span></span> <span data-ttu-id="3d317-184">Tato vlastnost se používá také v nerelačním scénáři.</span><span class="sxs-lookup"><span data-stu-id="3d317-184">The property is also used in an uncorrelated duplex scenario.</span></span> <span data-ttu-id="3d317-185">Jedná se o scénář, kdy server pošle klientovi zprávu, aniž by musela nejdřív odeslat požadavek na server.</span><span class="sxs-lookup"><span data-stu-id="3d317-185">This is a scenario where a server sends a message to the client without requiring the client to send a request to the server first.</span></span> <span data-ttu-id="3d317-186">Vzhledem k tomu, že server nemá požadavek od klienta, musí použít certifikát klienta k zašifrování zprávy klientovi.</span><span class="sxs-lookup"><span data-stu-id="3d317-186">Because the server does not have a request from the client, it must use the client's certificate to encrypt the message to the client.</span></span>  
  
## <a name="setting-credential-values"></a><span data-ttu-id="3d317-187">Nastavení hodnot přihlašovacích údajů</span><span class="sxs-lookup"><span data-stu-id="3d317-187">Setting Credential Values</span></span>  
 <span data-ttu-id="3d317-188">Po výběru režimu zabezpečení musíte zadat vlastní přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="3d317-188">Once you select a security mode, you must specify the actual credentials.</span></span> <span data-ttu-id="3d317-189">Pokud je například typ přihlašovacích údajů nastavený na "certifikát", musíte ke službě nebo klientovi přidružit konkrétní přihlašovací údaje (třeba konkrétní certifikát X. 509).</span><span class="sxs-lookup"><span data-stu-id="3d317-189">For example, if the credential type is set to "certificate," then you must associate a specific credential (such as a specific X.509 certificate) with the service or client.</span></span>  
  
 <span data-ttu-id="3d317-190">V závislosti na tom, jestli programujete službu nebo klienta, se metoda nastavení hodnoty přihlašovacích údajů mírně liší.</span><span class="sxs-lookup"><span data-stu-id="3d317-190">Depending on whether you are programming a service or a client, the method for setting the credential value differs slightly.</span></span>  
  
### <a name="setting-service-credentials"></a><span data-ttu-id="3d317-191">Nastavování přihlašovacích údajů služby</span><span class="sxs-lookup"><span data-stu-id="3d317-191">Setting Service Credentials</span></span>  
 <span data-ttu-id="3d317-192">Pokud používáte transportní režim a jako přenos používáte protokol HTTP, musíte použít buď Internetová informační služba (IIS), nebo nakonfigurovat port s certifikátem.</span><span class="sxs-lookup"><span data-stu-id="3d317-192">If you are using transport mode, and you are using HTTP as the transport, you must use either Internet Information Services (IIS) or configure the port with a certificate.</span></span> <span data-ttu-id="3d317-193">Další informace najdete v tématu [Přehled zabezpečení přenosu](transport-security-overview.md) a [zabezpečení přenosu HTTP](http-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="3d317-193">For more information, see [Transport Security Overview](transport-security-overview.md) and [HTTP Transport Security](http-transport-security.md).</span></span>  
  
 <span data-ttu-id="3d317-194">Chcete-li zřídit službu s přihlašovacími údaji v kódu, vytvořte instanci <xref:System.ServiceModel.ServiceHost> třídy a určete příslušné přihlašovací údaje pomocí <xref:System.ServiceModel.Description.ServiceCredentials> třídy, která je přístupná prostřednictvím <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="3d317-194">To provision a service with credentials in code, create an instance of the <xref:System.ServiceModel.ServiceHost> class and specify the appropriate credential using the <xref:System.ServiceModel.Description.ServiceCredentials> class, accessed through the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="3d317-195">Nastavení certifikátu</span><span class="sxs-lookup"><span data-stu-id="3d317-195">Setting a Certificate</span></span>  
 <span data-ttu-id="3d317-196">Pokud chcete zřídit službu s certifikátem X. 509, který se má použít k ověření služby pro klienty, použijte <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> metodu <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> třídy.</span><span class="sxs-lookup"><span data-stu-id="3d317-196">To provision a service with an X.509 certificate to be used to authenticate the service to clients, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> class.</span></span>  
  
 <span data-ttu-id="3d317-197">Chcete-li zřídit službu s klientským certifikátem, použijte <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> metodu <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential> třídy.</span><span class="sxs-lookup"><span data-stu-id="3d317-197">To provision a service with a client certificate, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential> class.</span></span>  
  
#### <a name="setting-windows-credentials"></a><span data-ttu-id="3d317-198">Nastavení přihlašovacích údajů systému Windows</span><span class="sxs-lookup"><span data-stu-id="3d317-198">Setting Windows Credentials</span></span>  
 <span data-ttu-id="3d317-199">Pokud klient zadá platné uživatelské jméno a heslo, použije se k ověření klienta přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="3d317-199">If the client specifies a valid user name and password, that credential is used to authenticate the client.</span></span> <span data-ttu-id="3d317-200">V opačném případě se použijí přihlašovací údaje aktuálně přihlášeného uživatele.</span><span class="sxs-lookup"><span data-stu-id="3d317-200">Otherwise, the current logged-on user's credentials are used.</span></span>  
  
### <a name="setting-client-credentials"></a><span data-ttu-id="3d317-201">Nastavování přihlašovacích údajů klienta</span><span class="sxs-lookup"><span data-stu-id="3d317-201">Setting Client Credentials</span></span>  
 <span data-ttu-id="3d317-202">V rámci WCF klientské aplikace používají pro připojení ke službám klienta WCF.</span><span class="sxs-lookup"><span data-stu-id="3d317-202">In WCF, client applications use a WCF client to connect to services.</span></span> <span data-ttu-id="3d317-203">Každý klient je odvozen z <xref:System.ServiceModel.ClientBase%601> třídy a <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> vlastnost v klientovi umožňuje zadání různých hodnot přihlašovacích údajů klienta.</span><span class="sxs-lookup"><span data-stu-id="3d317-203">Every client derives from the <xref:System.ServiceModel.ClientBase%601> class, and the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property on the client allows the specification of various values of client credentials.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="3d317-204">Nastavení certifikátu</span><span class="sxs-lookup"><span data-stu-id="3d317-204">Setting a Certificate</span></span>  
 <span data-ttu-id="3d317-205">Chcete-li zřídit službu s certifikátem X. 509, který slouží k ověření klienta ke službě, použijte <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> metodu <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> třídy.</span><span class="sxs-lookup"><span data-stu-id="3d317-205">To provision a service with an X.509 certificate that is used to authenticate the client to a service, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> class.</span></span>  
  
## <a name="how-client-credentials-are-used-to-authenticate-a-client-to-the-service"></a><span data-ttu-id="3d317-206">Způsob použití přihlašovacích údajů klienta k ověření klienta ke službě</span><span class="sxs-lookup"><span data-stu-id="3d317-206">How Client Credentials Are Used to Authenticate a Client to the Service</span></span>  
 <span data-ttu-id="3d317-207">Informace o přihlašovacích údajích klienta požadovaných ke komunikaci se službou jsou k dispozici pomocí <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> vlastnosti nebo <xref:System.ServiceModel.ChannelFactory.Credentials%2A> Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="3d317-207">Client credential information required to communicate with a service is provided using either the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property or the <xref:System.ServiceModel.ChannelFactory.Credentials%2A> property.</span></span> <span data-ttu-id="3d317-208">Kanál zabezpečení používá tyto informace k ověření klienta ke službě.</span><span class="sxs-lookup"><span data-stu-id="3d317-208">The security channel uses this information to authenticate the client to the service.</span></span> <span data-ttu-id="3d317-209">Ověřování se provádí prostřednictvím jednoho ze dvou režimů:</span><span class="sxs-lookup"><span data-stu-id="3d317-209">Authentication is accomplished through one of two modes:</span></span>  
  
- <span data-ttu-id="3d317-210">Pověření klienta se používají před odesláním první zprávy pomocí instance klienta služby WCF pro vytvoření kontextu zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="3d317-210">The client credentials are used once before the first message is sent, using the WCF client instance to establish a security context.</span></span> <span data-ttu-id="3d317-211">Všechny zprávy aplikace jsou poté zabezpečeny prostřednictvím kontextu zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="3d317-211">All application messages are then secured through the security context.</span></span>  
  
- <span data-ttu-id="3d317-212">Pověření klienta slouží k ověření každé zprávy aplikace odeslané službě.</span><span class="sxs-lookup"><span data-stu-id="3d317-212">The client credentials are used to authenticate every application message sent to the service.</span></span> <span data-ttu-id="3d317-213">V takovém případě není mezi klientem a službou vytvořen žádný kontext.</span><span class="sxs-lookup"><span data-stu-id="3d317-213">In this case, no context is established between the client and the service.</span></span>  
  
### <a name="established-identities-cannot-be-changed"></a><span data-ttu-id="3d317-214">Zavedené identity nelze změnit.</span><span class="sxs-lookup"><span data-stu-id="3d317-214">Established Identities Cannot Be Changed</span></span>  
 <span data-ttu-id="3d317-215">Při použití první metody je vytvořený kontext trvale přidružen k identitě klienta.</span><span class="sxs-lookup"><span data-stu-id="3d317-215">When the first method is used, the established context is permanently associated with the client identity.</span></span> <span data-ttu-id="3d317-216">To znamená, že jakmile je kontext zabezpečení vytvořen, nelze změnit identitu přidruženou k klientovi.</span><span class="sxs-lookup"><span data-stu-id="3d317-216">That is, once the security context has been established, the identity associated with the client cannot be changed.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="3d317-217">Je potřeba vědět, kdy identitu nejde přepnout (to znamená, že při navazování kontextu zabezpečení je výchozí chování).</span><span class="sxs-lookup"><span data-stu-id="3d317-217">There is a situation to be aware of when the identity cannot be switched (that is, when establish security context is on, the default behavior).</span></span> <span data-ttu-id="3d317-218">Pokud vytvoříte službu, která komunikuje s druhou službou, nelze změnit identitu použitou k otevření klienta služby WCF pro druhou službu.</span><span class="sxs-lookup"><span data-stu-id="3d317-218">If you create a service that communicates with a second service, the identity used to open the WCF client to the second service cannot be changed.</span></span> <span data-ttu-id="3d317-219">Tato chyba se může nacházet v případě, že více klientů smí používat první službu a služba zosobňuje klienty při přístupu k druhé službě.</span><span class="sxs-lookup"><span data-stu-id="3d317-219">This becomes a problem if multiple clients are allowed to use the first service and the service impersonates the clients when accessing the second service.</span></span> <span data-ttu-id="3d317-220">Pokud služba znovu používá stejného klienta pro všechny volající, všechna volání druhé služby se provádějí v rámci identity prvního volajícího, který se použil k otevření klienta pro druhou službu.</span><span class="sxs-lookup"><span data-stu-id="3d317-220">If the service reuses the same client for all callers, all calls to the second service are done under the identity of the first caller that was used to open the client to the second service.</span></span> <span data-ttu-id="3d317-221">Jinými slovy, služba používá identitu prvního klienta, aby všichni klienti komunikovali s druhou službou.</span><span class="sxs-lookup"><span data-stu-id="3d317-221">In other words, the service uses the identity of the first client for all its clients to communicate with the second service.</span></span> <span data-ttu-id="3d317-222">To může vést ke zvýšení oprávnění.</span><span class="sxs-lookup"><span data-stu-id="3d317-222">This can lead to the elevation of privilege.</span></span> <span data-ttu-id="3d317-223">Pokud se nejedná o požadované chování vaší služby, musíte sledovat každého volajícího a vytvořit nového klienta k druhé službě pro každého jiného volajícího a zajistit, aby služba používala správného klienta pro správného volajícího, aby komunikoval s druhou službou.</span><span class="sxs-lookup"><span data-stu-id="3d317-223">If this is not the desired behavior of your service, you must track each caller and create a new client to the second service for every distinct caller, and ensure that the service uses only the right client for the right caller to communicate with the second service.</span></span>  
  
 <span data-ttu-id="3d317-224">Další informace o přihlašovacích údajích a zabezpečených relacích najdete v tématu [požadavky na zabezpečení pro zabezpečené relace](security-considerations-for-secure-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="3d317-224">For more information about credentials and secure sessions, see [Security Considerations for Secure Sessions](security-considerations-for-secure-sessions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3d317-225">Viz také</span><span class="sxs-lookup"><span data-stu-id="3d317-225">See also</span></span>

- <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType>
- <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Description.ClientCredentials.ClientCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.BasicHttpMessageSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverMsmq.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A?displayProperty=nameWithType>
- [<span data-ttu-id="3d317-226">Koncepce zabezpečení</span><span class="sxs-lookup"><span data-stu-id="3d317-226">Security Concepts</span></span>](security-concepts.md)
- [<span data-ttu-id="3d317-227">Zabezpečení služeb a klientů</span><span class="sxs-lookup"><span data-stu-id="3d317-227">Securing Services and Clients</span></span>](securing-services-and-clients.md)
- [<span data-ttu-id="3d317-228">Programování zabezpečení WCF</span><span class="sxs-lookup"><span data-stu-id="3d317-228">Programming WCF Security</span></span>](programming-wcf-security.md)
- [<span data-ttu-id="3d317-229">Zabezpečení přenosu HTTP</span><span class="sxs-lookup"><span data-stu-id="3d317-229">HTTP Transport Security</span></span>](http-transport-security.md)
