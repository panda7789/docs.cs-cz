---
title: Konfigurace HTTP a HTTPS
description: Naučte se konfigurovat HTTP/HTTPS, aby mohly komunikovat služby a klienty WCF. Nakonfigurujte registraci adresy URL a výjimku brány firewall pomocí Netsh.exe.
ms.date: 04/08/2019
helpviewer_keywords:
- configuring HTTP [WCF]
ms.assetid: b0c29a86-bc0c-41b3-bc1e-4eb5bb5714d4
ms.openlocfilehash: fbff78ff8e2c5c4fa73a56a3fdc15163596aa985
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/23/2020
ms.locfileid: "85245138"
---
# <a name="configuring-http-and-https"></a><span data-ttu-id="6eaed-104">Konfigurace HTTP a HTTPS</span><span class="sxs-lookup"><span data-stu-id="6eaed-104">Configuring HTTP and HTTPS</span></span>

<span data-ttu-id="6eaed-105">Služby a Klienti WCF můžou komunikovat přes protokol HTTP a HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6eaed-105">WCF services and clients can communicate over HTTP and HTTPS.</span></span> <span data-ttu-id="6eaed-106">Nastavení HTTP/HTTPS jsou nakonfigurovaná pomocí Internetová informační služba (IIS) nebo pomocí nástroje příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="6eaed-106">The HTTP/HTTPS settings are configured by using Internet Information Services (IIS) or through the use of a command-line tool.</span></span> <span data-ttu-id="6eaed-107">Když je služba WCF hostovaná v rámci nastavení IIS HTTP nebo HTTPS, můžete nakonfigurovat v rámci služby IIS (pomocí nástroje inetmgr.exe).</span><span class="sxs-lookup"><span data-stu-id="6eaed-107">When a WCF service is hosted under IIS HTTP or HTTPS settings can be configured within IIS (using the inetmgr.exe tool).</span></span> <span data-ttu-id="6eaed-108">Pokud je služba WCF v místním prostředí, nastavení HTTP nebo HTTPS se konfigurují pomocí nástroje příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="6eaed-108">If a WCF service is self-hosted, HTTP or HTTPS settings are configured by using a command-line tool.</span></span>

<span data-ttu-id="6eaed-109">Minimálně je potřeba nakonfigurovat registraci adresy URL a přidat výjimku brány firewall pro adresu URL, kterou bude služba používat.</span><span class="sxs-lookup"><span data-stu-id="6eaed-109">At a minimum, you want to configure a URL registration and add a Firewall exception for the URL your service will be using.</span></span> <span data-ttu-id="6eaed-110">Tato nastavení můžete nakonfigurovat pomocí nástroje Netsh.exe.</span><span class="sxs-lookup"><span data-stu-id="6eaed-110">You can configure these settings with the Netsh.exe tool.</span></span>

## <a name="configuring-namespace-reservations"></a><span data-ttu-id="6eaed-111">Konfigurace rezervací oboru názvů</span><span class="sxs-lookup"><span data-stu-id="6eaed-111">Configuring namespace reservations</span></span>

<span data-ttu-id="6eaed-112">Rezervace oboru názvů přiřadí práva pro část oboru názvů URL protokolu HTTP ke konkrétní skupině uživatelů.</span><span class="sxs-lookup"><span data-stu-id="6eaed-112">Namespace reservation assigns the rights for a portion of the HTTP URL namespace to a particular group of users.</span></span> <span data-ttu-id="6eaed-113">Rezervace dává těmto uživatelům právo vytvářet služby, které naslouchají této části oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="6eaed-113">A reservation gives those users the right to create services that listen on that portion of the namespace.</span></span> <span data-ttu-id="6eaed-114">Rezervace jsou předpony adres URL, což znamená, že rezervace pokrývá všechny dílčí cesty cesty rezervace.</span><span class="sxs-lookup"><span data-stu-id="6eaed-114">Reservations are URL prefixes, meaning that the reservation covers all subpaths of the reservation path.</span></span> <span data-ttu-id="6eaed-115">Rezervace oboru názvů povolují dva způsoby použití zástupných znaků.</span><span class="sxs-lookup"><span data-stu-id="6eaed-115">Namespace reservations permit two ways to use wildcards.</span></span> <span data-ttu-id="6eaed-116">Dokumentace k rozhraní API serveru HTTP popisuje [pořadí rozlišení mezi deklaracemi oboru názvů, které zahrnují zástupné znaky](/windows/desktop/Http/routing-incoming-requests).</span><span class="sxs-lookup"><span data-stu-id="6eaed-116">The HTTP Server API documentation describes the [order of resolution between namespace claims that involve wildcards](/windows/desktop/Http/routing-incoming-requests).</span></span>

<span data-ttu-id="6eaed-117">Běžící aplikace může vytvořit podobný požadavek na přidání registrace oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="6eaed-117">A running application can create a similar request to add namespace registrations.</span></span> <span data-ttu-id="6eaed-118">Registrace a rezervace jsou konkurenční pro části oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="6eaed-118">Registrations and reservations compete for portions of the namespace.</span></span> <span data-ttu-id="6eaed-119">Rezervace může mít přednost před registrací podle pořadí rozlišení [mezi deklaracemi oboru názvů, které zahrnují zástupné znaky](/windows/desktop/Http/routing-incoming-requests).</span><span class="sxs-lookup"><span data-stu-id="6eaed-119">A reservation may have precedence over a registration according to the order of resolution given in the [order of resolution between namespace claims that involve wildcards](/windows/desktop/Http/routing-incoming-requests).</span></span> <span data-ttu-id="6eaed-120">V takovém případě rezervace blokuje běžící aplikaci od přijímání požadavků.</span><span class="sxs-lookup"><span data-stu-id="6eaed-120">In this case, the reservation blocks the running application from receiving requests.</span></span>

<span data-ttu-id="6eaed-121">Následující příklad používá nástroj Netsh.exe:</span><span class="sxs-lookup"><span data-stu-id="6eaed-121">The following example uses the Netsh.exe tool:</span></span>

```console
netsh http add urlacl url=http://+:80/MyUri user=DOMAIN\user
```

<span data-ttu-id="6eaed-122">Tento příkaz přidá rezervaci adresy URL pro zadaný obor názvů URL pro účet doména \ uživatel.</span><span class="sxs-lookup"><span data-stu-id="6eaed-122">This command adds a URL reservation for the specified URL namespace for the DOMAIN\user account.</span></span> <span data-ttu-id="6eaed-123">Další informace o použití příkazu netsh získáte zadáním `netsh http add urlacl /?` příkazu do příkazového řádku a stisknutím klávesy ENTER.</span><span class="sxs-lookup"><span data-stu-id="6eaed-123">For more information on using the netsh command, type `netsh http add urlacl /?` in a command-prompt and press Enter.</span></span>

## <a name="configuring-a-firewall-exception"></a><span data-ttu-id="6eaed-124">Konfigurace výjimky brány firewall</span><span class="sxs-lookup"><span data-stu-id="6eaed-124">Configuring a firewall exception</span></span>

<span data-ttu-id="6eaed-125">Při samoobslužném hostování služby WCF, která komunikuje přes protokol HTTP, musí být do konfigurace brány firewall přidána výjimka umožňující příchozí připojení pomocí konkrétní adresy URL.</span><span class="sxs-lookup"><span data-stu-id="6eaed-125">When self-hosting a WCF service that communicates over HTTP, an exception must be added to the firewall configuration to allow inbound connections using a particular URL.</span></span>

## <a name="configuring-ssl-certificates"></a><span data-ttu-id="6eaed-126">Konfigurace certifikátů SSL</span><span class="sxs-lookup"><span data-stu-id="6eaed-126">Configuring SSL certificates</span></span>

<span data-ttu-id="6eaed-127">Protokol SSL (SSL (Secure Sockets Layer)) používá k ukládání šifrovacích klíčů certifikáty na klientovi a na serveru.</span><span class="sxs-lookup"><span data-stu-id="6eaed-127">The Secure Sockets Layer (SSL) protocol uses certificates on the client and server to store encryption keys.</span></span> <span data-ttu-id="6eaed-128">Server poskytuje svůj certifikát SSL, když je vytvořeno připojení, aby klient mohl ověřit identitu serveru.</span><span class="sxs-lookup"><span data-stu-id="6eaed-128">The server provides its SSL certificate when a connection is made so that the client can verify the server identity.</span></span> <span data-ttu-id="6eaed-129">Server taky může požádat o certifikát od klienta, aby se zajistilo vzájemné ověřování obou stran připojení.</span><span class="sxs-lookup"><span data-stu-id="6eaed-129">The server can also request a certificate from the client to provide mutual authentication of both sides of the connection.</span></span>

<span data-ttu-id="6eaed-130">Certifikáty jsou uložené v centralizovaném úložišti podle IP adresy a čísla portu připojení.</span><span class="sxs-lookup"><span data-stu-id="6eaed-130">Certificates are stored in a centralized store according to the IP address and port number of the connection.</span></span> <span data-ttu-id="6eaed-131">Speciální IP adresa 0.0.0.0 odpovídá libovolné IP adrese pro místní počítač.</span><span class="sxs-lookup"><span data-stu-id="6eaed-131">The special IP address 0.0.0.0 matches any IP address for the local machine.</span></span> <span data-ttu-id="6eaed-132">Všimněte si, že úložiště certifikátů nerozlišuje adresy URL na základě cesty.</span><span class="sxs-lookup"><span data-stu-id="6eaed-132">Note that the certificate store doesn't distinguish URLs based on the path.</span></span> <span data-ttu-id="6eaed-133">Služby se stejnou kombinací IP adresy a portu musí sdílet certifikáty, i když je cesta v adrese URL pro služby odlišná.</span><span class="sxs-lookup"><span data-stu-id="6eaed-133">Services with the same IP address and port combination must share certificates even if the path in the URL for the services is different.</span></span>

<span data-ttu-id="6eaed-134">Podrobné pokyny najdete v tématu [Postup: Konfigurace portu s certifikátem SSL](how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="6eaed-134">For step-by-step instructions, see [How to: Configure a Port with an SSL Certificate](how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>

## <a name="configuring-the-ip-listen-list"></a><span data-ttu-id="6eaed-135">Konfigurace seznamu naslouchání protokolu IP</span><span class="sxs-lookup"><span data-stu-id="6eaed-135">Configuring the IP Listen List</span></span>

<span data-ttu-id="6eaed-136">Rozhraní API serveru HTTP se váže jenom na IP adresu a port, jakmile uživatel zaregistruje adresu URL.</span><span class="sxs-lookup"><span data-stu-id="6eaed-136">The HTTP Server API only binds to an IP address and port once a user registers a URL.</span></span> <span data-ttu-id="6eaed-137">Rozhraní API serveru HTTP se ve výchozím nastavení váže k portu v adrese URL pro všechny IP adresy daného počítače.</span><span class="sxs-lookup"><span data-stu-id="6eaed-137">By default, the HTTP Server API binds to the port in the URL for all of the IP addresses of the machine.</span></span> <span data-ttu-id="6eaed-138">Konflikt nastane, pokud aplikace, která nepoužívá rozhraní API serveru HTTP, byla dříve vázaná na tuto kombinaci IP adresy a portu.</span><span class="sxs-lookup"><span data-stu-id="6eaed-138">A conflict arises if an application that doesn't use the HTTP Server API has previously bound to that combination of IP address and port.</span></span> <span data-ttu-id="6eaed-139">Seznam naslouchání protokolu IP umožňuje službám WCF koexistovat s aplikacemi, které používají port pro některé z IP adres počítače.</span><span class="sxs-lookup"><span data-stu-id="6eaed-139">The IP Listen List allows WCF services to coexist with applications that use a port for some of the IP addresses of the machine.</span></span> <span data-ttu-id="6eaed-140">Pokud seznam naslouchání protokolu IP obsahuje nějaké položky, rozhraní API serveru HTTP se váže pouze na tyto IP adresy, které seznam určuje.</span><span class="sxs-lookup"><span data-stu-id="6eaed-140">If the IP Listen List contains any entries, the HTTP Server API only binds to those IP addresses that the list specifies.</span></span> <span data-ttu-id="6eaed-141">Změna seznamu naslouchání protokolu IP vyžaduje oprávnění správce.</span><span class="sxs-lookup"><span data-stu-id="6eaed-141">Modifying the IP Listen List requires administrative privileges.</span></span>

<span data-ttu-id="6eaed-142">Pomocí nástroje Netsh upravte seznam IP listeny, jak je znázorněno v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="6eaed-142">Use the netsh tool to modify the IP Listen List, as shown in the following example:</span></span>

```console
netsh http add iplisten ipaddress=0.0.0.0:8000
```

## <a name="other-configuration-settings"></a><span data-ttu-id="6eaed-143">Další nastavení konfigurace</span><span class="sxs-lookup"><span data-stu-id="6eaed-143">Other configuration settings</span></span>

<span data-ttu-id="6eaed-144">Při použití nástroje <xref:System.ServiceModel.WSDualHttpBinding> připojení klienta používá výchozí hodnoty, které jsou kompatibilní s rezervacemi oboru názvů a bránou Windows Firewall.</span><span class="sxs-lookup"><span data-stu-id="6eaed-144">When using <xref:System.ServiceModel.WSDualHttpBinding>, the client connection uses defaults that are compatible with namespace reservations and the Windows firewall.</span></span> <span data-ttu-id="6eaed-145">Pokud se rozhodnete přizpůsobit základní adresu klienta duálního připojení, musíte také nakonfigurovat tato nastavení protokolu HTTP v klientovi tak, aby odpovídala nové adrese.</span><span class="sxs-lookup"><span data-stu-id="6eaed-145">If you choose to customize the client base address of a dual connection, then you also must configure these HTTP settings on the client to match the new address.</span></span>

<span data-ttu-id="6eaed-146">Rozhraní API serveru HTTP má několik pokročilých nastavení konfigurace, která nejsou k dispozici prostřednictvím HttpCfg.</span><span class="sxs-lookup"><span data-stu-id="6eaed-146">The HTTP Server API has some advanced configuration settings that aren't available through HttpCfg.</span></span> <span data-ttu-id="6eaed-147">Tato nastavení jsou zachována v registru a platí pro všechny aplikace spuštěné v systémech, které používají rozhraní API serveru HTTP.</span><span class="sxs-lookup"><span data-stu-id="6eaed-147">These settings are maintained in the registry and apply to all applications running on the systems that use the HTTP Server APIs.</span></span> <span data-ttu-id="6eaed-148">Informace o těchto nastaveních najdete v tématu [Http.sys nastavení registru pro službu IIS](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="6eaed-148">For information about these settings, see [Http.sys registry settings for IIS](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span></span> <span data-ttu-id="6eaed-149">Většina uživatelů tyto nastavení nepotřebuje měnit.</span><span class="sxs-lookup"><span data-stu-id="6eaed-149">Most users don't need to change these settings.</span></span>

## <a name="see-also"></a><span data-ttu-id="6eaed-150">Viz také</span><span class="sxs-lookup"><span data-stu-id="6eaed-150">See also</span></span>

- <xref:System.ServiceModel.WSDualHttpBinding>
- [<span data-ttu-id="6eaed-151">Postupy: Konfigurace portu s certifikátem SSL</span><span class="sxs-lookup"><span data-stu-id="6eaed-151">How to: Configure a Port with an SSL Certificate</span></span>](how-to-configure-a-port-with-an-ssl-certificate.md)
