---
title: Kompatibilita funkcí s částečnou důvěryhodností
ms.date: 03/30/2017
ms.assetid: a36a540b-1606-4e63-88e0-b7c59e0e6ab7
ms.openlocfilehash: adeef7a8fa12751c53e2096ae6bf844f091a5545
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/22/2019
ms.locfileid: "69965318"
---
# <a name="partial-trust-feature-compatibility"></a><span data-ttu-id="6da3c-102">Kompatibilita funkcí s částečnou důvěryhodností</span><span class="sxs-lookup"><span data-stu-id="6da3c-102">Partial Trust Feature Compatibility</span></span>
<span data-ttu-id="6da3c-103">Windows Communication Foundation (WCF) podporuje při spuštění v částečně důvěryhodném prostředí omezené podmnožinu funkcí.</span><span class="sxs-lookup"><span data-stu-id="6da3c-103">Windows Communication Foundation (WCF) supports a limited subset of functionality when running in a partially-trusted environment.</span></span> <span data-ttu-id="6da3c-104">Funkce podporované v částečném vztahu důvěryhodnosti jsou navržené kolem konkrétní sady scénářů, jak je popsáno v tématu [podporované scénáře nasazení](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md) .</span><span class="sxs-lookup"><span data-stu-id="6da3c-104">The features supported in partial trust are designed around a specific set of scenarios as described in the [Supported Deployment Scenarios](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md) topic.</span></span>  
  
## <a name="minimum-permission-requirements"></a><span data-ttu-id="6da3c-105">Minimální požadavky na oprávnění</span><span class="sxs-lookup"><span data-stu-id="6da3c-105">Minimum Permission Requirements</span></span>  
 <span data-ttu-id="6da3c-106">WCF podporuje podmnožinu funkcí v aplikacích spuštěných v jedné z následujících standardních pojmenovaných sad oprávnění:</span><span class="sxs-lookup"><span data-stu-id="6da3c-106">WCF supports a subset of features in applications running under either of the following standard named permission sets:</span></span>  
  
- <span data-ttu-id="6da3c-107">Oprávnění střední důvěryhodnosti</span><span class="sxs-lookup"><span data-stu-id="6da3c-107">Medium Trust permissions</span></span>  
  
- <span data-ttu-id="6da3c-108">Oprávnění pro internetovou zónu</span><span class="sxs-lookup"><span data-stu-id="6da3c-108">Internet Zone permissions</span></span>  
  
 <span data-ttu-id="6da3c-109">Pokus o použití WCF v částečně důvěryhodných aplikacích s více omezujícími oprávněními může za běhu způsobit výjimky zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="6da3c-109">Attempting to use WCF in partially-trusted applications with more restrictive permissions may result in security exceptions at runtime.</span></span>  
  
## <a name="contracts"></a><span data-ttu-id="6da3c-110">Kontrakty</span><span class="sxs-lookup"><span data-stu-id="6da3c-110">Contracts</span></span>  
 <span data-ttu-id="6da3c-111">U kontraktů se při spuštění s částečnou důvěryhodností řídí následující omezení:</span><span class="sxs-lookup"><span data-stu-id="6da3c-111">Contracts are subject to the following restrictions when running under partial trust:</span></span>  
  
- <span data-ttu-id="6da3c-112">Třída služby, která implementuje `[ServiceContract]` rozhraní, musí mít `public` `public` konstruktor.</span><span class="sxs-lookup"><span data-stu-id="6da3c-112">The service class that implements the `[ServiceContract]` interface must be `public` and have a `public` constructor.</span></span> <span data-ttu-id="6da3c-113">Pokud definuje `[OperationContract]` metody, musí být `public`.</span><span class="sxs-lookup"><span data-stu-id="6da3c-113">If it defines `[OperationContract]` methods, these must be `public`.</span></span> <span data-ttu-id="6da3c-114">`[ServiceContract]` Pokud místo toho implementuje rozhraní, implementace těchto metod mohou být explicitní nebo `private`, za předpokladu, `[ServiceContract]` že rozhraní `public`je.</span><span class="sxs-lookup"><span data-stu-id="6da3c-114">If it instead implements a `[ServiceContract]` interface, those method implementations can be explicit or `private`, provided that the `[ServiceContract]` interface is `public`.</span></span>  
  
- <span data-ttu-id="6da3c-115">Při použití `[ServiceKnownType]` atributu musí být `public`zadaná metoda.</span><span class="sxs-lookup"><span data-stu-id="6da3c-115">When using the `[ServiceKnownType]` attribute, the method specified must be `public`.</span></span>  
  
- <span data-ttu-id="6da3c-116">`[MessageContract]`třídy a jejich členové mohou být `public`.</span><span class="sxs-lookup"><span data-stu-id="6da3c-116">`[MessageContract]` classes and their members can be `public`.</span></span> <span data-ttu-id="6da3c-117">`internal` `internal` Pokud je `[MessageContract]` třída definovaná v sestavení aplikace, může být a mít členy.</span><span class="sxs-lookup"><span data-stu-id="6da3c-117">If the `[MessageContract]` class is defined in the application assembly it can be `internal` and have `internal` members.</span></span>  
  
## <a name="system-provided-bindings"></a><span data-ttu-id="6da3c-118">Vazby poskytované systémem</span><span class="sxs-lookup"><span data-stu-id="6da3c-118">System-Provided Bindings</span></span>  
 <span data-ttu-id="6da3c-119"><xref:System.ServiceModel.BasicHttpBinding> A<xref:System.ServiceModel.WebHttpBinding> jsou plně podporovány v prostředí s částečným vztahem důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="6da3c-119">The <xref:System.ServiceModel.BasicHttpBinding> and <xref:System.ServiceModel.WebHttpBinding> are fully supported in a partial trust environment.</span></span> <span data-ttu-id="6da3c-120">Podpora <xref:System.ServiceModel.WSHttpBinding> je podporována pouze pro režim zabezpečení přenosu.</span><span class="sxs-lookup"><span data-stu-id="6da3c-120">The <xref:System.ServiceModel.WSHttpBinding> is supported for Transport security mode only.</span></span>  
  
 <span data-ttu-id="6da3c-121">Vazby, které používají jiné přenosy než HTTP, jako <xref:System.ServiceModel.NetTcpBinding>například <xref:System.ServiceModel.NetNamedPipeBinding>, nebo <xref:System.ServiceModel.NetMsmqBinding>, nejsou podporovány při spuštění v prostředí s částečným vztahem důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="6da3c-121">Bindings that use transports other than HTTP, such as the <xref:System.ServiceModel.NetTcpBinding>, the <xref:System.ServiceModel.NetNamedPipeBinding>, or the <xref:System.ServiceModel.NetMsmqBinding>, are not supported when running in a partial trust environment.</span></span>  
  
## <a name="custom-bindings"></a><span data-ttu-id="6da3c-122">Vlastní vazby</span><span class="sxs-lookup"><span data-stu-id="6da3c-122">Custom Bindings</span></span>  
 <span data-ttu-id="6da3c-123">Vlastní vazby lze vytvořit a použít v prostředí s částečným vztahem důvěryhodnosti, ale musí splňovat omezení uvedená v této části.</span><span class="sxs-lookup"><span data-stu-id="6da3c-123">Custom bindings can be created and used in a partial trust environment, but must follow the restrictions specified in this section.</span></span>  
  
### <a name="transports"></a><span data-ttu-id="6da3c-124">Přenosy</span><span class="sxs-lookup"><span data-stu-id="6da3c-124">Transports</span></span>  
 <span data-ttu-id="6da3c-125">Jediné povolené prvky vazby přenosu jsou <xref:System.ServiceModel.Channels.HttpTransportBindingElement> a. <xref:System.ServiceModel.Channels.HttpsTransportBindingElement></span><span class="sxs-lookup"><span data-stu-id="6da3c-125">The only allowed transport binding elements are <xref:System.ServiceModel.Channels.HttpTransportBindingElement> and <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span></span>  
  
### <a name="encoders"></a><span data-ttu-id="6da3c-126">Kodérů</span><span class="sxs-lookup"><span data-stu-id="6da3c-126">Encoders</span></span>  
 <span data-ttu-id="6da3c-127">Jsou povoleny následující kodéry:</span><span class="sxs-lookup"><span data-stu-id="6da3c-127">The following encoders are allowed:</span></span>  
  
- <span data-ttu-id="6da3c-128">Kodér textu (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="6da3c-128">The text encoder (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span></span>  
  
- <span data-ttu-id="6da3c-129">Binární kodér (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="6da3c-129">The binary encoder (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span></span>  
  
- <span data-ttu-id="6da3c-130">Kodér webové zprávy (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="6da3c-130">The Web Message encoder (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span></span>  
  
 <span data-ttu-id="6da3c-131">Kodéry mechanismu optimalizace přenosu zpráv (MTOM) nejsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="6da3c-131">The Message Transmission Optimization Mechanism (MTOM) encoders are not supported.</span></span>  
  
### <a name="security"></a><span data-ttu-id="6da3c-132">Zabezpečení</span><span class="sxs-lookup"><span data-stu-id="6da3c-132">Security</span></span>  
 <span data-ttu-id="6da3c-133">Částečně důvěryhodné aplikace mohou používat funkce zabezpečení služby WCF na úrovni přenosu pro zabezpečení jejich komunikace.</span><span class="sxs-lookup"><span data-stu-id="6da3c-133">Partially-trusted applications can use WCF's transport-level security features for securing their communication.</span></span> <span data-ttu-id="6da3c-134">Zabezpečení na úrovni zpráv se nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="6da3c-134">Message-level security is not supported.</span></span> <span data-ttu-id="6da3c-135">Konfigurace vazby na použití zabezpečení na úrovni zprávy vede k výjimce za běhu.</span><span class="sxs-lookup"><span data-stu-id="6da3c-135">Configuring a binding to use message-level security results in an exception at runtime.</span></span>  
  
### <a name="unsupported-bindings"></a><span data-ttu-id="6da3c-136">Nepodporované vazby</span><span class="sxs-lookup"><span data-stu-id="6da3c-136">Unsupported Bindings</span></span>  
 <span data-ttu-id="6da3c-137">Vazby, které používají spolehlivé zasílání zpráv, transakce nebo zabezpečení na úrovni zpráv, nejsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="6da3c-137">Bindings that use reliable messaging, transactions, or message-level security are not supported.</span></span>  
  
## <a name="serialization"></a><span data-ttu-id="6da3c-138">Serializace</span><span class="sxs-lookup"><span data-stu-id="6da3c-138">Serialization</span></span>  
 <span data-ttu-id="6da3c-139"><xref:System.Runtime.Serialization.DataContractSerializer> Ajsoupodporoványvprostředísčástečným<xref:System.Xml.Serialization.XmlSerializer> vztahem důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="6da3c-139">Both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer> are supported in a partial trust environment.</span></span> <span data-ttu-id="6da3c-140">Použití <xref:System.Runtime.Serialization.DataContractSerializer> nástroje však podléhá následujícím podmínkám:</span><span class="sxs-lookup"><span data-stu-id="6da3c-140">However, use of the <xref:System.Runtime.Serialization.DataContractSerializer> is subject to the following conditions:</span></span>  
  
- <span data-ttu-id="6da3c-141">Všechny serializovatelné `[DataContract]` typy musí `public`být.</span><span class="sxs-lookup"><span data-stu-id="6da3c-141">All serializable `[DataContract]` types must be `public`.</span></span>  
  
- <span data-ttu-id="6da3c-142">Všechna serializovatelný `[DataMember]` pole nebo vlastnosti `[DataContract]` v typu musí být veřejná a musí mít oprávnění ke čtení a zápisu.</span><span class="sxs-lookup"><span data-stu-id="6da3c-142">All serializable `[DataMember]` fields or properties in a `[DataContract]` type must be public and read/write.</span></span> <span data-ttu-id="6da3c-143">Serializace a deserializace polí [jen pro čtení](https://go.microsoft.com/fwlink/?LinkID=98854) není podporována při spuštění WCF v částečně důvěryhodné aplikaci.</span><span class="sxs-lookup"><span data-stu-id="6da3c-143">The serialization and deserialization of [readonly](https://go.microsoft.com/fwlink/?LinkID=98854) fields is not supported when running WCF in a partially-trusted application.</span></span>  
  
- <span data-ttu-id="6da3c-144">Programovací `[Serializable]`model/ISerializable není podporován v prostředí s částečným vztahem důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="6da3c-144">The `[Serializable]`/ISerializable programming model is not supported in a partial trust environment.</span></span>  
  
- <span data-ttu-id="6da3c-145">V kódu nebo konfiguraci na úrovni počítače (Machine. config) musí být zadané známé typy.</span><span class="sxs-lookup"><span data-stu-id="6da3c-145">Known types must be specified in code or machine-level configuration (machine.config).</span></span> <span data-ttu-id="6da3c-146">Známé typy nelze v konfiguraci na úrovni aplikace zadat z bezpečnostních důvodů.</span><span class="sxs-lookup"><span data-stu-id="6da3c-146">Known types cannot be specified in application-level configuration for security reasons.</span></span>  
  
- <span data-ttu-id="6da3c-147">Typy, které <xref:System.Runtime.Serialization.IObjectReference> implementují výjimku, v částečně důvěryhodném prostředí.</span><span class="sxs-lookup"><span data-stu-id="6da3c-147">Types that implement <xref:System.Runtime.Serialization.IObjectReference> throw an exception in a partially-trusted environment.</span></span>  
  
 <span data-ttu-id="6da3c-148">Další informace o zabezpečení při bezpečném použití <xref:System.Runtime.Serialization.DataContractSerializer> v částečně důvěryhodné aplikaci najdete v části serializace v tématu osvědčené [postupy důvěryhodnosti](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md) .</span><span class="sxs-lookup"><span data-stu-id="6da3c-148">See the Serialization section in [Partial Trust Best Practices](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md) for more information about security when using <xref:System.Runtime.Serialization.DataContractSerializer> safely in a partially-trusted application.</span></span>  
  
### <a name="collection-types"></a><span data-ttu-id="6da3c-149">Typy kolekcí</span><span class="sxs-lookup"><span data-stu-id="6da3c-149">Collection Types</span></span>  
 <span data-ttu-id="6da3c-150">Některé typy kolekcí implementují <xref:System.Collections.Generic.IEnumerable%601> i <xref:System.Collections.IEnumerable>.</span><span class="sxs-lookup"><span data-stu-id="6da3c-150">Some collection types implement both <xref:System.Collections.Generic.IEnumerable%601> and <xref:System.Collections.IEnumerable>.</span></span> <span data-ttu-id="6da3c-151">Příklady zahrnují typy, které <xref:System.Collections.Generic.ICollection%601>implementují.</span><span class="sxs-lookup"><span data-stu-id="6da3c-151">Examples include types that implement <xref:System.Collections.Generic.ICollection%601>.</span></span> <span data-ttu-id="6da3c-152">Tyto typy mohou implementovat `public` `GetEnumerator()`implementaci `GetEnumerator()`a explicitní implementaci.</span><span class="sxs-lookup"><span data-stu-id="6da3c-152">Such types can implement a `public` implementation of `GetEnumerator()`, and an explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="6da3c-153">V tomto případě <xref:System.Runtime.Serialization.DataContractSerializer> vyvolá `public` implementaci `GetEnumerator()`a nikoli explicitní implementaci `GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="6da3c-153">In this case, <xref:System.Runtime.Serialization.DataContractSerializer> invokes the `public` implementation of `GetEnumerator()`, and not the explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="6da3c-154">Pokud `GetEnumerator()` žádná z `public` implementací není a všechny jsou explicitní `IEnumerable.GetEnumerator()`implementace, potom <xref:System.Runtime.Serialization.DataContractSerializer> vyvolá.</span><span class="sxs-lookup"><span data-stu-id="6da3c-154">If none of the `GetEnumerator()` implementations are `public` and all are explicit implementations, then <xref:System.Runtime.Serialization.DataContractSerializer> invokes `IEnumerable.GetEnumerator()`.</span></span>  
  
 <span data-ttu-id="6da3c-155">Pro typy kolekce, pokud je WCF spuštěno v prostředí s částečným vztahem důvěryhodnosti `GetEnumerator()` , pokud `public`žádná implementace není nebo žádná z nich není explicitní implementací rozhraní, je vyvolána výjimka zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="6da3c-155">For collection types when WCF is running in a partial trust environment, if none of the `GetEnumerator()` implementations are `public`, or none of them are explicit interface implementations, then a security exception is thrown.</span></span>  
  
### <a name="netdatacontractserializer"></a><span data-ttu-id="6da3c-156">NetDataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="6da3c-156">NetDataContractSerializer</span></span>  
 <span data-ttu-id="6da3c-157"><xref:System.Collections.Generic.List%601>Mnoho typů kolekcí .NET Framework <xref:System.Collections.Hashtable> <xref:System.Collections.ArrayList> <xref:System.Runtime.Serialization.NetDataContractSerializer> , jako jsou, a,nejsoupodporoványvčástečnémvztahudůvěryhodnosti.<xref:System.Collections.Generic.Dictionary%602></span><span class="sxs-lookup"><span data-stu-id="6da3c-157">Many .NET Framework collection types such as <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> and <xref:System.Collections.Hashtable> are not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span> <span data-ttu-id="6da3c-158">Tyto typy mají `[Serializable]` atribut nastaven a jak je uvedeno dříve v sekci serializace, tento atribut není podporován v částečném vztahu důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="6da3c-158">These types have the `[Serializable]` attribute set, and as stated previously in the Serialization section, this attribute is not supported in partial trust.</span></span> <span data-ttu-id="6da3c-159">Zpracovává kolekce zvláštním způsobem a je tak schopné toto omezení obejít, <xref:System.Runtime.Serialization.NetDataContractSerializer> ale nemá žádný takový mechanismus pro obcházení tohoto omezení. <xref:System.Runtime.Serialization.DataContractSerializer></span><span class="sxs-lookup"><span data-stu-id="6da3c-159">The <xref:System.Runtime.Serialization.DataContractSerializer> treats collections in a special way and is thus able to get around this restriction, but the <xref:System.Runtime.Serialization.NetDataContractSerializer> has no such mechanism to circumvent this restriction.</span></span>  
  
 <span data-ttu-id="6da3c-160">Typ není podporován <xref:System.Runtime.Serialization.NetDataContractSerializer> v částečném vztahu důvěryhodnosti. <xref:System.DateTimeOffset></span><span class="sxs-lookup"><span data-stu-id="6da3c-160">The <xref:System.DateTimeOffset> type is not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span>  
  
 <span data-ttu-id="6da3c-161">Náhradu nelze použít s <xref:System.Runtime.Serialization.NetDataContractSerializer> ( <xref:System.Runtime.Serialization.SurrogateSelector> pomocí mechanismu) při spuštění v částečném vztahu důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="6da3c-161">A surrogate cannot be used with the <xref:System.Runtime.Serialization.NetDataContractSerializer> (using the <xref:System.Runtime.Serialization.SurrogateSelector> mechanism) when running in partial trust.</span></span> <span data-ttu-id="6da3c-162">Všimněte si, že toto omezení platí pro použití náhradního, nikoli jeho serializace.</span><span class="sxs-lookup"><span data-stu-id="6da3c-162">Note that this restriction applies to using a surrogate, not to serializing it.</span></span>  
  
## <a name="enabling-common-behaviors-to-run"></a><span data-ttu-id="6da3c-163">Povolení spouštění běžných chování</span><span class="sxs-lookup"><span data-stu-id="6da3c-163">Enabling Common Behaviors to Run</span></span>  
 <span data-ttu-id="6da3c-164">Chování služby nebo koncového bodu není označené <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atributem (APTCA), který se přidá [ \<do oddílu CommonBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/commonbehaviors.md) konfiguračního souboru, se nespustí, když se aplikace spustí v prostředí s částečným vztahem důvěryhodnosti a ne. Pokud k tomu dojde, je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="6da3c-164">Service or endpoint behaviors not marked with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute (APTCA) that are added to the [\<commonBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/commonbehaviors.md) section of a configuration file are not run when the application runs in a partial trust environment and no exception is thrown when this occurs.</span></span> <span data-ttu-id="6da3c-165">Aby se vynutilo spouštění běžných chování, musíte udělat jednu z následujících možností:</span><span class="sxs-lookup"><span data-stu-id="6da3c-165">To enforce the running of common behaviors, you must do one of the following options:</span></span>  
  
- <span data-ttu-id="6da3c-166">Označte běžné chování <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atributem tak, aby mohl běžet při nasazení jako aplikace s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="6da3c-166">Mark your common behavior with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute so that it can run when deployed as a partial trust application.</span></span> <span data-ttu-id="6da3c-167">Všimněte si, že položku registru lze nastavit na počítači, aby bylo možné zabránit spuštění sestavení označených APTCA.</span><span class="sxs-lookup"><span data-stu-id="6da3c-167">Note that a registry entry can be set on the computer to prevent APTCA-marked assemblies from running.</span></span> <span data-ttu-id="6da3c-168">.</span><span class="sxs-lookup"><span data-stu-id="6da3c-168">.</span></span>  
  
- <span data-ttu-id="6da3c-169">Zajistěte, aby byla aplikace nasazena jako plně důvěryhodná aplikace, kterou uživatelé nemohou měnit nastavení zabezpečení přístupu kódu pro spuštění aplikace v prostředí s částečným vztahem důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="6da3c-169">Ensure that if the application is deployed as a fully-trusted application that users cannot modify the code-access security settings to run the application in a partial trust environment.</span></span> <span data-ttu-id="6da3c-170">Pokud to tak mohou učinit, chování nebude spuštěno a není vyvolána žádná výjimka.</span><span class="sxs-lookup"><span data-stu-id="6da3c-170">If they can do so, the behavior does not run and no exception is thrown.</span></span> <span data-ttu-id="6da3c-171">Pro zajištění této možnosti si přečtěte možnost **LevelFinal** pomocí [nástroje Caspol. exe (nástroj Code Access Security Policy Tool)](../../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="6da3c-171">To ensure this, see the **levelfinal** option using [Caspol.exe (Code Access Security Policy Tool)](../../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
 <span data-ttu-id="6da3c-172">Příklad běžného chování naleznete v tématu [How to: Zamčení koncových bodů v](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md)podniku.</span><span class="sxs-lookup"><span data-stu-id="6da3c-172">For an example of a common behavior, see [How to: Lock Down Endpoints in the Enterprise](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span></span>  
  
## <a name="configuration"></a><span data-ttu-id="6da3c-173">Konfiguraci</span><span class="sxs-lookup"><span data-stu-id="6da3c-173">Configuration</span></span>  
 <span data-ttu-id="6da3c-174">V případě jedné výjimky může částečně důvěryhodný kód načíst pouze konfigurační oddíly WCF v místním `app.config` souboru.</span><span class="sxs-lookup"><span data-stu-id="6da3c-174">With one exception, partially-trusted code can only load WCF configuration sections in the local `app.config` file.</span></span> <span data-ttu-id="6da3c-175">Aby bylo možné načíst konfigurační oddíly WCF, které odkazují na oddíly WCF v souboru Machine. config nebo v kořenovém souboru Web. config, je nutné ConfigurationPermission (bez omezení).</span><span class="sxs-lookup"><span data-stu-id="6da3c-175">To load WCF configuration sections that reference WCF sections in machine.config or in a root web.config file requires ConfigurationPermission(Unrestricted).</span></span> <span data-ttu-id="6da3c-176">Bez tohoto oprávnění, odkazy na konfigurační oddíly WCF (chování, vazby) mimo místní konfigurační soubor způsobí výjimku při načtení konfigurace.</span><span class="sxs-lookup"><span data-stu-id="6da3c-176">Without this permission, references to WCF configuration sections (behaviors, bindings) outside of the local configuration file results in an exception when the configuration is loaded.</span></span>  
  
 <span data-ttu-id="6da3c-177">Jedinou výjimkou je konfigurace známého typu pro serializaci, jak je popsáno v části serializace v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="6da3c-177">The one exception is known-type configuration for serialization, as described in the Serialization section of this topic.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="6da3c-178">Rozšíření konfigurace jsou podporována pouze v případě, že je spuštěna s úplným vztahem důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="6da3c-178">Configuration extensions are only supported when running under Full Trust.</span></span>  
  
## <a name="diagnostics"></a><span data-ttu-id="6da3c-179">Diagnostika</span><span class="sxs-lookup"><span data-stu-id="6da3c-179">Diagnostics</span></span>  
  
### <a name="event-logging"></a><span data-ttu-id="6da3c-180">Protokolování událostí</span><span class="sxs-lookup"><span data-stu-id="6da3c-180">Event Logging</span></span>  
 <span data-ttu-id="6da3c-181">Omezené protokolování událostí je podporováno v rámci částečné důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="6da3c-181">Limited event logging is supported under partial trust.</span></span> <span data-ttu-id="6da3c-182">Do protokolu událostí se zaznamenávají jenom chyby aktivace služby a trasování nebo selhání protokolování zpráv.</span><span class="sxs-lookup"><span data-stu-id="6da3c-182">Only service activation faults and tracing/message logging failures are logged to the Event Log.</span></span> <span data-ttu-id="6da3c-183">Maximální počet událostí, které mohou být protokolovány procesem, je 5, aby nedocházelo k nadměrnému zapisování zpráv do protokolu událostí.</span><span class="sxs-lookup"><span data-stu-id="6da3c-183">The maximum number of events that can be logged by a process is 5, to avoid writing excessive messages to the Event Log.</span></span>  
  
### <a name="message-logging"></a><span data-ttu-id="6da3c-184">Protokolování zpráv</span><span class="sxs-lookup"><span data-stu-id="6da3c-184">Message Logging</span></span>  
 <span data-ttu-id="6da3c-185">Protokolování zpráv nefunguje, když je WCF spuštěné v prostředí s částečným vztahem důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="6da3c-185">Message logging does not work when WCF is run in a partial trust environment.</span></span> <span data-ttu-id="6da3c-186">Pokud je tato možnost povolená v rámci částečné důvěryhodnosti, aktivace služby se nezdaří, ale nezaprotokoluje se žádná zpráva.</span><span class="sxs-lookup"><span data-stu-id="6da3c-186">If enabled under partial trust, it does not fail service activation, but no message is logged.</span></span>  
  
### <a name="tracing"></a><span data-ttu-id="6da3c-187">Trasování</span><span class="sxs-lookup"><span data-stu-id="6da3c-187">Tracing</span></span>  
 <span data-ttu-id="6da3c-188">Funkce omezeného trasování je k dispozici při spuštění v prostředí s částečným vztahem důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="6da3c-188">Restricted tracing functionality is available when running in a partial trust environment.</span></span> <span data-ttu-id="6da3c-189">V elementu <`listeners`> v konfiguračním souboru jsou <xref:System.Diagnostics.TextWriterTraceListener> jediné typy, které lze přidat, a nové <xref:System.Diagnostics.EventSchemaTraceListener>.</span><span class="sxs-lookup"><span data-stu-id="6da3c-189">In the <`listeners`> element in the configuration file, the only types that you can add are <xref:System.Diagnostics.TextWriterTraceListener> and the new <xref:System.Diagnostics.EventSchemaTraceListener>.</span></span> <span data-ttu-id="6da3c-190">Použití standardu <xref:System.Diagnostics.XmlWriterTraceListener> může mít za následek neúplné nebo nesprávné protokoly.</span><span class="sxs-lookup"><span data-stu-id="6da3c-190">Use of the standard <xref:System.Diagnostics.XmlWriterTraceListener> may result in incomplete or incorrect logs.</span></span>  
  
 <span data-ttu-id="6da3c-191">Podporované zdroje trasování:</span><span class="sxs-lookup"><span data-stu-id="6da3c-191">Supported trace sources are:</span></span>  
  
- <xref:System.ServiceModel>  
  
- <xref:System.Runtime.Serialization>  
  
- <span data-ttu-id="6da3c-192"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors>a .<xref:System.IdentityModel.Tokens></span><span class="sxs-lookup"><span data-stu-id="6da3c-192"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors>, and <xref:System.IdentityModel.Tokens>.</span></span>  
  
 <span data-ttu-id="6da3c-193">Následující zdroje trasování nejsou podporovány:</span><span class="sxs-lookup"><span data-stu-id="6da3c-193">The following trace sources are not supported:</span></span>  
  
- <span data-ttu-id="6da3c-194">CardSpace</span><span class="sxs-lookup"><span data-stu-id="6da3c-194">CardSpace</span></span>  
  
- <xref:System.IO.Log>  

- <span data-ttu-id="6da3c-195">[System.ServiceModel.Internal.TransactionBridge](https://docs.microsoft.com/previous-versions/aa346556(v=vs.110))]</span><span class="sxs-lookup"><span data-stu-id="6da3c-195">[System.ServiceModel.Internal.TransactionBridge](https://docs.microsoft.com/previous-versions/aa346556(v=vs.110))]</span></span>
  
 <span data-ttu-id="6da3c-196">Následující členy <xref:System.Diagnostics.TraceOptions> výčtu by neměly být zadány:</span><span class="sxs-lookup"><span data-stu-id="6da3c-196">The following members of the <xref:System.Diagnostics.TraceOptions> enumeration should not be specified:</span></span>  
  
- <xref:System.Diagnostics.TraceOptions.Callstack?displayProperty=nameWithType>  
  
- <xref:System.Diagnostics.TraceOptions.ProcessId?displayProperty=nameWithType>  
  
 <span data-ttu-id="6da3c-197">Při použití trasování v prostředí s částečným vztahem důvěryhodnosti se ujistěte, že má aplikace dostatečná oprávnění k uložení výstupu naslouchacího procesu trasování.</span><span class="sxs-lookup"><span data-stu-id="6da3c-197">When using tracing in a partial trust environment, ensure that the application has sufficient permissions to store the output of the trace listener.</span></span> <span data-ttu-id="6da3c-198">Například při použití <xref:System.Diagnostics.TextWriterTraceListener> pro zápis výstupu trasování do textového souboru, zajistěte, aby aplikace měla potřebné FileIOPermission potřebné k úspěšnému zápisu do trasovacího souboru.</span><span class="sxs-lookup"><span data-stu-id="6da3c-198">For example, when using the <xref:System.Diagnostics.TextWriterTraceListener> to write trace output to a text file, ensure that the application has the necessary FileIOPermission required to successfully write to the trace file.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="6da3c-199">Aby nedošlo k zaplavování trasovacích souborů s duplicitními chybami, WCF zakáže trasování prostředku nebo akce po prvním selhání zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="6da3c-199">To avoid flooding the trace files with duplicate errors, WCF disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="6da3c-200">K dispozici je jedno trasování výjimek pro každý neúspěšný přístup k prostředkům, při prvním pokusu o přístup k prostředku nebo provedení akce.</span><span class="sxs-lookup"><span data-stu-id="6da3c-200">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="wcf-service-host"></a><span data-ttu-id="6da3c-201">Hostitel služby WCF</span><span class="sxs-lookup"><span data-stu-id="6da3c-201">WCF Service Host</span></span>  
 <span data-ttu-id="6da3c-202">Hostitel služby WCF nepodporuje částečnou důvěryhodnost.</span><span class="sxs-lookup"><span data-stu-id="6da3c-202">WCF service host does not support partial trust.</span></span> <span data-ttu-id="6da3c-203">Pokud chcete používat službu WCF v částečném vztahu důvěryhodnosti, nepoužívejte k sestavení vaší služby šablonu projektu knihovny služby WCF v aplikaci Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="6da3c-203">If you want to use a WCF service in partial trust, do not use the WCF Service Library Project template in Visual Studio to build your service.</span></span> <span data-ttu-id="6da3c-204">Místo toho vytvořte nový web v aplikaci Visual Studio tak, že vyberete šablonu webu služby WCF, která může hostovat službu na webovém serveru, na kterém je podporována částečná důvěryhodnost WCF.</span><span class="sxs-lookup"><span data-stu-id="6da3c-204">Instead, create a new Web site in Visual Studio by choosing the WCF service Web site template, which can host the service in a Web server on which WCF partial trust is supported.</span></span>  
  
## <a name="other-limitations"></a><span data-ttu-id="6da3c-205">Další omezení</span><span class="sxs-lookup"><span data-stu-id="6da3c-205">Other Limitations</span></span>  
 <span data-ttu-id="6da3c-206">Služba WCF je obecně omezená na požadavky na zabezpečení, které na ně ukládají hostitelské aplikace.</span><span class="sxs-lookup"><span data-stu-id="6da3c-206">WCF is generally limited to the security considerations imposed upon it by the hosting application.</span></span> <span data-ttu-id="6da3c-207">Pokud je například WCF hostováno v aplikaci prohlížeče XAML (XBAP), vztahuje se na ně omezení pro XBAP, jak je popsáno v [Windows Presentation Foundation zabezpečení částečně důvěryhodného vztahu důvěryhodnosti](https://go.microsoft.com/fwlink/?LinkId=89138).</span><span class="sxs-lookup"><span data-stu-id="6da3c-207">For example, if WCF is hosted in a XAML Browser Application (XBAP), it is subject to XBAP limitations, as described in [Windows Presentation Foundation Partial Trust Security](https://go.microsoft.com/fwlink/?LinkId=89138).</span></span>  
  
 <span data-ttu-id="6da3c-208">Následující další funkce nejsou při spuštění Indigo2 v prostředí s částečným vztahem důvěryhodnosti povolené:</span><span class="sxs-lookup"><span data-stu-id="6da3c-208">The following additional features are not enabled when running indigo2 in a partial trust environment:</span></span>  
  
- <span data-ttu-id="6da3c-209">Rozhraní WMI (Windows Management Instrumentation) (WMI)</span><span class="sxs-lookup"><span data-stu-id="6da3c-209">Windows Management Instrumentation (WMI)</span></span>  
  
- <span data-ttu-id="6da3c-210">Protokolování událostí je povoleno pouze částečně (viz část diskuze v části **Diagnostika** ).</span><span class="sxs-lookup"><span data-stu-id="6da3c-210">Event logging is only partially enabled (see discussion in **Diagnostics** section).</span></span>  
  
- <span data-ttu-id="6da3c-211">Čítače výkonu</span><span class="sxs-lookup"><span data-stu-id="6da3c-211">Performance counters</span></span>  
  
 <span data-ttu-id="6da3c-212">Použití funkcí WCF, které nejsou podporované v prostředí s částečným vztahem důvěryhodnosti, může za běhu způsobit výjimky.</span><span class="sxs-lookup"><span data-stu-id="6da3c-212">Use of WCF features that are not supported in a partial trust environment may result in exceptions at runtime.</span></span>  
  
## <a name="unlisted-features"></a><span data-ttu-id="6da3c-213">Funkce, které nejsou v seznamu</span><span class="sxs-lookup"><span data-stu-id="6da3c-213">Unlisted Features</span></span>  
 <span data-ttu-id="6da3c-214">Nejlepším způsobem, jak zjistit, že část informací nebo akce není k dispozici při spuštění v prostředí s částečným vztahem důvěryhodnosti, je pokusit se o přístup k prostředku nebo `try` provést akci uvnitř bloku `catch` a pak chybu.</span><span class="sxs-lookup"><span data-stu-id="6da3c-214">The best way to discover that a piece of information or action is unavailable when running in a partial trust environment is to try to access the resource or do the action inside of a `try` block, and then `catch` the failure.</span></span> <span data-ttu-id="6da3c-215">Aby nedošlo k zaplavování trasovacích souborů s duplicitními chybami, WCF zakáže trasování prostředku nebo akce po prvním selhání zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="6da3c-215">To avoid flooding the trace files with duplicate errors, WCF disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="6da3c-216">K dispozici je jedno trasování výjimek pro každý neúspěšný přístup k prostředkům, při prvním pokusu o přístup k prostředku nebo provedení akce.</span><span class="sxs-lookup"><span data-stu-id="6da3c-216">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6da3c-217">Viz také:</span><span class="sxs-lookup"><span data-stu-id="6da3c-217">See also</span></span>

- <xref:System.ServiceModel.Channels.HttpTransportBindingElement>
- <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>
- <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>
- <xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>
- [<span data-ttu-id="6da3c-218">Podporované scénáře nasazení</span><span class="sxs-lookup"><span data-stu-id="6da3c-218">Supported Deployment Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md)
- [<span data-ttu-id="6da3c-219">Osvědčené postupy pro částečnou důvěryhodnost</span><span class="sxs-lookup"><span data-stu-id="6da3c-219">Partial Trust Best Practices</span></span>](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md)
