---
title: Zabezpečení přenosu HTTP
ms.date: 03/30/2017
ms.assetid: d3439262-c58e-4d30-9f2b-a160170582bb
ms.openlocfilehash: 4bd3fbfd39538eee4344ef0a8ca4fe61b372ab70
ms.sourcegitcommit: 09b4090b78f52fd09b0e430cd4b26576f1fdf96e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/17/2020
ms.locfileid: "76212136"
---
# <a name="http-transport-security"></a><span data-ttu-id="83cd1-102">Zabezpečení přenosu HTTP</span><span class="sxs-lookup"><span data-stu-id="83cd1-102">HTTP Transport Security</span></span>
<span data-ttu-id="83cd1-103">Při použití protokolu HTTP jako přenosu je zabezpečení zajišťováno pomocí implementace SSL (Secure Sockets Layer) (SSL).</span><span class="sxs-lookup"><span data-stu-id="83cd1-103">When using HTTP as the transport, security is provided by a Secure Sockets Layer (SSL) implementation.</span></span> <span data-ttu-id="83cd1-104">Protokol SSL se v síti Internet často používá k ověření služby klientovi a pak k zajištění důvěrnosti (šifrování) kanálu.</span><span class="sxs-lookup"><span data-stu-id="83cd1-104">SSL is widely used on the Internet to authenticate a service to a client, and then to provide confidentiality (encryption) to the channel.</span></span> <span data-ttu-id="83cd1-105">V tomto tématu se dozvíte, jak funguje SSL a jak je implementováno v Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="83cd1-105">This topic explains how SSL works and how it is implemented in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="basic-ssl"></a><span data-ttu-id="83cd1-106">Základní SSL</span><span class="sxs-lookup"><span data-stu-id="83cd1-106">Basic SSL</span></span>  
 <span data-ttu-id="83cd1-107">Princip fungování SSL je nejlépe vysvětlený obvyklým scénářem, v tomto případě na webu banky.</span><span class="sxs-lookup"><span data-stu-id="83cd1-107">How SSL works is best explained through a typical scenario, in this case, a bank's Web site.</span></span> <span data-ttu-id="83cd1-108">Lokalita umožňuje zákazníkům přihlásit se pomocí uživatelského jména a hesla.</span><span class="sxs-lookup"><span data-stu-id="83cd1-108">The site allows a customer to log on with a user name and password.</span></span> <span data-ttu-id="83cd1-109">Po ověření může uživatel provádět transakce, jako je například zobrazení zůstatků účtů, platby za placené platby a přesun peněz z jednoho účtu na jiný.</span><span class="sxs-lookup"><span data-stu-id="83cd1-109">After being authenticated, the user can perform transactions, such as view account balances, pay bills, and move money from one account to another.</span></span>  
  
 <span data-ttu-id="83cd1-110">Když uživatel poprvé navštíví lokalitu, mechanismus SSL zahájí řadu vyjednávání označovaných jako *handshake*s klientem uživatele (v tomto případě Internet Exploreru).</span><span class="sxs-lookup"><span data-stu-id="83cd1-110">When a user first visits the site, the SSL mechanism begins a series of negotiations, called a *handshake*, with the user's client (in this case, Internet Explorer).</span></span> <span data-ttu-id="83cd1-111">Protokol SSL nejprve ověřuje bankovní web u zákazníka.</span><span class="sxs-lookup"><span data-stu-id="83cd1-111">SSL first authenticates the bank site to the customer.</span></span> <span data-ttu-id="83cd1-112">Toto je zásadní krok, protože zákazníci musí nejdřív zjistit, že komunikují se skutečnou lokalitou, a ne falešnou identitou, která je vyzkouší při psaní do svého uživatelského jména a hesla.</span><span class="sxs-lookup"><span data-stu-id="83cd1-112">This is an essential step because customers must first know that they are communicating with the actual site, and not a spoof that tries to lure them into typing in their user name and password.</span></span> <span data-ttu-id="83cd1-113">SSL toto ověřování provádí pomocí certifikátu SSL poskytnutého důvěryhodnou autoritou, jako je například VeriSign.</span><span class="sxs-lookup"><span data-stu-id="83cd1-113">SSL does this authentication by using an SSL certificate provided by a trusted authority, such as VeriSign.</span></span> <span data-ttu-id="83cd1-114">Tato logika bude vypadat takto: VeriSign ručí za identitu webu banky.</span><span class="sxs-lookup"><span data-stu-id="83cd1-114">The logic goes like this: VeriSign vouches for the identity of the bank site.</span></span> <span data-ttu-id="83cd1-115">Vzhledem k tomu, že Internet Explorer důvěřuje společnosti VeriSign, je tato lokalita důvěryhodná.</span><span class="sxs-lookup"><span data-stu-id="83cd1-115">Because Internet Explorer trusts VeriSign, the site is trusted.</span></span> <span data-ttu-id="83cd1-116">Pokud chcete kontrolovat u společnosti VeriSign, můžete tak učinit také kliknutím na logo společnosti VeriSign.</span><span class="sxs-lookup"><span data-stu-id="83cd1-116">If you want to check with VeriSign, you can do so as well by clicking on the VeriSign logo.</span></span> <span data-ttu-id="83cd1-117">Který prezentuje prohlášení o pravosti s datem vypršení platnosti a jeho vystavení pro (bankovní Web).</span><span class="sxs-lookup"><span data-stu-id="83cd1-117">That presents a statement of authenticity with its expiration date and who it is issued to (the bank site).</span></span>  
  
 <span data-ttu-id="83cd1-118">Aby bylo možné zahájit zabezpečenou relaci, klient pošle ekvivalent "Hello" serveru společně se seznamem kryptografických algoritmů, které může použít k podepsání, generování hodnot hash a k šifrování a dešifrování pomocí.</span><span class="sxs-lookup"><span data-stu-id="83cd1-118">To initiate a secure session, the client sends the equivalent of a "hello" to the server along with a list of cryptographic algorithms it can use to sign, generate hashes, and encrypt and decrypt with.</span></span> <span data-ttu-id="83cd1-119">V reakci web pošle zpět potvrzení a zvolí jednu ze sad algoritmů.</span><span class="sxs-lookup"><span data-stu-id="83cd1-119">In response, the site sends back an acknowledgment and its choice of one of the algorithms suites.</span></span> <span data-ttu-id="83cd1-120">Během této počáteční metody handshake obě strany odesílají a přijímají hodnoty nonce.</span><span class="sxs-lookup"><span data-stu-id="83cd1-120">During this initial handshake, both parties send and receive nonces.</span></span> <span data-ttu-id="83cd1-121">*Hodnota nonce* je náhodně generovaná část dat, která se používá v kombinaci s veřejným klíčem lokality k vytvoření hodnoty hash.</span><span class="sxs-lookup"><span data-stu-id="83cd1-121">A *nonce* is a randomly generated piece of data that is used, in combination with the site's public key, to create a hash.</span></span> <span data-ttu-id="83cd1-122">*Hodnota hash* je nové číslo, které je odvozeno od dvou čísel pomocí standardního algoritmu, jako je SHA1.</span><span class="sxs-lookup"><span data-stu-id="83cd1-122">A *hash* is a new number that is derived from the two numbers using a standard algorithm, such as SHA1.</span></span> <span data-ttu-id="83cd1-123">(Klient a lokalita také vyměňuje zprávy, aby se dohodli, který algoritmus hash použít.) Hodnota hash je jedinečná a používá se pouze pro relaci mezi klientem a serverem k šifrování a dešifrování zpráv.</span><span class="sxs-lookup"><span data-stu-id="83cd1-123">(The client and the site also exchange messages to agree which hash algorithm to use.) The hash is unique and is used only for the session between the client and the site to encrypt and decrypt messages.</span></span> <span data-ttu-id="83cd1-124">Klient i služba mají původní hodnotu nonce a veřejný klíč certifikátu, takže obě strany mohou vygenerovat stejnou hodnotu hash.</span><span class="sxs-lookup"><span data-stu-id="83cd1-124">Both client and service have the original nonce and the certificate's public key, so both sides can generate the same hash.</span></span> <span data-ttu-id="83cd1-125">Proto klient ověří hodnotu hash odeslanou službou pomocí (a) pomocí schváleného algoritmu, který vypočítá hodnotu hash z dat, a (b) porovná je hodnotě hash odesílané službou; Pokud se shoduje shoda, pak klient zaručuje, že hodnota hash nebyla úmyslně poškozena.</span><span class="sxs-lookup"><span data-stu-id="83cd1-125">Therefore, the client validates the hash sent by the service by (a) using the agreed upon algorithm to calculate the hash from the data, and (b) comparing it to the hash sent by the service; if the two match, then the client has assurance that the hash has not been tampered with.</span></span> <span data-ttu-id="83cd1-126">Klient pak může tuto hodnotu hash použít jako klíč k šifrování zprávy, která obsahuje ještě jinou novou hodnotu hash.</span><span class="sxs-lookup"><span data-stu-id="83cd1-126">The client can then use this hash as a key to encrypt a message that contains yet another new hash.</span></span> <span data-ttu-id="83cd1-127">Služba může zprávu dešifrovat pomocí algoritmu hash a obnovit tento druhý-konečný hash.</span><span class="sxs-lookup"><span data-stu-id="83cd1-127">The service can decrypt the message using the hash, and recover this second-to-final hash.</span></span> <span data-ttu-id="83cd1-128">Shromážděné informace (hodnoty nonce, Public Key a další data) jsou nyní na obou stranách známy a lze vytvořit konečnou hodnotu hash (nebo hlavní klíč).</span><span class="sxs-lookup"><span data-stu-id="83cd1-128">The accumulated information (nonces, public key, and other data) is now known to both sides, and a final hash (or master key) can be created.</span></span> <span data-ttu-id="83cd1-129">Tento finální klíč se pošle zašifrovaný pomocí hodnoty hash Next-Last.</span><span class="sxs-lookup"><span data-stu-id="83cd1-129">This final key is sent encrypted using the next-to-last hash.</span></span> <span data-ttu-id="83cd1-130">Hlavní klíč se pak použije k šifrování a dešifrování zpráv pro zbytek relace.</span><span class="sxs-lookup"><span data-stu-id="83cd1-130">The master key is then used to encrypt and decrypt messages for the rest of the session.</span></span> <span data-ttu-id="83cd1-131">Vzhledem k tomu, že klient i služba používají stejný klíč, nazývá se taky *klíč relace*.</span><span class="sxs-lookup"><span data-stu-id="83cd1-131">Because both client and service use the same key, this is also called a *session key*.</span></span>  
  
 <span data-ttu-id="83cd1-132">Klíč relace je také charakterizován jako symetrický klíč nebo "sdílený tajný klíč".</span><span class="sxs-lookup"><span data-stu-id="83cd1-132">The session key is also characterized as a symmetric key, or a "shared secret."</span></span> <span data-ttu-id="83cd1-133">Existence symetrického klíče je důležité, protože snižuje výpočet vyžadovaný oběma stranami transakce.</span><span class="sxs-lookup"><span data-stu-id="83cd1-133">Having a symmetric key is important because it reduces the computation required by both sides of the transaction.</span></span> <span data-ttu-id="83cd1-134">Pokud každá zpráva vyvolala nové výměny hodnot nonce a hodnot hash, výkon by se zhoršil.</span><span class="sxs-lookup"><span data-stu-id="83cd1-134">If every message demanded a new exchange of nonces and hashes, performance would deteriorate.</span></span> <span data-ttu-id="83cd1-135">Proto je konečným cílem protokolu SSL použití symetrického klíče, který umožňuje volně přetékání zpráv mezi dvěma stranami s větším stupněm zabezpečení a efektivity.</span><span class="sxs-lookup"><span data-stu-id="83cd1-135">Therefore, the ultimate goal of SSL is to use a symmetric key that allows messages to flow freely between the two sides with a greater degree of security and efficiency.</span></span>  
  
 <span data-ttu-id="83cd1-136">Předchozí popis je zjednodušená verze, co se stane, protože protokol se může lišit od lokality do lokality.</span><span class="sxs-lookup"><span data-stu-id="83cd1-136">The previous description is a simplified version of what happens, because the protocol may vary from site to site.</span></span> <span data-ttu-id="83cd1-137">Je také možné, že klient i lokalita vygeneruje náhodně generované identifikátory (algorithmically), které jsou kombinované během metody handshake pro přidání větší složitosti, a proto ochranu proti procesu výměny dat.</span><span class="sxs-lookup"><span data-stu-id="83cd1-137">It is also possible that both the client and the site both generate nonces that are algorithmically combined during the handshake to add more complexity, and therefore protection, to the process of exchanging data.</span></span>  
  
### <a name="certificates-and-public-key-infrastructure"></a><span data-ttu-id="83cd1-138">Certifikáty a infrastruktura veřejných klíčů</span><span class="sxs-lookup"><span data-stu-id="83cd1-138">Certificates and Public Key Infrastructure</span></span>  
 <span data-ttu-id="83cd1-139">Během metody handshake služba také odešle svůj certifikát SSL klientovi.</span><span class="sxs-lookup"><span data-stu-id="83cd1-139">During the handshake, the service also sends its SSL certificate to the client.</span></span> <span data-ttu-id="83cd1-140">Certifikát obsahuje informace, jako je datum vypršení platnosti, vydávající autorita a identifikátor URI (Uniform Resource Identifier) webu.</span><span class="sxs-lookup"><span data-stu-id="83cd1-140">The certificate contains information, such as its expiration date, issuing authority, and the site's Uniform Resource Identifier (URI).</span></span> <span data-ttu-id="83cd1-141">Klient porovná identifikátor URI s identifikátorem URI, který byl původně kontaktován, aby zajistil shodu a také zkontroloval datum a vydávající autoritu.</span><span class="sxs-lookup"><span data-stu-id="83cd1-141">The client compares the URI to the URI it had originally contacted to ensure a match, and also checks the date and issuing authority.</span></span>  
  
 <span data-ttu-id="83cd1-142">Každý certifikát má dva klíče, privátní klíč a veřejný klíč a dva se označují jako *pár klíčů pro výměnu*.</span><span class="sxs-lookup"><span data-stu-id="83cd1-142">Every certificate has two keys, a private key and a public key, and the two are known as an *exchange key pair*.</span></span> <span data-ttu-id="83cd1-143">V krátké době se privátní klíč ví jenom na vlastníka certifikátu, zatímco veřejný klíč je čitelný z certifikátu.</span><span class="sxs-lookup"><span data-stu-id="83cd1-143">In brief, the private key is known only to the owner of the certificate while the public key is readable from the certificate.</span></span> <span data-ttu-id="83cd1-144">Libovolný klíč lze použít k šifrování nebo dešifrování algoritmu hash, hodnoty hash nebo jiného klíče, ale pouze v případě opaku operací.</span><span class="sxs-lookup"><span data-stu-id="83cd1-144">Either key can be used to encrypt or decrypt a digest, hash, or other key, but only as contrary operations.</span></span> <span data-ttu-id="83cd1-145">Pokud se třeba klient šifruje pomocí veřejného klíče, může zprávu dešifrovat jenom lokalitou pomocí privátního klíče.</span><span class="sxs-lookup"><span data-stu-id="83cd1-145">For example, if the client encrypts with the public key, only the site can decrypt the message using the private key.</span></span> <span data-ttu-id="83cd1-146">Podobně platí, že pokud se lokalita šifruje s privátním klíčem, může se klient dešifrovat pomocí veřejného klíče.</span><span class="sxs-lookup"><span data-stu-id="83cd1-146">Similarly, if the site encrypts with the private key, the client can decrypt with the public key.</span></span> <span data-ttu-id="83cd1-147">To klientovi zajišťuje jistotu, že se zprávy vyměňují pouze s držitelem privátního klíče, protože je možné dešifrovat pouze zprávy zašifrované pomocí privátního klíče pomocí veřejného klíče.</span><span class="sxs-lookup"><span data-stu-id="83cd1-147">This provides assurance to the client that the messages are being exchanged only with the possessor of the private key because only messages encrypted with the private key can be decrypted with the public key.</span></span> <span data-ttu-id="83cd1-148">Lokalita je zajištěna tím, že vyměňuje zprávy pomocí klienta, který je zašifrovaný pomocí veřejného klíče.</span><span class="sxs-lookup"><span data-stu-id="83cd1-148">The site is assured that it is exchanging messages with a client that has encrypted using the public key.</span></span> <span data-ttu-id="83cd1-149">Tato výměna je zabezpečená jenom pro počáteční signalizaci, ale to je mnohem víc, abyste vytvořili skutečný symetrický klíč.</span><span class="sxs-lookup"><span data-stu-id="83cd1-149">This exchange is secure only for an initial handshake, however, which is why much more is done to create the actual symmetric key.</span></span> <span data-ttu-id="83cd1-150">Veškerá komunikace však závisí na službě, která má platný certifikát SSL.</span><span class="sxs-lookup"><span data-stu-id="83cd1-150">Nevertheless, all communications depend on the service having a valid SSL certificate.</span></span>  
  
## <a name="implementing-ssl-with-wcf"></a><span data-ttu-id="83cd1-151">Implementace SSL pomocí WCF</span><span class="sxs-lookup"><span data-stu-id="83cd1-151">Implementing SSL with WCF</span></span>  
 <span data-ttu-id="83cd1-152">Zabezpečení přenosu HTTP (nebo SSL) je poskytováno externě službě WCF.</span><span class="sxs-lookup"><span data-stu-id="83cd1-152">HTTP transport security (or SSL) is provided externally to WCF.</span></span> <span data-ttu-id="83cd1-153">SSL můžete implementovat jedním ze dvou způsobů: rozhodující faktor je způsob hostování vaší aplikace:</span><span class="sxs-lookup"><span data-stu-id="83cd1-153">You can implement SSL in one of two ways; the deciding factor is how your application is hosted:</span></span>  
  
- <span data-ttu-id="83cd1-154">Pokud jako hostitele WCF používáte Internetová informační služba (IIS), použijte k nastavení služby SSL infrastrukturu služby IIS.</span><span class="sxs-lookup"><span data-stu-id="83cd1-154">If you are using Internet Information Services (IIS) as your WCF host, use the IIS infrastructure to set up an SSL service.</span></span>  
  
- <span data-ttu-id="83cd1-155">Pokud vytváříte aplikaci WCF s místním hostováním, můžete k ní pomocí nástroje HttpCfg. exe vytvořit propojení certifikátu SSL s adresou.</span><span class="sxs-lookup"><span data-stu-id="83cd1-155">If you are creating a self-hosted WCF application, you can bind an SSL certificate to the address using the HttpCfg.exe tool.</span></span>  
  
### <a name="using-iis-for-transport-security"></a><span data-ttu-id="83cd1-156">Zabezpečení přenosu pomocí služby IIS</span><span class="sxs-lookup"><span data-stu-id="83cd1-156">Using IIS for Transport Security</span></span>  
  
#### <a name="iis-70"></a><span data-ttu-id="83cd1-157">Internetová informační služba 7,0</span><span class="sxs-lookup"><span data-stu-id="83cd1-157">IIS 7.0</span></span>  
 <span data-ttu-id="83cd1-158">Pokud chcete nastavit službu IIS 7,0 jako zabezpečeného hostitele (pomocí protokolu SSL), přečtěte si téma [konfigurace SSL (Secure Sockets Layer) ve službě IIS 7,0](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771438(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="83cd1-158">To set up IIS 7.0 as a secure host (using SSL), see [Configuring Secure Sockets Layer in IIS 7.0](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771438(v=ws.10)).</span></span>  
  
<span data-ttu-id="83cd1-159">Informace o konfiguraci certifikátů pro použití se službou IIS 7,0 najdete v tématu [Konfigurace certifikátů serveru ve službě iis 7,0](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732230(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="83cd1-159">To configure certificates for use with IIS 7.0, see [Configuring Server Certificates in IIS 7.0](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732230(v=ws.10)).</span></span>  
  
#### <a name="iis-60"></a><span data-ttu-id="83cd1-160">Internetová informační služba 6.0</span><span class="sxs-lookup"><span data-stu-id="83cd1-160">IIS 6.0</span></span>  
 <span data-ttu-id="83cd1-161">Pokud chcete nastavit službu IIS 6,0 jako zabezpečeného hostitele (pomocí protokolu SSL), přečtěte si téma [konfigurace SSL (Secure Sockets Layer)](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc736992(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="83cd1-161">To set up IIS 6.0 as a secure host (using SSL), see [Configuring Secure Sockets Layer](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc736992(v=ws.10)).</span></span>  
  
 <span data-ttu-id="83cd1-162">Pokud chcete nakonfigurovat certifikáty pro použití se službou IIS 6,0, přečtěte si téma [Certificates_IIS_SP1_Ops](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc757474(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="83cd1-162">To configure certificates for use with IIS 6.0, see [Certificates_IIS_SP1_Ops](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc757474(v=ws.10)).</span></span>  
  
### <a name="using-httpcfg-for-ssl"></a><span data-ttu-id="83cd1-163">Použití HttpCfg pro SSL</span><span class="sxs-lookup"><span data-stu-id="83cd1-163">Using HttpCfg for SSL</span></span>  

 <span data-ttu-id="83cd1-164">Pokud vytváříte aplikaci WCF s místním hostováním, použijte nástroj [Httpcfg. exe](/windows/win32/http/httpcfg-exe) .</span><span class="sxs-lookup"><span data-stu-id="83cd1-164">If you're creating a self-hosted WCF application, use the [HttpCfg.exe](/windows/win32/http/httpcfg-exe) tool.</span></span>
  
 <span data-ttu-id="83cd1-165">Další informace o použití nástroje HttpCfg. exe k nastavení portu s certifikátem X. 509 naleznete v tématu [How to: Configure a port with a Certificate SSL](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="83cd1-165">For more information about using the HttpCfg.exe tool to set up a port with an X.509 certificate, see [How to: Configure a Port with an SSL Certificate](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="83cd1-166">Viz také:</span><span class="sxs-lookup"><span data-stu-id="83cd1-166">See also</span></span>

- [<span data-ttu-id="83cd1-167">Zabezpečení přenosu</span><span class="sxs-lookup"><span data-stu-id="83cd1-167">Transport Security</span></span>](../../../../docs/framework/wcf/feature-details/transport-security.md)
- [<span data-ttu-id="83cd1-168">Zabezpečení zpráv</span><span class="sxs-lookup"><span data-stu-id="83cd1-168">Message Security</span></span>](../../../../docs/framework/wcf/feature-details/message-security-in-wcf.md)
