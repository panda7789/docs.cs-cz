---
title: Zabezpečení přenosu HTTP
ms.date: 03/30/2017
ms.assetid: d3439262-c58e-4d30-9f2b-a160170582bb
author: BrucePerlerMS
ms.openlocfilehash: c21769eed2f3040bf336860b5a9cd6cd450d5525
ms.sourcegitcommit: fb78d8abbdb87144a3872cf154930157090dd933
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/26/2018
ms.locfileid: "47232687"
---
# <a name="http-transport-security"></a><span data-ttu-id="5fa61-102">Zabezpečení přenosu HTTP</span><span class="sxs-lookup"><span data-stu-id="5fa61-102">HTTP Transport Security</span></span>
<span data-ttu-id="5fa61-103">Pokud přenos pomocí protokolu HTTP, je zabezpečení poskytovaný implementace vrstvy SSL (Secure Sockets).</span><span class="sxs-lookup"><span data-stu-id="5fa61-103">When using HTTP as the transport, security is provided by a Secure Sockets Layer (SSL) implementation.</span></span> <span data-ttu-id="5fa61-104">SSL se často používá na Internetu k ověření služby ke klientovi a potom k zajištění důvěrnosti (šifrování) do kanálu.</span><span class="sxs-lookup"><span data-stu-id="5fa61-104">SSL is widely used on the Internet to authenticate a service to a client, and then to provide confidentiality (encryption) to the channel.</span></span> <span data-ttu-id="5fa61-105">Toto téma vysvětluje, jak funguje připojení SSL a jak je implementován ve Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="5fa61-105">This topic explains how SSL works and how it is implemented in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="basic-ssl"></a><span data-ttu-id="5fa61-106">Základní SSL</span><span class="sxs-lookup"><span data-stu-id="5fa61-106">Basic SSL</span></span>  
 <span data-ttu-id="5fa61-107">Jak funguje SSL je nejvhodnější je vysvětleno prostřednictvím typického scénáře, v tomto případě banka na webovém serveru.</span><span class="sxs-lookup"><span data-stu-id="5fa61-107">How SSL works is best explained through a typical scenario, in this case, a bank's Web site.</span></span> <span data-ttu-id="5fa61-108">Webu umožňuje zákazníkovi se přihlásit pomocí uživatelského jména a hesla.</span><span class="sxs-lookup"><span data-stu-id="5fa61-108">The site allows a customer to log on with a user name and password.</span></span> <span data-ttu-id="5fa61-109">Po ověřovaného, uživatel provádět transakce, jako je například zobrazení zůstatky na účtu, uhraďte a peníze přesunout z jednoho účtu do druhého.</span><span class="sxs-lookup"><span data-stu-id="5fa61-109">After being authenticated, the user can perform transactions, such as view account balances, pay bills, and move money from one account to another.</span></span>  
  
 <span data-ttu-id="5fa61-110">Pokud uživatel nejprve navštíví web, mechanismus SSL zahájí řadu jednání, volá se *handshake*, s klientem uživatele (v tomto případě aplikace Internet Explorer).</span><span class="sxs-lookup"><span data-stu-id="5fa61-110">When a user first visits the site, the SSL mechanism begins a series of negotiations, called a *handshake*, with the user's client (in this case, Internet Explorer).</span></span> <span data-ttu-id="5fa61-111">SSL poprvé ověří bank lokality tak, aby zákazník.</span><span class="sxs-lookup"><span data-stu-id="5fa61-111">SSL first authenticates the bank site to the customer.</span></span> <span data-ttu-id="5fa61-112">To je zásadní krok, protože nejdřív musí zákazníci věděli, že komunikují s skutečné lokality a není falešného, který se pokusí přesvědčit do zadáte svoje uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="5fa61-112">This is an essential step because customers must first know that they are communicating with the actual site, and not a spoof that tries to lure them into typing in their user name and password.</span></span> <span data-ttu-id="5fa61-113">SSL nepodporuje ověřování pomocí certifikátu SSL poskytuje důvěryhodnou autoritou, jako je například VeriSign.</span><span class="sxs-lookup"><span data-stu-id="5fa61-113">SSL does this authentication by using an SSL certificate provided by a trusted authority, such as VeriSign.</span></span> <span data-ttu-id="5fa61-114">Logika platí takto: VeriSign zaručuje za identitu serveru bank.</span><span class="sxs-lookup"><span data-stu-id="5fa61-114">The logic goes like this: VeriSign vouches for the identity of the bank site.</span></span> <span data-ttu-id="5fa61-115">Protože aplikaci Internet Explorer důvěřuje VeriSign, je důvěryhodné lokalitě.</span><span class="sxs-lookup"><span data-stu-id="5fa61-115">Because Internet Explorer trusts VeriSign, the site is trusted.</span></span> <span data-ttu-id="5fa61-116">Pokud chcete zkontrolovat s VeriSign, můžete to také provést kliknutím na logo společnosti VeriSign.</span><span class="sxs-lookup"><span data-stu-id="5fa61-116">If you want to check with VeriSign, you can do so as well by clicking on the VeriSign logo.</span></span> <span data-ttu-id="5fa61-117">Příkaz pravosti, který představuje se datum vypršení platnosti a na koho se vydává (bankovní lokality).</span><span class="sxs-lookup"><span data-stu-id="5fa61-117">That presents a statement of authenticity with its expiration date and who it is issued to (the bank site).</span></span>  
  
 <span data-ttu-id="5fa61-118">Zahájení zabezpečené relace, klient odešle serveru spolu s seznam kryptografických algoritmů můžete použít k podepsání, generování hodnoty hash a šifrování a dešifrování s ekvivalent "hello".</span><span class="sxs-lookup"><span data-stu-id="5fa61-118">To initiate a secure session, the client sends the equivalent of a "hello" to the server along with a list of cryptographic algorithms it can use to sign, generate hashes, and encrypt and decrypt with.</span></span> <span data-ttu-id="5fa61-119">V odpovědi, tato lokalita odesílá zpět potvrzení a jeho výběru jednoho z algoritmů sad.</span><span class="sxs-lookup"><span data-stu-id="5fa61-119">In response, the site sends back an acknowledgment and its choice of one of the algorithms suites.</span></span> <span data-ttu-id="5fa61-120">Během této metody handshake počáteční obou stran odesílat a přijímat náhodně generované identifikátory.</span><span class="sxs-lookup"><span data-stu-id="5fa61-120">During this initial handshake, both parties send and receive nonces.</span></span> <span data-ttu-id="5fa61-121">A *nonce* je náhodně generované část dat, která se používá v kombinaci s veřejným klíčem tohoto webu, vytvoří hodnotu hash.</span><span class="sxs-lookup"><span data-stu-id="5fa61-121">A *nonce* is a randomly generated piece of data that is used, in combination with the site's public key, to create a hash.</span></span> <span data-ttu-id="5fa61-122">A *hash* je nové číslo, který je odvozen z daných dvou čísel pomocí standardních algoritmů, jako je například SHA1.</span><span class="sxs-lookup"><span data-stu-id="5fa61-122">A *hash* is a new number that is derived from the two numbers using a standard algorithm, such as SHA1.</span></span> <span data-ttu-id="5fa61-123">(Klient a webu také výměnu zpráv souhlas které hashovací algoritmus k použití.) Hodnota hash je jedinečný a slouží pouze pro relaci mezi klientem a webu k šifrování a dešifrování zprávy.</span><span class="sxs-lookup"><span data-stu-id="5fa61-123">(The client and the site also exchange messages to agree which hash algorithm to use.) The hash is unique and is used only for the session between the client and the site to encrypt and decrypt messages.</span></span> <span data-ttu-id="5fa61-124">Klient a služba mít původní hodnota nonce a veřejný klíč certifikátu, takže obě strany mohou generovat stejnou hodnotu hash.</span><span class="sxs-lookup"><span data-stu-id="5fa61-124">Both client and service have the original nonce and the certificate's public key, so both sides can generate the same hash.</span></span> <span data-ttu-id="5fa61-125">Proto se klient ověřuje-the-hash odeslaných službou (a) pomocí dohodnutých po algoritmus pro výpočet hodnoty hash z dat, a (b) porovnání této hodnoty hash odeslaných službou; Pokud se dva shodují, má klient jistotu, že-the-hash nebylo manipulováno.</span><span class="sxs-lookup"><span data-stu-id="5fa61-125">Therefore, the client validates the hash sent by the service by (a) using the agreed upon algorithm to calculate the hash from the data, and (b) comparing it to the hash sent by the service; if the two match, then the client has assurance that the hash has not been tampered with.</span></span> <span data-ttu-id="5fa61-126">Klient pak můžete použít tato hodnota hash jako klíč k šifrování zpráv, který obsahuje další nová hodnota hash.</span><span class="sxs-lookup"><span data-stu-id="5fa61-126">The client can then use this hash as a key to encrypt a message that contains yet another new hash.</span></span> <span data-ttu-id="5fa61-127">Službu můžete dešifrování zprávy pomocí-the-hash a obnovit tato druhé konečná hodnota hash.</span><span class="sxs-lookup"><span data-stu-id="5fa61-127">The service can decrypt the message using the hash, and recover this second-to-final hash.</span></span> <span data-ttu-id="5fa61-128">Souhrnné informace (náhodně generované identifikátory, veřejný klíč a další data) se teď označuje pro obě strany a konečná hodnota hash (nebo hlavního klíče) je možné vytvořit.</span><span class="sxs-lookup"><span data-stu-id="5fa61-128">The accumulated information (nonces, public key, and other data) is now known to both sides, and a final hash (or master key) can be created.</span></span> <span data-ttu-id="5fa61-129">Tento poslední klíč je směrován šifrovaně využitím další poslední hodnotu hash.</span><span class="sxs-lookup"><span data-stu-id="5fa61-129">This final key is sent encrypted using the next-to-last hash.</span></span> <span data-ttu-id="5fa61-130">Hlavní klíč se pak používá k šifrování a dešifrování zprávy pro resetování relace.</span><span class="sxs-lookup"><span data-stu-id="5fa61-130">The master key is then used to encrypt and decrypt messages for the reset of the session.</span></span> <span data-ttu-id="5fa61-131">Protože klient a služba používá stejný klíč, to se také nazývá *klíč relace*.</span><span class="sxs-lookup"><span data-stu-id="5fa61-131">Because both client and service use the same key, this is also called a *session key*.</span></span>  
  
 <span data-ttu-id="5fa61-132">Klíč relace je také definovány jako symetrický klíč, nebo "sdílený tajný klíč."</span><span class="sxs-lookup"><span data-stu-id="5fa61-132">The session key is also characterized as a symmetric key, or a "shared secret."</span></span> <span data-ttu-id="5fa61-133">Symetrické klíče je důležité, protože snižuje výpočetní vyžaduje obě strany transakce.</span><span class="sxs-lookup"><span data-stu-id="5fa61-133">Having a symmetric key is important because it reduces the computation required by both sides of the transaction.</span></span> <span data-ttu-id="5fa61-134">Pokud všechny zprávy vyžadované nové výměny náhodně generované identifikátory a hodnoty hash, by zhoršení výkonu.</span><span class="sxs-lookup"><span data-stu-id="5fa61-134">If every message demanded a new exchange of nonces and hashes, performance would deteriorate.</span></span> <span data-ttu-id="5fa61-135">Proto konečným cílem SSL je použití symetrický klíč, který umožňuje zprávy tok volně mezi dvěma stranami s vyšší úrovní zabezpečení a efektivitu.</span><span class="sxs-lookup"><span data-stu-id="5fa61-135">Therefore, the ultimate goal of SSL is to use a symmetric key that allows messages to flow freely between the two sides with a greater degree of security and efficiency.</span></span>  
  
 <span data-ttu-id="5fa61-136">Předchozí popis je zjednodušenou verzí co se stane, protože protokol se může lišit od serveru lokality.</span><span class="sxs-lookup"><span data-stu-id="5fa61-136">The previous description is a simplified version of what happens, because the protocol may vary from site to site.</span></span> <span data-ttu-id="5fa61-137">Je také možné, že klienta i webu i vygenerovat náhodně generované identifikátory, které jsou spojené algorithmically při vyjednávání metodou handshake přidat další složitosti a proto ochrany, do procesu výměny dat.</span><span class="sxs-lookup"><span data-stu-id="5fa61-137">It is also possible that both the client and the site both generate nonces that are algorithmically combined during the handshake to add more complexity, and therefore protection, to the process of exchanging data.</span></span>  
  
### <a name="certificates-and-public-key-infrastructure"></a><span data-ttu-id="5fa61-138">Certifikáty a infrastruktury veřejných klíčů</span><span class="sxs-lookup"><span data-stu-id="5fa61-138">Certificates and Public Key Infrastructure</span></span>  
 <span data-ttu-id="5fa61-139">Při vyjednávání metodou handshake službu také odešle svůj certifikát SSL klienta.</span><span class="sxs-lookup"><span data-stu-id="5fa61-139">During the handshake, the service also sends its SSL certificate to the client.</span></span> <span data-ttu-id="5fa61-140">Tento certifikát obsahuje informace, například jeho platnosti, vydávání autority a tohoto webu identifikátor URI (Uniform Resource).</span><span class="sxs-lookup"><span data-stu-id="5fa61-140">The certificate contains information, such as its expiration date, issuing authority, and the site's Uniform Resource Identifier (URI).</span></span> <span data-ttu-id="5fa61-141">Klient porovná identifikátor URI pro identifikátor URI měl původně kontaktovat a zkontrolujte shody a také ověří datum a vystavující autorita.</span><span class="sxs-lookup"><span data-stu-id="5fa61-141">The client compares the URI to the URI it had originally contacted to ensure a match, and also checks the date and issuing authority.</span></span>  
  
 <span data-ttu-id="5fa61-142">Každý certifikát má dva klíče, privátní klíč a veřejný klíč a dva jsou označovány jako *exchange pár klíčů*.</span><span class="sxs-lookup"><span data-stu-id="5fa61-142">Every certificate has two keys, a private key and a public key, and the two are known as an *exchange key pair*.</span></span> <span data-ttu-id="5fa61-143">Stručně řečeno jenom na vlastníka certifikát bude znám soukromý klíč při čtení z certifikátu veřejného klíče.</span><span class="sxs-lookup"><span data-stu-id="5fa61-143">In brief, the private key is known only to the owner of the certificate while the public key is readable from the certificate.</span></span> <span data-ttu-id="5fa61-144">Ani jeden klíč slouží k šifrování nebo dešifrování algoritmu digest, hodnota hash, nebo další klíč, ale pouze protikladné operace.</span><span class="sxs-lookup"><span data-stu-id="5fa61-144">Either key can be used to encrypt or decrypt a digest, hash, or other key, but only as contrary operations.</span></span> <span data-ttu-id="5fa61-145">Například pokud klient zašifruje pomocí veřejného klíče, pouze lokalitě můžete dešifrování zprávy pomocí soukromého klíče.</span><span class="sxs-lookup"><span data-stu-id="5fa61-145">For example, if the client encrypts with the public key, only the site can decrypt the message using the private key.</span></span> <span data-ttu-id="5fa61-146">Podobně pokud zašifruje web s privátním klíčem, klient může dešifrovat s veřejným klíčem.</span><span class="sxs-lookup"><span data-stu-id="5fa61-146">Similarly, if the site encrypts with the private key, the client can decrypt with the public key.</span></span> <span data-ttu-id="5fa61-147">To poskytuje záruku klientovi zprávy jsou během výměny pouze s vlastník privátního klíče, protože mohou ho dešifrovat jenom zpráv šifrovaných pomocí privátního klíče pomocí veřejného klíče.</span><span class="sxs-lookup"><span data-stu-id="5fa61-147">This provides assurance to the client that the messages are being exchanged only with the possessor of the private key because only messages encrypted with the private key can be decrypted with the public key.</span></span> <span data-ttu-id="5fa61-148">Web je zajištěno, že je výměna zpráv pomocí klienta, který má šifrované pomocí veřejného klíče.</span><span class="sxs-lookup"><span data-stu-id="5fa61-148">The site is assured that it is exchanging messages with a client that has encrypted using the public key.</span></span> <span data-ttu-id="5fa61-149">Tato výměna je pouze pro počáteční handshake, ale, což je důvod, proč bezpečné spoustu dalších věcí slouží k vytvoření skutečné symetrický klíč.</span><span class="sxs-lookup"><span data-stu-id="5fa61-149">This exchange is secure only for an initial handshake, however, which is why much more is done to create the actual symmetric key.</span></span> <span data-ttu-id="5fa61-150">Veškerá komunikace se však závisí na služby, která má platný certifikát SSL.</span><span class="sxs-lookup"><span data-stu-id="5fa61-150">Nevertheless, all communications depend on the service having a valid SSL certificate.</span></span>  
  
## <a name="implementing-ssl-with-wcf"></a><span data-ttu-id="5fa61-151">Implementace SSL s použitím technologie WCF</span><span class="sxs-lookup"><span data-stu-id="5fa61-151">Implementing SSL with WCF</span></span>  
 <span data-ttu-id="5fa61-152">Zabezpečení přenosu HTTP (nebo SSL) je poskytováno externě WCF.</span><span class="sxs-lookup"><span data-stu-id="5fa61-152">HTTP transport security (or SSL) is provided externally to WCF.</span></span> <span data-ttu-id="5fa61-153">SSL lze implementovat v jednom ze dvou způsobů; rozhodujícím faktorem je, jak je vaše aplikace hostovaná:</span><span class="sxs-lookup"><span data-stu-id="5fa61-153">You can implement SSL in one of two ways; the deciding factor is how your application is hosted:</span></span>  
  
-   <span data-ttu-id="5fa61-154">Pokud používáte Internetové informační služby (IIS) jako hostitele WCF, nastavení služby SSL pomocí infrastruktury služby IIS.</span><span class="sxs-lookup"><span data-stu-id="5fa61-154">If you are using Internet Information Services (IIS) as your WCF host, use the IIS infrastructure to set up an SSL service.</span></span>  
  
-   <span data-ttu-id="5fa61-155">Při vytváření aplikace v místním prostředí WCF, můžete svázat certifikát SSL na adresu, pomocí nástroje HttpCfg.exe.</span><span class="sxs-lookup"><span data-stu-id="5fa61-155">If you are creating a self-hosted WCF application, you can bind an SSL certificate to the address using the HttpCfg.exe tool.</span></span>  
  
### <a name="using-iis-for-transport-security"></a><span data-ttu-id="5fa61-156">Pomocí služby IIS pro zabezpečení přenosu</span><span class="sxs-lookup"><span data-stu-id="5fa61-156">Using IIS for Transport Security</span></span>  
  
#### <a name="iis-70"></a><span data-ttu-id="5fa61-157">Internetová informační služba 7,0</span><span class="sxs-lookup"><span data-stu-id="5fa61-157">IIS 7.0</span></span>  
 <span data-ttu-id="5fa61-158">K nastavení [!INCLUDE[iisver](../../../../includes/iisver-md.md)] jako zabezpečené hostitele (pomocí protokolu SSL), najdete v článku [IIS 7.0 Beta: Konfigurace Secure Sockets Layer ve službě IIS 7.0](https://go.microsoft.com/fwlink/?LinkId=88600).</span><span class="sxs-lookup"><span data-stu-id="5fa61-158">To set up [!INCLUDE[iisver](../../../../includes/iisver-md.md)] as a secure host (using SSL), see [IIS 7.0 Beta: Configuring Secure Sockets Layer in IIS 7.0](https://go.microsoft.com/fwlink/?LinkId=88600).</span></span>  
  
 <span data-ttu-id="5fa61-159">Konfigurace certifikátů pro použití s [!INCLUDE[iisver](../../../../includes/iisver-md.md)], naleznete v tématu [IIS 7.0 Beta: Konfigurace certifikátů serveru ve službě IIS 7.0](https://go.microsoft.com/fwlink/?LinkID=88595).</span><span class="sxs-lookup"><span data-stu-id="5fa61-159">To configure certificates for use with [!INCLUDE[iisver](../../../../includes/iisver-md.md)], see [IIS 7.0 Beta: Configuring Server Certificates in IIS 7.0](https://go.microsoft.com/fwlink/?LinkID=88595).</span></span>  
  
#### <a name="iis-60"></a><span data-ttu-id="5fa61-160">Internetová informační služba 6.0</span><span class="sxs-lookup"><span data-stu-id="5fa61-160">IIS 6.0</span></span>  
 <span data-ttu-id="5fa61-161">Chcete-li nastavit [!INCLUDE[iis601](../../../../includes/iis601-md.md)] jako zabezpečené hostitele (pomocí protokolu SSL), najdete v článku [konfigurace Secure Sockets Layer](https://go.microsoft.com/fwlink/?LinkId=88601).</span><span class="sxs-lookup"><span data-stu-id="5fa61-161">To set up [!INCLUDE[iis601](../../../../includes/iis601-md.md)] as a secure host (using SSL), see [Configuring Secure Sockets Layer](https://go.microsoft.com/fwlink/?LinkId=88601).</span></span>  
  
 <span data-ttu-id="5fa61-162">Konfigurace certifikátů pro použití s [!INCLUDE[iis601](../../../../includes/iis601-md.md)], naleznete v tématu [Certificates_IIS_SP1_Ops](https://go.microsoft.com/fwlink/?LinkId=88602).</span><span class="sxs-lookup"><span data-stu-id="5fa61-162">To configure certificates for use with [!INCLUDE[iis601](../../../../includes/iis601-md.md)], see [Certificates_IIS_SP1_Ops](https://go.microsoft.com/fwlink/?LinkId=88602).</span></span>  
  
### <a name="using-httpcfg-for-ssl"></a><span data-ttu-id="5fa61-163">Pomocí HttpCfg pro protokol SSL</span><span class="sxs-lookup"><span data-stu-id="5fa61-163">Using HttpCfg for SSL</span></span>  
 <span data-ttu-id="5fa61-164">Při vytváření aplikace v místním prostředí WCF, stáhněte si nástroj HttpCfg.exe, k dispozici na [webu podpory nástroje systému Windows XP Service Pack 2](https://go.microsoft.com/fwlink/?LinkId=29002).</span><span class="sxs-lookup"><span data-stu-id="5fa61-164">If you are creating a self-hosted WCF application, download the HttpCfg.exe tool, available at the [Windows XP Service Pack 2 Support Tools site](https://go.microsoft.com/fwlink/?LinkId=29002).</span></span>  
  
 <span data-ttu-id="5fa61-165">Další informace o použití nástroje HttpCfg.exe nastavení portu s certifikátem X.509, naleznete v tématu [postupy: Konfigurace portu s certifikátem SSL](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="5fa61-165">For more information about using the HttpCfg.exe tool to set up a port with an X.509 certificate, see [How to: Configure a Port with an SSL Certificate](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5fa61-166">Viz také</span><span class="sxs-lookup"><span data-stu-id="5fa61-166">See Also</span></span>  
 [<span data-ttu-id="5fa61-167">Zabezpečení přenosu</span><span class="sxs-lookup"><span data-stu-id="5fa61-167">Transport Security</span></span>](../../../../docs/framework/wcf/feature-details/transport-security.md)  
 [<span data-ttu-id="5fa61-168">Zabezpečení zpráv</span><span class="sxs-lookup"><span data-stu-id="5fa61-168">Message Security</span></span>](../../../../docs/framework/wcf/feature-details/message-security-in-wcf.md)
