---
title: Kontrakty dat s dopřednou kompatibilitou
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- data contracts [WCF], forward compatibility
ms.assetid: 413c9044-26f8-4ecb-968c-18495ea52cd9
ms.openlocfilehash: 34bde56b78ec0148cf6b924f8edd29343b97faa4
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/09/2020
ms.locfileid: "84597381"
---
# <a name="forward-compatible-data-contracts"></a><span data-ttu-id="1f028-102">Kontrakty dat s dopřednou kompatibilitou</span><span class="sxs-lookup"><span data-stu-id="1f028-102">Forward-Compatible Data Contracts</span></span>
<span data-ttu-id="1f028-103">Pro systém kontraktů dat Windows Communication Foundation (WCF) se kontrakty můžou v průběhu času vyvíjet v nerozdělování.</span><span class="sxs-lookup"><span data-stu-id="1f028-103">A feature of the Windows Communication Foundation (WCF) data contract system is that contracts can evolve over time in nonbreaking ways.</span></span> <span data-ttu-id="1f028-104">To znamená, že klient starší verze kontraktu dat může komunikovat se službou s novější verzí stejné kontraktu dat nebo klient s novější verzí kontraktu dat může komunikovat se starší verzí stejného kontraktu dat.</span><span class="sxs-lookup"><span data-stu-id="1f028-104">That is, a client with an older version of a data contract can communicate with a service with a newer version of the same data contract, or a client with a newer version of a data contract can communicate with an older version of the same data contract.</span></span> <span data-ttu-id="1f028-105">Další informace najdete v tématu [osvědčené postupy: Správa verzí kontraktů dat](../best-practices-data-contract-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="1f028-105">For more information, see [Best Practices: Data Contract Versioning](../best-practices-data-contract-versioning.md).</span></span>  
  
 <span data-ttu-id="1f028-106">V případě, že jsou vytvořeny nové verze existující kontraktu dat, můžete použít většinu funkcí pro správu verzí podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="1f028-106">You can apply most of the versioning features on an as-needed basis when new versions of an existing data contract are created.</span></span> <span data-ttu-id="1f028-107">Nicméně jedna funkce správy verzí, *Round-Trip*, musí být integrována do typu z první verze, aby fungovala správně.</span><span class="sxs-lookup"><span data-stu-id="1f028-107">However, one versioning feature, *round-tripping*, must be built into the type from the first version in order to work properly.</span></span>  
  
## <a name="round-tripping"></a><span data-ttu-id="1f028-108">Round-Trip</span><span class="sxs-lookup"><span data-stu-id="1f028-108">Round-Tripping</span></span>  
 <span data-ttu-id="1f028-109">K kulatému Trip dojde, když data přecházejí z nové verze do staré verze a zpátky do nové verze kontraktu dat.</span><span class="sxs-lookup"><span data-stu-id="1f028-109">Round-tripping occurs when data passes from a new version to an old version and back to the new version of a data contract.</span></span> <span data-ttu-id="1f028-110">Kulaté Trip zaručuje, že nedojde ke ztrátě dat.</span><span class="sxs-lookup"><span data-stu-id="1f028-110">Round-tripping guarantees that no data is lost.</span></span> <span data-ttu-id="1f028-111">Povolení možnosti Round-Trip zajistí, že se typ dopředně dokončí s případnými budoucími změnami, které podporuje model verze kontraktu dat.</span><span class="sxs-lookup"><span data-stu-id="1f028-111">Enabling round-tripping makes the type forward-compatible with any future changes supported by the data contract versioning model.</span></span>  
  
 <span data-ttu-id="1f028-112">Chcete-li povolit příkaz round-trip pro konkrétní typ, musí tento typ implementovat <xref:System.Runtime.Serialization.IExtensibleDataObject> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="1f028-112">To enable round-tripping for a particular type, the type must implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface.</span></span> <span data-ttu-id="1f028-113">Rozhraní obsahuje jednu vlastnost <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> (návrat <xref:System.Runtime.Serialization.ExtensionDataObject> typu).</span><span class="sxs-lookup"><span data-stu-id="1f028-113">The interface contains one property, <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> (returning the <xref:System.Runtime.Serialization.ExtensionDataObject> type).</span></span> <span data-ttu-id="1f028-114">Vlastnost ukládá jakákoli data z budoucích verzí kontraktu dat, která jsou pro aktuální verzi neznámá.</span><span class="sxs-lookup"><span data-stu-id="1f028-114">The property stores any data from future versions of the data contract that is unknown to the current version.</span></span>  
  
### <a name="example"></a><span data-ttu-id="1f028-115">Příklad</span><span class="sxs-lookup"><span data-stu-id="1f028-115">Example</span></span>  
 <span data-ttu-id="1f028-116">Následující kontrakt dat není při budoucích změnách kompatibilní s dopředně.</span><span class="sxs-lookup"><span data-stu-id="1f028-116">The following data contract is not forward-compatible with future changes.</span></span>  
  
 [!code-csharp[C_DataContract#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#7)]
 [!code-vb[C_DataContract#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#7)]  
  
 <span data-ttu-id="1f028-117">Chcete-li nastavit typ kompatibilní s budoucími změnami (například přidáním nového datového člena s názvem "phoneNumber"), implementujte <xref:System.Runtime.Serialization.IExtensibleDataObject> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="1f028-117">To make the type compatible with future changes (such as adding a new data member named "phoneNumber"), implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface.</span></span>  
  
 [!code-csharp[C_DataContract#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#8)]
 [!code-vb[C_DataContract#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#8)]  
  
 <span data-ttu-id="1f028-118">Když infrastruktura WCF narazí na data, která nejsou součástí původní kontraktu dat, uloží se data do vlastnosti a zachovají se.</span><span class="sxs-lookup"><span data-stu-id="1f028-118">When the WCF infrastructure encounters data that is not part of the original data contract, the data is stored in the property and preserved.</span></span> <span data-ttu-id="1f028-119">Nezpracovává se žádným jiným způsobem s výjimkou dočasného úložiště.</span><span class="sxs-lookup"><span data-stu-id="1f028-119">It is not processed in any other way except for temporary storage.</span></span> <span data-ttu-id="1f028-120">Pokud se objekt vrátí zpět na místo, kde pochází, vrátí se také původní (neznámá) data.</span><span class="sxs-lookup"><span data-stu-id="1f028-120">If the object is returned back to where it originated, the original (unknown) data is also returned.</span></span> <span data-ttu-id="1f028-121">Proto data provedla operaci round trip do a z původního koncového bodu bez ztráty.</span><span class="sxs-lookup"><span data-stu-id="1f028-121">Therefore, the data has made a round trip to and from the originating endpoint without loss.</span></span> <span data-ttu-id="1f028-122">Upozorňujeme však, že pokud koncový bod vyžaduje zpracování dat, očekává se, že je nesplnění, a koncový bod musí nějakým způsobem zjistit a přizpůsobit změnu.</span><span class="sxs-lookup"><span data-stu-id="1f028-122">Note, however, that if the originating endpoint required the data to be processed, that expectation is unmet, and the endpoint must somehow detect and accommodate the change.</span></span>  
  
 <span data-ttu-id="1f028-123"><xref:System.Runtime.Serialization.ExtensionDataObject>Typ neobsahuje žádné veřejné metody nebo vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="1f028-123">The <xref:System.Runtime.Serialization.ExtensionDataObject> type contains no public methods or properties.</span></span> <span data-ttu-id="1f028-124">Proto není možné získat přímý přístup k datům uloženým uvnitř <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="1f028-124">Thus, it is impossible to get direct access to the data stored inside the <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> property.</span></span>  
  
 <span data-ttu-id="1f028-125">Funkce Round-Trip může být vypnuta buď nastavením `ignoreExtensionDataObject` na `true` v <xref:System.Runtime.Serialization.DataContractSerializer> konstruktoru, nebo nastavením vlastnosti na hodnotu <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> `true` v <xref:System.ServiceModel.ServiceBehaviorAttribute> .</span><span class="sxs-lookup"><span data-stu-id="1f028-125">The round-tripping feature may be turned off, either by setting `ignoreExtensionDataObject` to `true` in the <xref:System.Runtime.Serialization.DataContractSerializer> constructor or by setting the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property to `true` on the <xref:System.ServiceModel.ServiceBehaviorAttribute>.</span></span> <span data-ttu-id="1f028-126">Když je tato funkce vypnutá, odsadí Nástroj pro deserializaci <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> vlastnost a serializátor negeneruje obsah vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="1f028-126">When this feature is off, the deserializer will not populate the <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> property, and the serializer will not emit the contents of the property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1f028-127">Viz také</span><span class="sxs-lookup"><span data-stu-id="1f028-127">See also</span></span>

- <xref:System.Runtime.Serialization.IExtensibleDataObject>
- <xref:System.Runtime.Serialization.ExtensionDataObject>
- [<span data-ttu-id="1f028-128">Správa verzí kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="1f028-128">Data Contract Versioning</span></span>](data-contract-versioning.md)
- [<span data-ttu-id="1f028-129">Osvědčené postupy: Správa verzí kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="1f028-129">Best Practices: Data Contract Versioning</span></span>](../best-practices-data-contract-versioning.md)
