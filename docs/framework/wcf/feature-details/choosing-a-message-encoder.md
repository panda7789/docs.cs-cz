---
title: Výběr kodéru zprávy
ms.date: 03/30/2017
ms.assetid: 2204d82d-d962-4922-a79e-c9a231604f19
ms.openlocfilehash: d93d7039d034262cd47edd437d5d7d8d63890f02
ms.sourcegitcommit: 1c1a1f9ec0bd1efb3040d86a79f7ee94e207cca5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/03/2020
ms.locfileid: "80635780"
---
# <a name="choose-a-message-encoder"></a><span data-ttu-id="8f2fe-102">Volba kodéru zpráv</span><span class="sxs-lookup"><span data-stu-id="8f2fe-102">Choose a Message Encoder</span></span>

<span data-ttu-id="8f2fe-103">Tento článek popisuje kritéria pro výběr mezi kodéry zpráv, které jsou zahrnuty v Systému Windows Communication Foundation (WCF): binární, text a mechanismus optimalizace přenosu zpráv (MTOM).</span><span class="sxs-lookup"><span data-stu-id="8f2fe-103">This article discusses criteria for choosing among the message encoders that are included in Windows Communication Foundation (WCF): binary, text, and Message Transmission Optimization Mechanism (MTOM).</span></span>  
  
 <span data-ttu-id="8f2fe-104">V WCF určíte, jak přenášet data v síti mezi koncovými body pomocí *vazby*, která se skládá z posloupnosti *elementů vazby*.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-104">In WCF, you specify how to transfer data across a network between endpoints by means of a *binding*, which is made up of a sequence of *binding elements*.</span></span> <span data-ttu-id="8f2fe-105">Kodér zpráv je reprezentován elementem vazby kódování zprávy v zásobníku vazby.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-105">A message encoder is represented by a message encoding binding element in the binding stack.</span></span> <span data-ttu-id="8f2fe-106">Vazba obsahuje prvky vazby volitelného protokolu, jako je například element vazby vazby zabezpečení nebo element vazby spolehlivého zasílání zpráv, prvek vazby kódování požadované zprávy a povinný prvek vazby přenosu.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-106">A binding includes optional protocol binding elements, such as a security binding element or reliable messaging binding element, a required message encoding binding element, and a required transport binding element.</span></span>  
  
 <span data-ttu-id="8f2fe-107">Prvek vazby kódování zprávy je uveden pod prvky vazby volitelného protokolu a nad požadovaným prvkem vazby přenosu.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-107">The message encoding binding element sits below the optional protocol binding elements and above the required transport binding element.</span></span> <span data-ttu-id="8f2fe-108">Na odchozí straně kodér zpráv serializuje odchozí <xref:System.ServiceModel.Channels.Message> a předá jej přenosu.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-108">On the outgoing side, a message encoder serializes the outgoing <xref:System.ServiceModel.Channels.Message> and passes it to the transport.</span></span> <span data-ttu-id="8f2fe-109">Na příchozí straně kodér zprávy obdrží serializovanou formu <xref:System.ServiceModel.Channels.Message> a z přenosu a předá ji vyšší vrstvě protokolu, pokud je k dispozici, nebo do aplikace, pokud ne.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-109">On the incoming side, a message encoder receives the serialized form of a <xref:System.ServiceModel.Channels.Message> from the transport and passes it to the higher protocol layer, if present, or to the application, if not.</span></span>  
  
 <span data-ttu-id="8f2fe-110">Při připojování k již existujícímu klientovi nebo serveru pravděpodobně nemáte na výběr ohledně použití určitého kódování zpráv, protože je třeba kódovat zprávy způsobem, který druhá strana očekává.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-110">When connecting to a pre-existing client or server, you may not have a choice about using a particular message encoding since you need to encode your messages in a way that the other side is expecting.</span></span> <span data-ttu-id="8f2fe-111">Pokud však píšete službu WCF, můžete vystavit službu prostřednictvím více koncových bodů, z nichž každý používá jiné kódování zpráv.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-111">However, if you are writing a WCF service, you can expose your service through multiple endpoints, each using a different message encoding.</span></span> <span data-ttu-id="8f2fe-112">To umožňuje klientům zvolit nejlepší kódování pro mluvení se službou přes koncový bod, který je pro ně nejlepší, stejně jako poskytuje vašim klientům flexibilitu zvolit kódování, které je pro ně nejlepší.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-112">This allows clients to choose the best encoding for talking to your service over the endpoint that is best for them, as well as giving your clients the flexibility to choose the encoding that is best for them.</span></span> <span data-ttu-id="8f2fe-113">Použití více koncových bodů také umožňuje kombinovat výhody různých kódování zpráv s jinými prvky vazby.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-113">Using multiple endpoints also allows you to combine the advantages of different message encodings with other binding elements.</span></span>  
  
## <a name="system-provided-encoders"></a><span data-ttu-id="8f2fe-114">Kodéry poskytované systémem</span><span class="sxs-lookup"><span data-stu-id="8f2fe-114">System-Provided Encoders</span></span>  
 <span data-ttu-id="8f2fe-115">WCF obsahuje tři kodéry zpráv, které jsou reprezentovány následujícími třemi třídami:</span><span class="sxs-lookup"><span data-stu-id="8f2fe-115">WCF includes three message encoders, which are represented by the following three classes:</span></span>  
  
- <span data-ttu-id="8f2fe-116"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>, kodér textových zpráv podporuje kódování prostého xml i kódování SOAP.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-116"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>, the text message encoder, supports both plain XML encoding and SOAP encoding.</span></span> <span data-ttu-id="8f2fe-117">Režim kódování prostého XML kodére textových zpráv se nazývá "prostý starý XML" (POX), aby se odlišil od textového kódování SOAP.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-117">The plain XML encoding mode of the text message encoder is called "plain old XML" (POX) to distinguish it from text-based SOAP encoding.</span></span> <span data-ttu-id="8f2fe-118">Chcete-li povolit <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement.MessageVersion%2A> počitadla, nastavte vlastnost na <xref:System.ServiceModel.Channels.MessageVersion.None%2A>.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-118">To enable POX, set the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement.MessageVersion%2A> property to <xref:System.ServiceModel.Channels.MessageVersion.None%2A>.</span></span> <span data-ttu-id="8f2fe-119">Kodér textových zpráv slouží ke spolupráci s koncovými body mimo WCF.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-119">Use the text message encoder to interoperate with non-WCF endpoints.</span></span>  
  
- <span data-ttu-id="8f2fe-120"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, binární zpráva kodér, používá kompaktní binární formát a je optimalizován pro WCF na WCF komunikace, a proto není interoperabilní.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-120"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, the binary message encoder, uses a compact binary format and is optimized for WCF to WCF communication, and hence is not interoperable.</span></span> <span data-ttu-id="8f2fe-121">Toto je také nejvýkonnější kodér všech kodéry WCF poskytuje.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-121">This is also the most performant encoder of all the encoders WCF provides.</span></span>  
  
- <span data-ttu-id="8f2fe-122"><xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, prvek vazby, určuje kódování znaků a správu verzí zpráv pro zprávy pomocí kódování MTOM.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-122"><xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, the binding element, specifies the character encoding and message versioning for messages using MTOM encoding.</span></span> <span data-ttu-id="8f2fe-123">MTOM je efektivní technologie pro přenos binárních dat ve zprávách WCF.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-123">MTOM is an efficient technology for transmitting binary data in WCF messages.</span></span> <span data-ttu-id="8f2fe-124">Kodér MTOM se pokouší vytvořit rovnováhu mezi efektivitou a interoperabilitou.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-124">The MTOM encoder attempts to create a balance between efficiency and interoperability.</span></span> <span data-ttu-id="8f2fe-125">Kódování MTOM přenáší většinu XML v textové podobě, ale optimalizuje velké bloky binárních dat jejich přenosem tak, jak jsou, bez převodu na text.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-125">The MTOM encoding transmits most XML in textual form, but optimizes large blocks of binary data by transmitting them as-is, without conversion to text.</span></span> <span data-ttu-id="8f2fe-126">Z hlediska efektivity, mezi kodéry WCF poskytuje, MTOM je mezi textem (nejpomalejší) a binární (nejrychlejší).</span><span class="sxs-lookup"><span data-stu-id="8f2fe-126">In terms of efficiency, among the encoders WCF provides, MTOM is in-between text (the slowest) and binary (the fastest).</span></span>  
  
## <a name="how-to-choose-a-message-encoder"></a><span data-ttu-id="8f2fe-127">Jak si vybrat kodér zpráv</span><span class="sxs-lookup"><span data-stu-id="8f2fe-127">How to Choose a Message Encoder</span></span>  
 <span data-ttu-id="8f2fe-128">Následující tabulka popisuje běžné faktory používané k výběru kodéru zpráv.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-128">The following table describes common factors used to choose a message encoder.</span></span> <span data-ttu-id="8f2fe-129">Upřednostněte faktory, které jsou důležité pro vaši aplikaci, a pak zvolte kodéry zpráv, které nejlépe fungují s těmito faktory.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-129">Prioritize the factors that are important for your application, and then choose the message encoders that work best with these factors.</span></span> <span data-ttu-id="8f2fe-130">Nezapomeňte zvážit všechny další faktory, které nejsou uvedeny v této tabulce a všechny vlastní zprávy kodéry, které mohou být požadovány ve vaší aplikaci.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-130">Be sure to consider any additional factors not listed in this table and any custom message encoders that may be required in your application.</span></span>  
  
|<span data-ttu-id="8f2fe-131">Faktor</span><span class="sxs-lookup"><span data-stu-id="8f2fe-131">Factor</span></span>|<span data-ttu-id="8f2fe-132">Popis</span><span class="sxs-lookup"><span data-stu-id="8f2fe-132">Description</span></span>|<span data-ttu-id="8f2fe-133">Kodéry, které podporují tento faktor</span><span class="sxs-lookup"><span data-stu-id="8f2fe-133">Encoders that support this factor</span></span>|  
|------------|-----------------|---------------------------------------|  
|<span data-ttu-id="8f2fe-134">Podporované znakové sady</span><span class="sxs-lookup"><span data-stu-id="8f2fe-134">Supported Character Sets</span></span>|<span data-ttu-id="8f2fe-135"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>a <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> podporují pouze kódování UTF8 a UTF16 Unicode *(big-endian* a *little-endian).*</span><span class="sxs-lookup"><span data-stu-id="8f2fe-135"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> and <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> support only the UTF8 and UTF16 Unicode (*big-endian* and *little-endian*) encodings.</span></span> <span data-ttu-id="8f2fe-136">Pokud jsou požadována jiná kódování, například UTF7 nebo ASCII, musí být použit vlastní kodér.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-136">If other encodings are required, such as UTF7 or ASCII, a custom encoder must be used.</span></span> <span data-ttu-id="8f2fe-137">Ukázkový vlastní kodér najdete [v tématu Vlastní kodér zpráv](https://docs.microsoft.com/dotnet/framework/wcf/samples/custom-message-encoder-custom-text-encoder).</span><span class="sxs-lookup"><span data-stu-id="8f2fe-137">For a sample custom encoder, see [Custom Message Encoder](https://docs.microsoft.com/dotnet/framework/wcf/samples/custom-message-encoder-custom-text-encoder).</span></span>|<span data-ttu-id="8f2fe-138">Text</span><span class="sxs-lookup"><span data-stu-id="8f2fe-138">Text</span></span>|  
|<span data-ttu-id="8f2fe-139">Kontrolní</span><span class="sxs-lookup"><span data-stu-id="8f2fe-139">Inspection</span></span>|<span data-ttu-id="8f2fe-140">Kontrola je schopnost zkoumat zprávy během přenosu.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-140">Inspection is the ability to examine messages during transmission.</span></span> <span data-ttu-id="8f2fe-141">Kódování textu, s nebo bez použití SOAP, umožňují zprávy, které mají být kontrolovány a analyzovány mnoha aplikacemi bez použití specializovaných nástrojů.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-141">Text encodings, either with or without the use of SOAP, allow messages to be inspected and analyzed by many applications without the use of specialized tools.</span></span> <span data-ttu-id="8f2fe-142">Použití zabezpečení přenosu na úrovni zprávy nebo přenosu ovlivňuje vaši schopnost kontrolovat zprávy.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-142">The use of transfer security, at either the message or transport level, affects your ability to inspect messages.</span></span> <span data-ttu-id="8f2fe-143">Důvěrnost chrání zprávu před kontrolou a integrita chrání zprávu před změnou.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-143">Confidentiality protects a message from being examined and integrity protects a message from being modified.</span></span>|<span data-ttu-id="8f2fe-144">Text</span><span class="sxs-lookup"><span data-stu-id="8f2fe-144">Text</span></span>|  
|<span data-ttu-id="8f2fe-145">Spolehlivost</span><span class="sxs-lookup"><span data-stu-id="8f2fe-145">Reliability</span></span>|<span data-ttu-id="8f2fe-146">Spolehlivost je odolnost kodéru k chybám přenosu.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-146">Reliability is the resiliency of an encoder to transmission errors.</span></span> <span data-ttu-id="8f2fe-147">Spolehlivost lze také poskytnout ve zprávě, přenosu nebo aplikační vrstvě.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-147">Reliability can also be provided at the message, transport, or application layer.</span></span> <span data-ttu-id="8f2fe-148">Všechny standardní kodéry WCF předpokládají, že jiná vrstva poskytuje spolehlivost.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-148">All of the standard WCF encoders assume that another layer is providing reliability.</span></span> <span data-ttu-id="8f2fe-149">Kodér má malou schopnost zotavit se z chyby přenosu.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-149">The encoder has little ability to recover from a transmission error.</span></span>|<span data-ttu-id="8f2fe-150">Žádný</span><span class="sxs-lookup"><span data-stu-id="8f2fe-150">None</span></span>|  
|<span data-ttu-id="8f2fe-151">Jednoduchost</span><span class="sxs-lookup"><span data-stu-id="8f2fe-151">Simplicity</span></span>|<span data-ttu-id="8f2fe-152">Jednoduchost představuje snadnost, s jakou můžete vytvářet kodéry a dekodéry pro specifikaci kódování.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-152">Simplicity represents the ease with which you can create encoders and decoders for an encoding specification.</span></span> <span data-ttu-id="8f2fe-153">Kódování textu jsou obzvláště výhodné pro jednoduchost a kódování textu POX má další výhodu, že nevyžaduje podporu pro zpracování SOAP.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-153">Text encodings are particularly advantageous for simplicity, and the POX text encoding has the additional advantage of not requiring support for processing SOAP.</span></span>|<span data-ttu-id="8f2fe-154">Text (POX)</span><span class="sxs-lookup"><span data-stu-id="8f2fe-154">Text (POX)</span></span>|  
|<span data-ttu-id="8f2fe-155">Velikost</span><span class="sxs-lookup"><span data-stu-id="8f2fe-155">Size</span></span>|<span data-ttu-id="8f2fe-156">Kódování určuje množství režie uložené na obsah.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-156">The encoding determines the amount of overhead imposed on content.</span></span> <span data-ttu-id="8f2fe-157">Velikost kódovaných zpráv přímo souvisí s maximální propustností operací služby.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-157">The size of encoded messages is directly related to the maximum throughput of service operations.</span></span> <span data-ttu-id="8f2fe-158">Binární kódování jsou obecně kompaktnější než kódování textu.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-158">Binary encodings are generally more compact than text encodings.</span></span> <span data-ttu-id="8f2fe-159">Pokud je velikost zprávy na prémii, zvažte také kompresi obsahu zprávy během kódování.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-159">When message size is at a premium, consider also compressing the message contents during encoding.</span></span> <span data-ttu-id="8f2fe-160">Komprese však zvyšuje náklady na zpracování pro odesílatele zprávy i příjemce.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-160">However, compression adds processing costs for both the message sender and receiver.</span></span>|<span data-ttu-id="8f2fe-161">binární</span><span class="sxs-lookup"><span data-stu-id="8f2fe-161">Binary</span></span>|  
|<span data-ttu-id="8f2fe-162">Streamování</span><span class="sxs-lookup"><span data-stu-id="8f2fe-162">Streaming</span></span>|<span data-ttu-id="8f2fe-163">Streamování umožňuje aplikacím zahájit zpracování zprávy před příchodem celé zprávy.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-163">Streaming allows applications to begin processing a message before the entire message has arrived.</span></span> <span data-ttu-id="8f2fe-164">Efektivní použití streamování vyžaduje, aby důležitá data pro zprávu být k dispozici na začátku zprávy tak, aby přijímající aplikace není nutné čekat na doručení.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-164">Effectively using streaming requires that the important data for a message be available at the beginning of the message so that the receiving application is not required to wait for it to arrive.</span></span> <span data-ttu-id="8f2fe-165">Kromě toho aplikace, které používají datový proud ového přenosu musí uspořádat data ve zprávě postupně tak, aby obsah nemá dopředné závislosti.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-165">Moreover, applications that use streamed transfer must organize data in the message incrementally so that the content does not have forward dependencies.</span></span> <span data-ttu-id="8f2fe-166">V mnoha případech je nutné ohrozit mezi streamování obsahu a mají nejmenší možnou velikost přenosu pro tento obsah.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-166">In many cases, you must compromise between streaming content and having the smallest possible transfer size for that content.</span></span>|<span data-ttu-id="8f2fe-167">Žádný</span><span class="sxs-lookup"><span data-stu-id="8f2fe-167">None</span></span>|  
|<span data-ttu-id="8f2fe-168">Podpora nástrojů třetích stran</span><span class="sxs-lookup"><span data-stu-id="8f2fe-168">Third-Party Tool Support</span></span>|<span data-ttu-id="8f2fe-169">Oblasti podpory pro kódování zahrnují vývoj a diagnostiku.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-169">Support areas for an encoding include development and diagnosis.</span></span> <span data-ttu-id="8f2fe-170">Vývojáři třetích stran provedli velké investice do knihoven a sad nástrojů pro zpracování zpráv kódovaných ve formátu POX.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-170">Third-party developers have made a large investment in libraries and toolkits for handling messages encoded in the POX format.</span></span>|<span data-ttu-id="8f2fe-171">Text (POX)</span><span class="sxs-lookup"><span data-stu-id="8f2fe-171">Text (POX)</span></span>|  
|<span data-ttu-id="8f2fe-172">Interoperabilita</span><span class="sxs-lookup"><span data-stu-id="8f2fe-172">Interoperability</span></span>|<span data-ttu-id="8f2fe-173">Tento faktor odkazuje na schopnost kodéru WCF spolupracovat se službami, které nejsou wcf.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-173">This factor refers to the ability of a WCF encoder to interoperate with non-WCF services.</span></span>|<span data-ttu-id="8f2fe-174">Text</span><span class="sxs-lookup"><span data-stu-id="8f2fe-174">Text</span></span><br /><br /> <span data-ttu-id="8f2fe-175">MTOM (částečné)</span><span class="sxs-lookup"><span data-stu-id="8f2fe-175">MTOM (partial)</span></span>|  
  
<span data-ttu-id="8f2fe-176">Poznámka: Při použití binárního kodéru nebude mít použití nastavení IgnoreWhitespace při vytváření xmlreaderu žádný vliv.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-176">Note: When using the Binary Encoder, using the IgnoreWhitespace setting when creating a XMLReader will have no effect.</span></span>  <span data-ttu-id="8f2fe-177">Pokud například v rámci operace služby uděláte následující kroky:</span><span class="sxs-lookup"><span data-stu-id="8f2fe-177">For example, if you do the following inside a service operation:</span></span>  

```csharp
public void OperationContract(XElement input)
{
    Console.WriteLine("{0}", input.Value);
    int counter = 0;
    var xreader = input.CreateReader();
    var reader = XmlReader.Create(xreader, new XmlReaderSettings() { IgnoreWhitespace = true });
    while (reader.Read())
    {
        counter++;
    }

    Console.WriteLine("Read {0} lines with reader", counter);
}
```  
  
<span data-ttu-id="8f2fe-178">Nastavení IgnoreWhitespace je ignorováno.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-178">The IgnoreWhitespace setting is ignored.</span></span>  
  
## <a name="compression-and-the-binary-encoder"></a><span data-ttu-id="8f2fe-179">Komprese a binární kodér</span><span class="sxs-lookup"><span data-stu-id="8f2fe-179">Compression and the Binary Encoder</span></span>

<span data-ttu-id="8f2fe-180">Počínaje WCF 4.5 wcf binární kodér přidává podporu pro kompresi.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-180">Beginning with WCF 4.5 the WCF binary encoder adds support for compression.</span></span> <span data-ttu-id="8f2fe-181">To umožňuje použít algoritmus gzip/deflate pro odesílání komprimovaných zpráv z klienta WCF a také reagovat komprimovanými zprávami ze služby WCF s vlastním hostitelem.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-181">This enables you to use the gzip/deflate algorithm for sending compressed messages from a WCF client and also respond with compressed messages from a self-hosted WCF service.</span></span> <span data-ttu-id="8f2fe-182">Tato funkce umožňuje kompresi v přenosech HTTP i TCP.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-182">This feature enables compression on both the HTTP and TCP transports.</span></span> <span data-ttu-id="8f2fe-183">Službu WCF hostovojenskou službou IIS lze vždy povolit pro odesílání komprimovaných odpovědí konfigurací hostitelského serveru služby IIS.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-183">An IIS hosted WCF service can always be enabled for sending compressed responses by configuring the IIS host server.</span></span> <span data-ttu-id="8f2fe-184">Typ komprese je konfigurován <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A?displayProperty=nameWithType> s vlastností.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-184">The type of compression is configured with the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="8f2fe-185">Tato vlastnost je nastavena <xref:System.ServiceModel.Channels.CompressionFormat?displayProperty=nameWithType> na jednu z hodnot výčtu:</span><span class="sxs-lookup"><span data-stu-id="8f2fe-185">This property is set to one of the <xref:System.ServiceModel.Channels.CompressionFormat?displayProperty=nameWithType> enum values:</span></span>

- <xref:System.ServiceModel.Channels.CompressionFormat.Deflate>
- <xref:System.ServiceModel.Channels.CompressionFormat.GZip>
- <xref:System.ServiceModel.Channels.CompressionFormat.None>
  
<span data-ttu-id="8f2fe-186">Vzhledem k tomu, že tato vlastnost je vystavena pouze na binaryMessageEncodingBindingElement, budete muset vytvořit vlastní vazbu, jako je následující, abyste použili tuto funkci:</span><span class="sxs-lookup"><span data-stu-id="8f2fe-186">Since this property is only exposed on the binaryMessageEncodingBindingElement, you will need to create a custom binding like the following to use this feature:</span></span>

 ```xml
 <customBinding>
   <binding name="BinaryCompressionBinding">
     <binaryMessageEncoding compressionFormat ="GZip" />
     <httpTransport />
  </binding>
</customBinding>
 ```

<span data-ttu-id="8f2fe-187">Klient i služba musí souhlasit s odesíláním a přijímáním komprimovaných zpráv, a proto musí být vlastnost compressionFormat nakonfigurována na elementu binaryMessageEncoding v klientovi i ve službě.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-187">Both the client and the service need to agree to send and receive compressed messages and therefore the compressionFormat property must be configured on the binaryMessageEncoding element on both client and service.</span></span> <span data-ttu-id="8f2fe-188">Výjimka protocol je vyvolána, pokud služba nebo klient není nakonfigurován pro kompresi, ale druhá strana je.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-188">A ProtocolException is thrown if either the service or client is not configured for compression, but the other side is.</span></span> <span data-ttu-id="8f2fe-189">Povolení komprese by mělo být pečlivě zváženo.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-189">Enabling compression should be carefully considered.</span></span> <span data-ttu-id="8f2fe-190">Komprese je většinou užitečná, pokud je šířka pásma sítě kritickým bodem.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-190">Compression is mostly useful if network bandwidth is a bottleneck.</span></span> <span data-ttu-id="8f2fe-191">V případě, že procesor je kritickým bodem, komprese sníží propustnost.</span><span class="sxs-lookup"><span data-stu-id="8f2fe-191">In the case where the CPU is the bottleneck, compression will decrease throughput.</span></span> <span data-ttu-id="8f2fe-192">V simulovaném prostředí musí být provedeno vhodné testování, aby se zjistilo, zda je to přínosem pro aplikaci</span><span class="sxs-lookup"><span data-stu-id="8f2fe-192">Appropriate testing must be done in a simulated environment to find out if this benefits the application</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8f2fe-193">Viz také</span><span class="sxs-lookup"><span data-stu-id="8f2fe-193">See also</span></span>

- [<span data-ttu-id="8f2fe-194">Vazby</span><span class="sxs-lookup"><span data-stu-id="8f2fe-194">Bindings</span></span>](../../../../docs/framework/wcf/feature-details/bindings.md)
