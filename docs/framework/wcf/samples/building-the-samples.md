---
title: Ukázky vytváření Windows Communication Foundation
ms.date: 03/30/2017
ms.assetid: 2899e7a5-9cb2-4e8d-b8d2-f31391549198
ms.openlocfilehash: 53599b3b1827651b48df9921bb59a679a36ee39c
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/09/2020
ms.locfileid: "84592616"
---
# <a name="building-the-windows-communication-foundation-samples"></a><span data-ttu-id="ea90e-102">Ukázky vytváření Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="ea90e-102">Building the Windows Communication Foundation Samples</span></span>

<span data-ttu-id="ea90e-103">Ukázky Windows Communication Foundation (WCF) lze sestavit pomocí integrovaného vývojového prostředí (IDE) sady Visual Studio nebo pomocí příkazu **MSBuild** z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="ea90e-103">The Windows Communication Foundation (WCF) samples can be built using the Visual Studio IDE or using the **msbuild** command from the command line.</span></span> <span data-ttu-id="ea90e-104">Oba postupy jsou popsány v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="ea90e-104">Both procedures are described in this topic.</span></span>

> [!NOTE]
> <span data-ttu-id="ea90e-105">Před vytvořením nebo spuštěním kterékoli z ukázek služby WCF se ujistěte, že jste provedli [jednorázovou proceduru nastavení pro Windows Communication Foundation ukázky](one-time-setup-procedure-for-the-wcf-samples.md).</span><span class="sxs-lookup"><span data-stu-id="ea90e-105">Before building or running any of the WCF samples, ensure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](one-time-setup-procedure-for-the-wcf-samples.md).</span></span>

## <a name="to-build-the-sample-using-a-command-prompt"></a><span data-ttu-id="ea90e-106">Postup sestavení ukázky pomocí příkazového řádku</span><span class="sxs-lookup"><span data-stu-id="ea90e-106">To build the sample using a command prompt</span></span>

1. <span data-ttu-id="ea90e-107">Otevřete Developer Command Prompt pro Visual Studio a přejděte do podadresáře pro konkrétní jazyk v umístění adresáře, kam jste si nainstalovali ukázku.</span><span class="sxs-lookup"><span data-stu-id="ea90e-107">Open Developer Command Prompt for Visual Studio and navigate to the language-specific subdirectory under the directory location where you installed the sample.</span></span>

2. <span data-ttu-id="ea90e-108">`msbuild`Do příkazového řádku zadejte.</span><span class="sxs-lookup"><span data-stu-id="ea90e-108">Type `msbuild` at the command line.</span></span> <span data-ttu-id="ea90e-109">Soubory klientských programů jsou sestaveny tak, aby *client\bin* a programové soubory služby jsou sestaveny tak, aby *service\bin*.</span><span class="sxs-lookup"><span data-stu-id="ea90e-109">The client program files are built to *client\bin* and the service program files are built to *service\bin*.</span></span> <span data-ttu-id="ea90e-110">Pokud je služba hostovaná službou Internetová informační služba (IIS), soubory programu služby se zkopírují i do adresáře *ServiceModelSamples* a jeho podadresáře *\Bin* .</span><span class="sxs-lookup"><span data-stu-id="ea90e-110">If the service is hosted by Internet Information Services (IIS), the service program files are also copied to the *servicemodelsamples* directory and its *\bin* subdirectory.</span></span>

> [!NOTE]
> <span data-ttu-id="ea90e-111">Je nutné nastavit seznamy ACL pro *%systemdrive%\Inetpub\Wwwroot* tak, aby udělily oprávnění k úpravám účtu, pod kterým je spuštěný.</span><span class="sxs-lookup"><span data-stu-id="ea90e-111">You must set the ACLs on *%systemdrive%\inetpub\wwwroot* to grant modify permissions to the account under which you are running.</span></span> <span data-ttu-id="ea90e-112">Jinak některé události po sestavení selžou.</span><span class="sxs-lookup"><span data-stu-id="ea90e-112">Otherwise some post build events fail.</span></span> <span data-ttu-id="ea90e-113">Případně můžete seznamy ACL ponechat tak, jak jsou, a spustit příkazový řádek sady SDK jako správce.</span><span class="sxs-lookup"><span data-stu-id="ea90e-113">Alternatively, you can leave the ACLs as they are and run the SDK command prompt as administrator.</span></span>

## <a name="to-build-the-sample-using-visual-studio"></a><span data-ttu-id="ea90e-114">K vytvoření vzorku pomocí sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="ea90e-114">To build the sample using Visual Studio</span></span>

1. <span data-ttu-id="ea90e-115">V nabídce **soubor** v aplikaci Visual Studio vyberte **otevřít**  >  **projekt/řešení**.</span><span class="sxs-lookup"><span data-stu-id="ea90e-115">From the **File** menu in Visual Studio, select **Open** > **Project/Solution**.</span></span> <span data-ttu-id="ea90e-116">Přejděte do podadresáře pro konkrétní jazyk v adresáři, ve kterém jste nainstalovali ukázku, a dvakrát klikněte na ikonu souboru. sln a otevřete řešení v aplikaci Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ea90e-116">Navigate to the language-specific subdirectory under the directory in which you installed the sample, and double-click the .sln file icon to open the solution in Visual Studio.</span></span>

1. <span data-ttu-id="ea90e-117">V nabídce **sestavení** vyberte znovu **Sestavit řešení**.</span><span class="sxs-lookup"><span data-stu-id="ea90e-117">From the **Build** menu, select **Rebuild Solution**.</span></span>

   <span data-ttu-id="ea90e-118">Soubory klientských programů jsou sestaveny tak, aby client\bin a programové soubory služby jsou sestaveny tak, aby service\bin.</span><span class="sxs-lookup"><span data-stu-id="ea90e-118">The client program files are built to client\bin and the service program files are built to service\bin.</span></span> <span data-ttu-id="ea90e-119">Pokud je služba hostovaná ve službě IIS, soubory programu služby se zkopírují i do adresáře *ServiceModelSamples* a jeho podadresáře *\Bin* .</span><span class="sxs-lookup"><span data-stu-id="ea90e-119">If the service is hosted in IIS, the service program files are also copied to the *servicemodelsamples* directory and its *\bin* subdirectory.</span></span>

> [!NOTE]
> <span data-ttu-id="ea90e-120">Je nutné nastavit seznamy ACL pro%systemdrive%\Inetpub\Wwwroot tak, aby udělily oprávnění k úpravám účtu, pod kterým je spuštěný.</span><span class="sxs-lookup"><span data-stu-id="ea90e-120">You must set the ACLs on %systemdrive%\inetpub\wwwroot to grant modify permissions to the account under which you are running.</span></span> <span data-ttu-id="ea90e-121">Jinak některé události po sestavení selžou.</span><span class="sxs-lookup"><span data-stu-id="ea90e-121">Otherwise some post build events fail.</span></span> <span data-ttu-id="ea90e-122">Případně můžete seznamy ACL ponechat tak, jak jsou, a spustit příkazový řádek sady SDK nebo sadu Visual Studio jako správce.</span><span class="sxs-lookup"><span data-stu-id="ea90e-122">Alternatively, you can leave the ACLs as they are and run the SDK command prompt or Visual Studio as administrator.</span></span> <span data-ttu-id="ea90e-123">Některé akce sady Visual Studio (například připojení ladicího programu k pracovnímu procesu ASP.Net) vyžadují také oprávnění správce.</span><span class="sxs-lookup"><span data-stu-id="ea90e-123">Some Visual Studio actions (such as attaching a debugger to the ASP.Net worker process) also require administrative privileges.</span></span>

## <a name="setup-batch-files-and-scripts"></a><span data-ttu-id="ea90e-124">Nastavení dávkových souborů a skriptů</span><span class="sxs-lookup"><span data-stu-id="ea90e-124">Setup Batch Files and Scripts</span></span>
 <span data-ttu-id="ea90e-125">Soubory Setup. exe a Cleanup. exe Batch a skripty by se měly spouštět z Developer Command Prompt pro Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ea90e-125">Setup.exe and Cleanup.exe batch files and scripts should be run from Developer Command Prompt for Visual Studio.</span></span> <span data-ttu-id="ea90e-126">Několik nastavení a vyčištění souborů provádí úlohy, které vyžadují oprávnění správce a měly by být spouštěny s oprávněními správce.</span><span class="sxs-lookup"><span data-stu-id="ea90e-126">Several set up and clean up files perform tasks that require administrative privileges and should be launched with administrator privileges.</span></span>

## <a name="important-security-information-about-metadata-endpoints"></a><span data-ttu-id="ea90e-127">Důležité informace o zabezpečení pro koncové body metadat</span><span class="sxs-lookup"><span data-stu-id="ea90e-127">Important Security Information about Metadata Endpoints</span></span>
 <span data-ttu-id="ea90e-128">Aby nedocházelo k neúmyslnému zveřejnění potenciálně citlivých metadat služby, služba výchozí konfigurace služby Windows Communication Foundation (WCF) zakáže publikování metadat.</span><span class="sxs-lookup"><span data-stu-id="ea90e-128">To prevent unintentional disclosure of potentially sensitive service metadata, the default configuration for Windows Communication Foundation (WCF) services disables metadata publishing.</span></span> <span data-ttu-id="ea90e-129">Toto chování je standardně zabezpečené, ale také znamená, že nemůžete použít nástroj pro import metadat (například Svcutil. exe), aby se vygeneroval kód klienta vyžadovaný pro volání služby, pokud není v konfiguraci explicitně povolený chování publikování metadat služby.</span><span class="sxs-lookup"><span data-stu-id="ea90e-129">This behavior is secure by default, but also means that you cannot use a metadata import tool (such as Svcutil.exe) to generate the client code required to call the service unless the service’s metadata publishing behavior is explicitly enabled in configuration.</span></span> <span data-ttu-id="ea90e-130">Téměř všechny ukázky vystavují nezabezpečený koncový bod publikování metadat, aby bylo experimentování s ukázkami snazší.</span><span class="sxs-lookup"><span data-stu-id="ea90e-130">To make experimenting with the samples easier, almost all samples expose an unsecured metadata publishing endpoint.</span></span> <span data-ttu-id="ea90e-131">Tyto koncové body jsou možná dostupné anonymním neověřeným příjemcům a před nasazením těchto koncových bodů je nutné zajistit, aby bylo zajištěno, že bude jejich veřejněné zveřejnění metadat služby vhodné.</span><span class="sxs-lookup"><span data-stu-id="ea90e-131">Such endpoints are potentially available to anonymous unauthenticated consumers and care must be taken before deploying such endpoints to ensure that publicly disclosing a service’s metadata is appropriate.</span></span> <span data-ttu-id="ea90e-132">Další informace o publikování metadat služby najdete v ukázce [chování publikování metadat](metadata-publishing-behavior.md) .</span><span class="sxs-lookup"><span data-stu-id="ea90e-132">For more information about publishing service metadata, see the [Metadata Publishing Behavior](metadata-publishing-behavior.md) sample.</span></span> <span data-ttu-id="ea90e-133">Ukázku zabezpečení koncového bodu metadat najdete v ukázce pro [Vlastní zabezpečený koncový bod metadat](custom-secure-metadata-endpoint.md) .</span><span class="sxs-lookup"><span data-stu-id="ea90e-133">See the [Custom Secure Metadata Endpoint](custom-secure-metadata-endpoint.md) sample for a sample securing a metadata endpoint.</span></span>

## <a name="exception-handling"></a><span data-ttu-id="ea90e-134">Zpracování výjimek</span><span class="sxs-lookup"><span data-stu-id="ea90e-134">Exception Handling</span></span>
 <span data-ttu-id="ea90e-135">Obecně řečeno tyto ukázky nezahrnují zpracování výjimek, aby se kód zaměřil na předmět ukázky.</span><span class="sxs-lookup"><span data-stu-id="ea90e-135">Generally speaking these samples do not include exception handling to keep the code focused on the subject of the sample.</span></span> <span data-ttu-id="ea90e-136">Další informace o zpracování výjimek naleznete v ukázce [očekávaných výjimek](expected-exceptions.md) .</span><span class="sxs-lookup"><span data-stu-id="ea90e-136">For more information about exception handling, see the [Expected Exceptions](expected-exceptions.md) sample.</span></span>

## <a name="regenerating-clients-and-configuration-with-svcutil"></a><span data-ttu-id="ea90e-137">Opětovné generování klientů a konfigurace pomocí Svcutil</span><span class="sxs-lookup"><span data-stu-id="ea90e-137">Regenerating Clients and Configuration with Svcutil</span></span>
 <span data-ttu-id="ea90e-138">K opětovnému vygenerování kódu a konfigurace klienta pro většinu ukázek můžete použít nástroj pro dodávání [metadat (Svcutil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) .</span><span class="sxs-lookup"><span data-stu-id="ea90e-138">You can use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) to regenerate client code and configuration for most of the samples.</span></span> <span data-ttu-id="ea90e-139">Některé ukázky vyžadují ruční úpravu konfigurace.</span><span class="sxs-lookup"><span data-stu-id="ea90e-139">Some samples require manually edited configuration.</span></span> <span data-ttu-id="ea90e-140">Pokud například pomocí Svcutil. exe znovu vygenerujete konfiguraci pro ukázku, která používá přihlašovací údaje klientského certifikátu, musíte ručně zadat přihlašovací údaje, které jste nakonfigurovali dříve.</span><span class="sxs-lookup"><span data-stu-id="ea90e-140">For example, if you use Svcutil.exe to regenerate the configuration for a sample that uses client certificate credentials, you must manually specify the credentials previously configured.</span></span> <span data-ttu-id="ea90e-141">Některé ukázky používají konkrétní možnosti Svcutil. exe, které mají vliv na generovaný kód. tyto možnosti jsou uvedeny v konkrétních ukázkových tématech.</span><span class="sxs-lookup"><span data-stu-id="ea90e-141">Some samples use specific Svcutil.exe options to affect the generated code, these options are specified in the specific sample topics.</span></span>

### <a name="to-regenerate-the-client-and-configuration-files"></a><span data-ttu-id="ea90e-142">Obnovení klientského a konfiguračního souboru</span><span class="sxs-lookup"><span data-stu-id="ea90e-142">To regenerate the client and configuration files</span></span>

1. <span data-ttu-id="ea90e-143">Otevřete příkazový řádek sady SDK a přejděte do podadresáře pro konkrétní jazyk v umístění adresáře, kam jste si nainstalovali ukázku.</span><span class="sxs-lookup"><span data-stu-id="ea90e-143">Open an SDK command prompt and navigate to the language-specific subdirectory under the directory location where you installed the sample.</span></span>

2. <span data-ttu-id="ea90e-144">Pokud je služba typu na webu, použijte následující příkaz.</span><span class="sxs-lookup"><span data-stu-id="ea90e-144">If the service is a Web-hosted type, use the following command.</span></span>

    ```console
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost/servicemodelsamples/service.svc/mex /out:generatedClient.cs
    ```

     <span data-ttu-id="ea90e-145">Pokud je služba místně hostovaná, zadejte následující příkaz.</span><span class="sxs-lookup"><span data-stu-id="ea90e-145">If the service is a self-hosted type the following command.</span></span>

    ```console
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost:8000/servicemodelsamples/service.svc/mex /out:generatedClient.cs
    ```

     <span data-ttu-id="ea90e-146">Nahraďte `http://localhost:8000/ServiceModelSamples/service.svc/mex` adresou koncového bodu mex samoobslužné služby.</span><span class="sxs-lookup"><span data-stu-id="ea90e-146">Replace `http://localhost:8000/ServiceModelSamples/service.svc/mex` with the address of the self-hosted service's mex endpoint.</span></span>

     <span data-ttu-id="ea90e-147">K vygenerování klienta v typu Visual Basic použijte následující příkaz.</span><span class="sxs-lookup"><span data-stu-id="ea90e-147">To generate the client in a Visual Basic type, use the following command.</span></span>

    ```console
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost/servicemodelsamples/service.svc/mex /l:vb /out:generatedClient.vb
    ```

     <span data-ttu-id="ea90e-148">Pokud je tato služba samoobslužným typem, použijte následující příkaz.</span><span class="sxs-lookup"><span data-stu-id="ea90e-148">If the service is a self-hosted type, use the following command.</span></span>

    ```console
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost:8000/servicemodelsamples/service.svc/mex /l:vb /out:generatedClient.vb
    ```

    > [!NOTE]
    > <span data-ttu-id="ea90e-149">Pokud chcete přeskočit generování konfigurace klienta, přidejte možnost **/noconfig** .</span><span class="sxs-lookup"><span data-stu-id="ea90e-149">To skip the generation of client configuration add the **/noConfig** option.</span></span>

## <a name="see-also"></a><span data-ttu-id="ea90e-150">Viz také</span><span class="sxs-lookup"><span data-stu-id="ea90e-150">See also</span></span>

- [<span data-ttu-id="ea90e-151">Spouštění ukázek Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="ea90e-151">Running the Windows Communication Foundation Samples</span></span>](running-the-samples.md)
- [<span data-ttu-id="ea90e-152">Nástroj ServiceModel Metadata Utility (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="ea90e-152">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../servicemodel-metadata-utility-tool-svcutil-exe.md)
