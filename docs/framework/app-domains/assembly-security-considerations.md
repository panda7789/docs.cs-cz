---
title: Důležité informace o zabezpečení sestavení
ms.date: 03/30/2017
helpviewer_keywords:
- assemblies [.NET Framework], security
- signcodes
- names [.NET Framework], assemblies
- strong-named assemblies, security considerations
- signing assemblies
- assemblies [.NET Framework], signing
- granting permissions, assemblies
- assemblies [.NET Framework], strong-named
- names [.NET Framework], strong names
- permissions [.NET Framework], assemblies
- security [.NET Framework], assemblies
- integrity with assemblies
ms.assetid: 1b5439c1-f3d5-4529-bd69-01814703d067
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 8d83da6e995c35de650c496c5792e55b05dd9095
ms.sourcegitcommit: c93fd5139f9efcf6db514e3474301738a6d1d649
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/27/2018
ms.locfileid: "50088790"
---
# <a name="assembly-security-considerations"></a><span data-ttu-id="1a139-102">Důležité informace o zabezpečení sestavení</span><span class="sxs-lookup"><span data-stu-id="1a139-102">Assembly Security Considerations</span></span>
<a name="top"></a> <span data-ttu-id="1a139-103">Při sestavování sestavení, můžete zadat sadu oprávnění, která vyžaduje sestavení ke spuštění.</span><span class="sxs-lookup"><span data-stu-id="1a139-103">When you build an assembly, you can specify a set of permissions that the assembly requires to run.</span></span> <span data-ttu-id="1a139-104">Legitimace vychází, zda jsou určitá oprávnění udělit nebo nebyla udělena na sestavení.</span><span class="sxs-lookup"><span data-stu-id="1a139-104">Whether certain permissions are granted or not granted to an assembly is based on evidence.</span></span>  
  
 <span data-ttu-id="1a139-105">Legitimace se používá dva různé způsoby:</span><span class="sxs-lookup"><span data-stu-id="1a139-105">There are two distinct ways evidence is used:</span></span>  
  
-   <span data-ttu-id="1a139-106">Vstupní legitimace se sloučí s legitimací shromážděné zavaděč, chcete-li vytvořit finální sada ověření pro řešení zásady.</span><span class="sxs-lookup"><span data-stu-id="1a139-106">The input evidence is merged with the evidence gathered by the loader to create a final set of evidence used for policy resolution.</span></span> <span data-ttu-id="1a139-107">Metody, které používají tuto sémantiku patří **Assembly.Load**, **Assembly.LoadFrom**, a **Activator.CreateInstance**.</span><span class="sxs-lookup"><span data-stu-id="1a139-107">The methods that use this semantic include **Assembly.Load**, **Assembly.LoadFrom**, and **Activator.CreateInstance**.</span></span>  
  
-   <span data-ttu-id="1a139-108">Vstupní legitimace se používá beze změny jako výsledná sada ověření pro řešení zásady.</span><span class="sxs-lookup"><span data-stu-id="1a139-108">The input evidence is used unaltered as the final set of evidence used for policy resolution.</span></span> <span data-ttu-id="1a139-109">Metody, které používají tuto sémantiku patří **Assembly.Load(byte[])** a **AppDomain.DefineDynamicAssembly()**.</span><span class="sxs-lookup"><span data-stu-id="1a139-109">The methods that use this semantic include **Assembly.Load(byte[])** and **AppDomain.DefineDynamicAssembly()**.</span></span>  
  
 <span data-ttu-id="1a139-110">Volitelné oprávnění lze udělit pomocí [zásady zabezpečení](../../../docs/framework/misc/code-access-security-basics.md) nastavit v počítači, ve kterém se spustí sestavení.</span><span class="sxs-lookup"><span data-stu-id="1a139-110">Optional permissions can be granted by the [security policy](../../../docs/framework/misc/code-access-security-basics.md) set on the computer where the assembly will run.</span></span> <span data-ttu-id="1a139-111">Pokud chcete svůj kód pro zpracování všechny potenciální výjimky zabezpečení, můžete provést jednu z následujících:</span><span class="sxs-lookup"><span data-stu-id="1a139-111">If you want your code to handle all potential security exceptions, you can do one of the following:</span></span>  
  
-   <span data-ttu-id="1a139-112">Vložte žádost o oprávnění pro všechna oprávnění, musíte mít kód a ještě před zahájením zpracování selhání během načítání, který nastane, pokud nejsou udělena oprávnění.</span><span class="sxs-lookup"><span data-stu-id="1a139-112">Insert a permission request for all the permissions your code must have, and handle up front the load-time failure that occurs if the permissions are not granted.</span></span>  
  
-   <span data-ttu-id="1a139-113">Nepoužívejte žádosti o oprávnění k získání oprávnění váš kód může být nutné, ale být připravena ke zpracování bezpečnostním výjimkám, pokud nejsou udělena oprávnění.</span><span class="sxs-lookup"><span data-stu-id="1a139-113">Do not use a permission request to obtain permissions your code might need, but be prepared to handle security exceptions if permissions are not granted.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="1a139-114">Zabezpečení je komplexní oblast a můžete vybírat z mnoha různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="1a139-114">Security is a complex area, and you have many options to choose from.</span></span> <span data-ttu-id="1a139-115">Další informace najdete v tématu [klíčové koncepty zabezpečení](../../../docs/standard/security/key-security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="1a139-115">For more information, see [Key Security Concepts](../../../docs/standard/security/key-security-concepts.md).</span></span>  
  
 <span data-ttu-id="1a139-116">V okamžiku načtení legitimaci sestavení používá jako vstup pro zásady zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="1a139-116">At load time, the assembly's evidence is used as input to security policy.</span></span> <span data-ttu-id="1a139-117">Zásady zabezpečení se stanoví podle podniku a správce počítače a nastavení zásad pro uživatele a určuje sadu oprávnění udělenou všechen spravovaný kód při spuštění.</span><span class="sxs-lookup"><span data-stu-id="1a139-117">Security policy is established by the enterprise and the computer's administrator as well as by user policy settings, and determines the set of permissions that is granted to all managed code when executed.</span></span> <span data-ttu-id="1a139-118">Zásady zabezpečení je možné navázat vydavatele sestavení (Pokud má podpisový generovaných nástrojem pro podpis), webu a zóny (v Internet Exploreru podmínky) sestavení byl stažen z nebo pro sestavení silným názvem.</span><span class="sxs-lookup"><span data-stu-id="1a139-118">Security policy can be established for the publisher of the assembly (if it has a signing tool generated signature), for the Web site and zone (in Internet Explorer terms) the assembly was downloaded from, or for the assembly's strong name.</span></span> <span data-ttu-id="1a139-119">Například správce počítače můžete vytvořit zásady zabezpečení, které umožňuje veškerý kód stáhnout z webu a podepsány dané softwarová společnost pro přístup k databázi v počítači, ale bez možnosti udělovat přístup k zápisu na disk počítače.</span><span class="sxs-lookup"><span data-stu-id="1a139-119">For example, a computer's administrator can establish security policy that allows all code downloaded from a Web site and signed by a given software company to access a database on a computer, but does not grant access to write to the computer's disk.</span></span>  
  
## <a name="strong-named-assemblies-and-signing-tools"></a><span data-ttu-id="1a139-120">Sestavení se silným názvem a nástroje pro podepisování</span><span class="sxs-lookup"><span data-stu-id="1a139-120">Strong-Named Assemblies and Signing Tools</span></span>  

 > [!WARNING]
 > <span data-ttu-id="1a139-121">Nespoléhejte na silných názvů pro zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="1a139-121">Do not rely on strong names for security.</span></span> <span data-ttu-id="1a139-122">Poskytují jedinečné identity.</span><span class="sxs-lookup"><span data-stu-id="1a139-122">They provide a unique identity only.</span></span>

 <span data-ttu-id="1a139-123">Sestavení lze podepsat ve dvou různých ale vzájemně doplňují způsoby: pomocí silného názvu nebo s použitím [SignTool.exe (nástroj Sign Tool)](../../../docs/framework/tools/signtool-exe.md).</span><span class="sxs-lookup"><span data-stu-id="1a139-123">You can sign an assembly in two different but complementary ways: with a strong name or by using  [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md).</span></span> <span data-ttu-id="1a139-124">Podepisování sestavení silným názvem přidá veřejný šifrovací klíče do souboru, který obsahuje manifest sestavení.</span><span class="sxs-lookup"><span data-stu-id="1a139-124">Signing an assembly with a strong name adds public key encryption to the file containing the assembly manifest.</span></span> <span data-ttu-id="1a139-125">Podepisování se silným názvem pomáhá zkontrolujte jedinečnost názvu, bránit falšování a poskytnout volající některé identity, když je vyřešený odkaz.</span><span class="sxs-lookup"><span data-stu-id="1a139-125">Strong name signing helps to verify name uniqueness, prevent name spoofing, and provide callers with some identity when a reference is resolved.</span></span>  
  
 <span data-ttu-id="1a139-126">Žádná úroveň vztahu důvěryhodnosti není přidružená silným názvem, díky čemuž je [SignTool.exe (nástroj Sign Tool)](../../../docs/framework/tools/signtool-exe.md) důležité.</span><span class="sxs-lookup"><span data-stu-id="1a139-126">No level of trust is associated with a strong name, which makes [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) important.</span></span> <span data-ttu-id="1a139-127">Dva podpisový nástroje vyžadují, aby vydavatel prokáže svoji identitu autoritu třetí strany a získat certifikát.</span><span class="sxs-lookup"><span data-stu-id="1a139-127">The two signing tools require a publisher to prove its identity to a third-party authority and obtain a certificate.</span></span> <span data-ttu-id="1a139-128">Tento certifikát bude poté vložen do souboru a můžou používat Správce rozhodnout, zda důvěřovat pravosti kódu.</span><span class="sxs-lookup"><span data-stu-id="1a139-128">This certificate is then embedded in your file and can be used by an administrator to decide whether to trust the code's authenticity.</span></span>  
  
 <span data-ttu-id="1a139-129">Můžete udělit silného názvu a digitální podpis vytvořený pomocí [SignTool.exe (nástroj Sign Tool)](../../../docs/framework/tools/signtool-exe.md) na sestavení, nebo můžete použít buď samostatně.</span><span class="sxs-lookup"><span data-stu-id="1a139-129">You can give both a strong name and a digital signature created using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) to an assembly, or you can use either alone.</span></span> <span data-ttu-id="1a139-130">Dva nástroje pro podepisování se můžete přihlásit pouze jeden soubor najednou. Vícesouborové sestavení podepsat soubor, který obsahuje manifest sestavení.</span><span class="sxs-lookup"><span data-stu-id="1a139-130">The two signing tools can sign only one file at a time; for a multifile assembly, you sign the file that contains the assembly manifest.</span></span> <span data-ttu-id="1a139-131">Silný název je uložen v souboru, který obsahuje manifest sestavení, ale signatura vytvořena pomocí [SignTool.exe (nástroj Sign Tool)](../../../docs/framework/tools/signtool-exe.md) je uložen v vyhrazené místo v souboru (PE portable executable), který obsahuje manifest sestavení.</span><span class="sxs-lookup"><span data-stu-id="1a139-131">A strong name is stored in the file containing the assembly manifest, but a signature created using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) is stored in a reserved slot in the portable executable (PE) file containing the assembly manifest.</span></span> <span data-ttu-id="1a139-132">Podepisování sestavení pomocí [SignTool.exe (nástroj Sign Tool)](../../../docs/framework/tools/signtool-exe.md) lze použít (s nebo bez silného názvu) Pokud již máte důvěryhodnost hierarchie, která závisí na[SignTool.exe (nástroj Sign Tool)](../../../docs/framework/tools/signtool-exe.md) vygeneruje podpisy, nebo když vaše zásady používá pouze část klíče a nekontroluje řetěz certifikátů.</span><span class="sxs-lookup"><span data-stu-id="1a139-132">Signing of an assembly using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) can be used (with or without a strong name) when you already have a trust hierarchy that relies on[SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) generated signatures, or when your policy uses only the key portion and does not check a chain of trust.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1a139-133">Při použití silným názvem a podpisem podpisový nástroj na sestavení, silný název musí být nejprve přiřazena.</span><span class="sxs-lookup"><span data-stu-id="1a139-133">When using both a strong name and a signing tool signature on an assembly, the strong name must be assigned first.</span></span>  
  
 <span data-ttu-id="1a139-134">Modul common language runtime také provádí ověření algoritmu hash; manifest sestavení obsahuje seznam všech souborů, které tvoří sestavení, včetně hodnoty hash každého souboru, který existoval, když byla vytvořena v manifestu.</span><span class="sxs-lookup"><span data-stu-id="1a139-134">The common language runtime also performs a hash verification; the assembly manifest contains a list of all files that make up the assembly, including a hash of each file as it existed when the manifest was built.</span></span> <span data-ttu-id="1a139-135">Po načtení jednotlivých souborů je z obsahu vytvořena hodnota hash a ta je porovnána s hodnotou hash uloženou v manifestu.</span><span class="sxs-lookup"><span data-stu-id="1a139-135">As each file is loaded, its contents are hashed and compared with the hash value stored in the manifest.</span></span> <span data-ttu-id="1a139-136">Pokud se tyto dvě hodnoty hash neshodují, sestavení se nepodaří načíst.</span><span class="sxs-lookup"><span data-stu-id="1a139-136">If the two hashes do not match, the assembly fails to load.</span></span>  
  
 <span data-ttu-id="1a139-137">Protože silné pojmenovávání a podepisování pomocí [SignTool.exe (nástroj Sign Tool)](../../../docs/framework/tools/signtool-exe.md) zaručit integritu, zásady zabezpečení přístupu kódu můžete založit na tyto dvě formy legitimaci sestavení.</span><span class="sxs-lookup"><span data-stu-id="1a139-137">Because strong naming and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) guarantee integrity, you can base code access security policy on these two forms of assembly evidence.</span></span> <span data-ttu-id="1a139-138">Silné názvy a podepisování pomocí [SignTool.exe (nástroj Sign Tool)](../../../docs/framework/tools/signtool-exe.md) zaručit integritu prostřednictvím digitálních podpisů a certifikáty.</span><span class="sxs-lookup"><span data-stu-id="1a139-138">Strong naming and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) guarantee integrity through digital signatures and certificates.</span></span> <span data-ttu-id="1a139-139">Všechny uvedené technologie – hodnoty hash ověřování, silné názvy a podepisování pomocí [SignTool.exe (nástroj Sign Tool)](../../../docs/framework/tools/signtool-exe.md)– spolupracují, aby se ujistěte, že sestavení nebyl změněn žádným způsobem.</span><span class="sxs-lookup"><span data-stu-id="1a139-139">All the technologies mentioned—hash verification, strong naming, and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md)—work together to ensure that the assembly has not been altered in any way.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1a139-140">Viz také</span><span class="sxs-lookup"><span data-stu-id="1a139-140">See Also</span></span>  
- [<span data-ttu-id="1a139-141">Sestavení se silným názvem</span><span class="sxs-lookup"><span data-stu-id="1a139-141">Strong-Named Assemblies</span></span>](../../../docs/framework/app-domains/strong-named-assemblies.md)  
- [<span data-ttu-id="1a139-142">Sestavení v modulu CLR (Common Language Runtime)</span><span class="sxs-lookup"><span data-stu-id="1a139-142">Assemblies in the Common Language Runtime</span></span>](../../../docs/framework/app-domains/assemblies-in-the-common-language-runtime.md)  
- [<span data-ttu-id="1a139-143">SignTool.exe (nástroj pro podpis)</span><span class="sxs-lookup"><span data-stu-id="1a139-143">SignTool.exe (Sign Tool)</span></span>](../../../docs/framework/tools/signtool-exe.md)
