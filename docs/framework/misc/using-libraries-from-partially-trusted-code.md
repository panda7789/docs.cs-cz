---
title: Používání knihoven z částečně důvěryhodného kódu
description: Zjistěte, jak používat knihovny z částečně důvěryhodného kódu. Použijte atribut AllowPartiallyTrustedCallersAttribute pro volání sdílených spravovaných knihoven.
ms.date: 03/30/2017
helpviewer_keywords:
- security [.NET Framework], partially trusted code
- partially trusted code
- partial trust
- AllowPartiallyTrustedCallersAttribute attribute
- code access security, partially trusted code
- APTCA
ms.assetid: dd66cd4c-b087-415f-9c3e-94e3a1835f74
ms.openlocfilehash: 38d9c7c7239c849041683525895293a281e3e10f
ms.sourcegitcommit: c37e8d4642fef647ebab0e1c618ecc29ddfe2a0f
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/06/2020
ms.locfileid: "87855722"
---
# <a name="using-libraries-from-partially-trusted-code"></a><span data-ttu-id="c3b01-104">Používání knihoven z částečně důvěryhodného kódu</span><span class="sxs-lookup"><span data-stu-id="c3b01-104">Using Libraries from Partially Trusted Code</span></span>

[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
> [!NOTE]
> <span data-ttu-id="c3b01-105">Toto téma řeší chování sestavení se silným názvem a vztahuje se pouze na sestavení [úrovně 1](security-transparent-code-level-1.md) .</span><span class="sxs-lookup"><span data-stu-id="c3b01-105">This topic addresses the behavior of strong-named assemblies and applies only to [Level 1](security-transparent-code-level-1.md) assemblies.</span></span> <span data-ttu-id="c3b01-106">[Kód transparentní pro zabezpečení, sestavení úrovně 2](security-transparent-code-level-2.md) v .NET Framework 4 nebo novějších není ovlivněn silnými názvy.</span><span class="sxs-lookup"><span data-stu-id="c3b01-106">[Security-Transparent Code, Level 2](security-transparent-code-level-2.md) assemblies in the .NET Framework 4 or later are not affected by strong names.</span></span> <span data-ttu-id="c3b01-107">Další informace o změnách v systému zabezpečení najdete v tématu [změny zabezpečení](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes).</span><span class="sxs-lookup"><span data-stu-id="c3b01-107">For more information about changes to the security system, see [Security Changes](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes).</span></span>  
  
 <span data-ttu-id="c3b01-108">Aplikacím, které přijímají méně než úplný vztah důvěryhodnosti od svého hostitele nebo izolovaného prostoru (sandbox), není povoleno volat sdílené spravované knihovny, pokud modul pro zápis knihovny je výslovně nepovoluje prostřednictvím použití <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atributu.</span><span class="sxs-lookup"><span data-stu-id="c3b01-108">Applications that receive less than full trust from their host or sandbox are not allowed to call shared managed libraries unless the library writer specifically allows them to through the use of the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute.</span></span> <span data-ttu-id="c3b01-109">Proto musí autoři aplikací vědět, že některé knihovny nebudou pro ně z částečně důvěryhodného kontextu k dispozici.</span><span class="sxs-lookup"><span data-stu-id="c3b01-109">Therefore, application writers must be aware that some libraries will not be available to them from a partially trusted context.</span></span> <span data-ttu-id="c3b01-110">Ve výchozím nastavení je částečně důvěryhodný všechen kód, který se spouští v [izolovaném prostoru (sandbox)](how-to-run-partially-trusted-code-in-a-sandbox.md) s částečným vztahem důvěryhodnosti a není v seznamu sestavení s úplným vztahem důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="c3b01-110">By default, all code that executes in a partial-trust [sandbox](how-to-run-partially-trusted-code-in-a-sandbox.md) and is not in the list of full-trust assemblies is partially trusted.</span></span> <span data-ttu-id="c3b01-111">Neočekáváte-li, že se váš kód má spustit z částečně důvěryhodného kontextu nebo bude volán částečně důvěryhodným kódem, nemusíte mít obavy z informací v této části.</span><span class="sxs-lookup"><span data-stu-id="c3b01-111">If you do not expect your code to be executed from a partially trusted context or to be called by partially trusted code, you do not have to be concerned about the information in this section.</span></span> <span data-ttu-id="c3b01-112">Nicméně pokud píšete kód, který musí komunikovat s částečně důvěryhodným kódem nebo pracovat z částečně důvěryhodného kontextu, měli byste vzít v úvahu následující faktory:</span><span class="sxs-lookup"><span data-stu-id="c3b01-112">However, if you write code that must interact with partially trusted code or operate from a partially trusted context, you should consider the following factors:</span></span>  
  
- <span data-ttu-id="c3b01-113">Knihovny musí být podepsány se silným názvem, aby je bylo možné sdílet s více aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="c3b01-113">Libraries must be signed with a strong name in order to be shared by multiple applications.</span></span> <span data-ttu-id="c3b01-114">Silné názvy umožňují, aby váš kód byl umístěn do globální mezipaměti sestavení (GAC) nebo přidaný do seznamu plně důvěryhodných izolovaného prostoru (sandboxing) <xref:System.AppDomain> a umožnil uživatelům ověření, že z vás skutečně pochází konkrétní mobilní kód.</span><span class="sxs-lookup"><span data-stu-id="c3b01-114">Strong names allow your code to be placed in the global assembly cache or added to the full-trust list of a sandboxing <xref:System.AppDomain>, and allow consumers to verify that a particular piece of mobile code actually originates from you.</span></span>  
  
- <span data-ttu-id="c3b01-115">Ve výchozím nastavení provádí sdílené knihovny se silným názvem [1](security-transparent-code-level-1.md) , které mají pro úplný vztah důvěryhodnosti automaticky implicitní [LinkDemand](link-demands.md) , a to bez toho, aby zapisovač knihovny musel dělat cokoli.</span><span class="sxs-lookup"><span data-stu-id="c3b01-115">By default, strong-named [Level 1](security-transparent-code-level-1.md) shared libraries perform an implicit [LinkDemand](link-demands.md) for full trust automatically, without the library writer having to do anything.</span></span>  
  
- <span data-ttu-id="c3b01-116">Pokud volající nemá úplný vztah důvěryhodnosti, ale přesto se pokusí zavolat takovou knihovnu, modul runtime vyvolá výjimku <xref:System.Security.SecurityException> a volající není povolen odkaz na knihovnu.</span><span class="sxs-lookup"><span data-stu-id="c3b01-116">If a caller does not have full trust but still tries to call such a library, the runtime throws a <xref:System.Security.SecurityException> and the caller is not allowed to link to the library.</span></span>  
  
- <span data-ttu-id="c3b01-117">Chcete-li zakázat automatický **LinkDemand** a zabránit vyvolání výjimky, můžete umístit atribut **AllowPartiallyTrustedCallersAttribute** do oboru sestavení sdílené knihovny.</span><span class="sxs-lookup"><span data-stu-id="c3b01-117">In order to disable the automatic **LinkDemand** and prevent the exception from being thrown, you can place the **AllowPartiallyTrustedCallersAttribute** attribute on the assembly scope of a shared library.</span></span> <span data-ttu-id="c3b01-118">Tento atribut umožňuje volání knihoven z částečně důvěryhodného spravovaného kódu.</span><span class="sxs-lookup"><span data-stu-id="c3b01-118">This attribute allows your libraries to be called from partially trusted managed code.</span></span>  
  
- <span data-ttu-id="c3b01-119">Částečně důvěryhodný kód, kterému je udělen přístup ke knihovně s tímto atributem, je nadále předmětem dalších omezení definovaných v <xref:System.AppDomain> .</span><span class="sxs-lookup"><span data-stu-id="c3b01-119">Partially trusted code that is granted access to a library with this attribute is still subject to further restrictions defined by the <xref:System.AppDomain>.</span></span>  
  
- <span data-ttu-id="c3b01-120">Neexistuje žádný programový způsob pro částečně důvěryhodný kód pro volání knihovny, která nemá atribut **AllowPartiallyTrustedCallersAttribute** .</span><span class="sxs-lookup"><span data-stu-id="c3b01-120">There is no programmatic way for partially trusted code to call a library that does not have the **AllowPartiallyTrustedCallersAttribute** attribute.</span></span>  
  
 <span data-ttu-id="c3b01-121">Knihovny, které jsou soukromé pro určitou aplikaci, nevyžadují silný název nebo atribut **AllowPartiallyTrustedCallersAttribute** a nemohou být odkazovány potenciálně škodlivým kódem mimo aplikaci.</span><span class="sxs-lookup"><span data-stu-id="c3b01-121">Libraries that are private to a specific application do not require a strong name or the **AllowPartiallyTrustedCallersAttribute** attribute and cannot be referenced by potentially malicious code outside the application.</span></span> <span data-ttu-id="c3b01-122">Takový kód je chráněn proti úmyslnému nebo neúmyslnému zneužití částečně důvěryhodným mobilním kódem, aniž by vývojář musel dělat něco dalšího.</span><span class="sxs-lookup"><span data-stu-id="c3b01-122">Such code is protected against intentional or unintentional misuse by partially trusted mobile code without the developer having to do anything extra.</span></span>  
  
 <span data-ttu-id="c3b01-123">Měli byste zvážit explicitní povolení použití částečně důvěryhodným kódem pro následující typy kódu:</span><span class="sxs-lookup"><span data-stu-id="c3b01-123">You should consider explicitly enabling use by partially trusted code for the following types of code:</span></span>  
  
- <span data-ttu-id="c3b01-124">Kód, který byl usilovně testován na chyby zabezpečení a je v souladu s pokyny popsanými v [pokynech pro bezpečné kódování](../../standard/security/secure-coding-guidelines.md).</span><span class="sxs-lookup"><span data-stu-id="c3b01-124">Code that has been diligently tested for security vulnerabilities and is in compliance with the guidelines described in [Secure Coding Guidelines](../../standard/security/secure-coding-guidelines.md).</span></span>  
  
- <span data-ttu-id="c3b01-125">Knihovny kódu se silným názvem, které jsou speciálně určeny pro částečně důvěryhodné scénáře.</span><span class="sxs-lookup"><span data-stu-id="c3b01-125">Strong-named code libraries that are specifically written for partially trusted scenarios.</span></span>  
  
- <span data-ttu-id="c3b01-126">Všechny součásti (bez ohledu na to, zda jsou částečně nebo plně důvěryhodné) podepsané silným názvem, který bude volán kódem staženým z Internetu.</span><span class="sxs-lookup"><span data-stu-id="c3b01-126">Any components (whether partially or fully trusted) signed with a strong name that will be called by code that is downloaded from the Internet.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c3b01-127">Některé třídy v knihovně tříd .NET Framework nemají atribut **AllowPartiallyTrustedCallersAttribute** a nemohou být volány částečně důvěryhodným kódem.</span><span class="sxs-lookup"><span data-stu-id="c3b01-127">Some classes in the .NET Framework class library do not have the **AllowPartiallyTrustedCallersAttribute** attribute and cannot be called by partially trusted code.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c3b01-128">Viz také</span><span class="sxs-lookup"><span data-stu-id="c3b01-128">See also</span></span>

- [<span data-ttu-id="c3b01-129">Zabezpečení přístupu kódu</span><span class="sxs-lookup"><span data-stu-id="c3b01-129">Code Access Security</span></span>](code-access-security.md)
