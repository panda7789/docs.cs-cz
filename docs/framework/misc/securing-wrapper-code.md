---
title: Zabezpečení kódu obálky
description: Přečtěte si, jak zabezpečit kód obálky, který může otevřít jedinečnou sadu slabých míst zabezpečení, zejména v případě, že má obálka vyšší důvěryhodnost než kód, který ho používá.
ms.date: 03/30/2017
helpviewer_keywords:
- security [.NET Framework], wrapper code
- wrapper code, securing
- secure coding, wrapper code
- code security, wrapper code
ms.assetid: 1df6c516-5bba-48bd-b450-1070e04b7389
ms.openlocfilehash: f448cbf55f3ad992ba9dcc53d5be70b364038744
ms.sourcegitcommit: c37e8d4642fef647ebab0e1c618ecc29ddfe2a0f
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/06/2020
ms.locfileid: "87855748"
---
# <a name="securing-wrapper-code"></a><span data-ttu-id="3a9fa-103">Zabezpečení kódu obálky</span><span class="sxs-lookup"><span data-stu-id="3a9fa-103">Securing Wrapper Code</span></span>

[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
 <span data-ttu-id="3a9fa-104">Kód obálky, zejména v případě, že má obálka vyšší důvěryhodnost než kód, který ho používá, může otevřít jedinečnou sadu slabých míst zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-104">Wrapper code, especially where the wrapper has higher trust than code that uses it, can open a unique set of security weaknesses.</span></span> <span data-ttu-id="3a9fa-105">Cokoli, co se provede jménem volajícího, kde omezená oprávnění volajícího nejsou zahrnutá do příslušné kontroly zabezpečení, představují potenciální slabá místa, která je možné zneužít.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-105">Anything done on behalf of a caller, where the caller's limited permissions are not included in the appropriate security check, is a potential weakness to be exploited.</span></span>  
  
 <span data-ttu-id="3a9fa-106">Nikdy nepovolujte žádnou položku prostřednictvím obálky, kterou volající sám nevytvořil.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-106">Never enable something through the wrapper that the caller could not do itself.</span></span> <span data-ttu-id="3a9fa-107">Jedná se o zvláštní nebezpečí při provádění něčeho, co zahrnuje omezená kontrolu zabezpečení, a to na rozdíl od úplného požadavku na procházení zásobníku.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-107">This is a special danger when doing something that involves a limited security check, as opposed to a full stack walk demand.</span></span> <span data-ttu-id="3a9fa-108">V případě, že jsou zapojeny kontroly s jednou úrovní, může být při vzájemném navýšení kódu obálky mezi skutečným volajícím a prvkem rozhraní API snadno úspěšná kontrola zabezpečení, a to proto, že by to mělo oslabit zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-108">When single-level checks are involved, interposing the wrapper code between the real caller and the API element in question can easily cause the security check to succeed when it should not, thereby weakening security.</span></span>  
  
## <a name="delegates"></a><span data-ttu-id="3a9fa-109">Delegáty</span><span class="sxs-lookup"><span data-stu-id="3a9fa-109">Delegates</span></span>  
 <span data-ttu-id="3a9fa-110">Zabezpečení delegáta se liší mezi verzemi .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-110">Delegate security differs between versions of the .NET Framework.</span></span>  <span data-ttu-id="3a9fa-111">Tato část popisuje různá chování delegátů a související otázky zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-111">This section describes the different delegate behaviors and associated security considerations.</span></span>  
  
### <a name="in-version-10-and-11-of-the-net-framework"></a><span data-ttu-id="3a9fa-112">Ve verzi 1,0 a 1,1 .NET Framework</span><span class="sxs-lookup"><span data-stu-id="3a9fa-112">In version 1.0 and 1.1 of the .NET Framework</span></span>  
 <span data-ttu-id="3a9fa-113">Verze 1,0 a 1,1 .NET Framework provádět následující akce zabezpečení proti tvůrci delegáta a volajícímu delegáta.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-113">Version 1.0 and 1.1 of the .NET Framework perform the following security actions against a delegate creator and a delegate caller.</span></span>  
  
- <span data-ttu-id="3a9fa-114">Při vytvoření delegáta je odkaz zabezpečení v metodě cíle delegáta proveden proti sadě udělení tvůrce delegáta.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-114">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="3a9fa-115">Nepovedlo se splnit výsledky bezpečnostní akce v <xref:System.Security.SecurityException> .</span><span class="sxs-lookup"><span data-stu-id="3a9fa-115">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
- <span data-ttu-id="3a9fa-116">Když je vyvolán delegát, jsou provedeny všechny existující požadavky zabezpečení na volajícím delegáta.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-116">When the delegate is invoked, any existing security demands on the delegate caller are performed.</span></span>  
  
 <span data-ttu-id="3a9fa-117">Pokaždé, když váš kód trvá <xref:System.Delegate> od méně důvěryhodného kódu, který by jej mohl zavolat, ujistěte se, že nepovolujete, aby se nepovolil méně důvěryhodný kód pro zvýšení jeho oprávnění.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-117">Whenever your code takes a <xref:System.Delegate> from less-trusted code that might call it, make sure that you are not enabling the less-trusted code to escalate its permissions.</span></span> <span data-ttu-id="3a9fa-118">Pokud převezmete delegáta a použijete jej později, kód, který vytvořil delegáta, není v zásobníku volání a jeho oprávnění nebudou testována v případě, že se kód v rámci delegáta pokusí o chráněnou operaci.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-118">If you take a delegate and use it later, the code that created the delegate is not on the call stack and its permissions will not be tested if code in or under the delegate attempts a protected operation.</span></span> <span data-ttu-id="3a9fa-119">Pokud má váš kód a volající kód vyšší oprávnění než tvůrce, může tvůrce orchestrovat cestu volání, aniž by byla součástí zásobníku volání.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-119">If your code and the caller code have higher privileges than the creator, the creator can orchestrate the call path without being part of the call stack.</span></span>  
  
### <a name="in-version-20-and-later-versions-of-the-net-framework"></a><span data-ttu-id="3a9fa-120">Verze 2,0 a novější verze .NET Framework</span><span class="sxs-lookup"><span data-stu-id="3a9fa-120">In version 2.0 and later versions of the .NET Framework</span></span>  
 <span data-ttu-id="3a9fa-121">Na rozdíl od předchozích verzí verze 2,0 a novější verze .NET Framework provádí akci zabezpečení proti tvůrci delegáta při vytvoření a volání delegáta.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-121">Unlike previous versions, version 2.0 and later versions of the .NET Framework performs security action against the delegate creator when the delegate is created and called.</span></span>  
  
- <span data-ttu-id="3a9fa-122">Při vytvoření delegáta je odkaz zabezpečení v metodě cíle delegáta proveden proti sadě udělení tvůrce delegáta.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-122">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="3a9fa-123">Nepovedlo se splnit výsledky bezpečnostní akce v <xref:System.Security.SecurityException> .</span><span class="sxs-lookup"><span data-stu-id="3a9fa-123">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
- <span data-ttu-id="3a9fa-124">Sada udělení udělená tvůrci delegáta je také zachycena během vytváření delegáta a uložena společně s delegátem.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-124">The delegate creator's grant set is also captured during delegate creation and stored with the delegate.</span></span>  
  
- <span data-ttu-id="3a9fa-125">Když je delegát vyvolán, zachycená sada přidělení Tvůrce delegáta se nejprve vyhodnotí proti jakýmkoliv požadavkům v aktuálním kontextu, pokud tvůrce delegáta a volající patří do různých sestavení.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-125">When the delegate is invoked, the delegate creator's captured grant set is first evaluated against any demands in the current context if the delegate creator and caller belong to different assemblies.</span></span>  <span data-ttu-id="3a9fa-126">Dále jsou provedeny všechny existující požadavky zabezpečení na volajícím delegáta.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-126">Next, any existing security demands on the delegate caller are performed.</span></span>  
  
## <a name="link-demands-and-wrappers"></a><span data-ttu-id="3a9fa-127">Požadavky na propojení a obálky</span><span class="sxs-lookup"><span data-stu-id="3a9fa-127">Link demands and wrappers</span></span>  
 <span data-ttu-id="3a9fa-128">Speciální případ ochrany s požadavky propojení byl posílen v infrastruktuře zabezpečení, ale stále je zdrojem možných slabých stránek v kódu.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-128">A special protection case with link demands has been strengthened in the security infrastructure, but it is still a source of possible weakness in your code.</span></span>  
  
 <span data-ttu-id="3a9fa-129">Pokud plně důvěryhodný kód volá vlastnost, událost nebo metodu chráněnou [LinkDemand](link-demands.md), volání je úspěšné, pokud je splněna kontrolní oprávnění **LinkDemand** pro volajícího.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-129">If fully trusted code calls a property, event, or method protected by a [LinkDemand](link-demands.md), the call succeeds if the **LinkDemand** permission check for the caller is satisfied.</span></span> <span data-ttu-id="3a9fa-130">Kromě toho, pokud plně důvěryhodný kód zveřejňuje třídu, která přebírá název vlastnosti a volá svůj přístupový objekt **Get** pomocí reflexe, volání metody **Get** je úspěšné, i když uživatelský kód nemá právo na přístup k této vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-130">Additionally, if the fully trusted code exposes a class that takes the name of a property and calls its **get** accessor using reflection, that call to the **get** accessor succeeds even though the user code does not have the right to access this property.</span></span> <span data-ttu-id="3a9fa-131">Důvodem je, že **LinkDemand** kontroluje pouze bezprostředního volajícího, což je plně důvěryhodný kód.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-131">This is because the **LinkDemand** checks only the immediate caller, which is the fully trusted code.</span></span> <span data-ttu-id="3a9fa-132">V podstatě plně důvěryhodný kód provádí privilegované volání jménem uživatelského kódu bez toho, aby se zajistilo, že kód uživatele má oprávnění k provedení tohoto volání.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-132">In essence, the fully trusted code is making a privileged call on behalf of user code without making sure that the user code has the right to make that call.</span></span>  
  
 <span data-ttu-id="3a9fa-133">Aby se zabránilo takovému bezpečnostnímu otvoru, modul CLR (Common Language Runtime) rozšiřuje kontrolu na úplný požadavek na procházení zásobníku na jakémkoli nepřímém volání metody, konstruktoru, vlastnosti nebo události chráněné **LinkDemand**.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-133">To help prevent such security holes, the common language runtime extends the check into a full stack-walking demand on any indirect call to a method, constructor, property, or event protected by a **LinkDemand**.</span></span> <span data-ttu-id="3a9fa-134">Tato ochrana má za následek nějaké náklady na výkon a mění sémantiku kontroly zabezpečení. úplný požadavek na procházení zásobníku může selhat, pokud by byla úspěšná i jedna úroveň kontroly.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-134">This protection incurs some performance costs and changes the semantics of the security check; the full stack-walk demand might fail where the faster, one-level check would have passed.</span></span>  
  
## <a name="assembly-loading-wrappers"></a><span data-ttu-id="3a9fa-135">Sestavení – načítání obálek</span><span class="sxs-lookup"><span data-stu-id="3a9fa-135">Assembly loading wrappers</span></span>  
 <span data-ttu-id="3a9fa-136">Několik metod, které slouží k načtení spravovaného kódu, včetně <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> , načítají sestavení s legitimací volajícího.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-136">Several methods used to load managed code, including <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, load assemblies with the evidence of the caller.</span></span> <span data-ttu-id="3a9fa-137">Pokud zabalíte některou z těchto metod, systém zabezpečení může použít udělení oprávnění vašeho kódu místo oprávnění volajícího na obálku pro načtení sestavení.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-137">If you wrap any of these methods, the security system could use your code's permission grant, instead of the permissions of the caller to your wrapper, to load the assemblies.</span></span> <span data-ttu-id="3a9fa-138">Nepovolujte nedůvěryhodný kód pro načtení kódu, kterému je udělenější oprávnění od volajícího k vaší obálce.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-138">Don't allow less-trusted code to load code that is granted higher permissions than those of the caller to your wrapper.</span></span>  
  
 <span data-ttu-id="3a9fa-139">Jakýkoli kód, který má úplný vztah důvěryhodnosti nebo významně vyšší důvěryhodnost než potenciální volající (včetně volajícího na úrovni internetových oprávnění), může tímto způsobem oslabit zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-139">Any code that has full trust or significantly higher trust than a potential caller (including an Internet-permissions-level caller) could weaken security in this way.</span></span> <span data-ttu-id="3a9fa-140">Má-li váš kód veřejnou metodu, která přebírá bajtové pole a předá jej **sestavení. Load**, čímž se vytvoří sestavení za jménem volajícího, může dojít k přerušení zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-140">If your code has a public method that takes a byte array and passes it to **Assembly.Load**, thereby creating an assembly on the caller's behalf, it might break security.</span></span>  
  
 <span data-ttu-id="3a9fa-141">Tento problém se týká následujících prvků rozhraní API:</span><span class="sxs-lookup"><span data-stu-id="3a9fa-141">This issue applies to the following API elements:</span></span>  
  
- <xref:System.AppDomain.DefineDynamicAssembly%2A?displayProperty=nameWithType>  
  
- <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>  
  
- <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType>  
  
- <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>  
  
## <a name="demand-vs-linkdemand"></a><span data-ttu-id="3a9fa-142">Požadavek proti LinkDemand</span><span class="sxs-lookup"><span data-stu-id="3a9fa-142">Demand vs. LinkDemand</span></span>  
 <span data-ttu-id="3a9fa-143">Deklarativní zabezpečení nabízí dva druhy kontrol zabezpečení, které jsou podobné, ale provádějí různé kontroly.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-143">Declarative security offers two kinds of security checks that are similar but perform different checks.</span></span> <span data-ttu-id="3a9fa-144">Je vhodné porozumět oběma formám, protože nesprávná volba může vést ke slabému zabezpečení nebo ztrátě výkonu.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-144">It's good to understand both forms, because the wrong choice can result in weak security or performance loss.</span></span>  
  
 <span data-ttu-id="3a9fa-145">Deklarativní zabezpečení nabízí následující kontroly zabezpečení:</span><span class="sxs-lookup"><span data-stu-id="3a9fa-145">Declarative security offers the following security checks:</span></span>  
  
- <span data-ttu-id="3a9fa-146"><xref:System.Security.Permissions.SecurityAction.Demand>Určuje procházení zásobníku zabezpečení přístupu kódu.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-146"><xref:System.Security.Permissions.SecurityAction.Demand> specifies the code access security stack walk.</span></span> <span data-ttu-id="3a9fa-147">Všichni volající v zásobníku musí mít zadané oprávnění nebo identitu předat.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-147">All callers on the stack must have the specified permission or identity to pass.</span></span> <span data-ttu-id="3a9fa-148">**Poptávka** probíhá při každém volání, protože zásobník může obsahovat různé volající.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-148">**Demand** occurs on every call because the stack might contain different callers.</span></span> <span data-ttu-id="3a9fa-149">Při opakovaném volání metody se k této kontrole zabezpečení dojde pokaždé, když.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-149">If you call a method repeatedly, this security check occurs each time.</span></span> <span data-ttu-id="3a9fa-150">**Poptávka** je dobrá ochrana před útoky luring; zjistí se neoprávněný kód, který se pokouší získat přes.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-150">**Demand** is good protection against luring attacks; unauthorized code trying to get through it will be detected.</span></span>  
  
- <span data-ttu-id="3a9fa-151">K [LinkDemand](link-demands.md) dojde v době kompilace JIT (just-in-time) a kontroluje pouze bezprostředního volajícího.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-151">[LinkDemand](link-demands.md) happens at just-in-time (JIT) compilation time and checks only the immediate caller.</span></span> <span data-ttu-id="3a9fa-152">Tato kontrolu zabezpečení nekontroluje volajícího volajícího.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-152">This security check does not check the caller's caller.</span></span> <span data-ttu-id="3a9fa-153">Po dokončení této kontroly se neúčtují žádné další nároky na zabezpečení bez ohledu na to, kolikrát volající může zavolat.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-153">Once this check passes, there is no additional security overhead no matter how many times the caller might call.</span></span> <span data-ttu-id="3a9fa-154">Neexistuje ale ani ochrana před luring útoky.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-154">However, there is also no protection from luring attacks.</span></span> <span data-ttu-id="3a9fa-155">S **LinkDemand**, jakýkoliv kód, který projde test a může odkazovat na váš kód, může potenciálně přerušit zabezpečení tím, že umožňuje škodlivému kódu volat pomocí autorizovaného kódu.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-155">With **LinkDemand**, any code that passes the test and can reference your code can potentially break security by allowing malicious code to call using the authorized code.</span></span> <span data-ttu-id="3a9fa-156">Proto nepoužívejte **LinkDemand** , pokud všechny možné slabiny nemůžete důkladně zabránit.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-156">Therefore, do not use **LinkDemand** unless all the possible weaknesses can be thoroughly avoided.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="3a9fa-157">V .NET Framework 4 byly požadavky propojení nahrazeny <xref:System.Security.SecurityCriticalAttribute> atributem v <xref:System.Security.SecurityRuleSet.Level2> sestaveních.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-157">In the .NET Framework 4, link demands have been replaced by the <xref:System.Security.SecurityCriticalAttribute> attribute in <xref:System.Security.SecurityRuleSet.Level2> assemblies.</span></span> <span data-ttu-id="3a9fa-158"><xref:System.Security.SecurityCriticalAttribute>Je ekvivalentem požadavku propojení pro úplný vztah důvěryhodnosti, ale má vliv také na pravidla dědičnosti.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-158">The <xref:System.Security.SecurityCriticalAttribute> is equivalent to a link demand for full trust; however, it also affects inheritance rules.</span></span> <span data-ttu-id="3a9fa-159">Další informace o této změně najdete v tématu [Kód transparentní pro zabezpečení, úroveň 2](security-transparent-code-level-2.md).</span><span class="sxs-lookup"><span data-stu-id="3a9fa-159">For more information about this change, see [Security-Transparent Code, Level 2](security-transparent-code-level-2.md).</span></span>  
  
 <span data-ttu-id="3a9fa-160">Další preventivní opatření nutná při použití **LinkDemand** musí být naprogramována individuálně; systém zabezpečení může pomáhat s vynucováním.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-160">The extra precautions required when using **LinkDemand** must be programmed individually; the security system can help with enforcement.</span></span> <span data-ttu-id="3a9fa-161">Jakékoli omyly otevírá slabá místa zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-161">Any mistake opens a security weakness.</span></span> <span data-ttu-id="3a9fa-162">Veškerý autorizovaný kód, který používá váš kód, musí být zodpovědný za implementaci dalšího zabezpečení pomocí následujícího postupu:</span><span class="sxs-lookup"><span data-stu-id="3a9fa-162">All authorized code that uses your code must be responsible for implementing additional security by doing the following:</span></span>  
  
- <span data-ttu-id="3a9fa-163">Omezení přístupu volajícího kódu ke třídě nebo sestavení.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-163">Restricting the calling code's access to the class or assembly.</span></span>  
  
- <span data-ttu-id="3a9fa-164">Umístěte stejné kontroly zabezpečení na volající kód, který se zobrazí na volaném kódu, a obligating jeho volajícím.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-164">Placing the same security checks on the calling code that appear on the code being called and obligating its callers to do so.</span></span> <span data-ttu-id="3a9fa-165">Například pokud napíšete kód, který volá metodu, která je chráněna pomocí **LinkDemand** pro se <xref:System.Security.Permissions.SecurityPermission> <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> zadaným příznakem, vaše metoda by také měla vytvořit **LinkDemand** (nebo **poptávku**, která je silnější) pro toto oprávnění.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-165">For example, if you write code that calls a method that is protected with a **LinkDemand** for the <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> flag specified, your method should also make a **LinkDemand** (or **Demand**, which is stronger) for this permission.</span></span> <span data-ttu-id="3a9fa-166">Výjimkou je, že váš kód používá metodu chráněnou pomocí **LinkDemand**omezeného způsobu, jakým se rozhodnete, že je bezpečná, s ohledem na další mechanismy ochrany zabezpečení (například požadavky) ve vašem kódu.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-166">The exception is if your code uses the **LinkDemand**-protected method in a limited way that you decide is safe, given other security protection mechanisms (such as demands) in your code.</span></span> <span data-ttu-id="3a9fa-167">V tomto mimořádném případě volající vezme zodpovědnost za oslabení ochrany zabezpečení na základním kódu.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-167">In this exceptional case, the caller takes responsibility in weakening the security protection on the underlying code.</span></span>  
  
- <span data-ttu-id="3a9fa-168">Zajištění, že volající vašeho kódu nemohou přesvědčit váš kód o volání chráněného kódu jménem.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-168">Ensuring that your code's callers cannot trick your code into calling the protected code on their behalf.</span></span> <span data-ttu-id="3a9fa-169">Jinými slovy volající nedokáže vynutit, aby ověřený kód předal konkrétní parametry do chráněného kódu nebo aby z něj byly vráceny výsledky.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-169">In other words, callers cannot force the authorized code to pass specific parameters to the protected code, or to get results back from it.</span></span>  
  
### <a name="interfaces-and-link-demands"></a><span data-ttu-id="3a9fa-170">Požadavky na rozhraní a propojení</span><span class="sxs-lookup"><span data-stu-id="3a9fa-170">Interfaces and Link Demands</span></span>  
 <span data-ttu-id="3a9fa-171">Pokud virtuální metoda, vlastnost nebo událost s **LinkDemand** přepisuje metodu základní třídy, musí mít metoda základní třídy také stejný **LinkDemand** pro potlačenou metodu, aby mohla být účinná.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-171">If a virtual method, property, or event with **LinkDemand** overrides a base class method, the base class method must also have the same **LinkDemand** for the overridden method in order to be effective.</span></span> <span data-ttu-id="3a9fa-172">Škodlivý kód může přetypovat zpět na základní typ a volat metodu základní třídy.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-172">It is possible for malicious code to cast back to the base type and call the base class method.</span></span> <span data-ttu-id="3a9fa-173">Všimněte si také, že požadavky na propojení lze přidat implicitně do sestavení, která nemají <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atribut na úrovni sestavení.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-173">Also note that link demands can be added implicitly to assemblies that do not have the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> assembly-level attribute.</span></span>  
  
 <span data-ttu-id="3a9fa-174">Je vhodné chránit implementace metod s požadavky propojení, pokud metody rozhraní také mají požadavky na propojení.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-174">It is a good practice to protect method implementations with link demands when interface methods also have link demands.</span></span> <span data-ttu-id="3a9fa-175">Všimněte si následujících informací o použití požadavků na propojení s rozhraními:</span><span class="sxs-lookup"><span data-stu-id="3a9fa-175">Note the following about using link demands with interfaces:</span></span>  
  
- <span data-ttu-id="3a9fa-176">Pokud umístíte **LinkDemand** do veřejné metody třídy, která implementuje metodu rozhraní, nebude možné **LinkDemand** vyhovět, pokud je pak přetypování na rozhraní a volání metody.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-176">If you place a **LinkDemand** on a public method of a class that implements an interface method, the **LinkDemand** will not be enforced if you then cast to the interface and call the method.</span></span> <span data-ttu-id="3a9fa-177">V tomto případě vzhledem k tomu, že jste propojili rozhraní, je dodržen pouze **LinkDemand** v rozhraní.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-177">In this case, because you linked against the interface, only the **LinkDemand** on the interface is honored.</span></span>  
  
 <span data-ttu-id="3a9fa-178">Zkontrolujte následující položky pro problémy se zabezpečením:</span><span class="sxs-lookup"><span data-stu-id="3a9fa-178">Review the following items for security issues:</span></span>  
  
- <span data-ttu-id="3a9fa-179">Explicitní požadavky na propojení na metody rozhraní.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-179">Explicit link demands on interface methods.</span></span> <span data-ttu-id="3a9fa-180">Zajistěte, aby tyto požadavky na propojení nabízely očekávanou ochranu.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-180">Make sure these link demands offer the expected protection.</span></span> <span data-ttu-id="3a9fa-181">Určete, zda škodlivý kód může pomocí přetypování získat odkaz na požadavky, jak je popsáno výše.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-181">Determine whether malicious code can use a cast to get around the link demands as described previously.</span></span>  
  
- <span data-ttu-id="3a9fa-182">Virtuální metody s použitými požadavky propojení</span><span class="sxs-lookup"><span data-stu-id="3a9fa-182">Virtual methods with link demands applied.</span></span>  
  
- <span data-ttu-id="3a9fa-183">Typy a rozhraní, která implementují.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-183">Types and the interfaces they implement.</span></span> <span data-ttu-id="3a9fa-184">Ty by měly konzistentně používat požadavky na propojení.</span><span class="sxs-lookup"><span data-stu-id="3a9fa-184">These should use link demands consistently.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3a9fa-185">Viz také</span><span class="sxs-lookup"><span data-stu-id="3a9fa-185">See also</span></span>

- [<span data-ttu-id="3a9fa-186">Pokyny pro zabezpečené kódování</span><span class="sxs-lookup"><span data-stu-id="3a9fa-186">Secure Coding Guidelines</span></span>](../../standard/security/secure-coding-guidelines.md)
