---
title: Úrovně důvěryhodnosti zabezpečení v přístupu k prostředkům
description: Pochopení úrovní důvěryhodnosti zabezpečení při přístupu k prostředkům v .NET. Existují 3 hlavní úrovně důvěryhodnosti pro System. Transactions.
ms.date: 03/30/2017
ms.assetid: fb5be924-317d-4d69-b33a-3d18ecfb9d6e
ms.openlocfilehash: 64f298460bde99181ab8dc8be13ae95aaa846299
ms.sourcegitcommit: 6219b1e1feccb16d88656444210fed3297f5611e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/22/2020
ms.locfileid: "85141949"
---
# <a name="security-trust-levels-in-accessing-resources"></a><span data-ttu-id="8cc29-104">Úrovně důvěryhodnosti zabezpečení v přístupu k prostředkům</span><span class="sxs-lookup"><span data-stu-id="8cc29-104">Security Trust Levels in Accessing Resources</span></span>
<span data-ttu-id="8cc29-105">Toto téma popisuje, jak je omezen přístup na studijních materiálech, které <xref:System.Transactions> zveřejňuje.</span><span class="sxs-lookup"><span data-stu-id="8cc29-105">This topic discusses how access is restricted on the types of resources that <xref:System.Transactions> exposes.</span></span>  
  
 <span data-ttu-id="8cc29-106">Existují tři hlavní úrovně důvěryhodnosti pro <xref:System.Transactions>.</span><span class="sxs-lookup"><span data-stu-id="8cc29-106">There are three main levels of trust for <xref:System.Transactions>.</span></span> <span data-ttu-id="8cc29-107">Úrovně důvěryhodnosti jsou definovány v závislosti na studijních materiálech, které <xref:System.Transactions> zpřístupňuje a úroveň vztahu důvěryhodnosti, který je třeba získat přístup k těmto prostředkům.</span><span class="sxs-lookup"><span data-stu-id="8cc29-107">The trust levels are defined based on the types of resources that <xref:System.Transactions> exposes, and the level of trust that should be required to access those resources.</span></span> <span data-ttu-id="8cc29-108">Materiály, <xref:System.Transactions> poskytuje přístup k jsou systémové paměti, sdílený proces wide materiály a široké systémových prostředků.</span><span class="sxs-lookup"><span data-stu-id="8cc29-108">The resources that <xref:System.Transactions> provides access to are system memory, shared process wide resources, and system wide resources.</span></span> <span data-ttu-id="8cc29-109">Úrovně jsou:</span><span class="sxs-lookup"><span data-stu-id="8cc29-109">The levels are:</span></span>  
  
- <span data-ttu-id="8cc29-110">**AllowPartiallyTrustedCallers** (APTCA) pro aplikace, které používají transakce v rámci jedné domény aplikace.</span><span class="sxs-lookup"><span data-stu-id="8cc29-110">**AllowPartiallyTrustedCallers** (APTCA) for applications using transactions within a single application domain.</span></span>  
  
- <span data-ttu-id="8cc29-111">**DistributedTransactionPermission** (DTP) pro aplikace používající distribuované transakce.</span><span class="sxs-lookup"><span data-stu-id="8cc29-111">**DistributedTransactionPermission** (DTP) for applications using distributed transactions.</span></span>  
  
- <span data-ttu-id="8cc29-112">Úplný vztah důvěryhodnosti pro trvalý zdroje, aplikace pro správu konfigurace a starší definiční aplikace.</span><span class="sxs-lookup"><span data-stu-id="8cc29-112">Full trust for durable resources, configuration management applications, and legacy interop applications.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8cc29-113">Neměli volat některý z rozhraní zařazení s zosobněným kontexty.</span><span class="sxs-lookup"><span data-stu-id="8cc29-113">You should not call any of the enlistment interfaces with impersonated contexts.</span></span>  
  
## <a name="trust-levels"></a><span data-ttu-id="8cc29-114">Úrovně důvěryhodnosti</span><span class="sxs-lookup"><span data-stu-id="8cc29-114">Trust Levels</span></span>  
  
### <a name="aptca-partial-trust"></a><span data-ttu-id="8cc29-115">APTCA (částečným vztahem důvěryhodnosti)</span><span class="sxs-lookup"><span data-stu-id="8cc29-115">APTCA (Partial Trust)</span></span>  
 <span data-ttu-id="8cc29-116"><xref:System.Transactions>Sestavení může být voláno částečně důvěryhodným kódem, protože bylo označeno atributem **ALLOWPARTIALLYTRUSTEDCALLERS** (APTCA).</span><span class="sxs-lookup"><span data-stu-id="8cc29-116">The <xref:System.Transactions> assembly can be called by partially trusted code because it has been marked with the **AllowPartiallyTrustedCallers** attribute (APTCA).</span></span> <span data-ttu-id="8cc29-117">Tento atribut v podstatě odstraní implicitní <xref:System.Security.Permissions.SecurityAction.LinkDemand> pro sadu oprávnění **FullTrust** , která je jinak automaticky umístěna do každé veřejně přístupné metody v každém typu.</span><span class="sxs-lookup"><span data-stu-id="8cc29-117">This attribute essentially removes the implicit <xref:System.Security.Permissions.SecurityAction.LinkDemand> for the **FullTrust** permission set that is otherwise automatically placed on each publicly accessible method in each type.</span></span> <span data-ttu-id="8cc29-118">Nicméně některé typy a členy stále vyžadují bezpečnějších oprávnění.</span><span class="sxs-lookup"><span data-stu-id="8cc29-118">However, some types and members still require stronger permissions.</span></span>  
  
 <span data-ttu-id="8cc29-119">Atribut APTCA umožňuje aplikacím používat transakcí v částečným vztahem důvěryhodnosti v rámci jediné doméně aplikace.</span><span class="sxs-lookup"><span data-stu-id="8cc29-119">The APTCA attribute enables applications to use transactions in partial trust within a single application domain.</span></span> <span data-ttu-id="8cc29-120">To umožňuje-eskalován transakce a Nestálá zařazení, které lze použít pro zpracování chyb.</span><span class="sxs-lookup"><span data-stu-id="8cc29-120">This enables non-escalated transactions and volatile enlistments that can be used for error handling.</span></span> <span data-ttu-id="8cc29-121">Příkladem je tabulka transacted hash a aplikace, která ji používá.</span><span class="sxs-lookup"><span data-stu-id="8cc29-121">One example of this is a transacted hash table and an application that uses it.</span></span> <span data-ttu-id="8cc29-122">Data lze přidat do a odebrán z tabulky hash v rámci jedné transakce.</span><span class="sxs-lookup"><span data-stu-id="8cc29-122">Data can be added to and removed from the hash table under a single transaction.</span></span> <span data-ttu-id="8cc29-123">Pokud později transakce vrácena zpět, všechny změny provedené v tabulce hash v rámci dané transakce lze vrátit zpět.</span><span class="sxs-lookup"><span data-stu-id="8cc29-123">If the transaction is later rolled back, all of the changes made to the hash table under that transaction can be undone.</span></span>  
  
### <a name="distributedtransactionpermission-dtp"></a><span data-ttu-id="8cc29-124">DistributedTransactionPermission (DTP)</span><span class="sxs-lookup"><span data-stu-id="8cc29-124">DistributedTransactionPermission (DTP)</span></span>  
 <span data-ttu-id="8cc29-125">Když <xref:System.Transactions> transakce je eskalován jej lze spravovat pomocí nástroje MSDTC, <xref:System.Transactions> požadavky <xref:System.Transactions.DistributedTransactionPermission> (DTP) k vytvoření distribuované transakce.</span><span class="sxs-lookup"><span data-stu-id="8cc29-125">When a <xref:System.Transactions> transaction is escalated to be managed by MSDTC, <xref:System.Transactions> demands the <xref:System.Transactions.DistributedTransactionPermission> (DTP) to create the distributed transaction.</span></span> <span data-ttu-id="8cc29-126">To znamená, že kód, který způsobí, že transakce se eskalován (například prostřednictvím serializace nebo další trvalé zařazení) by bylo nutné mít udělena DTP.</span><span class="sxs-lookup"><span data-stu-id="8cc29-126">This means that the code that causes the transaction to be escalated (such as through serialization or additional durable enlistments) would need to be granted DTP.</span></span> <span data-ttu-id="8cc29-127">Kód, který původně vytvořil <xref:System.Transactions> transakce nutně nemusí mít toto oprávnění.</span><span class="sxs-lookup"><span data-stu-id="8cc29-127">The code that originally created the <xref:System.Transactions> transaction does not necessarily need to possess this permission.</span></span>  
  
### <a name="fulltrust-link-demands"></a><span data-ttu-id="8cc29-128">Požadavky na propojení FullTrust</span><span class="sxs-lookup"><span data-stu-id="8cc29-128">FullTrust Link Demands</span></span>  
 <span data-ttu-id="8cc29-129">Tuto úroveň oprávnění je určena k omezení aplikace, které jsou zápisu do trvalý prostředků.</span><span class="sxs-lookup"><span data-stu-id="8cc29-129">This permission level is intended to restrict applications that are writing to durable resources.</span></span> <span data-ttu-id="8cc29-130">Po selhání aplikace musí být možné obnovit pomocí Správce transakcí k určení konečný výsledek transakce, tak, aby jej můžete aktualizovat trvalá data.</span><span class="sxs-lookup"><span data-stu-id="8cc29-130">Upon failure, the application needs to be able to recover with the transaction manager to determine the final outcome of the transaction, so that it can update permanent data.</span></span> <span data-ttu-id="8cc29-131">Tento typ aplikace, se nazývá trvalý zdroj správce.</span><span class="sxs-lookup"><span data-stu-id="8cc29-131">This type of application is known as a durable source manager.</span></span> <span data-ttu-id="8cc29-132">Klasické příkladem tento typ aplikace je SQL.</span><span class="sxs-lookup"><span data-stu-id="8cc29-132">A classic example of this type of application is SQL.</span></span>  
  
 <span data-ttu-id="8cc29-133">Chcete-li povolit obnovení, tento typ aplikace má možnost trvale spotřebovávat systémové prostředky.</span><span class="sxs-lookup"><span data-stu-id="8cc29-133">To enable recovery, this type of application has the ability to permanently consume system resources.</span></span> <span data-ttu-id="8cc29-134">Toto je vzhledem k tomu, že správce obnovitelných transakcí musí mějte na paměti, transakcí, které mají potvrzeny, dokud můžete ověřit, že všechny správce trvalý prostředků, které se účastní transakce přijali výsledek.</span><span class="sxs-lookup"><span data-stu-id="8cc29-134">This is because the recoverable transaction manager must remember transactions that have committed until it can confirm that all durable resource managers that are participating in the transaction have received the outcome.</span></span> <span data-ttu-id="8cc29-135">Proto tento typ aplikace vyžaduje plnou důvěryhodnost a by neměl být spuštěn, není-li poskytovaná úroveň vztahu důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="8cc29-135">Therefore, this type of application requires full trust and should not be run unless that level of trust has been granted.</span></span>  
  
 <span data-ttu-id="8cc29-136">Další informace o trvalých zařazení a obnovení najdete v tématu [zařazení prostředků jako účastníků v transakci](enlisting-resources-as-participants-in-a-transaction.md) a [provádění témat pro obnovení](performing-recovery.md) .</span><span class="sxs-lookup"><span data-stu-id="8cc29-136">For more information on durable enlistments and recovery, see the [Enlisting Resources as Participants in a Transaction](enlisting-resources-as-participants-in-a-transaction.md) and [Performing Recovery](performing-recovery.md) topics.</span></span>  
  
 <span data-ttu-id="8cc29-137">Aplikace, které provádějí starší verze definiční pracovat s modelu COM + jsou také nutné mít plnou důvěryhodnost.</span><span class="sxs-lookup"><span data-stu-id="8cc29-137">Applications that perform legacy interop work with COM+ are also required to have full trust.</span></span>  
  
 <span data-ttu-id="8cc29-138">Následuje seznam typů a členů, které nelze volat částečně důvěryhodným kódem, protože jsou upraveny pomocí deklarativního atributu zabezpečení **FullTrust** :</span><span class="sxs-lookup"><span data-stu-id="8cc29-138">The following is a list of types and members that are not callable by partially trusted code because they are decorated with the **FullTrust** declarative security attribute:</span></span>  
  
 `PermissionSetAttribute(SecurityAction.LinkDemand, Name := "FullTrust")`  
  
- <xref:System.Transactions.Transaction.EnlistDurable%2A?displayProperty=nameWithType>  
  
- <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A>  
  
- <xref:System.Transactions.TransactionInterop>  
  
- <xref:System.Transactions.TransactionManager.DistributedTransactionStarted>  
  
- <xref:System.Transactions.HostCurrentTransactionCallback>  
  
- <xref:System.Transactions.TransactionManager.Reenlist%2A>  
  
- <xref:System.Transactions.TransactionManager.RecoveryComplete%2A>  
  
- <xref:System.Transactions.TransactionScope.%23ctor%28System.Transactions.TransactionScopeOption%2CSystem.Transactions.TransactionOptions%2CSystem.Transactions.EnterpriseServicesInteropOption%29>  
  
 <span data-ttu-id="8cc29-139">Pro oprávnění **FullTrust** nastavené na používání výše uvedených typů nebo metod je potřeba jenom okamžitého volajícího.</span><span class="sxs-lookup"><span data-stu-id="8cc29-139">Only the immediate caller is required to possess the **FullTrust** permission set to use the above types or methods.</span></span>
