---
title: Autorizace a oprávnění na SQL Serveru
description: Naučte se explicitně udělit oprávnění k vytváření databázových objektů, které jsou k dispozici uživatelům v SQL Server pomocí ADO.NET.
ms.date: 03/30/2017
ms.assetid: d340405c-91f4-4837-a3cc-a238ee89888a
ms.openlocfilehash: eb01e29b36da5e1793b9176301a968a42115d19c
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/02/2020
ms.locfileid: "84286530"
---
# <a name="authorization-and-permissions-in-sql-server"></a><span data-ttu-id="6d147-103">Autorizace a oprávnění na SQL Serveru</span><span class="sxs-lookup"><span data-stu-id="6d147-103">Authorization and Permissions in SQL Server</span></span>
<span data-ttu-id="6d147-104">Při vytváření databázových objektů musíte explicitně udělit oprávnění, aby je bylo možné uživatelům zpřístupnit.</span><span class="sxs-lookup"><span data-stu-id="6d147-104">When you create database objects, you must explicitly grant permissions to make them accessible to users.</span></span> <span data-ttu-id="6d147-105">Každý zabezpečitelný objekt má oprávnění, která lze udělit objektu zabezpečení pomocí příkazů oprávnění.</span><span class="sxs-lookup"><span data-stu-id="6d147-105">Every securable object has permissions that can be granted to a principal using permission statements.</span></span>  
  
## <a name="the-principle-of-least-privilege"></a><span data-ttu-id="6d147-106">Princip nejnižších oprávnění</span><span class="sxs-lookup"><span data-stu-id="6d147-106">The Principle of Least Privilege</span></span>  
 <span data-ttu-id="6d147-107">Vývoj aplikace s využitím přístupu s minimálním privilegovaným uživatelským účtem (LUA) je důležitou součástí obrannou linií a podrobné strategie pro vytváření čítačů bezpečnostních hrozeb.</span><span class="sxs-lookup"><span data-stu-id="6d147-107">Developing an application using a least-privileged user account (LUA) approach is an important part of a defensive, in-depth strategy for countering security threats.</span></span> <span data-ttu-id="6d147-108">Přístup LUA zajišťuje, aby uživatelé dodržovali princip minimálního oprávnění a vždy se přihlásili pomocí omezených uživatelských účtů.</span><span class="sxs-lookup"><span data-stu-id="6d147-108">The LUA approach ensures that users follow the principle of least privilege and always log on with limited user accounts.</span></span> <span data-ttu-id="6d147-109">Úlohy správy jsou rozděleny pomocí pevných rolí serveru a používání `sysadmin` pevné role serveru je u sebe vážně omezené.</span><span class="sxs-lookup"><span data-stu-id="6d147-109">Administrative tasks are broken out using fixed server roles, and the use of the `sysadmin` fixed server role is severely restricted.</span></span>  
  
 <span data-ttu-id="6d147-110">Při udělování oprávnění uživatelům databáze vždy postupujte podle principu nejnižší oprávnění.</span><span class="sxs-lookup"><span data-stu-id="6d147-110">Always follow the principle of least privilege when granting permissions to database users.</span></span> <span data-ttu-id="6d147-111">Udělení minimálních oprávnění potřebných pro uživatele nebo roli k provedení daného úkolu.</span><span class="sxs-lookup"><span data-stu-id="6d147-111">Grant the minimum permissions necessary to a user or role to accomplish a given task.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="6d147-112">Vývoj a testování aplikace pomocí přístupu LUA přičítá ke procesu vývoje stupeň potíží.</span><span class="sxs-lookup"><span data-stu-id="6d147-112">Developing and testing an application using the LUA approach adds a degree of difficulty to the development process.</span></span> <span data-ttu-id="6d147-113">Vytváření objektů a psaní kódu je snazší, pokud jste přihlášeni jako správce systému nebo jako vlastník databáze, než používá účet LUA.</span><span class="sxs-lookup"><span data-stu-id="6d147-113">It is easier to create objects and write code while logged on as a system administrator or database owner than it is using a LUA account.</span></span> <span data-ttu-id="6d147-114">Vývoj aplikací pomocí vysoce privilegovaného účtu ale může vymezit dopad omezených funkcí, když se nejméně privilegované uživatele pokusí spustit aplikaci, která vyžaduje zvýšená oprávnění, aby fungovala správně.</span><span class="sxs-lookup"><span data-stu-id="6d147-114">However, developing applications using a highly privileged account can obfuscate the impact of reduced functionality when least privileged users attempt to run an application that requires elevated permissions in order to function correctly.</span></span> <span data-ttu-id="6d147-115">Udělení nadměrných oprávnění uživatelům, aby bylo možné znovu získat ztracené funkce, může způsobit, že vaše aplikace bude zranitelná vůči útokům.</span><span class="sxs-lookup"><span data-stu-id="6d147-115">Granting excessive permissions to users in order to reacquire lost functionality can leave your application vulnerable to attack.</span></span> <span data-ttu-id="6d147-116">Návrh, vývoj a testování vaší aplikace přihlášené pomocí účtu LUA vynutily oborové postupy pro plánování zabezpečení, které eliminují nepříjem překvapením a pokušení pro udělení zvýšených oprávnění jako Rychlá oprava.</span><span class="sxs-lookup"><span data-stu-id="6d147-116">Designing, developing and testing your application logged on with a LUA account enforces a disciplined approach to security planning that eliminates unpleasant surprises and the temptation to grant elevated privileges as a quick fix.</span></span> <span data-ttu-id="6d147-117">Můžete použít SQL Server přihlašovací údaje pro testování i v případě, že je vaše aplikace určena k nasazení pomocí ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="6d147-117">You can use a SQL Server login for testing even if your application is intended to deploy using Windows authentication.</span></span>  
  
## <a name="role-based-permissions"></a><span data-ttu-id="6d147-118">Oprávnění na základě rolí</span><span class="sxs-lookup"><span data-stu-id="6d147-118">Role-Based Permissions</span></span>  
 <span data-ttu-id="6d147-119">Udělení oprávnění rolím, nikoli uživatelům, zjednodušuje správu zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="6d147-119">Granting permissions to roles rather than to users simplifies security administration.</span></span> <span data-ttu-id="6d147-120">Sady oprávnění, které jsou přiřazeny rolím, dědí všichni členové této role.</span><span class="sxs-lookup"><span data-stu-id="6d147-120">Permission sets that are assigned to roles are inherited by all members of the role.</span></span> <span data-ttu-id="6d147-121">Je snazší přidat nebo odebrat uživatele z role, než aby bylo možné znovu vytvořit samostatné sady oprávnění pro jednotlivé uživatele.</span><span class="sxs-lookup"><span data-stu-id="6d147-121">It is easier to add or remove users from a role than it is to recreate separate permission sets for individual users.</span></span> <span data-ttu-id="6d147-122">Role můžou být vnořené. příliš mnoho úrovní vnoření ale může snížit výkon.</span><span class="sxs-lookup"><span data-stu-id="6d147-122">Roles can be nested; however, too many levels of nesting can degrade performance.</span></span> <span data-ttu-id="6d147-123">Můžete taky přidat uživatele k pevným databázovým rolím, abyste zjednodušili přiřazování oprávnění.</span><span class="sxs-lookup"><span data-stu-id="6d147-123">You can also add users to fixed database roles to simplify assigning permissions.</span></span>  
  
 <span data-ttu-id="6d147-124">Můžete udělit oprávnění na úrovni schématu.</span><span class="sxs-lookup"><span data-stu-id="6d147-124">You can grant permissions at the schema level.</span></span> <span data-ttu-id="6d147-125">Uživatelé automaticky převezmou oprávnění pro všechny nové objekty vytvořené ve schématu. Při vytváření nových objektů nemusíte udělovat oprávnění.</span><span class="sxs-lookup"><span data-stu-id="6d147-125">Users automatically inherit permissions on all new objects created in the schema; you do not need to grant permissions as new objects are created.</span></span>  
  
## <a name="permissions-through-procedural-code"></a><span data-ttu-id="6d147-126">Oprávnění prostřednictvím kódu procedurální</span><span class="sxs-lookup"><span data-stu-id="6d147-126">Permissions Through Procedural Code</span></span>  
 <span data-ttu-id="6d147-127">Zapouzdření přístupu k datům prostřednictvím modulů, jako jsou uložené procedury a uživatelsky definované funkce, poskytuje další vrstvu ochrany kolem vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="6d147-127">Encapsulating data access through modules such as stored procedures and user-defined functions provides an additional layer of protection around your application.</span></span> <span data-ttu-id="6d147-128">Uživatelům můžete zabránit přímo v interakci s databázovými objekty tím, že udělíte oprávnění pouze k uloženým procedurám nebo funkcím a odepřete oprávnění podkladovým objektům, jako jsou tabulky.</span><span class="sxs-lookup"><span data-stu-id="6d147-128">You can prevent users from directly interacting with database objects by granting permissions only to stored procedures or functions while denying permissions to underlying objects such as tables.</span></span> <span data-ttu-id="6d147-129">SQL Server dosahuje pomocí zřetězení vlastnictví.</span><span class="sxs-lookup"><span data-stu-id="6d147-129">SQL Server achieves this by ownership chaining.</span></span>  
  
## <a name="permission-statements"></a><span data-ttu-id="6d147-130">Příkazy oprávnění</span><span class="sxs-lookup"><span data-stu-id="6d147-130">Permission Statements</span></span>  
 <span data-ttu-id="6d147-131">Tři příkazy pro oprávnění Transact-SQL jsou popsány v následující tabulce.</span><span class="sxs-lookup"><span data-stu-id="6d147-131">The three Transact-SQL permission statements are described in the following table.</span></span>  
  
|<span data-ttu-id="6d147-132">Příkaz oprávnění</span><span class="sxs-lookup"><span data-stu-id="6d147-132">Permission Statement</span></span>|<span data-ttu-id="6d147-133">Popis</span><span class="sxs-lookup"><span data-stu-id="6d147-133">Description</span></span>|  
|--------------------------|-----------------|  
|<span data-ttu-id="6d147-134">UDĚLIT</span><span class="sxs-lookup"><span data-stu-id="6d147-134">GRANT</span></span>|<span data-ttu-id="6d147-135">Udělí oprávnění.</span><span class="sxs-lookup"><span data-stu-id="6d147-135">Grants a permission.</span></span>|  
|<span data-ttu-id="6d147-136">ODVOLAT</span><span class="sxs-lookup"><span data-stu-id="6d147-136">REVOKE</span></span>|<span data-ttu-id="6d147-137">Odvolá oprávnění.</span><span class="sxs-lookup"><span data-stu-id="6d147-137">Revokes a permission.</span></span> <span data-ttu-id="6d147-138">Toto je výchozí stav nového objektu.</span><span class="sxs-lookup"><span data-stu-id="6d147-138">This is the default state of a new object.</span></span> <span data-ttu-id="6d147-139">Oprávnění odvolaných uživatelem nebo rolí může být stále děděno z jiných skupin nebo rolí, ke kterým je objekt zabezpečení přiřazen.</span><span class="sxs-lookup"><span data-stu-id="6d147-139">A permission revoked from a user or role can still be inherited from other groups or roles to which the principal is assigned.</span></span>|  
|<span data-ttu-id="6d147-140">ODEPŘÍT</span><span class="sxs-lookup"><span data-stu-id="6d147-140">DENY</span></span>|<span data-ttu-id="6d147-141">DENY odvolá oprávnění, aby ho nebylo možné dědit.</span><span class="sxs-lookup"><span data-stu-id="6d147-141">DENY revokes a permission so that it cannot be inherited.</span></span> <span data-ttu-id="6d147-142">ZAMÍTNUTí má přednost před všemi oprávněními, s výjimkou ODEPŘENí se nevztahuje na vlastníky objektu nebo členy `sysadmin` .</span><span class="sxs-lookup"><span data-stu-id="6d147-142">DENY takes precedence over all permissions, except DENY does not apply to object owners or members of `sysadmin`.</span></span> <span data-ttu-id="6d147-143">Pokud ODEPŘEte oprávnění objektu k `public` roli, je odepřen všem uživatelům a rolím s výjimkou vlastníků a členů objektu `sysadmin` .</span><span class="sxs-lookup"><span data-stu-id="6d147-143">If you DENY permissions on an object to the `public` role it is denied to all users and roles except for object owners and `sysadmin` members.</span></span>|  
  
- <span data-ttu-id="6d147-144">Příkaz GRANT může přiřadit oprávnění pro skupinu nebo roli, které mohou být děděny uživateli databáze.</span><span class="sxs-lookup"><span data-stu-id="6d147-144">The GRANT statement can assign permissions to a group or role that can be inherited by database users.</span></span> <span data-ttu-id="6d147-145">Nicméně příkaz Odepřít má přednost před všemi ostatními příkazy oprávnění.</span><span class="sxs-lookup"><span data-stu-id="6d147-145">However, the DENY statement takes precedence over all other permission statements.</span></span> <span data-ttu-id="6d147-146">Proto uživatel, který byl odepřen oprávnění, nemůže dědit z jiné role.</span><span class="sxs-lookup"><span data-stu-id="6d147-146">Therefore, a user who has been denied a permission cannot inherit it from another role.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="6d147-147">Členové `sysadmin` pevné role serveru a vlastníci objektu nelze odepřít oprávnění.</span><span class="sxs-lookup"><span data-stu-id="6d147-147">Members of the `sysadmin` fixed server role and object owners cannot be denied permissions.</span></span>  
  
## <a name="ownership-chains"></a><span data-ttu-id="6d147-148">Řetězení vlastnictví</span><span class="sxs-lookup"><span data-stu-id="6d147-148">Ownership Chains</span></span>  
 <span data-ttu-id="6d147-149">SQL Server zajistí, že přístup k objektům mají jenom objekty zabezpečení, které mají udělená oprávnění.</span><span class="sxs-lookup"><span data-stu-id="6d147-149">SQL Server ensures that only principals that have been granted permission can access objects.</span></span> <span data-ttu-id="6d147-150">Pokud k sobě navzájem přistupuje více databázových objektů, sekvence je označována jako řetězec.</span><span class="sxs-lookup"><span data-stu-id="6d147-150">When multiple database objects access each other, the sequence is known as a chain.</span></span> <span data-ttu-id="6d147-151">Pokud SQL Server prochází odkazy v řetězu, vyhodnocuje oprávnění jinak, než by byla v případě, že k jednotlivým položkám přistupuje samostatně.</span><span class="sxs-lookup"><span data-stu-id="6d147-151">When SQL Server is traversing the links in the chain, it evaluates permissions differently than it would if it were accessing each item separately.</span></span> <span data-ttu-id="6d147-152">Když je objekt otevřen prostřednictvím řetězce, SQL Server Nejprve porovná vlastníka objektu s vlastníkem volajícího objektu (předchozí odkaz v řetězci).</span><span class="sxs-lookup"><span data-stu-id="6d147-152">When an object is accessed through a chain, SQL Server first compares the object's owner to the owner of the calling object (the previous link in the chain).</span></span> <span data-ttu-id="6d147-153">Pokud mají oba objekty stejného vlastníka, oprávnění k odkazovanému objektu nejsou zaškrtnuta.</span><span class="sxs-lookup"><span data-stu-id="6d147-153">If both objects have the same owner, permissions on the referenced object are not checked.</span></span> <span data-ttu-id="6d147-154">Pokaždé, když objekt přistupuje k jinému objektu, který má jiného vlastníka, řetěz vlastnictví je přerušen a SQL Server musí kontrolovat kontext zabezpečení volajícího.</span><span class="sxs-lookup"><span data-stu-id="6d147-154">Whenever an object accesses another object that has a different owner, the ownership chain is broken and SQL Server must check the caller's security context.</span></span>  
  
## <a name="procedural-code-and-ownership-chaining"></a><span data-ttu-id="6d147-155">Procedurální Code a vlastnictví řetězení</span><span class="sxs-lookup"><span data-stu-id="6d147-155">Procedural Code and Ownership Chaining</span></span>  
 <span data-ttu-id="6d147-156">Předpokládejme, že uživateli je uděleno oprávnění ke spouštění pro uloženou proceduru, která vybírá data z tabulky.</span><span class="sxs-lookup"><span data-stu-id="6d147-156">Suppose that a user is granted execute permissions on a stored procedure that selects data from a table.</span></span> <span data-ttu-id="6d147-157">Pokud má úložná procedura a tabulka stejného vlastníka, není nutné, aby uživatel měl udělena žádná oprávnění k tabulce a může dokonce být odepřen oprávnění.</span><span class="sxs-lookup"><span data-stu-id="6d147-157">If the stored procedure and the table have the same owner, the user doesn't need to be granted any permissions on the table and can even be denied permissions.</span></span> <span data-ttu-id="6d147-158">Pokud však uložená procedura a tabulka mají různé vlastníky, SQL Server musí před povolením přístupu k datům kontrolovat oprávnění uživatele v tabulce.</span><span class="sxs-lookup"><span data-stu-id="6d147-158">However, if the stored procedure and the table have different owners, SQL Server must check the user's permissions on the table before allowing access to the data.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="6d147-159">Řetězení vlastnictví nelze použít v případě dynamických příkazů SQL.</span><span class="sxs-lookup"><span data-stu-id="6d147-159">Ownership chaining does not apply in the case of dynamic SQL statements.</span></span> <span data-ttu-id="6d147-160">Chcete-li zavolat proceduru, která spustí příkaz SQL, volajícímu musí být uděleno oprávnění k podkladovým tabulkám a aplikace zůstane zranitelná vůči útokům prostřednictvím injektáže SQL.</span><span class="sxs-lookup"><span data-stu-id="6d147-160">To call a procedure that executes an SQL statement, the caller must be granted permissions on the underlying tables, leaving your application vulnerable to SQL Injection attack.</span></span> <span data-ttu-id="6d147-161">SQL Server poskytuje nové mechanismy, jako jsou zosobnění a podepisování modulů pomocí certifikátů, které nevyžadují udělení oprávnění pro podkladové tabulky.</span><span class="sxs-lookup"><span data-stu-id="6d147-161">SQL Server provides new mechanisms, such as impersonation and signing modules with certificates, that do not require granting permissions on the underlying tables.</span></span> <span data-ttu-id="6d147-162">Lze je také použít s uloženými procedurami CLR.</span><span class="sxs-lookup"><span data-stu-id="6d147-162">These can also be used with CLR stored procedures.</span></span>  
  
## <a name="external-resources"></a><span data-ttu-id="6d147-163">Externí zdroje</span><span class="sxs-lookup"><span data-stu-id="6d147-163">External Resources</span></span>  
 <span data-ttu-id="6d147-164">Další informace najdete v následujících materiálech.</span><span class="sxs-lookup"><span data-stu-id="6d147-164">For more information, see the following resources.</span></span>  
  
|<span data-ttu-id="6d147-165">Prostředek</span><span class="sxs-lookup"><span data-stu-id="6d147-165">Resource</span></span>|<span data-ttu-id="6d147-166">Popis</span><span class="sxs-lookup"><span data-stu-id="6d147-166">Description</span></span>|  
|--------------|-----------------|  
|[<span data-ttu-id="6d147-167">Oprávnění</span><span class="sxs-lookup"><span data-stu-id="6d147-167">Permissions</span></span>](/sql/relational-databases/security/permissions-database-engine)|<span data-ttu-id="6d147-168">Obsahuje témata popisující hierarchii oprávnění, zobrazení katalogu a oprávnění k pevnému serveru a databázovým rolím.</span><span class="sxs-lookup"><span data-stu-id="6d147-168">Contains topics describing permissions hierarchy, catalog views, and permissions of fixed server and database roles.</span></span>|
  
## <a name="see-also"></a><span data-ttu-id="6d147-169">Viz také</span><span class="sxs-lookup"><span data-stu-id="6d147-169">See also</span></span>

- [<span data-ttu-id="6d147-170">Zabezpečení aplikací ADO.NET</span><span class="sxs-lookup"><span data-stu-id="6d147-170">Securing ADO.NET Applications</span></span>](../securing-ado-net-applications.md)
- [<span data-ttu-id="6d147-171">Scénáře zabezpečení aplikací na SQL Serveru</span><span class="sxs-lookup"><span data-stu-id="6d147-171">Application Security Scenarios in SQL Server</span></span>](application-security-scenarios-in-sql-server.md)
- [<span data-ttu-id="6d147-172">Ověřování v SQL Serveru</span><span class="sxs-lookup"><span data-stu-id="6d147-172">Authentication in SQL Server</span></span>](authentication-in-sql-server.md)
- [<span data-ttu-id="6d147-173">Serverové a databázové role na SQL Serveru</span><span class="sxs-lookup"><span data-stu-id="6d147-173">Server and Database Roles in SQL Server</span></span>](server-and-database-roles-in-sql-server.md)
- [<span data-ttu-id="6d147-174">Vlastnictví a oddělení uživatelských schémat na SQL Serveru</span><span class="sxs-lookup"><span data-stu-id="6d147-174">Ownership and User-Schema Separation in SQL Server</span></span>](ownership-and-user-schema-separation-in-sql-server.md)
- [<span data-ttu-id="6d147-175">Přehled ADO.NET</span><span class="sxs-lookup"><span data-stu-id="6d147-175">ADO.NET Overview</span></span>](../ado-net-overview.md)
