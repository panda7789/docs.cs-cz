---
title: Mpgo.exe (Nástroj pro optimalizaci spravovaného kódu na základě profilu)
ms.date: 03/30/2017
helpviewer_keywords:
- Mpgo.exe
- training scenarios, generating profiles with
- Managed Profile Guided Optimization Tool
- Ngen.exe
- Ngen.exe, profilers and native images
ms.assetid: f6976502-a000-4fbe-aaf5-a7aab9ce4ec2
ms.openlocfilehash: 0052475697dae2c3ad891db18d300b5ec08a7e62
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/15/2020
ms.locfileid: "79180352"
---
# <a name="mpgoexe-managed-profile-guided-optimization-tool"></a><span data-ttu-id="2052e-102">Mpgo.exe (Nástroj pro optimalizaci spravovaného kódu na základě profilu)</span><span class="sxs-lookup"><span data-stu-id="2052e-102">Mpgo.exe (Managed Profile Guided Optimization Tool)</span></span>

<span data-ttu-id="2052e-103">Nástroj pro optimalizaci spravovaných profilů (Mpgo.exe) je nástroj příkazového řádku, který používá běžné scénáře koncových uživatelů k optimalizaci nativních obrazových sestavení vytvořených [generátorem nativních bitových obrázků (Ngen.exe).](ngen-exe-native-image-generator.md)</span><span class="sxs-lookup"><span data-stu-id="2052e-103">The Managed Profile Guided Optimization Tool (Mpgo.exe) is a command-line tool that uses common end-user scenarios to optimize the native image assemblies that are created by the [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md).</span></span> <span data-ttu-id="2052e-104">Tento nástroj umožňuje spustit trénovací scénáře, které generují data profilu.</span><span class="sxs-lookup"><span data-stu-id="2052e-104">This tool enables you to run training scenarios that generate profile data.</span></span> <span data-ttu-id="2052e-105">Generátor [nativních bitových obrázků (Ngen.exe)](ngen-exe-native-image-generator.md) používá tato data k optimalizaci sestavení generovaných nativních aplikací bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="2052e-105">The [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md) uses this data to optimize its generated native image application assemblies.</span></span> <span data-ttu-id="2052e-106">Trénovací scénář je zkušební spuštění očekávaného použití aplikace.</span><span class="sxs-lookup"><span data-stu-id="2052e-106">A training scenario is a trial run of an expected use of your application.</span></span> <span data-ttu-id="2052e-107">Nástroj Mpgo.exe je k dispozici v sadě Visual Studio Ultimate 2012 a vyšší.</span><span class="sxs-lookup"><span data-stu-id="2052e-107">Mpgo.exe is available in Visual Studio Ultimate 2012 and later versions.</span></span> <span data-ttu-id="2052e-108">Počínaje Visual Studio 2013, můžete také použít Mpgo.exe k optimalizaci aplikací pro Windows 8.x Store.</span><span class="sxs-lookup"><span data-stu-id="2052e-108">Starting with Visual Studio 2013, you can also use Mpgo.exe to optimize Windows 8.x Store apps.</span></span>  
  
<span data-ttu-id="2052e-109">Profilováním řízená optimalizace zlepšuje dobu spuštění aplikace, využití paměti (velikost pracovní sady) a propustnost pomocí shromažďování dat z trénovacích scénářů a jejich použitím pro optimalizaci rozložení nativních bitových kopií.</span><span class="sxs-lookup"><span data-stu-id="2052e-109">Profile-guided optimization improves application startup time, memory utilization (working set size), and throughput by gathering data from training scenarios and using it to optimize the layout of native images.</span></span>  
  
<span data-ttu-id="2052e-110">Při výkonových potížích s časem spuštění a velikostí pracovní sady pro sestavení jazyka IL doporučujeme nejdříve použít nástroj Ngen.exe k eliminaci nároků spojených s kompilací JIT a k usnadnění sdílení kódu.</span><span class="sxs-lookup"><span data-stu-id="2052e-110">When you encounter performance issues with startup time and working set size for Intermediate Language (IL) assemblies, we recommend that you first use Ngen.exe to eliminate just-in-time (JIT) compilation costs and to facilitate code sharing.</span></span> <span data-ttu-id="2052e-111">V případě potřeby dalšího zlepšení je k optimalizaci aplikace možné použít nástroj Mpgo.exe.</span><span class="sxs-lookup"><span data-stu-id="2052e-111">If you need additional improvements, you can then use Mpgo.exe to further optimize your application.</span></span> <span data-ttu-id="2052e-112">Data o výkonu z neoptimalizované nativní bitové kopie sestavení je možné použít jako základ k vyhodnocení zlepšení výkonu.</span><span class="sxs-lookup"><span data-stu-id="2052e-112">You can use the performance data from the un-optimized native image assemblies as a baseline to evaluate the performance gains.</span></span> <span data-ttu-id="2052e-113">Použití nástroje Mpgo.exe může mít za následek rychlejší úplné spuštění a menší velikost pracovní sady.</span><span class="sxs-lookup"><span data-stu-id="2052e-113">Using Mpgo.exe may result in faster cold startup times and a smaller working set size.</span></span> <span data-ttu-id="2052e-114">Nástroj Mpgo.exe přidá informace do sestavení jazyka IL, které nástroj Ngen.exe používá k vytvoření optimalizované nativní bitové kopie sestavení.</span><span class="sxs-lookup"><span data-stu-id="2052e-114">Mpgo.exe adds information to IL assemblies that Ngen.exe uses to create optimized native image assemblies.</span></span> <span data-ttu-id="2052e-115">Další informace naleznete v položce [Zlepšení výkonu spuštění aplikací klasické pracovní plochy](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) v blogu .NET.</span><span class="sxs-lookup"><span data-stu-id="2052e-115">For more information, see the entry [Improving Launch Performance for your Desktop Applications](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) in the .NET blog.</span></span>  
  
<span data-ttu-id="2052e-116">Tento nástroj je automaticky nainstalován se sadou Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="2052e-116">This tool is automatically installed with Visual Studio.</span></span> <span data-ttu-id="2052e-117">Chcete-li nástroj spustit, použijte příkazový řádek pro vývojáře pro sadu Visual Studio (nebo příkazový řádek sady Visual Studio v systému Windows 7) s pověřeními správce a na příkazovém řádku zadejte následující příkaz.</span><span class="sxs-lookup"><span data-stu-id="2052e-117">To run the tool, use the Developer Command Prompt for Visual Studio (or the Visual Studio Command Prompt in Windows 7) with administrator credentials, and type the following at the command prompt.</span></span> <span data-ttu-id="2052e-118">Další informace naleznete v [příkazových koncích](developer-command-prompt-for-vs.md).</span><span class="sxs-lookup"><span data-stu-id="2052e-118">For more information, see [Command Prompts](developer-command-prompt-for-vs.md).</span></span>  
  
<span data-ttu-id="2052e-119">Pro aplikace klasické pracovní plochy:</span><span class="sxs-lookup"><span data-stu-id="2052e-119">For desktop apps:</span></span>  
  
```console  
mpgo –Scenario <command> [-Import <directory>] –AssemblyList <assembly1>  <assembly2> ... -OutDir <directory> [options]  
```  
  
<span data-ttu-id="2052e-120">Pro aplikace pro Windows 8.x Store:</span><span class="sxs-lookup"><span data-stu-id="2052e-120">For Windows 8.x Store apps:</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="2052e-121">Syntaxe</span><span class="sxs-lookup"><span data-stu-id="2052e-121">Syntax</span></span>  
  
```console  
mpgo –Scenario <packageName> -AppID <appId> -Timeout <seconds>  
```  
  
## <a name="parameters"></a><span data-ttu-id="2052e-122">Parametry</span><span class="sxs-lookup"><span data-stu-id="2052e-122">Parameters</span></span>  
 <span data-ttu-id="2052e-123">Žádný argument nástroje Mpgo.exe nerozlišuje velká a malá písmena.</span><span class="sxs-lookup"><span data-stu-id="2052e-123">All arguments to Mpgo.exe are case-insensitive.</span></span> <span data-ttu-id="2052e-124">Příkazy začínají pomlčkou.</span><span class="sxs-lookup"><span data-stu-id="2052e-124">Commands are prefixed with a dash.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="2052e-125">Můžete použít `–Scenario` buď `–Import` nebo jako požadovaný příkaz, ale ne obojí.</span><span class="sxs-lookup"><span data-stu-id="2052e-125">You can use either `–Scenario` or `–Import` as a required command, but not both.</span></span> <span data-ttu-id="2052e-126">Pokud zadáte `–Reset` možnost, nepoužije se žádný z požadovaných parametrů.</span><span class="sxs-lookup"><span data-stu-id="2052e-126">None of the required parameters are used if you specify the `–Reset` option.</span></span>

|<span data-ttu-id="2052e-127">Povinný parametr</span><span class="sxs-lookup"><span data-stu-id="2052e-127">Required parameter</span></span>|<span data-ttu-id="2052e-128">Popis</span><span class="sxs-lookup"><span data-stu-id="2052e-128">Description</span></span>|
|------------------------|-----------------|
|<span data-ttu-id="2052e-129">`-Scenario`\< *příkaz*></span><span class="sxs-lookup"><span data-stu-id="2052e-129">`-Scenario` \<*command*></span></span><br /><br /> <span data-ttu-id="2052e-130">—nebo—</span><span class="sxs-lookup"><span data-stu-id="2052e-130">—or—</span></span><br /><br /> <span data-ttu-id="2052e-131">`-Scenario`\< *packageName*></span><span class="sxs-lookup"><span data-stu-id="2052e-131">`-Scenario` \<*packageName*></span></span><br /><br /> <span data-ttu-id="2052e-132">-nebo-</span><span class="sxs-lookup"><span data-stu-id="2052e-132">-or-</span></span><br /><br /> <span data-ttu-id="2052e-133">`-Import`\< *adresář*></span><span class="sxs-lookup"><span data-stu-id="2052e-133">`-Import` \<*directory*></span></span>|<span data-ttu-id="2052e-134">U aplikací klasické `–Scenario` pracovní plochy použijte k určení příkazu pro spuštění aplikace, kterou chcete optimalizovat, včetně všech argumentů příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="2052e-134">For desktop apps, use `–Scenario` to specify the command to run the application you want to optimize, including any command-line arguments.</span></span> <span data-ttu-id="2052e-135">Použijte tři sady dvojitých uvozovek kolem *příkazu,* pokud určuje cestu, která obsahuje mezery; například: `mpgo.exe -scenario """C:\My App\myapp.exe""" -assemblylist """C:\My App\myapp.exe""" -outdir "C:\optimized files"`.</span><span class="sxs-lookup"><span data-stu-id="2052e-135">Use three sets of double quotation marks around *command* if it specifies a path that includes spaces; for example: `mpgo.exe -scenario """C:\My App\myapp.exe""" -assemblylist """C:\My App\myapp.exe""" -outdir "C:\optimized files"`.</span></span> <span data-ttu-id="2052e-136">Nepoužívejte dvojité uvozovky; nebudou pracovat správně, pokud *příkaz* obsahuje mezery.</span><span class="sxs-lookup"><span data-stu-id="2052e-136">Do not use double quotation marks; they will not work correctly if *command* includes spaces.</span></span><br /><br /> <span data-ttu-id="2052e-137">-nebo-</span><span class="sxs-lookup"><span data-stu-id="2052e-137">-or-</span></span><br /><br /> <span data-ttu-id="2052e-138">Pro aplikace pro Windows 8.x Store použijte `–Scenario` k určení balíčku, pro který chcete generovat informace o profilu.</span><span class="sxs-lookup"><span data-stu-id="2052e-138">For Windows 8.x Store apps, use `–Scenario` to specify the package that you want to generate profile information for.</span></span> <span data-ttu-id="2052e-139">Při zadání zobrazovaného názvu balíčku nebo názvu řady balíčků namísto kompletního názvu balíčku nástroj Mpgo.exe vybere balíček, který se shoduje se zadaným názvem, pokud existuje pouze jediná shoda.</span><span class="sxs-lookup"><span data-stu-id="2052e-139">If you specify the package display name or the package family name instead of the full package name, Mpgo.exe will select the package that matches the name you provided if there is only one match.</span></span> <span data-ttu-id="2052e-140">Pokud zadanému názvu odpovídá více balíčků, nástroj Mpgo.exe vyzve k výběru balíčku.</span><span class="sxs-lookup"><span data-stu-id="2052e-140">If multiple packages match the specified name, Mpgo.exe will prompt you to choose a package.</span></span><br /><br /> <span data-ttu-id="2052e-141">—nebo—</span><span class="sxs-lookup"><span data-stu-id="2052e-141">—or—</span></span><br /><br /> <span data-ttu-id="2052e-142">Slouží `-Import` k určení, že data optimalizace z dříve optimalizovaných `-AssemblyList`sestavení by měla být použita k optimalizaci sestavení v .</span><span class="sxs-lookup"><span data-stu-id="2052e-142">Use `-Import` to specify that optimization data from previously optimized assemblies should be used to optimize the assemblies in `-AssemblyList`.</span></span> <span data-ttu-id="2052e-143">*adresář* určuje adresář, který obsahuje dříve optimalizované soubory.</span><span class="sxs-lookup"><span data-stu-id="2052e-143">*directory* specifies the directory that contains the previously optimized files.</span></span> <span data-ttu-id="2052e-144">Sestavení zadaná `–AssemblyList` `–AssemblyListFile` v nebo jsou nové verze sestavení, které mají být optimalizovány pomocí dat z importovaných souborů.</span><span class="sxs-lookup"><span data-stu-id="2052e-144">The assemblies specified in `–AssemblyList` or `–AssemblyListFile` are the new versions of the assemblies to be optimized using the data from the imported files.</span></span> <span data-ttu-id="2052e-145">Použití optimalizačních dat ze starších verzí sestavení umožňuje optimalizovat novější verze sestavení bez opětovného spuštění scénáře.</span><span class="sxs-lookup"><span data-stu-id="2052e-145">Using optimization data from older version of assemblies enables you to optimize newer versions of assemblies without re-running the scenario.</span></span>  <span data-ttu-id="2052e-146">Nicméně, pokud importované a cílové sestavení obsahují výrazně odlišný kód, optimalizační data budou neúčinná.</span><span class="sxs-lookup"><span data-stu-id="2052e-146">However, if the imported and target assemblies include significantly different code, the optimization data will be ineffective.</span></span> <span data-ttu-id="2052e-147">Názvy sestavení `–AssemblyList` zadané `–AssemblyListFile` v adresáři nebo `–Import`v adresáři určeném *adresářem*musí být přítomny.</span><span class="sxs-lookup"><span data-stu-id="2052e-147">The assembly names specified in `–AssemblyList` or `–AssemblyListFile` must be present in the directory specified by `–Import`*directory*.</span></span> <span data-ttu-id="2052e-148">Použijte tři sady dvojitých uvozovek kolem *adresáře,* pokud určuje cestu, která obsahuje mezery.</span><span class="sxs-lookup"><span data-stu-id="2052e-148">Use three sets of double quotation marks around *directory* if it specifies a path that includes spaces.</span></span><br /><br /> <span data-ttu-id="2052e-149">Je nutné `–Scenario` zadat `–Import`buď nebo , ale ne oba parametry.</span><span class="sxs-lookup"><span data-stu-id="2052e-149">You must specify either `–Scenario` or `–Import`, but not both parameters.</span></span>|
|<span data-ttu-id="2052e-150">`-OutDir`\< *adresář*></span><span class="sxs-lookup"><span data-stu-id="2052e-150">`-OutDir` \<*directory*></span></span>|<span data-ttu-id="2052e-151">Adresář, do kterého se umístí optimalizovaná sestavení.</span><span class="sxs-lookup"><span data-stu-id="2052e-151">The directory in which to place the optimized assemblies.</span></span> <span data-ttu-id="2052e-152">Pokud sestavení již existuje ve složce výstupního adresáře, vytvoří se nová kopie a k jeho názvu se připojí číslo indexu. například: *název_assembly*-1.exe.</span><span class="sxs-lookup"><span data-stu-id="2052e-152">If an assembly already exists in the output directory folder, a new copy is created and an index number is appended to its name; for example: *assemblyname*-1.exe.</span></span> <span data-ttu-id="2052e-153">Pokud určuje cestu, která obsahuje mezery, použijte kolem *adresáře* dvojité uvozovky.</span><span class="sxs-lookup"><span data-stu-id="2052e-153">Use double quotation marks around *directory* if it specifies a path that contains spaces.</span></span>|
|<span data-ttu-id="2052e-154">`-AssemblyList`\< *assembly1 assembly2 ...*></span><span class="sxs-lookup"><span data-stu-id="2052e-154">`-AssemblyList` \<*assembly1 assembly2 ...*></span></span><br /><br /> <span data-ttu-id="2052e-155">—nebo—</span><span class="sxs-lookup"><span data-stu-id="2052e-155">—or—</span></span><br /><br /> <span data-ttu-id="2052e-156">`-AssemblyListFile`\< *soubor*></span><span class="sxs-lookup"><span data-stu-id="2052e-156">`-AssemblyListFile` \<*file*></span></span>|<span data-ttu-id="2052e-157">Seznam sestavení (včetně souborů .exe a .dll) oddělených mezerami, o kterých je třeba shromáždit profilovací informace.</span><span class="sxs-lookup"><span data-stu-id="2052e-157">A list of assemblies (including .exe and .dll files), separated by spaces, that you want collect profile information about.</span></span> <span data-ttu-id="2052e-158">Můžete určit `C:\Dir\*.dll` `*.dll` nebo vybrat všechna sestavení v určeném nebo aktuálním pracovním adresáři.</span><span class="sxs-lookup"><span data-stu-id="2052e-158">You can specify `C:\Dir\*.dll` or `*.dll` to select all the assemblies in the designated or current working directory.</span></span> <span data-ttu-id="2052e-159">Další informace naleznete v části Poznámky.</span><span class="sxs-lookup"><span data-stu-id="2052e-159">See the Remarks section for more information.</span></span><br /><br /> <span data-ttu-id="2052e-160">—nebo—</span><span class="sxs-lookup"><span data-stu-id="2052e-160">—or—</span></span><br /><br /> <span data-ttu-id="2052e-161">Textový soubor obsahující seznam sestavení, o kterých je třeba shromáždit profilovací informace. Vždy je uvedeno jedno sestavení na řádku.</span><span class="sxs-lookup"><span data-stu-id="2052e-161">A text file that contains the list of assemblies you want to collect profile information about, listed one assembly per line.</span></span> <span data-ttu-id="2052e-162">Pokud název sestavení začíná pomlčkou (-), je třeba použít soubor seznamu sestavení nebo sestavení přejmenovat.</span><span class="sxs-lookup"><span data-stu-id="2052e-162">If an assembly name begins with a hyphen (-), use an assembly file list or rename the assembly.</span></span>|
|<span data-ttu-id="2052e-163">`-AppID`\< *appId*></span><span class="sxs-lookup"><span data-stu-id="2052e-163">`-AppID` \<*appId*></span></span>|<span data-ttu-id="2052e-164">ID aplikace v zadaném balíčku.</span><span class="sxs-lookup"><span data-stu-id="2052e-164">The ID of the application in the specified package.</span></span> <span data-ttu-id="2052e-165">Pokud použijete zástupný\*znak ( ), Mpgo.exe se pokusí vytvořit výčet AppID \<v balíčku a bude klesat zpět na *package_family_name*>! Aplikace, pokud se nezdaří.</span><span class="sxs-lookup"><span data-stu-id="2052e-165">If you use the wildcard (\*), Mpgo.exe will try to enumerate the AppIDs in the package and will fall back to \<*package_family_name*>!App if it fails.</span></span> <span data-ttu-id="2052e-166">Při zadání řetězce, který má předponu vykřičník (!), bude nástroj Mpgo.exe řetězit název řady balíčků s dodaným argumentem.</span><span class="sxs-lookup"><span data-stu-id="2052e-166">If you specify a string that is prefixed by an exclamation point (!), Mpgo.exe will concatenate the package family name with the argument provided.</span></span>|
|<span data-ttu-id="2052e-167">`-Timeout`\< *sekundy*></span><span class="sxs-lookup"><span data-stu-id="2052e-167">`-Timeout` \<*seconds*></span></span>|<span data-ttu-id="2052e-168">Doba, po kterou se aplikace pro Windows 8.x Store spustí před ukončením aplikace.</span><span class="sxs-lookup"><span data-stu-id="2052e-168">The amount of time to allow the Windows 8.x Store app to run before the app exits.</span></span>|

|<span data-ttu-id="2052e-169">Volitelný parametr</span><span class="sxs-lookup"><span data-stu-id="2052e-169">Optional parameter</span></span>|<span data-ttu-id="2052e-170">Popis</span><span class="sxs-lookup"><span data-stu-id="2052e-170">Description</span></span>|
|------------------------|-----------------|
|`-64bit`|<span data-ttu-id="2052e-171">Upraví sestavení pro 64bitové systémy.</span><span class="sxs-lookup"><span data-stu-id="2052e-171">Instruments the assemblies for 64-bit systems.</span></span>  <span data-ttu-id="2052e-172">Tento parametr je nutné zadat pro 64bitová sestavení, i když sestavení samo sebe prohlašuje za 64bitové.</span><span class="sxs-lookup"><span data-stu-id="2052e-172">You must specify this parameter for 64-bit assemblies, even if your assembly declares itself as 64 bit.</span></span>|
|<span data-ttu-id="2052e-173">`-ExeConfig`\< *název souboru*></span><span class="sxs-lookup"><span data-stu-id="2052e-173">`-ExeConfig` \<*filename*></span></span>|<span data-ttu-id="2052e-174">Určuje konfigurační soubor, který scénář využívá k poskytování informací o verzi a zavaděči.</span><span class="sxs-lookup"><span data-stu-id="2052e-174">Specifies the configuration file that your scenario uses to provide version and loader information.</span></span>|
|`-f`|<span data-ttu-id="2052e-175">Vynutí zahrnutí dat profilu do binárního sestavení, i pokud je podepsáno.</span><span class="sxs-lookup"><span data-stu-id="2052e-175">Forces the inclusion of the profile data in a binary assembly, even if it's signed.</span></span>  <span data-ttu-id="2052e-176">Pokud je sestavení podepsáno, je třeba jej znovu podepsat, jinak se načtení a spuštění sestavení nezdaří.</span><span class="sxs-lookup"><span data-stu-id="2052e-176">If the assembly is signed, it must be re-signed; otherwise, the assembly will fail to load and run.</span></span>|
|`-Reset`|<span data-ttu-id="2052e-177">Nastaví výchozí hodnoty prostředí pro ujištění, že přerušená relace profilování nemá žádný vliv na sestavení, a poté se ukončí.</span><span class="sxs-lookup"><span data-stu-id="2052e-177">Resets the environment to make certain that an aborted profiling session doesn't affect your assemblies, and then quits.</span></span> <span data-ttu-id="2052e-178">Prostředí je nastaveno na výchozí hodnoty standardně před relací a po relaci profilování.</span><span class="sxs-lookup"><span data-stu-id="2052e-178">The environment is reset by default before and after a profiling session.</span></span>|
|<span data-ttu-id="2052e-179">`-Timeout`\< *čas v sekundách*></span><span class="sxs-lookup"><span data-stu-id="2052e-179">`-Timeout` \<*time in seconds*></span></span>|<span data-ttu-id="2052e-180">Určuje dobu profilování v sekundách.</span><span class="sxs-lookup"><span data-stu-id="2052e-180">Specifies the profiling duration in seconds.</span></span> <span data-ttu-id="2052e-181">Je třeba použít hodnotu, která je mírně vyšší než pozorované časy spuštění grafického uživatelského rozhraní (GUI) aplikace.</span><span class="sxs-lookup"><span data-stu-id="2052e-181">Use a value that is slightly more than your observed startup times for GUI applications.</span></span> <span data-ttu-id="2052e-182">Na konci časového limitu jsou zaznamenána data profilu, přestože aplikace nadále běží.</span><span class="sxs-lookup"><span data-stu-id="2052e-182">At the end of the time-out period, the profile data is recorded although the application continues to run.</span></span> <span data-ttu-id="2052e-183">Pokud tuto možnost nenastavíte, bude profilování pokračovat až do ukončení aplikace, kdy budou data zaznamenána.</span><span class="sxs-lookup"><span data-stu-id="2052e-183">If you don't set this option, profiling will continue until application shutdown, at which time the data will be recorded.</span></span>|
|`-LeaveNativeImages`|<span data-ttu-id="2052e-184">Určuje, že po spuštění scénáře by neměly být odebrány upravené nativní bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="2052e-184">Specifies that the instrumented native images shouldn't be removed after running the scenario.</span></span> <span data-ttu-id="2052e-185">Tato možnost se používá především u aplikace, která byla určena pro spuštěný scénář.</span><span class="sxs-lookup"><span data-stu-id="2052e-185">This option is primarily used when you're getting the application that you specified for the scenario running.</span></span> <span data-ttu-id="2052e-186">Zabrání opětovnému vytvoření nativních bitových kopií pro následné spuštění nástroje Mpgo.exe.</span><span class="sxs-lookup"><span data-stu-id="2052e-186">It will prevent the recreation of native images for subsequent runs of Mpgo.exe.</span></span> <span data-ttu-id="2052e-187">Při zadání této možnosti mohou být po dokončení běhu aplikace ve vyrovnávací paměti přítomny osamocené nativní bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="2052e-187">When you have finished running your application, there may be orphaned native images in the cache if you specify this option.</span></span> <span data-ttu-id="2052e-188">V takovém případě spusťte mpgo.exe se stejným `–RemoveNativeImages` scénářem a seznamem sestavení a použijte parametr k odebrání těchto nativních bitových kopií.</span><span class="sxs-lookup"><span data-stu-id="2052e-188">In this case, run Mpgo.exe with the same scenario and assembly list and use the `–RemoveNativeImages` parameter to remove these native images.</span></span>|
|`-RemoveNativeImages`|<span data-ttu-id="2052e-189">Vyčistí z běhu, `–LeaveNativeImages` kde byl zadán.</span><span class="sxs-lookup"><span data-stu-id="2052e-189">Cleans up from a run where `–LeaveNativeImages` was specified.</span></span> <span data-ttu-id="2052e-190">Pokud zadáte `-RemoveNativeImages`, Program Mpgo.exe ignoruje `-64bit` `–AssemblyList`všechny argumenty s výjimkou a a ukončí po odebrání všech instrumentovaných nativních obrazů.</span><span class="sxs-lookup"><span data-stu-id="2052e-190">If you specify `-RemoveNativeImages`, Mpgo.exe ignores any arguments except `-64bit` and `–AssemblyList`, and exits after removing all instrumented native images.</span></span>|

## <a name="remarks"></a><span data-ttu-id="2052e-191">Poznámky</span><span class="sxs-lookup"><span data-stu-id="2052e-191">Remarks</span></span>
 <span data-ttu-id="2052e-192">Na příkazovém řádku můžete použít obojí `–AssemblyList` i `- AssemblyListFile` vícekrát.</span><span class="sxs-lookup"><span data-stu-id="2052e-192">You can use both `–AssemblyList` and `- AssemblyListFile` multiple times on the command line.</span></span>

 <span data-ttu-id="2052e-193">Pokud při určování sestavení nezadáte úplný název cesty, nástroj Mpgo.exe hledá v aktuálním adresáři.</span><span class="sxs-lookup"><span data-stu-id="2052e-193">If you do not specify full path names when specifying assemblies, Mpgo.exe looks in the current directory.</span></span> <span data-ttu-id="2052e-194">Při zadání nesprávné cesty nástroj Mpgo.exe zobrazí chybovou zprávu, ale stále generuje data pro jiná sestavení.</span><span class="sxs-lookup"><span data-stu-id="2052e-194">If you specify an incorrect path, Mpgo.exe displays an error message but continues to generate data for other assemblies.</span></span> <span data-ttu-id="2052e-195">Při zadání sestavení, které není načteno během trénovacího scénáře, nejsou pro toto sestavení generována žádná trénovací data.</span><span class="sxs-lookup"><span data-stu-id="2052e-195">If you specify an assembly that is not loaded during the training scenario, no training data is generated for that assembly.</span></span>

 <span data-ttu-id="2052e-196">Jestliže se sestavení ze seznamu nachází v globální mezipaměti sestavení (GAC), nebude aktualizováno pro zahrnutí informací o profilu.</span><span class="sxs-lookup"><span data-stu-id="2052e-196">If an assembly in the list is in the global assembly cache, it will not be updated to contain the profile information.</span></span>  <span data-ttu-id="2052e-197">Pro shromáždění informací o profilu je třeba sestavení odebrat z globální mezipaměti sestavení (GAC).</span><span class="sxs-lookup"><span data-stu-id="2052e-197">Remove it from the global assembly cache to collect profile information.</span></span>

 <span data-ttu-id="2052e-198">Použití nástrojů Ngen.exe a Mpgo.exe je doporučeno pouze pro velké spravované aplikace, protože výhoda předkompilovaných nativních bitových kopií je obvykle vidět pouze v případě, že eliminuje významné množství kompilace JIT za běhu.</span><span class="sxs-lookup"><span data-stu-id="2052e-198">The use of Ngen.exe and Mpgo.exe is recommended only for large managed applications, because the benefit of precompiled native images is typically seen only when it eliminates significant JIT compilation at run time.</span></span> <span data-ttu-id="2052e-199">Spuštění programu Mpgo.exe v aplikacích stylu "Hello World", které nejsou náročné na pracovní sadu, neposkytne žádné výhody a mpgo.exe může dokonce selhat při shromažďování dat profilu.</span><span class="sxs-lookup"><span data-stu-id="2052e-199">Running Mpgo.exe on "Hello World" style applications that aren’t working-set intensive will not provide any benefits, and Mpgo.exe may even fail to gather profile data.</span></span>

> [!NOTE]
> <span data-ttu-id="2052e-200">Nástroje Ngen.exe a Mpgo.exe nejsou vhodné pro aplikace ASP.NET a služby Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="2052e-200">Ngen.exe and Mpgo.exe are not recommended for ASP.NET applications and Windows Communication Foundation (WCF) services.</span></span>  
  
## <a name="to-use-mpgoexe"></a><span data-ttu-id="2052e-201">Použití nástroje Mpgo.exe</span><span class="sxs-lookup"><span data-stu-id="2052e-201">To Use Mpgo.exe</span></span>  
  
1. <span data-ttu-id="2052e-202">Použijte počítač, který má nainstalovánu vaši aplikaci a sadu Visual Studio Ultimate 2012.</span><span class="sxs-lookup"><span data-stu-id="2052e-202">Use a computer that has the Visual Studio Ultimate 2012 and your application installed.</span></span>  
  
2. <span data-ttu-id="2052e-203">Spusťte nástroj Mpgo.exe jako správce s nezbytnými parametry.</span><span class="sxs-lookup"><span data-stu-id="2052e-203">Run Mpgo.exe as an administrator with the necessary parameters.</span></span>  <span data-ttu-id="2052e-204">Ukázkové příkazy naleznete v další části.</span><span class="sxs-lookup"><span data-stu-id="2052e-204">See the next section for sample commands.</span></span>  
  
     <span data-ttu-id="2052e-205">Sestavení optimalizovaného zprostředkujícího jazyka (IL) jsou `–OutDir` vytvořena ve složce určené `C:\Optimized` parametrem (v příkladech se jedná o složku).</span><span class="sxs-lookup"><span data-stu-id="2052e-205">The optimized intermediate language (IL) assemblies are created in the folder specified by the `–OutDir` parameter (in the examples, this is the `C:\Optimized` folder).</span></span>  
  
3. <span data-ttu-id="2052e-206">Nahraďte sestavení IL použitá pro soubor Ngen.exe novými sestaveními IL, `–OutDir`která obsahují informace o profilu z adresáře určeného aplikací .</span><span class="sxs-lookup"><span data-stu-id="2052e-206">Replace the IL assemblies you used for Ngen.exe  with the new IL assemblies that contain the profile information from the directory specified by `–OutDir`.</span></span>  
  
4. <span data-ttu-id="2052e-207">Instalace aplikace (pomocí bitových kopií poskytnutých nástrojem Mpgo.exe) nainstaluje optimalizované nativní bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="2052e-207">The application setup (using the images provided by Mpgo.exe) will install optimized native images.</span></span>  
  
## <a name="suggested-workflow"></a><span data-ttu-id="2052e-208">Navrhovaný pracovní postup</span><span class="sxs-lookup"><span data-stu-id="2052e-208">Suggested Workflow</span></span>  
  
1. <span data-ttu-id="2052e-209">Vytvořte sadu optimalizovaných sestav IL pomocí parametru `–Scenario` Mpgo.exe.</span><span class="sxs-lookup"><span data-stu-id="2052e-209">Create a set of optimized IL assemblies by using Mpgo.exe with the `–Scenario` parameter.</span></span>  
  
2. <span data-ttu-id="2052e-210">Zaveďte optimalizovaná sestavení jazyka IL do správy zdrojového kódu.</span><span class="sxs-lookup"><span data-stu-id="2052e-210">Check the optimized IL assemblies into source control.</span></span>  
  
3. <span data-ttu-id="2052e-211">V procesu sestavení volejte Mpgo.exe s `–Import` parametrem jako krok po sestavení pro generování optimalizovaných il bitových kopií pro předání ngen.exe.</span><span class="sxs-lookup"><span data-stu-id="2052e-211">In the build process, call Mpgo.exe with the `–Import` parameter as a post-build step to generate optimized IL images to pass to Ngen.exe.</span></span>  
  
 <span data-ttu-id="2052e-212">Tento proces zajišťuje, že všechna sestavení mají optimalizační data.</span><span class="sxs-lookup"><span data-stu-id="2052e-212">This process ensures that all assemblies have optimization data.</span></span> <span data-ttu-id="2052e-213">Při častějším zavádění aktualizovaných optimalizovaných sestavení (kroky 1 a 2) bude výkon během celého vývoje produktu konzistentnější.</span><span class="sxs-lookup"><span data-stu-id="2052e-213">If you check in updated optimized assemblies (steps 1 and 2) more frequently, the performance numbers will be more consistent throughout product development.</span></span>  
  
## <a name="using-mpgoexe-from-visual-studio"></a><span data-ttu-id="2052e-214">Použití nástroje Mpgo.exe ze sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="2052e-214">Using Mpgo.exe from Visual Studio</span></span>  
 <span data-ttu-id="2052e-215">Mpgo.exe můžete spustit z Visual Studia (viz článek [Jak: Zadejte události sestavení (C#)](/visualstudio/ide/how-to-specify-build-events-csharp)s následujícími omezeními:</span><span class="sxs-lookup"><span data-stu-id="2052e-215">You can run Mpgo.exe from Visual Studio (see the article [How to: Specify Build Events (C#)](/visualstudio/ide/how-to-specify-build-events-csharp)) with the following restrictions:</span></span>  
  
- <span data-ttu-id="2052e-216">Nelze použít cesty v uvozovkách ukončené lomítkem, protože makra sady Visual Studio ve výchozím nastavení také používají koncová lomítka.</span><span class="sxs-lookup"><span data-stu-id="2052e-216">You cannot use quoted paths with trailing slash marks, because Visual Studio macros also use trailing slash marks by default.</span></span> <span data-ttu-id="2052e-217">(Například `–OutDir "C:\Output Folder\"` je neplatný.) Chcete-li toto omezení obejít, můžete uniknout koncovému lomítku.</span><span class="sxs-lookup"><span data-stu-id="2052e-217">(For example, `–OutDir "C:\Output Folder\"` is invalid.) To work around this restriction, you can escape the trailing slash.</span></span> <span data-ttu-id="2052e-218">(Místo toho `-OutDir "$(OutDir)\"` použijte například.)</span><span class="sxs-lookup"><span data-stu-id="2052e-218">(For example, use `-OutDir "$(OutDir)\"` instead.)</span></span>  
  
- <span data-ttu-id="2052e-219">Ve výchozím nastavení není nástroj Mpgo.exe v cestě sestavení sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="2052e-219">By default, Mpgo.exe is not on the Visual Studio build path.</span></span> <span data-ttu-id="2052e-220">Je nutné přidat cestu do sady Visual Studio nebo zadat úplnou cestu v příkazovém řádku nástroje Mpgo.exe.</span><span class="sxs-lookup"><span data-stu-id="2052e-220">You must either add the path to Visual Studio or specify the full path on the Mpgo command line.</span></span> <span data-ttu-id="2052e-221">Můžete použít `–Scenario` buď nebo `–Import` parametr v post-build události v sadě Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="2052e-221">You can use either the `–Scenario` or the `–Import` parameter in the post-build event in Visual Studio.</span></span> <span data-ttu-id="2052e-222">Typickým procesem je `–Scenario` však použít jednou z příkazového řádku `–Import` pro vývojáře pro Visual Studio a potom použít k aktualizaci optimalizovaných sestavení po každém sestavení; například: `"C:\Program Files\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\mpgo.exe" -import "$(OutDir)tmp" -assemblylist "$(TargetPath)" -outdir "$(OutDir)\"`.</span><span class="sxs-lookup"><span data-stu-id="2052e-222">However, the typical process is to use `–Scenario` one time from a Developer Command Prompt for Visual Studio, and then use `–Import` to update the optimized assemblies after each build; for example:  `"C:\Program Files\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\mpgo.exe" -import "$(OutDir)tmp" -assemblylist "$(TargetPath)" -outdir "$(OutDir)\"`.</span></span>  
  
<a name="samples"></a>
## <a name="examples"></a><span data-ttu-id="2052e-223">Příklady</span><span class="sxs-lookup"><span data-stu-id="2052e-223">Examples</span></span>  
 <span data-ttu-id="2052e-224">Následující příkaz Mpgo.exe z příkazového řádku pro vývojáře pro Visual Studio optimalizuje daňovou aplikaci:</span><span class="sxs-lookup"><span data-stu-id="2052e-224">The following Mpgo.exe command from a Developer Command Prompt for Visual Studio optimizes a tax application:</span></span>  
  
```console  
mpgo –scenario "C:\MyApp\MyTax.exe /params par" –AssemblyList Mytax.dll MyTaxUtil2011.dll –OutDir C:\Optimized –TimeOut 15  
```  
  
 <span data-ttu-id="2052e-225">Následující příkaz nástroje Mpgo.exe optimalizuje zvukovou aplikaci:</span><span class="sxs-lookup"><span data-stu-id="2052e-225">The following Mpgo.exe command optimizes a sound application:</span></span>  
  
```console  
mpgo –scenario "C:\MyApp\wav2wma.exe –input song1.wav –output song1.wma" –AssemblyList transcode.dll –OutDir C:\Optimized –TimeOut 15  
```  
  
 <span data-ttu-id="2052e-226">Následující příkaz nástroje Mpgo.exe používá data z dříve optimalizovaných sestavení pro optimalizaci novějších verzí sestavení:</span><span class="sxs-lookup"><span data-stu-id="2052e-226">The following Mpgo.exe command uses data from previously optimized assemblies to optimize newer versions of the assemblies:</span></span>  
  
```console  
mpgo.exe -import "C:\Optimized" -assemblylist "C:\MyApp\MyTax.dll" "C:\MyApp\MyTaxUtil2011.dll" -outdir C:\ReOptimized  
```  
  
## <a name="see-also"></a><span data-ttu-id="2052e-227">Viz také</span><span class="sxs-lookup"><span data-stu-id="2052e-227">See also</span></span>

- [<span data-ttu-id="2052e-228">Ngen.exe (generátor nativních obrázků)</span><span class="sxs-lookup"><span data-stu-id="2052e-228">Ngen.exe (Native Image Generator)</span></span>](ngen-exe-native-image-generator.md)
- [<span data-ttu-id="2052e-229">Příkazové řádky</span><span class="sxs-lookup"><span data-stu-id="2052e-229">Command Prompts</span></span>](developer-command-prompt-for-vs.md)
- [<span data-ttu-id="2052e-230">Zlepšení výkonu spuštění pro desktopové aplikace</span><span class="sxs-lookup"><span data-stu-id="2052e-230">Improving Launch Performance for your Desktop Applications</span></span>](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/)
- [<span data-ttu-id="2052e-231">Přehled vylepšení výkonu v rozhraní .NET 4.5</span><span class="sxs-lookup"><span data-stu-id="2052e-231">An Overview of Performance Improvements in .NET 4.5</span></span>](https://docs.microsoft.com/archive/msdn-magazine/2012/april/clr-an-overview-of-performance-improvements-in-net-4-5)
