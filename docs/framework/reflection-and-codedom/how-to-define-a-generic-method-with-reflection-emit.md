---
title: 'Postupy: Definování obecné metody pomocí generování reflexe'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- generics [.NET Framework], reflection emit
- reflection emit, generic methods
- generics [.NET Framework], dynamic types
ms.assetid: 93892fa4-90b3-4ec4-b147-4bec9880de2b
ms.openlocfilehash: d16f6728b01583fe3ffb8d892522f3892444c537
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/30/2019
ms.locfileid: "73130175"
---
# <a name="how-to-define-a-generic-method-with-reflection-emit"></a><span data-ttu-id="47da9-102">Postupy: Definování obecné metody pomocí generování reflexe</span><span class="sxs-lookup"><span data-stu-id="47da9-102">How to: Define a Generic Method with Reflection Emit</span></span>

<span data-ttu-id="47da9-103">První procedura ukazuje, jak vytvořit jednoduchou obecnou metodu se dvěma parametry typu a jak použít omezení třídy, omezení rozhraní a zvláštní omezení pro parametry typu.</span><span class="sxs-lookup"><span data-stu-id="47da9-103">The first procedure shows how to create a simple generic method with two type parameters, and how to apply class constraints, interface constraints, and special constraints to the type parameters.</span></span>

<span data-ttu-id="47da9-104">Druhý postup ukazuje, jak vygenerovat tělo metody, jak používat parametry typu obecné metody k vytvoření instance obecných typů a jak volat jejich metody.</span><span class="sxs-lookup"><span data-stu-id="47da9-104">The second procedure shows how to emit the method body, and how to use the type parameters of the generic method to create instances of generic types and to call their methods.</span></span>

<span data-ttu-id="47da9-105">Třetí postup ukazuje, jak zavolat obecnou metodu.</span><span class="sxs-lookup"><span data-stu-id="47da9-105">The third procedure shows how to invoke the generic method.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="47da9-106">Metoda není obecná jen proto, že patří obecnému typu a používá parametry typu daného typu.</span><span class="sxs-lookup"><span data-stu-id="47da9-106">A method is not generic just because it belongs to a generic type and uses the type parameters of that type.</span></span> <span data-ttu-id="47da9-107">Metoda je obecná pouze v případě, že má svůj vlastní seznam parametrů typu.</span><span class="sxs-lookup"><span data-stu-id="47da9-107">A method is generic only if it has its own type parameter list.</span></span> <span data-ttu-id="47da9-108">Obecná metoda se může objevit v neobecném typu, jako je tomu v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="47da9-108">A generic method can appear on a nongeneric type, as in this example.</span></span> <span data-ttu-id="47da9-109">Příklad neobecné metody na obecném typu naleznete v tématu [How to: define a Generic Type with reflexe Emit](how-to-define-a-generic-type-with-reflection-emit.md).</span><span class="sxs-lookup"><span data-stu-id="47da9-109">For an example of a nongeneric method on a generic type, see [How to: Define a Generic Type with Reflection Emit](how-to-define-a-generic-type-with-reflection-emit.md).</span></span>

### <a name="to-define-a-generic-method"></a><span data-ttu-id="47da9-110">Definice obecné metody</span><span class="sxs-lookup"><span data-stu-id="47da9-110">To define a generic method</span></span>

1. <span data-ttu-id="47da9-111">Než začnete, je užitečné si prohlédnout, jak obecná metoda vypadá, když je napsána pomocí jazyka vysoké úrovně.</span><span class="sxs-lookup"><span data-stu-id="47da9-111">Before beginning, it is useful to look at how the generic method appears when written using a high-level language.</span></span> <span data-ttu-id="47da9-112">Následující kód je zahrnut v příkladu kódu pro toto téma spolu s kódem pro volání obecné metody.</span><span class="sxs-lookup"><span data-stu-id="47da9-112">The following code is included in the example code for this topic, along with code to call the generic method.</span></span> <span data-ttu-id="47da9-113">Metoda má dva parametry typu `TInput` a `TOutput`, druhý z nich musí být odkazovým typem (`class`), musí mít konstruktor bez parametrů (`new`) a musí implementovat rozhraní `ICollection(Of TInput)` (`ICollection<TInput>` v jazyce C#).</span><span class="sxs-lookup"><span data-stu-id="47da9-113">The method has two type parameters, `TInput` and `TOutput`, the second of which must be a reference type (`class`), must have a parameterless constructor (`new`), and must implement `ICollection(Of TInput)` (`ICollection<TInput>` in C#).</span></span> <span data-ttu-id="47da9-114">Toto omezení rozhraní zajišťuje, že metodu <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType> lze použít k přidání prvků do kolekce `TOutput`, kterou metoda vytvoří.</span><span class="sxs-lookup"><span data-stu-id="47da9-114">This interface constraint ensures that the <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType> method can be used to add elements to the `TOutput` collection that the method creates.</span></span> <span data-ttu-id="47da9-115">Tato metoda má jeden formální parametr `input`, což je pole `TInput`.</span><span class="sxs-lookup"><span data-stu-id="47da9-115">The method has one formal parameter, `input`, which is an array of `TInput`.</span></span> <span data-ttu-id="47da9-116">Metoda vytvoří kolekci typu `TOutput` a zkopíruje prvky parametru `input` do této kolekce.</span><span class="sxs-lookup"><span data-stu-id="47da9-116">The method creates a collection of type `TOutput` and copies the elements of `input` to the collection.</span></span>

    [!code-csharp[GenericMethodHowTo#20](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#20)]
    [!code-vb[GenericMethodHowTo#20](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#20)]

2. <span data-ttu-id="47da9-117">Definujte dynamické sestavení a dynamický modul obsahující typ, ke kterému tato obecná metoda patří.</span><span class="sxs-lookup"><span data-stu-id="47da9-117">Define a dynamic assembly and a dynamic module to contain the type the generic method belongs to.</span></span> <span data-ttu-id="47da9-118">V tomto případě má sestavení pouze jeden modul s názvem `DemoMethodBuilder1` a název tohoto modulu je stejný jako název sestavení s příponou souboru.</span><span class="sxs-lookup"><span data-stu-id="47da9-118">In this case, the assembly has only one module, named `DemoMethodBuilder1`, and the module name is the same as the assembly name plus an extension.</span></span> <span data-ttu-id="47da9-119">V tomto příkladu je sestavení uloženo na disk a také spuštěno, takže je zadáno <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="47da9-119">In this example, the assembly is saved to disk and also executed, so <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=nameWithType> is specified.</span></span> <span data-ttu-id="47da9-120">Nástroj [Ildasm. exe (IL Disassembler)](../tools/ildasm-exe-il-disassembler.md) můžete použít k prohlédnutí souboru DemoMethodBuilder1. dll a k jeho porovnání do jazyka MSIL (Microsoft Intermediate Language) pro metodu, která je znázorněna v kroku 1.</span><span class="sxs-lookup"><span data-stu-id="47da9-120">You can use the [Ildasm.exe (IL Disassembler)](../tools/ildasm-exe-il-disassembler.md) to examine DemoMethodBuilder1.dll and to compare it to the Microsoft intermediate language (MSIL) for the method shown in step 1.</span></span>

    [!code-csharp[GenericMethodHowTo#2](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#2)]
    [!code-vb[GenericMethodHowTo#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#2)]

3. <span data-ttu-id="47da9-121">Definujte typ, ke kterému obecná metoda patří.</span><span class="sxs-lookup"><span data-stu-id="47da9-121">Define the type the generic method belongs to.</span></span> <span data-ttu-id="47da9-122">Tento typ nemusí být obecný.</span><span class="sxs-lookup"><span data-stu-id="47da9-122">The type does not have to be generic.</span></span> <span data-ttu-id="47da9-123">Obecná metoda může patřit obecnému nebo neobecnému typu.</span><span class="sxs-lookup"><span data-stu-id="47da9-123">A generic method can belong to either a generic or nongeneric type.</span></span> <span data-ttu-id="47da9-124">V příkladu je tento typ třída, není obecná a má název `DemoType`.</span><span class="sxs-lookup"><span data-stu-id="47da9-124">In this example, the type is a class, is not generic, and is named `DemoType`.</span></span>

    [!code-csharp[GenericMethodHowTo#3](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#3)]
    [!code-vb[GenericMethodHowTo#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#3)]

4. <span data-ttu-id="47da9-125">Definujte obecnou metodu.</span><span class="sxs-lookup"><span data-stu-id="47da9-125">Define the generic method.</span></span> <span data-ttu-id="47da9-126">Pokud jsou typy formálních parametrů obecné metody určeny parametry obecného typu obecné metody, použijte přetížení metody <xref:System.Reflection.Emit.TypeBuilder.DefineMethod%28System.String%2CSystem.Reflection.MethodAttributes%29> k definici této metody.</span><span class="sxs-lookup"><span data-stu-id="47da9-126">If the types of a generic method's formal parameters are specified by generic type parameters of the generic method, use the <xref:System.Reflection.Emit.TypeBuilder.DefineMethod%28System.String%2CSystem.Reflection.MethodAttributes%29> method overload to define the method.</span></span> <span data-ttu-id="47da9-127">Parametry obecného typu metody nejsou ještě definovány, proto nelze určit typy formálních parametrů metody při volání metody <xref:System.Reflection.Emit.TypeBuilder.DefineMethod%2A>.</span><span class="sxs-lookup"><span data-stu-id="47da9-127">The generic type parameters of the method are not yet defined, so you cannot specify the types of the method's formal parameters in the call to <xref:System.Reflection.Emit.TypeBuilder.DefineMethod%2A>.</span></span> <span data-ttu-id="47da9-128">Metoda v tomto příkladu je pojmenována `Factory`.</span><span class="sxs-lookup"><span data-stu-id="47da9-128">In this example, the method is named `Factory`.</span></span> <span data-ttu-id="47da9-129">Tato metoda je veřejná a deklarovaná jako `static` (`Shared` v jazyce Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="47da9-129">The method is public and `static` (`Shared` in Visual Basic).</span></span>

    [!code-csharp[GenericMethodHowTo#4](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#4)]
    [!code-vb[GenericMethodHowTo#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#4)]

5. <span data-ttu-id="47da9-130">Definujte parametry obecného typu metody `DemoMethod` předáním pole řetězců obsahujícího názvy parametrů metodě <xref:System.Reflection.Emit.MethodBuilder.DefineGenericParameters%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="47da9-130">Define the generic type parameters of `DemoMethod` by passing an array of strings containing the names of the parameters to the <xref:System.Reflection.Emit.MethodBuilder.DefineGenericParameters%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="47da9-131">To tuto metodu učiní obecnou metodou.</span><span class="sxs-lookup"><span data-stu-id="47da9-131">This makes the method a generic method.</span></span> <span data-ttu-id="47da9-132">Následující kód učiní metodu `Factory` obecnou metodou s parametry typu `TInput` a `TOutput`.</span><span class="sxs-lookup"><span data-stu-id="47da9-132">The following code makes `Factory` a generic method with type parameters `TInput` and `TOutput`.</span></span> <span data-ttu-id="47da9-133">Pro usnadnění čtení kódu jsou vytvořeny proměnné s těmito názvy pro uchování objektů <xref:System.Reflection.Emit.GenericTypeParameterBuilder>, které představují dva parametry typu.</span><span class="sxs-lookup"><span data-stu-id="47da9-133">To make the code easier to read, variables with these names are created to hold the <xref:System.Reflection.Emit.GenericTypeParameterBuilder> objects representing the two type parameters.</span></span>

    [!code-csharp[GenericMethodHowTo#5](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#5)]
    [!code-vb[GenericMethodHowTo#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#5)]

6. <span data-ttu-id="47da9-134">Volitelně lze těmto parametrům typu přidat zvláštní omezení.</span><span class="sxs-lookup"><span data-stu-id="47da9-134">Optionally add special constraints to the type parameters.</span></span> <span data-ttu-id="47da9-135">Zvláštní omezení jsou přidána pomocí metody <xref:System.Reflection.Emit.GenericTypeParameterBuilder.SetGenericParameterAttributes%2A>.</span><span class="sxs-lookup"><span data-stu-id="47da9-135">Special constraints are added using the <xref:System.Reflection.Emit.GenericTypeParameterBuilder.SetGenericParameterAttributes%2A> method.</span></span> <span data-ttu-id="47da9-136">V tomto příkladu je parametr `TOutput` omezen na odkazový typ a musí mít konstruktor bez parametrů.</span><span class="sxs-lookup"><span data-stu-id="47da9-136">In this example, `TOutput` is constrained to be a reference type and to have a parameterless constructor.</span></span>

    [!code-csharp[GenericMethodHowTo#6](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#6)]
    [!code-vb[GenericMethodHowTo#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#6)]

7. <span data-ttu-id="47da9-137">Volitelně lze těmto parametrům typu přidat omezení rozhraní a třídy.</span><span class="sxs-lookup"><span data-stu-id="47da9-137">Optionally add class and interface constraints to the type parameters.</span></span> <span data-ttu-id="47da9-138">V tomto příkladu je parametr typu `TOutput` omezen na typy, které implementují rozhraní `ICollection(Of TInput)` (`ICollection<TInput>` v jazyce C#).</span><span class="sxs-lookup"><span data-stu-id="47da9-138">In this example, type parameter `TOutput` is constrained to types that implement the `ICollection(Of TInput)` (`ICollection<TInput>` in C#) interface.</span></span> <span data-ttu-id="47da9-139">To zajišťuje, že metodu <xref:System.Collections.Generic.ICollection%601.Add%2A> lze použít k přidání prvků.</span><span class="sxs-lookup"><span data-stu-id="47da9-139">This ensures that the <xref:System.Collections.Generic.ICollection%601.Add%2A> method can be used to add elements.</span></span>

    [!code-csharp[GenericMethodHowTo#7](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#7)]
    [!code-vb[GenericMethodHowTo#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#7)]

8. <span data-ttu-id="47da9-140">Definujte formální parametry metody pomocí metody <xref:System.Reflection.Emit.MethodBuilder.SetParameters%2A>.</span><span class="sxs-lookup"><span data-stu-id="47da9-140">Define the formal parameters of the method, using the <xref:System.Reflection.Emit.MethodBuilder.SetParameters%2A> method.</span></span> <span data-ttu-id="47da9-141">V tomto příkladu má metoda `Factory` jen jeden parametr, pole `TInput`.</span><span class="sxs-lookup"><span data-stu-id="47da9-141">In this example, the `Factory` method has one parameter, an array of `TInput`.</span></span> <span data-ttu-id="47da9-142">Tento typ je vytvořen zavoláním metody <xref:System.Type.MakeArrayType%2A> třídy <xref:System.Reflection.Emit.GenericTypeParameterBuilder>, která představuje parametr `TInput`.</span><span class="sxs-lookup"><span data-stu-id="47da9-142">This type is created by calling the <xref:System.Type.MakeArrayType%2A> method on the <xref:System.Reflection.Emit.GenericTypeParameterBuilder> that represents `TInput`.</span></span> <span data-ttu-id="47da9-143">Argument metody <xref:System.Reflection.Emit.MethodBuilder.SetParameters%2A> je pole objektů <xref:System.Type>.</span><span class="sxs-lookup"><span data-stu-id="47da9-143">The argument of <xref:System.Reflection.Emit.MethodBuilder.SetParameters%2A> is an array of <xref:System.Type> objects.</span></span>

    [!code-csharp[GenericMethodHowTo#8](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#8)]
    [!code-vb[GenericMethodHowTo#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#8)]

9. <span data-ttu-id="47da9-144">Definujte návratový typ metody pomocí metody <xref:System.Reflection.Emit.MethodBuilder.SetReturnType%2A>.</span><span class="sxs-lookup"><span data-stu-id="47da9-144">Define the return type for the method, using the <xref:System.Reflection.Emit.MethodBuilder.SetReturnType%2A> method.</span></span> <span data-ttu-id="47da9-145">V tomto příkladu je vrácena instance typu parametru `TOutput`.</span><span class="sxs-lookup"><span data-stu-id="47da9-145">In this example, an instance of `TOutput` is returned.</span></span>

    [!code-csharp[GenericMethodHowTo#9](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#9)]
    [!code-vb[GenericMethodHowTo#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#9)]

10. <span data-ttu-id="47da9-146">Vygenerujte tělo metody pomocí typu <xref:System.Reflection.Emit.ILGenerator>.</span><span class="sxs-lookup"><span data-stu-id="47da9-146">Emit the method body, using <xref:System.Reflection.Emit.ILGenerator>.</span></span> <span data-ttu-id="47da9-147">Podrobnosti naleznete v souvisejícím postupu pro vygenerování těla metody.</span><span class="sxs-lookup"><span data-stu-id="47da9-147">For details, see the accompanying procedure for emitting the method body.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="47da9-148">Při generování volání metod obecných typů v případě, že typy argumentů těchto typů jsou parametry typu obecné metody, je nutné pomocí přetížení metod `static`, <xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29> a <xref:System.Reflection.Emit.TypeBuilder.GetMethod%28System.Type%2CSystem.Reflection.MethodInfo%29> deklarovaných jako <xref:System.Reflection.Emit.TypeBuilder.GetField%28System.Type%2CSystem.Reflection.FieldInfo%29> třídy <xref:System.Reflection.Emit.TypeBuilder> získat zkonstruované formy této metody.</span><span class="sxs-lookup"><span data-stu-id="47da9-148">When you emit calls to methods of generic types, and the type arguments of those types are type parameters of the generic method, you must use the `static`<xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29>, <xref:System.Reflection.Emit.TypeBuilder.GetMethod%28System.Type%2CSystem.Reflection.MethodInfo%29>, and <xref:System.Reflection.Emit.TypeBuilder.GetField%28System.Type%2CSystem.Reflection.FieldInfo%29> method overloads of the <xref:System.Reflection.Emit.TypeBuilder> class to obtain constructed forms of the methods.</span></span> <span data-ttu-id="47da9-149">Tento fakt ukazuje související postup vygenerování těla metody.</span><span class="sxs-lookup"><span data-stu-id="47da9-149">The accompanying procedure for emitting the method body demonstrates this.</span></span>

11. <span data-ttu-id="47da9-150">Dokončete typ obsahující tuto metodu a sestavení uložte.</span><span class="sxs-lookup"><span data-stu-id="47da9-150">Complete the type that contains the method and save the assembly.</span></span> <span data-ttu-id="47da9-151">Související postup volání obecné metody ukazuje dva způsoby volání dokončené metody.</span><span class="sxs-lookup"><span data-stu-id="47da9-151">The accompanying procedure for invoking the generic method shows two ways to invoke the completed method.</span></span>

    [!code-csharp[GenericMethodHowTo#14](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#14)]
    [!code-vb[GenericMethodHowTo#14](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#14)]

<a name="procedureSection1"></a>

### <a name="to-emit-the-method-body"></a><span data-ttu-id="47da9-152">Vygenerování těla metody</span><span class="sxs-lookup"><span data-stu-id="47da9-152">To emit the method body</span></span>

1. <span data-ttu-id="47da9-153">Získejte generátor kódu a deklarujte místní proměnné a popisky.</span><span class="sxs-lookup"><span data-stu-id="47da9-153">Get a code generator and declare local variables and labels.</span></span> <span data-ttu-id="47da9-154">Metoda <xref:System.Reflection.Emit.ILGenerator.DeclareLocal%2A> se používá při deklarování lokálních proměnných.</span><span class="sxs-lookup"><span data-stu-id="47da9-154">The <xref:System.Reflection.Emit.ILGenerator.DeclareLocal%2A> method is used to declare local variables.</span></span> <span data-ttu-id="47da9-155">`Factory` Metoda má `retVal` čtyři místní proměnné: pro uchování nového `TOutput` , který je vrácen metodou, `ic` pro uchování `TOutput` při přetypování do `ICollection(Of TInput)` (`ICollection<TInput>` v jazyce C#) `input` pro uchování vstupního pole `TInput` objektů a `index` pro iteraci v poli.</span><span class="sxs-lookup"><span data-stu-id="47da9-155">The `Factory` method has four local variables: `retVal` to hold the new `TOutput` that is returned by the method, `ic` to hold the `TOutput` when it is cast to `ICollection(Of TInput)` (`ICollection<TInput>` in C#), `input` to hold the input array of `TInput` objects, and `index` to iterate through the array.</span></span> <span data-ttu-id="47da9-156">Tato metoda má také dva popisky, jeden pro vstup do smyčky (`enterLoop`) a jeden pro začátek smyčky (`loopAgain`), definované pomocí metody <xref:System.Reflection.Emit.ILGenerator.DefineLabel%2A>.</span><span class="sxs-lookup"><span data-stu-id="47da9-156">The method also has two labels, one to enter the loop (`enterLoop`) and one for the top of the loop (`loopAgain`), defined using the <xref:System.Reflection.Emit.ILGenerator.DefineLabel%2A> method.</span></span>

    <span data-ttu-id="47da9-157">První věc, kterou metoda provede, je načtení jejího argumentu pomocí operačního kódu <xref:System.Reflection.Emit.OpCodes.Ldarg_0> a jeho uložení do místní proměnné `input` pomocí operačního kódu <xref:System.Reflection.Emit.OpCodes.Stloc_S>.</span><span class="sxs-lookup"><span data-stu-id="47da9-157">The first thing the method does is to load its argument using <xref:System.Reflection.Emit.OpCodes.Ldarg_0> opcode and to store it in the local variable `input` using <xref:System.Reflection.Emit.OpCodes.Stloc_S> opcode.</span></span>

    [!code-csharp[GenericMethodHowTo#10](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#10)]
    [!code-vb[GenericMethodHowTo#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#10)]

2. <span data-ttu-id="47da9-158">Vygenerujte kód pro vytvoření instance objektu `TOutput` pomocí obecného přetížení metody <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="47da9-158">Emit code to create an instance of `TOutput`, using the generic method overload of the <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="47da9-159">Toto přetížení vyžaduje, aby zadaný typ měl konstruktor bez parametrů, což je důvodem pro přidání tohoto omezení parametru `TOutput`.</span><span class="sxs-lookup"><span data-stu-id="47da9-159">Using this overload requires the specified type to have a parameterless constructor, which is the reason for adding that constraint to `TOutput`.</span></span> <span data-ttu-id="47da9-160">Vytvořte konstruovanou obecnou metodu předáním parametru `TOutput` metodě <xref:System.Reflection.MethodInfo.MakeGenericMethod%2A>.</span><span class="sxs-lookup"><span data-stu-id="47da9-160">Create the constructed generic method by passing `TOutput` to <xref:System.Reflection.MethodInfo.MakeGenericMethod%2A>.</span></span> <span data-ttu-id="47da9-161">Po vygenerování kódu pro volání této metody vygenerujte kód pro uložení do místní proměnné `retVal` pomocí operačního kódu <xref:System.Reflection.Emit.OpCodes.Stloc_S></span><span class="sxs-lookup"><span data-stu-id="47da9-161">After emitting code to call the method, emit code to store it in the local variable `retVal` using <xref:System.Reflection.Emit.OpCodes.Stloc_S></span></span>

    [!code-csharp[GenericMethodHowTo#11](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#11)]
    [!code-vb[GenericMethodHowTo#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#11)]

3. <span data-ttu-id="47da9-162">Vygenerujte kód pro přetypování nového objektu `TOutput` na rozhraní `ICollection(Of TInput)` a uložte jej do místní proměnné `ic`.</span><span class="sxs-lookup"><span data-stu-id="47da9-162">Emit code to cast the new `TOutput` object to `ICollection(Of TInput)` and store it in the local variable `ic`.</span></span>

    [!code-csharp[GenericMethodHowTo#31](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#31)]
    [!code-vb[GenericMethodHowTo#31](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#31)]

4. <span data-ttu-id="47da9-163">Získejte objekt <xref:System.Reflection.MethodInfo> představující metodu <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="47da9-163">Get a <xref:System.Reflection.MethodInfo> representing the <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="47da9-164">Tato metoda pracuje s rozhraním `ICollection(Of TInput)` (`ICollection<TInput>` v jazyce C#), takže je nezbytné získat metodu `Add` specifickou pro konstruovaný typ.</span><span class="sxs-lookup"><span data-stu-id="47da9-164">The method is acting on an `ICollection(Of TInput)` (`ICollection<TInput>` in C#), so it is necessary to get the `Add` method specific to that constructed type.</span></span> <span data-ttu-id="47da9-165">Nelze použít metodu <xref:System.Type.GetMethod%2A> pro získání objektu <xref:System.Reflection.MethodInfo> přímo z proměnné `icollOfTInput`, protože metoda <xref:System.Type.GetMethod%2A> není podporována typem, který byl zkonstruován pomocí typu <xref:System.Reflection.Emit.GenericTypeParameterBuilder>.</span><span class="sxs-lookup"><span data-stu-id="47da9-165">You cannot use the <xref:System.Type.GetMethod%2A> method to get this <xref:System.Reflection.MethodInfo> directly from `icollOfTInput`, because <xref:System.Type.GetMethod%2A> is not supported on a type that has been constructed with a <xref:System.Reflection.Emit.GenericTypeParameterBuilder>.</span></span> <span data-ttu-id="47da9-166">Namísto toho zavolejte metodu <xref:System.Type.GetMethod%2A> proměnné `icoll`, která obsahuje definici obecného typu obecného rozhraní <xref:System.Collections.Generic.ICollection%601>.</span><span class="sxs-lookup"><span data-stu-id="47da9-166">Instead, call <xref:System.Type.GetMethod%2A> on `icoll`, which contains the generic type definition for the <xref:System.Collections.Generic.ICollection%601> generic interface.</span></span> <span data-ttu-id="47da9-167">Poté použijte metodu <xref:System.Reflection.Emit.TypeBuilder.GetMethod%28System.Type%2CSystem.Reflection.MethodInfo%29> deklarovanou jako `static` pro vytvoření typu <xref:System.Reflection.MethodInfo> pro konstruovaný typ.</span><span class="sxs-lookup"><span data-stu-id="47da9-167">Then use the <xref:System.Reflection.Emit.TypeBuilder.GetMethod%28System.Type%2CSystem.Reflection.MethodInfo%29>`static` method to produce the <xref:System.Reflection.MethodInfo> for the constructed type.</span></span> <span data-ttu-id="47da9-168">Tento fakt ukazuje následující kód.</span><span class="sxs-lookup"><span data-stu-id="47da9-168">The following code demonstrates this.</span></span>

    [!code-csharp[GenericMethodHowTo#12](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#12)]
    [!code-vb[GenericMethodHowTo#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#12)]

5. <span data-ttu-id="47da9-169">Vygenerujte kód pro inicializaci proměnné `index` načtením 32bitového celého čísla 0 a uložte jej do proměnné.</span><span class="sxs-lookup"><span data-stu-id="47da9-169">Emit code to initialize the `index` variable, by loading a 32-bit integer 0 and storing it in the variable.</span></span> <span data-ttu-id="47da9-170">Vygenerujte kód větvení pro popisek `enterLoop`.</span><span class="sxs-lookup"><span data-stu-id="47da9-170">Emit code to branch to the label `enterLoop`.</span></span> <span data-ttu-id="47da9-171">Tento popisek dosud není označen, protože je uvnitř smyčky.</span><span class="sxs-lookup"><span data-stu-id="47da9-171">This label has not yet been marked, because it is inside the loop.</span></span> <span data-ttu-id="47da9-172">Kód smyčky je vygenerován v dalším kroku.</span><span class="sxs-lookup"><span data-stu-id="47da9-172">Code for the loop is emitted in the next step.</span></span>

    [!code-csharp[GenericMethodHowTo#32](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#32)]
    [!code-vb[GenericMethodHowTo#32](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#32)]

6. <span data-ttu-id="47da9-173">Vygenerujte kód smyčky.</span><span class="sxs-lookup"><span data-stu-id="47da9-173">Emit code for the loop.</span></span> <span data-ttu-id="47da9-174">Prvním krokem je označit začátek smyčky voláním metody <xref:System.Reflection.Emit.ILGenerator.MarkLabel%2A> s popiskem `loopAgain`.</span><span class="sxs-lookup"><span data-stu-id="47da9-174">The first step is to mark the top of the loop, by calling <xref:System.Reflection.Emit.ILGenerator.MarkLabel%2A> with the `loopAgain` label.</span></span> <span data-ttu-id="47da9-175">Příkazy větvení, které používají tento popisek, se budou nyní větvit do tohoto bodu kódu.</span><span class="sxs-lookup"><span data-stu-id="47da9-175">Branch statements that use the label will now branch to this point in the code.</span></span> <span data-ttu-id="47da9-176">Dalším krokem je vložení objektu `TOutput`, přetypovaného na rozhraní `ICollection(Of TInput)`, do zásobníku.</span><span class="sxs-lookup"><span data-stu-id="47da9-176">The next step is to push the `TOutput` object, cast to `ICollection(Of TInput)`, onto the stack.</span></span> <span data-ttu-id="47da9-177">To není nutné provádět okamžitě, ale objekt musí být vložen pro volání metody `Add`.</span><span class="sxs-lookup"><span data-stu-id="47da9-177">It is not needed immediately, but needs to be in position for calling the `Add` method.</span></span> <span data-ttu-id="47da9-178">Příště, když je vstupní pole vloženo do zásobníku, bude proměnná `index` obsahovat aktuální index pole.</span><span class="sxs-lookup"><span data-stu-id="47da9-178">Next the input array is pushed onto the stack, then the `index` variable containing the current index into the array.</span></span> <span data-ttu-id="47da9-179">Operační kód <xref:System.Reflection.Emit.OpCodes.Ldelem> vyjme index a pole ze zásobníku a vloží indexovaný prvek pole do zásobníku.</span><span class="sxs-lookup"><span data-stu-id="47da9-179">The <xref:System.Reflection.Emit.OpCodes.Ldelem> opcode pops the index and the array off the stack and pushes the indexed array element onto the stack.</span></span> <span data-ttu-id="47da9-180">Zásobník je nyní připraven pro volání metody <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType>, která vyjme kolekci a nový prvek ze zásobníku a přidá prvek do kolekce.</span><span class="sxs-lookup"><span data-stu-id="47da9-180">The stack is now ready for the call to the <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType> method, which pops the collection and the new element off the stack and adds the element to the collection.</span></span>

    <span data-ttu-id="47da9-181">Zbytek kódu ve smyčce zvýší index a testuje, zda je smyčka dokončena. Index a 32bitové celé číslo 1 se vloží do zásobníku a jsou přičteny, což v zásobníku zanechá součet. Tento součet je uložen v proměnné `index`.</span><span class="sxs-lookup"><span data-stu-id="47da9-181">The rest of the code in the loop increments the index and tests to see whether the loop is finished: The index and a 32-bit integer 1 are pushed onto the stack and added, leaving the sum on the stack; the sum is stored in `index`.</span></span> <span data-ttu-id="47da9-182">Voláním metody <xref:System.Reflection.Emit.ILGenerator.MarkLabel%2A> je tento bod nastaven jako vstupní bod smyčky.</span><span class="sxs-lookup"><span data-stu-id="47da9-182"><xref:System.Reflection.Emit.ILGenerator.MarkLabel%2A> is called to set this point as the entry point for the loop.</span></span> <span data-ttu-id="47da9-183">Index je znovu načten.</span><span class="sxs-lookup"><span data-stu-id="47da9-183">The index is loaded again.</span></span> <span data-ttu-id="47da9-184">Vstupní pole je vloženo do zásobníku a operační kód <xref:System.Reflection.Emit.OpCodes.Ldlen> je vygenerován pro získání jeho délky.</span><span class="sxs-lookup"><span data-stu-id="47da9-184">The input array is pushed on the stack, and <xref:System.Reflection.Emit.OpCodes.Ldlen> is emitted to get its length.</span></span> <span data-ttu-id="47da9-185">Index a délka jsou nyní v zásobníku a operační kód <xref:System.Reflection.Emit.OpCodes.Clt> je vygenerován pro jejich porovnání.</span><span class="sxs-lookup"><span data-stu-id="47da9-185">The index and the length are now on the stack, and <xref:System.Reflection.Emit.OpCodes.Clt> is emitted to compare them.</span></span> <span data-ttu-id="47da9-186">Pokud je index menší než délka, operační kód <xref:System.Reflection.Emit.OpCodes.Brtrue_S> provede větvení zpět na začátek smyčky.</span><span class="sxs-lookup"><span data-stu-id="47da9-186">If the index is less than the length, <xref:System.Reflection.Emit.OpCodes.Brtrue_S> branches back to the beginning of the loop.</span></span>

    [!code-csharp[GenericMethodHowTo#13](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#13)]
    [!code-vb[GenericMethodHowTo#13](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#13)]

7. <span data-ttu-id="47da9-187">Vygenerujte kód pro vložení objektu `TOutput` do zásobníku a vrácení z metody.</span><span class="sxs-lookup"><span data-stu-id="47da9-187">Emit code to push the `TOutput` object onto the stack and return from the method.</span></span> <span data-ttu-id="47da9-188">Místní proměnné `retVal` a `ic` obsahují odkazy na nový objekt `TOutput`. Proměnná `ic` se používá pouze pro přístup k metodě <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="47da9-188">The local variables `retVal` and `ic` both contain references to the new `TOutput`; `ic` is used only to access the <xref:System.Collections.Generic.ICollection%601.Add%2A?displayProperty=nameWithType> method.</span></span>

    [!code-csharp[GenericMethodHowTo#33](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#33)]
    [!code-vb[GenericMethodHowTo#33](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#33)]

<a name="procedureSection2"></a>

### <a name="to-invoke-the-generic-method"></a><span data-ttu-id="47da9-189">Volání obecné metody</span><span class="sxs-lookup"><span data-stu-id="47da9-189">To invoke the generic method</span></span>

1. <span data-ttu-id="47da9-190">`Factory`je obecná definice metody.</span><span class="sxs-lookup"><span data-stu-id="47da9-190">`Factory` is a generic method definition.</span></span> <span data-ttu-id="47da9-191">Aby ji bylo možné vyvolat, je nutné přiřadit typy parametrů obecného typu.</span><span class="sxs-lookup"><span data-stu-id="47da9-191">In order to invoke it, you must assign types to its generic type parameters.</span></span> <span data-ttu-id="47da9-192">To lze učinit použitím metody <xref:System.Reflection.MethodInfo.MakeGenericMethod%2A>.</span><span class="sxs-lookup"><span data-stu-id="47da9-192">Use the <xref:System.Reflection.MethodInfo.MakeGenericMethod%2A> method to do this.</span></span> <span data-ttu-id="47da9-193">Následující kód vytvoří konstruovanou obecnou metodu, určí typ <xref:System.String> jako typ parametru `TInput` a typ `List(Of String)` (`List<string>` v jazyce C#) jako typ parametru `TOutput` a zobrazí řetězec představující tuto metodu.</span><span class="sxs-lookup"><span data-stu-id="47da9-193">The following code creates a constructed generic method, specifying <xref:System.String> for `TInput` and `List(Of String)` (`List<string>` in C#) for `TOutput`, and displays a string representation of the method.</span></span>

    [!code-csharp[GenericMethodHowTo#21](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#21)]
    [!code-vb[GenericMethodHowTo#21](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#21)]

2. <span data-ttu-id="47da9-194">Chcete-li vyvolat metodu pomocí pozdní vazby, použijte metodu <xref:System.Reflection.MethodBase.Invoke%2A>.</span><span class="sxs-lookup"><span data-stu-id="47da9-194">To invoke the method late-bound, use the <xref:System.Reflection.MethodBase.Invoke%2A> method.</span></span> <span data-ttu-id="47da9-195">Následující kód vytvoří pole typů <xref:System.Object> obsahující jako jediný prvek pole řetězců a předá jej jako seznam argumentů obecné metodě.</span><span class="sxs-lookup"><span data-stu-id="47da9-195">The following code creates an array of <xref:System.Object>, containing as its only element an array of strings, and passes it as the argument list for the generic method.</span></span> <span data-ttu-id="47da9-196">První parametr metody <xref:System.Reflection.MethodBase.Invoke%2A> je nulový odkaz, protože je tato metoda deklarovaná jako `static`.</span><span class="sxs-lookup"><span data-stu-id="47da9-196">The first parameter of <xref:System.Reflection.MethodBase.Invoke%2A> is a null reference because the method is `static`.</span></span> <span data-ttu-id="47da9-197">Vrácená hodnota je přetypována na typ `List(Of String)` a zobrazí se její první prvek.</span><span class="sxs-lookup"><span data-stu-id="47da9-197">The return value is cast to `List(Of String)`, and its first element is displayed.</span></span>

    [!code-csharp[GenericMethodHowTo#22](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#22)]
    [!code-vb[GenericMethodHowTo#22](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#22)]

3. <span data-ttu-id="47da9-198">Chcete-li tuto metodu vyvolat pomocí delegáta, musíte mít delegáta, který odpovídá signatuře konstruované obecné metody.</span><span class="sxs-lookup"><span data-stu-id="47da9-198">To invoke the method using a delegate, you must have a delegate that matches the signature of the constructed generic method.</span></span> <span data-ttu-id="47da9-199">To lze snadno provést vytvořením obecného delegáta.</span><span class="sxs-lookup"><span data-stu-id="47da9-199">An easy way to do this is to create a generic delegate.</span></span> <span data-ttu-id="47da9-200">Následující kód vytvoří instanci obecného delegáta `D` definovaného v příkladu kódu pomocí přetížení metody <xref:System.Delegate.CreateDelegate%28System.Type%2CSystem.Reflection.MethodInfo%29?displayProperty=nameWithType> a tohoto delegáta vyvolá.</span><span class="sxs-lookup"><span data-stu-id="47da9-200">The following code creates an instance of the generic delegate `D` defined in the example code, using the <xref:System.Delegate.CreateDelegate%28System.Type%2CSystem.Reflection.MethodInfo%29?displayProperty=nameWithType> method overload, and invokes the delegate.</span></span> <span data-ttu-id="47da9-201">Delegáti poskytují vyšší výkon než volání s pozdní vazbou.</span><span class="sxs-lookup"><span data-stu-id="47da9-201">Delegates perform better than late-bound calls.</span></span>

    [!code-csharp[GenericMethodHowTo#23](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#23)]
    [!code-vb[GenericMethodHowTo#23](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#23)]

4. <span data-ttu-id="47da9-202">Vygenerovanou metodu lze také volat z programu, který odkazuje na uložené sestavení.</span><span class="sxs-lookup"><span data-stu-id="47da9-202">The emitted method can also be called from a program that refers to the saved assembly.</span></span>

## <a name="example"></a><span data-ttu-id="47da9-203">Příklad</span><span class="sxs-lookup"><span data-stu-id="47da9-203">Example</span></span>

<span data-ttu-id="47da9-204">Následující příklad kódu vytvoří neobecný typ `DemoType` s obecnou metodou `Factory`.</span><span class="sxs-lookup"><span data-stu-id="47da9-204">The following code example creates a nongeneric type, `DemoType`, with a generic method, `Factory`.</span></span> <span data-ttu-id="47da9-205">Tato metoda má dva parametry obecného typu, `TInput` určující vstupní typ a `TOutput` určující výstupní typ.</span><span class="sxs-lookup"><span data-stu-id="47da9-205">This method has two generic type parameters, `TInput` to specify an input type and `TOutput` to specify an output type.</span></span> <span data-ttu-id="47da9-206">Parametr typu `TOutput` je omezen na implementaci rozhraní `ICollection<TInput>` (`ICollection(Of TInput)` v jazyce Visual Basic), musí být odkazovým typem a mít konstruktor bez parametrů.</span><span class="sxs-lookup"><span data-stu-id="47da9-206">The `TOutput` type parameter is constrained to implement `ICollection<TInput>` (`ICollection(Of TInput)` in Visual Basic), to be a reference type, and to have a parameterless constructor.</span></span>

<span data-ttu-id="47da9-207">Tato metoda má jeden formální parametr, což je pole `TInput`.</span><span class="sxs-lookup"><span data-stu-id="47da9-207">The method has one formal parameter, which is an array of `TInput`.</span></span> <span data-ttu-id="47da9-208">Metoda vrací instanci typu `TOutput`, která obsahuje všechny prvky vstupního pole.</span><span class="sxs-lookup"><span data-stu-id="47da9-208">The method returns an instance of `TOutput` that contains all the elements of the input array.</span></span> <span data-ttu-id="47da9-209">Parametr `TOutput` může být libovolný typ obecné kolekce, která implementuje obecné rozhraní <xref:System.Collections.Generic.ICollection%601>.</span><span class="sxs-lookup"><span data-stu-id="47da9-209">`TOutput` can be any generic collection type that implements the <xref:System.Collections.Generic.ICollection%601> generic interface.</span></span>

<span data-ttu-id="47da9-210">Při spuštění kódu je dynamické sestavení uloženo jako DemoGenericMethod1. dll a lze jej prozkoumat pomocí programu [Ildasm. exe (IL Disassembler)](../tools/ildasm-exe-il-disassembler.md).</span><span class="sxs-lookup"><span data-stu-id="47da9-210">When the code is executed, the dynamic assembly is saved as DemoGenericMethod1.dll, and can be examined using the [Ildasm.exe (IL Disassembler)](../tools/ildasm-exe-il-disassembler.md).</span></span>

> [!NOTE]
> <span data-ttu-id="47da9-211">Vhodný způsob, jak se naučit generovat kód, je napsat program v jazyce Visual Basic, C# nebo Visual C++ provádějící úlohy, které chcete vygenerovat, a použít disassembler ke kontrole kódu produkovaného kompilátorem jazyka MSIL.</span><span class="sxs-lookup"><span data-stu-id="47da9-211">A good way to learn how to emit code is to write a Visual Basic, C#, or Visual C++ program that performs the task you are trying to emit, and use the disassembler to examine the MSIL produced by the compiler.</span></span>

<span data-ttu-id="47da9-212">Příklad kódu obsahuje zdrojový kód, který je ekvivalentní s vygenerovanou metodou.</span><span class="sxs-lookup"><span data-stu-id="47da9-212">The code example includes source code that is equivalent to the emitted method.</span></span> <span data-ttu-id="47da9-213">Vygenerovaná metoda je zavolána s pozdní vazbou a také pomocí obecného delegáta deklarovaného v příkladu kódu.</span><span class="sxs-lookup"><span data-stu-id="47da9-213">The emitted method is invoked late-bound and also by using a generic delegate declared in the code example.</span></span>

[!code-csharp[GenericMethodHowTo#1](../../../samples/snippets/csharp/VS_Snippets_CLR/GenericMethodHowTo/CS/source.cs#1)]
[!code-vb[GenericMethodHowTo#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/GenericMethodHowTo/VB/source.vb#1)]

## <a name="see-also"></a><span data-ttu-id="47da9-214">Viz také</span><span class="sxs-lookup"><span data-stu-id="47da9-214">See also</span></span>

- <xref:System.Reflection.Emit.MethodBuilder>
- [<span data-ttu-id="47da9-215">Postupy: Definování obecného typu pomocí generování reflexe</span><span class="sxs-lookup"><span data-stu-id="47da9-215">How to: Define a Generic Type with Reflection Emit</span></span>](how-to-define-a-generic-type-with-reflection-emit.md)
