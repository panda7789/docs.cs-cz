---
title: Upgrade na typy odkazů s možnou hodnotou null
description: Tento pokročilý kurz ukazuje, jak migrovat existující kód s typy odkazů s možnou hodnotou null.
ms.date: 02/19/2019
ms.technology: csharp-null-safety
ms.custom: mvc
ms.openlocfilehash: 9767493059623e770cc100b83b9284e8d0bdf0f8
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/14/2020
ms.locfileid: "79156451"
---
# <a name="tutorial-migrate-existing-code-with-nullable-reference-types"></a><span data-ttu-id="7f9cb-103">Kurz: Migrace existujícího kódu s typy odkazů s možnou hodnotou null</span><span class="sxs-lookup"><span data-stu-id="7f9cb-103">Tutorial: Migrate existing code with nullable reference types</span></span>

<span data-ttu-id="7f9cb-104">C# 8 zavádí **typy odkazů s možnou hodnotou null**, které doplňují typy odkazů stejným způsobem typy hodnot s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-104">C# 8 introduces **nullable reference types**, which complement reference types the same way nullable value types complement value types.</span></span> <span data-ttu-id="7f9cb-105">Deklarujete proměnnou jako **typ odkazu s možnou hodnotou null** připojením typu a. `?`</span><span class="sxs-lookup"><span data-stu-id="7f9cb-105">You declare a variable to be a **nullable reference type** by appending a `?` to the type.</span></span> <span data-ttu-id="7f9cb-106">Například `string?` představuje hodnotu `string`nullable .</span><span class="sxs-lookup"><span data-stu-id="7f9cb-106">For example, `string?` represents a nullable `string`.</span></span> <span data-ttu-id="7f9cb-107">Tyto nové typy můžete použít k jasněji vyjádřit záměr návrhu: některé proměnné *musí mít vždy hodnotu*, jiné *mohou chybět hodnotu*.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-107">You can use these new types to more clearly express your design intent: some variables *must always have a value*, others *may be missing a value*.</span></span> <span data-ttu-id="7f9cb-108">Všechny existující proměnné typu odkazu by byly interpretovány jako typ odkazu s hodnotou nes hotelnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-108">Any existing variables of a reference type would be interpreted as a non-nullable reference type.</span></span>

<span data-ttu-id="7f9cb-109">V tomto kurzu se naučíte:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-109">In this tutorial, you'll learn how to:</span></span>

> [!div class="checklist"]
>
> - <span data-ttu-id="7f9cb-110">Povolte kontroly nulového odkazu při práci s kódem.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-110">Enable null reference checks as you work with code.</span></span>
> - <span data-ttu-id="7f9cb-111">Diagnostikovat a opravit různá upozornění týkající se hodnoty null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-111">Diagnose and correct different warnings related to null values.</span></span>
> - <span data-ttu-id="7f9cb-112">Spravujte rozhraní mezi povolenými a zakázanými kontexty s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-112">Manage the interface between nullable enabled and nullable disabled contexts.</span></span>
> - <span data-ttu-id="7f9cb-113">Řídit kontexty poznámk y s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-113">Control nullable annotation contexts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7f9cb-114">Požadavky</span><span class="sxs-lookup"><span data-stu-id="7f9cb-114">Prerequisites</span></span>

<span data-ttu-id="7f9cb-115">Budete muset nastavit počítač pro spuštění .NET Core, včetně kompilátoru C# 8.0.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-115">You’ll need to set up your machine to run .NET Core, including the C# 8.0 compiler.</span></span> <span data-ttu-id="7f9cb-116">Kompilátor Jazyka C# 8 je k dispozici počínaje [sadou Visual Studio 2019 verze 16.3](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019) nebo [.NET Core 3.0 SDK](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="7f9cb-116">The C# 8 compiler is available starting with [Visual Studio 2019 version 16.3](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019) or [.NET Core 3.0 SDK](https://dotnet.microsoft.com/download).</span></span>

<span data-ttu-id="7f9cb-117">Tento kurz předpokládá, že jste obeznámeni s C# a .NET, včetně Visual Studio nebo .NET Core CLI.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-117">This tutorial assumes you're familiar with C# and .NET, including either Visual Studio or the .NET Core CLI.</span></span>

## <a name="explore-the-sample-application"></a><span data-ttu-id="7f9cb-118">Prozkoumejte ukázkovou aplikaci</span><span class="sxs-lookup"><span data-stu-id="7f9cb-118">Explore the sample application</span></span>

<span data-ttu-id="7f9cb-119">Ukázková aplikace, kterou budete migrovat, je webová aplikace pro čtení informačních kanálů RSS.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-119">The sample application that you'll migrate is an RSS feed reader web app.</span></span> <span data-ttu-id="7f9cb-120">Čte z jednoho informačního kanálu RSS a zobrazuje souhrny nejnovějších článků.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-120">It reads from a single RSS feed and displays summaries for the most recent articles.</span></span> <span data-ttu-id="7f9cb-121">Můžete si vybrat některý z článků k návštěvě webu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-121">You can select any of the articles to visit the site.</span></span> <span data-ttu-id="7f9cb-122">Aplikace je relativně nová, ale byla zapsána před použitím typů odkazů s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-122">The application is relatively new but was written before nullable reference types were available.</span></span> <span data-ttu-id="7f9cb-123">Rozhodnutí o návrhu aplikace představovala zásady zvuku, ale nevyužívají tuto důležitou jazykovou funkci.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-123">The design decisions for the application represented sound principles, but don't take advantage of this important language feature.</span></span>

<span data-ttu-id="7f9cb-124">Ukázková aplikace obsahuje knihovnu testování částí, která ověřuje hlavní funkce aplikace.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-124">The sample application includes a unit test library that validates the major functionality of the app.</span></span> <span data-ttu-id="7f9cb-125">Tento projekt usnadní bezpečné upgradování, pokud změníte některou z implementací na základě generovaných upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-125">That project will make it easier to upgrade safely, if you change any of the implementation based on the warnings generated.</span></span> <span data-ttu-id="7f9cb-126">Startovací kód si můžete stáhnout z úložiště [GitHub dotnet/samples.](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/start)</span><span class="sxs-lookup"><span data-stu-id="7f9cb-126">You can download the starter code from the [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/start) GitHub repository.</span></span>

<span data-ttu-id="7f9cb-127">Vaším cílem migrace projektu by mělo být využití nové funkce jazyka tak, aby jasně vyjádřit svůj záměr na nullability proměnných a tak učinit takovým způsobem, že kompilátor negeneruje `enabled`upozornění, pokud máte nullable kontext poznámky a nullable upozornění kontextu nastavena na .</span><span class="sxs-lookup"><span data-stu-id="7f9cb-127">Your goal migrating a project should be to leverage the new language features so that you clearly express your intent on the nullability of variables, and do so in such a way that the compiler doesn't generate warnings when you have the nullable annotation context and nullable warning context set to `enabled`.</span></span>

## <a name="upgrade-the-projects-to-c-8"></a><span data-ttu-id="7f9cb-128">Upgrade projektů na C# 8</span><span class="sxs-lookup"><span data-stu-id="7f9cb-128">Upgrade the projects to C# 8</span></span>

<span data-ttu-id="7f9cb-129">Dobrým prvním krokem je určení rozsahu úlohy migrace.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-129">A good first step is to determine the scope of the migration task.</span></span> <span data-ttu-id="7f9cb-130">Začněte upgradem projektu na C# 8.0 (nebo novější).</span><span class="sxs-lookup"><span data-stu-id="7f9cb-130">Start by upgrading the project to C# 8.0 (or newer).</span></span> <span data-ttu-id="7f9cb-131">Přidejte `LangVersion` prvek do PropertyGroup v souborech csproj pro webový projekt i projekt testování částí:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-131">Add the `LangVersion` element to the PropertyGroup in both csproj files for the web project and the unit test project:</span></span>

```xml
<LangVersion>8.0</LangVersion>
```

<span data-ttu-id="7f9cb-132">Upgrade jazykové verze vybere C# 8.0, ale nepovolí kontext poznámky s možnou hodnotou null nebo kontext upozornění s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-132">Upgrading the language version selects C# 8.0, but does not enable the nullable annotation context or the nullable warning context.</span></span> <span data-ttu-id="7f9cb-133">Znovu sestavit projekt a zajistit, že se staví bez upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-133">Rebuild the project to ensure that it builds without warnings.</span></span>

<span data-ttu-id="7f9cb-134">Dobrým dalším krokem je zapnout kontext poznámky s možnou hodnotou null a zjistit, kolik upozornění je generováno.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-134">A good next step is to turn on the nullable annotation context and see how many warnings are generated.</span></span> <span data-ttu-id="7f9cb-135">Přidejte následující prvek do obou csproj souborů `LangVersion` v řešení, přímo pod element:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-135">Add the following element to both csproj files in the solution, directly under the `LangVersion` element:</span></span>

```xml
<Nullable>enable</Nullable>
```

<span data-ttu-id="7f9cb-136">Proveďte testovací sestavení a všimněte si seznamu upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-136">Do a test build, and notice the warning list.</span></span> <span data-ttu-id="7f9cb-137">V této malé aplikaci kompilátor generuje pět upozornění, takže je pravděpodobné, že byste ponechat kontext poznámky s možnou hodnotou null povoleno a začít opravovat upozornění pro celý projekt.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-137">In this small application, the compiler generates five warnings, so it's likely you'd leave the nullable annotation context enabled and start fixing warnings for the entire project.</span></span>

<span data-ttu-id="7f9cb-138">Tato strategie funguje pouze u menších projektů.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-138">That strategy works only for smaller projects.</span></span> <span data-ttu-id="7f9cb-139">Pro všechny větší projekty počet upozornění generovaných povolením kontextu poznámky s možnou hodnotou null pro celý základ kódu ztěžuje systematickou opravu upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-139">For any larger projects, the number of warnings generated by enabling the nullable annotation context for the entire codebase makes it harder to fix the warnings systematically.</span></span> <span data-ttu-id="7f9cb-140">U větších projektů organizace budete často chtít migrovat jeden projekt po druhém.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-140">For larger enterprise projects, you'll often want to migrate one project at a time.</span></span> <span data-ttu-id="7f9cb-141">V každém projektu migrujte jednu třídu nebo soubor najednou.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-141">In each project, migrate one class or file at a time.</span></span>

## <a name="warnings-help-discover-original-design-intent"></a><span data-ttu-id="7f9cb-142">Upozornění pomáhají zjistit původní záměr návrhu</span><span class="sxs-lookup"><span data-stu-id="7f9cb-142">Warnings help discover original design intent</span></span>

<span data-ttu-id="7f9cb-143">Existují dvě třídy, které generují více upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-143">There are two classes that generate multiple warnings.</span></span> <span data-ttu-id="7f9cb-144">Začni `NewsStoryViewModel` s hodinou.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-144">Start with the `NewsStoryViewModel` class.</span></span> <span data-ttu-id="7f9cb-145">Odeberte `Nullable` prvek z obou souborů csproj, abyste mohli omezit rozsah upozornění na části kódu, se kterými pracujete.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-145">Remove the `Nullable` element from both csproj files so that you can limit the scope of warnings to the sections of code you're working with.</span></span> <span data-ttu-id="7f9cb-146">Otevřete soubor *NewsStoryViewModel.cs* a přidejte následující direktivy, `NewsStoryViewModel` které povolí kontext poznámky s možnou hodnotou null pro a obnovení podle této definice třídy:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-146">Open the *NewsStoryViewModel.cs* file and add the following directives to enable the nullable annotation context for the `NewsStoryViewModel` and restore it following that class definition:</span></span>

```csharp
#nullable enable
public class NewsStoryViewModel
{
    public DateTimeOffset Published { get; set; }
    public string Title { get; set; }
    public string Uri { get; set; }
}
#nullable restore
```

<span data-ttu-id="7f9cb-147">Tyto dvě směrnice vám pomohou soustředit úsilí o migraci.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-147">These two directives help you focus your migration efforts.</span></span> <span data-ttu-id="7f9cb-148">Upozornění s možnou hodnotou null jsou generována pro oblast kódu, na které aktivně pracujete.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-148">The nullable warnings are generated for the area of code you're actively working on.</span></span> <span data-ttu-id="7f9cb-149">Necháte je zapnuté, dokud nebudete připraveni zapnout varování pro celý projekt.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-149">You'll leave them on until you're ready to turn on the warnings for the entire project.</span></span> <span data-ttu-id="7f9cb-150">Měli byste `restore` použít `disable` spíše než hodnotu, abyste později omylem nezakázali kontext, když jste zapnuli poznámky s možnou hodnotou null pro celý projekt.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-150">You should use the `restore` rather than `disable` value so that you don't accidentally disable the context later when you've turned on nullable annotations for the entire project.</span></span> <span data-ttu-id="7f9cb-151">Po zapnutí kontextu poznámky s možnou hodnotou null pro celý `#nullable` projekt můžete odebrat všechny pragmy z tohoto projektu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-151">Once you've turned on the nullable annotation context for the entire project, you can remove all the `#nullable` pragmas from that project.</span></span>

<span data-ttu-id="7f9cb-152">Třída `NewsStoryViewModel` je objekt přenosu dat (DTO) a dvě vlastnosti jsou řetězce pro čtení a zápis:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-152">The `NewsStoryViewModel` class is a data transfer object (DTO) and two of the properties are read/write strings:</span></span>

[!code-csharp[InitialViewModel](~/samples/snippets/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/ViewModels/NewsStoryViewModel.cs#StarterViewModel)]

<span data-ttu-id="7f9cb-153">Tyto dvě `CS8618`vlastnosti způsobit , "Vlastnost nes platnou hodnotou null je neinicializován".</span><span class="sxs-lookup"><span data-stu-id="7f9cb-153">These two properties cause `CS8618`, "Non-nullable property is uninitialized".</span></span> <span data-ttu-id="7f9cb-154">To je dostatečně jasné: obě `string` vlastnosti `null` mají `NewsStoryViewModel` výchozí hodnotu při vytvoření.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-154">That's clear enough: both `string` properties have the default value of `null` when a `NewsStoryViewModel` is constructed.</span></span> <span data-ttu-id="7f9cb-155">Co je důležité zjistit, `NewsStoryViewModel` je, jak jsou vytvořeny objekty.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-155">What's important to discover is how `NewsStoryViewModel` objects are constructed.</span></span> <span data-ttu-id="7f9cb-156">Při pohledu na tuto třídu `null` nelze zjistit, zda je hodnota součástí návrhu nebo pokud jsou tyto objekty nastaveny na hodnoty bez nuly při každém vytvoření.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-156">Looking at this class, you can't tell if the `null` value is part of the design, or if these objects are set to non-null values whenever one is created.</span></span> <span data-ttu-id="7f9cb-157">Novinky příběhy jsou vytvořeny `GetNews` v `NewsService` metodě třídy:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-157">The news stories are created in the `GetNews` method of the `NewsService` class:</span></span>

[!code-csharp[StarterCreateNewsItem](~/samples/snippets/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Services/NewsService.cs#CreateNewsItem)]

<span data-ttu-id="7f9cb-158">V předchozím bloku kódu se toho děje docela dost.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-158">There's quite a bit going on in the preceding block of code.</span></span> <span data-ttu-id="7f9cb-159">Tato aplikace používá balíček [AutoMapper](https://automapper.org/) NuGet k `ISyndicationItem`vytvoření zpravodajské položky z .</span><span class="sxs-lookup"><span data-stu-id="7f9cb-159">This application uses the [AutoMapper](https://automapper.org/) NuGet package to construct a news item from an `ISyndicationItem`.</span></span> <span data-ttu-id="7f9cb-160">Zjistili jste, že položky zpravodajského příběhu jsou vytvořeny a vlastnosti jsou nastaveny v tomto jednom příkazu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-160">You've discovered that the news story items are constructed and the properties are set in that one statement.</span></span> <span data-ttu-id="7f9cb-161">To znamená, že `NewsStoryViewModel` návrh pro označuje, `null` že tyto vlastnosti by nikdy mít hodnotu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-161">That means the design for the `NewsStoryViewModel` indicates that these properties should never have the `null` value.</span></span> <span data-ttu-id="7f9cb-162">Tyto vlastnosti by měly být **neplatné typy odkazů**.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-162">These properties should be **nonnullable reference types**.</span></span> <span data-ttu-id="7f9cb-163">To nejlépe vyjadřuje původní záměr návrhu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-163">That best expresses the original design intent.</span></span> <span data-ttu-id="7f9cb-164">Ve skutečnosti `NewsStoryViewModel` *je* každý správně vytvořena s hodnotami bez nuly.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-164">In fact, any `NewsStoryViewModel` *is* correctly instantiated with non-null values.</span></span> <span data-ttu-id="7f9cb-165">Díky tomu je následující inicializační kód platnou opravou:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-165">That makes the following initialization code a valid fix:</span></span>

```csharp
public class NewsStoryViewModel
{
    public DateTimeOffset Published { get; set; }
    public string Title { get; set; } = default!;
    public string Uri { get; set; } = default!;
}
```

<span data-ttu-id="7f9cb-166">`Title` Přiřazení a `Uri` `default` na který `null` je `string` pro typ nezmění chování za běhu programu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-166">The assignment of `Title` and `Uri` to `default` which is `null` for the `string` type doesn't change the runtime behavior of the program.</span></span> <span data-ttu-id="7f9cb-167">Je `NewsStoryViewModel` stále konstruována s hodnotami null, ale nyní kompilátor hlásí žádná upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-167">The `NewsStoryViewModel` is still constructed with null values, but now the compiler reports no warnings.</span></span> <span data-ttu-id="7f9cb-168">**Operátor null odpouštějící** `!` , znak `default` za výrazem říká kompilátoru, že předchozí výraz není null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-168">The **null-forgiving operator**, the `!` character following the `default` expression tells the compiler that the preceding expression is not null.</span></span> <span data-ttu-id="7f9cb-169">Tato technika může být účelná, když jiné změny vynucují mnohem větší změny základu `NewsStoryViewModel` kódu, ale v této aplikaci je relativně rychlé a lepší řešení: Vytvořte neměnný typ, kde jsou všechny vlastnosti nastaveny v konstruktoru.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-169">This technique may be expedient when other changes force much larger changes to a code base, but in this application there is a relatively quick and better solution: Make the `NewsStoryViewModel` an immutable type where all the properties are set in the constructor.</span></span> <span data-ttu-id="7f9cb-170">Proveďte následující změny `NewsStoryViewModel`v :</span><span class="sxs-lookup"><span data-stu-id="7f9cb-170">Make the following changes to the `NewsStoryViewModel`:</span></span>

[!code-csharp[FinishedViewModel](~/samples/snippets/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/ViewModels/NewsStoryViewModel.cs#FinishedViewModel)]

<span data-ttu-id="7f9cb-171">Jakmile je to hotovo, je třeba aktualizovat kód, který konfiguruje AutoMapper tak, aby používá konstruktor spíše než nastavení vlastností.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-171">Once that's done, you need to update the code that configures the AutoMapper so that it uses the constructor rather than setting properties.</span></span> <span data-ttu-id="7f9cb-172">Otevřete `NewsService.cs` a vyhledejte následující kód v dolní části souboru:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-172">Open `NewsService.cs` and look for the following code at the bottom of the file:</span></span>

[!code-csharp[StarterAutoMapper](~/samples/snippets/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Services/NewsService.cs#ConfigureAutoMapper)]

<span data-ttu-id="7f9cb-173">Tento kód mapuje `ISyndicationItem` vlastnosti `NewsStoryViewModel` objektu na vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-173">That code maps properties of the `ISyndicationItem` object to the `NewsStoryViewModel` properties.</span></span> <span data-ttu-id="7f9cb-174">Chcete, aby automapper poskytnout mapování pomocí konstruktoru místo.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-174">You want the AutoMapper to provide the mapping using a constructor instead.</span></span> <span data-ttu-id="7f9cb-175">Nahraďte výše uvedený kód následující konfigurací automapperu:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-175">Replace the above code with the following automapper configuration:</span></span>

[!code-csharp[FinishedViewModel](~/samples/snippets/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#ConfigureAutoMapper)]

<span data-ttu-id="7f9cb-176">Všimněte si, že vzhledem k tomu, že tato `#nullable enable` třída je malá a pečlivě jste prozkoumali, měli byste zapnout direktivu nad touto deklarací třídy.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-176">Notice that because this class is small, and you've examined carefully, you should turn on the `#nullable enable` directive above this class declaration.</span></span> <span data-ttu-id="7f9cb-177">Změna konstruktoru mohla něco rozbít, takže stojí za to spustit všechny testy a otestovat aplikaci před přechodem.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-177">The change to the constructor could have broken something, so it's worthwhile to run all the tests and test the application before moving on.</span></span>

<span data-ttu-id="7f9cb-178">První sada změn ukázala, jak zjistit, kdy původní návrh naznačil, že `null`proměnné by neměly být nastaveny na .</span><span class="sxs-lookup"><span data-stu-id="7f9cb-178">The first set of changes showed you how to discover when the original design indicated that variables shouldn't be set to `null`.</span></span> <span data-ttu-id="7f9cb-179">Tato technika je **označována jako správná konstrukcí**.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-179">The technique is referred to as **correct by construction**.</span></span> <span data-ttu-id="7f9cb-180">Deklarujete, že `null` objekt a jeho vlastnosti nemůže být, když je vytvořen.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-180">You declare that an object and its properties cannot be `null` when it's constructed.</span></span> <span data-ttu-id="7f9cb-181">Analýza toku kompilátoru poskytuje záruku, že `null` tyto vlastnosti nejsou nastaveny na po výstavbě.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-181">The compiler's flow analysis provides assurance that those properties aren't set to `null` after construction.</span></span> <span data-ttu-id="7f9cb-182">Všimněte si, že tento konstruktor je volána externí kód a že kód je **nula nevšímavý**.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-182">Note that this constructor is called by external code, and that code is **nullable oblivious**.</span></span> <span data-ttu-id="7f9cb-183">Nová syntaxe neposkytuje kontrolu za běhu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-183">The new syntax doesn't provide runtime checking.</span></span> <span data-ttu-id="7f9cb-184">Externí kód může obejít analýzu toku kompilátoru.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-184">External code might circumvent the compiler's flow analysis.</span></span>

<span data-ttu-id="7f9cb-185">Jindy struktura třídy poskytuje různé stopy k záměru.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-185">Other times, the structure of a class provides different clues to the intent.</span></span> <span data-ttu-id="7f9cb-186">Otevřete *soubor Error.cshtml.cs* ve složce *Stránky.*</span><span class="sxs-lookup"><span data-stu-id="7f9cb-186">Open the *Error.cshtml.cs* file in the *Pages* folder.</span></span> <span data-ttu-id="7f9cb-187">Obsahuje `ErrorViewModel` následující kód:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-187">The `ErrorViewModel` contains the following code:</span></span>

[!code-csharp[StarterErrorModel](~/samples/snippets/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Pages/Error.cshtml.cs#StartErrorModel)]

<span data-ttu-id="7f9cb-188">Přidejte `#nullable enable` direktivu před `#nullable restore` deklaraci třídy a za ní direktivu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-188">Add the `#nullable enable` directive before the class declaration, and a `#nullable restore` directive after it.</span></span> <span data-ttu-id="7f9cb-189">Dostanete jedno upozornění, `RequestId` které není inicializováno.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-189">You'll get one warning that `RequestId` is not initialized.</span></span> <span data-ttu-id="7f9cb-190">Při pohledu na třídu, `RequestId` měli byste se rozhodnout, že vlastnost by měla být null v některých případech.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-190">By looking at the class, you should decide that the `RequestId` property should be null in some cases.</span></span> <span data-ttu-id="7f9cb-191">Existence vlastnosti `ShowRequestId` označuje, že chybějící hodnoty jsou možné.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-191">The existence of the `ShowRequestId` property indicates that missing values are possible.</span></span> <span data-ttu-id="7f9cb-192">Protože `null` je platný, `?` přidejte `string` na `RequestId` typ označující vlastnost je *typ odkazu s možnou hodnotou null*.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-192">Because `null` is valid, add the `?` on the `string` type to indicate the `RequestId` property is a *nullable reference type*.</span></span> <span data-ttu-id="7f9cb-193">Poslední třída vypadá jako následující příklad:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-193">The final class looks like the following example:</span></span>

[!code-csharp[FinishedErrorModel](~/samples/snippets/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Error.cshtml.cs#ErrorModel)]

<span data-ttu-id="7f9cb-194">Zkontrolujte použití vlastnosti a uvidíte, že na přidružené stránce je vlastnost zkontrolována na hodnotu null před vykreslením ve značkách.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-194">Check for the uses of the property, and you see that in the associated page, the property is checked for null before rendering it in markup.</span></span> <span data-ttu-id="7f9cb-195">To je bezpečné použití typu odkazu s možnou hodnotou null, takže jste hotovi s touto třídou.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-195">That's a safe use of a nullable reference type, so you're done with this class.</span></span>

## <a name="fixing-nulls-causes-change"></a><span data-ttu-id="7f9cb-196">Oprava nuly způsobí změnu</span><span class="sxs-lookup"><span data-stu-id="7f9cb-196">Fixing nulls causes change</span></span>

<span data-ttu-id="7f9cb-197">Oprava pro jednu sadu upozornění často vytváří nová upozornění v souvisejícím kódu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-197">Frequently, the fix for one set of warnings creates new warnings in related code.</span></span> <span data-ttu-id="7f9cb-198">Podívejme se na varování v `index.cshtml.cs` akci opravou třídy.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-198">Let's see the warnings in action by fixing the `index.cshtml.cs` class.</span></span> <span data-ttu-id="7f9cb-199">Otevřete `index.cshtml.cs` soubor a zkontrolujte kód.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-199">Open the `index.cshtml.cs` file and examine the code.</span></span> <span data-ttu-id="7f9cb-200">Tento soubor obsahuje kód, který je pro stránku indexu:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-200">This file contains the code behind for the index page:</span></span>

[!code-csharp[StarterIndexModel](~/samples/snippets/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Pages/Index.cshtml.cs#IndexModelStart)]

<span data-ttu-id="7f9cb-201">Přidejte `#nullable enable` direktivu a zobrazí se dvě upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-201">Add the `#nullable enable` directive and you'll see two warnings.</span></span> <span data-ttu-id="7f9cb-202">Vlastnost ani `ErrorText` `NewsItems` vlastnost není inicializována.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-202">Neither the `ErrorText` property nor the `NewsItems` property is initialized.</span></span> <span data-ttu-id="7f9cb-203">Zkoumání této třídy by vést k domněnce, že obě vlastnosti by měly být typy odkazů s možnou hodnotou null: Oba mají soukromé setters.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-203">An examination of this class would lead you to believe that both properties should be nullable reference types: Both have private setters.</span></span> <span data-ttu-id="7f9cb-204">Přesně jeden je `OnGet` přiřazen v metodě.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-204">Exactly one is assigned in the `OnGet` method.</span></span> <span data-ttu-id="7f9cb-205">Před provedením změn se podívejte na spotřebitele obou vlastností.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-205">Before making changes, look at the consumers of both properties.</span></span> <span data-ttu-id="7f9cb-206">Na samotné stránce `ErrorText` je kontrolována proti null před generováním značky pro všechny chyby.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-206">In the page itself, the `ErrorText` is checked against null before generating markup for any errors.</span></span> <span data-ttu-id="7f9cb-207">Kolekce `NewsItems` je kontrolována `null`proti , a kontrolována, aby bylo zajištěno, že kolekce obsahuje položky.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-207">The `NewsItems` collection is checked against `null`, and checked to ensure the collection has items.</span></span> <span data-ttu-id="7f9cb-208">Rychlou opravou by bylo, aby obě vlastnosti s možnou hodnotou null typy odkazů.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-208">A quick fix would be to make both properties nullable reference types.</span></span> <span data-ttu-id="7f9cb-209">Lepší oprava by bylo vytvořit kolekce neplatný typ odkazu a přidat položky do existující kolekce při načítání novinek.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-209">A better fix would be to make the collection a nonnullable reference type, and add items to the existing collection when retrieving news.</span></span> <span data-ttu-id="7f9cb-210">První oprava je přidat `?` do `string` typu `ErrorText`pro :</span><span class="sxs-lookup"><span data-stu-id="7f9cb-210">The first fix is to add the `?` to the `string` type for the `ErrorText`:</span></span>

[!code-csharp[UpdateErrorText](~/samples/snippets/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#UpdateErrorText)]

<span data-ttu-id="7f9cb-211">Tato změna nebude zvlnění prostřednictvím jiného `ErrorText` kódu, protože jakýkoli přístup k vlastnosti byl již střežen null kontroly.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-211">That change won't ripple through other code, because any access to the `ErrorText` property was already guarded by null checks.</span></span> <span data-ttu-id="7f9cb-212">Dále inicializovat `NewsItems` seznam a odebrat setter vlastností, takže je vlastnost jen pro čtení:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-212">Next, initialize the `NewsItems` list and remove the property setter, making it a readonly property:</span></span>

[!code-csharp[InitializeNewsItems](~/samples/snippets/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#InitializeNewsItems)]

<span data-ttu-id="7f9cb-213">To opravilo varování, ale zavedlo chybu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-213">That fixed the warning but introduced an error.</span></span> <span data-ttu-id="7f9cb-214">Seznam `NewsItems` je nyní **správné podle konstrukce**, ale `OnGet` kód, který nastaví seznam v musí změnit tak, aby odpovídaly nové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-214">The `NewsItems` list is now **correct by construction**, but the code that sets the list in `OnGet` must change to match the new API.</span></span> <span data-ttu-id="7f9cb-215">Místo přiřazení volejte `AddRange` a přidejte novinky do existujícího seznamu:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-215">Instead of an assignment, call `AddRange` to add the news items to the existing list:</span></span>

[!code-csharp[AddRange](~/samples/snippets/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#AddRange)]

<span data-ttu-id="7f9cb-216">Použití `AddRange` namísto přiřazení znamená, že `GetNews` `IEnumerable` metoda může `List`vrátit místo .</span><span class="sxs-lookup"><span data-stu-id="7f9cb-216">Using `AddRange` instead of an assignment means that the `GetNews` method can return an `IEnumerable` instead of a `List`.</span></span> <span data-ttu-id="7f9cb-217">To šetří jednu alokaci.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-217">That saves one allocation.</span></span> <span data-ttu-id="7f9cb-218">Změňte podpis metody a odeberte `ToList` volání, jak je znázorněno v následujícím příkladu kódu:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-218">Change the signature of the method, and remove the `ToList` call, as shown in the following code sample:</span></span>

[!code-csharp[GetNews](~/samples/snippets/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#GetNewsFinished)]

<span data-ttu-id="7f9cb-219">Změna podpisu přeruší jeden z testů také.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-219">Changing the signature breaks one of tests as well.</span></span> <span data-ttu-id="7f9cb-220">Otevřete `NewsServiceTests.cs` soubor `Services` ve složce `SimpleFeedReader.Tests` projektu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-220">Open the `NewsServiceTests.cs` file in the `Services` folder of the `SimpleFeedReader.Tests` project.</span></span> <span data-ttu-id="7f9cb-221">Přejděte `Returns_News_Stories_Given_Valid_Uri` na test a změňte `IEnumerable<NewsItem>`typ proměnné na `result` .</span><span class="sxs-lookup"><span data-stu-id="7f9cb-221">Navigate to the `Returns_News_Stories_Given_Valid_Uri` test and change the type of the `result` variable to `IEnumerable<NewsItem>`.</span></span> <span data-ttu-id="7f9cb-222">Změna typu `Count` znamená, že vlastnost již není `Count` k `Assert` dispozici, proto `Any()`vlastnost v písmenu a) nahraďte voláním :</span><span class="sxs-lookup"><span data-stu-id="7f9cb-222">Changing the type means the `Count` property is no longer available, so replace the `Count` property in the `Assert` with a call to `Any()`:</span></span>

[!code-csharp[FixTests](~/samples/snippets/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader.Tests/Services/NewsServiceTests.cs#FixTestSignature)]

<span data-ttu-id="7f9cb-223">Na začátek souboru `using System.Linq` budete muset také přidat příkaz.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-223">You'll need to add a `using System.Linq` statement to the beginning of the file as well.</span></span>

<span data-ttu-id="7f9cb-224">Tato sada změn upozorňuje zvláštní pozornost při aktualizaci kódu, který zahrnuje obecné instance.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-224">This set of changes highlights special consideration when updating code that includes generic instantiations.</span></span> <span data-ttu-id="7f9cb-225">Seznam a prvky v seznamu typů s nulovou hodnotou.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-225">Both the list and the elements in the list of non-nullable types.</span></span> <span data-ttu-id="7f9cb-226">Buď nebo oba mohou být typy s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-226">Either or both could be nullable types.</span></span> <span data-ttu-id="7f9cb-227">Jsou povolena všechna tato prohlášení:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-227">All the following declarations are allowed:</span></span>

- <span data-ttu-id="7f9cb-228">`List<NewsStoryViewModel>`: neplatný seznam modelů zobrazení, které nelze utnout.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-228">`List<NewsStoryViewModel>`: nonnullable list of nonullable view models.</span></span>
- <span data-ttu-id="7f9cb-229">`List<NewsStoryViewModel?>`: neplatný seznam modelů zobrazení s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-229">`List<NewsStoryViewModel?>`: nonnullable list of nullable view models.</span></span>
- <span data-ttu-id="7f9cb-230">`List<NewsStoryViewModel>?`: seznam neplatných modelů zobrazení s možnou neplatnou platnosti.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-230">`List<NewsStoryViewModel>?`: nullable list of nonnullable view models.</span></span>
- <span data-ttu-id="7f9cb-231">`List<NewsStoryViewModel?>?`: seznam modelů zobrazení s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-231">`List<NewsStoryViewModel?>?`: nullable list of nullable view models.</span></span>

## <a name="interfaces-with-external-code"></a><span data-ttu-id="7f9cb-232">Rozhraní s externím kódem</span><span class="sxs-lookup"><span data-stu-id="7f9cb-232">Interfaces with external code</span></span>

<span data-ttu-id="7f9cb-233">Provedli jste změny `NewsService` ve třídě, proto `#nullable enable` zapněte poznámky pro tuto třídu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-233">You've made changes to the `NewsService` class, so turn on the `#nullable enable` annotation for that class.</span></span> <span data-ttu-id="7f9cb-234">Tím se nevygenerují žádná nová upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-234">This won't generate any new warnings.</span></span> <span data-ttu-id="7f9cb-235">Pečlivé zkoumání třídy však pomáhá ilustrovat některá omezení analýzy toku kompilátoru.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-235">However, careful examination of the class helps to illustrate some of the limitations of the compiler's flow analysis.</span></span> <span data-ttu-id="7f9cb-236">Zkontrolujte konstruktor:</span><span class="sxs-lookup"><span data-stu-id="7f9cb-236">Examine the constructor:</span></span>

[!code-csharp[ServiceConstructor](~/samples/snippets/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#ServiceConstructor)]

<span data-ttu-id="7f9cb-237">Parametr `IMapper` je zadán jako neplatný odkaz.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-237">The `IMapper` parameter is typed as a nonnullable reference.</span></span> <span data-ttu-id="7f9cb-238">Nazývá se ASP.NET základní infrastruktury kódu, takže kompilátor není `IMapper` opravdu vědět, že nikdy nebude null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-238">It's called by ASP.NET Core infrastructure code, so the compiler doesn't really know that the `IMapper` will never be null.</span></span> <span data-ttu-id="7f9cb-239">Výchozí ASP.NET kontejner uzákladní ho vkládání závislostí (DI) vyvolá výjimku, pokud nemůže vyřešit potřebnou službu, takže kód je správný.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-239">The default ASP.NET Core dependency injection (DI) container throws an exception if it can't resolve a necessary service, so the code is correct.</span></span> <span data-ttu-id="7f9cb-240">Kompilátor nemůže ověřit všechna volání veřejných rozhraní API, i když je váš kód zkompilován s povolenými kontexty poznámk s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-240">The compiler can't validate all calls to your public APIs, even if your code is compiled with nullable annotation contexts enabled.</span></span> <span data-ttu-id="7f9cb-241">Kromě toho mohou být vaše knihovny spotřebovány projekty, které se ještě nerozhodly používat referenční typy s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-241">Furthermore, your libraries may be consumed by projects that have not yet opted into using nullable reference types.</span></span> <span data-ttu-id="7f9cb-242">Ověřte vstupy pro veřejná api, i když jste je deklarovali jako neplatné typy.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-242">Validate inputs to public APIs even though you've declared them as nonnullable types.</span></span>

## <a name="get-the-code"></a><span data-ttu-id="7f9cb-243">Získání kódu</span><span class="sxs-lookup"><span data-stu-id="7f9cb-243">Get the code</span></span>

<span data-ttu-id="7f9cb-244">Opravili jste upozornění, která jste identifikovali v počátečním testu kompilace, takže nyní můžete zapnout kontext poznámky s možnou hodnotou null pro oba projekty.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-244">You've fixed the warnings you identified in the initial test compile, so now you can turn on the nullable annotation context for both projects.</span></span> <span data-ttu-id="7f9cb-245">Znovu sestavit projekty; kompilátor nehlásí žádná upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-245">Rebuild the projects; the compiler reports no warnings.</span></span> <span data-ttu-id="7f9cb-246">Kód pro dokončený projekt můžete získat v úložišti [GitHub dotnet/samples.](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/finished)</span><span class="sxs-lookup"><span data-stu-id="7f9cb-246">You can get the code for the finished project in the [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/finished) GitHub repository.</span></span>

<span data-ttu-id="7f9cb-247">Nové funkce, které podporují typy odkazů s možnou hodnotou `null` null, vám pomohou najít a opravit potenciální chyby v tom, jak zpracováváte hodnoty v kódu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-247">The new features that support nullable reference types help you find and fix potential errors in how you handle `null` values in your code.</span></span> <span data-ttu-id="7f9cb-248">Povolení kontextu poznámky s možnou hodnotou null umožňuje vyjádřit záměr návrhu: některé proměnné by nikdy neměly být nulové, jiné proměnné mohou obsahovat hodnoty null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-248">Enabling the nullable annotation context allows you to express your design intent: some variables should never be null, other variables may contain null values.</span></span> <span data-ttu-id="7f9cb-249">Tyto funkce usnadňují deklarování záměru návrhu.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-249">These features make it easier for you to declare your design intent.</span></span> <span data-ttu-id="7f9cb-250">Podobně kontext upozornění s možnou hodnotou null instruuje kompilátor udělit upozornění, pokud jste porušili tento záměr.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-250">Similarly, the nullable warning context instructs the compiler to issue warnings when you have violated that intent.</span></span> <span data-ttu-id="7f9cb-251">Tato upozornění vás k provedení aktualizací, které váš kód `NullReferenceException` odolnější a méně pravděpodobné, že vyvolat během provádění.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-251">Those warnings guide you to make updates that make your code more resilient and less likely to throw a `NullReferenceException` during execution.</span></span> <span data-ttu-id="7f9cb-252">Můžete řídit rozsah těchto kontextů tak, aby se můžete zaměřit na místní oblasti kódu migrovat, zatímco zbývající základ kódu je nedotčena.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-252">You can control the scope of these contexts so that you can focus on local areas of code to migrate while the remaining codebase is untouched.</span></span> <span data-ttu-id="7f9cb-253">V praxi můžete tento úkol migrace součást pravidelné údržby do tříd.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-253">In practice, you can make this migration task a part of regular maintenance to your classes.</span></span> <span data-ttu-id="7f9cb-254">Tento kurz demonstroval proces migrace aplikace pro použití typů odkazů s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f9cb-254">This tutorial demonstrated the process to migrate an application to use nullable reference types.</span></span> <span data-ttu-id="7f9cb-255">Můžete prozkoumat větší real-svět příklad tohoto procesu zkoumáním PR [Jon Skeet](https://github.com/jskeet) se začlenit nullable typy odkazů do [NodaTime](https://github.com/nodatime/nodatime/pull/1240/commits).</span><span class="sxs-lookup"><span data-stu-id="7f9cb-255">You can explore a larger real-world example of this process by examining the PR [Jon Skeet](https://github.com/jskeet) made to incorporate nullable reference types into [NodaTime](https://github.com/nodatime/nodatime/pull/1240/commits).</span></span> <span data-ttu-id="7f9cb-256">Nebo jen kromě toho můžete naučit techniky pro použití typů odkazů s možnou hodnotou null s entity framework core v [entity framework core - práce s typy odkazů s možnou hodnotou null](/ef/core/miscellaneous/nullable-reference-types).</span><span class="sxs-lookup"><span data-stu-id="7f9cb-256">Or just In addition, you can learn techniques for using nullable reference types with Entity Framework Core in [Entity Framework Core - Working with nullable reference types](/ef/core/miscellaneous/nullable-reference-types).</span></span>
