---
title: Obecné typy v běhovém prostředí – Průvodce programováním v C#
description: Seznamte se s obecnými typy v době běhu. Podívejte se na příklady kódu a zobrazte další dostupné prostředky.
ms.date: 07/20/2015
helpviewer_keywords:
- generics [C#], at run time
ms.assetid: 119df7e6-9ceb-49df-af36-24f8f8c0747f
ms.openlocfilehash: 8e072e7aa53177929dda0be931beb85863b6a12e
ms.sourcegitcommit: 6f58a5f75ceeb936f8ee5b786e9adb81a9a3bee9
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/28/2020
ms.locfileid: "87299224"
---
# <a name="generics-in-the-run-time-c-programming-guide"></a><span data-ttu-id="c0bb4-104">Obecné typy v běhovém prostředí (Průvodce programováním v C#)</span><span class="sxs-lookup"><span data-stu-id="c0bb4-104">Generics in the Run Time (C# Programming Guide)</span></span>
<span data-ttu-id="c0bb4-105">Při kompilaci obecného typu nebo metody do jazyka MSIL (Microsoft Intermediate Language) obsahuje metadata, která ji identifikují jako parametry typu.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-105">When a generic type or method is compiled into Microsoft intermediate language (MSIL), it contains metadata that identifies it as having type parameters.</span></span> <span data-ttu-id="c0bb4-106">Způsob, jakým se používá jazyk MSIL pro obecný typ, se liší v závislosti na tom, zda je zadaný parametr typu hodnotový nebo odkazový typ.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-106">How the MSIL for a generic type is used differs based on whether the supplied type parameter is a value type or reference type.</span></span>  
  
 <span data-ttu-id="c0bb4-107">Je-li obecný typ nejprve vytvořen s typem hodnoty jako parametr, modul runtime vytvoří specializovaný obecný typ se zadaným parametrem nebo parametry nahrazeny v příslušných umístěních v jazyce MSIL.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-107">When a generic type is first constructed with a value type as a parameter, the runtime creates a specialized generic type with the supplied parameter or parameters substituted in the appropriate locations in the MSIL.</span></span> <span data-ttu-id="c0bb4-108">Specializované obecné typy jsou vytvořeny jednou pro každý typ jedinečné hodnoty, který se používá jako parametr.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-108">Specialized generic types are created one time for each unique value type that is used as a parameter.</span></span>  
  
 <span data-ttu-id="c0bb4-109">Předpokládejme například, že váš programový kód deklaruje zásobník, který je tvořen celými čísly:</span><span class="sxs-lookup"><span data-stu-id="c0bb4-109">For example, suppose your program code declared a stack that is constructed of integers:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#42](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#42)]  
  
 <span data-ttu-id="c0bb4-110">V tomto okamžiku modul runtime vygeneruje specializovanou verzi <xref:System.Collections.Generic.Stack%601> třídy, která má pro svůj parametr odpovídajícím způsobem celé číslo.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-110">At this point, the runtime generates a specialized version of the <xref:System.Collections.Generic.Stack%601> class that has the integer substituted appropriately for its parameter.</span></span> <span data-ttu-id="c0bb4-111">Když nyní kód programu používá zásobník celých čísel, modul runtime znovu použije generovanou specializovanou <xref:System.Collections.Generic.Stack%601> třídu.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-111">Now, whenever your program code uses a stack of integers, the runtime reuses the generated specialized <xref:System.Collections.Generic.Stack%601> class.</span></span> <span data-ttu-id="c0bb4-112">V následujícím příkladu se vytvoří dvě instance celého čísla zásobníku a sdílejí jednu instanci `Stack<int>` kódu:</span><span class="sxs-lookup"><span data-stu-id="c0bb4-112">In the following example, two instances of a stack of integers are created, and they share a single instance of the `Stack<int>` code:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#43](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#43)]  
  
 <span data-ttu-id="c0bb4-113">Předpokládejme však, že další <xref:System.Collections.Generic.Stack%601> Třída s jiným typem hodnoty, jako je například `long` nebo uživatelsky definovaná struktura, jako svůj parametr je vytvořena v jiném bodě kódu.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-113">However, suppose that another <xref:System.Collections.Generic.Stack%601> class with a different value type such as a `long` or a user-defined structure as its parameter is created at another point in your code.</span></span> <span data-ttu-id="c0bb4-114">V důsledku toho modul runtime vygeneruje jinou verzi obecného typu a nahradí ho `long` v příslušných umístěních v jazyce MSIL.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-114">As a result, the runtime generates another version of the generic type and substitutes a `long` in the appropriate locations in MSIL.</span></span> <span data-ttu-id="c0bb4-115">Převody již nejsou nezbytné, protože každá specializovaná obecná třída nativně obsahuje typ hodnoty.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-115">Conversions are no longer necessary because each specialized generic class natively contains the value type.</span></span>  
  
 <span data-ttu-id="c0bb4-116">Obecné typy fungují trochu jinak pro typy odkazů.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-116">Generics work somewhat differently for reference types.</span></span> <span data-ttu-id="c0bb4-117">Při prvním sestavení obecného typu s jakýmkoli odkazovým typem vytvoří modul runtime specializovaný obecný typ s odkazy na objekty, které jsou nahrazeny pro parametry v jazyce MSIL.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-117">The first time a generic type is constructed with any reference type, the runtime creates a specialized generic type with object references substituted for the parameters in the MSIL.</span></span> <span data-ttu-id="c0bb4-118">Pak při každém vytvoření instance konstruovaného typu s odkazovým typem jako jeho parametr bez ohledu na to, jaký typ je, modul runtime znovu použije dříve vytvořenou specializovanou verzi obecného typu.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-118">Then, every time that a constructed type is instantiated with a reference type as its parameter, regardless of what type it is, the runtime reuses the previously created specialized version of the generic type.</span></span> <span data-ttu-id="c0bb4-119">To je možné, protože všechny odkazy mají stejnou velikost.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-119">This is possible because all references are the same size.</span></span>  
  
 <span data-ttu-id="c0bb4-120">Předpokládejme například, že máte dva typy odkazů, `Customer` třídu a `Order` třídu a také Předpokládejme, že jste vytvořili zásobník `Customer` typů:</span><span class="sxs-lookup"><span data-stu-id="c0bb4-120">For example, suppose you had two reference types, a `Customer` class and an `Order` class, and also suppose that you created a stack of `Customer` types:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#47](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#47)]  
  
 [!code-csharp[csProgGuideGenerics#44](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#44)]  
  
 <span data-ttu-id="c0bb4-121">V tomto okamžiku modul runtime vygeneruje specializovanou verzi <xref:System.Collections.Generic.Stack%601> třídy, která ukládá odkazy na objekty, které budou vyplněny později namísto ukládání dat.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-121">At this point, the runtime generates a specialized version of the <xref:System.Collections.Generic.Stack%601> class that stores object references that will be filled in later instead of storing data.</span></span> <span data-ttu-id="c0bb4-122">Předpokládejme, že další řádek kódu vytvoří zásobník jiného typu odkazu, který má název `Order` :</span><span class="sxs-lookup"><span data-stu-id="c0bb4-122">Suppose the next line of code creates a stack of another reference type, which is named `Order`:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#45](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#45)]  
  
 <span data-ttu-id="c0bb4-123">Na rozdíl od typů hodnot <xref:System.Collections.Generic.Stack%601> není pro daný typ vytvořena jiná specializovaná verze třídy `Order` .</span><span class="sxs-lookup"><span data-stu-id="c0bb4-123">Unlike with value types, another specialized version of the <xref:System.Collections.Generic.Stack%601> class is not created for the `Order` type.</span></span> <span data-ttu-id="c0bb4-124">Místo toho je vytvořena instance specializované verze <xref:System.Collections.Generic.Stack%601> třídy a `orders` proměnná je nastavena na odkaz na ni.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-124">Instead, an instance of the specialized version of the <xref:System.Collections.Generic.Stack%601> class is created and the `orders` variable is set to reference it.</span></span> <span data-ttu-id="c0bb4-125">Předpokládejme, že jste pak narazili na řádek kódu pro vytvoření zásobníku `Customer` typu:</span><span class="sxs-lookup"><span data-stu-id="c0bb4-125">Suppose that you then encountered a line of code to create a stack of a `Customer` type:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#46](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#46)]  
  
 <span data-ttu-id="c0bb4-126">Stejně jako u předchozího použití <xref:System.Collections.Generic.Stack%601> třídy vytvořeného pomocí `Order` typu je vytvořena jiná instance specializované <xref:System.Collections.Generic.Stack%601> třídy.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-126">As with the previous use of the <xref:System.Collections.Generic.Stack%601> class created by using the `Order` type, another instance of the specialized <xref:System.Collections.Generic.Stack%601> class is created.</span></span> <span data-ttu-id="c0bb4-127">Ukazatele, které jsou obsaženy v, jsou nastaveny tak, aby odkazovaly na oblast paměti velikosti `Customer` typu.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-127">The pointers that are contained therein are set to reference an area of memory the size of a `Customer` type.</span></span> <span data-ttu-id="c0bb4-128">Vzhledem k tomu, že se počet typů odkazů může volně odlišovat od programu k programu, implementace obecných hodnot v jazyce C# významně snižuje množství kódu tím, že se omezí na jeden počet specializovaných tříd vytvořených kompilátorem pro obecné třídy typu odkazu.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-128">Because the number of reference types can vary wildly from program to program, the C# implementation of generics greatly reduces the amount of code by reducing to one the number of specialized classes created by the compiler for generic classes of reference types.</span></span>  
  
 <span data-ttu-id="c0bb4-129">Kromě toho, pokud je vytvořena instance obecné třídy jazyka C# pomocí typu hodnoty nebo parametru referenčního typu, reflexe se může dotazovat za běhu a jejich skutečný typ a parametr typu se dá zjistit.</span><span class="sxs-lookup"><span data-stu-id="c0bb4-129">Moreover, when a generic C# class is instantiated by using a value type or reference type parameter, reflection can query it at runtime and both its actual type and its type parameter can be ascertained.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c0bb4-130">Viz také:</span><span class="sxs-lookup"><span data-stu-id="c0bb4-130">See also</span></span>

- <xref:System.Collections.Generic>
- [<span data-ttu-id="c0bb4-131">Průvodce programováním v C#</span><span class="sxs-lookup"><span data-stu-id="c0bb4-131">C# Programming Guide</span></span>](../index.md)
- [<span data-ttu-id="c0bb4-132">Úvod do obecných typů</span><span class="sxs-lookup"><span data-stu-id="c0bb4-132">Introduction to Generics</span></span>](./index.md)
- [<span data-ttu-id="c0bb4-133">Obecné typy</span><span class="sxs-lookup"><span data-stu-id="c0bb4-133">Generics</span></span>](../../../standard/generics/index.md)
