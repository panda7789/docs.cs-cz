---
title: Serializace (C#)
description: Serializace převede objekt na datový proud bajtů pro uložení objektu nebo odeslání do paměti, databáze nebo souboru.
ms.date: 01/02/2020
ms.openlocfilehash: b2b3105887ad6f000fcba895452a483881ae5a09
ms.sourcegitcommit: 6f58a5f75ceeb936f8ee5b786e9adb81a9a3bee9
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/28/2020
ms.locfileid: "87302773"
---
# <a name="serialization-c"></a><span data-ttu-id="7a4de-103">Serializace (C#)</span><span class="sxs-lookup"><span data-stu-id="7a4de-103">Serialization (C#)</span></span>

<span data-ttu-id="7a4de-104">Serializace je proces převodu objektu na datový proud bajtů pro uložení objektu nebo jeho odeslání do paměti, databáze nebo souboru.</span><span class="sxs-lookup"><span data-stu-id="7a4de-104">Serialization is the process of converting an object into a stream of bytes to store the object or transmit it to memory, a database, or a file.</span></span> <span data-ttu-id="7a4de-105">Hlavním účelem je uložit stav objektu, aby bylo možné ho v případě potřeby znovu vytvořit.</span><span class="sxs-lookup"><span data-stu-id="7a4de-105">Its main purpose is to save the state of an object in order to be able to recreate it when needed.</span></span> <span data-ttu-id="7a4de-106">Reverzní proces se nazývá deserializace.</span><span class="sxs-lookup"><span data-stu-id="7a4de-106">The reverse process is called deserialization.</span></span>

## <a name="how-serialization-works"></a><span data-ttu-id="7a4de-107">Princip serializace</span><span class="sxs-lookup"><span data-stu-id="7a4de-107">How serialization works</span></span>

<span data-ttu-id="7a4de-108">Tento obrázek ukazuje celkový proces serializace:</span><span class="sxs-lookup"><span data-stu-id="7a4de-108">This illustration shows the overall process of serialization:</span></span>

![Grafika serializace](./media/index/serialization-process.gif)

<span data-ttu-id="7a4de-110">Objekt je serializován do datového proudu, který data přenáší.</span><span class="sxs-lookup"><span data-stu-id="7a4de-110">The object is serialized to a stream that carries the data.</span></span> <span data-ttu-id="7a4de-111">Datový proud může obsahovat také informace o typu objektu, jako je jeho verze, jazyková verze a název sestavení.</span><span class="sxs-lookup"><span data-stu-id="7a4de-111">The stream may also have information about the object's type, such as its version, culture, and assembly name.</span></span> <span data-ttu-id="7a4de-112">Z tohoto datového proudu může být objekt uložen v databázi, souboru nebo paměti.</span><span class="sxs-lookup"><span data-stu-id="7a4de-112">From that stream, the object can be stored in a database, a file, or memory.</span></span>

### <a name="uses-for-serialization"></a><span data-ttu-id="7a4de-113">Použití pro serializaci</span><span class="sxs-lookup"><span data-stu-id="7a4de-113">Uses for serialization</span></span>

<span data-ttu-id="7a4de-114">Serializace umožňuje vývojářům uložit stav objektu a v případě potřeby ho vytvořit znovu, což poskytuje úložiště objektů i výměnu dat.</span><span class="sxs-lookup"><span data-stu-id="7a4de-114">Serialization allows the developer to save the state of an object and re-create it as needed, providing storage of objects as well as data exchange.</span></span> <span data-ttu-id="7a4de-115">Pomocí serializace může vývojář provádět následující akce:</span><span class="sxs-lookup"><span data-stu-id="7a4de-115">Through serialization, a developer can perform actions such as:</span></span>

* <span data-ttu-id="7a4de-116">Odeslání objektu do vzdálené aplikace pomocí webové služby</span><span class="sxs-lookup"><span data-stu-id="7a4de-116">Sending the object to a remote application by using a web service</span></span>
* <span data-ttu-id="7a4de-117">Předání objektu z jedné domény do druhé</span><span class="sxs-lookup"><span data-stu-id="7a4de-117">Passing an object from one domain to another</span></span>
* <span data-ttu-id="7a4de-118">Předání objektu přes bránu firewall jako řetězce JSON nebo XML</span><span class="sxs-lookup"><span data-stu-id="7a4de-118">Passing an object through a firewall as a JSON or XML string</span></span>
* <span data-ttu-id="7a4de-119">Údržba informací o zabezpečení nebo specifických pro uživatele napříč aplikacemi</span><span class="sxs-lookup"><span data-stu-id="7a4de-119">Maintaining security or user-specific information across applications</span></span>

## <a name="json-serialization"></a><span data-ttu-id="7a4de-120">Serializace JSON</span><span class="sxs-lookup"><span data-stu-id="7a4de-120">JSON serialization</span></span>

<span data-ttu-id="7a4de-121"><xref:System.Text.Json>Obor názvů obsahuje třídy pro serializaci a deserializaci JavaScript Object Notation (JSON).</span><span class="sxs-lookup"><span data-stu-id="7a4de-121">The <xref:System.Text.Json> namespace contains classes for JavaScript Object Notation (JSON) serialization and deserialization.</span></span> <span data-ttu-id="7a4de-122">JSON je otevřený standard, který se běžně používá pro sdílení dat na celém webu.</span><span class="sxs-lookup"><span data-stu-id="7a4de-122">JSON is an open standard that is commonly used for sharing data across the web.</span></span>

<span data-ttu-id="7a4de-123">Serializace JSON serializace veřejné vlastnosti objektu do řetězce, bajtového pole nebo datového proudu, který odpovídá [specifikaci JSON specifikace RFC 8259](https://tools.ietf.org/html/rfc8259).</span><span class="sxs-lookup"><span data-stu-id="7a4de-123">JSON serialization serializes the public properties of an object into a string, byte array, or stream that conforms to [the RFC 8259 JSON specification](https://tools.ietf.org/html/rfc8259).</span></span> <span data-ttu-id="7a4de-124">Chcete-li řídit způsob, jakým <xref:System.Text.Json.JsonSerializer> serializace nebo deserializace instance třídy:</span><span class="sxs-lookup"><span data-stu-id="7a4de-124">To control the way <xref:System.Text.Json.JsonSerializer> serializes or deserializes an instance of the class:</span></span>

* <span data-ttu-id="7a4de-125">Použití <xref:System.Text.Json.JsonSerializerOptions> objektu</span><span class="sxs-lookup"><span data-stu-id="7a4de-125">Use a <xref:System.Text.Json.JsonSerializerOptions> object</span></span>
* <span data-ttu-id="7a4de-126">Použití atributů z <xref:System.Text.Json.Serialization> oboru názvů na třídy nebo vlastnosti</span><span class="sxs-lookup"><span data-stu-id="7a4de-126">Apply attributes from the <xref:System.Text.Json.Serialization> namespace to classes or properties</span></span>
* [<span data-ttu-id="7a4de-127">Implementace vlastních převaděčů</span><span class="sxs-lookup"><span data-stu-id="7a4de-127">Implement custom converters</span></span>](../../../../standard/serialization/system-text-json-converters-how-to.md)

## <a name="binary-and-xml-serialization"></a><span data-ttu-id="7a4de-128">Binární a XML serializace</span><span class="sxs-lookup"><span data-stu-id="7a4de-128">Binary and XML serialization</span></span>

<span data-ttu-id="7a4de-129"><xref:System.Runtime.Serialization>Obor názvů obsahuje třídy pro binární a serializaci a deserializaci kódu XML.</span><span class="sxs-lookup"><span data-stu-id="7a4de-129">The <xref:System.Runtime.Serialization> namespace contains classes for binary and XML serialization and deserialization.</span></span>

<span data-ttu-id="7a4de-130">Binární serializace používá binární kódování pro vytváření kompaktní serializace pro použití, jako je úložiště nebo síťové datové proudy založené na soketu.</span><span class="sxs-lookup"><span data-stu-id="7a4de-130">Binary serialization uses binary encoding to produce compact serialization for uses such as storage or socket-based network streams.</span></span> <span data-ttu-id="7a4de-131">V binární serializaci jsou serializováni všichni členové, dokonce i členové, kteří jsou jen pro čtení, a výkon je vylepšen.</span><span class="sxs-lookup"><span data-stu-id="7a4de-131">In binary serialization, all members, even members that are read-only, are serialized, and performance is enhanced.</span></span>

<span data-ttu-id="7a4de-132">Serializace XML serializace veřejné pole a vlastnosti objektu nebo parametry a návratové hodnoty metod do datového proudu XML, který odpovídá konkrétnímu dokumentu XSD (XML Schema Definition Language).</span><span class="sxs-lookup"><span data-stu-id="7a4de-132">XML serialization serializes the public fields and properties of an object, or the parameters and return values of methods, into an XML stream that conforms to a specific XML Schema definition language (XSD) document.</span></span> <span data-ttu-id="7a4de-133">Serializace XML má za následek třídy silného typu s veřejnými vlastnostmi a poli, které jsou převedeny na XML.</span><span class="sxs-lookup"><span data-stu-id="7a4de-133">XML serialization results in strongly typed classes with public properties and fields that are converted to XML.</span></span> <span data-ttu-id="7a4de-134"><xref:System.Xml.Serialization>obsahuje třídy pro serializaci a deserializaci kódu XML.</span><span class="sxs-lookup"><span data-stu-id="7a4de-134"><xref:System.Xml.Serialization> contains classes for serializing and deserializing XML.</span></span> <span data-ttu-id="7a4de-135">Můžete použít atributy na třídy a členy třídy pro řízení způsobu, jakým <xref:System.Xml.Serialization.XmlSerializer> serializace nebo deserializace instance třídy.</span><span class="sxs-lookup"><span data-stu-id="7a4de-135">You apply attributes to classes and class members to control the way the <xref:System.Xml.Serialization.XmlSerializer> serializes or deserializes an instance of the class.</span></span>

### <a name="making-an-object-serializable"></a><span data-ttu-id="7a4de-136">Vytvoření objektu, který je serializovatelný</span><span class="sxs-lookup"><span data-stu-id="7a4de-136">Making an object serializable</span></span>

<span data-ttu-id="7a4de-137">Pro binární nebo XML serializaci budete potřebovat:</span><span class="sxs-lookup"><span data-stu-id="7a4de-137">For binary or XML serialization, you need:</span></span>

* <span data-ttu-id="7a4de-138">Objekt, který se má serializovat</span><span class="sxs-lookup"><span data-stu-id="7a4de-138">The object to be serialized</span></span>
* <span data-ttu-id="7a4de-139">Datový proud, který obsahuje serializovaný objekt</span><span class="sxs-lookup"><span data-stu-id="7a4de-139">A stream to contain the serialized object</span></span>
* <span data-ttu-id="7a4de-140"><xref:System.Runtime.Serialization.Formatter?displayProperty=fullName>Instance</span><span class="sxs-lookup"><span data-stu-id="7a4de-140">A <xref:System.Runtime.Serialization.Formatter?displayProperty=fullName> instance</span></span>

<span data-ttu-id="7a4de-141">Použijte <xref:System.SerializableAttribute> atribut na typ, který označuje, že instance typu mohou být serializovány.</span><span class="sxs-lookup"><span data-stu-id="7a4de-141">Apply the <xref:System.SerializableAttribute> attribute to a type to indicate that instances of the type can be serialized.</span></span> <span data-ttu-id="7a4de-142">Pokud se pokusíte serializovat, ale typ nemá atribut, je vyvolána výjimka <xref:System.SerializableAttribute> .</span><span class="sxs-lookup"><span data-stu-id="7a4de-142">An  exception is thrown if you attempt to serialize but the type doesn't have the <xref:System.SerializableAttribute> attribute.</span></span>

<span data-ttu-id="7a4de-143">Chcete-li zabránit serializaci pole, použijte <xref:System.NonSerializedAttribute> atribut.</span><span class="sxs-lookup"><span data-stu-id="7a4de-143">To prevent a field from being serialized, apply the <xref:System.NonSerializedAttribute> attribute.</span></span> <span data-ttu-id="7a4de-144">Pokud pole serializovatelný typ obsahuje ukazatel, popisovač nebo jinou strukturu dat, která je specifická pro konkrétní prostředí, a pole nemůže být smysluplně reustaveno v jiném prostředí, pak pravděpodobně budete chtít provést neserializaci.</span><span class="sxs-lookup"><span data-stu-id="7a4de-144">If a field of a serializable type contains a pointer, a handle, or some other data structure that is specific to a particular environment, and the field cannot be meaningfully reconstituted in a different environment, then you may want to make it nonserializable.</span></span>

<span data-ttu-id="7a4de-145">Obsahuje-li serializovaná třída odkazy na objekty jiných tříd, které jsou označeny <xref:System.SerializableAttribute> , budou tyto objekty také serializovány.</span><span class="sxs-lookup"><span data-stu-id="7a4de-145">If a serialized class contains references to objects of other classes that are marked <xref:System.SerializableAttribute>, those objects will also be serialized.</span></span>

### <a name="basic-and-custom-serialization"></a><span data-ttu-id="7a4de-146">Základní a vlastní serializace</span><span class="sxs-lookup"><span data-stu-id="7a4de-146">Basic and custom serialization</span></span>

<span data-ttu-id="7a4de-147">Binární a XML serializace lze provádět dvěma způsoby, Basic a Custom.</span><span class="sxs-lookup"><span data-stu-id="7a4de-147">Binary and XML serialization can be performed in two ways, basic and custom.</span></span>

<span data-ttu-id="7a4de-148">Základní serializace používá rozhraní .NET k automatické serializaci objektu.</span><span class="sxs-lookup"><span data-stu-id="7a4de-148">Basic serialization uses .NET to automatically serialize the object.</span></span> <span data-ttu-id="7a4de-149">Jediným požadavkem je, že třída má <xref:System.SerializableAttribute> atribut použit.</span><span class="sxs-lookup"><span data-stu-id="7a4de-149">The only requirement is that the class has the <xref:System.SerializableAttribute> attribute applied.</span></span> <span data-ttu-id="7a4de-150"><xref:System.NonSerializedAttribute>Lze použít k udržení serializace konkrétních polí.</span><span class="sxs-lookup"><span data-stu-id="7a4de-150">The <xref:System.NonSerializedAttribute> can be used to keep specific fields from being serialized.</span></span>

<span data-ttu-id="7a4de-151">Když použijete základní serializaci, může vytváření verzí objektů způsobovat problémy.</span><span class="sxs-lookup"><span data-stu-id="7a4de-151">When you use basic serialization, the versioning of objects may create problems.</span></span> <span data-ttu-id="7a4de-152">Pokud jsou důležité problémy se správou verzí, použijte vlastní serializaci.</span><span class="sxs-lookup"><span data-stu-id="7a4de-152">You would use custom serialization when versioning issues are important.</span></span> <span data-ttu-id="7a4de-153">Základní serializace představuje nejjednodušší způsob, jak provést serializaci, ale neposkytuje velkou kontrolu nad procesem.</span><span class="sxs-lookup"><span data-stu-id="7a4de-153">Basic serialization is the easiest way to perform serialization, but it does not provide much control over the process.</span></span>

<span data-ttu-id="7a4de-154">Ve vlastní serializaci můžete přesně určit, které objekty budou serializovány a jak budou provedeny.</span><span class="sxs-lookup"><span data-stu-id="7a4de-154">In custom serialization, you can specify exactly which objects will be serialized and how it will be done.</span></span> <span data-ttu-id="7a4de-155">Třída musí být označena <xref:System.SerializableAttribute> a implementovat <xref:System.Runtime.Serialization.ISerializable> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="7a4de-155">The class must be marked <xref:System.SerializableAttribute> and implement the <xref:System.Runtime.Serialization.ISerializable> interface.</span></span> <span data-ttu-id="7a4de-156">Pokud chcete, aby byl objekt reserializován vlastním způsobem, použijte vlastní konstruktor.</span><span class="sxs-lookup"><span data-stu-id="7a4de-156">If you want your object to be deserialized in a custom manner as well, use a custom constructor.</span></span>

## <a name="designer-serialization"></a><span data-ttu-id="7a4de-157">Serializace návrháře</span><span class="sxs-lookup"><span data-stu-id="7a4de-157">Designer serialization</span></span>

<span data-ttu-id="7a4de-158">Serializace návrháře je speciální forma serializace, která zahrnuje druh trvalosti objektů přidružených k vývojářským nástrojům.</span><span class="sxs-lookup"><span data-stu-id="7a4de-158">Designer serialization is a special form of serialization that involves the kind of object persistence associated with development tools.</span></span> <span data-ttu-id="7a4de-159">Serializace návrháře je proces převodu objektu grafu na zdrojový soubor, který lze později použít k obnovení grafu objektu.</span><span class="sxs-lookup"><span data-stu-id="7a4de-159">Designer serialization is the process of converting an object graph into a source file that can later be used to recover the object graph.</span></span> <span data-ttu-id="7a4de-160">Zdrojový soubor může obsahovat kód, značku nebo dokonce informace o tabulce SQL.</span><span class="sxs-lookup"><span data-stu-id="7a4de-160">A source file can contain code, markup, or even SQL table information.</span></span>

## <a name="related-topics-and-examples"></a><a name="BKMK_RelatedTopics"></a><span data-ttu-id="7a4de-161">Související témata a příklady</span><span class="sxs-lookup"><span data-stu-id="7a4de-161">Related Topics and Examples</span></span>  

<span data-ttu-id="7a4de-162">[System.Text.Jspřehled](../../../../standard/serialization/system-text-json-overview.md) Ukazuje, jak získat `System.Text.Json` knihovnu.</span><span class="sxs-lookup"><span data-stu-id="7a4de-162">[System.Text.Json overview](../../../../standard/serialization/system-text-json-overview.md) Shows how to get the `System.Text.Json` library.</span></span>

<span data-ttu-id="7a4de-163">[Postup serializace a deserializace JSON v rozhraní .NET](../../../../standard/serialization/system-text-json-how-to.md).</span><span class="sxs-lookup"><span data-stu-id="7a4de-163">[How to serialize and deserialize JSON in .NET](../../../../standard/serialization/system-text-json-how-to.md).</span></span>
<span data-ttu-id="7a4de-164">Ukazuje, jak číst a zapisovat data objektů do a z JSON pomocí <xref:System.Text.Json.JsonSerializer> třídy.</span><span class="sxs-lookup"><span data-stu-id="7a4de-164">Shows how to read and write object data to and from JSON using the <xref:System.Text.Json.JsonSerializer> class.</span></span>

[<span data-ttu-id="7a4de-165">Návod: uchování objektu v aplikaci Visual Studio (C#)</span><span class="sxs-lookup"><span data-stu-id="7a4de-165">Walkthrough: Persisting an Object in Visual Studio (C#)</span></span>](walkthrough-persisting-an-object-in-visual-studio.md)  
<span data-ttu-id="7a4de-166">Ukazuje, jak lze použít serializaci k uchování dat objektu mezi instancemi, což umožňuje ukládat hodnoty a načíst je při příštím vytvoření instance objektu.</span><span class="sxs-lookup"><span data-stu-id="7a4de-166">Demonstrates how serialization can be used to persist an object's data between instances, allowing you to store values and retrieve them the next time the object is instantiated.</span></span>

[<span data-ttu-id="7a4de-167">Čtení dat objektů ze souboru XML (C#)</span><span class="sxs-lookup"><span data-stu-id="7a4de-167">How to read object data from an XML file (C#)</span></span>](how-to-read-object-data-from-an-xml-file.md)  
<span data-ttu-id="7a4de-168">Ukazuje, jak číst data objektů, která byla dříve zapsána do souboru XML pomocí <xref:System.Xml.Serialization.XmlSerializer> třídy.</span><span class="sxs-lookup"><span data-stu-id="7a4de-168">Shows how to read object data that was previously written to an XML file using the <xref:System.Xml.Serialization.XmlSerializer> class.</span></span>

[<span data-ttu-id="7a4de-169">Zápis dat objektů do souboru XML (C#)</span><span class="sxs-lookup"><span data-stu-id="7a4de-169">How to write object data to an XML file (C#)</span></span>](how-to-write-object-data-to-an-xml-file.md)  
<span data-ttu-id="7a4de-170">Ukazuje, jak napsat objekt z třídy do souboru XML pomocí <xref:System.Xml.Serialization.XmlSerializer> třídy.</span><span class="sxs-lookup"><span data-stu-id="7a4de-170">Shows how to write the object from a class to an XML file using the <xref:System.Xml.Serialization.XmlSerializer> class.</span></span>
