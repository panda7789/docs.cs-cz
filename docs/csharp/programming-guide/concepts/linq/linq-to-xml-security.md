---
title: LINQ do zabezpečení XML (C#)
ms.date: 07/20/2015
ms.assetid: ef2c0dc9-ecf9-4c17-b24e-144184ab725f
ms.openlocfilehash: 5b7eb815b058cba008f1db2cf683c8934c19b743
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/14/2020
ms.locfileid: "73423374"
---
# <a name="linq-to-xml-security-c"></a><span data-ttu-id="a602f-102">LINQ do zabezpečení XML (C#)</span><span class="sxs-lookup"><span data-stu-id="a602f-102">LINQ to XML Security (C#)</span></span>
<span data-ttu-id="a602f-103">Toto téma popisuje problémy se zabezpečením spojené s LINQ do XML.</span><span class="sxs-lookup"><span data-stu-id="a602f-103">This topic describes security issues associated with LINQ to XML.</span></span> <span data-ttu-id="a602f-104">Kromě toho poskytuje některé pokyny pro zmírnění expozice zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="a602f-104">In addition, it provides some guidance for mitigating security exposure.</span></span>  
  
## <a name="linq-to-xml-security-overview"></a><span data-ttu-id="a602f-105">Přehled zabezpečení LINQ to XML</span><span class="sxs-lookup"><span data-stu-id="a602f-105">LINQ to XML Security Overview</span></span>  
 <span data-ttu-id="a602f-106">LINQ to XML je určen spíše pro pohodlí programování než pro serverové aplikace s přísnými požadavky na zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="a602f-106">LINQ to XML is designed more for programming convenience than for server-side applications with stringent security requirements.</span></span> <span data-ttu-id="a602f-107">Většina scénářů XML se skládá ze zpracování důvěryhodných dokumentů XML, nikoli ze zpracování nedůvěryhodných dokumentů XML, které jsou odeslány na server.</span><span class="sxs-lookup"><span data-stu-id="a602f-107">Most XML scenarios consist of processing trusted XML documents, rather than processing untrusted XML documents that are uploaded to a server.</span></span> <span data-ttu-id="a602f-108">LINQ na XML je optimalizován pro tyto scénáře.</span><span class="sxs-lookup"><span data-stu-id="a602f-108">LINQ to XML is optimized for these scenarios.</span></span>  
  
 <span data-ttu-id="a602f-109">Pokud je nutné zpracovat nedůvěryhodná data z neznámých zdrojů, společnost Microsoft doporučuje použít instanci <xref:System.Xml.XmlReader> třídy, která byla nakonfigurována k odfiltrování známých útoků xml odmítnutí služby (DoS).</span><span class="sxs-lookup"><span data-stu-id="a602f-109">If you must process untrusted data from unknown sources, Microsoft recommends that you use an instance of the <xref:System.Xml.XmlReader> class that has been configured to filter out known XML denial of service (DoS) attacks.</span></span>  
  
 <span data-ttu-id="a602f-110">Pokud jste nakonfigurovali útok <xref:System.Xml.XmlReader> na odmítnutí služby, můžete pomocí této čtečky naplnit linq do stromu XML a stále těžit z vylepšení produktivity programátora LINQ na XML.</span><span class="sxs-lookup"><span data-stu-id="a602f-110">If you have configured an <xref:System.Xml.XmlReader> to mitigate denial of service attacks, you can use that reader to populate a LINQ to XML tree and still benefit from the programmer productivity enhancements of LINQ to XML.</span></span> <span data-ttu-id="a602f-111">Mnoho zmírňujících technik zahrnuje vytváření čtenářů, které jsou nakonfigurovány ke zmírnění problému se zabezpečením, a vytvoření instance stromu XML prostřednictvím nakonfigurované čtečky.</span><span class="sxs-lookup"><span data-stu-id="a602f-111">Many mitigation techniques involve creating readers that are configured to mitigate the security issue, and then instantiating an XML tree through the configured reader.</span></span>  
  
 <span data-ttu-id="a602f-112">Jazyk XML je vnitřně zranitelný vůči útokům odmítnutí služby, protože dokumenty jsou neohraničené velikostí, hloubkou, velikostí názvu prvku a dalšími.</span><span class="sxs-lookup"><span data-stu-id="a602f-112">XML is intrinsically vulnerable to denial of service attacks because documents are unbounded in size, depth, element name size, and more.</span></span> <span data-ttu-id="a602f-113">Bez ohledu na součást, kterou používáte ke zpracování xml, měli byste být vždy připraveni recyklovat doménu aplikace, pokud používá nadměrné prostředky.</span><span class="sxs-lookup"><span data-stu-id="a602f-113">Regardless of the component that you use to process XML, you should always be prepared to recycle the application domain if it uses excessive resources.</span></span>  
  
## <a name="mitigation-of-xml-xsd-xpath-and-xslt-attacks"></a><span data-ttu-id="a602f-114">Zmírnění útoků XML, XSD, XPath a XSLT</span><span class="sxs-lookup"><span data-stu-id="a602f-114">Mitigation of XML, XSD, XPath, and XSLT Attacks</span></span>  
 <span data-ttu-id="a602f-115">LINQ na XML <xref:System.Xml.XmlReader> je <xref:System.Xml.XmlWriter>postaven na a .</span><span class="sxs-lookup"><span data-stu-id="a602f-115">LINQ to XML is built upon <xref:System.Xml.XmlReader> and <xref:System.Xml.XmlWriter>.</span></span> <span data-ttu-id="a602f-116">LINQ to XML podporuje XSD a XPath prostřednictvím rozšiřujících metod v <xref:System.Xml.Schema?displayProperty=nameWithType> oborech názvů a. <xref:System.Xml.XPath?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="a602f-116">LINQ to XML supports XSD and XPath through extension methods in the <xref:System.Xml.Schema?displayProperty=nameWithType> and <xref:System.Xml.XPath?displayProperty=nameWithType> namespaces.</span></span> <span data-ttu-id="a602f-117">Pomocí <xref:System.Xml.XmlReader>, <xref:System.Xml.XPath.XPathNavigator>a <xref:System.Xml.XmlWriter> třídy ve spojení s LINQ do XML, můžete vyvolat XSLT transformovat stromy XML.</span><span class="sxs-lookup"><span data-stu-id="a602f-117">Using the <xref:System.Xml.XmlReader>, <xref:System.Xml.XPath.XPathNavigator>, and <xref:System.Xml.XmlWriter> classes in conjunction with LINQ to XML, you can invoke XSLT to transform XML trees.</span></span>  
  
 <span data-ttu-id="a602f-118">Pokud pracujete v méně zabezpečeném prostředí, existuje řada problémů se zabezpečením, které <xref:System.Xml?displayProperty=nameWithType>jsou <xref:System.Xml.Schema?displayProperty=nameWithType> <xref:System.Xml.XPath?displayProperty=nameWithType>spojeny <xref:System.Xml.Xsl?displayProperty=nameWithType>s jazykem XML a použitím tříd v oblasti , , a .</span><span class="sxs-lookup"><span data-stu-id="a602f-118">If you are operating in a less secure environment, there are a number of security issues that are associated with XML and the use of the classes in <xref:System.Xml?displayProperty=nameWithType>, <xref:System.Xml.Schema?displayProperty=nameWithType>, <xref:System.Xml.XPath?displayProperty=nameWithType>, and <xref:System.Xml.Xsl?displayProperty=nameWithType>.</span></span> <span data-ttu-id="a602f-119">Mezi tyto problémy patří mimo jiné následující:</span><span class="sxs-lookup"><span data-stu-id="a602f-119">These issues include, but are not limited to, the following:</span></span>  
  
- <span data-ttu-id="a602f-120">XSD, XPath a XSLT jsou jazyky založené na řetězecích, ve kterých můžete určit operace, které spotřebovávají hodně času nebo paměti.</span><span class="sxs-lookup"><span data-stu-id="a602f-120">XSD, XPath, and XSLT are string-based languages in which you can specify operations that consume a lot of time or memory.</span></span> <span data-ttu-id="a602f-121">Je odpovědností programátorů aplikací, kteří používají řetězce XSD, XPath nebo XSLT z nedůvěryhodných zdrojů, aby ověřili, že řetězce nejsou škodlivé, nebo aby monitorovali a zmírňovali možnost, že vyhodnocení těchto řetězců povede k nadměrnému systému spotřeby zdrojů.</span><span class="sxs-lookup"><span data-stu-id="a602f-121">It is the responsibility of application programmers who take XSD, XPath, or XSLT strings from untrusted sources to validate that the strings are not malicious, or to monitor and mitigate the possibility that evaluating these strings will lead to excessive system resource consumption.</span></span>  
  
- <span data-ttu-id="a602f-122">Schémata XSD (včetně inline schémat) jsou ze své podstaty ohrožena útoky odmítnutí služby; schémata byste neměli přijímat z nedůvěryhodných zdrojů.</span><span class="sxs-lookup"><span data-stu-id="a602f-122">XSD schemas (including inline schemas) are inherently vulnerable to denial of service attacks; you should not accept schemas from untrusted sources.</span></span>  
  
- <span data-ttu-id="a602f-123">XSD a XSLT mohou obsahovat odkazy na jiné soubory a tyto odkazy mohou vést k útokům mezi zónami a mezi doménami.</span><span class="sxs-lookup"><span data-stu-id="a602f-123">XSD and XSLT can include references to other files, and such references can result in cross-zone and cross-domain attacks.</span></span>  
  
- <span data-ttu-id="a602f-124">Externí entity v DTD mohou mít za následek útoky mezi zónami a mezi doménami.</span><span class="sxs-lookup"><span data-stu-id="a602f-124">External entities in DTDs can result in cross-zone and cross-domain attacks.</span></span>  
  
- <span data-ttu-id="a602f-125">DTD jsou náchylné k útokům odmítnutí služby.</span><span class="sxs-lookup"><span data-stu-id="a602f-125">DTDs are vulnerable to denial of service attacks.</span></span>  
  
- <span data-ttu-id="a602f-126">Výjimečně hluboké dokumenty XML mohou představovat problémy s odmítnutím služby. můžete chtít omezit hloubku dokumentů XML.</span><span class="sxs-lookup"><span data-stu-id="a602f-126">Exceptionally deep XML documents can pose denial of service issues; you might want to limit the depth of XML documents.</span></span>  
  
- <span data-ttu-id="a602f-127">Nepřijímejte podpůrné součásti, <xref:System.Xml.NameTable> <xref:System.Xml.XmlNamespaceManager>například <xref:System.Xml.XmlResolver> , a objekty, z nedůvěryhodných sestavení.</span><span class="sxs-lookup"><span data-stu-id="a602f-127">Do not accept supporting components, such as <xref:System.Xml.NameTable>, <xref:System.Xml.XmlNamespaceManager>, and <xref:System.Xml.XmlResolver> objects, from untrusted assemblies.</span></span>  
  
- <span data-ttu-id="a602f-128">Čtení dat v blocích pro zmírnění útoků velkých dokumentů.</span><span class="sxs-lookup"><span data-stu-id="a602f-128">Read data in chunks to mitigate large document attacks.</span></span>  
  
- <span data-ttu-id="a602f-129">Bloky skriptů v šablonách stylů XSLT mohou vystavit řadu útoků.</span><span class="sxs-lookup"><span data-stu-id="a602f-129">Script blocks in XSLT style sheets can expose a number of attacks.</span></span>  
  
- <span data-ttu-id="a602f-130">Před vytvořením dynamických výrazů XPath pečlivě ověřte.</span><span class="sxs-lookup"><span data-stu-id="a602f-130">Validate carefully before constructing dynamic XPath expressions.</span></span>  
  
## <a name="linq-to-xml-security-issues"></a><span data-ttu-id="a602f-131">Linq na problémy se zabezpečením XML</span><span class="sxs-lookup"><span data-stu-id="a602f-131">LINQ to XML Security Issues</span></span>  
 <span data-ttu-id="a602f-132">Problémy se zabezpečením v tomto tématu nejsou uvedeny v libovolném pořadí.</span><span class="sxs-lookup"><span data-stu-id="a602f-132">The security issues in this topic are not presented in any particular order.</span></span> <span data-ttu-id="a602f-133">Všechny otázky jsou důležité a měly by být podle potřeby řešeny.</span><span class="sxs-lookup"><span data-stu-id="a602f-133">All issues are important and should be addressed as appropriate.</span></span>  
  
 <span data-ttu-id="a602f-134">Úspěšné zvýšení oprávnění útoku dává škodlivé sestavení větší kontrolu nad jeho prostředí.</span><span class="sxs-lookup"><span data-stu-id="a602f-134">A successful elevation of privilege attack gives a malicious assembly more control over its environment.</span></span> <span data-ttu-id="a602f-135">Úspěšné zvýšení oprávnění útoku může mít za následek zpřístupnění dat, odmítnutí služby a další.</span><span class="sxs-lookup"><span data-stu-id="a602f-135">A successful elevation of privilege attack can result in disclosure of data, denial of service, and more.</span></span>  
  
 <span data-ttu-id="a602f-136">Aplikace by neměly sdělovat údaje uživatelům, kteří nejsou oprávněni tyto údaje zobrazit.</span><span class="sxs-lookup"><span data-stu-id="a602f-136">Applications should not disclose data to users who are not authorized to see that data.</span></span>  
  
 <span data-ttu-id="a602f-137">Útoky odmítnutí služby způsobí, že analyzátor XML nebo LINQ na XML spotřebovávají nadměrné množství paměti nebo času procesoru.</span><span class="sxs-lookup"><span data-stu-id="a602f-137">Denial of service attacks cause the XML parser or LINQ to XML to consume excessive amounts of memory or CPU time.</span></span> <span data-ttu-id="a602f-138">Útoky s cílem odepření služby jsou považovány za méně závažné než zvýšení oprávnění útoky nebo zpřístupnění útoků dat.</span><span class="sxs-lookup"><span data-stu-id="a602f-138">Denial of service attacks are considered to be less severe than elevation of privilege attacks or disclosure of data attacks.</span></span> <span data-ttu-id="a602f-139">Jsou však důležité ve scénáři, kde server potřebuje zpracovávat dokumenty XML z nedůvěryhodných zdrojů.</span><span class="sxs-lookup"><span data-stu-id="a602f-139">However, they are important in a scenario where a server needs to process XML documents from untrusted sources.</span></span>  
  
### <a name="exceptions-and-error-messages-might-reveal-data"></a><span data-ttu-id="a602f-140">Výjimky a chybové zprávy mohou odhalit data</span><span class="sxs-lookup"><span data-stu-id="a602f-140">Exceptions and Error Messages Might Reveal Data</span></span>  
 <span data-ttu-id="a602f-141">Popis chyby může odhalit data, jako jsou například transformovaná data, názvy souborů nebo podrobnosti implementace.</span><span class="sxs-lookup"><span data-stu-id="a602f-141">The description of an error might reveal data, such as the data being transformed, file names, or implementation details.</span></span> <span data-ttu-id="a602f-142">Chybové zprávy by neměly být vystaveny volajícím, kteří nejsou důvěryhodní.</span><span class="sxs-lookup"><span data-stu-id="a602f-142">Error messages should not be exposed to callers that are not trusted.</span></span> <span data-ttu-id="a602f-143">Měli byste zachytit všechny chyby a hlásit chyby s vlastní mise.</span><span class="sxs-lookup"><span data-stu-id="a602f-143">You should catch all errors and report errors with your own custom error messages.</span></span>  
  
### <a name="do-not-call-codeaccesspermissionsassert-in-an-event-handler"></a><span data-ttu-id="a602f-144">Nevolat CodeAccessPermissions.Assert v obslužné rutině události</span><span class="sxs-lookup"><span data-stu-id="a602f-144">Do Not Call CodeAccessPermissions.Assert in an Event Handler</span></span>  
 <span data-ttu-id="a602f-145">Sestavení může mít menší nebo větší oprávnění.</span><span class="sxs-lookup"><span data-stu-id="a602f-145">An assembly can have lesser or greater permissions.</span></span> <span data-ttu-id="a602f-146">Sestavení, které má větší oprávnění, má větší kontrolu nad počítačem a jeho prostředími.</span><span class="sxs-lookup"><span data-stu-id="a602f-146">An assembly that has greater permissions has greater control over the computer and its environments.</span></span>  
  
 <span data-ttu-id="a602f-147">Pokud kód v sestavení s <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> většími oprávněními volá v obslužné rutině události a potom je strom XML předán škodlivému sestavení, které má omezená oprávnění, může škodlivé sestavení způsobit vyvolání události.</span><span class="sxs-lookup"><span data-stu-id="a602f-147">If code in an assembly with greater permissions calls <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler, and then the XML tree is passed to a malicious assembly that has restricted permissions, the malicious assembly can cause an event to be raised.</span></span> <span data-ttu-id="a602f-148">Vzhledem k tomu, že událost spustí kód, který je v sestavení s většími oprávněními, škodlivé sestavení by pak pracovat se zvýšenými oprávněními.</span><span class="sxs-lookup"><span data-stu-id="a602f-148">Because the event runs code that is in the assembly with greater permissions, the malicious assembly would then be operating with elevated privileges.</span></span>  
  
 <span data-ttu-id="a602f-149">Společnost Microsoft doporučuje nikdy <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> volat obslužnou rutinu události.</span><span class="sxs-lookup"><span data-stu-id="a602f-149">Microsoft recommends that you never call <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler.</span></span>  
  
### <a name="dtds-are-not-secure"></a><span data-ttu-id="a602f-150">DTD nejsou zabezpečené</span><span class="sxs-lookup"><span data-stu-id="a602f-150">DTDs are Not Secure</span></span>  
 <span data-ttu-id="a602f-151">Entity v DTD nejsou ze své podstaty nejsou zabezpečené.</span><span class="sxs-lookup"><span data-stu-id="a602f-151">Entities in DTDs are inherently not secure.</span></span> <span data-ttu-id="a602f-152">Je možné, že škodlivý dokument XML, který obsahuje DTD, způsobí, že analyzátor použije veškerou paměť a čas procesoru, což způsobí útok odmítnutí služby.</span><span class="sxs-lookup"><span data-stu-id="a602f-152">It is possible for a malicious XML document that contains a DTD to cause the parser to use all memory and CPU time, causing a denial of service attack.</span></span> <span data-ttu-id="a602f-153">Proto v LINQ na XML je zpracování DTD ve výchozím nastavení vypnuto.</span><span class="sxs-lookup"><span data-stu-id="a602f-153">Therefore, in LINQ to XML, DTD processing is turned off by default.</span></span> <span data-ttu-id="a602f-154">Neměli byste přijímat DTD z nedůvěryhodných zdrojů.</span><span class="sxs-lookup"><span data-stu-id="a602f-154">You should not accept DTDs from untrusted sources.</span></span>  
  
 <span data-ttu-id="a602f-155">Jedním z příkladů přijetí DTD z nedůvěryhodných zdrojů je webová aplikace, která umožňuje webovým uživatelům nahrát soubor XML, který odkazuje na soubor DTD a DTD.</span><span class="sxs-lookup"><span data-stu-id="a602f-155">One example of accepting DTDs from untrusted sources is a Web application that allows Web users to upload an XML file that references a DTD and a DTD file.</span></span> <span data-ttu-id="a602f-156">Po ověření souboru může škodlivý DTD spustit útok odmítnutí služby na serveru.</span><span class="sxs-lookup"><span data-stu-id="a602f-156">Upon validation of the file, a malicious DTD could execute a denial of service attack on your server.</span></span> <span data-ttu-id="a602f-157">Dalším příkladem přijetí DTD z nedůvěryhodných zdrojů je odkaz na DTD na sdílené síťové složce, která také umožňuje anonymní přístup FTP.</span><span class="sxs-lookup"><span data-stu-id="a602f-157">Another example of accepting DTDs from untrusted sources is to reference a DTD on a network share that also allows anonymous FTP access.</span></span>  
  
### <a name="avoid-excessive-buffer-allocation"></a><span data-ttu-id="a602f-158">Vyhněte se nadměrnému přidělení vyrovnávací paměti</span><span class="sxs-lookup"><span data-stu-id="a602f-158">Avoid Excessive Buffer Allocation</span></span>  
 <span data-ttu-id="a602f-159">Vývojáři aplikací by si měli být vědomi toho, že extrémně velké zdroje dat mohou vést k vyčerpání prostředků a útokům odmítnutí služby.</span><span class="sxs-lookup"><span data-stu-id="a602f-159">Application developers should be aware that extremely large data sources can lead to resource exhaustion and denial of service attacks.</span></span>  
  
 <span data-ttu-id="a602f-160">Pokud uživatel se zlými úmysly odešle nebo odešle velmi velký dokument XML, může to způsobit, že LINQ do XML spotřebuje nadměrné systémové prostředky.</span><span class="sxs-lookup"><span data-stu-id="a602f-160">If a malicious user submits or uploads a very large XML document, it could cause LINQ to XML to consume excessive system resources.</span></span> <span data-ttu-id="a602f-161">To může představovat útok odmítnutí služby.</span><span class="sxs-lookup"><span data-stu-id="a602f-161">This can constitute a denial of service attack.</span></span> <span data-ttu-id="a602f-162">Chcete-li tomu zabránit, <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> můžete nastavit vlastnost a vytvořit čtečku, která je pak omezena ve velikosti dokumentu, který může načíst.</span><span class="sxs-lookup"><span data-stu-id="a602f-162">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> property, and create a reader that is then limited in the size of document that it can load.</span></span> <span data-ttu-id="a602f-163">Potom pomocí čtečky k vytvoření stromu XML.</span><span class="sxs-lookup"><span data-stu-id="a602f-163">You then use the reader to create the XML tree.</span></span>  
  
 <span data-ttu-id="a602f-164">Pokud například víte, že maximální očekávaná velikost dokumentů XML pocházejících z nedůvěryhodného zdroje bude <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> menší než 50 bajtů, nastavená na 100 000.</span><span class="sxs-lookup"><span data-stu-id="a602f-164">For example, if you know that the maximum expected size of your XML documents coming from an untrusted source will be less than 50K bytes, set <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> to 100,000.</span></span> <span data-ttu-id="a602f-165">To nezatíží vaše zpracování dokumentů XML a zároveň to zmírní hrozby odmítnutí služby, kde mohou být nahrány dokumenty, které by spotřebovávaly velké množství paměti.</span><span class="sxs-lookup"><span data-stu-id="a602f-165">This will not encumber your processing of XML documents, and at the same time it will mitigate denial of service threats where documents might be uploaded that would consume large amounts of memory.</span></span>  
  
### <a name="avoid-excess-entity-expansion"></a><span data-ttu-id="a602f-166">Vyhněte se nadměrnému rozšíření entity</span><span class="sxs-lookup"><span data-stu-id="a602f-166">Avoid Excess Entity Expansion</span></span>  
 <span data-ttu-id="a602f-167">Jeden ze známých útoků odmítnutí služby při použití DTD je dokument, který způsobuje nadměrné rozšíření entity.</span><span class="sxs-lookup"><span data-stu-id="a602f-167">One of the known denial of service attacks when using a DTD is a document that causes excessive entity expansion.</span></span> <span data-ttu-id="a602f-168">Chcete-li tomu zabránit, <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> můžete nastavit vlastnost a vytvořit čtečku, která je pak omezena v počtu znaků, které vyplývají z rozšíření entity.</span><span class="sxs-lookup"><span data-stu-id="a602f-168">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> property, and create a reader that is then limited in the number of characters that result from entity expansion.</span></span> <span data-ttu-id="a602f-169">Potom pomocí čtečky k vytvoření stromu XML.</span><span class="sxs-lookup"><span data-stu-id="a602f-169">You then use the reader to create the XML tree.</span></span>  
  
### <a name="limit-the-depth-of-the-xml-hierarchy"></a><span data-ttu-id="a602f-170">Omezení hloubky hierarchie XML</span><span class="sxs-lookup"><span data-stu-id="a602f-170">Limit the Depth of the XML Hierarchy</span></span>  
 <span data-ttu-id="a602f-171">Jedním z možných útoku odmítnutí služby je při odeslání dokumentu, který má nadměrnou hloubku hierarchie.</span><span class="sxs-lookup"><span data-stu-id="a602f-171">One possible denial of service attack is when a document is submitted that has excessive depth of hierarchy.</span></span> <span data-ttu-id="a602f-172">Chcete-li tomu zabránit, <xref:System.Xml.XmlReader> můžete zabalit ve vlastní třídě, která počítá hloubku prvků.</span><span class="sxs-lookup"><span data-stu-id="a602f-172">To prevent this, you can wrap a <xref:System.Xml.XmlReader> in your own class that counts the depth of elements.</span></span> <span data-ttu-id="a602f-173">Pokud hloubka překročí předem stanovenou přiměřenou úroveň, můžete ukončit zpracování škodlivého dokumentu.</span><span class="sxs-lookup"><span data-stu-id="a602f-173">If the depth exceeds a predetermined reasonable level, you can terminate the processing of the malicious document.</span></span>  
  
### <a name="protect-against-untrusted-xmlreader-or-xmlwriter-implementations"></a><span data-ttu-id="a602f-174">Ochrana před nedůvěryhodnými implementacemi XmlReader nebo XmlWriter</span><span class="sxs-lookup"><span data-stu-id="a602f-174">Protect Against Untrusted XmlReader or XmlWriter Implementations</span></span>  
 <span data-ttu-id="a602f-175">Správci by měli ověřit, <xref:System.Xml.XmlReader> <xref:System.Xml.XmlWriter> zda všechny externě zadané nebo implementace mají silné názvy a byly registrovány v konfiguraci počítače.</span><span class="sxs-lookup"><span data-stu-id="a602f-175">Administrators should verify that any externally supplied <xref:System.Xml.XmlReader> or <xref:System.Xml.XmlWriter> implementations have strong names and have been registered in the machine configuration.</span></span> <span data-ttu-id="a602f-176">Tím zabráníte načtení škodlivého kódu maskovaného jako čtenář nebo zapisovatel.</span><span class="sxs-lookup"><span data-stu-id="a602f-176">This prevents malicious code masquerading as a reader or writer from being loaded.</span></span>  
  
### <a name="periodically-free-objects-that-reference-xname"></a><span data-ttu-id="a602f-177">Pravidelně volné objekty, které odkazují na XName</span><span class="sxs-lookup"><span data-stu-id="a602f-177">Periodically Free Objects that Reference XName</span></span>  
 <span data-ttu-id="a602f-178">Chcete-li chránit před určitými druhy útoků, programátoři <xref:System.Xml.Linq.XName> aplikací by měli pravidelně uvolnit všechny objekty, které odkazují na objekt v doméně aplikace.</span><span class="sxs-lookup"><span data-stu-id="a602f-178">To protect against certain kinds of attacks, application programmers should free all objects that reference an <xref:System.Xml.Linq.XName> object in the application domain on a regular basis.</span></span>  
  
### <a name="protect-against-random-xml-names"></a><span data-ttu-id="a602f-179">Chránit před náhodnými názvy XML</span><span class="sxs-lookup"><span data-stu-id="a602f-179">Protect Against Random XML Names</span></span>  
 <span data-ttu-id="a602f-180">Aplikace, které přebírají data z <xref:System.Xml.XmlReader> nedůvěryhodných zdrojů, by měly zvážit použití souboru, který je zabalen do vlastního kódu, ke kontrole možnosti náhodných názvů XML a jmenných prostorů.</span><span class="sxs-lookup"><span data-stu-id="a602f-180">Applications that take data from untrusted sources should consider using an <xref:System.Xml.XmlReader> that is wrapped in custom code to inspect for the possibility of random XML names and namespaces.</span></span> <span data-ttu-id="a602f-181">Pokud jsou tyto náhodné názvy XML a obory názvů zjištěny, aplikace pak může ukončit zpracování škodlivého dokumentu.</span><span class="sxs-lookup"><span data-stu-id="a602f-181">If such random XML names and namespaces are detected, the application can then terminate the processing of the malicious document.</span></span>  
  
 <span data-ttu-id="a602f-182">Počet názvů v libovolném oboru názvů (včetně názvů v žádném oboru názvů) můžete omezit na přiměřené omezení.</span><span class="sxs-lookup"><span data-stu-id="a602f-182">You might want to limit the number of names in any given namespace (including names in no namespace) to a reasonable limit.</span></span>  
  
### <a name="annotations-are-accessible-by-software-components-that-share-a-linq-to-xml-tree"></a><span data-ttu-id="a602f-183">Poznámky jsou přístupné softwarovým součástem, které sdílejí linq se stromem XML</span><span class="sxs-lookup"><span data-stu-id="a602f-183">Annotations Are Accessible by Software Components that Share a LINQ to XML Tree</span></span>  
 <span data-ttu-id="a602f-184">Linq na XML lze použít k vytvoření kanálů zpracování, ve kterých různé součásti aplikace načítají, ověřují, dotazují, transformují, aktualizují a ukládají data XML předávaná mezi součástmi jako stromy XML.</span><span class="sxs-lookup"><span data-stu-id="a602f-184">LINQ to XML could be used to build processing pipelines in which different application components load, validate, query, transform, update, and save XML data that is passed between components as XML trees.</span></span> <span data-ttu-id="a602f-185">To může pomoci optimalizovat výkon, protože režie načítání a serializace objektů na text XML se provádí pouze na koncích kanálu.</span><span class="sxs-lookup"><span data-stu-id="a602f-185">This can help optimize performance, because the overhead of loading and serializing objects to XML text is done only at the ends of the pipeline.</span></span> <span data-ttu-id="a602f-186">Vývojáři si však musí být vědomi toho, že všechny poznámky a obslužné rutiny událostí vytvořené jednou komponentou jsou přístupné ostatním součástem.</span><span class="sxs-lookup"><span data-stu-id="a602f-186">Developers must be aware, however, that all annotations and event handlers created by one component are accessible to other components.</span></span> <span data-ttu-id="a602f-187">To může vytvořit řadu chyb zabezpečení, pokud součásti mají různé úrovně důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="a602f-187">This can create a number of vulnerabilities if the components have different levels of trust.</span></span> <span data-ttu-id="a602f-188">Chcete-li vytvořit zabezpečené kanály mezi méně důvěryhodnými součástmi, je nutné serializovat linq na objekty XML na text XML před předáním dat nedůvěryhodné součásti.</span><span class="sxs-lookup"><span data-stu-id="a602f-188">To build secure pipelines across less trusted components, you must serialize LINQ to XML objects to XML text before passing the data to an untrusted component.</span></span>  
  
 <span data-ttu-id="a602f-189">Některé zabezpečení poskytuje za běhu common jazyka (CLR).</span><span class="sxs-lookup"><span data-stu-id="a602f-189">Some security is provided by the common language runtime (CLR).</span></span> <span data-ttu-id="a602f-190">Například součást, která neobsahuje soukromou třídu, nemůže přistupovat k poznámkám, které tato třída zamísťuje.</span><span class="sxs-lookup"><span data-stu-id="a602f-190">For example, a component that does not include a private class cannot access annotations keyed by that class.</span></span> <span data-ttu-id="a602f-191">Poznámky však mohou být odstraněny součástmi, které je nemohou číst.</span><span class="sxs-lookup"><span data-stu-id="a602f-191">However, annotations can be deleted by components that cannot read them.</span></span> <span data-ttu-id="a602f-192">Tohle by mohlo být použito jako znemanipulacní útok.</span><span class="sxs-lookup"><span data-stu-id="a602f-192">This could be used as a tampering attack.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a602f-193">Viz také</span><span class="sxs-lookup"><span data-stu-id="a602f-193">See also</span></span>

- [<span data-ttu-id="a602f-194">Programovací příručka (LINQ to XML) (C#)</span><span class="sxs-lookup"><span data-stu-id="a602f-194">Programming Guide (LINQ to XML) (C#)</span></span>](linq-to-xml-overview.md)
