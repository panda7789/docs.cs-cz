---
title: LINQ to XML zabezpečení (C#)
description: Přečtěte si o potížích se zabezpečením souvisejících s LINQ to XML, včetně některých pokynů pro zmírnění ohrožení zabezpečení.
ms.date: 07/20/2015
ms.assetid: ef2c0dc9-ecf9-4c17-b24e-144184ab725f
ms.openlocfilehash: dc9fd13f19dcf6d9cbbb2b0b7608009cc4da1108
ms.sourcegitcommit: 87cfeb69226fef01acb17c56c86f978f4f4a13db
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/24/2020
ms.locfileid: "87165317"
---
# <a name="linq-to-xml-security-c"></a><span data-ttu-id="a0aea-103">LINQ to XML zabezpečení (C#)</span><span class="sxs-lookup"><span data-stu-id="a0aea-103">LINQ to XML Security (C#)</span></span>
<span data-ttu-id="a0aea-104">Toto téma popisuje problémy se zabezpečením související s LINQ to XML.</span><span class="sxs-lookup"><span data-stu-id="a0aea-104">This topic describes security issues associated with LINQ to XML.</span></span> <span data-ttu-id="a0aea-105">Kromě toho poskytuje některé pokyny ke zmírnění ohrožení zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="a0aea-105">In addition, it provides some guidance for mitigating security exposure.</span></span>  
  
## <a name="linq-to-xml-security-overview"></a><span data-ttu-id="a0aea-106">Přehled zabezpečení LINQ to XML</span><span class="sxs-lookup"><span data-stu-id="a0aea-106">LINQ to XML Security Overview</span></span>  
 <span data-ttu-id="a0aea-107">LINQ to XML je navrženější pro usnadnění programování než pro aplikace na straně serveru s přísnými požadavky na zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="a0aea-107">LINQ to XML is designed more for programming convenience than for server-side applications with stringent security requirements.</span></span> <span data-ttu-id="a0aea-108">Většina scénářů XML sestává z zpracování důvěryhodných dokumentů XML namísto zpracování nedůvěryhodných dokumentů XML, které jsou odeslány na server.</span><span class="sxs-lookup"><span data-stu-id="a0aea-108">Most XML scenarios consist of processing trusted XML documents, rather than processing untrusted XML documents that are uploaded to a server.</span></span> <span data-ttu-id="a0aea-109">LINQ to XML je pro tyto scénáře optimalizována.</span><span class="sxs-lookup"><span data-stu-id="a0aea-109">LINQ to XML is optimized for these scenarios.</span></span>  
  
 <span data-ttu-id="a0aea-110">Pokud je nutné zpracovat nedůvěryhodná data z neznámých zdrojů, společnost Microsoft doporučuje použít instanci <xref:System.Xml.XmlReader> třídy, která byla konfigurována pro vyfiltrování známých útoků DOS (Denial of Service) typu XML.</span><span class="sxs-lookup"><span data-stu-id="a0aea-110">If you must process untrusted data from unknown sources, Microsoft recommends that you use an instance of the <xref:System.Xml.XmlReader> class that has been configured to filter out known XML denial of service (DoS) attacks.</span></span>  
  
 <span data-ttu-id="a0aea-111">Pokud jste nakonfigurovali <xref:System.Xml.XmlReader> pro zmírnění útoků s cílem odepření služby, můžete pomocí tohoto čtecího zařízení naplnit LINQ to XML stromové struktuře a nadále využívat vylepšení aplikace LINQ to XML pro programátory.</span><span class="sxs-lookup"><span data-stu-id="a0aea-111">If you have configured an <xref:System.Xml.XmlReader> to mitigate denial of service attacks, you can use that reader to populate a LINQ to XML tree and still benefit from the programmer productivity enhancements of LINQ to XML.</span></span> <span data-ttu-id="a0aea-112">Mnoho technik zmírnění rizik zahrnuje vytváření čtecích zařízení, která jsou nakonfigurovaná pro zmírnění potíží se zabezpečením, a následné vytvoření instance stromu XML pomocí nakonfigurovaného čtecího modulu.</span><span class="sxs-lookup"><span data-stu-id="a0aea-112">Many mitigation techniques involve creating readers that are configured to mitigate the security issue, and then instantiating an XML tree through the configured reader.</span></span>  
  
 <span data-ttu-id="a0aea-113">KÓD XML je vnitřně zranitelný vůči útokům DOS (Denial of Service), protože jsou neohraničené velikosti, hloubky, velikosti názvu elementu a další.</span><span class="sxs-lookup"><span data-stu-id="a0aea-113">XML is intrinsically vulnerable to denial of service attacks because documents are unbounded in size, depth, element name size, and more.</span></span> <span data-ttu-id="a0aea-114">Bez ohledu na komponentu, kterou použijete ke zpracování XML, byste měli vždy být připraveni k recyklaci domény aplikace, pokud používá nadměrné prostředky.</span><span class="sxs-lookup"><span data-stu-id="a0aea-114">Regardless of the component that you use to process XML, you should always be prepared to recycle the application domain if it uses excessive resources.</span></span>  
  
## <a name="mitigation-of-xml-xsd-xpath-and-xslt-attacks"></a><span data-ttu-id="a0aea-115">Zmírnění útoků XML, XSD, XPath a XSLT</span><span class="sxs-lookup"><span data-stu-id="a0aea-115">Mitigation of XML, XSD, XPath, and XSLT Attacks</span></span>  
 <span data-ttu-id="a0aea-116">LINQ to XML je postaven na <xref:System.Xml.XmlReader> a <xref:System.Xml.XmlWriter> .</span><span class="sxs-lookup"><span data-stu-id="a0aea-116">LINQ to XML is built upon <xref:System.Xml.XmlReader> and <xref:System.Xml.XmlWriter>.</span></span> <span data-ttu-id="a0aea-117">LINQ to XML podporuje XSD a XPath prostřednictvím rozšiřujících metod v <xref:System.Xml.Schema?displayProperty=nameWithType> <xref:System.Xml.XPath?displayProperty=nameWithType> oborech názvů a.</span><span class="sxs-lookup"><span data-stu-id="a0aea-117">LINQ to XML supports XSD and XPath through extension methods in the <xref:System.Xml.Schema?displayProperty=nameWithType> and <xref:System.Xml.XPath?displayProperty=nameWithType> namespaces.</span></span> <span data-ttu-id="a0aea-118">Pomocí <xref:System.Xml.XmlReader> tříd, <xref:System.Xml.XPath.XPathNavigator> a <xref:System.Xml.XmlWriter> ve spojení s LINQ to XML lze vyvolat XSLT pro transformaci stromů XML.</span><span class="sxs-lookup"><span data-stu-id="a0aea-118">Using the <xref:System.Xml.XmlReader>, <xref:System.Xml.XPath.XPathNavigator>, and <xref:System.Xml.XmlWriter> classes in conjunction with LINQ to XML, you can invoke XSLT to transform XML trees.</span></span>  
  
 <span data-ttu-id="a0aea-119">Pokud pracujete v méně zabezpečeném prostředí, je k dispozici řada problémů se zabezpečením, které jsou spojeny s XML a používání tříd v systémech <xref:System.Xml?displayProperty=nameWithType> , <xref:System.Xml.Schema?displayProperty=nameWithType> , a <xref:System.Xml.XPath?displayProperty=nameWithType> <xref:System.Xml.Xsl?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="a0aea-119">If you are operating in a less secure environment, there are a number of security issues that are associated with XML and the use of the classes in <xref:System.Xml?displayProperty=nameWithType>, <xref:System.Xml.Schema?displayProperty=nameWithType>, <xref:System.Xml.XPath?displayProperty=nameWithType>, and <xref:System.Xml.Xsl?displayProperty=nameWithType>.</span></span> <span data-ttu-id="a0aea-120">Mezi tyto problémy patří mimo jiné tyto problémy:</span><span class="sxs-lookup"><span data-stu-id="a0aea-120">These issues include, but are not limited to, the following:</span></span>  
  
- <span data-ttu-id="a0aea-121">XSD, XPath a XSLT jsou jazyky založené na řetězci, ve kterých můžete zadat operace, které spotřebovávají spoustu času nebo paměti.</span><span class="sxs-lookup"><span data-stu-id="a0aea-121">XSD, XPath, and XSLT are string-based languages in which you can specify operations that consume a lot of time or memory.</span></span> <span data-ttu-id="a0aea-122">Je odpovědností programátorů aplikací, kteří přijímají řetězce XSD, XPath nebo XSLT z nedůvěryhodných zdrojů, aby ověřili, že tyto řetězce nejsou škodlivé, nebo pokud chcete monitorovat a zmírnit riziko, že vyhodnocování těchto řetězců vede k nadměrné spotřebě systémových prostředků.</span><span class="sxs-lookup"><span data-stu-id="a0aea-122">It is the responsibility of application programmers who take XSD, XPath, or XSLT strings from untrusted sources to validate that the strings are not malicious, or to monitor and mitigate the possibility that evaluating these strings will lead to excessive system resource consumption.</span></span>  
  
- <span data-ttu-id="a0aea-123">Schémata XSD (včetně vložených schémat) jsou z vlastního podstaty zranitelná útokům DOS (Denial of Service). neměli byste přijímat schémata z nedůvěryhodných zdrojů.</span><span class="sxs-lookup"><span data-stu-id="a0aea-123">XSD schemas (including inline schemas) are inherently vulnerable to denial of service attacks; you should not accept schemas from untrusted sources.</span></span>  
  
- <span data-ttu-id="a0aea-124">XSD a XSLT můžou zahrnovat odkazy na jiné soubory a takové odkazy můžou vést k útokům mezi zónami a mezi doménami.</span><span class="sxs-lookup"><span data-stu-id="a0aea-124">XSD and XSLT can include references to other files, and such references can result in cross-zone and cross-domain attacks.</span></span>  
  
- <span data-ttu-id="a0aea-125">Externí entity v definicích DTD můžou vést k útokům mezi zónami a mezi doménami.</span><span class="sxs-lookup"><span data-stu-id="a0aea-125">External entities in DTDs can result in cross-zone and cross-domain attacks.</span></span>  
  
- <span data-ttu-id="a0aea-126">Specifikace DTD jsou zranitelné kvůli útokům DOS (Denial of Service).</span><span class="sxs-lookup"><span data-stu-id="a0aea-126">DTDs are vulnerable to denial of service attacks.</span></span>  
  
- <span data-ttu-id="a0aea-127">Mimořádně hluboké dokumenty XML mohou představovat odepření problémů se službou. Možná budete chtít omezit hloubku dokumentů XML.</span><span class="sxs-lookup"><span data-stu-id="a0aea-127">Exceptionally deep XML documents can pose denial of service issues; you might want to limit the depth of XML documents.</span></span>  
  
- <span data-ttu-id="a0aea-128">Nepřijímejte podpůrné komponenty, jako jsou <xref:System.Xml.NameTable> , <xref:System.Xml.XmlNamespaceManager> a <xref:System.Xml.XmlResolver> objekty, z nedůvěryhodných sestavení.</span><span class="sxs-lookup"><span data-stu-id="a0aea-128">Do not accept supporting components, such as <xref:System.Xml.NameTable>, <xref:System.Xml.XmlNamespaceManager>, and <xref:System.Xml.XmlResolver> objects, from untrusted assemblies.</span></span>  
  
- <span data-ttu-id="a0aea-129">Umožňuje číst data v blocích a zmírnit tak útoky na velké dokumenty.</span><span class="sxs-lookup"><span data-stu-id="a0aea-129">Read data in chunks to mitigate large document attacks.</span></span>  
  
- <span data-ttu-id="a0aea-130">Bloky skriptu v šablonách stylů XSLT můžou vystavovat řadu útoků.</span><span class="sxs-lookup"><span data-stu-id="a0aea-130">Script blocks in XSLT style sheets can expose a number of attacks.</span></span>  
  
- <span data-ttu-id="a0aea-131">Než začnete vytvářet dynamické výrazy XPath, ověřte pečlivě.</span><span class="sxs-lookup"><span data-stu-id="a0aea-131">Validate carefully before constructing dynamic XPath expressions.</span></span>  
  
## <a name="linq-to-xml-security-issues"></a><span data-ttu-id="a0aea-132">Problémy se zabezpečením LINQ to XML</span><span class="sxs-lookup"><span data-stu-id="a0aea-132">LINQ to XML Security Issues</span></span>  
 <span data-ttu-id="a0aea-133">Problémy se zabezpečením v tomto tématu nejsou uvedeny v žádném konkrétním pořadí.</span><span class="sxs-lookup"><span data-stu-id="a0aea-133">The security issues in this topic are not presented in any particular order.</span></span> <span data-ttu-id="a0aea-134">Všechny problémy jsou důležité a měly by se řešit podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="a0aea-134">All issues are important and should be addressed as appropriate.</span></span>  
  
 <span data-ttu-id="a0aea-135">Po úspěšném zvýšení oprávnění útoků získá škodlivější sestavení lepší kontrolu nad jeho prostředím.</span><span class="sxs-lookup"><span data-stu-id="a0aea-135">A successful elevation of privilege attack gives a malicious assembly more control over its environment.</span></span> <span data-ttu-id="a0aea-136">Úspěšné zvýšení úrovně oprávnění může mít za následek zveřejnění dat, odmítnutí služby a další.</span><span class="sxs-lookup"><span data-stu-id="a0aea-136">A successful elevation of privilege attack can result in disclosure of data, denial of service, and more.</span></span>  
  
 <span data-ttu-id="a0aea-137">Aplikace by neměly vyzradit data uživatelům, kteří nemají oprávnění k zobrazení těchto dat.</span><span class="sxs-lookup"><span data-stu-id="a0aea-137">Applications should not disclose data to users who are not authorized to see that data.</span></span>  
  
 <span data-ttu-id="a0aea-138">Útoky na útok DOS způsobí, že analyzátor XML nebo LINQ to XML spotřebovat nadměrné množství paměti nebo času procesoru.</span><span class="sxs-lookup"><span data-stu-id="a0aea-138">Denial of service attacks cause the XML parser or LINQ to XML to consume excessive amounts of memory or CPU time.</span></span> <span data-ttu-id="a0aea-139">Útoky DoS (Denial of Service) se považují za méně závažnou než zvýšení úrovně oprávnění nebo odhalení útoků s daty.</span><span class="sxs-lookup"><span data-stu-id="a0aea-139">Denial of service attacks are considered to be less severe than elevation of privilege attacks or disclosure of data attacks.</span></span> <span data-ttu-id="a0aea-140">Jsou však důležité v situaci, kdy server potřebuje zpracovat dokumenty XML z nedůvěryhodných zdrojů.</span><span class="sxs-lookup"><span data-stu-id="a0aea-140">However, they are important in a scenario where a server needs to process XML documents from untrusted sources.</span></span>  
  
### <a name="exceptions-and-error-messages-might-reveal-data"></a><span data-ttu-id="a0aea-141">Výjimky a chybové zprávy můžou odhalit data.</span><span class="sxs-lookup"><span data-stu-id="a0aea-141">Exceptions and Error Messages Might Reveal Data</span></span>  
 <span data-ttu-id="a0aea-142">Popis chyby může odhalit data, jako jsou transformovaná data, názvy souborů nebo podrobnosti implementace.</span><span class="sxs-lookup"><span data-stu-id="a0aea-142">The description of an error might reveal data, such as the data being transformed, file names, or implementation details.</span></span> <span data-ttu-id="a0aea-143">Volajícím, kteří nejsou důvěryhodní, by neměly být vystavené chybové zprávy.</span><span class="sxs-lookup"><span data-stu-id="a0aea-143">Error messages should not be exposed to callers that are not trusted.</span></span> <span data-ttu-id="a0aea-144">Měli byste zachytit všechny chyby a ohlásit chyby s vlastními chybovými zprávami.</span><span class="sxs-lookup"><span data-stu-id="a0aea-144">You should catch all errors and report errors with your own custom error messages.</span></span>  
  
### <a name="do-not-call-codeaccesspermissionsassert-in-an-event-handler"></a><span data-ttu-id="a0aea-145">Nevolejte CodeAccessPermissions. Assert v obslužné rutině události</span><span class="sxs-lookup"><span data-stu-id="a0aea-145">Do Not Call CodeAccessPermissions.Assert in an Event Handler</span></span>  
 <span data-ttu-id="a0aea-146">Sestavení může mít méně nebo více oprávnění.</span><span class="sxs-lookup"><span data-stu-id="a0aea-146">An assembly can have lesser or greater permissions.</span></span> <span data-ttu-id="a0aea-147">Sestavení, které má větší oprávnění, má větší kontrolu nad počítačem a jeho prostředími.</span><span class="sxs-lookup"><span data-stu-id="a0aea-147">An assembly that has greater permissions has greater control over the computer and its environments.</span></span>  
  
 <span data-ttu-id="a0aea-148">Pokud kód v sestavení s větším oprávněním volá <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> v obslužné rutině události a poté je strom XML předán škodlivému sestavení, které má omezená oprávnění, může škodlivá sestavení způsobit vyvolání události.</span><span class="sxs-lookup"><span data-stu-id="a0aea-148">If code in an assembly with greater permissions calls <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler, and then the XML tree is passed to a malicious assembly that has restricted permissions, the malicious assembly can cause an event to be raised.</span></span> <span data-ttu-id="a0aea-149">Vzhledem k tomu, že událost spouští kód, který je v sestavení s větším oprávněním, pak by škodlivá sestavení byla provozována se zvýšenými oprávněními.</span><span class="sxs-lookup"><span data-stu-id="a0aea-149">Because the event runs code that is in the assembly with greater permissions, the malicious assembly would then be operating with elevated privileges.</span></span>  
  
 <span data-ttu-id="a0aea-150">Společnost Microsoft doporučuje, abyste nikdy nevolali <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> v obslužné rutině události.</span><span class="sxs-lookup"><span data-stu-id="a0aea-150">Microsoft recommends that you never call <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler.</span></span>  
  
### <a name="dtds-are-not-secure"></a><span data-ttu-id="a0aea-151">Soubory DTD nejsou zabezpečené</span><span class="sxs-lookup"><span data-stu-id="a0aea-151">DTDs are Not Secure</span></span>  
 <span data-ttu-id="a0aea-152">Entity v definicích DTD jsou ze své podstaty nezabezpečené.</span><span class="sxs-lookup"><span data-stu-id="a0aea-152">Entities in DTDs are inherently not secure.</span></span> <span data-ttu-id="a0aea-153">V případě škodlivého dokumentu XML, který obsahuje DTD, je možné, že analyzátor bude používat veškerou paměť a čas procesoru, což by způsobilo útok na útok DoS (Denial of Service).</span><span class="sxs-lookup"><span data-stu-id="a0aea-153">It is possible for a malicious XML document that contains a DTD to cause the parser to use all memory and CPU time, causing a denial of service attack.</span></span> <span data-ttu-id="a0aea-154">Proto je v LINQ to XML zpracování DTD ve výchozím nastavení vypnuté.</span><span class="sxs-lookup"><span data-stu-id="a0aea-154">Therefore, in LINQ to XML, DTD processing is turned off by default.</span></span> <span data-ttu-id="a0aea-155">Nepřijímáte specifikace DTD z nedůvěryhodných zdrojů.</span><span class="sxs-lookup"><span data-stu-id="a0aea-155">You should not accept DTDs from untrusted sources.</span></span>  
  
 <span data-ttu-id="a0aea-156">Jedním z příkladů přijetí souborů DTD z nedůvěryhodných zdrojů je webová aplikace, která umožňuje webovým uživatelům odeslat soubor XML, který odkazuje na DTD a soubor DTD.</span><span class="sxs-lookup"><span data-stu-id="a0aea-156">One example of accepting DTDs from untrusted sources is a Web application that allows Web users to upload an XML file that references a DTD and a DTD file.</span></span> <span data-ttu-id="a0aea-157">Po ověření souboru může škodlivá deklarace DTD na vašem serveru spustit útok na útok DoS (Denial of Service).</span><span class="sxs-lookup"><span data-stu-id="a0aea-157">Upon validation of the file, a malicious DTD could execute a denial of service attack on your server.</span></span> <span data-ttu-id="a0aea-158">Dalším příkladem přijetí souborů DTD z nedůvěryhodných zdrojů je odkazování na DTD v síťové sdílené složce, který taky povoluje anonymní přístup FTP.</span><span class="sxs-lookup"><span data-stu-id="a0aea-158">Another example of accepting DTDs from untrusted sources is to reference a DTD on a network share that also allows anonymous FTP access.</span></span>  
  
### <a name="avoid-excessive-buffer-allocation"></a><span data-ttu-id="a0aea-159">Vyhnout se nadměrnému přidělení vyrovnávací paměti</span><span class="sxs-lookup"><span data-stu-id="a0aea-159">Avoid Excessive Buffer Allocation</span></span>  
 <span data-ttu-id="a0aea-160">Vývojáři aplikací by měli vědět, že extrémně velké zdroje dat můžou vést k vyčerpání prostředků a útokům na dostupnost služby.</span><span class="sxs-lookup"><span data-stu-id="a0aea-160">Application developers should be aware that extremely large data sources can lead to resource exhaustion and denial of service attacks.</span></span>  
  
 <span data-ttu-id="a0aea-161">Pokud uživatel se zlými úmysly odesílá nebo nahraje velmi velký dokument XML, může to způsobit, že LINQ to XML spotřebovat nadměrné systémové prostředky.</span><span class="sxs-lookup"><span data-stu-id="a0aea-161">If a malicious user submits or uploads a very large XML document, it could cause LINQ to XML to consume excessive system resources.</span></span> <span data-ttu-id="a0aea-162">To může znamenat útok na útok DoS (Denial of Service).</span><span class="sxs-lookup"><span data-stu-id="a0aea-162">This can constitute a denial of service attack.</span></span> <span data-ttu-id="a0aea-163">Chcete-li tomu zabránit, můžete nastavit <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> vlastnost a vytvořit čtecí modul, který je pak omezen velikostí dokumentu, který může načíst.</span><span class="sxs-lookup"><span data-stu-id="a0aea-163">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> property, and create a reader that is then limited in the size of document that it can load.</span></span> <span data-ttu-id="a0aea-164">Pak pomocí čtecího zařízení vytvoříte strom XML.</span><span class="sxs-lookup"><span data-stu-id="a0aea-164">You then use the reader to create the XML tree.</span></span>  
  
 <span data-ttu-id="a0aea-165">Pokud například víte, že maximální očekávaná velikost dokumentů XML přicházejících z nedůvěryhodného zdroje bude menší než 50 tis bajtů, nastavte <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> na 100 000.</span><span class="sxs-lookup"><span data-stu-id="a0aea-165">For example, if you know that the maximum expected size of your XML documents coming from an untrusted source will be less than 50K bytes, set <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> to 100,000.</span></span> <span data-ttu-id="a0aea-166">Encumber se tím, že se vaše zpracování dokumentů XML neprojeví a zároveň se tím sníží hrozby útoku DOS, kde mohou být nahrány dokumenty, které spotřebují velké objemy paměti.</span><span class="sxs-lookup"><span data-stu-id="a0aea-166">This will not encumber your processing of XML documents, and at the same time it will mitigate denial of service threats where documents might be uploaded that would consume large amounts of memory.</span></span>  
  
### <a name="avoid-excess-entity-expansion"></a><span data-ttu-id="a0aea-167">Vyhnout se nadměrnému rozšíření entit</span><span class="sxs-lookup"><span data-stu-id="a0aea-167">Avoid Excess Entity Expansion</span></span>  
 <span data-ttu-id="a0aea-168">Jedním ze známých útoků DOS (Denial of Service) při použití DTD je dokument, který způsobuje nadměrné rozšíření entit.</span><span class="sxs-lookup"><span data-stu-id="a0aea-168">One of the known denial of service attacks when using a DTD is a document that causes excessive entity expansion.</span></span> <span data-ttu-id="a0aea-169">Chcete-li tomu zabránit, můžete nastavit <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> vlastnost a vytvořit čtecí modul, který je poté omezen počtem znaků, které jsou výsledkem rozšíření entity.</span><span class="sxs-lookup"><span data-stu-id="a0aea-169">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> property, and create a reader that is then limited in the number of characters that result from entity expansion.</span></span> <span data-ttu-id="a0aea-170">Pak pomocí čtecího zařízení vytvoříte strom XML.</span><span class="sxs-lookup"><span data-stu-id="a0aea-170">You then use the reader to create the XML tree.</span></span>  
  
### <a name="limit-the-depth-of-the-xml-hierarchy"></a><span data-ttu-id="a0aea-171">Omezit hloubku hierarchie XML</span><span class="sxs-lookup"><span data-stu-id="a0aea-171">Limit the Depth of the XML Hierarchy</span></span>  
 <span data-ttu-id="a0aea-172">Jedním z možných útoků DOS (Denial of Service) je odeslání dokumentu, který má nadměrnou hloubku hierarchie.</span><span class="sxs-lookup"><span data-stu-id="a0aea-172">One possible denial of service attack is when a document is submitted that has excessive depth of hierarchy.</span></span> <span data-ttu-id="a0aea-173">Chcete-li tomu zabránit, můžete zabalit do <xref:System.Xml.XmlReader> vlastní třídy, která počítá hloubku prvků.</span><span class="sxs-lookup"><span data-stu-id="a0aea-173">To prevent this, you can wrap a <xref:System.Xml.XmlReader> in your own class that counts the depth of elements.</span></span> <span data-ttu-id="a0aea-174">Pokud hloubka překročí předem stanovenou rozumnou úroveň, můžete ukončit zpracování škodlivého dokumentu.</span><span class="sxs-lookup"><span data-stu-id="a0aea-174">If the depth exceeds a predetermined reasonable level, you can terminate the processing of the malicious document.</span></span>  
  
### <a name="protect-against-untrusted-xmlreader-or-xmlwriter-implementations"></a><span data-ttu-id="a0aea-175">Chránit před nedůvěryhodnými implementacemi XmlReader nebo XmlWriter</span><span class="sxs-lookup"><span data-stu-id="a0aea-175">Protect Against Untrusted XmlReader or XmlWriter Implementations</span></span>  
 <span data-ttu-id="a0aea-176">Správci by měli ověřit, že všechny externě dodávané <xref:System.Xml.XmlReader> nebo <xref:System.Xml.XmlWriter> implementace mají silné názvy a jsou zaregistrované v konfiguraci počítače.</span><span class="sxs-lookup"><span data-stu-id="a0aea-176">Administrators should verify that any externally supplied <xref:System.Xml.XmlReader> or <xref:System.Xml.XmlWriter> implementations have strong names and have been registered in the machine configuration.</span></span> <span data-ttu-id="a0aea-177">Tím se zabrání načtení škodlivého kódu jako čtecí modul nebo zapisovač.</span><span class="sxs-lookup"><span data-stu-id="a0aea-177">This prevents malicious code masquerading as a reader or writer from being loaded.</span></span>  
  
### <a name="periodically-free-objects-that-reference-xname"></a><span data-ttu-id="a0aea-178">Periodické bezplatné objekty, které odkazují na XName</span><span class="sxs-lookup"><span data-stu-id="a0aea-178">Periodically Free Objects that Reference XName</span></span>  
 <span data-ttu-id="a0aea-179">Pro ochranu proti určitým druhům útoků by Programátori aplikací měli v pravidelných intervalech uvolnit všechny objekty, které odkazují na <xref:System.Xml.Linq.XName> objekt v doméně aplikace.</span><span class="sxs-lookup"><span data-stu-id="a0aea-179">To protect against certain kinds of attacks, application programmers should free all objects that reference an <xref:System.Xml.Linq.XName> object in the application domain on a regular basis.</span></span>  
  
### <a name="protect-against-random-xml-names"></a><span data-ttu-id="a0aea-180">Ochrana proti náhodným názvům XML</span><span class="sxs-lookup"><span data-stu-id="a0aea-180">Protect Against Random XML Names</span></span>  
 <span data-ttu-id="a0aea-181">Aplikace, které přijímají data z nedůvěryhodných zdrojů, by měly zvážit použití <xref:System.Xml.XmlReader> , který je zabalen do vlastního kódu, aby zkontroloval možnost náhodných názvů XML a oborů názvů.</span><span class="sxs-lookup"><span data-stu-id="a0aea-181">Applications that take data from untrusted sources should consider using an <xref:System.Xml.XmlReader> that is wrapped in custom code to inspect for the possibility of random XML names and namespaces.</span></span> <span data-ttu-id="a0aea-182">Pokud jsou zjištěny tyto náhodné názvy XML a obory názvů, může aplikace ukončit zpracování škodlivého dokumentu.</span><span class="sxs-lookup"><span data-stu-id="a0aea-182">If such random XML names and namespaces are detected, the application can then terminate the processing of the malicious document.</span></span>  
  
 <span data-ttu-id="a0aea-183">Můžete chtít omezit počet názvů v libovolném daném oboru názvů (včetně názvů v žádném oboru názvů) na rozumný limit.</span><span class="sxs-lookup"><span data-stu-id="a0aea-183">You might want to limit the number of names in any given namespace (including names in no namespace) to a reasonable limit.</span></span>  
  
### <a name="annotations-are-accessible-by-software-components-that-share-a-linq-to-xml-tree"></a><span data-ttu-id="a0aea-184">Poznámky jsou přístupné komponentami softwaru, které sdílejí strom LINQ to XML.</span><span class="sxs-lookup"><span data-stu-id="a0aea-184">Annotations Are Accessible by Software Components that Share a LINQ to XML Tree</span></span>  
 <span data-ttu-id="a0aea-185">LINQ to XML lze použít k sestavování zpracovávaných kanálů, ve kterých různé komponenty aplikace načítají, ověřují, dotazují, transformují, aktualizují a ukládají data XML, která jsou předána mezi komponentami jako stromy XML.</span><span class="sxs-lookup"><span data-stu-id="a0aea-185">LINQ to XML could be used to build processing pipelines in which different application components load, validate, query, transform, update, and save XML data that is passed between components as XML trees.</span></span> <span data-ttu-id="a0aea-186">To může přispět k optimalizaci výkonu, protože režie načítání a serializace objektů do textu XML je provedena pouze na koncích kanálu.</span><span class="sxs-lookup"><span data-stu-id="a0aea-186">This can help optimize performance, because the overhead of loading and serializing objects to XML text is done only at the ends of the pipeline.</span></span> <span data-ttu-id="a0aea-187">Vývojáři si ale musí být vědomi, že všechny poznámky a obslužné rutiny událostí, které vytvořila jedna součást, jsou přístupné pro jiné komponenty.</span><span class="sxs-lookup"><span data-stu-id="a0aea-187">Developers must be aware, however, that all annotations and event handlers created by one component are accessible to other components.</span></span> <span data-ttu-id="a0aea-188">To může vytvořit několik ohrožení zabezpečení, pokud komponenty mají různé úrovně důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="a0aea-188">This can create a number of vulnerabilities if the components have different levels of trust.</span></span> <span data-ttu-id="a0aea-189">Chcete-li vytvářet zabezpečené kanály napříč méně důvěryhodnými komponentami, je nutné před předáním dat do nedůvěryhodné součásti serializovat objekty LINQ to XML do textu XML.</span><span class="sxs-lookup"><span data-stu-id="a0aea-189">To build secure pipelines across less trusted components, you must serialize LINQ to XML objects to XML text before passing the data to an untrusted component.</span></span>  
  
 <span data-ttu-id="a0aea-190">Určité zabezpečení je zajištěno modulem CLR (Common Language Runtime).</span><span class="sxs-lookup"><span data-stu-id="a0aea-190">Some security is provided by the common language runtime (CLR).</span></span> <span data-ttu-id="a0aea-191">Například komponenta, která nezahrnuje soukromou třídu, nemůže přistupovat k poznámkám, které tato třída používá.</span><span class="sxs-lookup"><span data-stu-id="a0aea-191">For example, a component that does not include a private class cannot access annotations keyed by that class.</span></span> <span data-ttu-id="a0aea-192">Poznámky však lze odstranit komponentami, které je nemohou číst.</span><span class="sxs-lookup"><span data-stu-id="a0aea-192">However, annotations can be deleted by components that cannot read them.</span></span> <span data-ttu-id="a0aea-193">Tento způsob se dá použít jako útok na manipulaci.</span><span class="sxs-lookup"><span data-stu-id="a0aea-193">This could be used as a tampering attack.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a0aea-194">Viz také</span><span class="sxs-lookup"><span data-stu-id="a0aea-194">See also</span></span>

- [<span data-ttu-id="a0aea-195">Průvodce programováním (LINQ to XML) (C#)</span><span class="sxs-lookup"><span data-stu-id="a0aea-195">Programming Guide (LINQ to XML) (C#)</span></span>](linq-to-xml-overview.md)
