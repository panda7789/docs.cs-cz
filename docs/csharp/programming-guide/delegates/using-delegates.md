---
title: Použití delegátů – průvodce programováním jazyka C#
ms.date: 07/20/2015
helpviewer_keywords:
- delegates [C#], how to use
ms.assetid: 99a2fc27-a32e-4a34-921c-e65497520eec
ms.openlocfilehash: dcc73aba738d6296a44c48aad8b66cd6fc7f4a7b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/14/2020
ms.locfileid: "77448436"
---
# <a name="using-delegates-c-programming-guide"></a><span data-ttu-id="45269-102">Použití delegátů (Průvodce programováním v C#)</span><span class="sxs-lookup"><span data-stu-id="45269-102">Using Delegates (C# Programming Guide)</span></span>

<span data-ttu-id="45269-103">[Delegát](../../language-reference/builtin-types/reference-types.md) je typ, který bezpečně zapouzdřuje metodu, podobně jako ukazatel funkce v jazyce C a C++.</span><span class="sxs-lookup"><span data-stu-id="45269-103">A [delegate](../../language-reference/builtin-types/reference-types.md) is a type that safely encapsulates a method, similar to a function pointer in C and C++.</span></span> <span data-ttu-id="45269-104">Na rozdíl od ukazatele funkce Jazyka C jsou delegáti objektově orientovaní, typově bezpečné a zabezpečené.</span><span class="sxs-lookup"><span data-stu-id="45269-104">Unlike C function pointers, delegates are object-oriented, type safe, and secure.</span></span> <span data-ttu-id="45269-105">Typ delegáta je definován jménem delegáta.</span><span class="sxs-lookup"><span data-stu-id="45269-105">The type of a delegate is defined by the name of the delegate.</span></span> <span data-ttu-id="45269-106">Následující příklad deklaruje delegáta s názvem, `Del` který může zapouzdřit metodu, která bere [řetězec](../../language-reference/builtin-types/reference-types.md) jako argument a vrátí [void](../../language-reference/builtin-types/void.md):</span><span class="sxs-lookup"><span data-stu-id="45269-106">The following example declares a delegate named `Del` that can encapsulate a method that takes a [string](../../language-reference/builtin-types/reference-types.md) as an argument and returns [void](../../language-reference/builtin-types/void.md):</span></span>

[!code-csharp[csProgGuideDelegates#21](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#21)]

<span data-ttu-id="45269-107">Objekt delegáta je obvykle vytvořen zadáním názvu metody, kterou delegát zalomí, nebo [s anonymní funkcí](../statements-expressions-operators/anonymous-functions.md).</span><span class="sxs-lookup"><span data-stu-id="45269-107">A delegate object is normally constructed by providing the name of the method the delegate will wrap, or with an [anonymous function](../statements-expressions-operators/anonymous-functions.md).</span></span> <span data-ttu-id="45269-108">Jakmile delegát je vytvořena instance, volání metody delegáta bude předándelegát emitované této metody.</span><span class="sxs-lookup"><span data-stu-id="45269-108">Once a delegate is instantiated, a method call made to the delegate will be passed by the delegate to that method.</span></span> <span data-ttu-id="45269-109">Parametry předané delegátovi volajícím jsou předány metodě a vrácená hodnota, pokud existuje, z metody je vrácena volajícímu delegátem.</span><span class="sxs-lookup"><span data-stu-id="45269-109">The parameters passed to the delegate by the caller are passed to the method, and the return value, if any, from the method is returned to the caller by the delegate.</span></span> <span data-ttu-id="45269-110">To se označuje jako vyvolání delegáta.</span><span class="sxs-lookup"><span data-stu-id="45269-110">This is known as invoking the delegate.</span></span> <span data-ttu-id="45269-111">Instance delegáta může být vyvolána, jako kdyby se jednalo o zabalené metody samotné.</span><span class="sxs-lookup"><span data-stu-id="45269-111">An instantiated delegate can be invoked as if it were the wrapped method itself.</span></span> <span data-ttu-id="45269-112">Například:</span><span class="sxs-lookup"><span data-stu-id="45269-112">For example:</span></span>

[!code-csharp[csProgGuideDelegates#22](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#22)]  

[!code-csharp[csProgGuideDelegates#23](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#23)]

<span data-ttu-id="45269-113">Typy delegátů jsou odvozeny z třídy <xref:System.Delegate> v rozhraní .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="45269-113">Delegate types are derived from the <xref:System.Delegate> class in the .NET Framework.</span></span> <span data-ttu-id="45269-114">Typy delegátů jsou [zapečetěné](../../language-reference/keywords/sealed.md)– nelze je odvodit – <xref:System.Delegate>a není možné odvodit vlastní třídy z .</span><span class="sxs-lookup"><span data-stu-id="45269-114">Delegate types are [sealed](../../language-reference/keywords/sealed.md)—they cannot be derived from— and it is not possible to derive custom classes from <xref:System.Delegate>.</span></span> <span data-ttu-id="45269-115">Vzhledem k tomu, že instanciovaný delegát je objekt, může být předán jako parametr nebo přiřazen k vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="45269-115">Because the instantiated delegate is an object, it can be passed as a parameter, or assigned to a property.</span></span> <span data-ttu-id="45269-116">To umožňuje metodu přijmout delegáta jako parametr a volat delegáta později.</span><span class="sxs-lookup"><span data-stu-id="45269-116">This allows a method to accept a delegate as a parameter, and call the delegate at some later time.</span></span> <span data-ttu-id="45269-117">To se označuje jako asynchronní zpětné volání a je běžnou metodou upozornění volajícího po dokončení dlouhého procesu.</span><span class="sxs-lookup"><span data-stu-id="45269-117">This is known as an asynchronous callback, and is a common method of notifying a caller when a long process has completed.</span></span> <span data-ttu-id="45269-118">Při použití delegáta tímto způsobem kód pomocí delegáta nepotřebuje žádné znalosti o implementaci metody, která se používá.</span><span class="sxs-lookup"><span data-stu-id="45269-118">When a delegate is used in this fashion, the code using the delegate does not need any knowledge of the implementation of the method being used.</span></span> <span data-ttu-id="45269-119">Funkce je podobná zapouzdření rozhraní poskytují.</span><span class="sxs-lookup"><span data-stu-id="45269-119">The functionality is similar to the encapsulation interfaces provide.</span></span>

<span data-ttu-id="45269-120">Dalším běžným použitím zpětných volání je definování vlastní metody porovnání a předání tohoto delegáta metodě řazení.</span><span class="sxs-lookup"><span data-stu-id="45269-120">Another common use of callbacks is defining a custom comparison method and passing that delegate to a sort method.</span></span> <span data-ttu-id="45269-121">Umožňuje kódu volajícího, aby se stal součástí algoritmu řazení.</span><span class="sxs-lookup"><span data-stu-id="45269-121">It allows the caller's code to become part of the sort algorithm.</span></span> <span data-ttu-id="45269-122">Následující příklad metody `Del` používá typ jako parametr:</span><span class="sxs-lookup"><span data-stu-id="45269-122">The following example method uses the `Del` type as a parameter:</span></span>

[!code-csharp[csProgGuideDelegates#24](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#24)]

<span data-ttu-id="45269-123">Potom můžete předat delegáta vytvořenévýše této metodě:</span><span class="sxs-lookup"><span data-stu-id="45269-123">You can then pass the delegate created above to that method:</span></span>

[!code-csharp[csProgGuideDelegates#25](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#25)]

<span data-ttu-id="45269-124">a obdržíte následující výstup do konzoly:</span><span class="sxs-lookup"><span data-stu-id="45269-124">and receive the following output to the console:</span></span>

```console
The number is: 3
```

<span data-ttu-id="45269-125">Použití delegáta jako `MethodWithCallback` abstrakce, není nutné volat konzoly přímo – nemusí být navržen s konzolou v mysli.</span><span class="sxs-lookup"><span data-stu-id="45269-125">Using the delegate as an abstraction, `MethodWithCallback` does not need to call the console directly—it does not have to be designed with a console in mind.</span></span> <span data-ttu-id="45269-126">Co `MethodWithCallback` dělá, je jednoduše připravit řetězec a předat řetězec do jiné metody.</span><span class="sxs-lookup"><span data-stu-id="45269-126">What `MethodWithCallback` does is simply prepare a string and pass the string to another method.</span></span> <span data-ttu-id="45269-127">To je obzvláště výkonné, protože delegovaná metoda může použít libovolný počet parametrů.</span><span class="sxs-lookup"><span data-stu-id="45269-127">This is especially powerful since a delegated method can use any number of parameters.</span></span>

<span data-ttu-id="45269-128">Když delegát je vytvořen k obtékání metody instance, delegát odkazuje na instanci i metodu.</span><span class="sxs-lookup"><span data-stu-id="45269-128">When a delegate is constructed to wrap an instance method, the delegate references both the instance and the method.</span></span> <span data-ttu-id="45269-129">Delegát nemá žádné znalosti typu instance kromě metody, kterou zabalí, takže delegát může odkazovat na libovolný typ objektu, pokud je metoda na tento objekt, který odpovídá podpisdelegáta.</span><span class="sxs-lookup"><span data-stu-id="45269-129">A delegate has no knowledge of the instance type aside from the method it wraps, so a delegate can refer to any type of object as long as there is a method on that object that matches the delegate signature.</span></span> <span data-ttu-id="45269-130">Když delegát je konstruována tak, aby zalamovala statickou metodu, odkazuje pouze na metodu.</span><span class="sxs-lookup"><span data-stu-id="45269-130">When a delegate is constructed to wrap a static method, it only references the method.</span></span> <span data-ttu-id="45269-131">Vezměte v úvahu následující deklarace:</span><span class="sxs-lookup"><span data-stu-id="45269-131">Consider the following declarations:</span></span>

[!code-csharp[csProgGuideDelegates#26](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#26)]

<span data-ttu-id="45269-132">Spolu s `DelegateMethod` dříve zobrazené statické, nyní máme tři metody, které mohou být zabaleny `Del` instance.</span><span class="sxs-lookup"><span data-stu-id="45269-132">Along with the static `DelegateMethod` shown previously, we now have three methods that can be wrapped by a `Del` instance.</span></span>

<span data-ttu-id="45269-133">Delegát může volat více než jednu metodu při vyvolání.</span><span class="sxs-lookup"><span data-stu-id="45269-133">A delegate can call more than one method when invoked.</span></span> <span data-ttu-id="45269-134">To se označuje jako vícesměrové vysílání.</span><span class="sxs-lookup"><span data-stu-id="45269-134">This is referred to as multicasting.</span></span> <span data-ttu-id="45269-135">Chcete-li přidat další metodu do seznamu delegáta metody – seznam vyvolání – jednoduše vyžaduje přidání dvou delegátů pomocí operátory sčítání nebo sčítání přiřazení ('+' nebo '+=').</span><span class="sxs-lookup"><span data-stu-id="45269-135">To add an extra method to the delegate's list of methods—the invocation list—simply requires adding two delegates using the addition or addition assignment operators ('+' or '+=').</span></span> <span data-ttu-id="45269-136">Například:</span><span class="sxs-lookup"><span data-stu-id="45269-136">For example:</span></span>

[!code-csharp[csProgGuideDelegates#27](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#27)]

<span data-ttu-id="45269-137">V tomto `allMethodsDelegate` okamžiku obsahuje tři metody`Method1`v `Method2`jeho `DelegateMethod`seznamu vyvolání– , , a .</span><span class="sxs-lookup"><span data-stu-id="45269-137">At this point `allMethodsDelegate` contains three methods in its invocation list—`Method1`, `Method2`, and `DelegateMethod`.</span></span> <span data-ttu-id="45269-138">Původní tři delegáti `d2`, `d3` `d1`, a , zůstávají beze změny.</span><span class="sxs-lookup"><span data-stu-id="45269-138">The original three delegates, `d1`, `d2`, and `d3`, remain unchanged.</span></span> <span data-ttu-id="45269-139">Při `allMethodsDelegate` vyvolání jsou všechny tři metody volány v pořadí.</span><span class="sxs-lookup"><span data-stu-id="45269-139">When `allMethodsDelegate` is invoked, all three methods are called in order.</span></span> <span data-ttu-id="45269-140">Pokud delegát používá referenční parametry, odkaz je předán postupně na každou ze tří metod v pořadí a všechny změny jednou metodou jsou viditelné pro další metodu.</span><span class="sxs-lookup"><span data-stu-id="45269-140">If the delegate uses reference parameters, the reference is passed sequentially to each of the three methods in turn, and any changes by one method are visible to the next method.</span></span> <span data-ttu-id="45269-141">Pokud některá z metod vyvolá výjimku, která není zachycena v rámci metody, tato výjimka je předána volajícímu delegáta a nejsou volány žádné následné metody v seznamu vyvolání.</span><span class="sxs-lookup"><span data-stu-id="45269-141">When any of the methods throws an exception that is not caught within the method, that exception is passed to the caller of the delegate and no subsequent methods in the invocation list are called.</span></span> <span data-ttu-id="45269-142">Pokud delegát má návratovou hodnotu nebo out parametry, vrátí vrácenou hodnotu a parametry poslední volanou metodu.</span><span class="sxs-lookup"><span data-stu-id="45269-142">If the delegate has a return value and/or out parameters, it returns the return value and parameters of the last method invoked.</span></span> <span data-ttu-id="45269-143">Chcete-li odebrat metodu ze seznamu vyvolání, použijte`-` [operátory přiřazení odčítání nebo odčítání](../../language-reference/operators/subtraction-operator.md) ( nebo `-=`).</span><span class="sxs-lookup"><span data-stu-id="45269-143">To remove a method from the invocation list, use the [subtraction or subtraction assignment operators](../../language-reference/operators/subtraction-operator.md) (`-` or `-=`).</span></span> <span data-ttu-id="45269-144">Například:</span><span class="sxs-lookup"><span data-stu-id="45269-144">For example:</span></span>

[!code-csharp[csProgGuideDelegates#28](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#28)]

<span data-ttu-id="45269-145">Vzhledem k tomu, `System.Delegate`že typy delegátů jsou odvozeny z , metody a vlastnosti definované této třídy lze volat na delegáta.</span><span class="sxs-lookup"><span data-stu-id="45269-145">Because delegate types are derived from `System.Delegate`, the methods and properties defined by that class can be called on the delegate.</span></span> <span data-ttu-id="45269-146">Chcete-li například najít počet metod v seznamu vyvolání delegáta, můžete napsat:</span><span class="sxs-lookup"><span data-stu-id="45269-146">For example, to find the number of methods in a delegate's invocation list, you may write:</span></span>

[!code-csharp[csProgGuideDelegates#29](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#29)]

<span data-ttu-id="45269-147">Delegáti s více než jednou metodou <xref:System.MulticastDelegate>v seznamu vyvolání `System.Delegate`jsou odvozeni z , což je podtřída .</span><span class="sxs-lookup"><span data-stu-id="45269-147">Delegates with more than one method in their invocation list derive from <xref:System.MulticastDelegate>, which is a subclass of `System.Delegate`.</span></span> <span data-ttu-id="45269-148">Výše uvedený kód funguje v obou `GetInvocationList`případech, protože obě třídy podporují .</span><span class="sxs-lookup"><span data-stu-id="45269-148">The above code works in either case because both classes support `GetInvocationList`.</span></span>

<span data-ttu-id="45269-149">Vícesměrové vysílání delegátů se používají ve velké míře v zpracování událostí.</span><span class="sxs-lookup"><span data-stu-id="45269-149">Multicast delegates are used extensively in event handling.</span></span> <span data-ttu-id="45269-150">Objekty zdroje událostí odesílají oznámení o událostech příjemcům objektům, které se zaregistrovaly k přijetí této události.</span><span class="sxs-lookup"><span data-stu-id="45269-150">Event source objects send event notifications to recipient objects that have registered to receive that event.</span></span> <span data-ttu-id="45269-151">Chcete-li se zaregistrovat pro událost, příjemce vytvoří metodu určenou ke zpracování události, pak vytvoří delegáta pro tuto metodu a předá delegáta zdroji události.</span><span class="sxs-lookup"><span data-stu-id="45269-151">To register for an event, the recipient creates a method designed to handle the event, then creates a delegate for that method and passes the delegate to the event source.</span></span> <span data-ttu-id="45269-152">Zdroj volá delegáta, když dojde k události.</span><span class="sxs-lookup"><span data-stu-id="45269-152">The source calls the delegate when the event occurs.</span></span> <span data-ttu-id="45269-153">Delegát pak volá metodu zpracování událostí na příjemce, doručení dat události.</span><span class="sxs-lookup"><span data-stu-id="45269-153">The delegate then calls the event handling method on the recipient, delivering the event data.</span></span> <span data-ttu-id="45269-154">Typ delegáta pro danou událost je definován zdrojem události.</span><span class="sxs-lookup"><span data-stu-id="45269-154">The delegate type for a given event is defined by the event source.</span></span> <span data-ttu-id="45269-155">Další informace naleznete v [tématu Události](../events/index.md).</span><span class="sxs-lookup"><span data-stu-id="45269-155">For more, see [Events](../events/index.md).</span></span>

<span data-ttu-id="45269-156">Porovnání delegátů dvou různých typů přiřazených v době kompilace bude mít za následek chybu kompilace.</span><span class="sxs-lookup"><span data-stu-id="45269-156">Comparing delegates of two different types assigned at compile-time will result in a compilation error.</span></span> <span data-ttu-id="45269-157">Pokud instance delegáta jsou staticky `System.Delegate`typu , pak porovnání je povoleno, ale vrátí false za běhu.</span><span class="sxs-lookup"><span data-stu-id="45269-157">If the delegate instances are statically of the type `System.Delegate`, then the comparison is allowed, but will return false at run time.</span></span> <span data-ttu-id="45269-158">Například:</span><span class="sxs-lookup"><span data-stu-id="45269-158">For example:</span></span>

[!code-csharp[csProgGuideDelegates#30](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#30)]

## <a name="see-also"></a><span data-ttu-id="45269-159">Viz také</span><span class="sxs-lookup"><span data-stu-id="45269-159">See also</span></span>

- [<span data-ttu-id="45269-160">Programovací příručka jazyka C#</span><span class="sxs-lookup"><span data-stu-id="45269-160">C# Programming Guide</span></span>](../index.md)
- [<span data-ttu-id="45269-161">Delegáty</span><span class="sxs-lookup"><span data-stu-id="45269-161">Delegates</span></span>](./index.md)
- [<span data-ttu-id="45269-162">Použití odchylek v delegátech</span><span class="sxs-lookup"><span data-stu-id="45269-162">Using Variance in Delegates</span></span>](../concepts/covariance-contravariance/using-variance-in-delegates.md)
- [<span data-ttu-id="45269-163">Odchylky v delegátech</span><span class="sxs-lookup"><span data-stu-id="45269-163">Variance in Delegates</span></span>](../concepts/covariance-contravariance/variance-in-delegates.md)
- [<span data-ttu-id="45269-164">Použití odchylek pro obecné delegáty Func a Action</span><span class="sxs-lookup"><span data-stu-id="45269-164">Using Variance for Func and Action Generic Delegates</span></span>](../concepts/covariance-contravariance/using-variance-for-func-and-action-generic-delegates.md)
- [<span data-ttu-id="45269-165">Akce</span><span class="sxs-lookup"><span data-stu-id="45269-165">Events</span></span>](../events/index.md)
