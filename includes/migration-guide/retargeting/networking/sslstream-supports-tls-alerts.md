### <a name="sslstream-supports-tls-alerts"></a>SslStream podporuje protokol TLS výstrah

|   |   |
|---|---|
|Podrobnosti|Po selhání handshake TLS <xref:System.IO.IOException?displayProperty=name> s vnitřní <xref:System.ComponentModel.Win32Exception?displayProperty=name> první operace vstupně-výstupních operací čtení a zápis, bude vyvolána výjimka. <xref:System.ComponentModel.Win32Exception.NativeErrorCode?displayProperty=name> Kód <xref:System.ComponentModel.Win32Exception?displayProperty=name> lze mapovat na protokol TLS výstrah z Vzdálená strana použití této funkce [dokumentaci zprostředkovatele Schannel](https://msdn.microsoft.com/library/windows/desktop/dd721886%28v=vs.85%29.aspx). Další informace najdete v tématu [RFC 2246: výstrahu chyby části 7.2.2](https://tools.ietf.org/html/rfc2246#section-7.2.2). <br/>Chování v rozhraní .NET Framework 4.6.2 a dříve je, že kanál přenosu (obvykle připojení TCP), vyprší časový limit při zápisu nebo čtení pokud druhé strany se nezdařilo ověření typu handshake a hned potom odmítl připojení.|
|Návrh|Volání aplikací síťové rozhraní API pro vstupně-výstupní operace, například <xref:System.IO.Stream.Read(System.Byte[],System.Int32,System.Int32)> / <xref:System.IO.Stream.Write(System.Byte[],System.Int32,System.Int32)> partnerova <xref:System.IO.IOException> nebo <xref:System.TimeoutException?displayProperty=name>.<br/>Protokol TLS výstrah funkce je povolená ve výchozím nastavení od verze rozhraní .NET Framework 4.7. Aplikace cílené na verzích rozhraní .NET Framework 4.0 prostřednictvím 4.6.2 běží na rozhraní .NET Framework 4.7 nebo novější systém bude mít tuto funkci zakázat, a zachovat kompatibilitu. <br/>Následující konfigurační rozhraní API je možné povolit nebo zakázat funkci pro rozhraní .NET Framework 4.6 a novějším aplikací spuštěných v rozhraní .NET Framework 4.7 nebo novějším.<ul><li>Prostřednictvím kódu programu:</li></ul>Musí být úplně první věcí, kterou aplikace dělá, protože třída ServicePointManager bude inicializovat jenom jednou:<pre><code class="lang-csharp">AppContext.SetSwitch(&quot;TestSwitch.LocalAppContext.DisableCaching&quot;, true);&#13;&#10;AppContext.SetSwitch(&quot;Switch.System.Net.DontEnableTlsAlerts&quot;, true); // Set to &#39;false&#39; to enable the feature in .NET Framework 4.6 - 4.6.2.&#13;&#10;</code></pre><ul><li>AppConfig:</li></ul><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Net.DontEnableTlsAlerts=true&quot;/&gt;&#13;&#10;&lt;!-- Set to &#39;false&#39; to enable the feature in .NET Framework 4.6 - 4.6.2. --&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><ul><li>Klíč registru (počítače globální):</li></ul>Nastavte hodnotu na <code>false</code> k povolení této funkce v rozhraní .NET Framework 4.6 – 4.6.2.<pre><code>Key = HKLM\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\AppContext\Switch.System.Net.DontEnableTlsAlerts&#13;&#10;Type = String&#13;&#10;Value = &quot;true&quot;&#13;&#10;</code></pre>|
|Rozsah|Edge|
|Version|4.7|
|Typ|Mění se cílení|
|Ovlivněné rozhraní API|<ul><li><xref:System.Net.Security.SslStream?displayProperty=nameWithType></li><li><xref:System.Net.WebRequest?displayProperty=nameWithType></li><li><xref:System.Net.HttpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.FtpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.Mail.SmtpClient?displayProperty=nameWithType></li><li><xref:System.Net.Http?displayProperty=nameWithType></li></ul>|

