---
ms.openlocfilehash: ddae1bfdd1a6f67bce111e0f97dd501c82022f36
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/15/2020
ms.locfileid: "72887753"
---
### <a name="new-64-bit-jit-compiler-in-the-net-framework-46"></a>Nový 64bitový kompilátor JIT v rozhraní .NET Framework 4.6

|   |   |
|---|---|
|Podrobnosti|Počínaje rozhraním .NET Framework 4.6 se pro kompilaci just-in-time používá nový 64bitový kompilátor JIT. V některých případech je vyvolána neočekávaná výjimka nebo je pozorováno jiné chování, než když je aplikace spuštěna pomocí 32bitového kompilátoru nebo staršího 64bitového kompilátoru JIT. Tato změna nemá vliv na 32bitový kompilátor JIT. Známé rozdíly zahrnují následující:<ul><li>Za určitých podmínek může operace <xref:System.NullReferenceException> rozbalení vyvolat sestavení v verzi se zapnutou optimalizací.</li><li>V některých případech provádění výrobního kódu v těle <xref:System.StackOverflowException>velké metody může vyvolat .</li><li>Za určitých podmínek struktury předané metodě jsou považovány za typy odkazů, nikoli jako typy hodnot v sestaveních release. Jedním z projevů tohoto problému je, že jednotlivé položky v kolekci se zobrazí v neočekávaném pořadí.</li><li>Za určitých <xref:System.UInt16> podmínek porovnání hodnot s jejich vysokou bitovou sadou je nesprávné, pokud je povolena optimalizace.</li><li>Za určitých podmínek, zejména při inicializaci hodnot pole, může inicializace paměti inicializací <xref:System.Reflection.Emit.OpCodes.Initblk?displayProperty=nameWithType> il inicializace s nesprávnou hodnotou. To může mít za následek neošetřené výjimky nebo nesprávný výstup.</li><li>Za určitých výjimečných podmínek podmíněný <xref:System.Boolean> bitový test může vrátit nesprávnou hodnotu nebo vyvolat výjimku, pokud jsou povoleny optimalizace kompilátoru.</li><li>Za určitých podmínek, <code>if</code> pokud příkaz se používá <code>try</code> k testování podmínky před <code>try</code> zadáním bloku a výstupu <code>catch</code> z <code>finally</code> bloku a stejné podmínky je vyhodnocena <code>if</code> v <code>catch</code> nebo <code>finally</code> bloku, nový 64bitový kompilátor JIT odebere podmínku z nebo bloku při optimalizaci kódu. V důsledku toho je <code>if</code> kód <code>catch</code> uvnitř <code>finally</code> příkazu v bloku nebo proveden bezpodmínečně.</li></ul>|
|Návrh|**Zmírnění známých problémů** <br/> Pokud narazíte na výše uvedené problémy, můžete je řešit některou z následujících akcí:<ul><li>Upgrade na rozhraní .NET Framework 4.6.2. Nový 64bitový kompilátor, který je součástí rozhraní .NET Framework 4.6.2, řeší každý z těchto známých problémů.</li><li>Spuštěním služby Windows Update zajistíte aktuálnost vaší verze systému Windows. Aktualizace služby rozhraní .NET Framework 4.6 a 4.6.1 <xref:System.NullReferenceException> řeší každý z těchto problémů s výjimkou operace rozbalení.</li><li>Kompilujte se starším 64bitovým kompilátorem JIT. Další informace o tom, jak to provést, naleznete v části **Zmírnění dalších problémů.**</li></ul>**Zmírnění dalších problémů** <br/> Pokud narazíte na jiný rozdíl v chování mezi kódem kompilovaným se starším 64bitovým kompilátorem a novým 64bitovým kompilátorem JIT nebo mezi ladicí mi a verzí aplikace, které jsou zkompilovány s novým 64bitovým kompilátorem JIT, můžete provést následující postup kompilace aplikace se starším 64bitovým kompilátorem JIT:<ul><li>V základě pro aplikaci můžete [<](~/docs/framework/configure-apps/file-schema/runtime/uselegacyjit-element.md) přidat prvek do konfiguračního souboru aplikace. Následující zakáže kompilaci s novým 64bitovým kompilátorem JIT a místo toho používá starší 64bitový kompilátor JIT.</li></ul><pre><code class="lang-xml">&lt;?xml version =&quot;1.0&quot;?&gt;&#13;&#10;&lt;configuration&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;useLegacyJit enabled=&quot;1&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre><ul><li>Na základě pro jednotlivé uživatele můžete <code>REG_DWORD</code> přidat <code>useLegacyJit</code> hodnotu pojmenovanou <code>HKEY_CURRENT_USER\SOFTWARE\Microsoft\.NETFramework</code> do klíče registru. Hodnota 1 umožňuje starší 64bitový kompilátor JIT; hodnota 0 zakáže a povolí nový 64bitový kompilátor JIT.</li><li>Na základě pro počítač můžete přidat <code>REG_DWORD</code> hodnotu <code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework</code> pojmenovanou <code>useLegacyJit</code> do klíče registru. Hodnota <code>1</code> umožňuje starší 64bitový kompilátor JIT; hodnota zakáže <code>0</code> a povolí nový 64bitový kompilátor JIT.</li></ul>Můžete nám také dát vědět o problému nahlášením chyby na [Microsoft Connect](https://connect.microsoft.com/VisualStudio).|
|Rozsah|Edge|
|Version|4.6|
|Typ|Změna cílení|
