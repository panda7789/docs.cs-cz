---
ms.openlocfilehash: 190bca720504535cb54e498ca8da23fbb6634ad4
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/15/2020
ms.locfileid: "67804593"
---
### <a name="currentculture-is-not-preserved-across-wpf-dispatcher-operations"></a>CurrentCulture není zachována v rámci operací WPF Dispečer

|   |   |
|---|---|
|Podrobnosti|Počínaje rozhraním .NET Framework <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> 4.6 <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> <xref:System.Windows.Threading.Dispatcher?displayProperty=name> budou na konci této operace dispečera ztraceny nebo provedené v rámci rozhraní .NET Framework. Podobně změny <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> nebo <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> mimo operaci Dispečera nemusí být projevené při provádění této operace. Prakticky řečeno, to <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> znamená, že a <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> změny nemusí tok mezi WPF ui zpětná volání a další kód v aplikaci WPF. To je způsobeno <xref:System.Threading.ExecutionContext?displayProperty=name> změnou, <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> která způsobuje a má být uložena v kontextu spuštění počínaje aplikacemi zaměřenými na rozhraní .NET Framework 4.6. WPF dispečer operace uložit kontext spuštění slouží k zahájení operace a obnovit předchozí kontext po dokončení operace. Vzhledem k tomu, <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> a <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> jsou nyní součástí tohoto kontextu, změny v rámci operace dispečera nejsou trvalé mimo operaci.|
|Návrh|Aplikace ovlivněné touto změnou může obejít <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> uložením požadované nebo v poli a vrácení všech těl operace dispečera <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> (včetně obslužné rutiny události uI), které jsou správné a jsou nastaveny. Alternativně vzhledem k tomu, že změna ExecutionContext, která je základem této změny WPF, ovlivňuje pouze aplikace zaměřené na rozhraní .NET Framework 4.6 nebo novější, lze této přestávce zabránit cílením na rozhraní .NET Framework 4.5.2.Apps, které cílí na rozhraní .NET Framework 4.6 nebo novější, mohou také fungovat nastavením následujícího přepínače kompatibility:<pre><code class="lang-csharp">AppContext.SetSwitch(&quot;Switch.System.Globalization.NoAsyncCurrentCulture&quot;, true);&#13;&#10;</code></pre>Tento problém byl opraven WPF v rozhraní .NET Framework 4.6.2. Byla také opravena v rozhraní .NET Frameworks 4.6, 4.6.1 až [KB 3139549](https://support.microsoft.com/kb/3139549). Aplikace zaměřené na rozhraní .NET Framework 4.6 nebo novější <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> / <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>automaticky získají správné chování v aplikacích WPF - ) budou zachovány v rámci operací dispečera.|
|Rozsah|Vedlejší|
|Version|4.6|
|Typ|Změna cílení|
