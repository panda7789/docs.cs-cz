---
ms.openlocfilehash: 36d05ddd407e28e363bb99eae5f0caab59b744dc
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/15/2020
ms.locfileid: "83435460"
---
### <a name="wpf-grid-allocation-of-space-to-star-columns"></a><span data-ttu-id="3d32a-101">Přidělování prostoru v mřížce WPF do hvězdiček – sloupce</span><span class="sxs-lookup"><span data-stu-id="3d32a-101">WPF Grid allocation of space to star-columns</span></span>

|   |   |
|---|---|
|<span data-ttu-id="3d32a-102">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="3d32a-102">Details</span></span>|<span data-ttu-id="3d32a-103">Počínaje .NET Framework 4,7, WPF nahradí algoritmus, který <xref:System.Windows.Controls.Grid> používá k přidělení prostoru pro \* sloupce.</span><span class="sxs-lookup"><span data-stu-id="3d32a-103">Starting with the .NET Framework 4.7, WPF replaces the algorithm that <xref:System.Windows.Controls.Grid> uses to allocate space to \*-columns.</span></span> <span data-ttu-id="3d32a-104">Tato akce změní skutečnou šířku přiřazenou ke \* sloupcům v několika případech:</span><span class="sxs-lookup"><span data-stu-id="3d32a-104">This will change the actual width assigned to \*-columns in a number of cases:</span></span><ul><li><span data-ttu-id="3d32a-105">Pokud má jeden nebo více \* sloupců také minimální nebo maximální šířku, která přepíše proporcionální přidělení pro tento slo.</span><span class="sxs-lookup"><span data-stu-id="3d32a-105">When one or more \*-columns also have a minimum or maximum width that overrides the proportional allocation for that colum.</span></span> <span data-ttu-id="3d32a-106">(Minimální šířka se může odvozovat z explicitní deklarace MinWidth nebo z implicitního minima získaného z obsahu sloupce.</span><span class="sxs-lookup"><span data-stu-id="3d32a-106">(The minimum width can derive from an explicit MinWidth declaration, or from an implicit minimum obtained from the column's content.</span></span> <span data-ttu-id="3d32a-107">Maximální šířku lze definovat pouze explicitně z deklarace MaxWidth.)</span><span class="sxs-lookup"><span data-stu-id="3d32a-107">The maximum width can only be defined explicitly, from a MaxWidth declaration.)</span></span></li><li><span data-ttu-id="3d32a-108">Pokud jeden nebo více \* sloupců deklaruje extrémně velkou \* váhu, větší než 10 ^ 298.</span><span class="sxs-lookup"><span data-stu-id="3d32a-108">When one or more \*-columns declare an extremely large \*-weight, greater than 10^298.</span></span></li><li><span data-ttu-id="3d32a-109">Pokud \* jsou závaží dostatečně odlišná, aby narazila na nestabilitu plovoucí desetinné čárky (přetečení, podtečení, ztráta přesnosti).</span><span class="sxs-lookup"><span data-stu-id="3d32a-109">When the \*-weights are sufficiently different to encounter floating-point instability (overflow, underflow, loss of precision).</span></span></li><li><span data-ttu-id="3d32a-110">Když je povoleno zaoblení rozložení a efektivní zobrazení DPI je dostatečně vysoké.</span><span class="sxs-lookup"><span data-stu-id="3d32a-110">When layout rounding is enabled, and the effective display DPI is sufficiently high.</span></span></li></ul><span data-ttu-id="3d32a-111">V prvních dvou případech může být šířka vytvořená novým algoritmem výrazně odlišná od těch, které vytvořil starý algoritmus. v posledním případě bude rozdíl maximálně jeden nebo dva pixely.</span><span class="sxs-lookup"><span data-stu-id="3d32a-111">In the first two cases, the widths produced by the new algorithm can be significantly different from those produced by the old algorithm; in the last case, the difference will be at most one or two pixels.</span></span><p/><span data-ttu-id="3d32a-112">Nový algoritmus opravuje několik chyb ve starém algoritmu:</span><span class="sxs-lookup"><span data-stu-id="3d32a-112">The new algorithm fixes several bugs present in the old algorithm:</span></span><ol><li><span data-ttu-id="3d32a-113">Celkový počet přidělení na sloupce může překročit šířku mřížky.</span><span class="sxs-lookup"><span data-stu-id="3d32a-113">Total allocation to columns can exceed the Grid's width.</span></span> <span data-ttu-id="3d32a-114">K tomu může dojít při přidělování prostoru do sloupce, jehož proporcionální podíl je menší než minimální velikost.</span><span class="sxs-lookup"><span data-stu-id="3d32a-114">This can occur when allocating space to a column whose proportional share is less than its minimum size.</span></span> <span data-ttu-id="3d32a-115">Algoritmus přiděluje minimální velikost, která snižuje místo dostupného pro ostatní sloupce.</span><span class="sxs-lookup"><span data-stu-id="3d32a-115">The algorithm allocates the minimum size, which decreases the space available to other columns.</span></span> <span data-ttu-id="3d32a-116">Pokud neexistují žádné \* sloupce, které by bylo možné přidělit, celkový počet přidělení bude příliš velký.</span><span class="sxs-lookup"><span data-stu-id="3d32a-116">If there are no \*-columns left to allocate, the total allocation will be too large.</span></span></li><li><span data-ttu-id="3d32a-117">Celkový počet přidělení může být nižší než šířka mřížky.</span><span class="sxs-lookup"><span data-stu-id="3d32a-117">Total allocation can fall short of the Grid's width.</span></span> <span data-ttu-id="3d32a-118">Jedná se o duální problém, který je #1, což znamená při přidělování do sloupce, jehož proporcionální podíl je větší než jeho maximální velikost, takže \* nezbývá, aby se zabrala časová rezerva.</span><span class="sxs-lookup"><span data-stu-id="3d32a-118">This is the dual problem to #1, arising when allocating to a column whose proportional share is greater than its maximum size, with no \*-columns left to take up the slack.</span></span></li><li><span data-ttu-id="3d32a-119">Dva \* sloupce můžou získat přidělení neúměrné jejich \* závaží.</span><span class="sxs-lookup"><span data-stu-id="3d32a-119">Two \*-columns can receive allocations not proportional to their \*-weights.</span></span> <span data-ttu-id="3d32a-120">Toto je mírná verze #1/#2, která vzniká při přidělování na \* sloupce a, B a C (v tomto pořadí), kde hodnota b poměrná sdílená položka je v rozporu s omezením (nebo max).</span><span class="sxs-lookup"><span data-stu-id="3d32a-120">This is a milder version of #1/#2, arising when allocating to \*-columns A, B, and C (in that order), where B's proportional share violates its min (or max) constraint.</span></span> <span data-ttu-id="3d32a-121">Jak je uvedeno výše, mění se místo dostupné pro sloupec C, který získá méně (nebo více) proporční přidělování, než bylo provedeno,</span><span class="sxs-lookup"><span data-stu-id="3d32a-121">As above, this changes the space available to column C, who gets less (or more) proportional allocation than A did,</span></span></li><li><span data-ttu-id="3d32a-122">Sloupce s extrémně velkým závažím ( &gt; 10 ^ 298) se považují za, jako kdyby měly 10 ^ 298.</span><span class="sxs-lookup"><span data-stu-id="3d32a-122">Columns with extremely large weights (&gt; 10^298) are all treated as if they had weight 10^298.</span></span> <span data-ttu-id="3d32a-123">Poměrná rozdíl mezi nimi (a mezi sloupci s mírně menším závažím) nejsou dodrženy.</span><span class="sxs-lookup"><span data-stu-id="3d32a-123">Proportional differences between them (and between columns with slightly smaller weights) are not honored.</span></span></li><li><span data-ttu-id="3d32a-124">Sloupce s tloušťkou inifinte se nezpracovávají správně.</span><span class="sxs-lookup"><span data-stu-id="3d32a-124">Columns with inifinte weights are not handled correctly.</span></span> <span data-ttu-id="3d32a-125">[Ve skutečnosti nemůžete nastavit váhu na nekonečno, ale toto je umělé omezení.</span><span class="sxs-lookup"><span data-stu-id="3d32a-125">[Actually you can't set a weight to Infinity, but this is an artificial restriction.</span></span> <span data-ttu-id="3d32a-126">Alokační kód se snažil ho zpracovat, ale provádí špatnou úlohu.]</span><span class="sxs-lookup"><span data-stu-id="3d32a-126">The allocation code was trying to handle it, but doing a bad job.]</span></span></li><li><span data-ttu-id="3d32a-127">Několik menších problémů při předcházení přetečení, podtečení, ztráty přesnosti a podobné problémy s plovoucí desetinnou čárkou.</span><span class="sxs-lookup"><span data-stu-id="3d32a-127">Several minor problems while avoiding overflow, underflow, loss of precision and similar floating-point issues.</span></span></li><li><span data-ttu-id="3d32a-128">Úpravy pro zaokrouhlování rozložení jsou nesprávné při dostatečně vysokém rozlišení DPI.</span><span class="sxs-lookup"><span data-stu-id="3d32a-128">Adjustments for layout rounding are incorrect at sufficiently high DPI.</span></span></li></ol><span data-ttu-id="3d32a-129">Nový algoritmus vytvoří výsledky, které splňují následující kritéria:</span><span class="sxs-lookup"><span data-stu-id="3d32a-129">The new algorithm produces results that meet the following criteria:</span></span><p/><span data-ttu-id="3d32a-130">A.</span><span class="sxs-lookup"><span data-stu-id="3d32a-130">A.</span></span> <span data-ttu-id="3d32a-131">Skutečná šířka přiřazená ke sloupci \* není nikdy menší než minimální šířka ani větší než maximální šířka.</span><span class="sxs-lookup"><span data-stu-id="3d32a-131">The actual width assigned to a \*-column is never less than its minimum width nor greater than its maximum width.</span></span><br/><span data-ttu-id="3d32a-132">B.</span><span class="sxs-lookup"><span data-stu-id="3d32a-132">B.</span></span> <span data-ttu-id="3d32a-133">Každému <em>sloupci, který nemá přiřazenou minimální nebo maximální šířku, je přiřazena šířka přiměřená na <em>váhu. V případě, že jsou dva sloupce deklarovány s šířkou x</em> a y</em> a pokud žádný ze sloupců neobdrží minimální nebo maximální šířku, mají skutečné šířky v a w přiřazené sloupce ve stejném poměru: v/w = = x/y.</span><span class="sxs-lookup"><span data-stu-id="3d32a-133">Each <em>-column that is not assigned its minimum or maximum width is assigned a width proportional to its <em>-weight. To be precise, if two columns are declared with width x</em> and y</em> respectively, and if neither column receives its minimum or maximum width, the actual widths v and w assigned to the columns are in the same proportion: v / w == x / y.</span></span><br/><span data-ttu-id="3d32a-134">C.</span><span class="sxs-lookup"><span data-stu-id="3d32a-134">C.</span></span> <span data-ttu-id="3d32a-135">Celková šířka přidělená pro &quot; proporcionální &quot; \* sloupce se rovná volnému prostoru, který je k dispozici po přidělení na sloupce s omezením (pevné, automatické a \* -sloupce, které mají přidělenu minimální nebo maximální šířku).</span><span class="sxs-lookup"><span data-stu-id="3d32a-135">The total width allocated to &quot;proportional&quot; \*-columns is equal to the space available after allocating to the constrained columns (fixed, auto, and \*-columns that are allocated their min or max width).</span></span> <span data-ttu-id="3d32a-136">Tato hodnota může být nulová, například pokud součet minimálních šířek překračuje šířku availbable mřížky.</span><span class="sxs-lookup"><span data-stu-id="3d32a-136">This might be zero, for instance if the sum of the minimum widths exceeds the Grid's availbable width.</span></span><br/><span data-ttu-id="3d32a-137">D.</span><span class="sxs-lookup"><span data-stu-id="3d32a-137">D.</span></span> <span data-ttu-id="3d32a-138">Všechny tyto příkazy jsou interpretovány s ohledem na &quot; ideální &quot; rozložení.</span><span class="sxs-lookup"><span data-stu-id="3d32a-138">All these statements are to be interpreted with respect to the &quot;ideal&quot; layout.</span></span> <span data-ttu-id="3d32a-139">Když je navýšení rozložení platné, skutečné šířky se mohou lišit od ideální šířky až do velikosti jednoho pixelu.</span><span class="sxs-lookup"><span data-stu-id="3d32a-139">When layout rounding is in effect, the actual widths can differ from the ideal widths by as much as one pixel.</span></span><br/><span data-ttu-id="3d32a-140">Starý algoritmus dodržoval (A), ale nedokázal přijmout další kritéria v případech uvedených výše.</span><span class="sxs-lookup"><span data-stu-id="3d32a-140">The old algorithm honored (A) but failed to honor the other criteria in the cases outlined above.</span></span><p/><span data-ttu-id="3d32a-141">Vše uvedené o sloupcích a šířkách v tomto článku se vztahuje i na řádky a výšky.</span><span class="sxs-lookup"><span data-stu-id="3d32a-141">Everything said about columns and widths in this article applies as well to rows and heights.</span></span>|
|<span data-ttu-id="3d32a-142">Návrh</span><span class="sxs-lookup"><span data-stu-id="3d32a-142">Suggestion</span></span>|<span data-ttu-id="3d32a-143">Ve výchozím nastavení se v aplikacích, které cílí na verze .NET Framework od .NET Framework 4,7, zobrazí nový algoritmus, zatímco aplikace cílené na .NET Framework 4.6.2 nebo starší verze uvidí starý algoritmus.</span><span class="sxs-lookup"><span data-stu-id="3d32a-143">By default, apps that target versions of the .NET Framework starting with the .NET Framework 4.7 will see the new algorithm, while apps that target the .NET Framework 4.6.2 or earlier versions will see the old algorithm.</span></span><p/><span data-ttu-id="3d32a-144">Pokud chcete přepsat výchozí nastavení, použijte následující nastavení konfigurace:</span><span class="sxs-lookup"><span data-stu-id="3d32a-144">To override the default, use the following configuration setting:</span></span><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="3d32a-145">Hodnota <code>true</code> vybere starý algoritmus a <code>false</code> vybere nový algoritmus.</span><span class="sxs-lookup"><span data-stu-id="3d32a-145">The value <code>true</code> selects the old algorithm, <code>false</code> selects the new algorithm.</span></span>|
|<span data-ttu-id="3d32a-146">Rozsah</span><span class="sxs-lookup"><span data-stu-id="3d32a-146">Scope</span></span>|<span data-ttu-id="3d32a-147">Vedlejší</span><span class="sxs-lookup"><span data-stu-id="3d32a-147">Minor</span></span>|
|<span data-ttu-id="3d32a-148">Verze</span><span class="sxs-lookup"><span data-stu-id="3d32a-148">Version</span></span>|<span data-ttu-id="3d32a-149">4,7</span><span class="sxs-lookup"><span data-stu-id="3d32a-149">4.7</span></span>|
|<span data-ttu-id="3d32a-150">Typ</span><span class="sxs-lookup"><span data-stu-id="3d32a-150">Type</span></span>|<span data-ttu-id="3d32a-151">Změna cílení</span><span class="sxs-lookup"><span data-stu-id="3d32a-151">Retargeting</span></span>|
