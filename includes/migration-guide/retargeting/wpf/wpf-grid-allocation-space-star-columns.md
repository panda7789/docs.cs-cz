---
ms.openlocfilehash: 79a251f3d08a253db2e1a805113f46f83c6a9410
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/15/2020
ms.locfileid: "68235564"
---
### <a name="wpf-grid-allocation-of-space-to-star-columns"></a><span data-ttu-id="339a8-101">WPF Přidělení místa do sloupců hvězdičkami</span><span class="sxs-lookup"><span data-stu-id="339a8-101">WPF Grid allocation of space to star-columns</span></span>

|   |   |
|---|---|
|<span data-ttu-id="339a8-102">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="339a8-102">Details</span></span>|<span data-ttu-id="339a8-103">Počínaje rozhraním .NET Framework 4.7 wpf <xref:System.Windows.Controls.Grid> nahrazuje algoritmus, který používá k přidělení místa \*-columns.</span><span class="sxs-lookup"><span data-stu-id="339a8-103">Starting with the .NET Framework 4.7, WPF replaces the algorithm that <xref:System.Windows.Controls.Grid> uses to allocate space to \*-columns.</span></span> <span data-ttu-id="339a8-104">Tím se změní skutečná šířka přiřazená \*-sloupce v řadě případů:</span><span class="sxs-lookup"><span data-stu-id="339a8-104">This will change the actual width assigned to \*-columns in a number of cases:</span></span><ul><li><span data-ttu-id="339a8-105">Pokud jeden nebo více sloupců \*mají také minimální nebo maximální šířku, která přepíše proporcionální přidělení pro toto sloupce.</span><span class="sxs-lookup"><span data-stu-id="339a8-105">When one or more \*-columns also have a minimum or maximum width that overrides the proportional allocation for that colum.</span></span> <span data-ttu-id="339a8-106">(Minimální šířka může být odvozena z explicitní deklarace MinWidth nebo z implicitního minima získaného z obsahu sloupce.</span><span class="sxs-lookup"><span data-stu-id="339a8-106">(The minimum width can derive from an explicit MinWidth declaration, or from an implicit minimum obtained from the column's content.</span></span> <span data-ttu-id="339a8-107">Maximální šířku lze definovat pouze explicitně z deklarace MaxWidth.)</span><span class="sxs-lookup"><span data-stu-id="339a8-107">The maximum width can only be defined explicitly, from a MaxWidth declaration.)</span></span></li><li><span data-ttu-id="339a8-108">Pokud jeden nebo více \*-sloupce deklarovat extrémně velký \*-hmotnost, větší než 10 ^ 298.</span><span class="sxs-lookup"><span data-stu-id="339a8-108">When one or more \*-columns declare an extremely large \*-weight, greater than 10^298.</span></span></li><li><span data-ttu-id="339a8-109">Když \*-váhy jsou dostatečně odlišné, aby se setkaly s nestabilitou s plovoucí desetinnou tázkou (přetečení, podtečení, ztráta přesnosti).</span><span class="sxs-lookup"><span data-stu-id="339a8-109">When the \*-weights are sufficiently different to encounter floating-point instability (overflow, underflow, loss of precision).</span></span></li><li><span data-ttu-id="339a8-110">Pokud je povoleno zaokrouhlení rozvržení a efektivní zobrazení DPI je dostatečně vysoké.</span><span class="sxs-lookup"><span data-stu-id="339a8-110">When layout rounding is enabled, and the effective display DPI is sufficiently high.</span></span></li></ul><span data-ttu-id="339a8-111">V prvních dvou případech šířky vytvořené nový algoritmus může být výrazně lišit od těch, které jsou vyrobeny starý algoritmus; v posledním případě bude rozdíl maximálně jeden nebo dva pixely.</span><span class="sxs-lookup"><span data-stu-id="339a8-111">In the first two cases, the widths produced by the new algorithm can be significantly different from those produced by the old algorithm; in the last case, the difference will be at most one or two pixels.</span></span><p/><span data-ttu-id="339a8-112">Nový algoritmus opravuje několik chyb přítomných ve starém algoritmu:</span><span class="sxs-lookup"><span data-stu-id="339a8-112">The new algorithm fixes several bugs present in the old algorithm:</span></span><ol><li><span data-ttu-id="339a8-113">Celkové přidělení sloupcům může překročit šířku mřížky.</span><span class="sxs-lookup"><span data-stu-id="339a8-113">Total allocation to columns can exceed the Grid's width.</span></span> <span data-ttu-id="339a8-114">K tomu může dojít při přidělování místa do sloupce, jehož proporcionální podíl je menší než jeho minimální velikost.</span><span class="sxs-lookup"><span data-stu-id="339a8-114">This can occur when allocating space to a column whose proportional share is less than its minimum size.</span></span> <span data-ttu-id="339a8-115">Algoritmus přiděluje minimální velikost, která zmenšuje místo, které je k dispozici pro jiné sloupce.</span><span class="sxs-lookup"><span data-stu-id="339a8-115">The algorithm allocates the minimum size, which decreases the space available to other columns.</span></span> <span data-ttu-id="339a8-116">Pokud nejsou k dispozici žádné \*-sloupce, které by bylo možné přidělit, bude celkové přidělení příliš velké.</span><span class="sxs-lookup"><span data-stu-id="339a8-116">If there are no \*-columns left to allocate, the total allocation will be too large.</span></span></li><li><span data-ttu-id="339a8-117">Celkové přidělení může nedosahovat šířky mřížky.</span><span class="sxs-lookup"><span data-stu-id="339a8-117">Total allocation can fall short of the Grid's width.</span></span> <span data-ttu-id="339a8-118">Jedná se o dvojí problém #1, vznikající při přidělování do sloupce, jehož proporcionální podíl je větší než jeho maximální velikost, bez \*-sloupce vlevo, aby se rezerva.</span><span class="sxs-lookup"><span data-stu-id="339a8-118">This is the dual problem to #1, arising when allocating to a column whose proportional share is greater than its maximum size, with no \*-columns left to take up the slack.</span></span></li><li><span data-ttu-id="339a8-119">Dva \*-sloupce mohou přijímat přidělení není úměrná jejich \*-váhy.</span><span class="sxs-lookup"><span data-stu-id="339a8-119">Two \*-columns can receive allocations not proportional to their \*-weights.</span></span> <span data-ttu-id="339a8-120">Jedná se o mírnější verzi #1/#2, která vzniká při přidělování \*-sloupce A, B a C (v tomto pořadí), kde poměrný podíl B porušuje jeho min (nebo max) omezení.</span><span class="sxs-lookup"><span data-stu-id="339a8-120">This is a milder version of #1/#2, arising when allocating to \*-columns A, B, and C (in that order), where B's proportional share violates its min (or max) constraint.</span></span> <span data-ttu-id="339a8-121">Jak je uvedeno výše, změní se místo, které je k dispozici pro sloupec C, který získá méně (nebo více) poměrné alokace než A,</span><span class="sxs-lookup"><span data-stu-id="339a8-121">As above, this changes the space available to column C, who gets less (or more) proportional allocation than A did,</span></span></li><li><span data-ttu-id="339a8-122">Sloupce s extrémně velkými&gt; váhami ( 10 ^ 298) jsou všechny považovány za váhu 10 ^ 298.</span><span class="sxs-lookup"><span data-stu-id="339a8-122">Columns with extremely large weights (&gt; 10^298) are all treated as if they had weight 10^298.</span></span> <span data-ttu-id="339a8-123">Proporcionální rozdíly mezi nimi (a mezi sloupci s mírně menšími závažími) nejsou dodrženy.</span><span class="sxs-lookup"><span data-stu-id="339a8-123">Proportional differences between them (and between columns with slightly smaller weights) are not honored.</span></span></li><li><span data-ttu-id="339a8-124">Sloupce s inifinte hmotnosti nejsou zpracovány správně.</span><span class="sxs-lookup"><span data-stu-id="339a8-124">Columns with inifinte weights are not handled correctly.</span></span> <span data-ttu-id="339a8-125">[Ve skutečnosti nemůžete nastavit váhu na nekonečno, ale to je umělé omezení.</span><span class="sxs-lookup"><span data-stu-id="339a8-125">[Actually you can't set a weight to Infinity, but this is an artificial restriction.</span></span> <span data-ttu-id="339a8-126">Kód přidělení se snažil zpracovat, ale dělá špatnou práci.]</span><span class="sxs-lookup"><span data-stu-id="339a8-126">The allocation code was trying to handle it, but doing a bad job.]</span></span></li><li><span data-ttu-id="339a8-127">Několik drobných problémů, aniž by přetečení, podtečení, ztráta přesnosti a podobné problémy s plovoucí desetinnou desetinnou desetinnou desetinnou desetinnou desetinnou desetinnou desetinnou.</span><span class="sxs-lookup"><span data-stu-id="339a8-127">Several minor problems while avoiding overflow, underflow, loss of precision and similar floating-point issues.</span></span></li><li><span data-ttu-id="339a8-128">Úpravy pro zaokrouhlení rozvržení jsou nesprávné při dostatečně vysokém DPI.</span><span class="sxs-lookup"><span data-stu-id="339a8-128">Adjustments for layout rounding are incorrect at sufficiently high DPI.</span></span></li></ol><span data-ttu-id="339a8-129">Nový algoritmus vytváří výsledky, které splňují následující kritéria:</span><span class="sxs-lookup"><span data-stu-id="339a8-129">The new algorithm produces results that meet the following criteria:</span></span><p/><span data-ttu-id="339a8-130">A.</span><span class="sxs-lookup"><span data-stu-id="339a8-130">A.</span></span> <span data-ttu-id="339a8-131">Skutečná šířka přiřazená sloupci \*-je nikdy menší než jeho minimální šířka ani větší než jeho maximální šířka.</span><span class="sxs-lookup"><span data-stu-id="339a8-131">The actual width assigned to a \*-column is never less than its minimum width nor greater than its maximum width.</span></span><br/><span data-ttu-id="339a8-132">B.</span><span class="sxs-lookup"><span data-stu-id="339a8-132">B.</span></span> <span data-ttu-id="339a8-133">Každému <em>sloupci -column, kterému není přiřazena minimální nebo maximální šířka, je přiřazena šířka úměrná <em>jeho -weight. Abych byl přesný, pokud jsou dva sloupce deklarovány s šířkou x</em> a y</em> a pokud ani jeden sloupec neobdrží minimální nebo maximální šířku, skutečné šířky v a w přiřazené sloupcům jsou ve stejném poměru: v / w == x / y.</span><span class="sxs-lookup"><span data-stu-id="339a8-133">Each <em>-column that is not assigned its minimum or maximum width is assigned a width proportional to its <em>-weight. To be precise, if two columns are declared with width x</em> and y</em> respectively, and if neither column receives its minimum or maximum width, the actual widths v and w assigned to the columns are in the same proportion: v / w == x / y.</span></span><br/><span data-ttu-id="339a8-134">C.</span><span class="sxs-lookup"><span data-stu-id="339a8-134">C.</span></span> <span data-ttu-id="339a8-135">Celková šířka &quot;přidělená proporcionálním&quot; \*sloupcům se rovná prostoru, který je k dispozici po přidělení omezeným sloupcům (pevné, automatické a \*-sloupce, které jsou přiděleny jejich min nebo max šířka).</span><span class="sxs-lookup"><span data-stu-id="339a8-135">The total width allocated to &quot;proportional&quot; \*-columns is equal to the space available after allocating to the constrained columns (fixed, auto, and \*-columns that are allocated their min or max width).</span></span> <span data-ttu-id="339a8-136">To může být nula, například v případě, že součet minimální šířky přesahuje gridu k dispozici šířku.</span><span class="sxs-lookup"><span data-stu-id="339a8-136">This might be zero, for instance if the sum of the minimum widths exceeds the Grid's availbable width.</span></span><br/><span data-ttu-id="339a8-137">D.</span><span class="sxs-lookup"><span data-stu-id="339a8-137">D.</span></span> <span data-ttu-id="339a8-138">Všechny tyto výroky je třeba interpretovat s ohledem na &quot;ideální&quot; uspořádání.</span><span class="sxs-lookup"><span data-stu-id="339a8-138">All these statements are to be interpreted with respect to the &quot;ideal&quot; layout.</span></span> <span data-ttu-id="339a8-139">Při zaokrouhlení rozvržení je v platnosti, skutečné šířky se mohou lišit od ideální šířky až o jeden pixel.</span><span class="sxs-lookup"><span data-stu-id="339a8-139">When layout rounding is in effect, the actual widths can differ from the ideal widths by as much as one pixel.</span></span><br/><span data-ttu-id="339a8-140">Starý algoritmus ctí (A), ale nepodařilo se dostát ostatním kritériím ve výše uvedených případech.</span><span class="sxs-lookup"><span data-stu-id="339a8-140">The old algorithm honored (A) but failed to honor the other criteria in the cases outlined above.</span></span><p/><span data-ttu-id="339a8-141">Vše, co bylo řečeno o sloupcích a šířkách v tomto článku, se vztahuje také na řádky a výšky.</span><span class="sxs-lookup"><span data-stu-id="339a8-141">Everything said about columns and widths in this article applies as well to rows and heights.</span></span>|
|<span data-ttu-id="339a8-142">Návrh</span><span class="sxs-lookup"><span data-stu-id="339a8-142">Suggestion</span></span>|<span data-ttu-id="339a8-143">Ve výchozím nastavení se aplikacím, které cílí na verze rozhraní .NET Framework počínaje rozhraním .NET Framework 4.7, zobrazí nový algoritmus, zatímco aplikace, které cílí na rozhraní .NET Framework 4.6.2 nebo starší verze, uvidí starý algoritmus.</span><span class="sxs-lookup"><span data-stu-id="339a8-143">By default, apps that target versions of the .NET Framework starting with the .NET Framework 4.7 will see the new algorithm, while apps that target the .NET Framework 4.6.2 or earlier versions will see the old algorithm.</span></span><p/><span data-ttu-id="339a8-144">Chcete-li přepsat výchozí hodnotu, použijte následující nastavení konfigurace:</span><span class="sxs-lookup"><span data-stu-id="339a8-144">To override the default, use the following configuration setting:</span></span><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="339a8-145">Hodnota <code>true</code> vybere starý algoritmus, <code>false</code> vybere nový algoritmus.</span><span class="sxs-lookup"><span data-stu-id="339a8-145">The value <code>true</code> selects the old algorithm, <code>false</code> selects the new algorithm.</span></span>|
|<span data-ttu-id="339a8-146">Rozsah</span><span class="sxs-lookup"><span data-stu-id="339a8-146">Scope</span></span>|<span data-ttu-id="339a8-147">Vedlejší</span><span class="sxs-lookup"><span data-stu-id="339a8-147">Minor</span></span>|
|<span data-ttu-id="339a8-148">Version</span><span class="sxs-lookup"><span data-stu-id="339a8-148">Version</span></span>|<span data-ttu-id="339a8-149">4.7</span><span class="sxs-lookup"><span data-stu-id="339a8-149">4.7</span></span>|
|<span data-ttu-id="339a8-150">Typ</span><span class="sxs-lookup"><span data-stu-id="339a8-150">Type</span></span>|<span data-ttu-id="339a8-151">Změna cílení</span><span class="sxs-lookup"><span data-stu-id="339a8-151">Retargeting</span></span>|
