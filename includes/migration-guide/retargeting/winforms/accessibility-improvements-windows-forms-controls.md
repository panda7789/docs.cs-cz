---
ms.openlocfilehash: 8c031198a1faad58ac5c5f5d5f042a1d9a35e8d5
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/15/2020
ms.locfileid: "72887750"
---
### <a name="accessibility-improvements-in-windows-forms-controls"></a>Vylepšení usnadnění v ovládacích prvcích Windows Forms

|   |   |
|---|---|
|Podrobnosti|Windows Forms vylepšuje jeho fungování pomocí technologií usnadnění, aby lépe podporovaly zákazníky Windows Forms. Patří mezi ně následující změny počínaje rozhraním .NET Framework 4.7.1:<ul><li>Změny pro zlepšení zobrazení v režimu vysokého kontrastu.</li><li>Změny ke zlepšení prostředí prohlížeče vlastností. Vylepšení prohlížeče vlastností zahrnují:</li><li>Lepší navigace pomocí klávesnice v různých rozbalovacích oknech výběru.</li><li>Snížené zbytečné zarážky tabulátoru.</li><li>Lepší vykazování typů ovládacích prvku.</li><li>Vylepšené chování předčítání.</li><li>Změny implementovat chybějící vzory usnadnění u rozhraní v ovládacích prvcích.</li></ul>|
|Návrh|**Jak se přihlásit nebo odhlásit z těchto změn**<br>Aby aplikace mohla využívat tyto změny, musí být spuštěna v rozhraní .NET Framework 4.7.1 nebo novějším. Aplikace může těžit z těchto změn v některém z následujících způsobů:<ul><li>Je znovu zkompilován tak, aby se zaměřil na rozhraní .NET Framework 4.7.1. Tyto změny usnadnění jsou ve výchozím nastavení povoleny v aplikacích windows forms, které se zaměřují na rozhraní .NET Framework 4.7.1 nebo novější.</li><li>Odhlásí se z chování starší usnadnění přidáním následující [appcontext přepnout](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) do <code>&lt;runtime&gt;</code> části app.config souboru a nastavení na <code>false</code>, jak ukazuje následující příklad.</li></ul><pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#13;&#10;&lt;configuration&gt;&#13;&#10;&lt;startup&gt;&#13;&#10;&lt;supportedRuntime version=&quot;v4.0&quot; sku=&quot;.NETFramework,Version=v4.7&quot;/&gt;&#13;&#10;&lt;/startup&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;!-- AppContextSwitchOverrides value attribute is in the form of &#39;key1=true/false;key2=true/false  --&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.UseLegacyAccessibilityFeatures=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre><br>Aplikace, které cílí na rozhraní .NET Framework 4.7.1 nebo novější a chtějí zachovat starší chování usnadnění <code>true</code>přístupu, se mohou přihlásit k použití starších funkcí usnadnění explicitním nastavením tohoto přepínače AppContext na .<p/>Přehled automatizace uživatelského rozhraní najdete v tématu [Přehled automatizace uživatelského rozhraní](~/docs/framework/ui-automation/ui-automation-overview.md).<p/>**Přidána podpora pro vzory a vlastnosti automatizace uživatelského rozhraní**<br/>Klienti usnadnění mohou využít nové funkce usnadnění winforms pomocí běžných, veřejně popsaných vzorů vyvolání. Tyto vzory nejsou specifické pro WinForms. Například klienti usnadnění přístupu můžete volat QueryInterface metoda na iAccessible rozhraní (MAAS) získat rozhraní IServiceProvider. Pokud je toto rozhraní k dispozici, klienti mohou použít jeho QueryService metodu požádat o rozhraní IAccessibleEx. Další informace naleznete [v tématu Using IAccessibleEx from a Client](https://docs.microsoft.com/windows/desktop/WinAuto/using-iaccessibleex-from-a-client). Počínaje rozhraním .NET Framework 4.7.1 jsou pro objekty usnadnění winforms k dispozici iServiceProvider a [IAccessibleEx](https://docs.microsoft.com/windows/desktop/WinAuto/iaccessibleex) (pokud je to možné).<p/>Rozhraní .NET Framework 4.7.1 přidává podporu pro následující vzory automatizace uživatelského rozhraní a vlastnosti:<ul><li>Ovládací <xref:System.Windows.Forms.ToolStripSplitButton> <xref:System.Windows.Forms.ComboBox> prvky a podporují [vzorek Rozbalení/sbalení](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</li><li>Ovládací <xref:System.Windows.Forms.ToolStripMenuItem> prvek má hodnotu <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>vlastnosti [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) .</li><li>Ovládací <xref:System.Windows.Forms.ToolStripItem> prvek <xref:System.Windows.Automation.AutomationElement.NameProperty> podporuje vlastnost a[rozbalení/sbalit vzorek](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</li><li>Ovládací <xref:System.Windows.Forms.ToolStripDropDownItem> prvek <xref:System.Windows.Forms.AccessibleEvents> podporuje označení StateChange a NameChange při rozevírací rozbalené rozbalené nebo sbalené.</li><li>Ovládací <xref:System.Windows.Forms.ToolStripDropDownButton> prvek má [hodnotu](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>vlastnosti ControlType .</li><li>Ovládací <xref:System.Windows.Forms.DataGridViewCheckBoxCell> prvek <xref:System.Windows.Automation.TogglePattern>podporuje .</li><li>A <xref:System.Windows.Forms.NumericUpDown> <xref:System.Windows.Forms.DomainUpDown> ovládací prvky <xref:System.Windows.Automation.AutomationElement.NameProperty> podporují vlastnost a <xref:System.Windows.Automation.ControlType.Spinner?displayProperty=nameWithType>mají [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-spinner-control-type.md) .</p></li></ul>**Vylepšení ovládacího prvku PropertyGrid**<br>Rozhraní .NET Framework 4.7.1 přidává do ovládacího prvku PropertyBrowser následující vylepšení:<ul><li>Tlačítko **Podrobnosti** v chybovém dialogovém okně, které se <xref:System.Windows.Forms.PropertyGrid> zobrazí, když uživatel zadá do ovládacího <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>prvku nesprávnou hodnotu, podporuje [pole Rozbalit/sbalit](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md), oznámení o změně stavu a názvu a vlastnost [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) s hodnotou .</li><li>Podokno zpráv zobrazené při rozbalení tlačítka **Podrobnosti** v chybovém dialogovém okně je nyní přístupné z klávesnice a umožňuje Předčítání oznámit obsah chybové zprávy.</li><li>Řádky <xref:System.Windows.Forms.AccessibleRole> v <xref:System.Windows.Forms.PropertyGrid> ovládacím prvku &quot;byly&quot; &quot;změněny z řádku na buňku&quot;. Buňka se mapuje na &quot;UIA ControlType DataItem&quot;, který umožňuje podporovat příslušné klávesové zkratky a oznámení předčítání.</li><li>Řádky <xref:System.Windows.Forms.PropertyGrid> ovládacího prvku, které <xref:System.Windows.Forms.PropertyGrid> představují <xref:System.Windows.Forms.PropertyGrid.PropertySort> položky <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType> záhlaví, pokud má <xref:System.Windows.Automation.ControlType.Button?displayProperty=nameWithType>ovládací prvek vlastnost nastavenou na hodnotu vlastnosti [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) .</li><li>Řádky <xref:System.Windows.Forms.PropertyGrid> ovládacího prvku, které <xref:System.Windows.Forms.PropertyGrid> představují <xref:System.Windows.Forms.PropertyGrid.PropertySort> položky <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType> záhlaví, pokud má ovládací prvek vlastnost nastavenou na podporu [vzoru Rozbalení nebo sbalení](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</li><li>Vylepšená navigace pomocí klávesnice mezi mřížkou a panelem nástrojů nad ní. Stisknutím &quot;klávesy&quot; Shift-Tab se nyní vybere první tlačítko Panel nástrojů namísto celého panelu nástrojů.</li><li><xref:System.Windows.Forms.PropertyGrid>ovládací prvky zobrazené v režimu vysoký kontrast nyní nakreslí obdélník <xref:System.Windows.Forms.PropertyGrid.PropertySort> fokusu kolem tlačítka Panel u nástrojů, který odpovídá aktuální hodnotě vlastnosti.</li><li><xref:System.Windows.Forms.PropertyGrid>ovládací prvky zobrazené v <xref:System.Windows.Forms.PropertyGrid.PropertySort> režimu <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType> vysokého kontrastu a s vlastností nastavenou tak, aby se nyní zobrazovalo pozadí záhlaví kategorií ve vysoce kontrastní barvě.</li><li><xref:System.Windows.Forms.PropertyGrid>ovládací prvky lépe rozlišuje mezi položkami panelu nástrojů <xref:System.Windows.Forms.PropertyGrid.PropertySort> s fokusem a položkami panelu nástrojů, které označují aktuální hodnotu vlastnosti. Tato oprava se skládá ze změny vysokého kontrastu a změny pro scénáře bez vysokého kontrastu.</li><li><xref:System.Windows.Forms.PropertyGrid>ovládací prvek ToolBar položky, <xref:System.Windows.Forms.PropertyGrid.PropertySort> které označuje <xref:System.Windows.Automation.TogglePattern>aktuální hodnotu vlastnosti podporu .</li><li>Vylepšená podpora předčítání pro rozlišení vybrané trasy v výběru trasy</li><li>Pokud je <xref:System.Windows.Forms.PropertyGrid> prázdný ovládací prvek zobrazen ve formuláři, nyní obdrží fokus tam, kde dříve nebyl.</p></li></ul>**Použití barev definovaných osem v motivech s vysokým kontrastem**<br><ul><li>Ovládací <xref:System.Windows.Forms.Button> <xref:System.Windows.Forms.CheckBox> prvky <xref:System.Windows.Forms.ButtonBase.FlatStyle> a ovládací <xref:System.Windows.Forms.FlatStyle.System?displayProperty=nameWithType>prvky se svou vlastností nastavenou na , což je výchozí styl, nyní při výběru používají barvy definované v osu v motivu Vysoký kontrast. Dříve barvy textu a pozadí nebyly kontrastní a byly těžko čitelné.</li><li>Ovládací <xref:System.Windows.Forms.Button> <xref:System.Windows.Forms.CheckBox>prvky <xref:System.Windows.Forms.Label> <xref:System.Windows.Forms.LinkLabel>, <xref:System.Windows.Forms.RadioButton> <xref:System.Windows.Forms.GroupBox> , , <xref:System.Windows.Forms.Control.Enabled> , a s jejich vlastností **nastavenou** na false používaly stínovou barvu k vykreslení textu v motivech s vysokým kontrastem, což mělo za následek nízký kontrast na pozadí. Nyní tyto ovládací &quot;prvky používají barvu Zakázaného textu&quot; definovanou osem. Tato oprava platí pro <code>FlatStyle</code> ovládací prvky s <xref:System.Windows.Forms.FlatStyle.System?displayProperty=nameWithType>vlastností nastavenou na jinou hodnotu než . Tyto ovládací prvky jsou vykresleny os.</li><li><xref:System.Windows.Forms.DataGridView>nyní vykreslí viditelný obdélník kolem obsahu buňky, která má aktuální fokus. Dříve to nebylo viditelné v některých motivech s vysokým kontrastem.</li><li><xref:System.Windows.Forms.ToolStripMenuItem>ovládací prvky s <xref:System.Windows.Forms.ToolStripMenuItem.Enabled> jejich vlastností nastavenou na **hodnotu** &quot;false nyní používají barvu Zakázaného textu&quot; definovanou osem.</li><li><xref:System.Windows.Forms.ToolStripMenuItem>ovládací prvky s jejich <xref:System.Windows.Forms.ToolStripMenuItem.Checked> vlastností nastavenou na **hodnotu true** nyní vykreslují přidružené zaškrtnutí v kontrastní barvě systému.  Dříve barva zaškrtnutí nebyla dostatečně kontrastní a nebyla viditelná v motivech s vysokým kontrastem.</li></ul>Poznámka: Systém Windows 10 změnil hodnoty pro některé barvy systému s vysokým kontrastem. Rozhraní Windows Forms Framework je založeno na rozhraní Win32. Chcete-li získat nejlepší možnosti, spusťte nejnovější verzi systému Windows a přihlaste se k nejnovějším změnám operačního systému přidáním souboru app.manifest v testovací aplikaci a odkomentováním následujícího kódu:<pre><code class="lang-xml">&lt;!-- Windows 10 --&gt;&#13;&#10;&lt;supportedOS Id=&quot;{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}&quot; /&gt;&#13;&#10;</code></pre><br>**Vylepšená navigace pomocí klávesnice**<ul><li>Pokud <xref:System.Windows.Forms.ComboBox> má ovládací <xref:System.Windows.Forms.ComboBox.DropDownStyle> prvek <xref:System.Windows.Forms.ComboBoxStyle.DropDownList?displayProperty=nameWithType> nastavenou vlastnost a je prvním ovládacím prvkem v pořadí polí ve formuláři, zobrazí se při otevření nadřazeného formuláře pomocí klávesnice obdélník fokusu. Před touto změnou bylo fokus klávesnice na tomto ovládacím prvku, ale indikátor fokusu nebyl vykreslen.</li></ul>**Vylepšená podpora pro Předčítání**<ul><li>Ovládací <xref:System.Windows.Forms.MonthCalendar> prvek přidal podporu pro pomocné technologie pro přístup k ovládacímu prvku, včetně možnosti předčítání číst hodnotu ovládacího prvku, když dříve nemohl.</li><li>Ovládací <xref:System.Windows.Forms.CheckedListBox> prvek nyní upozorní Předčítání <xref:System.Windows.Forms.CheckBox.CheckState?displayProperty=nameWithType> při změně vlastnosti. Dříve Program Předčítání neobdržel oznámení a v důsledku toho <xref:System.Windows.Forms.CheckBox.CheckState> uživatelé nebyli informováni o tom, že byla vlastnost aktualizována.</li><li>Ovládací <xref:System.Windows.Forms.LinkLabel> prvek změnil způsob, jakým upozorní Předčítání na text v ovládacím prvku. Dříve Předčítání tento text dvakrát &quot; &amp; &quot; oznámil a četl symboly jako skutečný text, i když nejsou pro uživatele viditelné. Duplikovaný text byl odebrán z oznámení předčítání &quot; &amp; &quot; a také z nepotřebných symbolů.</li><li>Typy <xref:System.Windows.Forms.DataGridViewCell> ovládacích prvku nyní správně hlásí stav jen pro čtení předčítání a dalším pomocným technologiím.</li><li>Program Předčítání je nyní schopen číst systémovou nabídku podřízených oken v aplikacích [Multiple-Document Interface]~/docs/framework/winforms/advanced/multiple-document-interface-mdi-applications.md.</li><li>Předčítání je nyní možné <xref:System.Windows.Forms.ToolStripMenuItem> číst <xref:System.Windows.Forms.ToolStripItem.Enabled?displayProperty=nameWithType> ovládací prvky s vlastností nastavenou na **false**. Dříve se Program Předčítání nemohl soustředit na zakázané položky nabídky pro čtení obsahu.</li></ul>|
|Rozsah|Hlavní|
|Version|4.7.1|
|Typ|Změna cílení|
|Ovlivněná rozhraní API|<ul><li><xref:System.Windows.Forms.ToolStripDropDownButton.CreateAccessibilityInstance?displayProperty=nameWithType></li><li><xref:System.Windows.Forms.DomainUpDown.DomainUpDownAccessibleObject.Name?displayProperty=nameWithType></li><li>[MonthCalendar.AccessibilityObject](xref:System.Windows.Forms.Control.AccessibilityObject)</li></ul>|
