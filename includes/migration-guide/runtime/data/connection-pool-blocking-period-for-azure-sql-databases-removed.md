### <a name="connection-pool-blocking-period-for-azure-sql-databases-is-removed"></a><span data-ttu-id="7f5f2-101">Odebrat fond připojení blokování období pro Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="7f5f2-101">Connection pool blocking period for Azure SQL databases is removed</span></span>

|   |   |
|---|---|
|<span data-ttu-id="7f5f2-102">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="7f5f2-102">Details</span></span>|<span data-ttu-id="7f5f2-103">Od verze rozhraní .NET Framework 4.6.2, pro připojení k otevření žádosti o známých databází Azure SQL (*. database.windows.net, *. database.chinacloudapi.cn, *. database.usgovcloudapi.net, *. database.cloudapi.de), fond připojení je blokování období odebrat, a otevřete chyb připojení nejsou uložené v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="7f5f2-103">Starting with the .NET Framework 4.6.2, for connection open requests to known Azure SQL databases (*.database.windows.net, *.database.chinacloudapi.cn, *.database.usgovcloudapi.net, *.database.cloudapi.de), the connection pool blocking period is removed, and connection open errors are not cached.</span></span> <span data-ttu-id="7f5f2-104">Pokusy o opakování otevřené žádosti o připojení dojde k téměř okamžitě po připojení přechodné chyby.</span><span class="sxs-lookup"><span data-stu-id="7f5f2-104">Attempts to retry connection open requests will occur almost immediately after transient connection errors.</span></span> <span data-ttu-id="7f5f2-105">Tato změna umožňuje otevřít pokus o připojení k opakovat okamžitě pro Azure SQL Database, následné vylepšení výkonu aplikací pro cloud-povoleno.</span><span class="sxs-lookup"><span data-stu-id="7f5f2-105">This change allows the connection open attempt to be retried immediately for Azure SQL databases, thereby improving the performance of cloud- enabled apps.</span></span> <span data-ttu-id="7f5f2-106">Pro všechny ostatní pokusy o připojení pokračuje v období blokování fondu připojení vynucení.</span><span class="sxs-lookup"><span data-stu-id="7f5f2-106">For all other connection attempts, the connection pool blocking period continues to be enforced.</span></span><p/><span data-ttu-id="7f5f2-107">V rozhraní .NET Framework 4.6.1 a starší verze pokud aplikace zjistí chyba přechodného připojení při připojování k databázi, pokus o připojení se nedá opakovat, rychle, protože fond připojení ukládá do mezipaměti, chyby a znovu vyvolá po dobu 5 sekund do 1 minuty.</span><span class="sxs-lookup"><span data-stu-id="7f5f2-107">In the .NET Framework 4.6.1 and earlier versions, when an app encounters a transient connection failure when connecting to a database, the connection attempt cannot be retried quickly, because the connection pool caches the error and re-throws it for 5 seconds to 1 minute.</span></span> <span data-ttu-id="7f5f2-108">Další informace najdete v tématu [SQL sdružování připojení serveru (ADO.NET)](~/docs/framework/data/adonet/sql-server-connection-pooling.md).</span><span class="sxs-lookup"><span data-stu-id="7f5f2-108">For more information, see [SQL Server Connection Pooling (ADO.NET)](~/docs/framework/data/adonet/sql-server-connection-pooling.md).</span></span> <span data-ttu-id="7f5f2-109">Toto chování je problematické pro připojení k databázím Azure SQL, které často dojde k přechodným chybám, které jsou obvykle obnovila během několika sekund.</span><span class="sxs-lookup"><span data-stu-id="7f5f2-109">This behavior is problematic for connections to Azure SQL databases, which often fail with transient errors that are typically recovered from within a few seconds.</span></span> <span data-ttu-id="7f5f2-110">Blokuje funkce fondu připojení znamená, že aplikace nemůže připojit k databázi rozsáhlé dobu, i když je k dispozici databáze a aplikace je potřeba vykreslit během několika sekund.</span><span class="sxs-lookup"><span data-stu-id="7f5f2-110">The connection pool blocking feature means that the app cannot connect to the database for an extensive period, even though the database is available and the app needs to render within a few seconds.</span></span>|
|<span data-ttu-id="7f5f2-111">Návrh</span><span class="sxs-lookup"><span data-stu-id="7f5f2-111">Suggestion</span></span>|<span data-ttu-id="7f5f2-112">Pokud toto chování nežádoucí, v období blokování fondu připojení lze nastavit tak, že nastavíte <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> vlastnost zavedena v rozhraní .NET Framework 4.6.2.</span><span class="sxs-lookup"><span data-stu-id="7f5f2-112">If this behavior is undesirable, the connection pool blocking period can be configured by setting the <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> property introduced in the .NET Framework 4.6.2.</span></span> <span data-ttu-id="7f5f2-113">Hodnota vlastnosti je členem skupiny <xref:System.Data.SqlClient.PoolBlockingPeriod?displayProperty=name> výčet, který může mít jednu ze tří hodnot:</span><span class="sxs-lookup"><span data-stu-id="7f5f2-113">The value of the property is a member of the <xref:System.Data.SqlClient.PoolBlockingPeriod?displayProperty=name> enumeration that can take either of three values:</span></span><ul><li><xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.Auto></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.NeverBlock></li></ul><span data-ttu-id="7f5f2-114">Předchozí chování můžete obnovit nastavením <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> vlastnost <xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock>.</span><span class="sxs-lookup"><span data-stu-id="7f5f2-114">The previous behavior can be restored by setting the <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> property to <xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock>.</span></span>|
|<span data-ttu-id="7f5f2-115">Rozsah</span><span class="sxs-lookup"><span data-stu-id="7f5f2-115">Scope</span></span>|<span data-ttu-id="7f5f2-116">Vedlejší</span><span class="sxs-lookup"><span data-stu-id="7f5f2-116">Minor</span></span>|
|<span data-ttu-id="7f5f2-117">Version</span><span class="sxs-lookup"><span data-stu-id="7f5f2-117">Version</span></span>|<span data-ttu-id="7f5f2-118">4.6.2</span><span class="sxs-lookup"><span data-stu-id="7f5f2-118">4.6.2</span></span>|
|<span data-ttu-id="7f5f2-119">Typ</span><span class="sxs-lookup"><span data-stu-id="7f5f2-119">Type</span></span>|<span data-ttu-id="7f5f2-120">Modul runtime</span><span class="sxs-lookup"><span data-stu-id="7f5f2-120">Runtime</span></span>|
|<span data-ttu-id="7f5f2-121">Ovlivněné rozhraní API</span><span class="sxs-lookup"><span data-stu-id="7f5f2-121">Affected APIs</span></span>|<ul><li><xref:System.Data.Common.DbConnection.OpenAsync?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.Open?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.OpenAsync(System.Threading.CancellationToken)?displayProperty=nameWithType></li></ul>|

